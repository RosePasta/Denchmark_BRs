{"BR": {"BR_id": "10648", "BR_author": "csukuangfj", "BRopenT": "2018-01-19T19:00:23Z", "BRcloseT": "2018-01-21T06:26:49Z", "BR_text": {"BRsummary": "Compile error of high gui with QT", "BRdescription": "\n <denchmark-h:h2>System information (version)</denchmark-h>\n \n \n OpenCV => master\n Operating System / Platform => macOS\n Compiler => clang\n \n <denchmark-h:h2>Error log</denchmark-h>\n \n <denchmark-code>[ 76%] Built target opencv_videoio\n [ 76%] Building CXX object modules/highgui/CMakeFiles/opencv_highgui.dir/src/window_QT.cpp.o\n /Users/xxx/software/opencv/modules/highgui/src/window_QT.cpp:970:29: error: \n       no member named 'mapToGlobal' in 'ViewPort'\n     QPoint org = w->myView->mapToGlobal(new QPoint(0, 0));\n                  ~~~~~~~~~  ^\n /Users/xxx/software/opencv/modules/highgui/src/window_QT.cpp:970:21: error: \n       'myView' is a private member of 'CvWindow'\n     QPoint org = w->myView->mapToGlobal(new QPoint(0, 0));\n                     ^\n /Users/xxx/software/opencv/modules/highgui/src/window_QT.h:346:15: note: \n       declared private here\n     ViewPort* myView;\n               ^\n /Users/xxx/software/opencv/modules/highgui/src/window_QT.cpp:976:22: error: \n       'myView' is a private member of 'CvWindow'\n     return cvRect(w->myView->viewport()->pos().x() + org.x, w->myView->v...\n                      ^\n /Users/xxx/software/opencv/modules/highgui/src/window_QT.h:346:15: note: \n       declared private here\n     ViewPort* myView;\n               ^\n /Users/xxx/software/opencv/modules/highgui/src/window_QT.cpp:976:58: error: \n       reference to non-static member function must be called; did you mean to\n       call it with no arguments?\n     return cvRect(w->myView->viewport()->pos().x() + org.x, w->myView->v...\n                                                      ~~~~^\n                                                           ()\n /Users/xxx/software/opencv/modules/highgui/src/window_QT.cpp:976:64: error: \n       'myView' is a private member of 'CvWindow'\n     return cvRect(w->myView->viewport()->pos().x() + org.x, w->myView->v...\n                                                                ^\n /Users/xxx/software/opencv/modules/highgui/src/window_QT.h:346:15: note: \n       declared private here\n     ViewPort* myView;\n               ^\n /Users/xxx/software/opencv/modules/highgui/src/window_QT.cpp:976:100: error: \n       reference to non-static member function must be called; did you mean to\n       call it with no arguments?\n   ...+ org.x, w->myView->viewport()->pos().y() + org.y, w->myView->viewport()...\n                                                  ~~~~^\n                                                       ()\n /Users/xxx/software/opencv/modules/highgui/src/window_QT.cpp:976:106: error: \n       'myView' is a private member of 'CvWindow'\n   ...+ org.x, w->myView->viewport()->pos().y() + org.y, w->myView->viewport()...\n                                                            ^\n /Users/xxx/software/opencv/modules/highgui/src/window_QT.h:346:15: note: \n       declared private here\n     ViewPort* myView;\n               ^\n /Users/xxx/software/opencv/modules/highgui/src/window_QT.cpp:976:138: error: \n       'myView' is a private member of 'CvWindow'\n   ...+ org.y, w->myView->viewport()->width(), w->myView->viewport()->height());\n                                                  ^\n /Users/xxx/software/opencv/modules/highgui/src/window_QT.h:346:15: note: \n       declared private here\n     ViewPort* myView;\n               ^\n /Users/xxx/software/opencv/modules/highgui/src/window_QT.cpp:976:30: error: \n       no member named 'viewport' in 'ViewPort'\n     return cvRect(w->myView->viewport()->pos().x() + org.x, w->myView->v...\n                   ~~~~~~~~~  ^\n /Users/xxx/software/opencv/modules/highgui/src/window_QT.cpp:976:72: error: \n       no member named 'viewport' in 'ViewPort'\n     return cvRect(w->myView->viewport()->pos().x() + org.x, w->myView->viewp...\n                                                             ~~~~~~~~~  ^\n /Users/xxx/software/opencv/modules/highgui/src/window_QT.cpp:976:114: error: \n       no member named 'viewport' in 'ViewPort'\n   ...+ org.x, w->myView->viewport()->pos().y() + org.y, w->myView->viewport()...\n                                                         ~~~~~~~~~  ^\n /Users/xxx/software/opencv/modules/highgui/src/window_QT.cpp:976:146: error: \n       no member named 'viewport' in 'ViewPort'\n   ...+ org.y, w->myView->viewport()->width(), w->myView->viewport()->height());\n                                               ~~~~~~~~~  ^\n 12 errors generated.\n make[2]: *** [modules/highgui/CMakeFiles/opencv_highgui.dir/src/window_QT.cpp.o] Error 1\n make[1]: *** [modules/highgui/CMakeFiles/opencv_highgui.dir/all] Error 2\n make: *** [all] Error 2\n </denchmark-code>\n \n <denchmark-h:h2>Configuration</denchmark-h>\n \n #!/bin/bash\n \n cmake \\\n  -D CMAKE_BUILD_TYPE=RELEASE \\\n  -D CMAKE_INSTALL_PREFIX=$HOME/software/opencv-install \\\n  \\\n  -D WITH_TBB=ON \\\n  -D BUILD_NEW_PYTHON_SUPPORT=OFF \\\n  -D WITH_V4L=OFF \\\n  -D INSTALL_C_EXAMPLES=OFF \\\n  -D INSTALL_PYTHON_EXAMPLES=OFF \\\n  -D BUILD_EXAMPLES=OFF \\\n  -D BUILD_DOCS=OFF \\\n  -D WITH_QT=ON \\\n  -D WITH_OPENGL=OFF \\\n  -D WITH_CUDA=OFF \\\n  -D WITH_OPENCL=OFF \\\n  -D WITH_MATLAB=OFF \\\n  -D WITH_VTK=ON \\\n  -DBUILD_TESTS=OFF \\\n  -DBUILD_PERF_TESTS=OFF \\\n  \\\n  -DBUILD_opencv_java=OFF \\\n  -DBUILD_python_bindings_generator=OFF \\\n  -DBUILD_opencv_python2=OFF \\\n  -DBUILD_opencv_python3=OFF \\\n  -DBUILD_opencv_ml=OFF \\\n  -DBUILD_opencv_objdetect=OFF \\\n  -DBUILD_opencv_superres=OFF \\\n  -DBUILD_opencv_videostab=OFF \\\n  \\\n  -DBUILD_opencv_phase_unwrapping=OFF \\\n  -DBUILD_opencv_plot=OFF \\\n  -DBUILD_opencv_reg=OFF \\\n  -DBUILD_opencv_surface_matching=OFF \\\n  -DBUILD_opencv_xphoto=OFF \\\n  -DBUILD_opencv_bgsegm=OFF \\\n  -DBUILD_opencv_face=OFF \\\n  -DBUILD_opencv_freetype=OFF \\\n  -DBUILD_opencv_fuzzy=OFF \\\n  -DBUILD_opencv_img_hash=OFF \\\n  -DBUILD_opencv_xobjdetect=OFF \\\n  -DBUILD_opencv_bioinspired=OFF \\\n  -DBUILD_opencv_dpm=OFF \\\n  -DBUILD_opencv_line_descriptor=OFF \\\n  -DBUILD_opencv_saliency=OFF \\\n  -DBUILD_opencv_text=OFF \\\n  -DBUILD_opencv_ccalib=OFF \\\n  -DBUILD_opencv_cvv=OFF \\\n  -DBUILD_opencv_datasets=OFF \\\n  -DBUILD_opencv_rgbd=OFF \\\n  -DBUILD_opencv_structured_light=OFF \\\n  -DBUILD_opencv_tracking=OFF \\\n  -DBUILD_opencv_videostab=OFF \\\n  -DBUILD_opencv_aruco=OFF \\\n  -DOPENCV_EXTRA_MODULES_PATH=../opencv_contrib/modules \\\n  ../opencv\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "csukuangfj", "commentT": "2018-01-19T19:47:13Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/csukuangfj>@csukuangfj</denchmark-link>\n , just to make it simpler, we can use  etc. now with names of modules to build.\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "csukuangfj", "commentT": "2018-01-19T19:50:00Z", "comment_text": "\n \t\tThere are so many modules that I do not need.\n If -DBUILD_LIST is defined, does it compile only the modules listed in -DBUILD_LIST?\n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "csukuangfj", "commentT": "2018-01-19T21:17:12Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/csukuangfj>@csukuangfj</denchmark-link>\n  Take a look on BUILD_LIST description here: <denchmark-link:https://github.com/opencv/opencv/pull/9893>#9893</denchmark-link>\n \n What QT version is used?\n \t\t"}, "comments_3": {"comment_id": 4, "comment_author": "csukuangfj", "commentT": "2018-01-19T21:20:56Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/alalek>@alalek</denchmark-link>\n \n Thank you for the reply.\n QT 5.6.0 is used.\n \t\t"}, "comments_4": {"comment_id": 5, "comment_author": "csukuangfj", "commentT": "2018-01-19T21:25:35Z", "comment_text": "\n \t\tLooks like it is related to <denchmark-link:https://github.com/opencv/opencv/pull/10412>#10412</denchmark-link>\n \n <denchmark-link:https://github.com/GregoryMorse>@GregoryMorse</denchmark-link>\n  Could you take a look on this please?\n \t\t"}, "comments_5": {"comment_id": 6, "comment_author": "csukuangfj", "commentT": "2018-01-19T23:11:48Z", "comment_text": "\n \t\tYes, this bug was introduced - I am setting up an environment and will test the QT code paths, as it is the only configuration that was not included in my various own tests or the automated build tests.  I suppose I will open a new PR to fix it shortly.  In the meantime, returning a cvRect(-1, -1, -1, -1) to solve the compile errors may suffice.  Or the proposed fix will be available in a new PR <denchmark-link:https://github.com/opencv/opencv/pull/10649/files>https://github.com/opencv/opencv/pull/10649/files</denchmark-link>\n \n \t\t"}}}, "commit": {"commit_id": "d84c7e514330c28d72071ebab685c4efcd0d0618", "commit_author": "Gregory Morse", "commitT": "2018-01-21 09:26:48+03:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "modules\\highgui\\src\\window_QT.cpp", "file_new_name": "modules\\highgui\\src\\window_QT.cpp", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "970", "deleted_lines": "970,971", "method_info": {"method_name": "GuiReceiver::getWindowRect", "method_params": "name", "method_startline": "963", "method_endline": "971"}}, "hunk_1": {"Ismethod": 1, "added_lines": "1778,1779,1780,1781,1782,1783,1784", "deleted_lines": null, "method_info": {"method_name": "CvWindow::getWindowRect", "method_params": "", "method_startline": "1778", "method_endline": "1784"}}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "modules\\highgui\\src\\window_QT.h", "file_new_name": "modules\\highgui\\src\\window_QT.h", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "302", "deleted_lines": null}}}, "file_2": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "modules\\highgui\\test\\test_gui.cpp", "file_new_name": "modules\\highgui\\test\\test_gui.cpp", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "87,88", "deleted_lines": "87", "method_info": {"method_name": "CV_HighGuiOnlyGuiTest::run", "method_params": "int", "method_startline": "59", "method_endline": "93"}}}}}}}