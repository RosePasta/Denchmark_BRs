{"BR": {"BR_id": "5296", "BR_author": "ghost(ghost)", "BRopenT": "2015-09-03T10:11:46Z", "BRcloseT": "2019-12-19T14:40:53Z", "BR_text": {"BRsummary": "Multiple MOG2_GPU objects share the same parameter values", "BRdescription": "\n Hi,\n While using MOG2_GPU class, I realized that if you have two MOG2_GPU objets whenever you modify any parameter of one of the objects, the other is affected too.\n Taking a look at OpenCV code, I think that this is related to the declaration of MOG2_GPU parameters in file \"opencv/modules/cudabgsegm/src/cuda/mog2.cu\", where MOG2_GPU variables are allocated only once, independently from the number of MOG2_GPU objects . As a consequence, each object that calls the loadConstants method, overwrites the variables values affecting every MOG2_GPU object.\n I think that this implementation is similar to other gpu classes, so I suppose the same situation takes place with these classes.\n My question is whether there is any plan to modify this behavior or this was implemented intentionally and there will be no modification in the future.\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "ghost(ghost)", "commentT": "2019-12-04T16:05:21Z", "comment_text": "\n \t\tThis one recently bit us... Any ideas if someone is working on it?\n Seems like, at the very least, the API should prevent allowing the creation of multiple instances of this. And/or the documentation should point out that it is unsafe...\n \t\t"}}}, "commit": {"commit_id": "5bf73457431b7d2cb87ac8c107865388dbf66642", "commit_author": "jeffeDurand", "commitT": "2019-12-19 13:02:48+03:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "modules\\cudabgsegm\\src\\cuda\\mog2.cu", "file_new_name": "modules\\cudabgsegm\\src\\cuda\\mog2.cu", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "50,52,53,54,55,56,57,58,59,60,61,63,64,65,66,67,68,69,70,71,72,73,74,76,77,78,79,80,81,82,83,84,85,86,87,89,90,91,92,93,94,95,96,97,98,99,100,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,121,122,123,125,126,128,130,132,134,135,137,139,141,142,143,144,145,146,147,149,150,152,154,155,156,158,159,160,162,163,164,165,166,168,170,171,172,174,175,177,178,180,181,182,184,186,187,188,190,191,192,193,194,196,197,198,199,200,203,205,207,208,209,210,211,214,215,216,218,220,221,222,224,226,228,229,230,231,233,234,235,236,237,239,241,242,243,245,247,248,250,251,253,254,255,256,257,258,259,260,261,262,264,266,267,269,270,271,272,274,275,276,277,279,281,282,284,285,286,288,289,290,291,293,295,296,297,299,300,302,303,304,305,308,309,310,312,313,314,315,316,317,319,321,322,323,325,326,327,328,329,330,331,333,334,335,336,338,340,341,342,344,345,346,347,349,351,353,354,356,357,358,359,360,362,363,365,367,368,370,371,372,374,375,377,379,380,381,383,385,386,388,389,390,391,392,394,396,397,399,400,401,403,404,405,407,408,409,410,411,412,413,414,415,416", "deleted_lines": "50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,107,108,109,110,111,112,113,114,115,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,133,134,135,136,137,138,139,141,142,144,146,147,149,151,153,155,156,158,160,162,164,165,166,167,168,169,170,171,172,173,175,176,177,179,180,181,183,184,185,186,187,189,191,192,193,195,196,198,199,201,202,203,205,207,208,209,211,212,213,214,215,217,218,219,220,221,222,224,226,228,229,230,231,232,235,236,239,241,242,243,245,247,249,250,251,252,254,255,256,257,258,260,262,263,264,266,268,269,271,272,274,275,276,277,278,280,281,282,283,284,287,288,290,291,292,293,295,296,297,298,300,302,303,305,306,307,308,309,310,311,312,314,316,317,318,319,320,321,323,324,326,327,329,332,333,334,335,336,337,338,339,341,342,343,345,346,347,348,349,350,351,353,354,355,356,358,360,361,362,364,365,366,367,369,370,371,372,374,375,377,378,380,381,383,384,386,388,389,391,392,393,395,396,398,400,401,402,404,406,407,409,410,411,412,413,415,417,418,420,421,422,424,425,426,428,429,430,431,433,434,435,436"}}}, "file_1": {"file_change_type": "ADD", "file_Nmethod": 0, "file_old_name": "None", "file_new_name": "modules\\cudabgsegm\\src\\cuda\\mog2.hpp"}, "file_2": {"file_change_type": "MODIFY", "file_Nmethod": 33, "file_old_name": "modules\\cudabgsegm\\src\\mog2.cpp", "file_new_name": "modules\\cudabgsegm\\src\\mog2.cpp", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "105", "deleted_lines": "105", "method_info": {"method_name": "MOG2ImplCV_FINAL::setVarInit", "method_params": "varInit", "method_startline": "105", "method_endline": "105"}}, "hunk_1": {"Ismethod": 1, "added_lines": "147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165", "deleted_lines": "147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165", "method_info": {"method_name": "MOG2Impl::MOG2Impl", "method_params": "history,varThreshold,detectShadows", "method_startline": "147", "method_endline": "165"}}, "hunk_2": {"Ismethod": 1, "added_lines": "107", "deleted_lines": "107", "method_info": {"method_name": "MOG2ImplCV_FINAL::getVarMin", "method_params": "", "method_startline": "107", "method_endline": "107"}}, "hunk_3": {"Ismethod": 1, "added_lines": "93", "deleted_lines": "93", "method_info": {"method_name": "MOG2ImplCV_FINAL::setNMixtures", "method_params": "nmixtures", "method_startline": "93", "method_endline": "93"}}, "hunk_4": {"Ismethod": 1, "added_lines": "177,179,180,181,183,184,186,187,189,190,192,194,195,196,198,199,200", "deleted_lines": "177,179,180,181,183,185,186,188,189,191,192,194,196,197,198,200", "method_info": {"method_name": "MOG2Impl::apply", "method_params": "_frame,_fgmask,learningRate,stream", "method_startline": "177", "method_endline": "200"}}, "hunk_5": {"Ismethod": 1, "added_lines": "219,221,223,224,225,227,228,230,231,232,233,234,235,236,238,239,240,242,244", "deleted_lines": "219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,244,245", "method_info": {"method_name": "MOG2Impl::initialize", "method_params": "frameSize,frameType", "method_startline": "219", "method_endline": "245"}}, "hunk_6": {"Ismethod": 1, "added_lines": "89", "deleted_lines": "89", "method_info": {"method_name": "MOG2ImplCV_FINAL::getHistory", "method_params": "", "method_startline": "89", "method_endline": "89"}}, "hunk_7": {"Ismethod": 1, "added_lines": "98", "deleted_lines": "98", "method_info": {"method_name": "MOG2ImplCV_FINAL::getVarThreshold", "method_params": "", "method_startline": "98", "method_endline": "98"}}, "hunk_8": {"Ismethod": 1, "added_lines": "52,53,54,55,56", "deleted_lines": "54,56", "method_info": {"method_name": "cv::cuda::createBackgroundSubtractorMOG2", "method_params": "int,double,bool", "method_startline": "52", "method_endline": "56"}}, "hunk_9": {"Ismethod": 1, "added_lines": "110", "deleted_lines": "110", "method_info": {"method_name": "MOG2ImplCV_FINAL::getVarMax", "method_params": "", "method_startline": "110", "method_endline": "110"}}, "hunk_10": {"Ismethod": 1, "added_lines": "96", "deleted_lines": "96", "method_info": {"method_name": "MOG2ImplCV_FINAL::setBackgroundRatio", "method_params": "ratio", "method_startline": "96", "method_endline": "96"}}, "hunk_11": {"Ismethod": 1, "added_lines": "123", "deleted_lines": "123", "method_info": {"method_name": "MOG2ImplCV_FINAL::setShadowThreshold", "method_params": "threshold", "method_startline": "123", "method_endline": "123"}}, "hunk_12": {"Ismethod": 1, "added_lines": "104", "deleted_lines": "104", "method_info": {"method_name": "MOG2ImplCV_FINAL::getVarInit", "method_params": "", "method_startline": "104", "method_endline": "104"}}, "hunk_13": {"Ismethod": 1, "added_lines": "111", "deleted_lines": "111", "method_info": {"method_name": "MOG2ImplCV_FINAL::setVarMax", "method_params": "varMax", "method_startline": "111", "method_endline": "111"}}, "hunk_14": {"Ismethod": 1, "added_lines": "113", "deleted_lines": "113", "method_info": {"method_name": "MOG2ImplCV_FINAL::getComplexityReductionThreshold", "method_params": "", "method_startline": "113", "method_endline": "113"}}, "hunk_15": {"Ismethod": 1, "added_lines": "90", "deleted_lines": "90", "method_info": {"method_name": "MOG2ImplCV_FINAL::setHistory", "method_params": "history", "method_startline": "90", "method_endline": "90"}}, "hunk_16": {"Ismethod": 1, "added_lines": "117", "deleted_lines": "117", "method_info": {"method_name": "MOG2ImplCV_FINAL::setDetectShadows", "method_params": "detectShadows", "method_startline": "117", "method_endline": "117"}}, "hunk_17": {"Ismethod": 1, "added_lines": "101", "deleted_lines": "101", "method_info": {"method_name": "MOG2ImplCV_FINAL::getVarThresholdGen", "method_params": "", "method_startline": "101", "method_endline": "101"}}, "hunk_18": {"Ismethod": 1, "added_lines": "217,218,219,221,223,224,225,227,228,230,231,232,233,234,235,236,238,239,240,242", "deleted_lines": "217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242", "method_info": {"method_name": "MOG2Impl::initialize", "method_params": "frameSize,frameType,stream", "method_startline": "217", "method_endline": "243"}}, "hunk_19": {"Ismethod": 1, "added_lines": "172,173,174,175", "deleted_lines": "172,174,175", "method_info": {"method_name": "MOG2Impl::apply", "method_params": "image,fgmask,learningRate", "method_startline": "172", "method_endline": "175"}}, "hunk_20": {"Ismethod": 1, "added_lines": "108", "deleted_lines": "108", "method_info": {"method_name": "MOG2ImplCV_FINAL::setVarMin", "method_params": "varMin", "method_startline": "108", "method_endline": "108"}}, "hunk_21": {"Ismethod": 1, "added_lines": "120", "deleted_lines": "120", "method_info": {"method_name": "MOG2ImplCV_FINAL::setShadowValue", "method_params": "value", "method_startline": "120", "method_endline": "120"}}, "hunk_22": {"Ismethod": 1, "added_lines": "167,168,169,170", "deleted_lines": "167,168,169,170", "method_info": {"method_name": "MOG2Impl::~MOG2Impl", "method_params": "", "method_startline": "167", "method_endline": "170"}}, "hunk_23": {"Ismethod": 1, "added_lines": "202,203,204,205", "deleted_lines": "202,204,205", "method_info": {"method_name": "MOG2Impl::getBackgroundImage", "method_params": "backgroundImage", "method_startline": "202", "method_endline": "205"}}, "hunk_24": {"Ismethod": 1, "added_lines": "207,208,209,210,211,212,213,214,215", "deleted_lines": "207,208,209,210,211,212,213,214,215", "method_info": {"method_name": "MOG2Impl::getBackgroundImage", "method_params": "_backgroundImage,stream", "method_startline": "207", "method_endline": "215"}}, "hunk_25": {"Ismethod": 1, "added_lines": "114", "deleted_lines": "114", "method_info": {"method_name": "MOG2ImplCV_FINAL::setComplexityReductionThreshold", "method_params": "ct", "method_startline": "114", "method_endline": "114"}}, "hunk_26": {"Ismethod": 1, "added_lines": "99", "deleted_lines": "99", "method_info": {"method_name": "MOG2ImplCV_FINAL::setVarThreshold", "method_params": "varThreshold", "method_startline": "99", "method_endline": "99"}}, "hunk_27": {"Ismethod": 1, "added_lines": "116", "deleted_lines": "116", "method_info": {"method_name": "MOG2ImplCV_FINAL::getDetectShadows", "method_params": "", "method_startline": "116", "method_endline": "116"}}, "hunk_28": {"Ismethod": 1, "added_lines": "122", "deleted_lines": "122", "method_info": {"method_name": "MOG2ImplCV_FINAL::getShadowThreshold", "method_params": "", "method_startline": "122", "method_endline": "122"}}, "hunk_29": {"Ismethod": 1, "added_lines": "119", "deleted_lines": "119", "method_info": {"method_name": "MOG2ImplCV_FINAL::getShadowValue", "method_params": "", "method_startline": "119", "method_endline": "119"}}, "hunk_30": {"Ismethod": 1, "added_lines": "102", "deleted_lines": "102", "method_info": {"method_name": "MOG2ImplCV_FINAL::setVarThresholdGen", "method_params": "varThresholdGen", "method_startline": "102", "method_endline": "102"}}, "hunk_31": {"Ismethod": 1, "added_lines": "95", "deleted_lines": "95", "method_info": {"method_name": "MOG2ImplCV_FINAL::getBackgroundRatio", "method_params": "", "method_startline": "95", "method_endline": "95"}}, "hunk_32": {"Ismethod": 1, "added_lines": "92", "deleted_lines": "92", "method_info": {"method_name": "MOG2ImplCV_FINAL::getNMixtures", "method_params": "", "method_startline": "92", "method_endline": "92"}}}}}}}