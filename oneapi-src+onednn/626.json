{"BR": {"BR_id": "626", "BR_author": "andoma", "BRopenT": "2020-01-04T18:28:01Z", "BRcloseT": "2020-01-14T18:19:22Z", "BR_text": {"BRsummary": "MacOS TBB build depends on libiomp5.dylib?", "BRdescription": "\n Not sure if I misunderstand the docs or not, but as I read it the TBB version should not depend on libiomp5?\n <denchmark-h:h3>iomp version</denchmark-h>\n \n Depends on libiomp5.dylib as expected\n <denchmark-code>$ otool -L mkldnn_mac_1.0.4_cpu_iomp/lib/libmkldnn.1.dylib\n mkldnn_mac_1.0.4_cpu_iomp/lib/libmkldnn.1.dylib:\n \tlibmkldnn.1.dylib (compatibility version 1.0.0, current version 1.0.0)\n \t@rpath/libiomp5.dylib (compatibility version 5.0.0, current version 5.0.0)\n \t/usr/lib/libc++.1.dylib (compatibility version 1.0.0, current version 400.9.0)\n \t/usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 1252.50.4)\n </denchmark-code>\n \n <denchmark-h:h3>TBB version</denchmark-h>\n \n Depends on both libiomp5.dylib and libtbb.dylib?\n <denchmark-code>$ otool -L mkldnn_mac_1.0.4_cpu_tbb/lib/libmkldnn.1.dylib\n mkldnn_mac_1.0.4_cpu_tbb/lib/libmkldnn.1.dylib:\n \tlibmkldnn.1.dylib (compatibility version 1.0.0, current version 1.0.0)\n \t@rpath/libiomp5.dylib (compatibility version 5.0.0, current version 5.0.0)\n \t@rpath/libtbb.dylib (compatibility version 0.0.0, current version 0.0.0)\n \t/usr/lib/libc++.1.dylib (compatibility version 1.0.0, current version 400.9.0)\n \t/usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 1252.50.4)\n </denchmark-code>\n \n Briefly checked the 1.1 -versions and they  have the same dependencies.\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "andoma", "commentT": "2020-01-04T19:07:32Z", "comment_text": "\n \t\tHi <denchmark-link:https://github.com/andoma>@andoma</denchmark-link>\n , thanks for the report. I also see that there is a dependency, but there don't seem to be any symbols that refer to the OpenMP library. This looks like a bug in our build system. I'm guessing that we attempt to enable  while trying to avoid having a full OpenMP dependency, but it seems like it does not work.\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "andoma", "commentT": "2020-01-08T18:52:11Z", "comment_text": "\n \t\tA fix has been merged into our internal repo and will be promoted soon and will apply to the DNNL v1.2 release. Please let me know if you need it to be backported to 1.1.\n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "andoma", "commentT": "2020-01-10T23:45:16Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/rsdubtso>@rsdubtso</denchmark-link>\n  Thanks, I'm just starting to use DNNL so any version is fine for me.\n \t\t"}}}, "commit": {"commit_id": "ab0ff04f1b2be3a208457fbc3cc5615e1955db52", "commit_author": "Roman Dubtsov", "commitT": "2020-01-08 20:19:25+03:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "cmake\\platform.cmake", "file_new_name": "cmake\\platform.cmake", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "157,158,159,160", "deleted_lines": "157"}}}}}}