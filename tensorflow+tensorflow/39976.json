{"BR": {"BR_id": "39976", "BR_author": "gnovack", "BRopenT": "2020-05-29T02:42:14Z", "BRcloseT": "2020-06-06T01:38:34Z", "BR_text": {"BRsummary": "RandomContrast Layer - confusing __init__ error message", "BRdescription": "\n System information\n \n Have I written custom code (as opposed to using a stock example script provided in TensorFlow): yes\n OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Colab\n TensorFlow installed from (source or binary): Colab\n TensorFlow version (use command below): 2.2.0\n Python version: 3.6.9\n \n Describe the current behavior\n When instantiating a RandomContrast layer object with a value > 1. (e.g. 2) for the Factor parameter, a ValueError is raised with the following error message which is somewhat confusing in this scenario: 'Factor cannot have negative values, got 2'\n Describe the expected behavior\n A ValueError should be raised with a more appropriate error message, something like: 'Factor cannot be greater than 1, got 2'\n Standalone code to reproduce the issue\n random_contrast_layer = tf.keras.layers.experimental.preprocessing.RandomContrast(2)\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "gnovack", "commentT": "2020-05-29T15:12:16Z", "comment_text": "\n \t\tWas able to reproduce the issue with <denchmark-link:https://colab.research.google.com/gist/amahendrakar/46ccdd512567b0dd3cf99a9548aead9c/39976.ipynb>TF v2.2</denchmark-link>\n  and <denchmark-link:https://colab.research.google.com/gist/amahendrakar/54056391942fbc1344d936558161b88f/39976-tf-nightly.ipynb>TF-nightly</denchmark-link>\n . Please find the attached gist. Thanks!\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "gnovack", "commentT": "2020-06-06T01:07:04Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/gnovack>@gnovack</denchmark-link>\n  Thanks for reporting this issue. The RandomContrast layer looks for two element factor (lower_bound, upper_bound) or single element where the factor should be between 0 and 1.\n The error message is improved. Please take a look at the <denchmark-link:https://colab.research.google.com/gist/jvishnuvardhan/6df7f036a25ff296903e9a74febc7e4e/39976-tf-nightly.ipynb>gist here</denchmark-link>\n . Thanks!\n Please verify once and close the issue if this was resolved for you. Thanks!\n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "gnovack", "commentT": "2020-06-06T01:38:33Z", "comment_text": "\n \t\tLooks great. Thanks <denchmark-link:https://github.com/jvishnuvardhan>@jvishnuvardhan</denchmark-link>\n \n \t\t"}, "comments_3": {"comment_id": 4, "comment_author": "gnovack", "commentT": "2020-06-06T01:38:35Z", "comment_text": "\n \t\tAre you satisfied with the resolution of your issue?\n <denchmark-link:https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=Yes&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/39976>Yes</denchmark-link>\n \n <denchmark-link:https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=No&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/39976>No</denchmark-link>\n \n \t\t"}}}, "commit": {"commit_id": "25213f58c433d3712931b4071d2498bb67f8c2ca", "commit_author": "A. Unique TensorFlower", "commitT": "2020-06-01 12:21:48-07:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "tensorflow\\python\\keras\\layers\\preprocessing\\image_preprocessing.py", "file_new_name": "tensorflow\\python\\keras\\layers\\preprocessing\\image_preprocessing.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "1069,1070", "deleted_lines": "1069,1070", "method_info": {"method_name": "__init__", "method_params": "self,factor,seed,name,kwargs", "method_startline": "1061", "method_endline": "1073"}}}}}}}