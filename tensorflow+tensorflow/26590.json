{"BR": {"BR_id": "26590", "BR_author": "yugoren", "BRopenT": "2019-03-11T22:22:35Z", "BRcloseT": "2019-03-12T20:48:21Z", "BR_text": {"BRsummary": "[tf.keras.layers.LSTM] Initializer fails with input_length parameter", "BRdescription": "\n System information\n \n Have I written custom code (as opposed to using a stock example script provided in TensorFlow): No\n OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux Ubuntu 16.04\n \n <denchmark-code>4.15.0-46-generic #49~16.04.1-Ubuntu SMP Tue Feb 12 17:45:24 UTC 2019 x86_64 x86_64 x86_64 GNU/Linux\n </denchmark-code>\n \n \n TensorFlow installed from (source or binary): conda as binary.\n TensorFlow version (use command below): 1.10, 1.12, and 1.13 confirmed\n Python version: Python 3.6.6 |Anaconda, Inc.| (default, Oct  9 2018, 12:34:16)\n \n (The following are irrelevant since I'm not even running with a session or in eager mode)\n \n CUDA/cuDNN version: CUDA 9.0\n GPU model and memory: GeForce GTX TITAN X\n \n MWE\n <denchmark-code>import tensorflow as tf\n lstm = tf.keras.layers.LSTM(512, input_length=32)\n </denchmark-code>\n \n Current behavior\n Here's python error message:\n <denchmark-code>Traceback (most recent call last):\n   File \"<stdin>\", line 1, in <module>\n   File \"~/.local/anaconda/envs/tensorflow_p36/lib/python3.6/site-packages/tensorflow/python/keras/layers/recurrent.py\", line 2230, in __init__\n     **kwargs)\n   File \"~/.local/anaconda/envs/tensorflow_p36/lib/python3.6/site-packages/tensorflow/python/keras/layers/recurrent.py\", line 462, in __init__\n     super(RNN, self).__init__(**kwargs)\n   File \"~/.local/anaconda/envs/tensorflow_p36/lib/python3.6/site-packages/tensorflow/python/training/checkpointable/base.py\", line 474, in _method_wrapper\n     method(self, *args, **kwargs)\n   File \"~/.local/anaconda/envs/tensorflow_p36/lib/python3.6/site-packages/tensorflow/python/keras/engine/base_layer.py\", line 138, in __init__\n     raise TypeError('Keyword argument not understood:', kwarg)\n TypeError: ('Keyword argument not understood:', 'input_length')\n </denchmark-code>\n \n \n  class inherits from , which has  as a parameter as described <denchmark-link:https://www.tensorflow.org/versions/r1.13/api_docs/python/tf/keras/layers/RNN>here</denchmark-link>\n . Therefore the constructor of  should use this parameter but it does not as you can see <denchmark-link:https://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/keras/layers/recurrent.py#L391-L399>here</denchmark-link>\n  in the code.\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "yugoren", "commentT": "2019-03-12T05:48:05Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/qlzh727>@qlzh727</denchmark-link>\n  Qianli, are you a good person to look at this?\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "yugoren", "commentT": "2019-03-12T14:19:55Z", "comment_text": "\n \t\tYes, I will take a look within this week.\n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "yugoren", "commentT": "2019-03-12T14:24:12Z", "comment_text": "\n \t\tAh, seems that it is an error in the documentation, the input_length is no longer needed and is inferred from the input tensor shape. I will fix the documentation soon.\n \t\t"}, "comments_3": {"comment_id": 4, "comment_author": "yugoren", "commentT": "2019-03-12T20:48:13Z", "comment_text": "\n \t\tThis should now be fixed.\n \t\t"}}}, "commit": {"commit_id": "8fcf86ec70a2a91e33f222d2be85675f0b773581", "commit_author": "Scott Zhu", "commitT": "2019-03-12 11:55:11-07:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "tensorflow\\python\\keras\\layers\\recurrent.py", "file_new_name": "tensorflow\\python\\keras\\layers\\recurrent.py", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "401,402,403,404,405,406,407", "deleted_lines": "196,253,254,255,256,257,258,259,260,261,262,263"}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "tensorflow\\python\\keras\\layers\\recurrent_test.py", "file_new_name": "tensorflow\\python\\keras\\layers\\recurrent_test.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "1329,1330,1331,1332,1333,1334,1335,1336,1337", "deleted_lines": null, "method_info": {"method_name": "test_input_dim_length", "method_params": "self", "method_startline": "1329", "method_endline": "1337"}}}}}}}