{"BR": {"BR_id": "16100", "BR_author": "progwolff", "BRopenT": "2018-01-13T12:20:41Z", "BRcloseT": "2018-01-22T20:27:14Z", "BR_text": {"BRsummary": "Exception when not providing optional parameter frequency_skip in TimeFreqLSTMCell", "BRdescription": "\n <denchmark-h:h3>System information</denchmark-h>\n \n \n Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes, see below\n OS Platform and Distribution:\n TensorFlow installed from: pip3 install --user tensorflow-gpu\n TensorFlow version: 1.4.1\n Python version: 3.5.2\n CUDA: 8.0\n GPU: NVidia Titan X\n \n <denchmark-h:h3>Describe the problem</denchmark-h>\n \n Using a TimeFreqLSTMCell in a dynamic_rnn or static_rcnn without providing the optional parameter frequency_skip results in an exception:\n <denchmark-code>TypeError: unsupported operand type(s) for /: 'int' and 'NoneType'\n </denchmark-code>\n \n The line which throws this exception is \n \n \n tensorflow/tensorflow/contrib/rnn/python/ops/rnn_cell.py\n \n \n         Lines 474 to 475\n       in\n       8b78c23\n \n \n \n \n \n \n  num_feats = int((input_size - self._feature_size) / ( \n \n \n \n  self._frequency_skip)) + 1 \n \n \n \n \n \n frequency_skip has it's default value None here.\n Maybe the default should be changed to 1?\n <denchmark-h:h3>Source code / logs</denchmark-h>\n \n Sadly I am not allowed to share my full source code. However, this is how I create the RNN layers:\n <denchmark-code>lstmcell = tf.contrib.rnn.TimeFreqLSTMCell(lstm_input.shape.as_list()[2], forget_bias = self.lstm_forget_bias, feature_size = lstm_input_rev.shape.as_list()[2])\n                 \n stacked_lstm = tf.nn.rnn_cell.MultiRNNCell([lstmcell] * self.layers_lstm)\n                 \n lstm_output, lstm_state = tf.nn.dynamic_rnn(stacked_lstm, lstm_input_rev, dtype=\"float32\", time_major=True)\n </denchmark-code>\n \n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "progwolff", "commentT": "2018-01-13T15:02:35Z", "comment_text": "\n \t\tAfter reading the code, I agree that this is a bug. Don't know who knows this most, friendly ping <denchmark-link:https://github.com/cy89>@cy89</denchmark-link>\n \n \t\t"}}}, "commit": {"commit_id": "4b6abfd95254910d01e886123cd24c29f722e8d7", "commit_author": "Julian Wolff", "commitT": "2018-01-22 12:27:14-08:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "tensorflow\\contrib\\rnn\\python\\ops\\rnn_cell.py", "file_new_name": "tensorflow\\contrib\\rnn\\python\\ops\\rnn_cell.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "332", "deleted_lines": "332", "method_info": {"method_name": "__init__", "method_params": "self,num_units,use_peepholes,cell_clip,initializer,num_unit_shards,forget_bias,feature_size,frequency_skip,reuse", "method_startline": "329", "method_endline": "333"}}, "hunk_1": {"Ismethod": 1, "added_lines": "332", "deleted_lines": "332", "method_info": {"method_name": "__init__", "method_params": "self,num_units,use_peepholes,cell_clip,initializer,num_unit_shards,forget_bias,feature_size,frequency_skip,reuse", "method_startline": "329", "method_endline": "333"}}}}}}}