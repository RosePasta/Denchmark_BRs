{"BR": {"BR_id": "28725", "BR_author": "samsamoa", "BRopenT": "2019-05-15T01:46:51Z", "BRcloseT": "2019-06-13T15:46:54Z", "BR_text": {"BRsummary": "Autograph fails for keyword-only arguments", "BRdescription": "\n System information\n \n Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes\n OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux\n TensorFlow installed from (source or binary): pip install tf-nightly-gpu-2.0-preview\n TensorFlow version (use command below): v1.12.1-1847-gc095504 2.0.0-dev20190514\n Python version: 3.7.3\n \n Describe the current behavior\n Autograph complains when compiling functions with keyword-only arguments.\n Example output:\n W0515 01:46:22.158518 139635868194560 ag_logging.py:145] Entity <function f at 0x7eff8120c1e0> could not be transformed and will be executed as-is. Some features (e.g. tensor-dependent conditionals and loops) may not work as expected. Error details can be found in the logs when running with the env variable AUTOGRAPH_VERBOSITY >= 1. Please report this to the AutoGraph team. Cause: Unexpected error transforming <function f at 0x7eff8120c1e0>. If you believe this is due to a bug, please set the verbosity to 10 (on Linux, export AUTOGRAPH_VERBOSITY=10) and attach the full output when filing the bug report. Caused by: inconsistent nodes: None (NoneType) and None (NoneType)\n Describe the expected behavior\n Autograph works for keyword-only arguments\n Code to reproduce the issue\n <denchmark-code>import tensorflow as tf\n @tf.function\n def f(*, a):\n      return a*2\n \n f(a=0)\n </denchmark-code>\n \n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "samsamoa", "commentT": "2019-05-16T09:29:08Z", "comment_text": "\n \t\tI have reproduce the mentioned output with TensorFlow version 2.0.0-dev20190515 on Colab.\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "samsamoa", "commentT": "2019-05-31T17:20:55Z", "comment_text": "\n \t\tThanks for filing the bug! At a glance, it looks related to the lone * arg without a name; probably its name field is None in the AST. We should have fix soon.\n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "samsamoa", "commentT": "2019-06-13T15:46:55Z", "comment_text": "\n \t\tAre you satisfied with the resolution of your issue?\n <denchmark-link:https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=Yes&entry.2137816233=28725>Yes</denchmark-link>\n \n <denchmark-link:https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=No&entry.2137816233=28725>No</denchmark-link>\n \n \t\t"}}}, "commit": {"commit_id": "22ba2ebfc9779ca61e574ddf6411ee5565381cec", "commit_author": "Dan Moldovan", "commitT": "2019-06-13 08:44:08-07:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "tensorflow\\python\\autograph\\impl\\BUILD", "file_new_name": "tensorflow\\python\\autograph\\impl\\BUILD", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68", "deleted_lines": null}}}, "file_1": {"file_change_type": "ADD", "file_Nmethod": 0, "file_old_name": "None", "file_new_name": "tensorflow\\python\\autograph\\impl\\api_py3_test.py"}, "file_2": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "tensorflow\\python\\autograph\\pyct\\ast_util.py", "file_new_name": "tensorflow\\python\\autograph\\pyct\\ast_util.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "286,287,297,298,299", "deleted_lines": "286,287", "method_info": {"method_name": "parallel_walk", "method_params": "node,other", "method_startline": "258", "method_endline": "323"}}}}, "file_3": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "tensorflow\\python\\autograph\\pyct\\pretty_printer.py", "file_new_name": "tensorflow\\python\\autograph\\pyct\\pretty_printer.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "94,95,96,97,107,108,109,110", "deleted_lines": "94,104", "method_info": {"method_name": "generic_visit", "method_params": "self,node,name", "method_startline": "60", "method_endline": "126"}}}}}}}