{"BR": {"BR_id": "1116", "BR_author": "r-yanyo", "BRopenT": "2020-06-06T13:11:41Z", "BRcloseT": "2020-07-14T20:03:29Z", "BR_text": {"BRsummary": "[ASK] Docker build failed at \"RUN python\"", "BRdescription": "\n <denchmark-h:h3>Description</denchmark-h>\n \n Docker build failed at\n RUN python recommenders/scripts/generate_conda_file.py --name base\n <denchmark-h:h3>In which platform does it happen?</denchmark-h>\n \n macOS: 10.15.4\n docker: 19.03.8\n I also tried to build in two debian server, and failed with same error.\n <denchmark-h:h3>Other Comments</denchmark-h>\n \n <denchmark-code>% DOCKER_BUILDKIT=1 docker build -t recommenders:cpu --build-arg ENV=\"cpu\" .\n [+] Building 7.6s (11/13)\n  => [internal] load build definition from Dockerfile                                                                                                                         0.0s\n  => => transferring dockerfile: 37B                                                                                                                                          0.0s\n  => [internal] load .dockerignore                                                                                                                                            0.0s\n  => => transferring context: 2B                                                                                                                                              0.0s\n  => [internal] load metadata for docker.io/library/ubuntu:18.04                                                                                                              7.2s\n  => [base 1/7] FROM docker.io/library/ubuntu:18.04@sha256:3235326357dfb65f1781dbc4df3b834546d8bf914e82cce58e6e6b676e23ce8f                                                   0.0s\n  => CACHED [base 2/7] WORKDIR /root                                                                                                                                          0.0s\n  => CACHED [base 3/7] RUN apt-get update &&     apt-get install -y curl git wget build-essential                                                                             0.0s\n  => CACHED [base 4/7] RUN wget https://github.com/Kitware/CMake/releases/download/v3.15.2/cmake-3.15.2.tar.gz -O cmake.tgz &&     mkdir cmake &&     tar xzf cmake.tgz --st  0.0s\n  => CACHED [base 5/7] RUN curl https://repo.continuum.io/miniconda/Miniconda3-4.7.12.1-Linux-x86_64.sh -o anaconda.sh &&     /bin/bash anaconda.sh -b -p conda &&     rm an  0.0s\n  => CACHED [base 6/7] RUN git clone --depth 1 --single-branch -b master https://github.com/microsoft/recommenders                                                            0.0s\n  => CACHED [base 7/7] RUN mkdir /root/.jupyter &&     echo \"c.NotebookApp.token = ''\" >> /root/.jupyter/jupyter_notebook_config.py &&     echo \"c.NotebookApp.ip = '0.0.0.0  0.0s\n  => ERROR [cpu 1/1] RUN python recommenders/scripts/generate_conda_file.py --name base                                                                                       0.3s\n ------\n  > [cpu 1/1] RUN python recommenders/scripts/generate_conda_file.py --name base:\n #11 0.259 /bin/sh: 1: python: not found\n ------\n failed to solve with frontend dockerfile.v0: failed to build LLB: executor failed running [/bin/sh -c python recommenders/scripts/generate_conda_file.py --name base]: runc did not terminate sucessfully\n </denchmark-code>\n \n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "r-yanyo", "commentT": "2020-06-09T14:01:09Z", "comment_text": "\n \t\tyes, looks like Anaconda removed the version of the miniconda we are using\n you can either change the Dockerfile\n <denchmark-code>ARG ANACONDA=\"https://repo.continuum.io/miniconda/Miniconda3-4.7.12.1-Linux-x86_64.sh\"\n to\n ARG ANACONDA=\"https://repo.anaconda.com/miniconda/Miniconda3-latest-Linux-x86_64.sh\"\n </denchmark-code>\n \n or specify it as a build arg in docker build command\n <denchmark-code>--build-arg ANACONDA=\"https://repo.anaconda.com/miniconda/Miniconda3-latest-Linux-x86_64.sh\"\n </denchmark-code>\n \n If you are able to test and issue a PR that would be great, otherwise I will work on it later this evening\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "r-yanyo", "commentT": "2020-07-14T20:03:27Z", "comment_text": "\n \t\tI think this specific issue is resolved by <denchmark-link:https://github.com/microsoft/recommenders/pull/1120>#1120</denchmark-link>\n \n \t\t"}}}, "commit": {"commit_id": "c6093e3a0cb562a492f0f48768fcf01377d904ca", "commit_author": "Scott Graham", "commitT": "2020-06-11 06:12:24-04:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "docker\\Dockerfile", "file_new_name": "docker\\Dockerfile", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "33", "deleted_lines": "33"}}}}}}