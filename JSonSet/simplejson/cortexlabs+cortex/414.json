{"BR": {"BR_id": "414", "BR_author": "deliahu", "BRopenT": "2019-09-02T22:18:15Z", "BRcloseT": "2019-09-03T21:31:01Z", "BR_text": {"BRsummary": "Iris Keras example crashes", "BRdescription": "\n <denchmark-h:h3>Failing Example</denchmark-h>\n \n Iris Keras\n <denchmark-h:h3>Description</denchmark-h>\n \n On line 117 of onnx_serve/api.py:\n np_arr = np_arr.reshape(target_shape)\n target_shape is\n <denchmark-code>['None', 4]\n </denchmark-code>\n \n Which causes this error:\n <denchmark-code>2019-09-02,21:50:21.785453:cortex:ERROR:prediction failed\n Traceback (most recent call last):\n   File \"/src/cortex/onnx_serve/api.py\", line 117, in transform_to_numpy\n     np_arr = np_arr.reshape(target_shape)\n TypeError: 'str' object cannot be interpreted as an integer\n \n The above exception was the direct cause of the following exception:\n \n Traceback (most recent call last):\n   File \"/src/cortex/onnx_serve/api.py\", line 188, in predict\n     inference_input = convert_to_onnx_input(prepared_sample, input_metadata)\n   File \"/src/cortex/onnx_serve/api.py\", line 131, in convert_to_onnx_input\n     sample[input_metadata.name], input_metadata\n   File \"/src/cortex/onnx_serve/api.py\", line 120, in transform_to_numpy\n     raise UserException(\"failed to convert to numpy array\", str(e)) from e\n cortex.lib.exceptions.UserException: error: failed to convert to numpy array: 'str' object cannot be interpreted as an integer\n 2019-09-02,21:50:21.785873:cortex:ERROR:prediction failed: error: failed to convert to numpy array: 'str' object cannot be interpreted as an integer\n </denchmark-code>\n \n \t"}, "comments": {}}, "commit": {"commit_id": "917d70341b74a9a273ca6816f1e0a2a06e9fc5e3", "commit_author": "Vishal Bollu", "commitT": "2019-09-03 17:31:00-04:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "pkg\\workloads\\cortex\\onnx_serve\\api.py", "file_new_name": "pkg\\workloads\\cortex\\onnx_serve\\api.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "102", "deleted_lines": "102,116", "method_info": {"method_name": "transform_to_numpy", "method_params": "input_pyobj,input_metadata", "method_startline": "96", "method_endline": "119"}}}}}}}