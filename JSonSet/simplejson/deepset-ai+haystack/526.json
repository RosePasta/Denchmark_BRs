{"BR": {"BR_id": "526", "BR_author": "lalitpagaria", "BRopenT": "2020-10-28T12:22:56Z", "BRcloseT": "2020-11-02T14:18:44Z", "BR_text": {"BRsummary": "Fix various \"DeprecationWarning\" and \"RuntimeWarning\"  from the code", "BRdescription": "\n Describe the bug\n Many underlaying libraries throwing DeprecationWarning and RuntimeWarning. Some are serious in the nature so better to address them before it's too late.\n Error message\n Error that was thrown (if available): Listing all the warning showing during pytest run\n <denchmark-code>============================== warnings summary ===============================\n ../../../../../../opt/hostedtoolcache/Python/3.7.9/x64/lib/python3.7/site-packages/dotmap/__init__.py:2\n   /opt/hostedtoolcache/Python/3.7.9/x64/lib/python3.7/site-packages/dotmap/__init__.py:2: DeprecationWarning: Using or importing the ABCs from 'collections' instead of from 'collections.abc' is deprecated since Python 3.3,and in 3.9 it will stop working\n     from collections import OrderedDict, MutableMapping\n \n ../haystack/preprocessor/utils.py:203\n   /home/runner/work/haystack/haystack/haystack/preprocessor/utils.py:203: DeprecationWarning: invalid escape sequence \\s\n     if merge_short and len(para) < 10 or len(re.findall('\\s+', para)) < 2 \\\n \n ../haystack/preprocessor/utils.py:204\n   /home/runner/work/haystack/haystack/haystack/preprocessor/utils.py:204: DeprecationWarning: invalid escape sequence \\]\n     or merge_lowercase and para and para[0].islower() and last_para and last_para[-1] not in '.?!\"\\'\\]\\)':\n \n ../../../../../../opt/hostedtoolcache/Python/3.7.9/x64/lib/python3.7/site-packages/docx/section.py:7\n   /opt/hostedtoolcache/Python/3.7.9/x64/lib/python3.7/site-packages/docx/section.py:7: DeprecationWarning: Using or importing the ABCs from 'collections' instead of from 'collections.abc' is deprecated since Python 3.3,and in 3.9 it will stop working\n     from collections import Sequence\n \n ../../../../../../opt/hostedtoolcache/Python/3.7.9/x64/lib/python3.7/importlib/_bootstrap.py:219\n   /opt/hostedtoolcache/Python/3.7.9/x64/lib/python3.7/importlib/_bootstrap.py:219: RuntimeWarning: numpy.ufunc size changed, may indicate binary incompatibility. Expected 192 from C header, got 216 from PyObject\n     return f(*args, **kwds)\n \n test_db.py::test_elasticsearch_update_meta[elasticsearch]\n   /opt/hostedtoolcache/Python/3.7.9/x64/lib/python3.7/site-packages/elasticsearch/connection/base.py:190: ElasticsearchDeprecationWarning: [types removal] Specifying types in document update requests is deprecated, use the endpoint /{index}/_update/{id} instead.\n     warnings.warn(message, category=ElasticsearchDeprecationWarning)\n \n test_dpr_retriever.py::test_dpr_retrieval[True-dpr-elasticsearch]\n test_dpr_retriever.py::test_dpr_retrieval[True-dpr-faiss]\n test_dpr_retriever.py::test_dpr_retrieval[True-dpr-memory]\n test_dpr_retriever.py::test_dpr_retrieval[False-dpr-elasticsearch]\n test_dpr_retriever.py::test_dpr_retrieval[False-dpr-faiss]\n test_dpr_retriever.py::test_dpr_retrieval[False-dpr-memory]\n test_faiss.py::test_faiss_update_docs[10000]\n test_faiss.py::test_faiss_update_docs[2]\n   /opt/hostedtoolcache/Python/3.7.9/x64/lib/python3.7/site-packages/transformers/tokenization_utils_base.py:1773: FutureWarning: The `pad_to_max_length` argument is deprecated and will be removed in a future version, use `padding=True` or `padding='longest'` to pad to the longest sequence in the batch, or use `padding='max_length'` to pad to a max length. In this case, you can give a specific length with `max_length` (e.g. `max_length=45`) or leave max_length to None to pad to the maximal input size of the model (e.g. 512 for Bert).\n     FutureWarning,\n \n test_dpr_retriever.py::test_dpr_retrieval[True-dpr-elasticsearch]\n   /home/runner/work/haystack/haystack/haystack/retriever/dense.py:199: UserWarning: This overload of nonzero is deprecated:\n   \tnonzero(Tensor input, *, Tensor out)\n   Consider using one of the following signatures instead:\n   \tnonzero(Tensor input, *, bool as_tuple) (Triggered internally at  /pytorch/torch/csrc/utils/python_arg_parser.cpp:766.)\n     no_title_indices = torch.nonzero(1 - titles_mask).squeeze(-1)\n \n test_embedding_retriever.py::test_embedding_retriever[embedding-elasticsearch]\n test_embedding_retriever.py::test_embedding_retriever[embedding-faiss]\n test_embedding_retriever.py::test_embedding_retriever[embedding-memory]\n test_faiss.py::test_faiss_retrieving\n test_faiss.py::test_faiss_finding\n   /opt/hostedtoolcache/Python/3.7.9/x64/lib/python3.7/site-packages/transformers/tokenization_utils.py:460: FutureWarning: `is_pretokenized` is deprecated and will be removed in a future version, use `is_split_into_words` instead.\n     FutureWarning,\n \n test_eval.py: 3 warnings\n test_finder.py: 12 warnings\n test_reader.py: 10 warnings\n test_rest_api.py: 1 warning\n   /opt/hostedtoolcache/Python/3.7.9/x64/lib/python3.7/site-packages/farm/infer.py:406: DeprecationWarning: QA Input dictionaries with [qas, context] as keys will be deprecated in the future\n     DeprecationWarning)\n \n -- Docs: https://docs.pytest.org/en/stable/warnings.html\n ========== 147 passed, 1 deselected, 46 warnings in 380.78s (0:06:20) ==========\n </denchmark-code>\n \n Expected behavior\n A clear and concise description of what you expected to happen.\n Additional context\n Add any other context about the problem here, like document types / preprocessing steps / settings of reader etc.\n To Reproduce\n Steps to reproduce the behavior\n System:\n \n OS:\n GPU/CPU:\n Haystack version (commit or version number):\n DocumentStore:\n Reader:\n Retriever:\n \n \t"}, "comments": {}}, "commit": {"commit_id": "5d45992c841e531204282988392810b046c26786", "commit_author": "Lalit Pagaria", "commitT": "2020-11-02 15:18:43+01:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "haystack\\document_store\\elasticsearch.py", "file_new_name": "haystack\\document_store\\elasticsearch.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "307", "deleted_lines": "307", "method_info": {"method_name": "update_document_meta", "method_params": "self,str,str", "method_startline": "305", "method_endline": "307"}}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "haystack\\preprocessor\\utils.py", "file_new_name": "haystack\\preprocessor\\utils.py", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "199,200,204,205,206", "deleted_lines": "199,203,204"}}}, "file_2": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "haystack\\reader\\farm.py", "file_new_name": "haystack\\reader\\farm.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "341", "deleted_lines": null, "method_info": {"method_name": "predict", "method_params": "self,str,None", "method_startline": "305", "method_endline": "351"}}}}, "file_3": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "haystack\\retriever\\dense.py", "file_new_name": "haystack\\retriever\\dense.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "373,374", "deleted_lines": null, "method_info": {"method_name": "embed", "method_params": "self", "method_startline": "359", "method_endline": "382"}}}}}}}