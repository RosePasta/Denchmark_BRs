{"BR": {"BR_id": "164", "BR_author": "tanaysoni", "BRopenT": "2020-06-22T09:38:23Z", "BRcloseT": "2020-06-24T13:07:34Z", "BR_text": {"BRsummary": "Error in File Upload API", "BRdescription": "\n It's able to make a call to the endpoint now, but I'm getting the following error traceback:\n [2020-06-19 20:51:03 -0500] [4644] [INFO] Started server process [4644]\n [2020-06-19 20:51:03 -0500] [4644] [INFO] Waiting for application startup.\n [2020-06-19 20:51:03 -0500] [4644] [INFO] Application startup complete.\n [2020-06-19 20:51:07 -0500] [4644] [ERROR] Exception in ASGI application\n Traceback (most recent call last):\n File \"/usr/local/lib/python3.7/site-packages/uvicorn/protocols/http/httptools_impl.py\", line 385, in run_asgi\n result = await app(self.scope, self.receive, self.send)\n File \"/usr/local/lib/python3.7/site-packages/uvicorn/middleware/proxy_headers.py\", line 45, in call\n return await self.app(scope, receive, send)\n File \"/usr/local/lib/python3.7/site-packages/fastapi/applications.py\", line 171, in call\n await super().call(scope, receive, send)\n File \"/usr/local/lib/python3.7/site-packages/starlette/applications.py\", line 102, in call\n await self.middleware_stack(scope, receive, send)\n File \"/usr/local/lib/python3.7/site-packages/starlette/middleware/errors.py\", line 181, in call\n raise exc from None\n File \"/usr/local/lib/python3.7/site-packages/starlette/middleware/errors.py\", line 159, in call\n await self.app(scope, receive, _send)\n File \"/usr/local/lib/python3.7/site-packages/starlette/middleware/cors.py\", line 78, in call\n await self.app(scope, receive, send)\n File \"/usr/local/lib/python3.7/site-packages/starlette/exceptions.py\", line 82, in call\n raise exc from None\n File \"/usr/local/lib/python3.7/site-packages/starlette/exceptions.py\", line 71, in call\n await self.app(scope, receive, sender)\n File \"/usr/local/lib/python3.7/site-packages/starlette/routing.py\", line 550, in call\n await route.handle(scope, receive, send)\n File \"/usr/local/lib/python3.7/site-packages/starlette/routing.py\", line 227, in handle\n await self.app(scope, receive, send)\n File \"/usr/local/lib/python3.7/site-packages/starlette/routing.py\", line 41, in app\n response = await func(request)\n File \"/usr/local/lib/python3.7/site-packages/fastapi/routing.py\", line 199, in app\n dependant=dependant, values=values, is_coroutine=is_coroutine\n File \"/usr/local/lib/python3.7/site-packages/fastapi/routing.py\", line 151, in run_endpoint_function\n return await run_in_threadpool(dependant.call, **values)\n File \"/usr/local/lib/python3.7/site-packages/starlette/concurrency.py\", line 34, in run_in_threadpool\n return await loop.run_in_executor(None, func, *args)\n File \"/usr/local/Cellar/python/3.7.7/Frameworks/Python.framework/Versions/3.7/lib/python3.7/concurrent/futures/thread.py\", line 57, in run\n result = self.fn(*self.args, **self.kwargs)\n File \"/Users/jatinkumar/Desktop/haystack/haystack/api/controller/file_upload.py\", line 72, in upload_file_to_document_store\n pages = txt_converter.extract_pages(file_path)\n File \"/Users/jatinkumar/Desktop/haystack/haystack/indexing/file_converters/txt.py\", line 88, in extract_pages\n cleaned_pages, n_chars=300, n_first_pages_to_ignore=1, n_last_pages_to_ignore=1\n File \"/Users/jatinkumar/Desktop/haystack/haystack/indexing/file_converters/base.py\", line 86, in find_and_remove_header_footer\n found_header = self._find_longest_common_ngram(start_of_pages)\n File \"/Users/jatinkumar/Desktop/haystack/haystack/indexing/file_converters/base.py\", line 135, in _find_longest_common_ngram\n intersection = reduce(set.intersection, seqs_ngrams)\n <denchmark-h:h3>TypeError: reduce() of empty sequence with no initial value</denchmark-h>\n \n <denchmark-h:hr></denchmark-h>\n \n I'm currently using a python 3.7 environment, should I be using 2.7?\n Originally posted by @jatinvinkumar in #162 (comment)\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "tanaysoni", "commentT": "2020-06-24T13:07:33Z", "comment_text": "\n \t\tHi <denchmark-link:https://github.com/jatinvinkumar>@jatinvinkumar</denchmark-link>\n , I believe this is now resolved with <denchmark-link:https://github.com/deepset-ai/haystack/pull/165>#165</denchmark-link>\n . Feel free to update here if you still face the issue.\n \t\t"}}}, "commit": {"commit_id": "587b2fe74937db9d7842c4e776dce7b480bfee3d", "commit_author": "Tanay Soni", "commitT": "2020-06-24 15:05:52+02:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "haystack\\indexing\\file_converters\\base.py", "file_new_name": "haystack\\indexing\\file_converters\\base.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "133,134,135", "deleted_lines": "133", "method_info": {"method_name": "_find_longest_common_ngram", "method_params": "self,int,int", "method_startline": "123", "method_endline": "144"}}}}}}}