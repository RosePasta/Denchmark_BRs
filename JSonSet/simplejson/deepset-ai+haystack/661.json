{"BR": {"BR_id": "661", "BR_author": "Gourav-infobiz", "BRopenT": "2020-12-08T06:34:45Z", "BRcloseT": "2021-01-06T13:22:29Z", "BR_text": {"BRsummary": "Probability value is more than 100% in case of FAQ with elastic search while dealing with Tutorial 4 Even I tried the same colab.", "BRdescription": "\n <denchmark-link:https://user-images.githubusercontent.com/70999585/101448725-8addf880-394d-11eb-80bb-0eba733bf42b.png></denchmark-link>\n \n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "Gourav-infobiz", "commentT": "2020-12-08T06:43:22Z", "comment_text": "\n \t\tHey <denchmark-link:https://github.com/Gourav-infobiz>@Gourav-infobiz</denchmark-link>\n  ,\n Thanks for reporting this bug. Happy to investigate and fix this. What Elasticsearch version are you using here?\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "Gourav-infobiz", "commentT": "2020-12-08T06:46:38Z", "comment_text": "\n \t\tI am using elastic search 7.6.2 and 7.9.2 in both cases i am getting this error\n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "Gourav-infobiz", "commentT": "2020-12-08T08:14:00Z", "comment_text": "\n \t\tAre you by any chance using farm-haystack==0.4.0 here (as in <denchmark-link:https://github.com/deepset-ai/haystack/issues/662>#662</denchmark-link>\n )? If yes, please update to haystack 0.5.0, elasticsearch 7.9.2 and verify if this bug persists. Thanks!\n \t\t"}, "comments_3": {"comment_id": 4, "comment_author": "Gourav-infobiz", "commentT": "2020-12-08T08:37:27Z", "comment_text": "\n \t\tI am Using the updated version i.e farm-haystack==0.5.0 and Elasticsearch== 7.9.2 only.\n But still I am getting error. <denchmark-link:https://github.com/tholor>@tholor</denchmark-link>\n \n \t\t"}, "comments_4": {"comment_id": 5, "comment_author": "Gourav-infobiz", "commentT": "2020-12-08T14:58:40Z", "comment_text": "\n \t\t\n I am Using the updated version i.e farm-haystack==0.5.0 and Elasticsearch== 7.9.2 only.\n But still I am getting error. @tholor\n \n Please See <denchmark-link:https://github.com/tholor>@tholor</denchmark-link>\n \n \t\t"}, "comments_5": {"comment_id": 6, "comment_author": "Gourav-infobiz", "commentT": "2020-12-08T15:14:18Z", "comment_text": "\n \t\tOk, thanks for the update. <denchmark-link:https://github.com/brandenchan>@brandenchan</denchmark-link>\n  will investigate this in the next days.\n If you have an example (i.e. document + query + used embedding model) where this probability > 100% happens, it would accelerate his debugging work a lot.\n \t\t"}, "comments_6": {"comment_id": 7, "comment_author": "Gourav-infobiz", "commentT": "2020-12-09T05:30:03Z", "comment_text": "\n \t\t\n Ok, thanks for the update. @brandenchan will investigate this in the next days.\n If you have an example (i.e. document + query + used embedding model) where this probability > 100% happens, it would accelerate his debugging work a lot.\n \n Sure you may share your email i will try to share the same. Even you may refer this\n (<denchmark-link:https://colab.research.google.com/github/deepset-ai/haystack/blob/master/tutorials/Tutorial4_FAQ_style_QA.ipynb>https://colab.research.google.com/github/deepset-ai/haystack/blob/master/tutorials/Tutorial4_FAQ_style_QA.ipynb</denchmark-link>\n )\n as well because i tried to run this notebook even same result getting prob > 100%\n \t\t"}, "comments_7": {"comment_id": 8, "comment_author": "Gourav-infobiz", "commentT": "2020-12-09T05:33:51Z", "comment_text": "\n \t\tbranden.chan [at] deepset [dot] ai\n \t\t"}, "comments_8": {"comment_id": 9, "comment_author": "Gourav-infobiz", "commentT": "2020-12-09T05:35:09Z", "comment_text": "\n \t\t\n branden.chan [at] deepset [dot] ai\n \n Please follow the above link. in my edited comment.\n \t\t"}, "comments_9": {"comment_id": 10, "comment_author": "Gourav-infobiz", "commentT": "2020-12-10T13:46:27Z", "comment_text": "\n \t\tHi <denchmark-link:https://github.com/Gourav-infobiz>@Gourav-infobiz</denchmark-link>\n , this issue was coming up due to a bug in the scaling functions that convert similarity scores to probabilities. I have been working on this in <denchmark-link:https://github.com/deepset-ai/haystack/pull/667>#667</denchmark-link>\n . Would you like to try it out? If you pull the new branch called  you can try the changes. Otherwise they should be merged in to master very soon.\n \t\t"}, "comments_10": {"comment_id": 11, "comment_author": "Gourav-infobiz", "commentT": "2020-12-15T09:10:50Z", "comment_text": "\n \t\t\n Hi @Gourav-infobiz, this issue was coming up due to a bug in the scaling functions that convert similarity scores to probabilities. I have been working on this in #667. Would you like to try it out? If you pull the new branch called scale_prob you can try the changes. Otherwise they should be merged in to master very soon.\n \n Thanks for the response! Ok will check the same.\n \t\t"}, "comments_11": {"comment_id": 12, "comment_author": "Gourav-infobiz", "commentT": "2021-01-06T13:22:29Z", "comment_text": "\n \t\tOk this seems to be resolved. Feel free to re-open if you encounter any further problems here.\n \t\t"}}}, "commit": {"commit_id": "d8154939fc2fdb436c8964de39f265e21da1fadf", "commit_author": "Branden Chan", "commitT": "2020-12-11 12:10:24+01:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "docs\\_src\\usage\\usage\\retriever.md", "file_new_name": "docs\\_src\\usage\\usage\\retriever.md", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "125,126,127,128,129,130,131,132,133,134,149,174,175,176,177,178,179,180,181,182,183,187", "deleted_lines": "139,167"}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "haystack\\document_store\\base.py", "file_new_name": "haystack\\document_store\\base.py", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "15", "deleted_lines": null}}}, "file_2": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "haystack\\document_store\\elasticsearch.py", "file_new_name": "haystack\\document_store\\elasticsearch.py", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "120,600,601,602,603", "deleted_lines": "599"}}}, "file_3": {"file_change_type": "MODIFY", "file_Nmethod": 3, "file_old_name": "haystack\\document_store\\faiss.py", "file_new_name": "haystack\\document_store\\faiss.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "154,155,156,157", "deleted_lines": null, "method_info": {"method_name": "_create_document_field_map", "method_params": "self", "method_startline": "154", "method_endline": "157"}}, "hunk_1": {"Ismethod": 1, "added_lines": "127,128", "deleted_lines": "119", "method_info": {"method_name": "write_documents", "method_params": "self,None", "method_startline": "112", "method_endline": "152"}}, "hunk_2": {"Ismethod": 1, "added_lines": "44", "deleted_lines": null, "method_info": {"method_name": "__init__", "method_params": "self,str,int,int,str,None,bool,bool,str,str,kwargs", "method_startline": "34", "method_endline": "45"}}}}, "file_4": {"file_change_type": "MODIFY", "file_Nmethod": 4, "file_old_name": "haystack\\document_store\\memory.py", "file_new_name": "haystack\\document_store\\memory.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "22,29", "deleted_lines": null, "method_info": {"method_name": "__init__", "method_params": "self,bool,similarity", "method_startline": "22", "method_endline": "29"}}, "hunk_1": {"Ismethod": 1, "added_lines": "47,48", "deleted_lines": "44", "method_info": {"method_name": "write_documents", "method_params": "self,None", "method_startline": "31", "method_endline": "51"}}, "hunk_2": {"Ismethod": 1, "added_lines": "53,54,55,56", "deleted_lines": null, "method_info": {"method_name": "_create_document_field_map", "method_params": "self", "method_startline": "53", "method_endline": "56"}}, "hunk_3": {"Ismethod": 1, "added_lines": "22", "deleted_lines": "20", "method_info": {"method_name": "__init__", "method_params": "self,bool", "method_startline": "20", "method_endline": "26"}}}}, "file_5": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "haystack\\document_store\\sql.py", "file_new_name": "haystack\\document_store\\sql.py", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "90,91", "deleted_lines": null}}}, "file_6": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "haystack\\retriever\\dense.py", "file_new_name": "haystack\\retriever\\dense.py", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "9,90,91,92,93,94,408,409,410,411,412,413,414,415,416,417,418,419,435,436,437,438,439", "deleted_lines": null}}}, "file_7": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "tutorials\\Tutorial4_FAQ_style_QA.py", "file_new_name": "tutorials\\Tutorial4_FAQ_style_QA.py", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "47,48", "deleted_lines": "47"}}}}}}