{"BR": {"BR_id": "685", "BR_author": "yx1215", "BRopenT": "2020-09-27T19:42:13Z", "BRcloseT": "2020-09-30T21:29:57Z", "BR_text": {"BRsummary": "Error when running example code for GPFIFOSearcher", "BRdescription": "\n When I tried to run the example code for searcher <denchmark-link:https://autogluon.mxnet.io/api/autogluon.searcher.html>here</denchmark-link>\n , I will get the following error:\n <denchmark-code>Traceback (most recent call last):\n   File \"/Users/yixiaxia/Desktop/test/test.py\", line 17, in <module>\n     searcher = GPFIFOSearcher(train_fn.cs)\n TypeError: __init__() takes 1 positional argument but 2 were given\n </denchmark-code>\n \n The following is the minimum script to reproduce the error:\n <denchmark-code>import numpy as np\n from autogluon.searcher import GPFIFOSearcher\n import autogluon as ag\n \n \n @ag.args(\n     lr=ag.space.Real(1e-3, 1e-2, log=True),\n     wd=ag.space.Real(1e-3, 1e-2))\n def train_fn(args, reporter):\n     print('lr: {}, wd: {}'.format(args.lr, args.wd))\n     for e in range(10):\n         dummy_accuracy = 1 - np.power(1.8, -np.random.uniform(e, 2 * e))\n         reporter(epoch=e + 1, accuracy=dummy_accuracy, lr=args.lr, wd=args.wd)\n \n \n print(train_fn.cs)\n searcher = GPFIFOSearcher(train_fn.cs)\n print(searcher.get_config())\n </denchmark-code>\n \n Actually this is just the copy-paste of what we have on that website.\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "yx1215", "commentT": "2020-09-29T04:19:25Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/yx1215>@yx1215</denchmark-link>\n  you can instead follow this tutorial:\n <denchmark-link:https://autogluon.mxnet.io/tutorials/course/mlp.html>https://autogluon.mxnet.io/tutorials/course/mlp.html</denchmark-link>\n \n Or use the following code instead:\n <denchmark-code>import numpy as np\n from autogluon.searcher import GPFIFOSearcher\n import autogluon as ag\n \n @ag.args(\n     lr=ag.space.Real(1e-3, 1e-2, log=True),\n     wd=ag.space.Real(1e-3, 1e-2))\n def train_fn(args, reporter):\n     print('lr: {}, wd: {}'.format(args.lr, args.wd))\n     for e in range(10):\n         dummy_accuracy = 1 - np.power(1.8, -np.random.uniform(e, 2 * e))\n         reporter(epoch=e + 1, accuracy=dummy_accuracy, lr=args.lr, wd=args.wd)\n \n \n print(train_fn.cs)\n \n scheduler = ag.scheduler.FIFOScheduler(train_fn,\n                                        searcher='bayesopt',\n                                        resource={'num_cpus': 2, 'num_gpus': 0},\n                                        num_trials=10,\n                                        reward_attr='accuracy',\n                                        time_attr='epoch')\n scheduler.run()\n </denchmark-code>\n \n Note that using searcher= 'bayesopt' is equivalent to using the GPFIFOSearcher\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "yx1215", "commentT": "2020-09-29T04:20:41Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/mseeger>@mseeger</denchmark-link>\n  <denchmark-link:https://github.com/aaronkl>@aaronkl</denchmark-link>\n  <denchmark-link:https://github.com/tlienart>@tlienart</denchmark-link>\n   Any idea why one cannot create the GPFIFOScheduler as shown in your example:\n <denchmark-link:https://autogluon.mxnet.io/api/autogluon.searcher.html>https://autogluon.mxnet.io/api/autogluon.searcher.html</denchmark-link>\n \n If I instead do: searcher = GPFIFOSearcher(configspace = train_fn.cs), I still get error:\n <denchmark-code>Traceback (most recent call last):\n   File \"<stdin>\", line 1, in <module>\n   File \"/Users/jonasmue/WorkDocs/AutoGluon/githubAutogluon/autogluon/autogluon/searcher/gp_searcher.py\", line 122, in __init__\n     _gp_searcher = gp_fifo_searcher_factory(**_kwargs)\n   File \"/Users/jonasmue/WorkDocs/AutoGluon/githubAutogluon/autogluon/autogluon/searcher/bayesopt/autogluon/searcher_factory.py\", line 134, in gp_fifo_searcher_factory\n     assert kwargs['scheduler'] == 'fifo', \\\n KeyError: 'scheduler'\n </denchmark-code>\n \n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "yx1215", "commentT": "2020-09-29T09:49:17Z", "comment_text": "\n \t\tit's indeed a bug in the GPFactory, the default value for the 'scheduler' parameter is not imputed. I will send a PR to fix this\n \t\t"}, "comments_3": {"comment_id": 4, "comment_author": "yx1215", "commentT": "2020-09-30T21:29:55Z", "comment_text": "\n \t\tResolved in <denchmark-link:https://github.com/awslabs/autogluon/pull/686>#686</denchmark-link>\n .\n \t\t"}}}, "commit": {"commit_id": "c2e2e7a4eec67bf3c6fb55fe2ce402f5344b88d0", "commit_author": "Aaron Klein", "commitT": "2020-09-30 13:40:40-07:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "autogluon\\searcher\\bayesopt\\autogluon\\searcher_factory.py", "file_new_name": "autogluon\\searcher\\bayesopt\\autogluon\\searcher_factory.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "211,221", "deleted_lines": "210", "method_info": {"method_name": "_common_defaults", "method_params": "bool", "method_startline": "207", "method_endline": "258"}}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "autogluon\\searcher\\gp_searcher.py", "file_new_name": "autogluon\\searcher\\gp_searcher.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "116,119", "deleted_lines": "116", "method_info": {"method_name": "__init__", "method_params": "self,kwargs", "method_startline": "116", "method_endline": "129"}}, "hunk_1": {"Ismethod": 1, "added_lines": "116,119", "deleted_lines": "116", "method_info": {"method_name": "__init__", "method_params": "self,configspace,kwargs", "method_startline": "116", "method_endline": "130"}}}}}}}