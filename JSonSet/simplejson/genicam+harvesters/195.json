{"BR": {"BR_id": "195", "BR_author": "kazunarikudo", "BRopenT": "2020-08-07T00:12:35Z", "BRcloseT": "2020-08-16T04:00:15Z", "BR_text": {"BRsummary": "AttributeError on TLParamsLocked", "BRdescription": "\n \n Report from <denchmark-link:https://github.com/rnamdos>@rnamdos</denchmark-link>\n .\n To Reproduce\n I get another error on the next line:\n <denchmark-code>In [11]: ia.start_acquisition()                                                                                                    \n ---------------------------------------------------------------------------\n LogicalErrorException                     Traceback (most recent call last)\n ~/anaconda3/envs/genicam/lib/python3.6/site-packages/genicam/genapi.py in __getattr__(self, attribute)\n    2079             try:\n -> 2080                 return self.get_node(attribute)\n    2081             except LogicalErrorException as e:\n \n ~/anaconda3/envs/genicam/lib/python3.6/site-packages/genicam/genapi.py in get_node(self, key)\n    2031     def get_node(self, key):\n -> 2032         return _genapi.NodeMap_get_node(self, key)\n    2033 \n \n LogicalErrorException: Node not existing\n \n The above exception was the direct cause of the following exception:\n \n AttributeError                            Traceback (most recent call last)\n <ipython-input-11-e1afb14284fb> in <module>\n ----> 1 ia.start_acquisition()\n \n ~/anaconda3/envs/genicam/lib/python3.6/site-packages/harvesters/core.py in start_acquisition(self, run_in_background)\n    2426             # We're ready to start image acquisition. Lock the device's\n    2427             # transport layer related features:\n -> 2428             self.remote_device.node_map.TLParamsLocked.value = 1\n    2429         except GenericException:\n    2430             # SFNC < 2.0\n \n ~/anaconda3/envs/genicam/lib/python3.6/site-packages/genicam/genapi.py in __getattr__(self, attribute)\n    2082     # Raise AttributeError to naturally work with\n    2083     # the hasattr function:\n -> 2084                 raise AttributeError from e\n    2085 \n    2086     def __setattr__(self, attribute, val):\n \n AttributeError: \n </denchmark-code>\n \n Expected behavior\n Harvester must handle legacy devices that do not support TLParamsLocked.\n Desktop (please complete the following information):\n \n OS: Ubuntu 18.04.3 LTS\n Python 3.6.10 :: Anaconda, Inc.\n Harvester: 1.2.8\n GenTL Producer: mvIMPACT Acquire\n Camera: (id_='GE500C(dc:a5:01:34:d3:cd)', vendor='MindVision', model='GE500C', tl_type='GEV', user_defined_name=None, version='V3.2.92-3.1.80')\n \n Additional context\n Add any other context about the problem here.\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "kazunarikudo", "commentT": "2020-08-07T00:21:41Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/rnamdos>@rnamdos</denchmark-link>\n  Could you make another try with the latest version of the master branch, please?\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "kazunarikudo", "commentT": "2020-08-07T13:39:23Z", "comment_text": "\n \t\tThanks for creating a new issue for this. I still get the same error.\n I cloned the repo\n git clone https://github.com/genicam/harvesters.git && cd harvesters && python setup.py install \n got this output (is this the latest?)\n Finished processing dependencies for harvesters==1.2.8.post0.dev1 \n ran in ipython and got same error\n <denchmark-code>In [10]: ia.start_acquisition()                                                                                                    \n ---------------------------------------------------------------------------\n LogicalErrorException                     Traceback (most recent call last)\n ~/anaconda3/envs/genicam/lib/python3.6/site-packages/genicam/genapi.py in __getattr__(self, attribute)\n    2079             try:\n -> 2080                 return self.get_node(attribute)\n    2081             except LogicalErrorException as e:\n \n ~/anaconda3/envs/genicam/lib/python3.6/site-packages/genicam/genapi.py in get_node(self, key)\n    2031     def get_node(self, key):\n -> 2032         return _genapi.NodeMap_get_node(self, key)\n    2033 \n \n LogicalErrorException: Node not existing\n \n The above exception was the direct cause of the following exception:\n \n AttributeError                            Traceback (most recent call last)\n <ipython-input-10-e1afb14284fb> in <module>\n ----> 1 ia.start_acquisition()\n \n ~/anaconda3/envs/genicam/lib/python3.6/site-packages/harvesters/core.py in start_acquisition(self, run_in_background)\n    2426             # We're ready to start image acquisition. Lock the device's\n    2427             # transport layer related features:\n -> 2428             self.remote_device.node_map.TLParamsLocked.value = 1\n    2429         except GenericException:\n    2430             # SFNC < 2.0\n \n ~/anaconda3/envs/genicam/lib/python3.6/site-packages/genicam/genapi.py in __getattr__(self, attribute)\n    2082     # Raise AttributeError to naturally work with\n    2083     # the hasattr function:\n -> 2084                 raise AttributeError from e\n    2085 \n    2086     def __setattr__(self, attribute, val):\n \n AttributeError: \n </denchmark-code>\n \n can confirm that I get same error on a python script with same code:\n rom harvesters.core import Harvester\n <denchmark-code>\n import numpy as np  # This is just for a demonstration.\n \n h = Harvester()\n \n h.add_file('/opt/mvIMPACT_Acquire/lib/x86_64/mvGenTLProducer.cti')\n h.update()\n \n print(h.files)\n \n #len(h.device_info_list)\n #h.device_info_list[0]\n \n ia = h.create_image_acquirer(0)\n ia.remote_device.node_map.Width.value = 8\n ia.remote_device.node_map.Height.value = 8\n #ia.remote_device.node_map.PixelFormat.value = 'Mono8'\n ia.remote_device.node_map.PixelFormat.value = 'BayerRG8'\n \n ia.start_acquisition()\n \n with ia.fetch_buffer() as buffer:\n     # Let's create an alias of the 2D image component:\n     component = buffer.payload.components[0]\n \n     # Note that the number of components can be vary. If your\n     # target remote device transmits a multi-part information, then\n     # you'd get two or more components in the payload. However, now\n     # we're working with a remote device that transmits only a 2D image.\n     # So we manipulate only index 0 of the list object, components.\n \n     # Let's see the acquired data in 1D:\n     _1d = component.data\n     print('1D: {0}'.format(_1d))\n \n \n # Release and exit\n ia.stop_acquisition()\n \n quit\n \n </denchmark-code>\n \n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "kazunarikudo", "commentT": "2020-08-07T13:48:30Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/rnamdos>@rnamdos</denchmark-link>\n  Hi. The following line is telling me that you are not running the HEAD version:\n <denchmark-code>2429         except GenericException:\n </denchmark-code>\n \n It must be:\n <denchmark-code>2429         except (GenericException, AttributeError):\n </denchmark-code>\n \n \t\t"}, "comments_3": {"comment_id": 4, "comment_author": "kazunarikudo", "commentT": "2020-08-07T14:08:01Z", "comment_text": "\n \t\tThank for the prompt reply. Can you elaborate on that? I just checked the hash and it matches the latest development update\n <denchmark-code>cat .git/refs/heads/master \n a8c292cea0bf41fe07ab185b719ef58f26c40564\n \n </denchmark-code>\n \n \t\t"}, "comments_4": {"comment_id": 5, "comment_author": "kazunarikudo", "commentT": "2020-08-07T14:18:23Z", "comment_text": "\n \t\t\n it matches the latest development update\n \n Yes, it matches but the code you have shown is different from the one you have cloned. Could you compare the cloned one and the installed one, please?\n \t\t"}, "comments_5": {"comment_id": 6, "comment_author": "kazunarikudo", "commentT": "2020-08-07T14:37:48Z", "comment_text": "\n \t\tI see, this is strange to me. When I use setup.py in the genicam environment, it fails to update to the newly cloned version. But if I do it in the base environment its fine.\n \t\t"}, "comments_6": {"comment_id": 7, "comment_author": "kazunarikudo", "commentT": "2020-08-07T17:47:10Z", "comment_text": "\n \t\tI had to uninstall and install the clone. No errors. thank you so much for your time. Excited to start working on openCV now.\n \t\t"}}}, "commit": {"commit_id": "a8c292cea0bf41fe07ab185b719ef58f26c40564", "commit_author": "kznr", "commitT": "2020-08-07 09:19:49+09:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "src\\harvesters\\core.py", "file_new_name": "src\\harvesters\\core.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "2867", "deleted_lines": "2867", "method_info": {"method_name": "stop_acquisition", "method_params": "self", "method_startline": "2844", "method_endline": "2903"}}, "hunk_1": {"Ismethod": 1, "added_lines": "2429", "deleted_lines": "2429", "method_info": {"method_name": "start_acquisition", "method_params": "self,bool", "method_startline": "2363", "method_endline": "2455"}}}}}}}