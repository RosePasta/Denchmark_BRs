{"BR": {"BR_id": "417", "BR_author": "null-a", "BRopenT": "2017-10-31T11:56:43Z", "BRcloseT": "2017-10-31T20:48:49Z", "BR_text": {"BRsummary": "Delta's batch_log_pdf not consistent with e.g. Bernoulli", "BRdescription": "\n Should the batch_log_pdf methods of the these two distributions agree on the size of the return tensor?\n import torch\n from torch.autograd import Variable\n from pyro.distributions import Delta, Bernoulli\n \n p = Variable(torch.ones(3, 1)) * 0.5\n b = Bernoulli(p)\n d = Delta(p)\n \n x = Variable(torch.ones(3, 1))\n print(b.batch_log_pdf(x).size())\n print(d.batch_log_pdf(x).size())\n They don't at the moment:\n <denchmark-code>pyro$ git rev-parse --short HEAD\n c16b817\n pyro$ python3 repro.py \n torch.Size([3, 1])\n torch.Size([3])\n </denchmark-code>\n \n (This is tripping up an infrequently used option in the AIR example that uses Delta.)\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "null-a", "commentT": "2017-10-31T20:48:49Z", "comment_text": "\n \t\tFixed by <denchmark-link:https://github.com/pyro-ppl/pyro/pull/419>#419</denchmark-link>\n \n \t\t"}}}, "commit": {"commit_id": "492c27a1c240c40b780bd7114eeabb63ae07d31d", "commit_author": "Neeraj Pradhan", "commitT": "2017-10-31 13:47:57-07:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "pyro\\distributions\\beta.py", "file_new_name": "pyro\\distributions\\beta.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "38,39,40,41,42,43,44,45,46,47", "deleted_lines": "38,39", "method_info": {"method_name": "batch_shape", "method_params": "self,x", "method_startline": "35", "method_endline": "48"}}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "pyro\\distributions\\cauchy.py", "file_new_name": "pyro\\distributions\\cauchy.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "41,42,43,44,45,46,47,48,49,50", "deleted_lines": "41,42", "method_info": {"method_name": "batch_shape", "method_params": "self,x", "method_startline": "38", "method_endline": "51"}}}}, "file_2": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "pyro\\distributions\\delta.py", "file_new_name": "pyro\\distributions\\delta.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "30,31,32,33,34,35,36,37,38,39", "deleted_lines": "30,31", "method_info": {"method_name": "batch_shape", "method_params": "self,x", "method_startline": "27", "method_endline": "40"}}, "hunk_1": {"Ismethod": 1, "added_lines": "54,55,56", "deleted_lines": null, "method_info": {"method_name": "batch_log_pdf", "method_params": "self,x", "method_startline": "52", "method_endline": "56"}}}}, "file_3": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "pyro\\distributions\\dirichlet.py", "file_new_name": "pyro\\distributions\\dirichlet.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "35,36,37,38,39,40,41,42,43,44", "deleted_lines": "35,36", "method_info": {"method_name": "batch_shape", "method_params": "self,x", "method_startline": "32", "method_endline": "45"}}}}, "file_4": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "pyro\\distributions\\exponential.py", "file_new_name": "pyro\\distributions\\exponential.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "28,29,30,31,32,33,34,35,36,37", "deleted_lines": "28,29", "method_info": {"method_name": "batch_shape", "method_params": "self,x", "method_startline": "25", "method_endline": "38"}}, "hunk_1": {"Ismethod": 1, "added_lines": "56", "deleted_lines": null, "method_info": {"method_name": "batch_log_pdf", "method_params": "self,x", "method_startline": "55", "method_endline": "59"}}}}, "file_5": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "pyro\\distributions\\gamma.py", "file_new_name": "pyro\\distributions\\gamma.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "37,38,39,40,41,42,43,44,45,46", "deleted_lines": "37,38", "method_info": {"method_name": "batch_shape", "method_params": "self,x", "method_startline": "34", "method_endline": "47"}}}}, "file_6": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "pyro\\distributions\\half_cauchy.py", "file_new_name": "pyro\\distributions\\half_cauchy.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "40,41,42,43,44,45,46,47,48,49", "deleted_lines": "40,41", "method_info": {"method_name": "batch_shape", "method_params": "self,x", "method_startline": "37", "method_endline": "50"}}}}, "file_7": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "pyro\\distributions\\log_normal.py", "file_new_name": "pyro\\distributions\\log_normal.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "38,39,40,41,42,43,44,45,46,47", "deleted_lines": "38,39", "method_info": {"method_name": "batch_shape", "method_params": "self,x", "method_startline": "35", "method_endline": "48"}}}}, "file_8": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "pyro\\distributions\\multinomial.py", "file_new_name": "pyro\\distributions\\multinomial.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "36,37,38,39,40,41,42,43,44,45", "deleted_lines": "36,37", "method_info": {"method_name": "batch_shape", "method_params": "self,x", "method_startline": "33", "method_endline": "46"}}, "hunk_1": {"Ismethod": 1, "added_lines": "73", "deleted_lines": null, "method_info": {"method_name": "batch_log_pdf", "method_params": "self,x", "method_startline": "72", "method_endline": "78"}}}}, "file_9": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "pyro\\distributions\\normal.py", "file_new_name": "pyro\\distributions\\normal.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "43,44,45,46,47,48,49,50,51,52", "deleted_lines": "43,44", "method_info": {"method_name": "batch_shape", "method_params": "self,x", "method_startline": "40", "method_endline": "53"}}}}, "file_10": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "pyro\\distributions\\poisson.py", "file_new_name": "pyro\\distributions\\poisson.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "29,30,31,32,33,34,35,36,37,38", "deleted_lines": "29,30", "method_info": {"method_name": "batch_shape", "method_params": "self,x", "method_startline": "26", "method_endline": "39"}}}}, "file_11": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "pyro\\distributions\\uniform.py", "file_new_name": "pyro\\distributions\\uniform.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "31,32,33,34,35,36,37,38,39,40", "deleted_lines": "31,32", "method_info": {"method_name": "batch_shape", "method_params": "self,x", "method_startline": "28", "method_endline": "41"}}}}, "file_12": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "tests\\distributions\\conftest.py", "file_new_name": "tests\\distributions\\conftest.py", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "60,71,126,127,128,129,130,131,133", "deleted_lines": "60,70,71,73,128,129,130,132"}}}, "file_13": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "tests\\distributions\\dist_fixture.py", "file_new_name": "tests\\distributions\\dist_fixture.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "68,70,71,76,77", "deleted_lines": "73", "method_info": {"method_name": "get_scipy_batch_logpdf", "method_params": "self,idx", "method_startline": "64", "method_endline": "87"}}}}, "file_14": {"file_change_type": "MODIFY", "file_Nmethod": 3, "file_old_name": "tests\\distributions\\test_delta.py", "file_new_name": "tests\\distributions\\test_delta.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "34,35,36", "deleted_lines": null, "method_info": {"method_name": "test_batch_log_pdf_shape", "method_params": "self", "method_startline": "34", "method_endline": "36"}}, "hunk_1": {"Ismethod": 1, "added_lines": "13,14,17", "deleted_lines": "13", "method_info": {"method_name": "setUp", "method_params": "self", "method_startline": "10", "method_endline": "22"}}, "hunk_2": {"Ismethod": 1, "added_lines": "29,31", "deleted_lines": "29", "method_info": {"method_name": "test_batch_log_pdf", "method_params": "self", "method_startline": "28", "method_endline": "32"}}}}, "file_15": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "tests\\distributions\\test_distributions.py", "file_new_name": "tests\\distributions\\test_distributions.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "119,120,121,122,123,124,125,126,127,128", "deleted_lines": null, "method_info": {"method_name": "test_score_errors_non_broadcastable_data_shape", "method_params": "dist", "method_startline": "119", "method_endline": "128"}}, "hunk_1": {"Ismethod": 1, "added_lines": "109,110,111,112,113,114,115,116", "deleted_lines": null, "method_info": {"method_name": "test_score_errors_event_dim_mismatch", "method_params": "dist", "method_startline": "109", "method_endline": "116"}}}}}}}