{"BR": {"BR_id": "2903", "BR_author": "jshilong", "BRopenT": "2020-06-04T14:18:42Z", "BRcloseT": "2020-06-13T15:29:36Z", "BR_text": {"BRsummary": "focal loss won't throw any error when model's num_classes is inconsistent with class number in ann_file", "BRdescription": "\n \n \n \n mmdetection/mmdet/ops/sigmoid_focal_loss/src/cuda/sigmoid_focal_loss_cuda.cu\n \n \n          Line 37\n       in\n       e05e858\n \n \n \n \n \n \n  scalar_t c2 = (t >= 0 & t != d); \n \n \n \n \n \n When num_classes in bbox_head isn't  consistent with the max class number in ann_file,\n this won't throw any error,  add a check like t < num_classes  may avoid some mistakes\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "jshilong", "commentT": "2020-06-05T05:15:09Z", "comment_text": "\n \t\tThanks for your advice. We would appreciate if you would you like to create a PR to add num_classes checking to make it more friendly.\n \t\t"}}}, "commit": {"commit_id": "ca115f2d14b1a4235fdbe0e3f75fbe6e92149b35", "commit_author": "Cao Yuhang", "commitT": "2020-06-13 23:29:35+08:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "mmdet\\ops\\sigmoid_focal_loss\\src\\cuda\\sigmoid_focal_loss_cuda.cu", "file_new_name": "mmdet\\ops\\sigmoid_focal_loss\\src\\cuda\\sigmoid_focal_loss_cuda.cu", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "106,107,125,126,127,128,129,165,166,167,168,169,170", "deleted_lines": "123,124,125,126,162,163,164,165,166"}}}}}}