{"BR": {"BR_id": "1156", "BR_author": "Yancey1989", "BRopenT": "2019-11-07T08:36:29Z", "BRcloseT": "2019-11-08T07:38:47Z", "BR_text": {"BRsummary": "xgboost predict failed with feature derivation", "BRdescription": "\n Predict SQL:\n SELECT * FROM boston.test\n TO PREDICT boston.predict.medv\n USING sqlflow_models.my_xgb_regression_model;\n Train SQL:\n SELECT * FROM boston.train\n TO TRAIN xgboost.gbtree\n WITH objective=\"reg:squarederror\"\n            train.num_boost_round=30\n LABEL medv\n INTO sqlflow_models.my_xgb_regression_model;\n logs:\n <denchmark-code>==========Program======\n \n import json\n import xgboost as xgb\n import numpy as np\n from sqlflow_submitter.db import connect_with_data_source, db_generator, buffered_db_writer\n from sqlflow_submitter.xgboost.predict import pred\n \n feature_field_meta = json.loads('''null''')\n label_field_meta = json.loads('''{\"name\":\"medv\",\"dtype\":0,\"delimiter\":\"\",\"shape\":null,\"is_sparse\":false,\"vocabulary\":null,\"MaxID\":0}''')\n \n pred(datasource='''mysql://root:root@tcp(127.0.0.1:3306)/?maxAllowedPacket=0''',\n      select='''SELECT *\n FROM boston.test''',\n      feature_field_meta=feature_field_meta,\n      label_field_meta=label_field_meta,\n      result_table='''boston.predict''',\n      hdfs_namenode_addr='''''',\n      hive_location='''''',\n      hdfs_user='''''',\n      hdfs_pass='''''')\n \n =======Program Output===========\n Traceback (most recent call last):\n   File \"<stdin>\", line 20, in <module>\n   File \"/go/src/sqlflow.org/sqlflow/python/sqlflow_submitter/xgboost/predict.py\", line 30, in pred\n     feature_column_names = [k[\"name\"] for k in feature_field_meta]\n TypeError: 'NoneType' object is not iterable\n </denchmark-code>\n \n \t"}, "comments": {}}, "commit": {"commit_id": "d8f416278ca90967e967f7b47ca29b028feb06d6", "commit_author": "Wu Yi", "commitT": "2019-11-08 15:38:46+08:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 3, "file_old_name": "cmd\\sqlflowserver\\main_test.go", "file_new_name": "cmd\\sqlflowserver\\main_test.go", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "293,294,295", "deleted_lines": null, "method_info": {"method_name": "TestEnd2EndMySQL", "method_params": "T", "method_startline": "250", "method_endline": "295"}}, "hunk_1": {"Ismethod": 1, "added_lines": "608,609,613,617,618,619,620,621,622,623", "deleted_lines": null, "method_info": {"method_name": "CaseTrainFeatureDerevation", "method_params": "T", "method_startline": "606", "method_endline": "633"}}, "hunk_2": {"Ismethod": 1, "added_lines": "297,298,299,300,301,302,303,304,305,306,307,308,309,310,311,312,313,314,315,316", "deleted_lines": null, "method_info": {"method_name": "CaseXgboostFeatureDerivation", "method_params": "T", "method_startline": "297", "method_endline": "317"}}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "pkg\\sql\\executor.go", "file_new_name": "pkg\\sql\\executor.go", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "31,502,503,504,505,510,528,651,652,653,654,655,656,657,658,659,660,661,662,663,664,665,666,667,668,669,670,671,672,673,674,675,676,677,678,679,680,681,682,683,684,685,686,687,688,689,690,691,692,693,694,695,696,697,698,699,700,701,702,703,704,705,706,707,708,709,710", "deleted_lines": "505,523"}}}, "file_2": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "pkg\\sql\\verifier.go", "file_new_name": "pkg\\sql\\verifier.go", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123", "deleted_lines": null, "method_info": {"method_name": "getColumnTypes", "method_params": "string,DB", "method_startline": "93", "method_endline": "123"}}}}}}}