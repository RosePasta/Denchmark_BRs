{"BR": {"BR_id": "2050", "BR_author": "lhw362950217", "BRopenT": "2020-03-23T13:02:49Z", "BRcloseT": "2020-03-24T02:51:14Z", "BR_text": {"BRsummary": "repl input history navigation ends up with a crash", "BRdescription": "\n Description\n When I run sqlflow in repl mode, I use ctrl+p/n to navigate the input history, it ends up with a crash when I have some Chinese character in history. I'm using the latest version of code.\n Reproduction Steps\n \n start sqlflow in repl mode\n intput SELECT * FROM iris.train where class like '\u4e2d\u65871';\n press ctrl+p twice\n \n Expected Behavior\n It should go back in my input history for 2 steps, or stop at the oldest one if we have only one input history\n \n <denchmark-link:https://user-images.githubusercontent.com/5652016/77318494-1f64e400-6d48-11ea-8b4c-17dcd66a5bf2.png></denchmark-link>\n \n Environment (Please complete the following information):\n \n OS: macOS 10.15.3\n Browser:\n Version:\n \n Additional Note\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "lhw362950217", "commentT": "2020-03-24T02:51:14Z", "comment_text": "\n \t\tYes, this issue can be repeoduce. It blames to a mis-cal of text length in input buffer, as fixed in above prs.\n \t\t"}}}, "commit": {"commit_id": "31502566b017397d9a9acf74a7878f745cc4d3c5", "commit_author": "HongwuLin", "commitT": "2020-03-24 10:42:42+08:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "cmd\\repl\\prompt.go", "file_new_name": "cmd\\repl\\prompt.go", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "329", "deleted_lines": "237,330"}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "cmd\\repl\\repl_test.go", "file_new_name": "cmd\\repl\\repl_test.go", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "477,478,479,480,481,482,483,484,485,486,487,488,489,490,491,492,493,494,495,496,497,498,499,500,501,502,503,504,505,506,507,508", "deleted_lines": null}}}}}}