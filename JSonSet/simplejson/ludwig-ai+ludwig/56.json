{"BR": {"BR_id": "56", "BR_author": "sk-", "BRopenT": "2019-02-12T18:39:58Z", "BRcloseT": "2019-02-12T23:44:33Z", "BR_text": {"BRsummary": "KeyError when using text features", "BRdescription": "\n When using text features, the following error is raised:\n <denchmark-code>Traceback (most recent call last):\n   File \"/Users/user/.virtualenvs/ml/bin/ludwig\", line 10, in <module>\n     sys.exit(main())\n   File \"/Users/user/.virtualenvs/ml/lib/python3.6/site-packages/ludwig/cli.py\", line 86, in main\n     CLI()\n   File \"/Users/user/.virtualenvs/ml/lib/python3.6/site-packages/ludwig/cli.py\", line 64, in __init__\n     getattr(self, args.command)()\n   File \"/Users/user/.virtualenvs/ml/lib/python3.6/site-packages/ludwig/cli.py\", line 70, in train\n     train.cli(sys.argv[2:])\n   File \"/Users/user/.virtualenvs/ml/lib/python3.6/site-packages/ludwig/train.py\", line 663, in cli\n     full_train(**vars(args))\n   File \"/Users/user/.virtualenvs/ml/lib/python3.6/site-packages/ludwig/train.py\", line 224, in full_train\n     random_seed=random_seed\n   File \"/Users/user/.virtualenvs/ml/lib/python3.6/site-packages/ludwig/data/preprocessing.py\", line 562, in preprocess_for_training\n     [training_set, validation_set, test_set]\n   File \"/Users/user/.virtualenvs/ml/lib/python3.6/site-packages/ludwig/data/preprocessing.py\", line 777, in replace_text_feature_level\n     level)\n KeyError: 'name_word'\n </denchmark-code>\n \n This is due to the following lines <denchmark-link:https://github.com/uber/ludwig/blob/9de6ee32f0e2e6cc6157f0772aa8c28a8d662fe8/ludwig/data/preprocessing.py#L774-L778>https://github.com/uber/ludwig/blob/9de6ee32f0e2e6cc6157f0772aa8c28a8d662fe8/ludwig/data/preprocessing.py#L774-L778</denchmark-link>\n  as it removes the columns regarding of whether they exist or not. Conditionally removing the columns fixes the issue and the model trains successfully.\n The model definition I'm using is:\n input_features:\n     -\n         name: name\n         type: text\n         encoder: rnn\n         level: char\n \n output_features:\n     -\n         name: sex\n         type: category\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "sk-", "commentT": "2019-02-12T20:15:36Z", "comment_text": "\n \t\tThe latest commit should fix it. Please confirm and I'll close the issue.\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "sk-", "commentT": "2019-02-12T22:27:36Z", "comment_text": "\n \t\tThanks <denchmark-link:https://github.com/w4nderlust>@w4nderlust</denchmark-link>\n  for the quick fix. I confirm that works.\n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "sk-", "commentT": "2019-02-12T23:44:33Z", "comment_text": "\n \t\tYou're welcome!\n \t\t"}}}, "commit": {"commit_id": "1820ef537fcfe599514a27fc4fcc6f902bee9f3d", "commit_author": "piero", "commitT": "2019-02-12 12:13:21-08:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "ludwig\\data\\preprocessing.py", "file_new_name": "ludwig\\data\\preprocessing.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "773,776,777", "deleted_lines": "774,775", "method_info": {"method_name": "replace_text_feature_level", "method_params": "model_definition,datasets", "method_startline": "761", "method_endline": "777"}}}}}}}