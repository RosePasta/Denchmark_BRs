{"BR": {"BR_id": "701", "BR_author": "ghost(ghost)", "BRopenT": "2020-04-14T22:47:10Z", "BRcloseT": "2020-04-15T17:07:54Z", "BR_text": {"BRsummary": "small error when compiling with DNNL_VERBOSE turned off", "BRdescription": "\n Hi,\n When compiling the latest commit in the master branch I get an error when DNNL_VERBOSE is turned off. It's something that's easy to fix:\n in verbose.cpp line 130\n <denchmark-code>#if defined(DISABLE_VERBOSE)\n void pd_info_t::init(const primitive_desc_t *) {}\n </denchmark-code>\n \n should be:\n <denchmark-code>#if defined(DISABLE_VERBOSE)\n void pd_info_t::init(engine_t *, const primitive_desc_t *) {}\n </denchmark-code>\n \n thanks\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "ghost(ghost)", "commentT": "2020-04-14T23:08:07Z", "comment_text": "\n \t\tConfirmed. Broken in <denchmark-link:https://github.com/oneapi-src/oneDNN/commit/57a98fb6de4b6b9773f70343eba864098c634ab9>57a98fb</denchmark-link>\n .\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "ghost(ghost)", "commentT": "2020-04-14T23:20:18Z", "comment_text": "\n \t\tHi <denchmark-link:https://github.com/zulma46>@zulma46</denchmark-link>\n ,\n Thanks for the report. We will fix the issue soon.\n But regardless of that, may I know why you build oneDNN with VERBOSE off? Is it because of the slowdown in primitive creation? I want to note that we recently (in DNNL v1.3) made verbose lazy-initialized, so if you don't set DNNL_VERBOSE to 1 or 2 you won't observe any perf differences.\n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "ghost(ghost)", "commentT": "2020-04-15T08:34:33Z", "comment_text": "\n \t\tHi,\n Yes, I turned VERBOSE off for performance reasons. I wasn't aware this is no longer necessary.\n Thanks for letting me know.\n \t\t"}, "comments_3": {"comment_id": 4, "comment_author": "ghost(ghost)", "commentT": "2020-04-15T08:48:49Z", "comment_text": "\n \t\tYeah, there was a bunch of micro optimizations made to accelerate primitive descriptor creation. The commit that made verbose initialization lazy is <denchmark-link:https://github.com/oneapi-src/oneDNN/commit/9d5e7671eb4bc6e496560bd5f658fbff647562a3>9d5e767</denchmark-link>\n .\n \t\t"}}}, "commit": {"commit_id": "9788d45b886c7ff300c786df73da30a66f0b768f", "commit_author": "Roman Dubtsov", "commitT": "2020-04-15 10:06:37-07:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "src\\common\\verbose.cpp", "file_new_name": "src\\common\\verbose.cpp", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "131", "deleted_lines": "131", "method_info": {"method_name": "dnnl::impl::pd_info_t::init", "method_params": "", "method_startline": "131", "method_endline": "131"}}, "hunk_1": {"Ismethod": 1, "added_lines": "131,132", "deleted_lines": "131", "method_info": {"method_name": "dnnl::impl::pd_info_t::init", "method_params": "", "method_startline": "131", "method_endline": "132"}}}}}}}