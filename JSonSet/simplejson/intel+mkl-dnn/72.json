{"BR": {"BR_id": "72", "BR_author": "arfoll", "BRopenT": "2017-06-09T14:15:45Z", "BRcloseT": "2017-06-09T21:25:43Z", "BR_text": {"BRsummary": "Forcing -Werror causes errors with gcc 7.1.1 because of int-in-bool-context", "BRdescription": "\n When compiling I get aload of this:\n <denchmark-code>/home/brendan/git/mkl-dnn/src/cpu/gemm_convolution.hpp: In instantiation of \u2018mkldnn::impl::status_t mkldnn::impl::cpu::_gemm_convolution_fwd_t<with_relu, run_jit, isa>::pd_t::init() [with bool with_relu = true; bool run_jit = true; mkldnn::impl::cpu::cpu_isa_t isa = (mkldnn::impl::cpu::cpu_isa_t)2; mkldnn::impl::status_t = mkldnn_status_t]\u2019:\n /home/brendan/git/mkl-dnn/src/cpu/../common/primitive_desc.hpp:80:25:   required from \u2018static mkldnn::impl::status_t mkldnn_primitive_desc::create(mkldnn::impl::primitive_desc_t**, const mkldnn::impl::op_desc_t*, mkldnn::impl::engine_t*, const primitive_desc_t*) [with pd_t = mkldnn::impl::cpu::_gemm_convolution_fwd_t<true, true, (mkldnn::impl::cpu::cpu_isa_t)2>::pd_t; mkldnn::impl::status_t = mkldnn_status_t; mkldnn::impl::primitive_desc_t = mkldnn_primitive_desc; mkldnn::impl::engine_t = mkldnn_engine]\u2019\n /home/brendan/git/mkl-dnn/src/cpu/cpu_engine.cpp:277:1:   required from here\n /home/brendan/git/mkl-dnn/src/cpu/gemm_convolution.hpp:74:21: error: ?: using integer constants in boolean context, the expression will always evaluate to \u2018true\u2019 [-Werror=int-in-bool-context]\n </denchmark-code>\n \n Removing -Werror in the CMakelists.txt obviously removes these errors and so I can compile.\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "arfoll", "commentT": "2017-06-09T16:57:14Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/arfoll>@arfoll</denchmark-link>\n ,\n Thanks for the report!\n In fact we have several issues with gcc 7.1.\n We'll fix the issues and push the fixes soon.\n \t\t"}}}, "commit": {"commit_id": "5c48b448f5ef2fdf3a3e9637cc854142ac492aff", "commit_author": "Fomenko, Evarist M", "commitT": "2017-06-09 10:49:56-07:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 3, "file_old_name": "src\\cpu\\gemm_convolution.hpp", "file_new_name": "src\\cpu\\gemm_convolution.hpp", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "182,183", "deleted_lines": "182,183", "method_info": {"method_name": "mkldnn::impl::cpu::_gemm_convolution_bwd_data_t::pd_t::init", "method_params": "", "method_startline": "157", "method_endline": "185"}}, "hunk_1": {"Ismethod": 1, "added_lines": "292,293", "deleted_lines": "292,293", "method_info": {"method_name": "mkldnn::impl::cpu::_gemm_convolution_bwd_weights_t::pd_t::init", "method_params": "", "method_startline": "265", "method_endline": "295"}}, "hunk_2": {"Ismethod": 1, "added_lines": "73,74", "deleted_lines": "73,74", "method_info": {"method_name": "mkldnn::impl::cpu::_gemm_convolution_fwd_t::pd_t::init", "method_params": "", "method_startline": "43", "method_endline": "76"}}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "src\\cpu\\jit_avx2_conv_kernel_f32.cpp", "file_new_name": "src\\cpu\\jit_avx2_conv_kernel_f32.cpp", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "579", "deleted_lines": "579", "method_info": {"method_name": "mkldnn::impl::cpu::jit_avx2_conv_bwd_data_kernel_f32::init_conf", "method_params": "jcp,cd,diff_src_d,weights_d,diff_dst_d", "method_startline": "526", "method_endline": "628"}}}}, "file_2": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "src\\cpu\\jit_avx512_core_u8s8u8_convolution.cpp", "file_new_name": "src\\cpu\\jit_avx512_core_u8s8u8_convolution.cpp", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "411", "deleted_lines": "411", "method_info": {"method_name": "mkldnn::impl::cpu::jit_avx512_core_u8s8u8_conv_fwd_ker_t::init_conf", "method_params": "c,cd,src_d,wei_d,dst_d,with_relu,negative_slope", "method_startline": "374", "method_endline": "476"}}}}}}}