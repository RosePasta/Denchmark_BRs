{"BR": {"BR_id": "2479", "BR_author": "lianghongzhuo", "BRopenT": "2020-10-15T10:31:56Z", "BRcloseT": "2020-12-08T15:54:35Z", "BR_text": {"BRsummary": "memory leak while loading stl file", "BRdescription": "\n Describe the bug\n when I load stl file generated from openscad I got MemoryError: std::bad_alloc\n and try to run the same code on a server with 128 g memory, I found the memory is keeping increase and eventually fails to load stl file. Convert the stl file using meshlab can solve the problem.\n To Reproduce\n Steps to reproduce the behavior:\n <denchmark-code>import open3d as o3d\n o3d.io.read_triangle_mesh(\"mesh.stl\")\n </denchmark-code>\n \n Environment (please complete the following information):\n \n Operating system:  Ubuntu 18.04\n Python version:  Python 3.7\n Open3D version: 0.10\n Is this remote workstation?:  no\n How did you install Open3D?:  conda\n \n Additional context\n stl file I used:\n <denchmark-link:https://github.com/intel-isl/Open3D/files/5384151/mesh.zip>mesh.zip</denchmark-link>\n \n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "lianghongzhuo", "commentT": "2020-10-15T10:45:20Z", "comment_text": "\n \t\tupdate: I tested another stl file with binary format, it works. However I still cannot import ascii format stl\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "lianghongzhuo", "commentT": "2020-10-18T10:22:29Z", "comment_text": "\n \t\tYes, the current STL reader assumes binary format. Added a fix in <denchmark-link:https://github.com/intel-isl/Open3D/pull/2506>#2506</denchmark-link>\n \n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "lianghongzhuo", "commentT": "2020-10-18T11:02:11Z", "comment_text": "\n \t\tThanks!\n \t\t"}}}, "commit": {"commit_id": "1665a6fa4ea7045ad46501de2a35cee3758b7545", "commit_author": "Yixing Lao", "commitT": "2020-12-08 16:54:34+01:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "3rdparty\\pybind11", "file_new_name": "3rdparty\\pybind11", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "1", "deleted_lines": "1"}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "3rdparty\\tinyobjloader\\tinyobjloader", "file_new_name": "3rdparty\\tinyobjloader\\tinyobjloader", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "1", "deleted_lines": "1"}}}, "file_2": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "cpp\\open3d\\io\\TriangleMeshIO.cpp", "file_new_name": "cpp\\open3d\\io\\TriangleMeshIO.cpp", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "85,103,104", "deleted_lines": "102", "method_info": {"method_name": "open3d::io::ReadTriangleMesh", "method_params": "filename,mesh,print_progress", "method_startline": "83", "method_endline": "112"}}, "hunk_1": {"Ismethod": 1, "added_lines": "85,103,104", "deleted_lines": "102", "method_info": {"method_name": "open3d::io::ReadTriangleMesh", "method_params": "filename,mesh,enable_post_processing,print_progress", "method_startline": "83", "method_endline": "114"}}}}, "file_3": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "cpp\\open3d\\io\\TriangleMeshIO.h", "file_new_name": "cpp\\open3d\\io\\TriangleMeshIO.h", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "46,65,68,104,107,110", "deleted_lines": "77,78,79,80"}}}, "file_4": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "cpp\\open3d\\io\\file_format\\FileASSIMP.cpp", "file_new_name": "cpp\\open3d\\io\\file_format\\FileASSIMP.cpp", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "141,144,145,146,147,148,149,150,151", "deleted_lines": "143", "method_info": {"method_name": "open3d::io::ReadTriangleMeshUsingASSIMP", "method_params": "filename,mesh,enable_post_processing,print_progress", "method_startline": "139", "method_endline": "272"}}, "hunk_1": {"Ismethod": 1, "added_lines": "141,144,145,146,147,148,149,150,151", "deleted_lines": "143", "method_info": {"method_name": "open3d::io::ReadTriangleMeshUsingASSIMP", "method_params": "filename,mesh,print_progress", "method_startline": "139", "method_endline": "264"}}}}, "file_5": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "cpp\\open3d\\io\\file_format\\FileOFF.cpp", "file_new_name": "cpp\\open3d\\io\\file_format\\FileOFF.cpp", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "43", "deleted_lines": null, "method_info": {"method_name": "open3d::io::ReadTriangleMeshFromOFF", "method_params": "filename,mesh,enable_post_processing,print_progress", "method_startline": "41", "method_endline": "165"}}}}, "file_6": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "cpp\\open3d\\io\\file_format\\FilePLY.cpp", "file_new_name": "cpp\\open3d\\io\\file_format\\FilePLY.cpp", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "541", "deleted_lines": null, "method_info": {"method_name": "open3d::io::ReadTriangleMeshFromPLY", "method_params": "filename,mesh,enable_post_processing,print_progress", "method_startline": "539", "method_endline": "610"}}}}, "file_7": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "cpp\\open3d\\io\\file_format\\FileSTL.cpp", "file_new_name": "cpp\\open3d\\io\\file_format\\FileSTL.cpp", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "55,56,57", "deleted_lines": "42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97", "method_info": {"method_name": "open3d::io::WriteTriangleMeshToSTL", "method_params": "filename,mesh,write_ascii,compressed,write_vertex_normals,write_vertex_colors,write_triangle_uvs,print_progress", "method_startline": "42", "method_endline": "97"}}, "hunk_1": {"Ismethod": 1, "added_lines": "55,56,57", "deleted_lines": "42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107", "method_info": {"method_name": "open3d::io::ReadTriangleMeshFromSTL", "method_params": "filename,mesh,print_progress", "method_startline": "42", "method_endline": "107"}}}}, "file_8": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "cpp\\pybind\\io\\class_io.cpp", "file_new_name": "cpp\\pybind\\io\\class_io.cpp", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "212,213,216,217,221", "deleted_lines": "212,215,219", "method_info": {"method_name": "open3d::io::pybind_class_io", "method_params": "m_io", "method_startline": "101", "method_endline": "452"}}}}}}}