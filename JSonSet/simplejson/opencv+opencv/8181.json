{"BR": {"BR_id": "8181", "BR_author": "csukuangfj", "BRopenT": "2017-02-10T14:59:54Z", "BRcloseT": "2017-03-01T08:44:31Z", "BR_text": {"BRsummary": "The implementation of cv::Mat::diag(int) does not match its comments", "BRdescription": "\n <denchmark-h:h5>System information (version)</denchmark-h>\n \n \n OpenCV => 3.1.0\n Operating System / Platform => Windows 64 Bit\n Compiler => Visual Studio 2015\n \n <denchmark-h:h5>Detailed description</denchmark-h>\n \n The implementation of cv::Mat cv::Mat::diag(int d = 0) const does not match its comments.\n Its comments are listed below:\n /** @brief Extracts a diagonal from a matrix\n \n The method makes a new header for the specified matrix diagonal. The new matrix is represented as a\n single-column matrix. Similarly to Mat::row and Mat::col, this is an O(1) operation.\n @param d index of the diagonal, with the following values:\n - `d=0` is the main diagonal.\n - `d>0` is a diagonal from the lower half. For example, d=1 means the diagonal is set\n     immediately below the main one.\n - `d<0` is a diagonal from the upper half. For example, d=-1 means the diagonal is set\n     immediately above the main one.\n     */\n Mat diag(int d=0) const;\n According to the above comments, when d = 1,  the diagonal of the following matrix\n <denchmark-code>1 2 3\n 4 5 6\n 7 8 9\n </denchmark-code>\n \n should be\n <denchmark-code>4\n 8\n </denchmark-code>\n \n But the actual output is\n <denchmark-code>2\n 6\n </denchmark-code>\n \n <denchmark-h:h5>Steps to reproduce</denchmark-h>\n \n The following code can reproduce the result mentioned above:\n cv::Mat m = (cv::Mat_<int>(3, 3) << \n \t\t\t1, 2, 3, \n \t\t\t4, 5, 6, \n \t\t\t7, 8, 9);\n \n std::cout << m.diag(1) << std::endl;\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "csukuangfj", "commentT": "2017-03-01T08:44:31Z", "comment_text": "\n \t\tResolved in <denchmark-link:https://github.com/opencv/opencv/pull/8199>#8199</denchmark-link>\n \n \t\t"}}}, "commit": {"commit_id": "57ed0e57f0b422cb13b5f4bd7f9c83187a2576e9", "commit_author": "Fangjun KUANG", "commitT": "2017-02-16 18:00:32+03:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "modules\\core\\include\\opencv2\\core\\mat.hpp", "file_new_name": "modules\\core\\include\\opencv2\\core\\mat.hpp", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "1084,1086", "deleted_lines": "1084,1086"}}}}}}