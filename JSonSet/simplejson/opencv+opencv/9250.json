{"BR": {"BR_id": "9250", "BR_author": "Olivier-tl", "BRopenT": "2017-07-27T20:20:35Z", "BRcloseT": "2017-10-16T09:17:42Z", "BR_text": {"BRsummary": "Building opencv winrt 10.0 SDK fails to compile on VS 2015", "BRdescription": "\n <denchmark-h:h5>System information (version)</denchmark-h>\n \n \n OpenCV => Master\n Operating System / Platform => Windows 64 Bit\n Compiler => Visual Studio 2015 update 3\n \n <denchmark-h:h5>Detailed description</denchmark-h>\n \n We want to build opencv winrt on ARM. We tried running the script :\n ~ cd opencv/platforms/winrt\n ~ .\\setup_winrt.ps1 \"WS\" \"10.0\" \"ARM\" -b\n It gives the following error for all configurations :\n CMake Error at CMakeLists.txt:127 (project):\n A Windows Store component with CMake requires both the Windows Desktop SDK\n as well as the Windows Store '10.0' SDK.  Please make sure that you have\n both installed.\n We tried replacing the script using the modified one from the repo <denchmark-link:https://github.com/sylvain-prevost/opencv-hololens/blob/master/platforms/winrt/setup_winrt.ps1>opencv-hololens</denchmark-link>\n . This worked well for x86 and x64 configurations but not for ARM.  There is two problems when building for ARM :\n \n \n Error C3861  '_tzcnt_u32': identifier not found\n This happens in opencv\\modules\\core\\include\\opencv2\\core\\hal\\intrin.hpp\ton line 443.\n \n \n Error\tC2664  '__n128 __neon_QdQnQm(unsigned int,__n128,__n128)' : cannot convert argument 3\n from 'volatile const float32x4_t' to '__n128'\topencv_imgproc\n This happens opencv\\modules\\imgproc\\src\\smooth.cpp on line 3961.\n \n \n When we fix those two problems. It compiles successfully.\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "Olivier-tl", "commentT": "2017-07-27T20:49:25Z", "comment_text": "\n \t\t\n CMake Error at CMakeLists.txt:127 (project):\n A Windows Store component with CMake requires both the Windows Desktop SDK\n as well as the Windows Store '10.0' SDK. Please make sure that you have\n both installed.\n \n This error message comes from CMake.\n \n Please check that you using up-to-date CMake version.\n Check for installed Windows 10 SDK: https://developer.microsoft.com/en-us/windows/downloads/windows-10-sdk or via MSVS installer (works well with MSVS 2017 installer).\n Try to call this build script from MSVS compiler command-line shell (with properly configured environment).\n \n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "Olivier-tl", "commentT": "2017-07-27T21:03:40Z", "comment_text": "\n \t\t\n Latest CMake is installed.\n Visual studio 2015 was already installed with windows 10 SDK.\n We tried in the VS2015 (x86, x64) native tool command prompt and the same error comes up.\n \n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "Olivier-tl", "commentT": "2017-10-16T09:17:42Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/opencv/opencv/pull/9856>#9856</denchmark-link>\n \n \t\t"}}}, "commit": {"commit_id": "d30a0c6f03269b57c4ca4225f4c031492a0cb8d6", "commit_author": "Gregory Morse", "commitT": "2017-10-16 12:12:35+03:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "cmake\\OpenCVCompilerOptimizations.cmake", "file_new_name": "cmake\\OpenCVCompilerOptimizations.cmake", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "259,260,261,262,263,264,265", "deleted_lines": "259,260,261,262,264"}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "modules\\core\\include\\opencv2\\core\\hal\\intrin.hpp", "file_new_name": "modules\\core\\include\\opencv2\\core\\hal\\intrin.hpp", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "443", "deleted_lines": "443", "method_info": {"method_name": "cv::trailingZeros32", "method_params": "value", "method_startline": "441", "method_endline": "462"}}}}, "file_2": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "modules\\core\\src\\hal_replacement.hpp", "file_new_name": "modules\\core\\src\\hal_replacement.hpp", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "730,741", "deleted_lines": "730,741"}}}, "file_3": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "modules\\imgproc\\src\\hal_replacement.hpp", "file_new_name": "modules\\imgproc\\src\\hal_replacement.hpp", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "630,639", "deleted_lines": "630,639"}}}}}}