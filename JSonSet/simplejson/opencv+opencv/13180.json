{"BR": {"BR_id": "13180", "BR_author": "snk4tr", "BRopenT": "2018-11-16T12:35:53Z", "BRcloseT": "2018-11-17T10:21:00Z", "BR_text": {"BRsummary": "cv2.copyMakeBorder segmentation fault", "BRdescription": "\n <denchmark-h:h5>System information (version)</denchmark-h>\n \n \n \n operating system:\n Ubuntu 16.04 (64-bit) in Docker 18.09.0.\n \n \n architecture (e.g. x86):\n Intel\u00ae Core\u2122 i5-7500 CPU @ 3.40GHz \u00d7 4.\n \n \n opencv-python version:\n opencv-python==3.4.3.18\n \n \n <denchmark-h:h5>Detailed description</denchmark-h>\n \n \n \n Expected behavior:\n ValueError: passed image has wrong shape. Expected to have 3 dimensions, has 4.\n (or any other type of error with the similar description)\n \n \n Actual behavior:\n 31807 segmentation fault (core dumped)\n \n \n Description:\n This issue was first opened in opencv-python repository. Since input data checks neither performed  on Python-level  nor on C-level usage of 4-D and greater tensors causes uninformative errors.\n \n \n <denchmark-h:h5>Steps to reproduce</denchmark-h>\n \n import cv2\n import numpy as np\n \n # Example image. \n # May also be an image loaded with opencv-python with np.expand_dims(img, 0) or similar.\n img = np.zeros((1, 256, 256, 3), dtype=np.uint8)\n cv2.copyMakeBorder(img, 1, 1, 1, 1, cv2.BORDER_CONSTANT, value=[0, 0, 0])\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "snk4tr", "commentT": "2018-11-17T09:23:19Z", "comment_text": "\n \t\tsame problem in c++ (3.4 /win10 / mingw64):\n <denchmark-code>int dims[] = {1,2,3,4,5};\n Mat dst, src(5,dims,CV_8U);\n copyMakeBorder(src, dst, 1, 1, 1, 1, BORDER_CONSTANT, Scalar::all(0));\n </denchmark-code>\n \n (silent) segfault in release,   triggered in debug <denchmark-link:https://github.com/opencv/opencv/blob/master/modules/core/src/copy.cpp#L1238>from here</denchmark-link>\n  at least\n (when accessing )\n \t\t"}}}, "commit": {"commit_id": "96c99c716a6ed796af5b07dc660c03775f4b2ca1", "commit_author": "berak", "commitT": "2018-11-17 13:19:42+03:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "modules\\core\\src\\copy.cpp", "file_new_name": "modules\\core\\src\\copy.cpp", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "1186,1188", "deleted_lines": "1186,1188", "method_info": {"method_name": "cv::copyMakeBorder", "method_params": "_src,_dst,top,bottom,left,right,borderType,value", "method_startline": "1181", "method_endline": "1242"}}}}}}}