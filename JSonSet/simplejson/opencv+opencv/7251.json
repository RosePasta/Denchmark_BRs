{"BR": {"BR_id": "7251", "BR_author": "Finfa811", "BRopenT": "2016-09-08T08:10:13Z", "BRcloseT": "2016-09-08T11:15:46Z", "BR_text": {"BRsummary": "Blending artifacts in OpenCV 3.1 image stitching", "BRdescription": "\n <denchmark-h:h5>System information (version)</denchmark-h>\n \n \n OpenCV => 3.1\n Operating System / Platform => Windows 64 Bit\n Compiler => Visual Studio 2015\n \n <denchmark-h:h5>Detailed description</denchmark-h>\n \n In some cases artifacts are appearing when using stitching module with multi-band blender in 3.1 version (in 2.4.9 it's working perfectly). They concretely appear when the borders of the seam masks are near the borders of the original masks.\n I solved the issue few months ago. The reason is because corners and warped images were changed to be conformed by   instead of by . That leads to black gaps in the images that will blur with foreground pixels in the pyramidal blending step, resulting in the mentioned artifacts. Pictures and examples can be seen in the question I opened <denchmark-link:http://answers.opencv.org/question/89028/blending-artifacts-in-opencv-image-stitching/>here</denchmark-link>\n .\n To fix the issue, this <denchmark-link:https://github.com/opencv/opencv/commit/a7f69a37e345146bb5d23dc72053ae94bb1ea241>commit</denchmark-link>\n  should be reverted. I commented the commit few months ago when I solved the problem, but since I got no reply I just open this issue following the request of a user of .\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "Finfa811", "commentT": "2016-09-08T08:26:47Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/Finfa811>@Finfa811</denchmark-link>\n  I guess the best way to get this reverted as fast as possible is supply a PR with the forementioned revert and a link to this topic and the Q&A. It will get the attention of devs as fast as possible that way!\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "Finfa811", "commentT": "2016-09-08T09:02:16Z", "comment_text": "\n \t\tYou can leave this one open untill the PR discussion is finished and the PR is merged in!\n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "Finfa811", "commentT": "2016-09-08T09:05:04Z", "comment_text": "\n \t\tSure <denchmark-link:https://github.com/StevenPuttemans>@StevenPuttemans</denchmark-link>\n . Sorry :)\n \t\t"}, "comments_3": {"comment_id": 4, "comment_author": "Finfa811", "commentT": "2016-09-08T10:19:53Z", "comment_text": "\n \t\tCould you add input images to reproduce this issue?\n \t\t"}, "comments_4": {"comment_id": 5, "comment_author": "Finfa811", "commentT": "2016-09-08T10:22:41Z", "comment_text": "\n \t\tYes <denchmark-link:https://github.com/alalek>@alalek</denchmark-link>\n , try with this dataset:\n <denchmark-link:https://github.com/opencv/opencv/files/461367/shanghai.zip>shanghai.zip</denchmark-link>\n \n \t\t"}}}, "commit": {"commit_id": "fd1370b92b8d629f8459add34c1e63d22677c182", "commit_author": "Finfa811", "commitT": "2016-09-08 10:49:48+02:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "modules\\stitching\\src\\stitcher.cpp", "file_new_name": "modules\\stitching\\src\\stitcher.cpp", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "195,301", "deleted_lines": "195,301", "method_info": {"method_name": "cv::Stitcher::composePanorama", "method_params": "images,pano", "method_startline": "130", "method_endline": "371"}}}}}}}