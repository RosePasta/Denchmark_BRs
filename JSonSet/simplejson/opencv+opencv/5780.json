{"BR": {"BR_id": "5780", "BR_author": "dotdash", "BRopenT": "2015-12-10T09:42:32Z", "BRcloseT": "2015-12-16T10:38:04Z", "BR_text": {"BRsummary": "`cv::cuda::createContinuous`effectively ignores its `cols` argument", "BRdescription": "\n In <denchmark-link:https://github.com/opencv/opencv/commit/1db4afac6aa52be3e158a5fdc03572ee0d51baf1>1db4afa</denchmark-link>\n   was made generic and it now uses  instead of setting  and  directly. But  only takes a  parameter, and calculates an appropriate number of . This means that the result of  may have a different number of columns than requested.\n This breaks, for example, the repeated use of a single cv::cuda::Convolution instance on images of varying sizes, because the persistent buffers don't get resized correctly.\n A quick fix would be to change the area check in createContinuousImpl from obj.size().area() < area to obj.size().area() != area, but that would of course introduce more reallocations than strictly necessary.\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "dotdash", "commentT": "2015-12-10T10:24:14Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/opencv/opencv/pull/5781>#5781</denchmark-link>\n \n \t\t"}}}, "commit": {"commit_id": "5576c0866a267990817acb1fb0ae1e8ac35c4b6c", "commit_author": "Vladislav Vinogradov", "commitT": "2015-12-10 14:20:28+03:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "modules\\core\\src\\cuda_gpu_mat.cpp", "file_new_name": "modules\\core\\src\\cuda_gpu_mat.cpp", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "263", "deleted_lines": "263", "method_info": {"method_name": "createContinuousImpl", "method_params": "rows,cols,type,obj", "method_startline": "259", "method_endline": "267"}}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "modules\\cudaarithm\\test\\test_gpumat.cpp", "file_new_name": "modules\\cudaarithm\\test\\test_gpumat.cpp", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "369,370,371,372,373", "deleted_lines": null, "method_info": {"method_name": "CreateContinuous::SetUp", "method_params": "", "method_startline": "369", "method_endline": "373"}}, "hunk_1": {"Ismethod": 1, "added_lines": "376,377,378,379,380,381,382,383,384,385,386,387,388,389,390,391,392,393,394,395,396,397,398,399,400,401,402,403,404,405,406,407", "deleted_lines": null, "method_info": {"method_name": "CUDA_TEST_P", "method_params": "CreateContinuous,BufferReuse", "method_startline": "376", "method_endline": "407"}}}}}}}