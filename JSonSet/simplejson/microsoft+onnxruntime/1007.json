{"BR": {"BR_id": "1007", "BR_author": "xadupre", "BRopenT": "2019-05-10T17:27:54Z", "BRcloseT": "2019-09-13T12:30:36Z", "BR_text": {"BRsummary": "TreeEnsembleClassifier: base_value not tested, fails for binary classification", "BRdescription": "\n Describe the bug\n If base_value is specified and the number of classes is 2, the score of the second class is constant.\n System information\n \n OS Platform and Distribution: Windows\n ONNX Runtime installed from source\n ONNX Runtime version: 0.4\n Python version: 3.7\n Visual Studio version 2017\n \n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "xadupre", "commentT": "2019-07-25T21:58:09Z", "comment_text": "\n \t\tReopen it because the fix got reverted\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "xadupre", "commentT": "2019-09-13T12:30:36Z", "comment_text": "\n \t\tFixed on the converter side: <denchmark-link:https://github.com/onnx/sklearn-onnx/pull/255>onnx/sklearn-onnx#255</denchmark-link>\n \n \t\t"}}}, "commit": {"commit_id": "2e01018e332f615369a93cf6953c1015e294064d", "commit_author": "Xavier Dupr\u00e9", "commitT": "2019-05-22 00:05:24+02:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 4, "file_old_name": "onnxruntime\\core\\providers\\cpu\\ml\\tree_ensemble_classifier.cc", "file_new_name": "onnxruntime\\core\\providers\\cpu\\ml\\tree_ensemble_classifier.cc", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "307,308,309,310,311,312", "deleted_lines": null, "method_info": {"method_name": "onnxruntime::ml::get_weight_class_positive", "method_params": "classes,pos_weight", "method_startline": "307", "method_endline": "312"}}, "hunk_1": {"Ismethod": 1, "added_lines": "381,382,383,384,385,386,387,388,389,392,400,401,402,403,404,405,406,407,408,409,411,412,413,415,416,417,418,419,420,422,423,424,425,446,448", "deleted_lines": "349,350,351,352,353,354,355,356,357,358,359,360,361,362,363,364,365,366,367,368,369,370,371,372,373,374,376,379,380,381,382,383,384,385,386,387,388,389,390,391,392,393,394,395,396,397,398,399,400,401,402,403,404,405,406,407,408,429,431", "method_info": {"method_name": "onnxruntime::ml::TreeEnsembleClassifier<T>::Compute", "method_params": "context", "method_startline": "349", "method_endline": "448"}}, "hunk_2": {"Ismethod": 1, "added_lines": "315,316,317,318,319,320,321,322,323,324,325,326,327,328,329,330,331,332,333,334,335,336,337,338,339,340,341,342,343,344,345,346", "deleted_lines": "320,321,322,323,324,334,335,336,337", "method_info": {"method_name": "onnxruntime::ml::_set_score_binary", "method_params": "i,y_data,write_additional_scores,weights_are_all_positive_,classes,classes_labels_,weights_classes_,positive_label,negative_label", "method_startline": "315", "method_endline": "346"}}, "hunk_3": {"Ismethod": 1, "added_lines": "296,297,298,299,300,301,302,303,304,305", "deleted_lines": null, "method_info": {"method_name": "onnxruntime::ml::get_max_weight", "method_params": "classes,maxclass,maxweight", "method_startline": "296", "method_endline": "305"}}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "onnxruntime\\test\\providers\\cpu\\ml\\tree_ensembler_classifier_test.cc", "file_new_name": "onnxruntime\\test\\providers\\cpu\\ml\\tree_ensembler_classifier_test.cc", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210", "deleted_lines": null, "method_info": {"method_name": "onnxruntime::test::TEST", "method_params": "MLOpTest,TreeEnsembleClassifierBinaryBaseValue", "method_startline": "154", "method_endline": "210"}}, "hunk_1": {"Ismethod": 1, "added_lines": "212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256,257,258,259,260,261,262,263,264,265,266,267", "deleted_lines": null, "method_info": {"method_name": "onnxruntime::test::TEST", "method_params": "MLOpTest,TreeEnsembleClassifierBinaryBaseValueNull", "method_startline": "212", "method_endline": "267"}}}}}}}