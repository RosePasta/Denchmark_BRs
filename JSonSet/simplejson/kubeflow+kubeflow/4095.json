{"BR": {"BR_id": "4095", "BR_author": "jlewi", "BRopenT": "2019-09-09T17:24:16Z", "BRcloseT": "2019-09-09T21:03:14Z", "BR_text": {"BRsummary": "kfctl doesn't build with clean build because thrift repo is unavailable", "BRdescription": "\n /kind bug\n \n See <denchmark-link:https://github.com/kubeflow/manifests/pull/350>kubeflow/manifests#350</denchmark-link>\n  where kfctl build fails in a presubmit.\n I was able to reproduce it locally\n <denchmark-code>git checkout v0.6-branch\n mkdir -p /tmp/newgo\n export GOPATH=/tmp/newgo\n cd bootstrap\n make clean\n make build-kfctl\n </denchmark-code>\n \n Here we set the GOPATH to a clean directory to force all dependencies to be pulled.\n The build fails with\n <denchmark-code>go: git.apache.org/thrift.git@v0.0.0-20180902110319-2566ecd5d999: git fetch -f origin refs/heads/*:refs/heads/* refs/tags/*:refs/tags/* in /tmp/go/pkg/mod/cache/vcs/83dba939f95a790e497d565fc4418400145a1a514f955fa052f662d56e920c3e: exit status 128:\n \tfatal: unable to access 'https://git.apache.org/thrift.git/': Failed to connect to git.apache.org port 443: Connection timed out\n </denchmark-code>\n \n It looks like lots of people are reporting similar issues; e.g.\n <denchmark-link:https://github.com/hashicorp/terraform/issues/22664>hashicorp/terraform#22664</denchmark-link>\n \n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "jlewi", "commentT": "2019-09-09T17:24:19Z", "comment_text": "\n \t\tIssue-Label Bot is automatically applying the label kind/bug to this issue, with a confidence of 0.99. Please mark this comment with \ud83d\udc4d or \ud83d\udc4e to give our bot feedback!\n Links: <denchmark-link:https://github.com/marketplace/issue-label-bot>app homepage</denchmark-link>\n , <denchmark-link:https://mlbot.net/data/kubeflow/kubeflow>dashboard</denchmark-link>\n  and <denchmark-link:https://github.com/hamelsmu/MLapp>code</denchmark-link>\n  for this bot.\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "jlewi", "commentT": "2019-09-09T17:33:07Z", "comment_text": "\n \t\tAdding\n <denchmark-code>replace git.apache.org/thrift.git => github.com/apache/thrift v0.0.0-20180902110319-2566ecd5d999\n </denchmark-code>\n \n to go.mod appears to fix the issue.\n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "jlewi", "commentT": "2019-09-09T17:48:38Z", "comment_text": "\n \t\tLooks like the fix is already on master.\n <denchmark-link:https://github.com/kubeflow/kubeflow/blob/master/bootstrap/go.mod#L62>https://github.com/kubeflow/kubeflow/blob/master/bootstrap/go.mod#L62</denchmark-link>\n \n \t\t"}, "comments_3": {"comment_id": 4, "comment_author": "jlewi", "commentT": "2019-09-09T21:03:14Z", "comment_text": "\n \t\tFixed by <denchmark-link:https://github.com/kubeflow/kubeflow/pull/4097>#4097</denchmark-link>\n \n \t\t"}}}, "commit": {"commit_id": "6af406b5345d30685ac36c105a5396d8650bd756", "commit_author": "Jeremy Lewi", "commitT": "2019-09-09 13:34:54-07:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "bootstrap\\go.mod", "file_new_name": "bootstrap\\go.mod", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "94", "deleted_lines": null}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "bootstrap\\go.sum", "file_new_name": "bootstrap\\go.sum", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "46", "deleted_lines": null}}}}}}