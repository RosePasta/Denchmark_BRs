{"BR": {"BR_id": "3770", "BR_author": "zhenghuiwang", "BRopenT": "2019-07-27T04:44:24Z", "BRcloseT": "2019-08-08T17:29:20Z", "BR_text": {"BRsummary": "v0.6.1 pod default issue", "BRdescription": "\n When creating a new notebook in kubeflow-{user} namespace after installation of v0.6.1, I see this error. But notebook can be created\n <denchmark-code>500: There was an error trying to connect to the backend API. Http failure response for https://v061-rc2-mac.endpoints.zhenghui-kubeflow.cloud.goog/jupyter/api/namespaces/kubeflow-zhenghui/poddefaults: 500 OK\n </denchmark-code>\n \n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "zhenghuiwang", "commentT": "2019-07-27T04:44:26Z", "comment_text": "\n \t\tIssue-Label Bot is automatically applying the label kind/bug to this issue, with a confidence of 0.83. Please mark this comment with \ud83d\udc4d or \ud83d\udc4e to give our bot feedback!\n Links: <denchmark-link:https://github.com/marketplace/issue-label-bot>app homepage</denchmark-link>\n , <denchmark-link:https://mlbot.net/data/kubeflow/kubeflow>dashboard</denchmark-link>\n  and <denchmark-link:https://github.com/hamelsmu/MLapp>code</denchmark-link>\n  for this bot.\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "zhenghuiwang", "commentT": "2019-07-28T19:32:46Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/zhenghuiwang>@zhenghuiwang</denchmark-link>\n  Where are you seeing the error?\n <denchmark-link:https://github.com/kimwnasptd>@kimwnasptd</denchmark-link>\n  Is this coming from the jupyter web-app trying to list PodDefaults to display in the UI?\n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "zhenghuiwang", "commentT": "2019-07-29T07:46:38Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/zhenghuiwang>@zhenghuiwang</denchmark-link>\n  could you give us the logs from the  Pod?\n \t\t"}, "comments_3": {"comment_id": 4, "comment_author": "zhenghuiwang", "commentT": "2019-07-29T17:26:08Z", "comment_text": "\n \t\tThree relevant logs:\n <denchmark-code>2019-07-29T17:22:34.727855921Z [2019-07-29 17:22:34,727] ERROR in app: Exception on /api/namespaces/kubeflow-zhenghui/poddefaults [GET]\n  E \n   undefined\n \n \n 2019-07-29T17:22:34.727889728Z Traceback (most recent call last):\n   File \"/usr/local/lib/python3.6/dist-packages/flask/app.py\", line 2292, in wsgi_app\n     response = self.full_dispatch_request()\n   File \"/usr/local/lib/python3.6/dist-packages/flask/app.py\", line 1815, in full_dispatch_request\n     rv = self.handle_user_exception(e)\n   File \"/usr/local/lib/python3.6/dist-packages/flask/app.py\", line 1718, in handle_user_exception\n     reraise(exc_type, exc_value, tb)\n   File \"/usr/local/lib/python3.6/dist-packages/flask/_compat.py\", line 35, in reraise\n     raise value\n   File \"/usr/local/lib/python3.6/dist-packages/flask/app.py\", line 1813, in full_dispatch_request\n     rv = self.dispatch_request()\n   File \"/usr/local/lib/python3.6/dist-packages/flask/app.py\", line 1799, in dispatch_request\n     return self.view_functions[rule.endpoint](**req.view_args)\n   File \"/app/kubeflow_jupyter/common/base_app.py\", line 45, in get_poddefaults\n     desc = pd[\"spec\"][\"desc\"]\n KeyError: 'desc'\n  E \n   undefined\n \n ![Error report](https://user-images.githubusercontent.com/8263977/62068636-4552dc80-b1eb-11e9-8b02-22ec8fb665dd.png)\n \n 2019-07-29T17:22:34.728044213Z 10.40.1.29 - - [29/Jul/2019 17:22:34] \"GET /api/namespaces/kubeflow-zhenghui/poddefaults HTTP/1.1\" 500 -\n  E \n   undefined\n </denchmark-code>\n \n \t\t"}, "comments_4": {"comment_id": 5, "comment_author": "zhenghuiwang", "commentT": "2019-07-29T17:26:37Z", "comment_text": "\n \t\t<denchmark-link:https://user-images.githubusercontent.com/8263977/62068652-4d128100-b1eb-11e9-9c7a-b24583dd4376.png></denchmark-link>\n \n \t\t"}, "comments_5": {"comment_id": 6, "comment_author": "zhenghuiwang", "commentT": "2019-07-29T18:22:02Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/zhenghuiwang>@zhenghuiwang</denchmark-link>\n  this is because (at least) one of the  in the Namespace doesn't have a desc field. I was under the assumption that this field would be necessary and not optional, but by checking the <denchmark-link:https://github.com/kubeflow/kubeflow/blob/master/components/admission-webhook/pkg/apis/settings/v1alpha1/poddefault_types.go#L38>code</denchmark-link>\n  turns out it is not.\n Could you check which PodDefault is the one without a desc  and give it one? This should resolve the issue.\n <denchmark-link:https://github.com/jlewi>@jlewi</denchmark-link>\n  would it make more sense to make this field  or should the webapp use the 's label as a description, if the desc field is omitted?\n \t\t"}, "comments_6": {"comment_id": 7, "comment_author": "zhenghuiwang", "commentT": "2019-07-30T03:07:07Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/kimwnasptd>@kimwnasptd</denchmark-link>\n  I think it would be good if the web app could support the case where description is not provided.\n Would it make sense if no description is provided to just use the PodDefault's name?\n \t\t"}, "comments_7": {"comment_id": 8, "comment_author": "zhenghuiwang", "commentT": "2019-07-30T12:05:04Z", "comment_text": "\n \t\tACK, I'll make a PR for the webapp to use the PodDefault's name in case the desc is not present.\n \t\t"}, "comments_8": {"comment_id": 9, "comment_author": "zhenghuiwang", "commentT": "2019-08-08T08:04:36Z", "comment_text": "\n \t\t/assign <denchmark-link:https://github.com/kimwnasptd>@kimwnasptd</denchmark-link>\n \n \t\t"}}}, "commit": {"commit_id": "9419d4d7168cabad02df2d5c32367039b2cb9f3c", "commit_author": "Kimonas Sotirchos", "commitT": "2019-08-08 10:29:19-07:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "components\\jupyter-web-app\\backend\\kubeflow_jupyter\\common\\base_app.py", "file_new_name": "components\\jupyter-web-app\\backend\\kubeflow_jupyter\\common\\base_app.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "45,46,47,48,49", "deleted_lines": "45", "method_info": {"method_name": "get_poddefaults", "method_params": "namespace", "method_startline": "34", "method_endline": "54"}}}}}}}