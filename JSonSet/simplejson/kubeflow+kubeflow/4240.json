{"BR": {"BR_id": "4240", "BR_author": "holdenk", "BRopenT": "2019-10-07T06:55:56Z", "BRcloseT": "2019-10-08T23:09:52Z", "BR_text": {"BRsummary": "kfctl build and apply do not appear to detect the project variable in KFDef", "BRdescription": "\n /kind bug\n What steps did you take and what happened:\n Download kfctl_gcp_iap.yaml , replace the email key with my e-mail username, add project:  as the last key as indicated in the \"Project should be set to the GCP project you want to use.\" comment. Run kfctl apply. Receive error project is not configured.\n What did you expect to happen:\n Either applying of kubeflow, or at least an error indicating where to configure the project.\n Anything else you would like to add:\n [Miscellaneous information that will assist in solving the issue.]\n Environment:\n \n Kubeflow version: (version number can be found at the bottom left corner of the Kubeflow dashboard): N/A (did not get that far)\n kfctl version: (use kfctl version): 2395c5f\n Kubernetes platform: (e.g. minikube): GCP\n Kubernetes version: (use kubectl version): N/A (did not get that far)\n OS (e.g. from /etc/os-release): Ubuntu 18.04.3\n \n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "holdenk", "commentT": "2019-10-07T06:56:06Z", "comment_text": "\n \t\tIssue Label Bot is not confident enough to auto-label this issue.\n See <denchmark-link:https://mlbot.net/data/kubeflow/kubeflow>dashboard</denchmark-link>\n  for more details.\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "holdenk", "commentT": "2019-10-07T22:54:32Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/holdenk>@holdenk</denchmark-link>\n  can you provide your KFDef File?\n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "holdenk", "commentT": "2019-10-07T23:06:32Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/gabrielwen>@gabrielwen</denchmark-link>\n  <denchmark-link:https://github.com/lluunn>@lluunn</denchmark-link>\n   Are we not attempting to get the default values from gcloud?\n \t\t"}, "comments_3": {"comment_id": 4, "comment_author": "holdenk", "commentT": "2019-10-08T00:03:25Z", "comment_text": "\n \t\tdup of this one: <denchmark-link:https://github.com/kubeflow/kubeflow/issues/3923>#3923</denchmark-link>\n \n \t\t"}, "comments_4": {"comment_id": 5, "comment_author": "holdenk", "commentT": "2019-10-08T00:09:46Z", "comment_text": "\n \t\t <denchmark-link:https://github.com/kubeflow/kubeflow/issues/3923>#3923</denchmark-link>\n \n \t\t"}, "comments_5": {"comment_id": 6, "comment_author": "holdenk", "commentT": "2019-10-08T00:47:58Z", "comment_text": "\n \t\tSee <denchmark-link:https://github.com/kubeflow/kubeflow/pull/4246>#4246</denchmark-link>\n \n The problem appears to be different from <denchmark-link:https://github.com/kubeflow/kubeflow/issues/3923>#3923</denchmark-link>\n \n In particular, kfctl doesn't appear to respect the email, project, and zone set in the KFDef.\n The E2E test is setting the EMAIL and PROJECT environment variable which isn't what it should be doing\n \n \n \n kubeflow/py/kubeflow/kubeflow/ci/kfctl_go_test_utils.py\n \n \n          Line 211\n       in\n       9592b48\n \n \n \n \n \n \n  os.environ[\"EMAIL\"] = email \n \n \n \n \n \n This was changed in <denchmark-link:https://github.com/kubeflow/kubeflow/pull/4040>#4040</denchmark-link>\n  which defined the new \"-f\" flag.\n /assign <denchmark-link:https://github.com/swiftdiaries>@swiftdiaries</denchmark-link>\n \n \t\t"}, "comments_6": {"comment_id": 7, "comment_author": "holdenk", "commentT": "2019-10-08T00:52:44Z", "comment_text": "\n \t\tHere's where its getting PROJECT,ZONE, EMAIL from environment variables\n \n \n \n kubeflow/bootstrap/pkg/kfapp/gcp/gcp.go\n \n \n          Line 1964\n       in\n       9592b48\n \n \n \n \n \n \n  gcp.kfDef.Spec.Project = os.Getenv(\"PROJECT\") \n \n \n \n \n \n \t\t"}, "comments_7": {"comment_id": 8, "comment_author": "holdenk", "commentT": "2019-10-08T00:53:52Z", "comment_text": "\n \t\tThis was added recently in <denchmark-link:https://github.com/kubeflow/kubeflow/pull/4040>#4040</denchmark-link>\n \n \t\t"}}}, "commit": {"commit_id": "321c1d3313b6b898a64616d3b54e7db2179d89d6", "commit_author": "Adhita Selvaraj", "commitT": "2019-10-08 16:09:51-07:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "bootstrap\\pkg\\kfapp\\gcp\\gcp.go", "file_new_name": "bootstrap\\pkg\\kfapp\\gcp\\gcp.go", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "1967,1973,1979", "deleted_lines": "1964,1968,1971,1975,1978,1982"}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 3, "file_old_name": "py\\kubeflow\\kubeflow\\ci\\kfctl_go_test_utils.py", "file_new_name": "py\\kubeflow\\kubeflow\\ci\\kfctl_go_test_utils.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "131,140,151", "deleted_lines": "131", "method_info": {"method_name": "get_config_spec", "method_params": "config_path,project,email,app_path", "method_startline": "131", "method_endline": "171"}}, "hunk_1": {"Ismethod": 1, "added_lines": "214,215", "deleted_lines": "199,211,214,215,216", "method_info": {"method_name": "kfctl_deploy_kubeflow", "method_params": "app_path,project,use_basic_auth,use_istio,config_path,kfctl_path", "method_startline": "175", "method_endline": "232"}}, "hunk_2": {"Ismethod": 1, "added_lines": "131,140,151", "deleted_lines": "131", "method_info": {"method_name": "get_config_spec", "method_params": "config_path,project,email,zone,app_path", "method_startline": "131", "method_endline": "173"}}}}}}}