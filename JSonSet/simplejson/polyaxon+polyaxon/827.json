{"BR": {"BR_id": "827", "BR_author": "mouradmourafiq", "BRopenT": "2020-06-16T13:57:22Z", "BRcloseT": "2020-06-20T00:58:14Z", "BR_text": {"BRsummary": "Investigate core resolver does not inject templates into context", "BRdescription": "\n <denchmark-h:h3>Describe the bug</denchmark-h>\n \n the following snippet will be resolved correctly in EE and not in CE.\n - name: ports\n   isOptional: true\n   isList: true\n   type: int\n   value: [8091]\n run:\n   kind: service\n   ports: \"{{ports}}\"\n <denchmark-h:h3>Expected behavior</denchmark-h>\n \n All templated variables should be resolved and injected into the context correctly.\n This is likely related to <denchmark-link:https://github.com/polyaxon/polyaxon/issues/802>#802</denchmark-link>\n \n <denchmark-h:h3>Environment</denchmark-h>\n \n CE 1.0.99\n \t"}, "comments": {}}, "commit": {"commit_id": "af17f5a8183c193c4a9006ac5f4ea862b76f9c93", "commit_author": "mouradmourafiq", "commitT": "2020-06-20 01:30:05+02:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "core\\polyaxon\\cli\\components\\docker.py", "file_new_name": "core\\polyaxon\\cli\\components\\docker.py", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "102", "deleted_lines": "102"}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "core\\polyaxon\\cli\\executor\\docker.py", "file_new_name": "core\\polyaxon\\cli\\executor\\docker.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "122", "deleted_lines": "122", "method_info": {"method_name": "_run", "method_params": "ctx,name,owner,project_name,description,tags,specification,log", "method_startline": "113", "method_endline": "152"}}}}, "file_2": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "core\\polyaxon\\cli\\operations.py", "file_new_name": "core\\polyaxon\\cli\\operations.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "779", "deleted_lines": "779,780", "method_info": {"method_name": "service", "method_params": "ctx,yes,external,url", "method_startline": "756", "method_endline": "816"}}}}, "file_3": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "core\\polyaxon\\cli\\run.py", "file_new_name": "core\\polyaxon\\cli\\run.py", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "181", "deleted_lines": "181"}}}, "file_4": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "core\\polyaxon\\polyaxonfile\\manager.py", "file_new_name": "core\\polyaxon\\polyaxonfile\\manager.py", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "98", "deleted_lines": "98"}}}, "file_5": {"file_change_type": "MODIFY", "file_Nmethod": 11, "file_old_name": "core\\polyaxon\\polyaxonfile\\specs\\compiled_operation.py", "file_new_name": "core\\polyaxon\\polyaxonfile\\specs\\compiled_operation.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "46,48", "deleted_lines": "46,47,48,50", "method_info": {"method_name": "dict_to_param_spec", "method_params": "Dict", "method_startline": "46", "method_endline": "57"}}, "hunk_1": {"Ismethod": 1, "added_lines": "119", "deleted_lines": "116", "method_info": {"method_name": "apply_run_connections_params", "method_params": "cls,V1CompiledOperation,str,Dict,str,None", "method_startline": "114", "method_endline": "119"}}, "hunk_2": {"Ismethod": 1, "added_lines": "150,151,152,153,154,155", "deleted_lines": null, "method_info": {"method_name": "apply_section_contexts", "method_params": "cls,V1CompiledOperation,section,Dict,str,None", "method_startline": "150", "method_endline": "155"}}, "hunk_3": {"Ismethod": 1, "added_lines": "60,61,62,63,64", "deleted_lines": "60,61,64", "method_info": {"method_name": "calculate_context_spec", "method_params": "cls,V1CompiledOperation,Dict,bool", "method_startline": "60", "method_endline": "64"}}, "hunk_4": {"Ismethod": 1, "added_lines": "163,164,165,166,167", "deleted_lines": null, "method_info": {"method_name": "apply_operation_contexts", "method_params": "cls,V1CompiledOperation,Dict,str,None", "method_startline": "163", "method_endline": "167"}}, "hunk_5": {"Ismethod": 1, "added_lines": "64,65,66,67,68,69,70,71,72,73,74,76,77", "deleted_lines": "64,65,66,67,68,69,70,71,72,74,76,77", "method_info": {"method_name": "_apply_run_context", "method_params": "cls,V1CompiledOperation", "method_startline": "64", "method_endline": "77"}}, "hunk_6": {"Ismethod": 1, "added_lines": "81,82,83,84,85", "deleted_lines": null, "method_info": {"method_name": "_apply_run_context", "method_params": "cls,V1CompiledOperation,str,None,Dict", "method_startline": "81", "method_endline": "85"}}, "hunk_7": {"Ismethod": 1, "added_lines": "100,101,102,103,104", "deleted_lines": "101,102,103", "method_info": {"method_name": "apply_run_context", "method_params": "cls,V1CompiledOperation,str,None,Dict", "method_startline": "100", "method_endline": "104"}}, "hunk_8": {"Ismethod": 1, "added_lines": "135", "deleted_lines": "131,136,137,138,139", "method_info": {"method_name": "apply_run_contexts", "method_params": "cls,V1CompiledOperation,contexts", "method_startline": "131", "method_endline": "140"}}, "hunk_9": {"Ismethod": 1, "added_lines": "46", "deleted_lines": "46,47", "method_info": {"method_name": "_update_params_with_contexts", "method_params": "str,Dict", "method_startline": "46", "method_endline": "47"}}, "hunk_10": {"Ismethod": 1, "added_lines": "88,89", "deleted_lines": "88,92", "method_info": {"method_name": "apply_context", "method_params": "cls,V1CompiledOperation", "method_startline": "88", "method_endline": "92"}}}}, "file_6": {"file_change_type": "MODIFY", "file_Nmethod": 6, "file_old_name": "core\\polyaxon\\polyaxonfile\\specs\\libs\\parser.py", "file_new_name": "core\\polyaxon\\polyaxonfile\\specs\\libs\\parser.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "121", "deleted_lines": "121", "method_info": {"method_name": "parse_section", "method_params": "cls,config_section,str,bool", "method_startline": "120", "method_endline": "121"}}, "hunk_1": {"Ismethod": 1, "added_lines": "121", "deleted_lines": "121", "method_info": {"method_name": "parse_section", "method_params": "cls,config_section,str,bool", "method_startline": "120", "method_endline": "121"}}, "hunk_2": {"Ismethod": 1, "added_lines": "111,113", "deleted_lines": "111,113", "method_info": {"method_name": "parse_run", "method_params": "cls,parsed_data,str", "method_startline": "111", "method_endline": "117"}}, "hunk_3": {"Ismethod": 1, "added_lines": "111,113", "deleted_lines": "111,113", "method_info": {"method_name": "parse_run", "method_params": "cls,parsed_data,str", "method_startline": "111", "method_endline": "117"}}, "hunk_4": {"Ismethod": 1, "added_lines": "58", "deleted_lines": "58", "method_info": {"method_name": "parse", "method_params": "cls,config,str", "method_startline": "57", "method_endline": "58"}}, "hunk_5": {"Ismethod": 1, "added_lines": "58", "deleted_lines": "58", "method_info": {"method_name": "parse", "method_params": "cls,config,str", "method_startline": "57", "method_endline": "58"}}}}, "file_7": {"file_change_type": "RENAME", "file_Nmethod": 0, "file_old_name": "core\\polyaxon\\polypod\\compiler\\resolvers\\__init__.py", "file_new_name": "core\\polyaxon\\polypod\\compiler\\resolver\\__init__.py"}, "file_8": {"file_change_type": "RENAME", "file_Nmethod": 0, "file_old_name": "core\\polyaxon\\polypod\\compiler\\resolvers\\base.py", "file_new_name": "core\\polyaxon\\polypod\\compiler\\resolver\\base.py"}, "file_9": {"file_change_type": "RENAME", "file_Nmethod": 0, "file_old_name": "core\\polyaxon\\polypod\\compiler\\resolver.py", "file_new_name": "core\\polyaxon\\polypod\\compiler\\resolver\\resolver.py"}, "file_10": {"file_change_type": "DELETE", "file_Nmethod": 0, "file_old_name": "core\\polyaxon\\polypod\\compiler\\resolvers\\core.py", "file_new_name": "None"}, "file_11": {"file_change_type": "MODIFY", "file_Nmethod": 13, "file_old_name": "core\\tests\\test_polyaxonfile\\test_polyaxonfile.py", "file_new_name": "core\\tests\\test_polyaxonfile\\test_polyaxonfile.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "334", "deleted_lines": "334", "method_info": {"method_name": "test_matrix_early_stopping_file_passes", "method_params": "self", "method_startline": "323", "method_endline": "352"}}, "hunk_1": {"Ismethod": 1, "added_lines": "365", "deleted_lines": "365", "method_info": {"method_name": "test_mapping_early_stopping_file_passes", "method_params": "self", "method_startline": "354", "method_endline": "376"}}, "hunk_2": {"Ismethod": 1, "added_lines": "483,495", "deleted_lines": "483,495", "method_info": {"method_name": "test_specification_with_quotes", "method_params": "self", "method_startline": "475", "method_endline": "496"}}, "hunk_3": {"Ismethod": 1, "added_lines": "227", "deleted_lines": "227", "method_info": {"method_name": "test_job_file_with_environment_passes", "method_params": "self", "method_startline": "220", "method_endline": "253"}}, "hunk_4": {"Ismethod": 1, "added_lines": "151,159,160", "deleted_lines": "151,159,160", "method_info": {"method_name": "test_passing_params_overrides_polyaxonfiles", "method_params": "self", "method_startline": "142", "method_endline": "168"}}, "hunk_5": {"Ismethod": 1, "added_lines": "261", "deleted_lines": "261", "method_info": {"method_name": "test_matrix_file_passes", "method_params": "self", "method_startline": "255", "method_endline": "293"}}, "hunk_6": {"Ismethod": 1, "added_lines": "185", "deleted_lines": "185", "method_info": {"method_name": "test_job_file_with_init_passes", "method_params": "self", "method_startline": "178", "method_endline": "203"}}, "hunk_7": {"Ismethod": 1, "added_lines": "212", "deleted_lines": "212", "method_info": {"method_name": "test_job_file_with_termination_passes", "method_params": "self", "method_startline": "205", "method_endline": "218"}}, "hunk_8": {"Ismethod": 1, "added_lines": "386", "deleted_lines": "386", "method_info": {"method_name": "test_tf_passes", "method_params": "self", "method_startline": "378", "method_endline": "405"}}, "hunk_9": {"Ismethod": 1, "added_lines": "305", "deleted_lines": "305", "method_info": {"method_name": "test_matrix_file_passes_int_float_types", "method_params": "self", "method_startline": "295", "method_endline": "321"}}, "hunk_10": {"Ismethod": 1, "added_lines": "116", "deleted_lines": "116", "method_info": {"method_name": "test_simple_file_passes", "method_params": "self", "method_startline": "108", "method_endline": "132"}}, "hunk_11": {"Ismethod": 1, "added_lines": "414", "deleted_lines": "414", "method_info": {"method_name": "test_pytorch_passes", "method_params": "self", "method_startline": "407", "method_endline": "439"}}, "hunk_12": {"Ismethod": 1, "added_lines": "449", "deleted_lines": "449", "method_info": {"method_name": "test_mpi_passes", "method_params": "self", "method_startline": "441", "method_endline": "473"}}}}, "file_12": {"file_change_type": "MODIFY", "file_Nmethod": 14, "file_old_name": "core\\tests\\test_polyaxonfile\\test_polyaxonfile_pipelines.py", "file_new_name": "core\\tests\\test_polyaxonfile\\test_polyaxonfile_pipelines.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "75", "deleted_lines": "75", "method_info": {"method_name": "test_pipeline_ops_not_corresponding_to_components", "method_params": "self", "method_startline": "65", "method_endline": "75"}}, "hunk_1": {"Ismethod": 1, "added_lines": "217", "deleted_lines": "217", "method_info": {"method_name": "test_dag_pipeline", "method_params": "self", "method_startline": "209", "method_endline": "238"}}, "hunk_2": {"Ismethod": 1, "added_lines": "316", "deleted_lines": "316", "method_info": {"method_name": "test_matrix_early_stopping_file_passes", "method_params": "self", "method_startline": "306", "method_endline": "345"}}, "hunk_3": {"Ismethod": 1, "added_lines": "122", "deleted_lines": "122", "method_info": {"method_name": "test_refs_pipeline", "method_params": "self", "method_startline": "108", "method_endline": "126"}}, "hunk_4": {"Ismethod": 1, "added_lines": "100", "deleted_lines": "100", "method_info": {"method_name": "test_cron_pipeline", "method_params": "self", "method_startline": "89", "method_endline": "106"}}, "hunk_5": {"Ismethod": 1, "added_lines": "160", "deleted_lines": "160", "method_info": {"method_name": "test_sequential_pipeline", "method_params": "self", "method_startline": "150", "method_endline": "177"}}, "hunk_6": {"Ismethod": 1, "added_lines": "354", "deleted_lines": "354", "method_info": {"method_name": "test_matrix_file_passess", "method_params": "self", "method_startline": "347", "method_endline": "393"}}, "hunk_7": {"Ismethod": 1, "added_lines": "51", "deleted_lines": "51", "method_info": {"method_name": "test_pipeline_with_no_ops_raises", "method_params": "self", "method_startline": "43", "method_endline": "51"}}, "hunk_8": {"Ismethod": 1, "added_lines": "63", "deleted_lines": "63", "method_info": {"method_name": "test_pipeline_with_no_components_raises", "method_params": "self", "method_startline": "53", "method_endline": "63"}}, "hunk_9": {"Ismethod": 1, "added_lines": "405", "deleted_lines": "405", "method_info": {"method_name": "test_matrix_file_passes_int_float_types", "method_params": "self", "method_startline": "395", "method_endline": "429"}}, "hunk_10": {"Ismethod": 1, "added_lines": "87", "deleted_lines": "87", "method_info": {"method_name": "test_cyclic_pipeline_raises", "method_params": "self", "method_startline": "77", "method_endline": "87"}}, "hunk_11": {"Ismethod": 1, "added_lines": "139", "deleted_lines": "139", "method_info": {"method_name": "test_interval_pipeline", "method_params": "self", "method_startline": "128", "method_endline": "148"}}, "hunk_12": {"Ismethod": 1, "added_lines": "189", "deleted_lines": "189", "method_info": {"method_name": "test_parallel_pipeline", "method_params": "self", "method_startline": "179", "method_endline": "207"}}, "hunk_13": {"Ismethod": 1, "added_lines": "248,287,288", "deleted_lines": "248,287,288", "method_info": {"method_name": "test_build_run_pipeline", "method_params": "self", "method_startline": "240", "method_endline": "304"}}}}, "file_13": {"file_change_type": "MODIFY", "file_Nmethod": 6, "file_old_name": "core\\tests\\test_polyaxonfile\\test_polyaxonfile_typing.py", "file_new_name": "core\\tests\\test_polyaxonfile\\test_polyaxonfile_typing.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "175", "deleted_lines": "175", "method_info": {"method_name": "test_matrix_file_passes_int_float_types", "method_params": "self", "method_startline": "164", "method_endline": "192"}}, "hunk_1": {"Ismethod": 1, "added_lines": "275,292,295,296", "deleted_lines": "275,292,295,296", "method_info": {"method_name": "test_run_simple_file_passes", "method_params": "self", "method_startline": "257", "method_endline": "307"}}, "hunk_2": {"Ismethod": 1, "added_lines": "60,69", "deleted_lines": "60,69", "method_info": {"method_name": "test_no_params_for_required_inputs_outputs_raises", "method_params": "self", "method_startline": "49", "method_endline": "69"}}, "hunk_3": {"Ismethod": 1, "added_lines": "101,110,111,132,133", "deleted_lines": "101,110,111,132,133", "method_info": {"method_name": "test_required_inputs_with_params", "method_params": "self", "method_startline": "92", "method_endline": "162"}}, "hunk_4": {"Ismethod": 1, "added_lines": "239", "deleted_lines": "239", "method_info": {"method_name": "test_matrix_file_with_required_inputs_passes", "method_params": "self", "method_startline": "231", "method_endline": "255"}}, "hunk_5": {"Ismethod": 1, "added_lines": "205", "deleted_lines": "205", "method_info": {"method_name": "test_matrix_job_file_passes_int_float_types", "method_params": "self", "method_startline": "194", "method_endline": "220"}}}}, "file_14": {"file_change_type": "MODIFY", "file_Nmethod": 5, "file_old_name": "core\\tests\\test_polyaxonfile\\test_specification.py", "file_new_name": "core\\tests\\test_polyaxonfile\\test_specification.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "299", "deleted_lines": "299", "method_info": {"method_name": "test_patch_experiment_with_optional_inputs", "method_params": "self", "method_startline": "274", "method_endline": "337"}}, "hunk_1": {"Ismethod": 1, "added_lines": "129", "deleted_lines": "129", "method_info": {"method_name": "test_apply_context_raises_with_required_inputs", "method_params": "self", "method_startline": "89", "method_endline": "138"}}, "hunk_2": {"Ismethod": 1, "added_lines": "179,191", "deleted_lines": "179,191", "method_info": {"method_name": "test_apply_context_passes_with_required_inputs_and_params", "method_params": "self", "method_startline": "140", "method_endline": "228"}}, "hunk_3": {"Ismethod": 1, "added_lines": "251,269,271", "deleted_lines": "251,269,271", "method_info": {"method_name": "test_apply_params_extends_connections_and_init", "method_params": "self", "method_startline": "230", "method_endline": "272"}}, "hunk_4": {"Ismethod": 1, "added_lines": "81", "deleted_lines": "81", "method_info": {"method_name": "test_patch_experiment_without_io_and_params_raises", "method_params": "self", "method_startline": "52", "method_endline": "87"}}}}, "file_15": {"file_change_type": "MODIFY", "file_Nmethod": 4, "file_old_name": "core\\tests\\test_polypod\\test_resolvers\\test_core_resolver.py", "file_new_name": "core\\tests\\test_polypod\\test_resolvers\\test_core_resolver.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "90,91,95,97", "deleted_lines": "99", "method_info": {"method_name": "test_resolve_connections_with_no_config", "method_params": "self", "method_startline": "88", "method_endline": "102"}}, "hunk_1": {"Ismethod": 1, "added_lines": "155,156,160,162,193,194,198,200,238,239,243,245", "deleted_lines": "145,180,222", "method_info": {"method_name": "test_resolve_connections_with_invalid_config", "method_params": "self", "method_startline": "118", "method_endline": "259"}}, "hunk_2": {"Ismethod": 1, "added_lines": "59,60,64,66,74,75", "deleted_lines": "59,71,86", "method_info": {"method_name": "test_core_resolver_instance", "method_params": "self", "method_startline": "58", "method_endline": "86"}}, "hunk_3": {"Ismethod": 1, "added_lines": "106,107,111,113", "deleted_lines": null, "method_info": {"method_name": "test_resolve_without_compiled_operation", "method_params": "self", "method_startline": "104", "method_endline": "116"}}}}, "file_16": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "platform\\coredb\\coredb\\scheduler\\resolver.py", "file_new_name": "platform\\coredb\\coredb\\scheduler\\resolver.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "28", "deleted_lines": "28", "method_info": {"method_name": "resolve_params", "method_params": "self", "method_startline": "27", "method_endline": "28"}}, "hunk_1": {"Ismethod": 1, "added_lines": null, "deleted_lines": "36,37,38", "method_info": {"method_name": "resolve_io", "method_params": "self", "method_startline": "35", "method_endline": "46"}}}}, "file_17": {"file_change_type": "MODIFY", "file_Nmethod": 3, "file_old_name": "platform\\coredb\\tests\\test_runs\\test_create_runs_manager.py", "file_new_name": "platform\\coredb\\tests\\test_runs\\test_create_runs_manager.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "118,121,125", "deleted_lines": "118,121,125", "method_info": {"method_name": "test_create_run_with_templated_service_spec", "method_params": "self", "method_startline": "102", "method_endline": "126"}}, "hunk_1": {"Ismethod": 1, "added_lines": "57,61", "deleted_lines": "57,61", "method_info": {"method_name": "test_create_run_with_job_spec", "method_params": "self", "method_startline": "42", "method_endline": "62"}}, "hunk_2": {"Ismethod": 1, "added_lines": "78,81,86", "deleted_lines": "78,81,86", "method_info": {"method_name": "test_create_run_with_templated_job_spec", "method_params": "self", "method_startline": "64", "method_endline": "87"}}}}}}}