{"BR": {"BR_id": "175", "BR_author": "lostanlen", "BRopenT": "2018-11-20T04:52:02Z", "BRcloseT": "2018-11-28T17:03:33Z", "BR_text": {"BRsummary": "[BUG] cache management of 2-D filter banks", "BRdescription": "\n A bug found by running  on the Kymatio source.\n Originating in code by <denchmark-link:https://github.com/edouardoyallon>@edouardoyallon</denchmark-link>\n   and <denchmark-link:https://github.com/gabrielhuang>@gabrielhuang</denchmark-link>\n \n It happens in a try statement which is itself part of an except statement, so the bug is really hard to trigger, but it's there.\n \n \n \n kymatio/kymatio/scattering2d/filter_bank.py\n \n \n          Line 119\n       in\n       56a846f\n \n \n \n \n \n \n  with open(filer_file, 'wb') as fp: \n \n \n \n \n \n filer_file should read as filter_file\n I think that, long term, this caching mechanic would be more elegantly (and more stably) implemented with joblib.Memory, and that the calls to print could be replaced by logging.\n One example of joblib-based cache manager which comes very close to what we need here is available in , cf. <denchmark-link:https://github.com/librosa/librosa/blob/master/librosa/cache.py>https://github.com/librosa/librosa/blob/master/librosa/cache.py</denchmark-link>\n \n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "lostanlen", "commentT": "2018-11-24T06:05:45Z", "comment_text": "\n \t\t\n filer_file should read as filter_file\n \n \ud83e\udd23\n \n I think that, long term, this caching mechanic would be more elegantly (and more stably) implemented with joblib.Memory\n \n unclear to me whether that is good, since joblib saves anonymous hashes, whereas since we know all the parameters that go into filter generation, we can write informative filenames\n \n and that the calls to print could be replaced by logging\n \n yeah probably a good idea as a general policy. takes some learning though and some decisions\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "lostanlen", "commentT": "2018-11-24T10:00:27Z", "comment_text": "\n \t\tI think I agree with <denchmark-link:https://github.com/eickenberg>@eickenberg</denchmark-link>\n  . Long term will decide which solution to chose, for now I believe it's ok; feel free to open a new issue later.(I prefer several issues with single problems rather than several problems into one issue)\n \t\t"}}}, "commit": {"commit_id": "afe9bf9590028d4c5124a0101e1cbcd1d4d3ca8c", "commit_author": "Vincent Lostanlen", "commitT": "2018-11-28 12:03:33-05:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 3, "file_old_name": "kymatio\\scattering2d\\filter_bank.py", "file_new_name": "kymatio\\scattering2d\\filter_bank.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "68", "deleted_lines": "68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125", "method_info": {"method_name": "filter_bank", "method_params": "M,N,J,L,cache", "method_startline": "68", "method_endline": "125"}}, "hunk_1": {"Ismethod": 1, "added_lines": "14,35,46,47,48,51,52,53,54,55,56", "deleted_lines": "14,35,40,47,50,51,52,62", "method_info": {"method_name": "filter_bank_real", "method_params": "M,N,J,L", "method_startline": "14", "method_endline": "65"}}, "hunk_2": {"Ismethod": 1, "added_lines": "14,35,46,47,48,51,52,53,54,55,56,66,67,68", "deleted_lines": "14,35,40,47,50,51,52,62,68,69,70,71", "method_info": {"method_name": "filter_bank", "method_params": "M,N,J,L", "method_startline": "14", "method_endline": "71"}}}}}}}