{"BR": {"BR_id": "18246", "BR_author": "ciyongch", "BRopenT": "2020-05-06T04:14:10Z", "BRcloseT": "2020-05-12T00:54:10Z", "BR_text": {"BRsummary": "Nightly test fail with \"test_large_vector.test_nn\" on v1.7.x branch", "BRdescription": "\n <denchmark-h:h2>Description</denchmark-h>\n \n Nightly test fail with \"test_large_vector.test_nn\" on v1.7.x branch, please check log <denchmark-link:http://jenkins.mxnet-ci.amazon-ml.com/job/NightlyTestsForBinaries/job/v1.7.x/2/execution/node/232/log/>here</denchmark-link>\n \n <denchmark-h:h3>Error Message</denchmark-h>\n \n <denchmark-code>05:29:54  + nosetests-3.4 tests/nightly/test_large_vector.py:test_nn\n 05:44:46  E\n 05:44:46  ======================================================================\n 05:44:46  ERROR: test_large_vector.test_nn\n 05:44:46  ----------------------------------------------------------------------\n 05:44:46  Traceback (most recent call last):\n 05:44:46    File \"/usr/local/lib/python3.5/dist-packages/nose/case.py\", line 198, in runTest\n 05:44:46      self.test(*self.arg)\n 05:44:46    File \"/work/mxnet/tests/nightly/test_large_vector.py\", line 159, in test_nn\n 05:44:46      check_layer_norm()\n 05:44:46    File \"/work/mxnet/tests/nightly/test_large_vector.py\", line 89, in check_layer_norm\n 05:44:46      mx_out = nd.LayerNorm(data, gamma, beta, axis, eps)\n 05:44:46    File \"<string>\", line 81, in LayerNorm\n 05:44:46    File \"/work/mxnet/python/mxnet/_ctypes/ndarray.py\", line 91, in _imperative_invoke\n 05:44:46      ctypes.byref(out_stypes)))\n 05:44:46    File \"/work/mxnet/python/mxnet/base.py\", line 246, in check_call\n 05:44:46      raise get_last_ffi_error()\n 05:44:46  mxnet.base.MXNetError: MXNetError: Shape inconsistent, Provided = [4300000000], inferred shape=[5032704]\n 05:44:46  \n 05:44:46  ----------------------------------------------------------------------\n 05:44:46  Ran 1 test in 896.356s\n 05:44:46  \n 05:44:46  FAILED (errors=1)\n </denchmark-code>\n \n <denchmark-link:https://github.com/ChaiBapchya>@ChaiBapchya</denchmark-link>\n  <denchmark-link:https://github.com/szha>@szha</denchmark-link>\n  <denchmark-link:https://github.com/TaoLv>@TaoLv</denchmark-link>\n \n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "ciyongch", "commentT": "2020-05-07T23:00:38Z", "comment_text": "\n \t\tlayer norm and batchnorm have been fixed in master by <denchmark-link:https://github.com/apache/incubator-mxnet/pull/17805>#17805</denchmark-link>\n \n But they aren't cherry-picked in 1.7.x as of today.\n Cherry-picked them now and tested locally\n Verified the large tensor tests pass\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "ciyongch", "commentT": "2020-05-08T02:59:09Z", "comment_text": "\n \t\tHi <denchmark-link:https://github.com/ChaiBapchya>@ChaiBapchya</denchmark-link>\n  , thanks for your kindly help to identify and point out the fix:)\n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "ciyongch", "commentT": "2020-05-12T00:11:15Z", "comment_text": "\n \t\t<denchmark-link:http://jenkins.mxnet-ci.amazon-ml.com/blue/organizations/jenkins/NightlyTestsForBinaries/detail/v1.7.x/4/pipeline>http://jenkins.mxnet-ci.amazon-ml.com/blue/organizations/jenkins/NightlyTestsForBinaries/detail/v1.7.x/4/pipeline</denchmark-link>\n \n Nightly now passes. Fixed by <denchmark-link:https://github.com/apache/incubator-mxnet/pull/18261>#18261</denchmark-link>\n \n \t\t"}, "comments_3": {"comment_id": 4, "comment_author": "ciyongch", "commentT": "2020-05-12T00:54:10Z", "comment_text": "\n \t\tClose this issue as it's fixed now.\n \t\t"}}}, "commit": {"commit_id": "ceb0f06dfc656296f9b8b9fe5a8630a6f5dfae96", "commit_author": "Chaitanya Prakash Bapat", "commitT": "2020-05-11 10:16:15+08:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "src\\operator\\nn\\batch_norm.cc", "file_new_name": "src\\operator\\nn\\batch_norm.cc", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "333", "deleted_lines": "333", "method_info": {"method_name": "mxnet::op::BatchNormShape", "method_params": "attrs,in_shape,out_shape", "method_startline": "319", "method_endline": "350"}}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "src\\operator\\nn\\layer_norm.cc", "file_new_name": "src\\operator\\nn\\layer_norm.cc", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "50", "deleted_lines": "50", "method_info": {"method_name": "mxnet::op::LayerNormShape", "method_params": "attrs,in_shape,out_shape", "method_startline": "39", "method_endline": "68"}}}}}}}