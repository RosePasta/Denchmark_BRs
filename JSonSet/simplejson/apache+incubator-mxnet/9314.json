{"BR": {"BR_id": "9314", "BR_author": "eric-haibin-lin", "BRopenT": "2018-01-04T22:29:54Z", "BRcloseT": "2019-02-16T05:01:31Z", "BR_text": {"BRsummary": "nd.pick core dumps on large array", "BRdescription": "\n <denchmark-code>ubuntu@ip-172-31-13-31:~/mxnet$ python\n Python 2.7.12 (default, Nov 20 2017, 18:23:56)\n [GCC 5.4.0 20160609] on linux2\n Type \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n >>> import mxnet as mx\n >>> a = mx.nd.ones((256*35, 1024*1024))\n >>> b = mx.nd.ones((256*35,))\n >>> mx.nd.pick(a,b)\n Segmentation fault (core dumped)\n </denchmark-code>\n \n Usually large array complains about shape mismatch, this one core dumps immediately.\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "eric-haibin-lin", "commentT": "2018-10-09T20:39:28Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/eric-haibin-lin>@eric-haibin-lin</denchmark-link>\n  I tried reproducing the issue on MXNet v1.3.0 and I could not see the same error :\n <denchmark-code>Python 2.7.15 |Anaconda custom (64-bit)| (default, May  1 2018, 18:37:05) \n [GCC 4.2.1 Compatible Clang 4.0.1 (tags/RELEASE_401/final)] on darwin\n Type \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n >>> import mxnet as mx\n /anaconda2/lib/python2.7/site-packages/h5py/__init__.py:36: FutureWarning: Conversion of the second argument of issubdtype from `float` to `np.floating` is deprecated. In future, it will be treated as `np.float64 == np.dtype(float).type`.\n   from ._conv import register_converters as _register_converters\n >>> mx.__version__\n '1.3.0'\n >>> \n >>> \n >>> a = mx.nd.ones((256*35, 1024*1024))\n >>> b = mx.nd.ones((256*35,))\n >>> mx.nd.pick(a,b)\n \n [1. 1. 1. ... 1. 1. 1.]\n <NDArray 8960 @cpu(0)>\n >>> \n </denchmark-code>\n \n Can you try to see if you still get this issue ?\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "eric-haibin-lin", "commentT": "2018-10-13T04:58:57Z", "comment_text": "\n \t\tHow many times did you try? I'm still getting this error. Another attempt on Mac:\n <denchmark-code>\u279c  Documents python\n Python 2.7.13 (default, Dec 18 2016, 07:03:39)\n [GCC 4.2.1 Compatible Apple LLVM 8.0.0 (clang-800.0.42.1)] on darwin\n Type \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n >>> import mxnet as mx\n \n >>> a = mx.nd.ones((256*35, 1024*1024))\n >>> b = mx.nd.ones((256*35,))\n >>>\n >>> mx.nd.pick(a,b)\n \n Segmentation fault: 11\n \n Stack trace returned 10 entries:\n [bt] (0) 0   libmxnet.so                         0x0000000116231c90 libmxnet.so + 15504\n [bt] (1) 1   libmxnet.so                         0x0000000117da3956 MXTVMBridge + 4726662\n [bt] (2) 2   libsystem_platform.dylib            0x00007fffbc8c6b3a _sigtramp + 26\n [bt] (3) 3   ???                                 0x0000000000000000 0x0 + 0\n [bt] (4) 4   libmxnet.so                         0x000000011665782e libmxnet.so + 4364334\n [bt] (5) 5   libmxnet.so                         0x00000001177ebfed MXNDListFree + 620189\n [bt] (6) 6   libmxnet.so                         0x00000001177658e4 MXNDListFree + 69524\n [bt] (7) 7   libmxnet.so                         0x0000000117767e68 MXNDListFree + 79128\n [bt] (8) 8   libmxnet.so                         0x000000011776b021 MXNDListFree + 91857\n [bt] (9) 9   libmxnet.so                         0x000000011776af3f MXNDListFree + 91631\n libc++abi.dylib: terminating\n [1]    22838 abort      python\n \u279c  Documents pip2 list | grep mx\n \n mxnet (1.3.1b20181012)\n </denchmark-code>\n \n \t\t"}}}, "commit": {"commit_id": "ed0b791ed5c2c2dde8b7136302abbbd3a85e89da", "commit_author": "Chaitanya Prakash Bapat", "commitT": "2019-02-15 21:01:30-08:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 4, "file_old_name": "src\\operator\\tensor\\broadcast_reduce_op.h", "file_new_name": "src\\operator\\tensor\\broadcast_reduce_op.h", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "1175,1176,1180", "deleted_lines": "1175,1176,1180", "method_info": {"method_name": "mxnet::op::pick::Map", "method_params": "i,out,a,idx,M,stride,bshape,sshape", "method_startline": "1175", "method_endline": "1190"}}, "hunk_1": {"Ismethod": 1, "added_lines": "1175,1176,1180", "deleted_lines": "1175,1176,1180", "method_info": {"method_name": "mxnet::op::pick::Map", "method_params": "i,out,a,idx,M,stride,bshape,sshape", "method_startline": "1175", "method_endline": "1190"}}, "hunk_2": {"Ismethod": 1, "added_lines": "1197,1198,1202", "deleted_lines": "1197,1198,1202", "method_info": {"method_name": "mxnet::op::pick_grad::Map", "method_params": "i,igrad,ograd,idx,M,stride,bshape,sshape", "method_startline": "1197", "method_endline": "1212"}}, "hunk_3": {"Ismethod": 1, "added_lines": "1197,1198,1202", "deleted_lines": "1197,1198,1202", "method_info": {"method_name": "mxnet::op::pick_grad::Map", "method_params": "i,igrad,ograd,idx,M,stride,bshape,sshape", "method_startline": "1197", "method_endline": "1212"}}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "tests\\nightly\\test_large_array.py", "file_new_name": "tests\\nightly\\test_large_array.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "148,149,150,151,152", "deleted_lines": null, "method_info": {"method_name": "test_pick", "method_params": "", "method_startline": "148", "method_endline": "152"}}}}}}}