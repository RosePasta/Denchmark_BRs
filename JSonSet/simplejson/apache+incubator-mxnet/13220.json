{"BR": {"BR_id": "13220", "BR_author": "eric-haibin-lin", "BRopenT": "2018-11-12T04:59:08Z", "BRcloseT": "2019-09-07T05:33:52Z", "BR_text": {"BRsummary": "Many operators don't work for integer type", "BRdescription": "\n Many operators implicitly cast data to float and return inaccurate results:\n <denchmark-code>>>> mx.nd.array([50000001], dtype='int32')\n \n [50000001]\n <NDArray 1 @cpu(0)>\n \n >>> mx.nd.array([50000001], dtype='int32').floor()\n \n [50000000] ------------->  should be [50000001]\n <NDArray 1 @cpu(0)> \n \n >> mx.nd.array([50000001], dtype='int32').round()\n \n [50000000] ------------->  should be [50000001]\n <NDArray 1 @cpu(0)>\n >>> mx.nd.array([50000001], dtype='int32').ceil()\n \n [50000000] ------------->  should be [50000001]\n <NDArray 1 @cpu(0)>\n >>> mx.nd.array([50000001], dtype='int32').trunc()\n \n [50000000] ------------->  should be [50000001]\n <NDArray 1 @cpu(0)> \n </denchmark-code>\n \n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "eric-haibin-lin", "commentT": "2018-11-14T00:32:43Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/mxnet-label-bot>@mxnet-label-bot</denchmark-link>\n  add [Good First Issue, Call for Contribution]\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "eric-haibin-lin", "commentT": "2018-11-14T19:14:36Z", "comment_text": "\n \t\tThanks for reporting the issue <denchmark-link:https://github.com/eric-haibin-lin>@eric-haibin-lin</denchmark-link>\n \n Could you also add a link to the relevant place in the code where changes need to be made?\n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "eric-haibin-lin", "commentT": "2018-11-23T03:50:44Z", "comment_text": "\n \t\tHard to trace. Can't find the  gen_op module in the current package while working on this line:\n from .gen_op import * # pylint: disable=unused-wildcard-import.\n \t\t"}, "comments_3": {"comment_id": 4, "comment_author": "eric-haibin-lin", "commentT": "2018-11-27T23:16:33Z", "comment_text": "\n \t\tIt's most likely due to the float conversion in \n \n \n incubator-mxnet/src/operator/math_functions-inl.h\n \n \n         Lines 43 to 61\n       in\n       f5ba267\n \n \n \n \n \n \n  #define MXNET_UNARY_MATH_FUNC(name) \\ \n \n \n \n  template<typename DType> MSHADOW_XINLINE \\ \n \n \n \n  float name(DType a) { \\ \n \n \n \n  return ::name##f(static_cast<float>(a)); \\ \n \n \n \n  } \\ \n \n \n \n  MSHADOW_XINLINE \\ \n \n \n \n  double name(double a) { \\ \n \n \n \n  return ::name(a); \\ \n \n \n \n  } \n \n \n \n  \n \n \n \n  #define MXNET_BINARY_MATH_FUNC(name) \\ \n \n \n \n  template<typename DType> MSHADOW_XINLINE \\ \n \n \n \n  float name(DType a, DType b) { \\ \n \n \n \n  return ::name##f(static_cast<float>(a), static_cast<float>(b)); \\ \n \n \n \n  } \\ \n \n \n \n  MSHADOW_XINLINE \\ \n \n \n \n  double name(double a, double b) { \\ \n \n \n \n  return ::name(a, b); \\ \n \n \n \n  } \n \n \n \n \n \n \t\t"}, "comments_4": {"comment_id": 5, "comment_author": "eric-haibin-lin", "commentT": "2019-04-15T20:08:17Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/anirudh2290>@anirudh2290</denchmark-link>\n  Please tag PR-work-in-progress\n \t\t"}}}, "commit": {"commit_id": "4f8bc3a5c27c54e71f71d517998feddb2ae376e3", "commit_author": "Lin Yuan", "commitT": "2019-09-06 22:33:51-07:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "src\\operator\\math_functions-inl.h", "file_new_name": "src\\operator\\math_functions-inl.h", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "38,40,44,45,46,51,52,53,54,55", "deleted_lines": "38,40,44,45,46"}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "tests\\python\\unittest\\test_ndarray.py", "file_new_name": "tests\\python\\unittest\\test_ndarray.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "1955,1956,1957,1958,1959,1960,1961,1962,1963,1964,1965,1966,1967,1968,1969,1970,1971", "deleted_lines": null, "method_info": {"method_name": "test_large_int_rounding", "method_params": "", "method_startline": "1955", "method_endline": "1971"}}}}}}}