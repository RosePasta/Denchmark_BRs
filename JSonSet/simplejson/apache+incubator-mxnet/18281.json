{"BR": {"BR_id": "18281", "BR_author": "leezu", "BRopenT": "2020-05-11T23:17:14Z", "BRcloseT": "2020-06-11T21:15:18Z", "BR_text": {"BRsummary": "Divergence of implementation between Windows and non-Windows", "BRdescription": "\n \n \n \n incubator-mxnet/src/operator/numpy/np_elemwise_broadcast_op.cu\n \n \n         Lines 32 to 41\n       in\n       f00b9ab\n \n \n \n \n \n \n  #ifndef _WIN32 \n \n \n \n  .set_attr<FCompute>( \n \n \n \n  \"FCompute<gpu>\", \n \n \n \n    NumpyBinaryBroadcastComputeWithBool<gpu, op::mshadow_op::plus, op::mshadow_op::mixed_plus, \n \n \n \n                                        op::mshadow_op::mixed_plus>); \n \n \n \n  #else \n \n \n \n  .set_attr<FCompute>( \n \n \n \n  \"FCompute<gpu>\", \n \n \n \n    NumpyBinaryBroadcastComputeWithBool<gpu, op::mshadow_op::plus>); \n \n \n \n  #endif \n \n \n \n \n \n Shouldn't be needed anymore as 64-bit toolchain is now required on Windows? (Added due to compiler OOM errors when 32-bit toolchain was in use)\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "leezu", "commentT": "2020-05-13T20:02:57Z", "comment_text": "\n \t\tIn GluonNLP Windows CI, tests fail on Windows with errors like\n <denchmark-code>2020-05-13T12:06:33.5890094Z >           raise get_last_ffi_error()\n 2020-05-13T12:06:33.5890252Z E           mxnet.base.MXNetError: Traceback (most recent call last):\n 2020-05-13T12:06:33.5890363Z E             File \"c:\\jenkins\\workspace\\mxnet\\mxnet\\src\\imperative\\./imperative_utils.h\", line 251\n 2020-05-13T12:06:33.5893446Z E           MXNetError: Check failed: outputs[i]->dtype() == out_types[i] (0 vs. 1) : 0-th output has invalid dtype. Expecting 1 got 0 in operator _npi_uniform\n </denchmark-code>\n \n <denchmark-link:https://github.com/sxjscience/gluon-nlp/commit/9623f62ad0daeaf6d8b251743ea7c1d27c08e1e0/checks/670163041/logs>https://github.com/sxjscience/gluon-nlp/commit/9623f62ad0daeaf6d8b251743ea7c1d27c08e1e0/checks/670163041/logs</denchmark-link>\n \n This may be due to the diverging implementation described above, or there are more issues. <denchmark-link:https://github.com/zhreshold>@zhreshold</denchmark-link>\n  <denchmark-link:https://github.com/yzhliu>@yzhliu</denchmark-link>\n \n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "leezu", "commentT": "2020-06-09T01:07:54Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/BenjaminCHEN2016>@BenjaminCHEN2016</denchmark-link>\n  is helping.\n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "leezu", "commentT": "2020-06-11T21:15:18Z", "comment_text": "\n \t\tclosed by <denchmark-link:https://github.com/apache/incubator-mxnet/pull/18523>#18523</denchmark-link>\n \n \t\t"}}}, "commit": {"commit_id": "743bbcbc7c8c85661a146d94ebd3196306650677", "commit_author": "Yijun Chen", "commitT": "2020-06-11 08:22:56-07:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": ".gitignore", "file_new_name": ".gitignore", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "124,125,126,127", "deleted_lines": null}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "src\\operator\\mshadow_op.h", "file_new_name": "src\\operator\\mshadow_op.h", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": null, "deleted_lines": "153,171,187,205,212,350,351,587,822,868"}}}, "file_2": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "src\\operator\\mxnet_op.h", "file_new_name": "src\\operator\\mxnet_op.h", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": null, "deleted_lines": "870,924"}}}, "file_3": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "src\\operator\\numpy\\np_elemwise_broadcast_op.cc", "file_new_name": "src\\operator\\numpy\\np_elemwise_broadcast_op.cc", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": null, "deleted_lines": "63,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,108,113,114,115,116,117,136,141,142,143,144,145,164,169,170,171,172,173,192,197,198,199,200,201,220,225,226,227,228,229"}}}, "file_4": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "src\\operator\\numpy\\np_elemwise_broadcast_op.cu", "file_new_name": "src\\operator\\numpy\\np_elemwise_broadcast_op.cu", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": null, "deleted_lines": "32,37,38,39,40,41,48,53,54,55,56,57,64,69,70,71,72,73,80,85,86,87,88,89,96,101,102,103,104,105"}}}, "file_5": {"file_change_type": "MODIFY", "file_Nmethod": 3, "file_old_name": "src\\operator\\numpy\\np_elemwise_broadcast_op.h", "file_new_name": "src\\operator\\numpy\\np_elemwise_broadcast_op.h", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": null, "deleted_lines": "240,306,307,308,309,310,311,312,313,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,329,330,331,332,333,334,335,336,337,338,339,340,341,342,343,344,345,346,347,348,349,350,351,352,353,354,355,356", "method_info": {"method_name": "mxnet::op::MixedBinaryBroadcastCompute", "method_params": "attrs,ctx,inputs,req,outputs", "method_startline": "226", "method_endline": "357"}}, "hunk_1": {"Ismethod": 1, "added_lines": null, "deleted_lines": "441,442,444,445,446", "method_info": {"method_name": "mxnet::op::NumpyBinaryBroadcastComputeWithBool", "method_params": "attrs,ctx,inputs,req,outputs", "method_startline": "397", "method_endline": "447"}}, "hunk_2": {"Ismethod": 1, "added_lines": null, "deleted_lines": "385,387,388,389", "method_info": {"method_name": "mxnet::op::NumpyBinaryBroadcastCompute", "method_params": "attrs,ctx,inputs,req,outputs", "method_startline": "364", "method_endline": "390"}}}}, "file_6": {"file_change_type": "MODIFY", "file_Nmethod": 3, "file_old_name": "src\\operator\\numpy\\np_true_divide-inl.h", "file_new_name": "src\\operator\\numpy\\np_true_divide-inl.h", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": null, "deleted_lines": "123,124,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196", "method_info": {"method_name": "mxnet::op::TrueDivideElemwiseCompute", "method_params": "attrs,ctx,inputs,req,outputs", "method_startline": "85", "method_endline": "198"}}, "hunk_1": {"Ismethod": 1, "added_lines": null, "deleted_lines": "62,74,75,76,77,78,79,80", "method_info": {"method_name": "mxnet::op::TrueDivideScalarCompute", "method_params": "attrs,ctx,inputs,req,outputs", "method_startline": "38", "method_endline": "82"}}, "hunk_2": {"Ismethod": 1, "added_lines": null, "deleted_lines": "220,280,281,282,283,284,285,286,287,288,289,290,291,292,293,294,295,296,297,298,299,300,301,302,303,304,305,306,307,308,309,310,311,312,313,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,329,330,331,332,333,334,335,336,337,338,339,340,341,342,343", "method_info": {"method_name": "mxnet::op::TrueDivideBroadcastCompute", "method_params": "attrs,ctx,inputs,req,outputs", "method_startline": "201", "method_endline": "345"}}}}, "file_7": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "src\\operator\\numpy\\np_true_divide.cc", "file_new_name": "src\\operator\\numpy\\np_true_divide.cc", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": null, "deleted_lines": "77,78,79,80,81,82,114,115,116,117,118,119"}}}, "file_8": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "src\\operator\\tensor\\elemwise_binary_broadcast_op.h", "file_new_name": "src\\operator\\tensor\\elemwise_binary_broadcast_op.h", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "250,271", "deleted_lines": "249,290"}}}}}}