{"BR": {"BR_id": "169", "BR_author": "fuzzyBatman", "BRopenT": "2019-03-29T13:28:53Z", "BRcloseT": "2019-09-18T13:06:06Z", "BR_text": {"BRsummary": "Exception: input type is not supported.", "BRdescription": "\n Procedure: Opened an annotated image, removed two annotations and hit save.\n Note: Image is 512x512 and has 250-300 annotations.\n Output:\n <denchmark-code>[2019-03-29 13:25:25,166] ERROR in app: Exception on /api/annotator/data [POST]\n flask_1     | Traceback (most recent call last):\n flask_1     |   File \"/usr/local/lib/python3.6/site-packages/flask/app.py\", line 1813, in full_dispatch_request\n flask_1     |     rv = self.dispatch_request()\n flask_1     |   File \"/usr/local/lib/python3.6/site-packages/flask/app.py\", line 1799, in dispatch_request\n flask_1     |     return self.view_functions[rule.endpoint](**req.view_args)\n flask_1     |   File \"/usr/local/lib/python3.6/site-packages/flask_restplus/api.py\", line 325, in wrapper\n flask_1     |     resp = resource(*args, **kwargs)\n flask_1     |   File \"/usr/local/lib/python3.6/site-packages/flask/views.py\", line 88, in view\n flask_1     |     return self.dispatch_request(*args, **kwargs)\n flask_1     |   File \"/usr/local/lib/python3.6/site-packages/flask_restplus/resource.py\", line 44, in dispatch_request\n flask_1     |     resp = meth(*args, **kwargs)\n flask_1     |   File \"/usr/local/lib/python3.6/site-packages/flask_login/utils.py\", line 261, in decorated_view\n flask_1     |     return func(*args, **kwargs)\n flask_1     |   File \"/workspace/app/api/annotator.py\", line 90, in post\n flask_1     |     paperjs_to_coco(width, height, paperjs_object)\n flask_1     |   File \"/workspace/app/util/coco_util.py\", line 70, in paperjs_to_coco\n flask_1     |     segments, image_height, image_width)\n flask_1     |   File \"/workspace/app/util/coco_util.py\", line 77, in get_segmentation_area_and_bbox\n flask_1     |     rles = mask.frPyObjects(segmentation, image_height, image_width)\n flask_1     |   File \"pycocotools/_mask.pyx\", line 307, in pycocotools._mask.frPyObjects\n flask_1     | Exception: input type is not supported.\n </denchmark-code>\n \n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "fuzzyBatman", "commentT": "2019-03-29T13:43:47Z", "comment_text": "\n \t\tRolled back the delete operation, opened the image (the annotation is available again) and hit the save button. Results in the same error.\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "fuzzyBatman", "commentT": "2019-04-01T15:34:01Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/fuzzyBatman>@fuzzyBatman</denchmark-link>\n  Can you check the annotation in the database to see if the segmentation contains [256, 256] ?\n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "fuzzyBatman", "commentT": "2019-04-01T16:40:32Z", "comment_text": "\n \t\tSorry, in the database?\n \t\t"}, "comments_3": {"comment_id": 4, "comment_author": "fuzzyBatman", "commentT": "2019-04-01T17:20:19Z", "comment_text": "\n \t\tThe annotation you rolled back the delete on, does the segmentation contain [256, 256]\n \t\t"}, "comments_4": {"comment_id": 5, "comment_author": "fuzzyBatman", "commentT": "2019-04-01T18:51:47Z", "comment_text": "\n \t\tNo. That particular annotation does not have [256, 256] appended at the end.\n Though another image has [256, 256] in at least one annotation, and the save operation works.\n <denchmark-link:https://user-images.githubusercontent.com/5787026/55351917-e17c0980-54bf-11e9-8001-cef9a593b5d5.png></denchmark-link>\n \n The vertex inside the red circle is at the centre of the image.\n \t\t"}, "comments_5": {"comment_id": 6, "comment_author": "fuzzyBatman", "commentT": "2019-04-01T20:29:10Z", "comment_text": "\n \t\tAny change you can share the annotation document stored in the database? You can us mongo compass to view the database\n \t\t"}, "comments_6": {"comment_id": 7, "comment_author": "fuzzyBatman", "commentT": "2019-04-02T20:00:11Z", "comment_text": "\n \t\tUpload the JSON file, right?\n \t\t"}, "comments_7": {"comment_id": 8, "comment_author": "fuzzyBatman", "commentT": "2019-04-03T14:30:30Z", "comment_text": "\n \t\tI would like the JSON of the annotations directly from the mongodb database, since not all data is exported  in COCO\n \t\t"}, "comments_8": {"comment_id": 9, "comment_author": "fuzzyBatman", "commentT": "2019-04-03T21:17:20Z", "comment_text": "\n \t\tI'm sorry. I do not know how to do this.\n Do you mind giving me directions?\n I installed mongodb-compass.\n \t\t"}, "comments_9": {"comment_id": 10, "comment_author": "fuzzyBatman", "commentT": "2019-04-05T13:41:38Z", "comment_text": "\n \t\tOpen it and there should be an option to connect to the database. Assuming you are running this locally, you should be able to us the default settings to connect.\n Once connect go the the flask/annotation_models collection and type {_id: <ANNOTATION_ID>}. This should return the annotation\n \t\t"}, "comments_10": {"comment_id": 11, "comment_author": "fuzzyBatman", "commentT": "2019-04-07T12:22:36Z", "comment_text": "\n \t\tFor\n {\"id\":1903,\"image_id\":108,\"category_id\":1,\"dataset_id\":2,\"segmentation\":[[135.3,211,144.8,212.5,149.1,218.7,148.4,226.5,144.1,232,136.6,234.9,128.9,232.2,125.1,224.4,127.5,215.5],[256,256]],\"area\":429,\"bbox\":[125,211,24,24],\"iscrowd\":false,\"creator\":\"fuzzybatman\",\"width\":512,\"height\":512,\"color\":\"#d8a81e\",\"metadata\":{}}\n The document from the database is <denchmark-link:https://github.com/jsbroks/coco-annotator/files/3051525/_id_1903.txt>_id_1903.txt</denchmark-link>\n \n \t\t"}, "comments_11": {"comment_id": 12, "comment_author": "fuzzyBatman", "commentT": "2019-04-07T16:12:33Z", "comment_text": "\n \t\t\n That particular annotation does not have [256, 256] appended at the end.\n \n I see [256,256] appended to the end, which is what is cause the error to be thrown since it is not a valid polygon.\n \t\t"}, "comments_12": {"comment_id": 13, "comment_author": "fuzzyBatman", "commentT": "2019-04-08T08:25:05Z", "comment_text": "\n \t\tThe document for the deleted annotation <denchmark-link:https://github.com/jsbroks/coco-annotator/files/3053323/_id_1182.txt>_id_1182.txt</denchmark-link>\n . This one does not contain a [256, 256].\n Sorry for the confusion. The first annotation I uploaded (id: 1903) is for one that has a [256, 256]. There are 10 such instances in my annotation document.\n \t\t"}, "comments_13": {"comment_id": 14, "comment_author": "fuzzyBatman", "commentT": "2019-04-18T10:34:38Z", "comment_text": "\n \t\tHey, just saw that there are 2 files that contain [256, 256] and they get saved.\n Not sure if that's what is causing the ERROR under consideration.\n \t\t"}, "comments_14": {"comment_id": 15, "comment_author": "fuzzyBatman", "commentT": "2019-08-30T09:00:25Z", "comment_text": "\n \t\tHi I have run into the same exception. Is there a solution to mitigate this problem?\n My app is hosted on a cloud service. I am inside the command line of mongodb-compass (inside the mongodb docker instance). What is the name of the db, and  could you point out what I should be looking at?\n \t\t"}, "comments_15": {"comment_id": 16, "comment_author": "fuzzyBatman", "commentT": "2019-08-30T09:10:37Z", "comment_text": "\n \t\t<denchmark-code>File \"/usr/local/lib/python3.6/site-packages/flask/app.py\", line 1813, in full_dispatch_request\n     rv = self.dispatch_request()\n   File \"/usr/local/lib/python3.6/site-packages/flask/app.py\", line 1799, in dispatch_request\n     return self.view_functions[rule.endpoint](**req.view_args)\n   File \"/usr/local/lib/python3.6/site-packages/flask_restplus/api.py\", line 325, in wrapper\n     resp = resource(*args, **kwargs)\n   File \"/usr/local/lib/python3.6/site-packages/flask/views.py\", line 88, in view\n     return self.dispatch_request(*args, **kwargs)\n   File \"/usr/local/lib/python3.6/site-packages/flask_restplus/resource.py\", line 44, in dispatch_request\n     resp = meth(*args, **kwargs)\n   File \"/workspace/webserver/util/__init__.py\", line 10, in wrap\n     result = func(*args, **kwargs)\n   File \"/usr/local/lib/python3.6/site-packages/flask_login/utils.py\", line 261, in decorated_view\n     return func(*args, **kwargs)\n   File \"/workspace/webserver/api/annotator.py\", line 113, in post\n     paperjs_to_coco(width, height, paperjs_object)\n   File \"/workspace/webserver/util/coco_util.py\", line 75, in paperjs_to_coco\n     segments, image_height, image_width)\n   File \"/workspace/webserver/util/coco_util.py\", line 82, in get_segmentation_area_and_bbox\n     rles = mask.frPyObjects(segmentation, image_height, image_width)\n   File \"pycocotools/_mask.pyx\", line 307, in pycocotools._mask.frPyObjects\n Exception: input type is not supported.\n </denchmark-code>\n \n This is the same traceback <denchmark-link:https://github.com/fuzzyBatman>@fuzzyBatman</denchmark-link>\n  encountered. This occurs when I draw a polygon, and it allows me to draw another polygon before  the last one.\n \t\t"}, "comments_16": {"comment_id": 17, "comment_author": "fuzzyBatman", "commentT": "2019-08-30T09:29:36Z", "comment_text": "\n \t\t{\"images\": [{\"id\": 44, \"dataset_id\": 2, \"path\": \"/datasets/1/1.png\", \"width\": 55, \"height\": 50, \"file_name\": \"1.png\"}], \"categories\": [{\"id\": 1, \"name\": \"color1\", \"supercategory\": \"\", \"color\": \"#cee43c\", \"metadata\": {}}], \"annotations\": [{\"id\": 107, \"image_id\": 44, \"category_id\": 1, \"segmentation\": [[21.4, 11.7, 27.5, 15.2, 31.1, 20.5, 36.9, 25.2, 33.0, 31.7, 27.9, 35.9, 25.9, 30.8, 28.7, 27.1, 22.6, 27.3, 18.3, 22.3, 15.4, 21.6, 19.6, 16.9, 18.6, 12.5, 16.3, 11.2]], \"area\": 231, \"bbox\": [15.0, 11.0, 22.0, 24.0], \"iscrowd\": false, \"color\": \"#406afd\", \"metadata\": {}}]}\n meanwhile posting the exported json to make my point. These are two independent lines (unclosed polygons). Is this desired behavior?\n \t\t"}, "comments_17": {"comment_id": 18, "comment_author": "fuzzyBatman", "commentT": "2019-08-30T10:23:36Z", "comment_text": "\n \t\tThe image I annotated was of the resolution 56x50 pixels. I can reproduce the bug easily on such small resolutions.\n I copied the data in annotation_model of the db in the file <denchmark-link:https://github.com/jsbroks/coco-annotator/files/3559480/annotation_model.txt>annotation_model.txt</denchmark-link>\n \n and the exported json the file <denchmark-link:https://github.com/jsbroks/coco-annotator/files/3559482/coco-1567160216.9040387.txt>coco-1567160216.9040387.txt</denchmark-link>\n \n \t\t"}, "comments_18": {"comment_id": 19, "comment_author": "fuzzyBatman", "commentT": "2019-09-06T02:49:25Z", "comment_text": "\n \t\tI'm also experiencing this bug specified above, \"Procedure: Opened an annotated image, removed two annotations and hit save.\" I don't have [256, 256] appended to my segmentations. Here's an example:\n <denchmark-code>{\"id\": 31, \"image_id\": 550, \"category_id\": 1, \"iscrowd\": 0, \"area\": 452, \"bbox\": [361.0, 66.0, 24.0, 24.0], \"segmentation\": [[377.0, 89.5, 367.0, 88.5, 360.5, 79.0, 363.5, 70.0, 371.0, 65.5, 378.0, 66.5, 384.5, 74.0, 384.5, 82.0, 377.0, 89.5]], \"width\": 512, \"height\": 512}, {\"id\": 32, \"image_id\": 550, \"category_id\": 1, \"iscrowd\": 0, \"area\": 473, \"bbox\": [307.0, 68.0, 25.0, 24.0], \"segmentation\": [[323.0, 91.5, 315.0, 91.5, 307.5, 84.0, 308.5, 73.0, 316.0, 67.5, 325.0, 68.5, 331.5, 76.0, 329.5, 87.0, 323.0, 91.5]], \"width\": 512, \"height\": 512}\n </denchmark-code>\n \n and here is the traceback\n annotator_webclient | [2019-09-06 02:47:24 +0000] [11] [INFO] rbavery has started annotating image 3\n annotator_webclient | [2019-09-06 02:47:24 +0000] [11] [INFO] Socket connection has been disconnected with rbavery\n annotator_webclient | [2019-09-06 02:47:24 +0000] [11] [INFO] Socket connection has been disconnected with rbavery\n annotator_webclient | [2019-09-06 02:47:24 +0000] [11] [INFO] Socket connection has been disconnected with rbavery\n annotator_webclient | [2019-09-06 02:47:24 +0000] [11] [INFO] Socket connection has been disconnected with rbavery\n annotator_webclient | [2019-09-06 02:47:24 +0000] [11] [DEBUG] GET /api/annotator/data/3\n annotator_webclient | [2019-09-06 02:47:24 +0000] [11] [INFO] Socket connection has been disconnected with rbavery\n annotator_webclient | [2019-09-06 02:48:41 +0000] [11] [DEBUG] POST /api/annotator/data\n annotator_webclient | [2019-09-06 02:48:43 +0000] [11] [ERROR] Exception on /api/annotator/data [POST]\n annotator_webclient | Traceback (most recent call last):\n annotator_webclient |   File \"/usr/local/lib/python3.6/site-packages/flask/app.py\", line 1813, in full_dispatch_request\n annotator_webclient |     rv = self.dispatch_request()\n annotator_webclient |   File \"/usr/local/lib/python3.6/site-packages/flask/app.py\", line 1799, in dispatch_request\n annotator_webclient |     return self.view_functions[rule.endpoint](**req.view_args)\n annotator_webclient |   File \"/usr/local/lib/python3.6/site-packages/flask_restplus/api.py\", line 325, in wrapper\n annotator_webclient |     resp = resource(*args, **kwargs)\n annotator_webclient |   File \"/usr/local/lib/python3.6/site-packages/flask/views.py\", line 88, in view\n annotator_webclient |     return self.dispatch_request(*args, **kwargs)\n annotator_webclient |   File \"/usr/local/lib/python3.6/site-packages/flask_restplus/resource.py\", line 44, in dispatch_request\n annotator_webclient |     resp = meth(*args, **kwargs)\n annotator_webclient |   File \"/workspace/webserver/util/__init__.py\", line 10, in wrap\n annotator_webclient |     result = func(*args, **kwargs)\n annotator_webclient |   File \"/usr/local/lib/python3.6/site-packages/flask_login/utils.py\", line 261, in decorated_view\n annotator_webclient |     return func(*args, **kwargs)\n annotator_webclient |   File \"/workspace/webserver/api/annotator.py\", line 113, in post\n annotator_webclient |     paperjs_to_coco(width, height, paperjs_object)\n annotator_webclient |   File \"/workspace/webserver/util/coco_util.py\", line 75, in paperjs_to_coco\n annotator_webclient |     segments, image_height, image_width)\n annotator_webclient |   File \"/workspace/webserver/util/coco_util.py\", line 82, in get_segmentation_area_and_bbox\n annotator_webclient |     rles = mask.frPyObjects(segmentation, image_height, image_width)\n annotator_webclient |   File \"pycocotools/_mask.pyx\", line 307, in pycocotools._mask.frPyObjects\n annotator_webclient | Exception: input type is not supported.\n \t\t"}, "comments_19": {"comment_id": 20, "comment_author": "fuzzyBatman", "commentT": "2019-09-06T19:02:51Z", "comment_text": "\n \t\t\n Open it and there should be an option to connect to the database. Assuming you are running this locally, you should be able to us the default settings to connect.\n Once connect go the the flask/annotation_models collection and type {_id: <ANNOTATION_ID>}. This should return the annotation\n \n I tried these instructions to provide more info on why it's failing, but the default connection settings aren't working with mongodb compass (I'm running this locally on he production build). Do I need to supply authentication? My hostname is \"localhost\" and the port is 27019.\n \t\t"}, "comments_20": {"comment_id": 21, "comment_author": "fuzzyBatman", "commentT": "2019-09-06T22:41:03Z", "comment_text": "\n \t\tYou shouldn't been authentication. Any errors?\n \t\t"}, "comments_21": {"comment_id": 22, "comment_author": "fuzzyBatman", "commentT": "2019-09-06T23:25:46Z", "comment_text": "\n \t\tThe error was ERR CONNECTION REFUSED when I used the defaults. and when I tried to use different ports and specify different ip addresses I saw from the prompt after running docker-compose up I was getting a different error, connection closed\n \t\t"}, "comments_22": {"comment_id": 23, "comment_author": "fuzzyBatman", "commentT": "2019-09-06T23:51:28Z", "comment_text": "\n \t\tI've installed the latest version of mongodb compass on ubuntu 18.04 and I'm running the stable production build of coco-annotator, a fresh install from github. Here's what mongodb compass looks like when I try to connect with the defaults. Thanks for the help!\n <denchmark-link:https://user-images.githubusercontent.com/22258697/64466363-8a114380-d0c6-11e9-8c63-e275d05dbe30.png></denchmark-link>\n \n \t\t"}, "comments_23": {"comment_id": 24, "comment_author": "fuzzyBatman", "commentT": "2019-09-09T04:00:41Z", "comment_text": "\n \t\tmy hunch is that something about my failing coco format is causing one of these failing conditions below, from . For example, maybe  is a  without a  or  key. Do I need a  and/or  key for each segmentation or image? To what do these keys refer to exactly? What's the best way to inspect the  return value of  <denchmark-link:https://github.com/jsbroks/coco-annotator/blob/master/backend/webserver/util/coco_util.py#L12>https://github.com/jsbroks/coco-annotator/blob/master/backend/webserver/util/coco_util.py#L12</denchmark-link>\n ?\n <denchmark-code>def frPyObjects(pyobj, h, w):\n     # encode rle from a list of python objects\n     if type(pyobj) == np.ndarray:\n         objs = frBbox(pyobj, h, w)\n     elif type(pyobj) == list and len(pyobj[0]) == 4:\n         objs = frBbox(pyobj, h, w)\n     elif type(pyobj) == list and len(pyobj[0]) > 4:\n         objs = frPoly(pyobj, h, w)\n     elif type(pyobj) == list and type(pyobj[0]) == dict \\\n         and 'counts' in pyobj[0] and 'size' in pyobj[0]:\n         objs = frUncompressedRLE(pyobj, h, w)\n     # encode rle from single python object\n     elif type(pyobj) == list and len(pyobj) == 4:\n         objs = frBbox([pyobj], h, w)[0]\n     elif type(pyobj) == list and len(pyobj) > 4:\n         objs = frPoly([pyobj], h, w)[0]\n     elif type(pyobj) == dict and 'counts' in pyobj and 'size' in pyobj:\n         objs = frUncompressedRLE([pyobj], h, w)[0]\n     else:\n         raise Exception('input type is not supported.')\n     return objs\n </denchmark-code>\n \n If it helps to diagnose the issue, I looked at the format of coco json annotations I exported from scratch and compared them to the structure of the failing coco json that I created with pycocotools (converting from binary masks to cococ json). I can import these failing annotations to the annotator and edit them, but I cannot save due to the error above.\n The top level keys of the working annotations are\n dict_keys(['images', 'categories', 'annotations'])\n vs the failing annotations\n dict_keys(['info', 'licenses', 'categories', 'images', 'annotations'])\n and the keys for a single annotation for the working annotations are\n good_coco_json.keys()\n dict_keys(['id', 'image_id', 'category_id', 'segmentation', 'area', 'bbox', 'iscrowd', 'color', 'metadata'])\n and for my failing annotations\n bad_coco_json['annotations'][0].keys()\n dict_keys(['id', 'image_id', 'category_id', 'iscrowd', 'area', 'bbox', 'segmentation', 'width', 'height'])\n \t\t"}, "comments_24": {"comment_id": 25, "comment_author": "fuzzyBatman", "commentT": "2019-09-09T18:56:52Z", "comment_text": "\n \t\tThe database connection error I was getting was because instead of localhost, I needed to supply the ip address of the mongodb container, which I got with \u2192 docker inspect -f '{{range .NetworkSettings.Networks}}{{.IPAddress}}{{end}}' <container id>\n This is the annotation that I imported to coco:\n <denchmark-link:https://user-images.githubusercontent.com/22258697/64558497-d643ca00-d2f8-11e9-80f9-071d680ff265.png></denchmark-link>\n \n I can add new annotations and save it, but I can't delete annotations and save it. When I delete an annotation, it disappears from the editor, but when I click the save button, I get the input type is not supported error and I can't leave the editor window. Also, the json entry in the mongdodb database is not updated with the change to the annotations, only \"SessionEvent\" items are added:\n {\n     \"_id\": 2,\n     \"dataset_id\": 1,\n     \"category_ids\": [1],\n     \"path\": \"/datasets/nebraska/LT050290312005031601T1-SC20190818204935_tile_1024_2560/image/LT050290312005031601T1-SC20190818204935_tile_1024_2560.jpeg\",\n     \"width\": 512,\n     \"height\": 512,\n     \"file_name\": \"LT050290312005031601T1-SC20190818204935_tile_1024_2560.jpeg\",\n     \"annotated\": true,\n     \"annotating\": [],\n     \"num_annotations\": 27,\n     \"metadata\": {},\n     \"deleted\": false,\n     \"milliseconds\": 181269,\n     \"events\": [{\n         \"_cls\": \"SessionEvent\",\n         \"user\": \"rbavery\",\n         \"milliseconds\": 27391,\n         \"tools_used\": []\n     }, {\n         \"_cls\": \"SessionEvent\",\n         \"user\": \"rbavery\",\n         \"milliseconds\": 28673,\n         \"tools_used\": []\n     }, {\n         \"_cls\": \"SessionEvent\",\n         \"user\": \"rbavery\",\n         \"milliseconds\": 29740,\n         \"tools_used\": []\n     }, {\n         \"_cls\": \"SessionEvent\",\n         \"user\": \"rbavery\",\n         \"milliseconds\": 30952,\n         \"tools_used\": []\n     }, {\n         \"_cls\": \"SessionEvent\",\n         \"user\": \"rbavery\",\n         \"milliseconds\": 31641,\n         \"tools_used\": []\n     }, {\n         \"_cls\": \"SessionEvent\",\n         \"user\": \"rbavery\",\n         \"milliseconds\": 32872,\n         \"tools_used\": []\n     }],\n     \"regenerate_thumbnail\": false,\n     \"is_modified\": false\n }\n \t\t"}, "comments_25": {"comment_id": 26, "comment_author": "fuzzyBatman", "commentT": "2019-09-09T19:45:29Z", "comment_text": "\n \t\tI think I've found the root of the issue. There were line segments in my dataset at the image edges that were preventing me from saving and exporting all the edited annotations. also, when I would delete annotations with the eraser tool, sometimes a point would be leftover, causing their to be an invalid polygon that would also cause annotations to not be saved and would prevent leaving the annotation editor. The single point appears sometimes in the exact middle of the image after using the eraser tool, and it can't be deleted by the eraser tool, only by going to the annotation pane on the right hand side and clicking the delete icon after identifying the id of the point.\n See below for an example. The center point causing the error is at [256,256], and this is created by the editor when deleting shapes with the eraser tool instead of the side panel's delete annotation icons.\n <denchmark-link:https://user-images.githubusercontent.com/22258697/64561380-7a307400-d2ff-11e9-8fbf-25828e0e0ea3.gif></denchmark-link>\n \n \t\t"}, "comments_26": {"comment_id": 27, "comment_author": "fuzzyBatman", "commentT": "2019-09-09T19:47:02Z", "comment_text": "\n \t\tIn the GIF above, there is also a mismatch between the hover box id of the newly created shape and the id on the right side panel.\n \t\t"}, "comments_27": {"comment_id": 28, "comment_author": "fuzzyBatman", "commentT": "2019-09-10T02:24:22Z", "comment_text": "\n \t\tThank you for the great detail. Much appreciated\n \t\t"}, "comments_28": {"comment_id": 29, "comment_author": "fuzzyBatman", "commentT": "2019-09-10T09:25:43Z", "comment_text": "\n \t\tI am not sure if the best way to do this is as below, so I didn't create a PR. But for now, I use this workaround to ignore exceptions to be raised when line segments or a single point is tried to be inserted into the database. The changes are in the file backend\\webserver\\util\\coco_util.py\n <denchmark-code>def get_segmentation_area_and_bbox(segmentation, image_height, image_width):\n     # Convert into rle\n     rles = mask.frPyObjects(segmentation, image_height, image_width)\n     try:\n         rles = mask.frPyObjects(segmentation, image_height, image_width)\n     except Exception:\n         print(\"Exception: input type is not supported.\")\n         print(segmentation)\n     rle = mask.merge(rles)\n \n     return mask.area(rle), mask.toBbox(rle)\n </denchmark-code>\n \n I also noticed that small lines are created without closing the polygon while annotating really low resolution images (50x50 px). I avoided this by reducing the completeDistance & minDistance hyperparameters in PolygonTool.vue\n <denchmark-link:https://gist.github.com/chitraa/69bf9e4de66940bfb17aca94f391a5e4>Here</denchmark-link>\n  is a patch file of the changes.\n \t\t"}, "comments_29": {"comment_id": 30, "comment_author": "fuzzyBatman", "commentT": "2021-01-07T10:23:00Z", "comment_text": "\n \t\tThis error can also occur if the segmentation mask has only two values, ie if it is only one pixel / point.\n \t\t"}}}, "commit": {"commit_id": "e26ce4e0401d79d0a3916397c863f759cbb7f547", "commit_author": "Ryan Avery", "commitT": "2019-09-18 09:06:05-04:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "client\\src\\components\\annotator\\Annotation.vue", "file_new_name": "client\\src\\components\\annotator\\Annotation.vue", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "440,441,442,443", "deleted_lines": null}}}}}}