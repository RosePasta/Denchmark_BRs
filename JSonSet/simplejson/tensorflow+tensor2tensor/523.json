{"BR": {"BR_id": "523", "BR_author": "martinpopel", "BRopenT": "2018-01-17T00:37:54Z", "BRcloseT": "2018-01-29T15:07:22Z", "BR_text": {"BRsummary": "Travis log too long", "BRdescription": "\n Travis CI has 4MB limit on the log file, but current T2T tests exceed this limit.\n As a result I cannot see the real cause why a <denchmark-link:https://travis-ci.org/tensorflow/tensor2tensor/jobs/329572628>given build</denchmark-link>\n  failed.\n Most of the log (if downloaded as a raw file) is full of download progress bars, e.g.\n <denchmark-code>  Downloading mpmath-1.0.0.tar.gz (511kB)\n \ufffd[?25l\n \ufffd[K    2% |\u258b                               | 10kB 53.6MB/s eta 0:00:01\n \ufffd[K    4% |\u2588\u258e                              | 20kB 41.3MB/s eta 0:00:01\n \ufffd[K    6% |\u2588\u2588                              | 30kB 42.5MB/s eta 0:00:01\n \ufffd[K    8% |\u2588\u2588\u258b                             | 40kB 41.3MB/s eta 0:00:01\n \ufffd[K    10% |\u2588\u2588\u2588\u258f                            | 51kB 42.6MB/s eta 0:00:01\n </denchmark-code>\n \n This is the first time I see this problem, but it seems that until a new pip version with <denchmark-link:https://github.com/pypa/pip/pull/4194>--progress-bar off</denchmark-link>\n  option is released, we should use <denchmark-link:https://github.com/pypa/pip/issues/2756#issuecomment-268773883>a workaround</denchmark-link>\n   or .\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "martinpopel", "commentT": "2018-01-18T18:04:13Z", "comment_text": "\n \t\thow about pip install -q to have the install be quiet?\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "martinpopel", "commentT": "2018-01-18T18:17:40Z", "comment_text": "\n \t\tAnd git clone -q\n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "martinpopel", "commentT": "2018-01-18T18:39:31Z", "comment_text": "\n \t\tAnd thank you for spotting this.\n \t\t"}, "comments_3": {"comment_id": 4, "comment_author": "martinpopel", "commentT": "2018-01-18T20:02:57Z", "comment_text": "\n \t\tAccording to <denchmark-link:https://github.com/pypa/pip/issues/2756>pypa/pip#2756</denchmark-link>\n  if we provide the  option, pip does not display exceptions, which is a bit unfortunate for Travis. That said, it would be still better than the current state.\n And yes,  is a good idea.\n Unfortunately, it seems Travis is now completely broken. See e.g. <denchmark-link:https://travis-ci.org/tensorflow/tensor2tensor/builds/329575693>https://travis-ci.org/tensorflow/tensor2tensor/builds/329575693</denchmark-link>\n  (note that a given commit just changes README.md).\n In <denchmark-link:https://github.com/tensorflow/tensor2tensor/pull/524>#524</denchmark-link>\n  I have tried to silence the pip, but Travis again failed for other reasons.\n \t\t"}, "comments_4": {"comment_id": 5, "comment_author": "martinpopel", "commentT": "2018-01-18T20:27:42Z", "comment_text": "\n \t\tI think it\u2019s fine not to see the pip exceptions in Travis. The focus of the\n tests is not to test pip install. If a pip command fails, we'll see it and\n can retry locally to see the error.\n <denchmark-link:#>\u2026</denchmark-link>\n \n \n On Thu, Jan 18, 2018 at 12:02 PM Martin Popel ***@***.***> wrote:\n  According to pypa/pip#2756 <pypa/pip#2756> if\n  we provide the --quiet option, pip does not display exceptions, which is\n  a bit unfortunate for Travis. That said, it would be still better than the\n  current state.\n  And yes, git clone -q is a good idea.\n \n  Unfortunately, it seems Travis is now completely broken. See e.g.\n  https://travis-ci.org/tensorflow/tensor2tensor/builds/329575693 (note\n  that a given commit just changes README.md).\n  In #524 <#524> I have\n  tried to silence the pip, but Travis again failed for other reasons.\n \n  \u2014\n  You are receiving this because you commented.\n  Reply to this email directly, view it on GitHub\n  <#523 (comment)>,\n  or mute the thread\n  <https://github.com/notifications/unsubscribe-auth/ABEGW7Dh5eapBCtAMw3hq-f6A_dogrSQks5tL6NzgaJpZM4Rgoy6>\n  .\n \n \n \n \t\t"}, "comments_5": {"comment_id": 6, "comment_author": "martinpopel", "commentT": "2018-01-18T20:53:21Z", "comment_text": "\n \t\tI changed  into  in <denchmark-link:https://github.com/tensorflow/tensor2tensor/commit/61005b0b1e063e3e26cb403cf6e8cdea3509c3b5>61005b0</denchmark-link>\n \n This commit (most probably disregarding its content) caused <denchmark-link:https://travis-ci.org/tensorflow/tensor2tensor/builds/330535879>Travis rebuild</denchmark-link>\n  and now it work and the raw log has just 82 KiB.\n I was not able to find a place where to set  ( is done automatically by Travis).\n So this issue can be closed once <denchmark-link:https://github.com/tensorflow/tensor2tensor/pull/524>#524</denchmark-link>\n  is merged (sorry for combining two topics in one PR).\n \t\t"}}}, "commit": {"commit_id": "b6a57e71b0bb53b35e0f9a1ba8ae75c5169f9af5", "commit_author": "Martin Popel", "commitT": "2018-01-25 09:09:19-08:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": ".travis.yml", "file_new_name": ".travis.yml", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "9,10", "deleted_lines": "9,10"}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "tensor2tensor\\bin\\t2t_decoder.py", "file_new_name": "tensor2tensor\\bin\\t2t_decoder.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "83,84,85,86,87", "deleted_lines": "79", "method_info": {"method_name": "decode", "method_params": "estimator,hparams,decode_hp", "method_startline": "78", "method_endline": "95"}}}}, "file_2": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "tensor2tensor\\bin\\t2t_translate_all.py", "file_new_name": "tensor2tensor\\bin\\t2t_translate_all.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "84,89,101", "deleted_lines": "99", "method_info": {"method_name": "main", "method_params": "_", "method_startline": "69", "method_endline": "104"}}}}, "file_3": {"file_change_type": "MODIFY", "file_Nmethod": 3, "file_old_name": "tensor2tensor\\utils\\bleu_hook.py", "file_new_name": "tensor2tensor\\utils\\bleu_hook.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "226", "deleted_lines": null, "method_info": {"method_name": "_read_stepfiles_list", "method_params": "path_prefix,path_suffix,min_steps", "method_startline": "223", "method_endline": "239"}}, "hunk_1": {"Ismethod": 1, "added_lines": "162", "deleted_lines": "186", "method_info": {"method_name": "bleu_tokenize", "method_params": "string", "method_startline": "162", "method_endline": "190"}}, "hunk_2": {"Ismethod": 1, "added_lines": "209,210,211,212,213,214,215,216,217,218,219,220,221", "deleted_lines": "212", "method_info": {"method_name": "_try_twice_tf_glob", "method_params": "pattern", "method_startline": "209", "method_endline": "221"}}}}, "file_4": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "tensor2tensor\\utils\\decoding.py", "file_new_name": "tensor2tensor\\utils\\decoding.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "222", "deleted_lines": "222", "method_info": {"method_name": "decode_from_file", "method_params": "estimator,filename,hparams,decode_hp,decode_to_file", "method_startline": "218", "method_endline": "222"}}, "hunk_1": {"Ismethod": 1, "added_lines": "222,223", "deleted_lines": "222", "method_info": {"method_name": "decode_from_file", "method_params": "estimator,filename,hparams,decode_hp,decode_to_file,checkpoint_path", "method_startline": "218", "method_endline": "223"}}}}}}}