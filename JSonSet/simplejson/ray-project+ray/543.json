{"BR": {"BR_id": "543", "BR_author": "ericl", "BRopenT": "2017-05-12T09:48:26Z", "BRcloseT": "2017-05-15T08:13:05Z", "BR_text": {"BRsummary": "Segmentation fault when calling ray.put on a dictionary with object keys", "BRdescription": "\n Ray seg-faults when you try to put an dict containing a object instance in the key. Here's a minimal reproduction, though typically you would use some custom class instead of object() as the key.\n <denchmark-code>>>> ray.register_class(object, pickle=True)\n >>> ray.put({object(): object()})\n [INFO] (/home/eric/Desktop/ray/src/local_scheduler/local_scheduler.cc:941) Disconnecting client on fd 12\n [INFO] (/home/eric/Desktop/ray/src/plasma/plasma_store.cc:732) Disconnecting client on fd 10\n [INFO] (/home/eric/Desktop/ray/src/plasma/plasma_manager.cc:1577) Disconnecting client on fd 13\n zsh: segmentation fault  python3\n </denchmark-code>\n \n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "ericl", "commentT": "2017-05-12T19:15:31Z", "comment_text": "\n \t\tOk, I can reproduce that, will look into it!\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "ericl", "commentT": "2017-05-15T08:13:05Z", "comment_text": "\n \t\tFixed by <denchmark-link:https://github.com/ray-project/ray/pull/548>#548</denchmark-link>\n .\n \t\t"}}}, "commit": {"commit_id": "e2e9e4ce6fa803502e47b2969b42f0c51a239efd", "commit_author": "Eric Liang", "commitT": "2017-05-15 01:09:13-07:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": ".gitignore", "file_new_name": ".gitignore", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "4", "deleted_lines": "4"}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "src\\numbuf\\cpp\\src\\numbuf\\dict.cc", "file_new_name": "src\\numbuf\\cpp\\src\\numbuf\\dict.cc", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "8,9,10,14", "deleted_lines": "8,9,13", "method_info": {"method_name": "numbuf::DictBuilder::Finish", "method_params": "key_tuple_data,key_dict_data,val_list_data,val_tuple_data,val_dict_data,out", "method_startline": "7", "method_endline": "24"}}, "hunk_1": {"Ismethod": 1, "added_lines": "8,9,10,14", "deleted_lines": "8,9,13", "method_info": {"method_name": "numbuf::DictBuilder::Finish", "method_params": "key_tuple_data,val_list_data,val_tuple_data,val_dict_data,out", "method_startline": "7", "method_endline": "23"}}}}, "file_2": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "src\\numbuf\\cpp\\src\\numbuf\\dict.h", "file_new_name": "src\\numbuf\\cpp\\src\\numbuf\\dict.h", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "36", "deleted_lines": null}}}, "file_3": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "src\\numbuf\\python\\src\\pynumbuf\\adapters\\python.cc", "file_new_name": "src\\numbuf\\python\\src\\pynumbuf\\adapters\\python.cc", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "232,237,238,249,250,251,252,253,269,270", "deleted_lines": "232,237,263", "method_info": {"method_name": "numbuf::SerializeDict", "method_params": "dicts,recursion_depth,out,tensors_out", "method_startline": "224", "method_endline": "286"}}}}, "file_4": {"file_change_type": "MODIFY", "file_Nmethod": 4, "file_old_name": "test\\runtest.py", "file_new_name": "test\\runtest.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "92,93", "deleted_lines": "92,93", "method_info": {"method_name": "__init__", "method_params": "self,value", "method_startline": "92", "method_endline": "93"}}, "hunk_1": {"Ismethod": 1, "added_lines": "92,93", "deleted_lines": "92,93", "method_info": {"method_name": "__init__", "method_params": "self", "method_startline": "92", "method_endline": "93"}}, "hunk_2": {"Ismethod": 1, "added_lines": "98,99", "deleted_lines": null, "method_info": {"method_name": "__eq__", "method_params": "self,other", "method_startline": "98", "method_endline": "99"}}, "hunk_3": {"Ismethod": 1, "added_lines": "95,96", "deleted_lines": null, "method_info": {"method_name": "__hash__", "method_params": "self", "method_startline": "95", "method_endline": "96"}}}}}}}