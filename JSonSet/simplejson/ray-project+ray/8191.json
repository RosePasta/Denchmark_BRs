{"BR": {"BR_id": "8191", "BR_author": "ericl", "BRopenT": "2020-04-26T22:48:13Z", "BRcloseT": "2020-04-27T21:24:39Z", "BR_text": {"BRsummary": "[rllib] multi_agent_custom_policy test is broken (and skipped in travis)", "BRdescription": "\n <denchmark-h:h3>What is the problem?</denchmark-h>\n \n <denchmark-code>py_test(\n     name = \"examples/multi_agent_custom_policy\",\n     tags = [\"examples\", \"examples_M_xxx\"],\n     size = \"medium\",\n     srcs = [\"examples/multi_agent_custom_policy.py\"],\n )\n </denchmark-code>\n \n The multi agent policy test is skipped in CI currently, and is broken.\n <denchmark-h:h3>Reproduction (REQUIRED)</denchmark-h>\n \n python multi_agent_custom_policy.py\n <denchmark-code>    item = next(self.rollout_provider)\n   File \"/home/eric/Desktop/ray/python/ray/rllib/evaluation/sampler.py\", line 348, in _env_runner\n     callbacks, soft_horizon, no_done_at_end)\n   File \"/home/eric/Desktop/ray/python/ray/rllib/evaluation/sampler.py\", line 395, in _process_observations\n     episode = active_episodes[env_id]\n   File \"/home/eric/Desktop/ray/python/ray/rllib/evaluation/sampler.py\", line 315, in new_episode\n     p.exploration.on_episode_start(\n AttributeError: 'NoneType' object has no attribute 'on_episode_start'\n \n </denchmark-code>\n \n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "ericl", "commentT": "2020-04-26T22:48:22Z", "comment_text": "\n \t\tcc <denchmark-link:https://github.com/sven1977>@sven1977</denchmark-link>\n \n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "ericl", "commentT": "2020-04-26T22:49:06Z", "comment_text": "\n \t\tMarking this as P0 since it means all non-TF/Torch policies are broken.\n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "ericl", "commentT": "2020-04-27T19:20:25Z", "comment_text": "\n \t\ttaking a look ...\n \t\t"}}}, "commit": {"commit_id": "4e713152e99b8524df2cabd0e8faf5080ca03a20", "commit_author": "Sven Mika", "commitT": "2020-04-27 23:19:26+02:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "rllib\\BUILD", "file_new_name": "rllib\\BUILD", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "1391", "deleted_lines": "1391"}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "rllib\\evaluation\\sample_batch_builder.py", "file_new_name": "rllib\\evaluation\\sample_batch_builder.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "155,156,157,158", "deleted_lines": "155,156", "method_info": {"method_name": "postprocess_batch_so_far", "method_params": "self,episode", "method_startline": "121", "method_endline": "180"}}}}, "file_2": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "rllib\\evaluation\\sampler.py", "file_new_name": "rllib\\evaluation\\sampler.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "316,317,318,319,320,321", "deleted_lines": "316,317,318,319,320", "method_info": {"method_name": "new_episode", "method_params": "", "method_startline": "311", "method_endline": "327"}}}}, "file_3": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "rllib\\policy\\policy.py", "file_new_name": "rllib\\policy\\policy.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": null, "deleted_lines": "45,46", "method_info": {"method_name": "__init__", "method_params": "self,observation_space,action_space,config", "method_startline": "34", "method_endline": "56"}}}}}}}