{"BR": {"BR_id": "7412", "BR_author": "drozzy", "BRopenT": "2020-03-03T03:07:47Z", "BRcloseT": "2020-03-09T22:53:11Z", "BR_text": {"BRsummary": "\"restore\" deletes the restored from checkpoint", "BRdescription": "\n If I specify a checkpoint in the tune.run(DQNTrainer, restore=X) - the checkpoint X gets deleted!\n So if there is a bug or something during the initialization, I loose my checkpoint and can no longer restart from it!\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "drozzy", "commentT": "2020-03-06T15:59:07Z", "comment_text": "\n \t\tWhen I restore from a checkpoint in the following way, the checkpoint is not deleted for me:\n tune.run(\"DDPG\", config=config, restore=checkpoint_path)\n I'm on ray v0.8.2 and tensorflow 2.0.0\n EDIT nvm also have this problem, didn't check/test properly\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "drozzy", "commentT": "2020-03-06T22:06:44Z", "comment_text": "\n \t\tHm... are you setting check-pointing to be done during this trial? E.g.:\n <denchmark-code>\n tune.run(DQNTrainer, \n    restore=checkpoint,\n    checkpoint_freq=5, checkpoint_at_end=True, checkpoint_score_attr='episode_reward_mean', keep_checkpoints_num=10)\n </denchmark-code>\n \n Because when I restore it starts a new trial and starts saving checkpoints in a different trial directory (under ~/ray_results), but for some reason it deletes the last checkpoint from the old directory.\n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "drozzy", "commentT": "2020-03-07T07:04:43Z", "comment_text": "\n \t\tcc <denchmark-link:https://github.com/ujvl>@ujvl</denchmark-link>\n \n \t\t"}, "comments_3": {"comment_id": 4, "comment_author": "drozzy", "commentT": "2020-03-07T16:33:33Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/drozzy>@drozzy</denchmark-link>\n  thanks for flagging this, will push a fix this weekend.\n \t\t"}}}, "commit": {"commit_id": "023d4c02a9fb420121859dd255d07529b9b14a74", "commit_author": "Ujval Misra", "commitT": "2020-03-09 15:53:10-07:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 6, "file_old_name": "python\\ray\\tune\\analysis\\experiment_analysis.py", "file_new_name": "python\\ray\\tune\\analysis\\experiment_analysis.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "195,196", "deleted_lines": "201", "method_info": {"method_name": "__init__", "method_params": "self,experiment_checkpoint_path,trials", "method_startline": "191", "method_endline": "209"}}, "hunk_1": {"Ismethod": 1, "added_lines": null, "deleted_lines": "62", "method_info": {"method_name": "get_best_config", "method_params": "self,metric,mode", "method_startline": "56", "method_endline": "68"}}, "hunk_2": {"Ismethod": 1, "added_lines": null, "deleted_lines": "46", "method_info": {"method_name": "dataframe", "method_params": "self,metric,mode", "method_startline": "39", "method_endline": "54"}}, "hunk_3": {"Ismethod": 1, "added_lines": "97", "deleted_lines": "101", "method_info": {"method_name": "get_all_configs", "method_params": "self,prefix", "method_startline": "94", "method_endline": "116"}}, "hunk_4": {"Ismethod": 1, "added_lines": null, "deleted_lines": "76", "method_info": {"method_name": "get_best_logdir", "method_params": "self,metric,mode", "method_startline": "70", "method_endline": "82"}}, "hunk_5": {"Ismethod": 1, "added_lines": "119,121,122,126,127,128,129,132,135,142", "deleted_lines": "123,124,126,127,130,134,135,138", "method_info": {"method_name": "get_trial_checkpoints_paths", "method_params": "self,trial,metric", "method_startline": "118", "method_endline": "144"}}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "python\\ray\\tune\\tests\\test_trial_runner_2.py", "file_new_name": "python\\ray\\tune\\tests\\test_trial_runner_2.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": null, "deleted_lines": "242", "method_info": {"method_name": "testRestoreMetricsAfterCheckpointing", "method_params": "self", "method_startline": "229", "method_endline": "264"}}}}, "file_2": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "python\\ray\\tune\\tests\\test_tune_restore.py", "file_new_name": "python\\ray\\tune\\tests\\test_tune_restore.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "61,62,63,64,65,66,67,68,69,70,71,72,73,74,75", "deleted_lines": null, "method_info": {"method_name": "testPostRestoreCheckpointExistence", "method_params": "self", "method_startline": "61", "method_endline": "75"}}}}, "file_3": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "python\\ray\\tune\\trial.py", "file_new_name": "python\\ray\\tune\\trial.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "245,246,247,248", "deleted_lines": "246,247", "method_info": {"method_name": "checkpoint", "method_params": "self", "method_startline": "236", "method_endline": "248"}}}}}}}