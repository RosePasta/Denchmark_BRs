{"BR": {"BR_id": "457", "BR_author": "robertnishihara", "BRopenT": "2017-04-12T07:58:30Z", "BRcloseT": "2017-06-15T17:03:21Z", "BR_text": {"BRsummary": "Test failure in global scheduler test.", "BRdescription": "\n The following test error has become fairly common in\n <denchmark-code>python python/ray/global_scheduler/test/test.py\n </denchmark-code>\n \n For example, see <denchmark-link:https://s3.amazonaws.com/archive.travis-ci.org/jobs/221223187/log.txt>https://s3.amazonaws.com/archive.travis-ci.org/jobs/221223187/log.txt</denchmark-link>\n . An example error is shown below.\n <denchmark-code>======================================================================\n ERROR: test_integration_many_tasks (__main__.TestGlobalScheduler)\n ----------------------------------------------------------------------\n Traceback (most recent call last):\n   File \"./python/ray/global_scheduler/test/test.py\", line 117, in tearDown\n     self.assertEqual(p4.poll(), None)\n AssertionError: -6 != None\n \n ======================================================================\n FAIL: test_integration_many_tasks (__main__.TestGlobalScheduler)\n ----------------------------------------------------------------------\n Traceback (most recent call last):\n   File \"./python/ray/global_scheduler/test/test.py\", line 302, in test_integration_many_tasks\n     self.integration_many_tasks_helper(timesync=False)\n   File \"./python/ray/global_scheduler/test/test.py\", line 293, in integration_many_tasks_helper\n     self.tearDown()\n   File \"./python/ray/global_scheduler/test/test.py\", line 117, in tearDown\n     self.assertEqual(p4.poll(), None)\n AssertionError: -6 != None\n \n ----------------------------------------------------------------------\n Ran 5 tests in 26.307s\n </denchmark-code>\n \n During the actual run of the test, the following is printed.\n <denchmark-code>[FATAL] (/home/travis/build/ray-project/ray/src/local_scheduler/local_scheduler.cc:559: errno: Operation now in progress) Check failure: !IS_NIL_ID(task_id) \n No task information found for object during reconstruction\n /usr/local/lib/python2.7/dist-packages/ray-0.0.1-py2.7.egg/ray/local_scheduler/../core/src/local_scheduler/local_scheduler(_Z42reconstruct_evicted_result_lookup_callback8UniqueIDS_bPv+0xa8)[0x4304e2]\n /usr/local/lib/python2.7/dist-packages/ray-0.0.1-py2.7.egg/ray/local_scheduler/../core/src/local_scheduler/local_scheduler(_Z34redis_result_table_lookup_callbackP17redisAsyncContextPvS1_+0x25f)[0x454639]\n /usr/local/lib/python2.7/dist-packages/ray-0.0.1-py2.7.egg/ray/local_scheduler/../core/src/local_scheduler/local_scheduler(redisProcessCallbacks+0x83)[0x477743]\n /usr/local/lib/python2.7/dist-packages/ray-0.0.1-py2.7.egg/ray/local_scheduler/../core/src/local_scheduler/local_scheduler[0x45162c]\n /usr/local/lib/python2.7/dist-packages/ray-0.0.1-py2.7.egg/ray/local_scheduler/../core/src/local_scheduler/local_scheduler(aeProcessEvents+0x254)[0x461204]\n /usr/local/lib/python2.7/dist-packages/ray-0.0.1-py2.7.egg/ray/local_scheduler/../core/src/local_scheduler/local_scheduler(aeMain+0x48)[0x46138e]\n /usr/local/lib/python2.7/dist-packages/ray-0.0.1-py2.7.egg/ray/local_scheduler/../core/src/local_scheduler/local_scheduler(_Z14event_loop_runP11aeEventLoop+0x18)[0x447ad6]\n /usr/local/lib/python2.7/dist-packages/ray-0.0.1-py2.7.egg/ray/local_scheduler/../core/src/local_scheduler/local_scheduler(_Z12start_serverPKcS0_S0_iS0_S0_S0_bPKdS0_i+0x244)[0x433927]\n /usr/local/lib/python2.7/dist-packages/ray-0.0.1-py2.7.egg/ray/local_scheduler/../core/src/local_scheduler/local_scheduler(main+0x95b)[0x4342a0]\n /lib/x86_64-linux-gnu/libc.so.6(__libc_start_main+0xf5)[0x7f22be7f6f45]\n /usr/local/lib/python2.7/dist-packages/ray-0.0.1-py2.7.egg/ray/local_scheduler/../core/src/local_scheduler/local_scheduler[0x42d7bc]\n </denchmark-code>\n \n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "robertnishihara", "commentT": "2017-06-01T02:10:11Z", "comment_text": "\n \t\tNote that the other global scheduler tests sometimes fail. For example\n <denchmark-code>======================================================================\n ERROR: test_integration_many_tasks (__main__.TestGlobalScheduler)\n ----------------------------------------------------------------------\n Traceback (most recent call last):\n   File \"./python/ray/global_scheduler/test/test.py\", line 113, in tearDown\n     self.assertEqual(p4.poll(), None)\n AssertionError: -6 != None\n \n ======================================================================\n FAIL: test_integration_many_tasks (__main__.TestGlobalScheduler)\n ----------------------------------------------------------------------\n Traceback (most recent call last):\n   File \"./python/ray/global_scheduler/test/test.py\", line 297, in test_integration_many_tasks\n     self.integration_many_tasks_helper(timesync=False)\n   File \"./python/ray/global_scheduler/test/test.py\", line 289, in integration_many_tasks_helper\n     self.assertEqual(num_tasks_done, num_tasks)\n AssertionError: 948 != 1000\n \n ----------------------------------------------------------------------\n </denchmark-code>\n \n from <denchmark-link:https://s3.amazonaws.com/archive.travis-ci.org/jobs/238167081/log.txt?X-Amz-Expires=30&X-Amz-Date=20170601T020907Z&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAJRYRXRSVGNKPKO5A/20170601/us-east-1/s3/aws4_request&X-Amz-SignedHeaders=host&X-Amz-Signature=6ee8a7b21220bf401ffac707259bafaa8ce3e940c46c481f93510aa8a1d7a228>https://s3.amazonaws.com/archive.travis-ci.org/jobs/238167081/log.txt?X-Amz-Expires=30&X-Amz-Date=20170601T020907Z&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAJRYRXRSVGNKPKO5A/20170601/us-east-1/s3/aws4_request&X-Amz-SignedHeaders=host&X-Amz-Signature=6ee8a7b21220bf401ffac707259bafaa8ce3e940c46c481f93510aa8a1d7a228</denchmark-link>\n .\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "robertnishihara", "commentT": "2017-06-15T17:03:21Z", "comment_text": "\n \t\tAddressed by <denchmark-link:https://github.com/ray-project/ray/pull/674>#674</denchmark-link>\n .\n \t\t"}}}, "commit": {"commit_id": "83170259870aa4e8915f7749ccd6dae31b930021", "commit_author": "Alexey Tumanov", "commitT": "2017-06-15 10:02:46-07:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "python\\ray\\global_scheduler\\test\\test.py", "file_new_name": "python\\ray\\global_scheduler\\test\\test.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "246,247", "deleted_lines": "246,247", "method_info": {"method_name": "integration_many_tasks_helper", "method_params": "self,timesync", "method_startline": "234", "method_endline": "289"}}}}}}}