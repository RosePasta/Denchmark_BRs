{"BR": {"BR_id": "12938", "BR_author": "TanjaBayer", "BRopenT": "2020-12-17T09:01:47Z", "BRcloseT": "2020-12-30T20:19:57Z", "BR_text": {"BRsummary": "[dashboard] Empty screen or errors when running ray", "BRdescription": "\n <denchmark-h:h3>What is the problem?</denchmark-h>\n \n When starting ray scrips with the latest nightly version the dasboard only shows a blank screen, making it impossible to check any logs or other stuff. When checking the console the following two errors are printed repeatedly:\n <denchmark-link:https://user-images.githubusercontent.com/30770185/102464888-3cb3ae00-404d-11eb-9707-ea9de553cefc.png></denchmark-link>\n \n \n ray: 1.1.0.dev0\n Python 3.7.9\n Ubuntu 18.04\n \n I assume it is a specific Linux/Ubuntu issue because I was not able to reproduce the problem on a Mac\n <denchmark-h:h3>Reproduction</denchmark-h>\n \n A minimal example which was reproducing the issue. Sometimes you see the dashboard for some seconds before the screen becomes blank\n import time\n \n import numpy as np\n import ray\n \n print(ray.__version__)\n ray.init()\n \n \n @ray.remote\n def get_batch():\n     batch_of_numpys = [np.random.randint(0, 255, (360, 640, 3), dtype=np.uint8) for _ in\n                        range(0, 150)]\n     return batch_of_numpys\n \n \n while True:\n     print(len(ray.get(get_batch.remote())))\n     time.sleep(2)\n \n  I have verified my script runs in a clean environment and reproduces the issue.\n  I have verified the issue also occurs with the latest wheels. Actually it only happens there for me.\n \n <denchmark-link:https://github.com/mfitton>@mfitton</denchmark-link>\n \n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "TanjaBayer", "commentT": "2020-12-17T20:29:23Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/mfitton>@mfitton</denchmark-link>\n  could you take a look?\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "TanjaBayer", "commentT": "2020-12-17T22:07:02Z", "comment_text": "\n \t\tI'm also able to reproduce on Ubuntu, and not on OS X. It has to do with the logCount and errorCount for workers being undefined in Ubuntu for some reason. Reading through the code now and trying to figure out how that could happen...\n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "TanjaBayer", "commentT": "2020-12-18T17:55:47Z", "comment_text": "\n \t\tI'm still confused about why this is happening from my reading of the backend code, but I have some front-end code that I think will at least patch the issue if nothing else. I'm running this alongside some other tasks, but I'm going to test the fix at some point today and open up a PR if the fix is successful.\n \t\t"}}}, "commit": {"commit_id": "25f7bdc0d8715ef7b3a15dd179d76bff7d1eddd9", "commit_author": "Max Fitton", "commitT": "2020-12-30 14:19:56-06:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "dashboard\\client\\src\\api.ts", "file_new_name": "dashboard\\client\\src\\api.ts", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "68,69,170,171", "deleted_lines": "68,69,170,171"}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "dashboard\\client\\src\\pages\\dashboard\\node-info\\features\\Errors.tsx", "file_new_name": "dashboard\\client\\src\\pages\\dashboard\\node-info\\features\\Errors.tsx", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "16,32,33,39,45,52,62", "deleted_lines": "16,32,38,44,51,61"}}}, "file_2": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "dashboard\\client\\src\\pages\\dashboard\\node-info\\features\\Logs.tsx", "file_new_name": "dashboard\\client\\src\\pages\\dashboard\\node-info\\features\\Logs.tsx", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "16,30,31,32,38,42,49,50,51,53,61,64", "deleted_lines": "16,30,31,37,47,48,50,60"}}}}}}