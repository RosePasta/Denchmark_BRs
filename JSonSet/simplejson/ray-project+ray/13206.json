{"BR": {"BR_id": "13206", "BR_author": "simon-mo", "BRopenT": "2021-01-05T18:21:35Z", "BRcloseT": "2021-01-06T00:48:32Z", "BR_text": {"BRsummary": "test_autoscaler::AutoscalingTest.testDockerFileMountsRemoved Windows CI Failure", "BRdescription": "\n <denchmark-h:h3>What is the problem?</denchmark-h>\n \n Ray version and other system information (Python version, TensorFlow version, OS):\n <denchmark-code>AILED: //python/ray/tests:test_autoscaler (Summary)\n       C:/users/runneradmin/_bazel_runneradmin/vlncal46/execroot/com_github_ray_project_ray/bazel-out/x64_windows-opt/testlogs/python/ray/tests/test_autoscaler/test.log\n       C:/users/runneradmin/_bazel_runneradmin/vlncal46/execroot/com_github_ray_project_ray/bazel-out/x64_windows-opt/testlogs/python/ray/tests/test_autoscaler/test_attempts/attempt_1.log\n       C:/users/runneradmin/_bazel_runneradmin/vlncal46/execroot/com_github_ray_project_ray/bazel-out/x64_windows-opt/testlogs/python/ray/tests/test_autoscaler/test_attempts/attempt_2.log\n INFO: From Testing //python/ray/tests:test_autoscaler:\n ==================== Test output for //python/ray/tests:test_autoscaler:\n ============================= test session starts =============================\n platform win32 -- Python 3.7.9, pytest-5.4.3, py-1.10.0, pluggy-0.13.1 -- C:\\hostedtoolcache\\windows\\Python\\3.7.9\\x64\\python.exe\n cachedir: .pytest_cache\n rootdir: C:\\Users\\runneradmin\\AppData\\Local\\Temp\\Bazel.runfiles_rjyqimfr\\runfiles\\com_github_ray_project_ray\n plugins: asyncio-0.14.0, rerunfailures-9.1.1, sugar-0.9.4, timeout-1.4.2\n collecting ... collected 42 items\n \n ::LoadMetricsTest::testDebugString PASSED                                [  2%]\n ::LoadMetricsTest::testHeartbeat PASSED                                  [  4%]\n ::AutoscalingTest::testAggressiveAutoscaling 2021-01-05 06:36:32,054\tSUCC updater.py:241 -- Success.\n 2021-01-05 06:36:32,054\tINFO log_timer.py:27 -- NodeUpdater: 1: Got remote shell  [LogTimer=13ms]\n 2021-01-05 06:36:32,054\tINFO updater.py:318 -- Updating cluster configuration. [hash=a4a92c863e67620ebfe00d7b8e6420316984cf91]\n 2021-01-05 06:36:32,054\tINFO updater.py:322 -- New status: syncing-files\n 2021-01-05 06:36:32,054\tINFO updater.py:208 -- [2/7] Processing file mounts\n 2021-01-05 06:36:32,054\tINFO updater.py:225 -- [3/7] No worker file mounts to sync\n 2021-01-05 06:36:32,054\tINFO updater.py:333 -- New status: setting-up\n 2021-01-05 06:36:32,054\tINFO updater.py:338 -- [4/7] Running initialization commands\n 2021-01-05 06:36:32,054\tVINFO command_runner.py:508 -- Running `export RAY_HEAD_IP=172.0.0.0; init_cmd`\n 2021-01-05 06:36:32,054\tVVINFO command_runner.py:511 -- Full command is `ssh -tt -i nul -o StrictHostKeyChecking=no -o UserKnownHostsFile=nul -o IdentitiesOnly=yes -o ExitOnForwardFailure=yes -o ServerAliveInterval=5 -o ServerAliveCountMax=3 -o ConnectTimeout=120s ubuntu@172.0.0.1 bash --login -c -i 'true && source ~/.bashrc && export OMP_NUM_THREADS=1 PYTHONWARNINGS=ignore && (export RAY_HEAD_IP=172.0.0.0; init_cmd)'`\n 2021-01-05 06:36:32,054\tINFO log_timer.py:27 -- NodeUpdater: 1: Initialization commands succeeded [LogTimer=0ms]\n 2021-01-05 06:36:32,055\tINFO updater.py:375 -- [5/7] Initalizing command runner\n 2021-01-05 06:36:32,055\tVINFO command_runner.py:508 -- Running `command -v docker || echo 'NoExist'`\n 2021-01-05 06:36:32,055\tVVINFO command_runner.py:511 -- Full command is `ssh -tt -i nul -o StrictHostKeyChecking=no -o UserKnownHostsFile=nul -o IdentitiesOnly=yes -o ExitOnForwardFailure=yes -o ServerAliveInterval=5 -o ServerAliveCountMax=3 -o ControlMaster=auto -o ControlPath=/tmp/ray_ssh_325c223333/c21f969b5f/%C -o ControlPersist=10s -o ConnectTimeout=120s ubuntu@172.0.0.1 bash --login -c -i 'true && source ~/.bashrc && export OMP_NUM_THREADS=1 PYTHONWARNINGS=ignore && (command -v docker || echo '\"'\"'NoExist'\"'\"')'`\n 2021-01-05 06:36:32,055\tVINFO command_runner.py:508 -- Running `docker pull example`\n 2021-01-05 06:36:32,055\tVVINFO command_runner.py:511 -- Full command is `ssh -tt -i nul -o StrictHostKeyChecking=no -o UserKnownHostsFile=nul -o IdentitiesOnly=yes -o ExitOnForwardFailure=yes -o ServerAliveInterval=5 -o ServerAliveCountMax=3 -o ControlMaster=auto -o ControlPath=/tmp/ray_ssh_325c223333/c21f969b5f/%C -o ControlPersist=10s -o ConnectTimeout=120s ubuntu@172.0.0.1 bash --login -c -i 'true && source ~/.bashrc && export OMP_NUM_THREADS=1 PYTHONWARNINGS=ignore && (docker pull example)'`\n 2021-01-05 06:36:32,055\tVINFO command_runner.py:508 -- Running `docker inspect -f '{{.State.Running}}' mock || true`\n 2021-01-05 06:36:32,055\tVVINFO command_runner.py:511 -- Full command is `ssh -tt -i nul -o StrictHostKeyChecking=no -o UserKnownHostsFile=nul -o IdentitiesOnly=yes -o ExitOnForwardFailure=yes -o ServerAliveInterval=5 -o ServerAliveCountMax=3 -o ControlMaster=auto -o ControlPath=/tmp/ray_ssh_325c223333/c21f969b5f/%C -o ControlPersist=10s -o ConnectTimeout=120s ubuntu@172.0.0.1 bash --login -c -i 'true && source ~/.bashrc && export OMP_NUM_THREADS=1 PYTHONWARNINGS=ignore && (docker inspect -f '\"'\"'{{.State.Running}}'\"'\"' mock || true)'`\n 2021-01-05 06:36:32,055\tVINFO command_runner.py:508 -- Running `docker inspect -f '{{json .Config.Env}}' example`\n 2021-01-05 06:36:32,055\tVVINFO command_runner.py:511 -- Full command is `ssh -tt -i nul -o StrictHostKeyChecking=no -o UserKnownHostsFile=nul -o IdentitiesOnly=yes -o ExitOnForwardFailure=yes -o ServerAliveInterval=5 -o ServerAliveCountMax=3 -o ControlMaster=auto -o ControlPath=/tmp/ray_ssh_325c223333/c21f969b5f/%C -o ControlPersist=10s -o ConnectTimeout=120s ubuntu@172.0.0.1 bash --login -c -i 'true && source ~/.bashrc && export OMP_NUM_THREADS=1 PYTHONWARNINGS=ignore && (docker inspect -f '\"'\"'{{json .Config.Env}}'\"'\"' example)'`\n 2021-01-05 06:36:32,056\tVINFO command_runner.py:508 -- Running `docker info -f '{{.Runtimes}}' `\n 2021-01-05 06:36:32,056\tVVINFO command_runner.py:511 -- Full command is `ssh -tt -i nul -o StrictHostKeyChecking=no -o UserKnownHostsFile=nul -o IdentitiesOnly=yes -o ExitOnForwardFailure=yes -o ServerAliveInterval=5 -o ServerAliveCountMax=3 -o ControlMaster=auto -o ControlPath=/tmp/ray_ssh_325c223333/c21f969b5f/%C -o ControlPersist=10s -o ConnectTimeout=120s ubuntu@172.0.0.1 bash --login -c -i 'true && source ~/.bashrc && export OMP_NUM_THREADS=1 PYTHONWARNINGS=ignore && (docker info -f '\"'\"'{{.Runtimes}}'\"'\"' )'`\n 2021-01-05 06:36:32,056\tVINFO command_runner.py:508 -- Running `cat /proc/meminfo || true`\n 2021-01-05 06:36:32,056\tVVINFO command_runner.py:511 -- Full command is `ssh -tt -i nul -o StrictHostKeyChecking=no -o UserKnownHostsFile=nul -o IdentitiesOnly=yes -o ExitOnForwardFailure=yes -o ServerAliveInterval=5 -o ServerAliveCountMax=3 -o ControlMaster=auto -o ControlPath=/tmp/ray_ssh_325c223333/c21f969b5f/%C -o ControlPersist=10s -o ConnectTimeout=120s ubuntu@172.0.0.1 bash --login -c -i 'true && source ~/.bashrc && export OMP_NUM_THREADS=1 PYTHONWARNINGS=ignore && (cat /proc/meminfo || true)'`\n 2021-01-05 06:36:32,056\tVINFO command_runner.py:508 -- Running `docker run --rm --name mock -d -it  -e LC_ALL=C.UTF-8 -e LANG=C.UTF-8  --net=host example bash`\n 2021-01-05 06:36:32,056\tVVINFO command_runner.py:511 -- Full command is `ssh -tt -i nul -o StrictHostKeyChecking=no -o UserKnownHostsFile=nul -o IdentitiesOnly=yes -o ExitOnForwardFailure=yes -o ServerAliveInterval=5 -o ServerAliveCountMax=3 -o ControlMaster=auto -o ControlPath=/tmp/ray_ssh_325c223333/c21f969b5f/%C -o ControlPersist=10s -o ConnectTimeout=120s ubuntu@172.0.0.1 bash --login -c -i 'true && source ~/.bashrc && export OMP_NUM_THREADS=1 PYTHONWARNINGS=ignore && (docker run --rm --name mock -d -it  -e LC_ALL=C.UTF-8 -e LANG=C.UTF-8  --net=host example bash)'`\n 2021-01-05 06:36:32,056\tINFO updater.py:384 -- [6/7] Running setup commands\n 2021-01-05 06:36:32,056\tINFO updater.py:404 -- (0/2) export RAY_HEAD_IP=172.0.0.0; setup_cmd\n 2021-01-05 06:36:32,056\tVINFO command_runner.py:508 -- Running `docker exec -it  mock /bin/bash -c 'bash --login -c -i '\"'\"'true && source ~/.bashrc && export OMP_NUM_THREADS=1 PYTHONWARNINGS=ignore && (export RAY_HEAD_IP=172.0.0.0; setup_cmd)'\"'\"'' `\n 2021-01-05 06:36:32,057\tVVINFO command_runner.py:511 -- Full command is `ssh -tt -i nul -o StrictHostKeyChecking=no -o UserKnownHostsFile=nul -o IdentitiesOnly=yes -o ExitOnForwardFailure=yes -o ServerAliveInterval=5 -o ServerAliveCountMax=3 -o ControlMaster=auto -o ControlPath=/tmp/ray_ssh_325c223333/c21f969b5f/%C -o ControlPersist=10s -o ConnectTimeout=120s ubuntu@172.0.0.1 bash --login -c -i 'true && source ~/.bashrc && export OMP_NUM_THREADS=1 PYTHONWARNINGS=ignore && (docker exec -it  mock /bin/bash -c '\"'\"'bash --login -c -i '\"'\"'\"'\"'\"'\"'\"'\"'true && source ~/.bashrc && export OMP_NUM_THREADS=1 PYTHONWARNINGS=ignore && (export RAY_HEAD_IP=172.0.0.0; setup_cmd)'\"'\"'\"'\"'\"'\"'\"'\"''\"'\"' )'`\n 2021-01-05 06:36:32,057\tINFO updater.py:404 -- (1/2) export RAY_HEAD_IP=172.0.0.0; worker_setup_cmd\n 2021-01-05 06:36:32,057\tVINFO command_runner.py:508 -- Running `docker exec -it  mock /bin/bash -c 'bash --login -c -i '\"'\"'true && source ~/.bashrc && export OMP_NUM_THREADS=1 PYTHONWARNINGS=ignore && (export RAY_HEAD_IP=172.0.0.0; worker_setup_cmd)'\"'\"'' `\n 2021-01-05 06:36:32,057\tVVINFO command_runner.py:511 -- Full command is `ssh -tt -i nul -o StrictHostKeyChecking=no -o UserKnownHostsFile=nul -o IdentitiesOnly=yes -o ExitOnForwardFailure=yes -o ServerAliveInterval=5 -o ServerAliveCountMax=3 -o ControlMaster=auto -o ControlPath=/tmp/ray_ssh_325c223333/c21f969b5f/%C -o ControlPersist=10s -o ConnectTimeout=120s ubuntu@172.0.0.1 bash --login -c -i 'true && source ~/.bashrc && export OMP_NUM_THREADS=1 PYTHONWARNINGS=ignore && (docker exec -it  mock /bin/bash -c '\"'\"'bash --login -c -i '\"'\"'\"'\"'\"'\"'\"'\"'true && source ~/.bashrc && export OMP_NUM_THREADS=1 PYTHONWARNINGS=ignore && (export RAY_HEAD_IP=172.0.0.0; worker_setup_cmd)'\"'\"'\"'\"'\"'\"'\"'\"''\"'\"' )'`\n 2021-01-05 06:36:32,057\tINFO log_timer.py:27 -- NodeUpdater: 1: Setup commands succeeded [LogTimer=1ms]\n 2021-01-05 06:36:32,057\tINFO updater.py:424 -- [7/7] Starting the Ray runtime\n 2021-01-05 06:36:32,057\tVINFO command_runner.py:508 -- Running `docker exec -it  mock /bin/bash -c 'bash --login -c -i '\"'\"'true && source ~/.bashrc && export OMP_NUM_THREADS=1 PYTHONWARNINGS=ignore && (export RAY_HEAD_IP=172.0.0.0; start_ray_worker)'\"'\"'' `\n 2021-01-05 06:36:32,057\tVVINFO command_runner.py:511 -- Full command is `ssh -tt -i nul -o StrictHostKeyChecking=no -o UserKnownHostsFile=nul -o IdentitiesOnly=yes -o ExitOnForwardFailure=yes -o ServerAliveInterval=5 -o ServerAliveCountMax=3 -o ControlMaster=auto -o ControlPath=/tmp/ray_ssh_325c223333/c21f969b5f/%C -o ControlPersist=10s -o ConnectTimeout=120s ubuntu@172.0.0.1 bash --login -c -i 'true && source ~/.bashrc && export OMP_NUM_THREADS=1 PYTHONWARNINGS=ignore && (docker exec -it  mock /bin/bash -c '\"'\"'bash --login -c -i '\"'\"'\"'\"'\"'\"'\"'\"'true && source ~/.bashrc && export OMP_NUM_THREADS=1 PYTHONWARNINGS=ignore && (export RAY_HEAD_IP=172.0.0.0; start_ray_worker)'\"'\"'\"'\"'\"'\"'\"'\"''\"'\"' )'`\n 2021-01-05 06:36:32,057\tINFO log_timer.py:27 -- NodeUpdater: 1: Ray start commands succeeded [LogTimer=0ms]\n 2021-01-05 06:36:32,058\tINFO log_timer.py:27 -- NodeUpdater: 1: Applied config a4a92c863e67620ebfe00d7b8e6420316984cf91  [LogTimer=18ms]\n 2021-01-05 06:36:32,058\tINFO updater.py:157 -- New status: up-to-date\n PASSED                      [  7%]\n ::AutoscalingTest::testAutodetectResources PASSED                        [  9%]\n ::AutoscalingTest::testAutoscalerConfigValidationFailNotFatal 2021-01-05 06:36:32,483\tINFO updater.py:333 -- New status: setting-up\n 2021-01-05 06:36:32,483\tINFO updater.py:338 -- [4/7] Running initialization commands\n 2021-01-05 06:36:32,483\tVINFO command_runner.py:508 -- Running `export RAY_HEAD_IP=10.1.0.4; init_cmd`\n 2021-01-05 06:36:32,483\tVVINFO command_runner.py:511 -- Full command is `ssh -tt -i nul -o StrictHostKeyChecking=no -o UserKnownHostsFile=nul -o IdentitiesOnly=yes -o ExitOnForwardFailure=yes -o ServerAliveInterval=5 -o ServerAliveCountMax=3 -o ConnectTimeout=120s ubuntu@172.0.0.1 bash --login -c -i 'true && source ~/.bashrc && export OMP_NUM_THREADS=1 PYTHONWARNINGS=ignore && (export RAY_HEAD_IP=10.1.0.4; init_cmd)'`\n 2021-01-05 06:36:32,483\tINFO log_timer.py:27 -- NodeUpdater: 1: Initialization commands succeeded [LogTimer=0ms]\n 2021-01-05 06:36:32,484\tINFO updater.py:375 -- [5/7] Initalizing command runner\n 2021-01-05 06:36:32,484\tVINFO command_runner.py:508 -- Running `command -v docker || echo 'NoExist'`\n 2021-01-05 06:36:32,484\tVVINFO command_runner.py:511 -- Full command is `ssh -tt -i nul -o StrictHostKeyChecking=no -o UserKnownHostsFile=nul -o IdentitiesOnly=yes -o ExitOnForwardFailure=yes -o ServerAliveInterval=5 -o ServerAliveCountMax=3 -o ControlMaster=auto -o ControlPath=/tmp/ray_ssh_325c223333/c21f969b5f/%C -o ControlPersist=10s -o ConnectTimeout=120s ubuntu@172.0.0.1 bash --login -c -i 'true && source ~/.bashrc && export OMP_NUM_THREADS=1 PYTHONWARNINGS=ignore && (command -v docker || echo '\"'\"'NoExist'\"'\"')'`\n 2021-01-05 06:36:32,484\tVINFO command_runner.py:508 -- Running `docker pull example`\n 2021-01-05 06:36:32,484\tVVINFO command_runner.py:511 -- Full command is `ssh -tt -i nul -o StrictHostKeyChecking=no -o UserKnownHostsFile=nul -o IdentitiesOnly=yes -o ExitOnForwardFailure=yes -o ServerAliveInterval=5 -o ServerAliveCountMax=3 -o ControlMaster=auto -o ControlPath=/tmp/ray_ssh_325c223333/c21f969b5f/%C -o ControlPersist=10s -o ConnectTimeout=120s ubuntu@172.0.0.1 bash --login -c -i 'true && source ~/.bashrc && export OMP_NUM_THREADS=1 PYTHONWARNINGS=ignore && (docker pull example)'`\n 2021-01-05 06:36:32,484\tVINFO command_runner.py:508 -- Running `docker inspect -f '{{.State.Running}}' mock || true`\n 2021-01-05 06:36:32,484\tVVINFO command_runner.py:511 -- Full command is `ssh -tt -i nul -o StrictHostKeyChecking=no -o UserKnownHostsFile=nul -o IdentitiesOnly=yes -o ExitOnForwardFailure=yes -o ServerAliveInterval=5 -o ServerAliveCountMax=3 -o ControlMaster=auto -o ControlPath=/tmp/ray_ssh_325c223333/c21f969b5f/%C -o ControlPersist=10s -o ConnectTimeout=120s ubuntu@172.0.0.1 bash --login -c -i 'true && source ~/.bashrc && export OMP_NUM_THREADS=1 PYTHONWARNINGS=ignore && (docker inspect -f '\"'\"'{{.State.Running}}'\"'\"' mock || true)'`\n 2021-01-05 06:36:32,484\tVINFO command_runner.py:508 -- Running `docker inspect -f '{{json .Config.Env}}' example`\n 2021-01-05 06:36:32,484\tVVINFO command_runner.py:511 -- Full command is `ssh -tt -i nul -o StrictHostKeyChecking=no -o UserKnownHostsFile=nul -o IdentitiesOnly=yes -o ExitOnForwardFailure=yes -o ServerAliveInterval=5 -o ServerAliveCountMax=3 -o ControlMaster=auto -o ControlPath=/tmp/ray_ssh_325c223333/c21f969b5f/%C -o ControlPersist=10s -o ConnectTimeout=120s ubuntu@172.0.0.1 bash --login -c -i 'true && source ~/.bashrc && export OMP_NUM_THREADS=1 PYTHONWARNINGS=ignore && (docker inspect -f '\"'\"'{{json .Config.Env}}'\"'\"' example)'`\n 2021-01-05 06:36:32,485\tINFO log_timer.py:27 -- NodeUpdater: 1: Applied config a4a92c863e67620ebfe00d7b8e6420316984cf91  [LogTimer=4ms]\n 2021-01-05 06:36:32,485\tERR updater.py:128 -- New status: update-failed\n 2021-01-05 06:36:32,485\tERR updater.py:130 -- !!!\n 2021-01-05 06:36:32,485\tVERR updater.py:136 -- {'msg': 'Expecting value', 'doc': 'command-output', 'pos': 0, 'lineno': 1, 'colno': 1}\n 2021-01-05 06:36:32,485\tERR updater.py:138 -- Expecting value: line 1 column 1 (char 0)\n 2021-01-05 06:36:32,485\tERR updater.py:140 -- !!!\n PASSED     [ 11%]Docker not installed. You can install Docker by adding the following commands to 'initialization_commands':\n curl -fsSL https://get.docker.com -o get-docker.sh\n sudo sh get-docker.sh\n sudo usermod -aG docker $USER\n sudo systemctl restart docker -f\n 2021-01-05 06:36:32,488\tVINFO command_runner.py:508 -- Running `uptime`\n 2021-01-05 06:36:32,488\tVVINFO command_runner.py:511 -- Full command is `ssh -tt -i nul -o StrictHostKeyChecking=no -o UserKnownHostsFile=nul -o IdentitiesOnly=yes -o ExitOnForwardFailure=yes -o ServerAliveInterval=5 -o ServerAliveCountMax=3 -o ControlMaster=auto -o ControlPath=/tmp/ray_ssh_325c223333/c21f969b5f/%C -o ControlPersist=10s -o ConnectTimeout=5s ubuntu@172.0.0.0 bash --login -c -i 'true && source ~/.bashrc && export OMP_NUM_THREADS=1 PYTHONWARNINGS=ignore && (uptime)'`\n 2021-01-05 06:36:32,488\tSUCC updater.py:241 -- Success.\n 2021-01-05 06:36:32,488\tINFO log_timer.py:27 -- NodeUpdater: 0: Got remote shell  [LogTimer=6ms]\n 2021-01-05 06:36:32,488\tINFO updater.py:318 -- Updating cluster configuration. [hash=a4a92c863e67620ebfe00d7b8e6420316984cf91]\n 2021-01-05 06:36:32,488\tINFO updater.py:322 -- New status: syncing-files\n 2021-01-05 06:36:32,488\tINFO updater.py:208 -- [2/7] Processing file mounts\n 2021-01-05 06:36:32,488\tINFO updater.py:225 -- [3/7] No worker file mounts to sync\n 2021-01-05 06:36:32,488\tINFO updater.py:333 -- New status: setting-up\n 2021-01-05 06:36:32,489\tINFO updater.py:338 -- [4/7] Running initialization commands\n 2021-01-05 06:36:32,489\tVINFO command_runner.py:508 -- Running `export RAY_HEAD_IP=10.1.0.4; init_cmd`\n 2021-01-05 06:36:32,489\tVVINFO command_runner.py:511 -- Full command is `ssh -tt -i nul -o StrictHostKeyChecking=no -o UserKnownHostsFile=nul -o IdentitiesOnly=yes -o ExitOnForwardFailure=yes -o ServerAliveInterval=5 -o ServerAliveCountMax=3 -o ConnectTimeout=120s ubuntu@172.0.0.0 bash --login -c -i 'true && source ~/.bashrc && export OMP_NUM_THREADS=1 PYTHONWARNINGS=ignore && (export RAY_HEAD_IP=10.1.0.4; init_cmd)'`\n 2021-01-05 06:36:32,489\tINFO log_timer.py:27 -- NodeUpdater: 0: Initialization commands succeeded [LogTimer=0ms]\n 2021-01-05 06:36:32,489\tINFO updater.py:375 -- [5/7] Initalizing command runner\n 2021-01-05 06:36:32,489\tVINFO command_runner.py:508 -- Running `command -v docker || echo 'NoExist'`\n 2021-01-05 06:36:32,489\tVVINFO command_runner.py:511 -- Full command is `ssh -tt -i nul -o StrictHostKeyChecking=no -o UserKnownHostsFile=nul -o IdentitiesOnly=yes -o ExitOnForwardFailure=yes -o ServerAliveInterval=5 -o ServerAliveCountMax=3 -o ControlMaster=auto -o ControlPath=/tmp/ray_ssh_325c223333/c21f969b5f/%C -o ControlPersist=10s -o ConnectTimeout=120s ubuntu@172.0.0.0 bash --login -c -i 'true && source ~/.bashrc && export OMP_NUM_THREADS=1 PYTHONWARNINGS=ignore && (command -v docker || echo '\"'\"'NoExist'\"'\"')'`\n \n 2021-01-05 06:36:32,490\tVINFO command_runner.py:508 -- Running `docker pull example`\n 2021-01-05 06:36:32,490\tVVINFO command_runner.py:511 -- Full command is `ssh -tt -i nul -o StrictHostKeyChecking=no -o UserKnownHostsFile=nul -o IdentitiesOnly=yes -o ExitOnForwardFailure=yes -o ServerAliveInterval=5 -o ServerAliveCountMax=3 -o ControlMaster=auto -o ControlPath=/tmp/ray_ssh_325c223333/c21f969b5f/%C -o ControlPersist=10s -o ConnectTimeout=120s ubuntu@172.0.0.0 bash --login -c -i 'true && source ~/.bashrc && export OMP_NUM_THREADS=1 PYTHONWARNINGS=ignore && (docker pull example)'`\n 2021-01-05 06:36:32,490\tVINFO command_runner.py:508 -- Running `docker inspect -f '{{.State.Running}}' mock || true`\n 2021-01-05 06:36:32,490\tVVINFO command_runner.py:511 -- Full command is `ssh -tt -i nul -o StrictHostKeyChecking=no -o UserKnownHostsFile=nul -o IdentitiesOnly=yes -o ExitOnForwardFailure=yes -o ServerAliveInterval=5 -o ServerAliveCountMax=3 -o ControlMaster=auto -o ControlPath=/tmp/ray_ssh_325c223333/c21f969b5f/%C -o ControlPersist=10s -o ConnectTimeout=120s ubuntu@172.0.0.0 bash --login -c -i 'true && source ~/.bashrc && export OMP_NUM_THREADS=1 PYTHONWARNINGS=ignore && (docker inspect -f '\"'\"'{{.State.Running}}'\"'\"' mock || true)'`\n 2021-01-05 06:36:32,490\tVINFO command_runner.py:508 -- Running `docker inspect -f '{{json .Config.Env}}' example`\n 2021-01-05 06:36:32,490\tVVINFO command_runner.py:511 -- Full command is `ssh -tt -i nul -o StrictHostKeyChecking=no -o UserKnownHostsFile=nul -o IdentitiesOnly=yes -o ExitOnForwardFailure=yes -o ServerAliveInterval=5 -o ServerAliveCountMax=3 -o ControlMaster=auto -o ControlPath=/tmp/ray_ssh_325c223333/c21f969b5f/%C -o ControlPersist=10s -o ConnectTimeout=120s ubuntu@172.0.0.0 bash --login -c -i 'true && source ~/.bashrc && export OMP_NUM_THREADS=1 PYTHONWARNINGS=ignore && (docker inspect -f '\"'\"'{{json .Config.Env}}'\"'\"' example)'`\n 2021-01-05 06:36:32,491\tINFO log_timer.py:27 -- NodeUpdater: 0: Applied config a4a92c863e67620ebfe00d7b8e6420316984cf91  [LogTimer=11ms]\n 2021-01-05 06:36:32,491\tERR updater.py:128 -- New status: update-failed\n 2021-01-05 06:36:32,491\tERR updater.py:130 -- !!!\n 2021-01-05 06:36:32,491\tVERR updater.py:136 -- {'msg': 'Expecting value', 'doc': 'command-output', 'pos': 0, 'lineno': 1, 'colno': 1}\n 2021-01-05 06:36:32,491\tERR updater.py:138 -- Expecting value: line 1 column 1 (char 0)\n 2021-01-05 06:36:32,491\tERR updater.py:140 -- !!!\n ::AutoscalingTest::testConfiguresNewNodes PASSED                         [ 14%]\n ::AutoscalingTest::testConfiguresOutdatedNodes PASSED                    [ 16%]\n ::AutoscalingTest::testContinuousFileMounts SKIPPED                      [ 19%]\n ::AutoscalingTest::testDelayedLaunch PASSED                              [ 21%]\n ::AutoscalingTest::testDelayedLaunchWithMinWorkers PASSED                [ 23%]\n ::AutoscalingTest::testDockerFileMountsAdded SKIPPED                     [ 26%]\n ::AutoscalingTest::testDockerFileMountsRemoved FAILED                    [ 28%]\n ::AutoscalingTest::testDynamicScaling PASSED                             [ 30%]\n ::AutoscalingTest::testExternalNodeScaler PASSED                         [ 33%]\n ::AutoscalingTest::testExternalNodeScalerWrongImport PASSED              [ 35%]\n ::AutoscalingTest::testExternalNodeScalerWrongModuleFormat PASSED        [ 38%]\n ::AutoscalingTest::testFileMountsNonContinuous PASSED                    [ 40%]\n ::AutoscalingTest::testGetOrCreateHeadNode SKIPPED                       [ 42%]\n ::AutoscalingTest::testGetOrCreateHeadNodeFromStopped SKIPPED            [ 45%]\n ::AutoscalingTest::testIgnoresCorruptedConfig PASSED                     [ 47%]\n ::AutoscalingTest::testInitialWorkers PASSED                             [ 50%]\n ::AutoscalingTest::testLaunchConfigChange PASSED                         [ 52%]\n ::AutoscalingTest::testLaunchNewNodeOnOutOfBandTerminate PASSED          [ 54%]\n ::AutoscalingTest::testLegacyYamlWithRequestResources PASSED             [ 57%]\n ::AutoscalingTest::testMaxFailures PASSED                                [ 59%]\n ::AutoscalingTest::testMultiNodeReuse PASSED                             [ 61%]\n ::AutoscalingTest::testRecoverUnhealthyWorkers PASSED                    [ 64%]\n ::AutoscalingTest::testReportsConfigFailures PASSED                      [ 66%]\n ::AutoscalingTest::testRsyncCommandWithDocker SKIPPED                    [ 69%]\n ::AutoscalingTest::testRsyncCommandWithoutDocker SKIPPED                 [ 71%]\n ::AutoscalingTest::testScaleUp PASSED                                    [ 73%]\n ::AutoscalingTest::testScaleUpBasedOnLoad PASSED                         [ 76%]\n ::AutoscalingTest::testSetupCommandsWithNoNodeCaching PASSED             [ 78%]\n ::AutoscalingTest::testSetupCommandsWithStoppedNodeCachingDocker PASSED  [ 80%]\n ::AutoscalingTest::testSetupCommandsWithStoppedNodeCachingNoDocker PASSED [ 83%]\n ::AutoscalingTest::testTargetUtilizationFraction PASSED                  [ 85%]\n ::AutoscalingTest::testTerminateOutdatedNodesGracefully PASSED           [ 88%]\n ::AutoscalingTest::testUnmanagedNodes PASSED                             [ 90%]\n ::AutoscalingTest::testUnmanagedNodes2 PASSED                            [ 92%]\n ::AutoscalingTest::testUpdateThrottling PASSED                           [ 95%]\n ::AutoscalingTest::testValidateDefaultConfig PASSED                      [ 97%]\n ::AutoscalingTest::testValidation PASSED                                 [100%]\n \n ================================== FAILURES ===================================\n _________________ AutoscalingTest.testDockerFileMountsRemoved _________________\n \n self = <com_github_ray_project_ray.python.ray.tests.test_autoscaler.AutoscalingTest testMethod=testDockerFileMountsRemoved>\n \n     def testDockerFileMountsRemoved(self):\n         config = copy.deepcopy(SMALL_CLUSTER)\n         config[\"file_mounts\"] = {}\n         config_path = self.write_config(config)\n         self.provider = MockProvider()\n         runner = MockProcessRunner()\n         mounts = [{\n             \"Type\": \"bind\",\n             \"Source\": \"/sys\",\n             \"Destination\": \"/sys\",\n             \"Mode\": \"ro\",\n             \"RW\": False,\n             \"Propagation\": \"rprivate\"\n         }]\n         runner.respond_to_call(\"json .Mounts\", [json.dumps(mounts)])\n         # Two initial calls to docker cp, +1 more call during run_init\n         runner.respond_to_call(\".State.Running\",\n                                [\"false\", \"false\", \"true\", \"true\"])\n         runner.respond_to_call(\"json .Config.Env\", [\"[]\"])\n         commands.get_or_create_head_node(\n             config,\n             printable_config_file=config_path,\n             no_restart=False,\n             restart_only=False,\n             yes=True,\n             override_cluster_name=None,\n             _provider=self.provider,\n >           _runner=runner)\n \n \\\\?\\C:\\Users\\RUNNER~1\\AppData\\Local\\Temp\\Bazel.runfiles_rjyqimfr\\runfiles\\com_github_ray_project_ray\\python\\ray\\tests\\test_autoscaler.py:575: \n _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n d:\\a\\ray\\ray\\python\\ray\\autoscaler\\_private\\commands.py:710: in get_or_create_head_node\n     cli_logger.abort(\"Failed to setup head node.\")\n _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n \n self = <ray.autoscaler._private.cli_logger._CliLogger object at 0x0000023711F1A708>\n msg = 'Failed to setup head node.', exc = None, args = (), kwargs = {}\n exc_cls = <class 'click.exceptions.ClickException'>\n \n     def abort(self,\n               msg: Optional[str] = None,\n               *args: Any,\n               exc: Any = None,\n               **kwargs: Any):\n         \"\"\"Prints an error and aborts execution.\n     \n         Print an error and throw an exception to terminate the program\n         (the exception will not print a message).\n         \"\"\"\n         if msg is not None:\n             self._error(msg, *args, _level_str=\"PANIC\", **kwargs)\n     \n         if exc is not None:\n             raise exc\n     \n         exc_cls = click.ClickException\n         if self.pretty:\n             exc_cls = SilentClickException\n >       raise exc_cls(\"Exiting due to cli_logger.abort()\")\n E       click.exceptions.ClickException: Exiting due to cli_logger.abort()\n \n d:\\a\\ray\\ray\\python\\ray\\autoscaler\\_private\\cli_logger.py:585: ClickException\n ---------------------------- Captured stderr call -----------------------------\n Exception in thread Thread-57:\n Traceback (most recent call last):\n   File \"C:\\hostedtoolcache\\windows\\Python\\3.7.9\\x64\\lib\\threading.py\", line 926, in _bootstrap_inner\n     self.run()\n   File \"d:\\a\\ray\\ray\\python\\ray\\autoscaler\\_private\\updater.py\", line 124, in run\n     self.do_update()\n   File \"d:\\a\\ray\\ray\\python\\ray\\autoscaler\\_private\\updater.py\", line 324, in do_update\n     self.rsync_up, step_numbers=(1, NUM_SETUP_STEPS))\n   File \"d:\\a\\ray\\ray\\python\\ray\\autoscaler\\_private\\updater.py\", line 210, in sync_file_mounts\n     do_sync(remote_path, local_path)\n   File \"d:\\a\\ray\\ray\\python\\ray\\autoscaler\\_private\\updater.py\", line 180, in do_sync\n     assert os.path.exists(local_path), local_path\n AssertionError: nul\n \n =========================== short test summary info ===========================\n FAILED ::AutoscalingTest::testDockerFileMountsRemoved - click.exceptions.Clic...\n ================== 1 failed, 35 passed, 6 skipped in 12.58s ===================\n Exception in thread Thread-156:\n Traceback (most recent call last):\n   File \"C:\\hostedtoolcache\\windows\\Python\\3.7.9\\x64\\lib\\threading.py\", line 926, in _bootstrap_inner\n     self.run()\n   File \"d:\\a\\ray\\ray\\python\\ray\\autoscaler\\_private\\updater.py\", line 124, in run\n     self.do_update()\n   File \"d:\\a\\ray\\ray\\python\\ray\\autoscaler\\_private\\updater.py\", line 379, in do_update\n     sync_run_yet=True)\n   File \"d:\\a\\ray\\ray\\python\\ray\\autoscaler\\_private\\command_runner.py\", line 801, in run_init\n     for env_var in json.loads(image_env):\n   File \"C:\\hostedtoolcache\\windows\\Python\\3.7.9\\x64\\lib\\json\\__init__.py\", line 348, in loads\n     return _default_decoder.decode(s)\n   File \"C:\\hostedtoolcache\\windows\\Python\\3.7.9\\x64\\lib\\json\\decoder.py\", line 337, in decode\n     obj, end = self.raw_decode(s, idx=_w(s, 0).end())\n   File \"C:\\hostedtoolcache\\windows\\Python\\3.7.9\\x64\\lib\\json\\decoder.py\", line 355, in raw_decode\n     raise JSONDecodeError(\"Expecting value\", s, err.value) from None\n json.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)\n </denchmark-code>\n \n <denchmark-link:https://github.com/ray-project/ray/runs/1647962851>https://github.com/ray-project/ray/runs/1647962851</denchmark-link>\n \n <denchmark-h:h3>Reproduction (REQUIRED)</denchmark-h>\n \n Please provide a short code snippet (less than 50 lines if possible) that can be copy-pasted to reproduce the issue. The snippet should have no external library dependencies (i.e., use fake or mock data / environments):\n If the code snippet cannot be run by itself, the issue will be closed with \"needs-repro-script\".\n \n  I have verified my script runs in a clean environment and reproduces the issue.\n  I have verified the issue also occurs with the latest wheels.\n \n \t"}, "comments": {}}, "commit": {"commit_id": "92963800f63c8fa7ec2aef0392a095a14cf1c155", "commit_author": "Ian Rodney", "commitT": "2021-01-05 16:48:32-08:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "python\\ray\\tests\\test_autoscaler.py", "file_new_name": "python\\ray\\tests\\test_autoscaler.py", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "548", "deleted_lines": null}}}}}}