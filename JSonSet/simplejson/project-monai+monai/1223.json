{"BR": {"BR_id": "1223", "BR_author": "Nic-Ma", "BRopenT": "2020-11-12T03:52:19Z", "BRcloseT": "2020-11-12T15:00:10Z", "BR_text": {"BRsummary": "Can't save classification result if \"info\" is empty in meta_data", "BRdescription": "\n \n A clear and concise description of what the bug is.\n Thanks <denchmark-link:https://github.com/madil90>@madil90</denchmark-link>\n  for raising this issue.\n Most of the PNG images don't have  field in the metadata, and we saved an empty {} in metadata.\n But PyTorch  can't collate a batch of {} into , just a :\n <denchmark-code>{'filename_or_obj': ['/workspace/data/CXR/PLCO/PLCO_256_original/AB02720121407113025_v2.png'], 'spatial_shape': [tensor([256]), tensor([256])], 'format': ['PNG'], 'mode': ['I'], 'width': tensor([256]), 'height': tensor([256]), 'info': {}}\n </denchmark-code>\n \n So we can't load meta_data correctly in ClassificationSaver handler with index i:\n <denchmark-code>  File \"/home/madil/dlmed/code/MONAI/monai/handlers/classification_saver.py\", line 82, in __call__\n     self.saver.save_batch(engine_output, meta_data)\n   File \"/home/madil/dlmed/code/MONAI/monai/data/csv_saver.py\", line 91, in save_batch\n     self.save(data, {k: meta_data[k][i] for k in meta_data} if meta_data else None)\n   File \"/home/madil/dlmed/code/MONAI/monai/data/csv_saver.py\", line 91, in <dictcomp>\n     self.save(data, {k: meta_data[k][i] for k in meta_data} if meta_data else None)\n KeyError: 0\n </denchmark-code>\n \n \t"}, "comments": {}}, "commit": {"commit_id": "c561521068c062e95c937ee2e94b9ce7b3275484", "commit_author": "Nic Ma", "commitT": "2020-11-12 15:00:09+00:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "monai\\data\\image_reader.py", "file_new_name": "monai\\data\\image_reader.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": null, "deleted_lines": "582", "method_info": {"method_name": "_get_meta_dict", "method_params": "self,img", "method_startline": "570", "method_endline": "583"}}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "monai\\transforms\\io\\array.py", "file_new_name": "monai\\transforms\\io\\array.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": null, "deleted_lines": "236", "method_info": {"method_name": "__call__", "method_params": "self,Path,Path", "method_startline": "211", "method_endline": "245"}}}}}}}