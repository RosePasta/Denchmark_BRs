{"BR": {"BR_id": "546", "BR_author": "oldMarcosVillacanas", "BRopenT": "2020-06-12T07:51:37Z", "BRcloseT": "2020-06-12T12:06:11Z", "BR_text": {"BRsummary": "Classification_3d densenet_training_array example bug", "BRdescription": "\n Describe the bug\n When trying to run Classification_3d densenet_training_array example, Run-Time Exception is thrown because of data type conflict. Torch target attribute, which corresponds to Tensor, is expected to be of type Long, but it is Int.\n To Reproduce\n Steps to reproduce the behavior:\n \n Get the data used in this example from https://brain-development.org/ixi-dataset/\n Save it in the root of the project with this structure workspace\\data\\medical\\ixi\\IXI-T1\\xx.gz\n Run the example\n \n Expected behavior\n There should be five epochs training process, but the execution is stopped due to this Run-Time Exception.\n \n <denchmark-link:https://user-images.githubusercontent.com/48330663/84478413-8d5ae080-ac91-11ea-8c2d-02b8c5df21ed.png></denchmark-link>\n \n Environment\n \n Windows 10\n Python version 3.7.5\n MONAI version 0.1.0 Commit 01e4457 (06/11/2020)\n Pytorch version: 1.5.0+cu101\n GPU NVIDIA GeForce MX150\n \n \n This error can be fixed by altering functional.py inside torch package, changing:\n <denchmark-link:https://user-images.githubusercontent.com/48330663/84478589-e296f200-ac91-11ea-83b2-0332b0da98de.png></denchmark-link>\n \n to:\n <denchmark-link:https://user-images.githubusercontent.com/48330663/84478712-08bc9200-ac92-11ea-8aa7-c9bbab574b9f.png></denchmark-link>\n \n So that the Int is cast to Long.\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "oldMarcosVillacanas", "commentT": "2020-06-12T10:37:23Z", "comment_text": "\n \t\tHi <denchmark-link:https://github.com/MarcosVillacanas>@MarcosVillacanas</denchmark-link>\n  ,\n Thanks for your bug report.\n I think this issue may be caused by different default data type on windows and ubuntu.\n So I committed a PR <denchmark-link:https://github.com/Project-MONAI/MONAI/pull/547>#547</denchmark-link>\n  to fix the label data type to .\n Could you please help checkout the repo and branch of above PR to verify again?\n Thanks.\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "oldMarcosVillacanas", "commentT": "2020-06-12T11:45:36Z", "comment_text": "\n \t\tI have already checked your PR changes, works fine!\n The bug is fixed :)\n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "oldMarcosVillacanas", "commentT": "2020-06-12T11:46:59Z", "comment_text": "\n \t\tCool!\n \t\t"}}}, "commit": {"commit_id": "bafd3613ebde3c02ddf81620d0882dd37d055f03", "commit_author": "Nic Ma", "commitT": "2020-06-12 13:34:03+01:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "examples\\classification_3d\\densenet_evaluation_array.py", "file_new_name": "examples\\classification_3d\\densenet_evaluation_array.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "41", "deleted_lines": "41", "method_info": {"method_name": "main", "method_params": "", "method_startline": "23", "method_endline": "70"}}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "examples\\classification_3d\\densenet_evaluation_dict.py", "file_new_name": "examples\\classification_3d\\densenet_evaluation_dict.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "41", "deleted_lines": "41", "method_info": {"method_name": "main", "method_params": "", "method_startline": "23", "method_endline": "78"}}}}, "file_2": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "examples\\classification_3d\\densenet_training_array.py", "file_new_name": "examples\\classification_3d\\densenet_training_array.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "52", "deleted_lines": "52", "method_info": {"method_name": "main", "method_params": "", "method_startline": "24", "method_endline": "132"}}}}, "file_3": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "examples\\classification_3d\\densenet_training_dict.py", "file_new_name": "examples\\classification_3d\\densenet_training_dict.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "52", "deleted_lines": "52", "method_info": {"method_name": "main", "method_params": "", "method_startline": "24", "method_endline": "148"}}}}, "file_4": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "examples\\classification_3d_ignite\\densenet_evaluation_array.py", "file_new_name": "examples\\classification_3d_ignite\\densenet_evaluation_array.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "44", "deleted_lines": "44", "method_info": {"method_name": "main", "method_params": "", "method_startline": "26", "method_endline": "87"}}}}, "file_5": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "examples\\classification_3d_ignite\\densenet_evaluation_dict.py", "file_new_name": "examples\\classification_3d_ignite\\densenet_evaluation_dict.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "43", "deleted_lines": "43", "method_info": {"method_name": "main", "method_params": "", "method_startline": "25", "method_endline": "95"}}}}, "file_6": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "examples\\classification_3d_ignite\\densenet_training_array.py", "file_new_name": "examples\\classification_3d_ignite\\densenet_training_array.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "55", "deleted_lines": "55", "method_info": {"method_name": "main", "method_params": "", "method_startline": "27", "method_endline": "137"}}}}, "file_7": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "examples\\classification_3d_ignite\\densenet_training_dict.py", "file_new_name": "examples\\classification_3d_ignite\\densenet_training_dict.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "54", "deleted_lines": "54", "method_info": {"method_name": "main", "method_params": "", "method_startline": "26", "method_endline": "159"}}}}}}}