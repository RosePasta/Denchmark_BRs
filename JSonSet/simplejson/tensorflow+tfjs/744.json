{"BR": {"BR_id": "744", "BR_author": "Aryanr64x", "BRopenT": "2018-09-29T12:31:10Z", "BRcloseT": "2018-10-04T17:27:51Z", "BR_text": {"BRsummary": "The tf.loadModel()  does not works for tensorflow keras models", "BRdescription": "\n I am using tensorflow js to load a model from keras following <denchmark-link:https://js.tensorflow.org/tutorials/import-keras.html>This Guideline</denchmark-link>\n  However on this line of code\n const model = await tf.loadModel('https://foo.bar/tfjs_artifacts/model.json');\n I am getting the error\n Error: Sequential.fromConfig called without an array of configs\n at new t (app.js:26972)\n at t.fromConfig (app.js:26972)\n at deserializeKerasObject (app.js:26972)\n at deserialize (app.js:26972)\n at app.js:26972\n at app.js:26972\n at Object.next (app.js:26972)\n at o (app.js:26972)\n I think this happens only with keras model  .\n Note:I have enabled cors in my server so I don't think its a problem related to my server . I am using a localhost(Not the one mentioned in guideline) Also as mentioned in the docs I have used\n tfjs.keras.converters.save_keras_model() in the python side\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "Aryanr64x", "commentT": "2018-09-30T17:20:43Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/Aryanr64x>@Aryanr64x</denchmark-link>\n  I suspect this has to do with the recent changes in tensorflow keras. Can you please\n \n share the content of the model.json file that you are using\n let us know what version of tensorflow you are using\n \n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "Aryanr64x", "commentT": "2018-10-03T08:21:21Z", "comment_text": "\n \t\tHere is my model.json\n {\"modelTopology\": {\"keras_version\": \"2.1.6-tf\", \"backend\": \"tensorflow\", \"model_config\": {\"class_name\": \"Sequential\", \"config\": {\"name\": \"sequential\", \"layers\": [{\"class_name\": \"Dense\", \"config\": {\"name\": \"dense\", \"trainable\": true, \"batch_input_shape\": [null, 12], \"dtype\": \"float32\", \"units\": 10, \"activation\": \"sigmoid\", \"use_bias\": true, \"kernel_initializer\": {\"class_name\": \"GlorotUniform\", \"config\": {\"seed\": null, \"dtype\": \"float32\"}}, \"bias_initializer\": {\"class_name\": \"Zeros\", \"config\": {\"dtype\": \"float32\"}}, \"kernel_regularizer\": null, \"bias_regularizer\": null, \"activity_regularizer\": null, \"kernel_constraint\": null, \"bias_constraint\": null}}, {\"class_name\": \"Dense\", \"config\": {\"name\": \"dense_1\", \"trainable\": true, \"dtype\": \"float32\", \"units\": 10, \"activation\": \"sigmoid\", \"use_bias\": true, \"kernel_initializer\": {\"class_name\": \"GlorotUniform\", \"config\": {\"seed\": null, \"dtype\": \"float32\"}}, \"bias_initializer\": {\"class_name\": \"Zeros\", \"config\": {\"dtype\": \"float32\"}}, \"kernel_regularizer\": null, \"bias_regularizer\": null, \"activity_regularizer\": null, \"kernel_constraint\": null, \"bias_constraint\": null}}, {\"class_name\": \"Dense\", \"config\": {\"name\": \"dense_2\", \"trainable\": true, \"dtype\": \"float32\", \"units\": 1, \"activation\": \"sigmoid\", \"use_bias\": true, \"kernel_initializer\": {\"class_name\": \"GlorotUniform\", \"config\": {\"seed\": null, \"dtype\": \"float32\"}}, \"bias_initializer\": {\"class_name\": \"Zeros\", \"config\": {\"dtype\": \"float32\"}}, \"kernel_regularizer\": null, \"bias_regularizer\": null, \"activity_regularizer\": null, \"kernel_constraint\": null, \"bias_constraint\": null}}]}}, \"training_config\": {\"optimizer_config\": {\"class_name\": \"SGD\", \"config\": {\"lr\": 0.009999999776482582, \"momentum\": 0.0, \"decay\": 0.0, \"nesterov\": false}}, \"loss\": \"mean_squared_error\", \"metrics\": [], \"weighted_metrics\": null, \"sample_weight_mode\": null, \"loss_weights\": null}}, \"weightsManifest\": [{\"paths\": [\"group1-shard1of1\"], \"weights\": [{\"name\": \"dense/kernel\", \"shape\": [12, 10], \"dtype\": \"float32\"}, {\"name\": \"dense/bias\", \"shape\": [10], \"dtype\": \"float32\"}, {\"name\": \"dense_1/kernel\", \"shape\": [10, 10], \"dtype\": \"float32\"}, {\"name\": \"dense_1/bias\", \"shape\": [10], \"dtype\": \"float32\"}, {\"name\": \"dense_2/kernel\", \"shape\": [10, 1], \"dtype\": \"float32\"}, {\"name\": \"dense_2/bias\", \"shape\": [1], \"dtype\": \"float32\"}]}]}\n I was using tensorflow r1.10\n <denchmark-link:https://github.com/caisq>@caisq</denchmark-link>\n \n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "Aryanr64x", "commentT": "2018-10-11T06:20:51Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/caisq>@caisq</denchmark-link>\n , when can we expect this fix to be released? And what's a workaround in the meantime? Downgrading?\n \t\t"}, "comments_3": {"comment_id": 4, "comment_author": "Aryanr64x", "commentT": "2018-10-11T13:25:54Z", "comment_text": "\n \t\tWe are aiming to release a new version of <denchmark-link:https://github.com/orgs/tensorflow/teams/tfjs>@tensorflow/tfjs</denchmark-link>\n  with the fix to this issue sometime this week or early next week.\n \t\t"}, "comments_4": {"comment_id": 5, "comment_author": "Aryanr64x", "commentT": "2018-10-15T16:08:52Z", "comment_text": "\n \t\tJust want to point out here that although <denchmark-link:https://github.com/tensorflow/tfjs-layers/pull/332>tensorflow/tfjs-layers#332</denchmark-link>\n  now allows reading the new format produced by TF 1.11 (Sequential config is a dict containing a 'layers' array), we are still  the old format (Sequential config is itself the layers array).\n At some point we should consider whether Sequential.getConfig() should also write the new format (ideally as part of a clear version compatibility story).\n \t\t"}, "comments_5": {"comment_id": 6, "comment_author": "Aryanr64x", "commentT": "2018-11-26T18:41:35Z", "comment_text": "\n \t\tHi, I still get an error on tf.loadModel(MODEL_URL):\n \n Unhandled Promise Rejection: Error: Sequential.fromConfig called without an array of configs\n \n I have upgraded to the latest versions of Keras and tfjs. Am I missing anything? Thanks\n \t\t"}, "comments_6": {"comment_id": 7, "comment_author": "Aryanr64x", "commentT": "2018-11-26T19:01:53Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/cbasavaraj>@cbasavaraj</denchmark-link>\n  What version of tensorflow.js are you using? If it is the latest version, can you provide your model.json for us to reproduce your error?\n \t\t"}, "comments_7": {"comment_id": 8, "comment_author": "Aryanr64x", "commentT": "2018-11-26T22:05:18Z", "comment_text": "\n \t\tHi, I am using tfjs 0.6.7. How do I share the model.json with you? It has 5k lines, but quite a simple model, a MobileNet classifier. Can I email it to you?\n \t\t"}, "comments_8": {"comment_id": 9, "comment_author": "Aryanr64x", "commentT": "2018-11-26T22:06:34Z", "comment_text": "\n \t\tThat is a very old version of tfjs, the newest is 0.13.5.\n \t\t"}, "comments_9": {"comment_id": 10, "comment_author": "Aryanr64x", "commentT": "2018-11-26T22:08:16Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/cbasavaraj>@cbasavaraj</denchmark-link>\n  0.6.7 seems to be the version of the tensorflowjs  package you are using. What is the version of the TensorFlow.js  library you are using? You can find that out by something like .\n To share the file, maybe you can drag and drop a zip file into GitHub comment boxes.\n \t\t"}, "comments_10": {"comment_id": 11, "comment_author": "Aryanr64x", "commentT": "2018-11-26T23:24:19Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/caisq>@caisq</denchmark-link>\n  I did  as you suggested: I get\n \n Uploading the zip file here.\n <denchmark-link:https://github.com/tensorflow/tfjs/files/2617663/model.json.zip>model.json.zip</denchmark-link>\n \n Thanks for your help!\n \t\t"}, "comments_11": {"comment_id": 12, "comment_author": "Aryanr64x", "commentT": "2018-11-27T21:10:56Z", "comment_text": "\n \t\tHi <denchmark-link:https://github.com/caisq>@caisq</denchmark-link>\n , were you able to look at this again? I really need to fix this for a client, and can't find many other references to this issue on the Internet. Thanks\n \t\t"}, "comments_12": {"comment_id": 13, "comment_author": "Aryanr64x", "commentT": "2018-11-27T21:12:52Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/cbasavaraj>@cbasavaraj</denchmark-link>\n  So you are using tfjs version 0.12.5, which is old. Can you use the latest version (0.13.5) which should have incorporated the fix to this known issue?\n \t\t"}, "comments_13": {"comment_id": 14, "comment_author": "Aryanr64x", "commentT": "2018-11-27T21:21:22Z", "comment_text": "\n \t\tI did pip install --upgrade tensorflowjs which gives me 0.6.7 for the python package. I built tensorflow from source (as I am using CUDA 9.1 on Ubuntu). How do I upgrade the JavaScript library? Thanks!\n \t\t"}, "comments_14": {"comment_id": 15, "comment_author": "Aryanr64x", "commentT": "2018-11-27T21:24:02Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/cbasavaraj>@cbasavaraj</denchmark-link>\n  The thread we are having here is going off-topic for this GitHub issue. Can we follow-up at this discussion board? <denchmark-link:https://groups.google.com/a/tensorflow.org/forum/#!forum/tfjs>https://groups.google.com/a/tensorflow.org/forum/#!forum/tfjs</denchmark-link>\n \n If you can post your question there, along with information on how you are using the JS part of TensorFlow.js currently (through script src? througn npm?), I'll be happy to continue helping you there.\n \t\t"}, "comments_15": {"comment_id": 16, "comment_author": "Aryanr64x", "commentT": "2018-11-27T21:29:10Z", "comment_text": "\n \t\tOk! Posted on the group: <denchmark-link:https://groups.google.com/a/tensorflow.org/forum/#!topic/tfjs/FxyXLBJAwvU>https://groups.google.com/a/tensorflow.org/forum/#!topic/tfjs/FxyXLBJAwvU</denchmark-link>\n \n \t\t"}}}, "commit": {"commit_id": "ee4416863473fc951681a37dbccd207347b79db9", "commit_author": "Shanqing Cai", "commitT": "2018-10-04 13:27:50-04:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "src\\models.ts", "file_new_name": "src\\models.ts", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "13,24,824,825,826,827,828,829,830,831,832,833,834,835,836,837,838,839,840,841,842,844,847,848", "deleted_lines": "13,24,824,826,829,830,831,832,833,834,835,836"}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "src\\models_test.ts", "file_new_name": "src\\models_test.ts", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "493,494,495,496,497,498,499,500,501,502,503,504,505,506,507,508,509,510,511,512,513,514,515,516,517,518,519,520,521,522,523,524,525,526,527,528,529,530,531,532,533,534,535,536,537", "deleted_lines": null, "method_info": {"method_name": "(anonymous)", "method_params": "", "method_startline": "362", "method_endline": "538"}}}}}}}