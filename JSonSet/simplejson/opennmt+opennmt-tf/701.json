{"BR": {"BR_id": "701", "BR_author": "lockder", "BRopenT": "2020-07-06T15:36:48Z", "BRcloseT": "2020-07-06T16:05:57Z", "BR_text": {"BRsummary": "Bug with multiple source files and data_dir configuration", "BRdescription": "\n Sample When you add the export_vocabulary_assets with multiple files\n <denchmark-code>model_dir: model\n \n data:\n   # (optional) During export save the vocabularies as model assets, otherwise embed\n   # them in the graph itself (default: True).\n   export_vocabulary_assets: true\n \n   train_features_file:\n     - train/src.txt\n     - train/ner.txt\n </denchmark-code>\n \n the crash:\n <denchmark-code>  File \"/usr/local/lib/python3.6/dist-packages/opennmt/bin/main.py\", line 200, in main\n     config[\"data\"] = _prefix_paths(args.data_dir, config[\"data\"])\n   File \"/usr/local/lib/python3.6/dist-packages/opennmt/bin/main.py\", line 42, in _prefix_paths\n     paths[key] = _prefix_paths(prefix, path)\n   File \"/usr/local/lib/python3.6/dist-packages/opennmt/bin/main.py\", line 50, in _prefix_paths\n     new_path = os.path.join(prefix, path)\n   File \"/usr/lib/python3.6/posixpath.py\", line 94, in join\n     genericpath._check_arg_types('join', a, *p)\n   File \"/usr/lib/python3.6/genericpath.py\", line 149, in _check_arg_types\n     (funcname, s.__class__.__name__)) from None\n TypeError: join() argument must be str or bytes, not 'bool'\n </denchmark-code>\n \n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "lockder", "commentT": "2020-07-06T15:41:00Z", "comment_text": "\n \t\tThis is also giving me issues with the data_dir config. I guess is trying to update the path of the files inside \"data:\"\n but on the sample in the web all this keys are inside the \"data:\" key\n <denchmark-code># (optional) Pretrained embedding configuration.\n   source_embedding:\n     path: data/glove/glove-100000.txt\n     with_header: True\n     case_insensitive: True\n     trainable: False\n </denchmark-code>\n \n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "lockder", "commentT": "2020-07-06T16:06:27Z", "comment_text": "\n \t\tThanks for reporting. It crashed whenever there was a non string value in the data block.\n \t\t"}}}, "commit": {"commit_id": "441481326c3c278ff49b18a75cb4e504c319d24f", "commit_author": "Guillaume Klein", "commitT": "2020-07-06 18:05:56+02:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "opennmt\\bin\\main.py", "file_new_name": "opennmt\\bin\\main.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "48,55,56", "deleted_lines": "48", "method_info": {"method_name": "_prefix_paths", "method_params": "prefix,paths", "method_startline": "30", "method_endline": "56"}}}}}}}