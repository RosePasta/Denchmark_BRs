{"BR": {"BR_id": "576", "BR_author": "hseelawi", "BRopenT": "2019-12-15T17:51:26Z", "BRcloseT": "2019-12-16T08:42:37Z", "BR_text": {"BRsummary": "Bug in \"onmt-ark-to-records\" code", "BRdescription": "\n I have found a small bug in the code line referenced below. It causes the script to terminate with a TypeError: data type not understood. Just for the sake of completeness, this is caused by the fact that numpy doesn't understand the object tf.float32. I changed that to float and it worked as it was supposed to. I can create a PR for this, but I suppose it is too trivial to do so and claim a contribution, unless you want me to.\n \n \n \n OpenNMT-tf/opennmt/bin/ark_to_records.py\n \n \n          Line 46\n       in\n       5809c29\n \n \n \n \n \n \n  return idx, np.asarray(vector, dtype=tf.float32) \n \n \n \n \n \n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "hseelawi", "commentT": "2019-12-16T08:39:21Z", "comment_text": "\n \t\tThanks for reporting. The change referenced above should fix this.\n \t\t"}}}, "commit": {"commit_id": "56a029819fd7aad5d8217ef7adb8b0bc81381910", "commit_author": "Guillaume Klein", "commitT": "2019-12-16 09:55:54+01:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "opennmt\\bin\\ark_to_records.py", "file_new_name": "opennmt\\bin\\ark_to_records.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "46", "deleted_lines": "46", "method_info": {"method_name": "consume_next_vector", "method_params": "ark_file", "method_startline": "14", "method_endline": "46"}}}}}}}