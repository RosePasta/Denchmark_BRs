{"BR": {"BR_id": "542", "BR_author": "guillaumekln", "BRopenT": "2019-11-07T10:39:42Z", "BRcloseT": "2019-11-07T12:43:45Z", "BR_text": {"BRsummary": "experimental_distribute_dataset does not always split the batches", "BRdescription": "\n In <denchmark-link:https://github.com/OpenNMT/OpenNMT-tf/commit/4f8189b7a84c23f1fdd33db67a1e25579065d042>4f8189b</denchmark-link>\n , we scaled the batch size by the number of devices based on  documentation:\n \n We will assume that the input dataset is batched by the global batch size\n \n However, the method does not always split the input batches. This was at least found when using batch_type: tokens even though the first dimension is divisible by the number of replicas.\n \t"}, "comments": {}}, "commit": {"commit_id": "bbf48f4ca8ffd2804b36019f217d07e3704a560e", "commit_author": "Guillaume Klein", "commitT": "2019-11-07 13:43:44+01:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "opennmt\\runner.py", "file_new_name": "opennmt\\runner.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": null, "deleted_lines": "158", "method_info": {"method_name": "train", "method_params": "self,num_devices,with_eval,checkpoint_path", "method_startline": "127", "method_endline": "203"}}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "opennmt\\training.py", "file_new_name": "opennmt\\training.py", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "70,71,72,73,74,75,76", "deleted_lines": "70"}}}}}}