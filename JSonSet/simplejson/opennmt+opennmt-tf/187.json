{"BR": {"BR_id": "187", "BR_author": "lockder", "BRopenT": "2018-07-30T16:16:21Z", "BRcloseT": "2018-07-31T09:02:52Z", "BR_text": {"BRsummary": "Crash loading parallel inputs with --data_dir", "BRdescription": "\n I found the next issue if I follow the tutorial and try to do\n data:\n train_features_file:\n - train_source_1.records\n - train_source_2.txt\n - train_source_3.txt\n in main.py at the method _prefix_paths\n new_path = os.path.join(prefix, path)\n will crash because paths is a list and join can't be done on a list.\n The fix should be just check the instance type at paths and iterate\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "lockder", "commentT": "2018-07-30T16:26:19Z", "comment_text": "\n \t\tThanks for reporting. As you identified the fix, do you want to send a PR?\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "lockder", "commentT": "2018-07-30T16:42:16Z", "comment_text": "\n \t\tSure, tomorrow i will be back to the office and i can send it to you if you tell me how to do it\n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "lockder", "commentT": "2018-07-31T07:39:19Z", "comment_text": "\n \t\tnot sure how to send you the code.\n its just substitute inside main.py\n _prefix_paths with this method\n <denchmark-code>def _prefix_paths(prefix, paths):\n   \"\"\"Recursively prefix paths.\n \n   Args:\n     prefix: The prefix to apply.\n     data: A dict of relative paths.\n \n   Returns:\n     The updated dict.\n   \"\"\"\n   if isinstance(paths, dict):\n     for key, path in six.iteritems(paths):\n       paths[key] = _prefix_paths(prefix, path)\n     return paths\n   elif isinstance(paths, list):\n       fixedPaths = list()\n \n       for path in paths:\n         fixedPaths.append(_prefix_paths(prefix,path))\n \n       return fixedPaths\n   else:\n     path = paths\n     new_path = os.path.join(prefix, path)\n     if os.path.isfile(new_path):\n       return new_path\n     else:\n       return path\n </denchmark-code>\n \n \t\t"}, "comments_3": {"comment_id": 4, "comment_author": "lockder", "commentT": "2018-07-31T08:45:50Z", "comment_text": "\n \t\tI will fix it. Note that it only happens when you use the --data_dir command line option.\n \t\t"}}}, "commit": {"commit_id": "c293e928e83817aad19fee301a17940651992326", "commit_author": "Guillaume Klein", "commitT": "2018-07-31 11:02:51+02:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "CHANGELOG.md", "file_new_name": "CHANGELOG.md", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "19,20", "deleted_lines": null}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "opennmt\\bin\\main.py", "file_new_name": "opennmt\\bin\\main.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "30,31,32,33", "deleted_lines": null, "method_info": {"method_name": "_prefix_paths", "method_params": "prefix,paths", "method_startline": "16", "method_endline": "40"}}}}}}}