{"BR": {"BR_id": "12249", "BR_author": "ngc92", "BRopenT": "2017-08-13T12:49:10Z", "BRcloseT": "2017-12-11T18:00:03Z", "BR_text": {"BRsummary": "tf.estimator.Estimator breaks when using python 3.5 type annotations", "BRdescription": "\n Minimal example:\n <denchmark-code>import tensorflow as tf\n \n def model_fn(features: dict, labels: tf.Tensor, mode: str):\n     pass\n \n estimator = tf.estimator.Estimator(model_fn)\n </denchmark-code>\n \n results in\n <denchmark-code>File \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/estimator/estimator.py\", line 173, in __init__\n     _verify_model_fn_args(model_fn, params)\n   File \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/estimator/estimator.py\", line 742, in _verify_model_fn_args\n     args = set(_model_fn_args(model_fn))\n   File \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/estimator/estimator.py\", line 737, in _model_fn_args\n     return tuple(tf_inspect.getargspec(fn).args)\n   File \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/util/tf_inspect.py\", line 45, in getargspec\n     if d.decorator_argspec is not None), _inspect.getargspec(target))\n   File \"/usr/lib/python3.5/inspect.py\", line 1045, in getargspec\n     raise ValueError(\"Function has keyword-only arguments or annotations\"\n ValueError: Function has keyword-only arguments or annotations, use getfullargspec() API which can support them\n </denchmark-code>\n \n <denchmark-h:h3>System information</denchmark-h>\n \n \n OS Platform and Distribution: Linux Mint 17.2\n TensorFlow version: v1.2.0-0-g12f033d 1.2.0\n Python version: 3.5\n \n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "ngc92", "commentT": "2017-08-14T15:17:04Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/martinwicke>@martinwicke</denchmark-link>\n  can you comment or redirect? Thanks.\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "ngc92", "commentT": "2017-08-14T16:46:52Z", "comment_text": "\n \t\tYes, we're using getargspec, which doesn't support type annotations. This is worthwhile to fix. If someone wants to take it on, the code should be relatively isolated in a single function which is checking arguments.\n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "ngc92", "commentT": "2017-08-14T19:08:12Z", "comment_text": "\n \t\tAdded a PR <denchmark-link:https://github.com/tensorflow/tensorflow/pull/12276>#12276</denchmark-link>\n  for this issue.\n \t\t"}}}, "commit": {"commit_id": "93a652ef5b635ffbd678d3992767c4862bffeb15", "commit_author": "Yong Tang", "commitT": "2017-12-11 10:00:02-08:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "tensorflow\\python\\estimator\\util.py", "file_new_name": "tensorflow\\python\\estimator\\util.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "55", "deleted_lines": "55", "method_info": {"method_name": "fn_args", "method_params": "fn", "method_startline": "36", "method_endline": "58"}}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "tensorflow\\python\\util\\tf_inspect.py", "file_new_name": "tensorflow\\python\\util\\tf_inspect.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65", "deleted_lines": null, "method_info": {"method_name": "getfullargspec", "method_params": "obj", "method_startline": "48", "method_endline": "65"}}}}}}}