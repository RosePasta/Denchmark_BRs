{"BR": {"BR_id": "26099", "BR_author": "elmirador", "BRopenT": "2019-02-25T19:20:13Z", "BRcloseT": "2019-04-23T04:42:21Z", "BR_text": {"BRsummary": "tf.one_hot crashes when indices is tf.uint8", "BRdescription": "\n Please make sure that this is a bug. As per our GitHub Policy, we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template\n System information\n \n Have I written custom code (as opposed to using a stock example script provided in TensorFlow):\n Yes.\n OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Ubuntu 16.04 / Windows 7\n TensorFlow installed from (source or binary): Official pip source (tensorflow-gpu)\n TensorFlow version (use command below): 1.12.0\n Python version: 3.6\n CUDA/cuDNN version: 9.0 / 7.5\n GPU model and memory: 1080Ti / 12GB\n \n Describe the current behavior\n tf.one_hot crashes when the indices tensor has dtype=tf.uint8\n The error message shows Check failed: new_num_elements == NumElements()\n \n <denchmark-link:https://gist.github.com/elmirador/4fc5148e5044478d668237209d265eac>https://gist.github.com/elmirador/4fc5148e5044478d668237209d265eac</denchmark-link>\n \n Other info / logs\n I've also tested under TF 1.4.1 and TF 1.10.0 (both on GPU) on different machines, both have the same problem.\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "elmirador", "commentT": "2019-03-01T07:11:31Z", "comment_text": "\n \t\tHello, I am new to the tensorflow community and which going thorugh the code I couldn't find gen_array_ops. If possible I would like to contribute to the issue.\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "elmirador", "commentT": "2019-03-01T07:53:24Z", "comment_text": "\n \t\t\n Hello, I am new to the tensorflow community and which going thorugh the code I couldn't find gen_array_ops. If possible I would like to contribute to the issue.\n \n gen_array_ops.py is located under tensorflow/python/ops/.\n You can't find it on github because gen_array_ops is generated during building.\n Basically it's a wrapper around the underlying C++ code of tensorflow. If you're interested, the C++ code of one_hot ops is located at tensorflow/core/kernels/one_hot_op.cc.\n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "elmirador", "commentT": "2019-04-23T00:01:30Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/bono1567>@bono1567</denchmark-link>\n  Don't know if you had a chance to look into it and thank you for your interest!\n Since you haven't posted an update for a while and I just looked into it, I will submit a fix now.\n \t\t"}, "comments_3": {"comment_id": 4, "comment_author": "elmirador", "commentT": "2019-04-23T04:42:22Z", "comment_text": "\n \t\tAre you satisfied with the resolution of your issue?\n <denchmark-link:https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=Yes&entry.2137816233=26099>Yes</denchmark-link>\n \n <denchmark-link:https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=No&entry.2137816233=26099>No</denchmark-link>\n \n \t\t"}}}, "commit": {"commit_id": "a311216a9f028eec9e6b0d2ef175f5d46dff19b7", "commit_author": "Anna R", "commitT": "2019-04-22 21:30:30-07:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "tensorflow\\core\\kernels\\one_hot_op.cc", "file_new_name": "tensorflow\\core\\kernels\\one_hot_op.cc", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "106", "deleted_lines": "106", "method_info": {"method_name": "tensorflow::OneHotOp::Compute", "method_params": "ctx", "method_startline": "50", "method_endline": "120"}}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "tensorflow\\python\\kernel_tests\\one_hot_op_test.py", "file_new_name": "tensorflow\\python\\kernel_tests\\one_hot_op_test.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "423,424,425,426,427,428", "deleted_lines": null, "method_info": {"method_name": "testOneHotUint8WithLargeArray", "method_params": "self", "method_startline": "423", "method_endline": "428"}}}}}}}