{"BR": {"BR_id": "4084", "BR_author": "LaurentMazare", "BRopenT": "2016-08-28T20:58:19Z", "BRcloseT": "2016-09-06T18:19:04Z", "BR_text": {"BRsummary": "Process hanging when using TF_SessionRun with multiple times the same input", "BRdescription": "\n It seems that if the same input appears multiple times in the inputs argument of TF_SessionRun (from c_api.h) then the TF_SessionRun call never returns.\n This issue can be reproduced by modifying c_api_test.cc and replacing the line:\n csession.SetInputs({{feed, Int32Tensor(3)}});\n With:\n csession.SetInputs({{feed, Int32Tensor(3)}, {feed, Int32Tensor(3)}});\n According to gdb, the process is waiting for a mutex in the RunState destructor from DirectSession.\n <denchmark-h:h3>What related GitHub issues or StackOverflow threads have you found by searching the web for your problem?</denchmark-h>\n \n none\n <denchmark-h:h3>Environment info</denchmark-h>\n \n Operating System: Linux 4.4\n Installed version of CUDA and cuDNN: none\n If installed from source, provide\n \n The commit hash (git rev-parse HEAD)\n 008bcae\n The output of bazel version\n Build label: 0.3.1\n Build target: bazel-out/local-fastbuild/bin/src/main/java/com/google/devtools/build/lib/bazel/BazelServer_deploy.jar\n Build time: Fri Jul 29 09:09:52 2016 (1469783392)\n Build timestamp: 1469783392\n Build timestamp as int: 1469783392\n \n <denchmark-h:h3>If possible, provide a minimal reproducible example (We usually don't have time to read hundreds of lines of your code)</denchmark-h>\n \n See above.\n <denchmark-h:h3>What other attempted solutions have you tried?</denchmark-h>\n \n <denchmark-h:h3>Logs or other output that would be helpful</denchmark-h>\n \n (If logs are large, please upload as attachment or provide link).\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "LaurentMazare", "commentT": "2016-08-30T22:12:43Z", "comment_text": "\n \t\tThanks for the report.\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "LaurentMazare", "commentT": "2016-08-31T18:31:43Z", "comment_text": "\n \t\tIn general the C API is unforgiving when it comes to usage, but this should be an easy and cheap piece of validation code to add.\n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "LaurentMazare", "commentT": "2016-08-31T22:35:54Z", "comment_text": "\n \t\tRunning tests now... it should appear after the next push.\n \t\t"}}}, "commit": {"commit_id": "c35e69c56941d79163dc9f054f57c199b1a4cc44", "commit_author": "Derek Murray", "commitT": "2016-08-31 17:31:15-07:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "tensorflow\\core\\common_runtime\\direct_session_test.cc", "file_new_name": "tensorflow\\core\\common_runtime\\direct_session_test.cc", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "400,401,402,403,404,405,406,407", "deleted_lines": null, "method_info": {"method_name": "tensorflow::TEST", "method_params": "DirectSessionTest,MultipleFeedTest", "method_startline": "337", "method_endline": "408"}}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "tensorflow\\core\\graph\\subgraph.cc", "file_new_name": "tensorflow\\core\\graph\\subgraph.cc", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "238,239,240,241,242,243,244,245,246", "deleted_lines": "238", "method_info": {"method_name": "tensorflow::subgraph::RewriteGraphForExecution", "method_params": "g,fed_outputs,fetch_outputs,target_node_names,device_info", "method_startline": "228", "method_endline": "282"}}}}}}}