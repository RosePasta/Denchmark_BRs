{"BR": {"BR_id": "26502", "BR_author": "ctrysbita", "BRopenT": "2019-03-09T04:14:05Z", "BRcloseT": "2019-04-20T07:00:39Z", "BR_text": {"BRsummary": "IDE cannot resolve module tf.keras", "BRdescription": "\n System information\n \n Have I written custom code (as opposed to using a stock example script provided in TensorFlow):\n No.\n OS Platform and Distribution (e.g., Linux Ubuntu 16.04):\n Linux Ubuntu 18.10\n TensorFlow installed from (source or binary):\n binary (pip)\n TensorFlow version (use command below):\n 2.0_alpha\n Python version:\n 3.6\n \n Describe the current behavior\n import tensorflow as tf\n then pyCharm cannot resolve module tf.keras and report an error:\n Cannot find reference 'keras' in '__init__.py'\n But when running program, everything works well.\n Describe the expected behavior\n tf.keras imported successfully with autocomplete of pyCharm.\n Code to reproduce the issue\n import tensorflow as tf\n Other info / logs\n It seems that there is no import command for keras module in __init_.py of tensorflow package.\n When I added from tensorflow.python import keras to __init__.pymanually, everything work well.\n Maybe there are some problem for package importing after keras was moved from _api to python.\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "ctrysbita", "commentT": "2019-03-14T17:34:07Z", "comment_text": "\n \t\t<denchmark-link:https://stackoverflow.com/a/47306203/6108843>https://stackoverflow.com/a/47306203/6108843</denchmark-link>\n \n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "ctrysbita", "commentT": "2019-03-14T17:55:09Z", "comment_text": "\n \t\tNot very familiar with how these modules work. <denchmark-link:https://github.com/annarev>@annarev</denchmark-link>\n  would you know what's up?\n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "ctrysbita", "commentT": "2019-03-15T12:04:10Z", "comment_text": "\n \t\t<denchmark-link:https://intellij-support.jetbrains.com/hc/en-us/community/posts/360002486739/comments/360000407199>https://intellij-support.jetbrains.com/hc/en-us/community/posts/360002486739/comments/360000407199</denchmark-link>\n \n \t\t"}, "comments_3": {"comment_id": 4, "comment_author": "ctrysbita", "commentT": "2019-03-16T05:12:53Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/knaydenov>@knaydenov</denchmark-link>\n  none of your solutions is pythonic. It should work like <denchmark-link:https://github.com/tensorflow>@tensorflow</denchmark-link>\n  import keras in its examples.\n \t\t"}, "comments_4": {"comment_id": 5, "comment_author": "ctrysbita", "commentT": "2019-03-16T05:14:50Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/annarev>@annarev</denchmark-link>\n  any solution to this issue? any commit for the next dev or stable release?\n \t\t"}, "comments_5": {"comment_id": 6, "comment_author": "ctrysbita", "commentT": "2019-03-16T06:04:41Z", "comment_text": "\n \t\tYes, this is not a bug from pyCharm but tensorflow itself.\n The bug is caused by missing tensorflow.python import keras in __init__.py of tensorflow package.\n \t\t"}, "comments_6": {"comment_id": 7, "comment_author": "ctrysbita", "commentT": "2019-03-16T17:43:29Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/ctrysbita>@ctrysbita</denchmark-link>\n  do you think whether they resolve the issue in future releases?\n \t\t"}, "comments_7": {"comment_id": 8, "comment_author": "ctrysbita", "commentT": "2019-03-18T20:47:01Z", "comment_text": "\n \t\tkeras is imported dynamically in the __init__.py file.\n I am not familiar with the way pyCharm looks for autocomplete symbols, but I will see if there is any workaround (may be adding 'keras' to __all__).\n \t\t"}, "comments_8": {"comment_id": 9, "comment_author": "ctrysbita", "commentT": "2019-03-26T06:31:56Z", "comment_text": "\n \t\t\n keras is imported dynamically in the __init__.py file.\n I am not familiar with the way pyCharm looks for autocomplete symbols, but I will see if there is any workaround (may be adding 'keras' to __all__).\n \n As we discussed here, It's a serious problem which has been created by tensorflow implementation. Could you please kindly consider it to resolve as soon as possible for next versions?\n \t\t"}, "comments_9": {"comment_id": 10, "comment_author": "ctrysbita", "commentT": "2019-03-29T03:13:39Z", "comment_text": "\n \t\tseems this issue hasn't been resolved yet, any idea to fix it temporarily? thx!\n \t\t"}, "comments_10": {"comment_id": 11, "comment_author": "ctrysbita", "commentT": "2019-04-01T19:26:27Z", "comment_text": "\n \t\t\n seems this issue hasn't been resolved yet, any idea to fix it temporarily? thx!\n \n At least for code completion to find it, a quick and dirty fix is to throw from tensorflow.python import keras at the top of <python_site_packages_dir>/tensorflow/__init__.py\n In pycharm you can get there quickly by just going to the declaration of tensorflow (ctrl+b default)\n \t\t"}, "comments_11": {"comment_id": 12, "comment_author": "ctrysbita", "commentT": "2019-04-10T04:22:56Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/jaingaurav>@jaingaurav</denchmark-link>\n  <denchmark-link:https://github.com/jvishnuvardhan>@jvishnuvardhan</denchmark-link>\n  <denchmark-link:https://github.com/annarev>@annarev</denchmark-link>\n   Hello, could you please let us when this bug will be fixed?\n \t\t"}, "comments_12": {"comment_id": 13, "comment_author": "ctrysbita", "commentT": "2019-04-17T13:02:53Z", "comment_text": "\n \t\t\n At least for code completion to find it, a quick and dirty fix is to throw from tensorflow.python import keras at the top of <python_site_packages_dir>/tensorflow/__init__.py\n In pycharm you can get there quickly by just going to the declaration of tensorflow (ctrl+b default)\n \n Doing this solved the code completion issue but led to other errors, namely API incompatibilities. I tried creating my own Model by subclassing and I got strange errors from the tensorflow_backend.py functions.\n \t\t"}, "comments_13": {"comment_id": 14, "comment_author": "ctrysbita", "commentT": "2019-04-20T07:00:40Z", "comment_text": "\n \t\tAre you satisfied with the resolution of your issue?\n <denchmark-link:https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=Yes&entry.2137816233=26502>Yes</denchmark-link>\n \n <denchmark-link:https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=No&entry.2137816233=26502>No</denchmark-link>\n \n \t\t"}, "comments_14": {"comment_id": 15, "comment_author": "ctrysbita", "commentT": "2019-04-22T20:08:32Z", "comment_text": "\n \t\tFor folks hitting this issue, the fix has merged. Please try the latest 2.0 nightly and let us know if it is not yet resolved.\n \t\t"}, "comments_15": {"comment_id": 16, "comment_author": "ctrysbita", "commentT": "2019-04-30T22:41:26Z", "comment_text": "\n \t\tNot resolved for me in pycharm\n \t\t"}, "comments_16": {"comment_id": 17, "comment_author": "ctrysbita", "commentT": "2019-04-30T22:50:27Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/DecentGradient>@DecentGradient</denchmark-link>\n  which version of TensorFlow are you using?\n \t\t"}, "comments_17": {"comment_id": 18, "comment_author": "ctrysbita", "commentT": "2019-05-01T03:16:49Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/annarev>@annarev</denchmark-link>\n  tf-nightly-2.0-preview-2.0.0.dev20190430\n \t\t"}, "comments_18": {"comment_id": 19, "comment_author": "ctrysbita", "commentT": "2019-05-01T03:38:56Z", "comment_text": "\n \t\tI just installed latest tf-nightly-2.0-preview and can't repro the issue. For example, I see autocompletion suggestions in PyCharms when typing tf.keras.applications.\n Can you describe the issue you are seeing in more detail? Which name doesn't autocomplete?\n \t\t"}, "comments_19": {"comment_id": 20, "comment_author": "ctrysbita", "commentT": "2019-08-22T08:26:38Z", "comment_text": "\n \t\tI am still having this issue with pycharm 2019.1.3\n I cannot import keras from tensorflow. \"from tensorflow import keras\" doesn't work either.\n I am using the nightly build of TF2.0: tf-nightly-gpu-2.0-preview 2.0.0.dev20190821\n \t\t"}, "comments_20": {"comment_id": 21, "comment_author": "ctrysbita", "commentT": "2019-08-24T19:43:47Z", "comment_text": "\n \t\tSame issue with the new tensorflow==2.0.0-rc0 release. If in beta release I could just use the tensorflow.python.keras workaround, now keras.layers module doesn't see the layers classes (Dense, Embedding, etc) but packages in which every layer is grouped. If I import them separately from each module the call of a layer over an input doesn't seem to work. This behaviour might be only a problem in PyCharm (in cmd works just fine) but as the majority of developers are using PyCharm as IDE it would be nice to not struggle to use tensorflow library. In addition the tensorflow namespace doesn't contain anything at import, all the packages are grouped in tensorflow_core. I understand that the backend grouping of modules must be done that way, the problem is that the importing step doesn't match the guides and tutorials on the official site and makes everything hard to use.\n If it is any workaround on this issue until a fix is released (from tensorflow team or PyCharm) I would be grateful to use it.\n \t\t"}, "comments_21": {"comment_id": 22, "comment_author": "ctrysbita", "commentT": "2019-08-24T23:43:18Z", "comment_text": "\n \t\tSomeone should reopen this since neither tensorflow-gpu-2.0.0rc0 nor tf-nightly-gpu-2.0-preview enables IDE to resolve tf.keras. I don't really understand why tf2 still uses such a complex importing method. tf1 has reinvented logging and argparse, now tf2 is still reinventing import.\n \t\t"}, "comments_22": {"comment_id": 23, "comment_author": "ctrysbita", "commentT": "2019-08-25T11:04:00Z", "comment_text": "\n \t\t\ud83e\udd15 I just upgraded to 2.0rc ..... and my code is full of yellows\n Earlier for 2.0b I used to use the hack for keras and other stuff\n <denchmark-code>import tensorflow.python as tfpy\n tfpy.keras\n </denchmark-code>\n \n Now that doesn't work .... but nonetheless code runs ....\n \t\t"}, "comments_23": {"comment_id": 24, "comment_author": "ctrysbita", "commentT": "2019-08-26T16:07:02Z", "comment_text": "\n \t\tAs tensorflow_core was mentioned above, please note that that is an undocumented experimental layout which might change in the future, so don't depend on it.\n It exists now in order to allow us to break some component packages, to modularize TensorFlow and reduce bloat. But at one point the future it will get replaced (with proper release notes)\n \t\t"}, "comments_24": {"comment_id": 25, "comment_author": "ctrysbita", "commentT": "2019-08-26T16:27:29Z", "comment_text": "\n \t\tI added an update on this issue on the freshly opened <denchmark-link:https://github.com/tensorflow/tensorflow/issues/31973>#31973</denchmark-link>\n  : <denchmark-link:https://github.com/tensorflow/tensorflow/issues/31973#issuecomment-524928419>#31973 (comment)</denchmark-link>\n \n TL;DR: we are working on this but the fix is quite complex\n \t\t"}, "comments_25": {"comment_id": 26, "comment_author": "ctrysbita", "commentT": "2019-09-01T10:35:05Z", "comment_text": "\n \t\t\n I added an update on this issue on the freshly opened #31973 : #31973 (comment)\n TL;DR: we are working on this but the fix is quite complex\n \n Thanks for your great comment. We seriously need this feature; otherwise, pycharm will be completely useless!!!\n \t\t"}, "comments_26": {"comment_id": 27, "comment_author": "ctrysbita", "commentT": "2019-09-06T14:14:09Z", "comment_text": "\n \t\tOut of curiosity, what IDEs do the core developers use? I think most heavy-duty IDEs for software development would be affected by this, but I also would have assumed the core developers would use such IDEs. Seeing that this was left in, I'm guessing the developers are using an IDE that wasn't affected.\n \t\t"}, "comments_27": {"comment_id": 28, "comment_author": "ctrysbita", "commentT": "2019-10-01T05:57:33Z", "comment_text": "\n \t\twhat is going on here? i suffering this error from moths to now\n \t\t"}, "comments_28": {"comment_id": 29, "comment_author": "ctrysbita", "commentT": "2019-10-01T17:01:26Z", "comment_text": "\n \t\tDoes not work with the stable version of tensorflow.keras(stable release 1st October 2019)!!!!!\n \t\t"}, "comments_29": {"comment_id": 30, "comment_author": "ctrysbita", "commentT": "2019-10-01T17:22:27Z", "comment_text": "\n \t\tHey everyone, if you still struggle, please check my stackoverflow post in which I solve this issue with\n TensorFlow 2.0.0 stable release version.\n <denchmark-link:https://stackoverflow.com/questions/58188704/tensorflow-2-0-unable-to-import-keras-in-pycharm>https://stackoverflow.com/questions/58188704/tensorflow-2-0-unable-to-import-keras-in-pycharm</denchmark-link>\n \n \t\t"}, "comments_30": {"comment_id": 31, "comment_author": "ctrysbita", "commentT": "2019-10-01T20:53:36Z", "comment_text": "\n \t\tAt least with PyCharm IDE (EAP release), it will work. I have tried it and it works. <denchmark-link:https://stackoverflow.com/a/58192020/5681083>Check here</denchmark-link>\n .\n Avoid importing tensorflow_core if you want to keep code compatible.\n \t\t"}, "comments_31": {"comment_id": 32, "comment_author": "ctrysbita", "commentT": "2019-10-15T22:13:04Z", "comment_text": "\n \t\t\n I had the same problem and it bugged me for a good couple of hours :( . I used from tensorflow.python.keras import *** for importing the libraries and it worked fine for me.\n \n That is kind of dangerous since you may end up importing different modules.\n e.g.\n from tensorflow.python.keras.callbacks import TensorBoard; print(TensorBoard) gets\n <class 'tensorflow.python.keras.callbacks.TensorBoard'>\n but, from tensorflow.keras.callbacks import TensorBoard; print(TensorBoard) gets <class 'tensorflow.python.keras.callbacks_v1.TensorBoard'>\n \t\t"}, "comments_32": {"comment_id": 33, "comment_author": "ctrysbita", "commentT": "2019-10-15T22:23:28Z", "comment_text": "\n \t\tThis problem is annoying, i end up coding on Google Colab, there the module is recognized and the autocompletion works good (On experimental Colab Gui). I will stay this way while this is solved, but its a pain.\n \t\t"}, "comments_33": {"comment_id": 34, "comment_author": "ctrysbita", "commentT": "2019-11-01T09:14:35Z", "comment_text": "\n \t\tWith PyCharm 2019.3 (Early Access Preview or later) the issue disappears.\n \t\t"}, "comments_34": {"comment_id": 35, "comment_author": "ctrysbita", "commentT": "2019-11-26T03:52:43Z", "comment_text": "\n \t\twhy is this issue closed while it's still not fixed?\n \t\t"}, "comments_35": {"comment_id": 36, "comment_author": "ctrysbita", "commentT": "2019-11-26T06:50:28Z", "comment_text": "\n \t\tApparently they closed the issue because with \"PyCharm 2019.3 (Early Access Preview\" the issue disappears. However, at the time speaking, PyCharm 2019.3 still has not been released (it is R.C. now)\n \t\t"}, "comments_36": {"comment_id": 37, "comment_author": "ctrysbita", "commentT": "2020-03-19T02:49:43Z", "comment_text": "\n \t\tSame issue with stable Intellij IDEA 2019.2.4 and tf2 in Match 2020...\n \t\t"}, "comments_37": {"comment_id": 38, "comment_author": "ctrysbita", "commentT": "2020-03-19T03:19:47Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/fzyzcjy>@fzyzcjy</denchmark-link>\n  which import doesn't work for you? Can you try tensorflow 2.2.0rc0 ?\n \t\t"}, "comments_38": {"comment_id": 39, "comment_author": "ctrysbita", "commentT": "2020-03-19T03:21:30Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/annarev>@annarev</denchmark-link>\n  All does not work... I will first try to update to IDEA 2019.3.4, and then report the situation to you. Thanks!\n \t\t"}, "comments_39": {"comment_id": 40, "comment_author": "ctrysbita", "commentT": "2020-03-19T04:34:53Z", "comment_text": "\n \t\tSounds good. Either updating Intellij IDEA to newer version or updating TensorFlow to 2.2.0rc0 should help. Let me know if you still see issues.\n \t\t"}, "comments_40": {"comment_id": 41, "comment_author": "ctrysbita", "commentT": "2020-03-19T05:25:04Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/annarev>@annarev</denchmark-link>\n  After updating IDEA to 2019.3.4, it works! Thanks! :)\n \t\t"}, "comments_41": {"comment_id": 42, "comment_author": "ctrysbita", "commentT": "2020-03-20T02:27:03Z", "comment_text": "\n \t\ttensorflow-version:'2.0.0'\n CUDA:10.0 Cudnn:7.6.4\n (I have tried update tensorflow to 2.2.0rc0 but I get import error:Failed to load the native TensorFlow runtime )\n pycharm version: 2019.2.4 -> 2019.3.4\n Problem solved!\n thanks <denchmark-link:https://github.com/annarev>@annarev</denchmark-link>\n  and <denchmark-link:https://github.com/fzyzcjy>@fzyzcjy</denchmark-link>\n \n \t\t"}, "comments_42": {"comment_id": 43, "comment_author": "ctrysbita", "commentT": "2020-03-22T19:58:36Z", "comment_text": "\n \t\ttensorflow 1.13.1\n PyCharm 2019.3.4\n <denchmark-link:https://user-images.githubusercontent.com/17675462/77259152-40660000-6c88-11ea-80ba-4260dffafced.png></denchmark-link>\n \n <denchmark-link:https://user-images.githubusercontent.com/17675462/77259157-44921d80-6c88-11ea-98fa-0b29b8c1a969.png></denchmark-link>\n \n same problem...\n \t\t"}, "comments_43": {"comment_id": 44, "comment_author": "ctrysbita", "commentT": "2020-03-24T04:22:07Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/elisim>@elisim</denchmark-link>\n  I'm using TF2.0 + PyCharm 19.3. Your code works for me.\n May be update to latest version can resolve the issue?\n \t\t"}, "comments_44": {"comment_id": 45, "comment_author": "ctrysbita", "commentT": "2020-03-24T09:30:14Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/ctrysbita>@ctrysbita</denchmark-link>\n  It's works with TF2.0, but I need TF1.3 for my needs.\n \t\t"}, "comments_45": {"comment_id": 46, "comment_author": "ctrysbita", "commentT": "2020-04-02T02:12:08Z", "comment_text": "\n \t\t1.3 is too old, we no longer support it or bring fixes to it. Please update to 1.15 or 2.1 (long term releases)\n \t\t"}, "comments_46": {"comment_id": 47, "comment_author": "ctrysbita", "commentT": "2020-09-29T12:03:59Z", "comment_text": "\n \t\tstill not solved for TF 2.1 (Pylance 2020.9.6)\n \t\t"}}}, "commit": {"commit_id": "88ca0db75e6daf66c6fb21609ee4100126f1b727", "commit_author": "Anna R", "commitT": "2019-04-19 23:48:49-07:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "tensorflow\\api_template.__init__.py", "file_new_name": "tensorflow\\api_template.__init__.py", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "35,40,41,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74", "deleted_lines": "52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70"}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "tensorflow\\api_template_v1.__init__.py", "file_new_name": "tensorflow\\api_template_v1.__init__.py", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "29,33,34,35,36,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57", "deleted_lines": "32,33,34,35,36,37,39,40,41,42,43,44,45,46,69,70,71,72,73,74,75,76,77,78,79"}}}, "file_2": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "tensorflow\\compat_template.__init__.py", "file_new_name": "tensorflow\\compat_template.__init__.py", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "21,25,26,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52", "deleted_lines": "28,29,30,31,32,33,34,35,36,37,38,39,40,41"}}}, "file_3": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "tensorflow\\compat_template_v1.__init__.py", "file_new_name": "tensorflow\\compat_template_v1.__init__.py", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "22,23,24,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44", "deleted_lines": "27,28,29,30,31,32,33,34"}}}, "file_4": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "tensorflow\\python\\BUILD", "file_new_name": "tensorflow\\python\\BUILD", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "199", "deleted_lines": "199"}}}, "file_5": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "tensorflow\\python\\tools\\BUILD", "file_new_name": "tensorflow\\python\\tools\\BUILD", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "165,166", "deleted_lines": "165,166"}}}, "file_6": {"file_change_type": "DELETE", "file_Nmethod": 0, "file_old_name": "tensorflow\\python\\tools\\component_api_helper.py", "file_new_name": "None"}, "file_7": {"file_change_type": "ADD", "file_Nmethod": 0, "file_old_name": "None", "file_new_name": "tensorflow\\python\\tools\\module_util.py"}}}}