{"BR": {"BR_id": "1828", "BR_author": "zhiliu6", "BRopenT": "2020-06-09T10:51:42Z", "BRcloseT": "2020-06-12T14:21:41Z", "BR_text": {"BRsummary": "Vulkan convolution wrong output with shape hint", "BRdescription": "\n The shape hint introduced by ncnnoptimize will cause wrong output when using vulkan.\n The attachment file <denchmark-link:https://github.com/Tencent/ncnn/files/4751683/yolov4-opt.zip>yolov4-opt.zip</denchmark-link>\n  is an optimized yolov4 network, the wrong output begins at layer \"62_452\", blob \"62_452_bn_mish\".\n Removing shape hint of layer \"60_439\", blob \"60_439_bn_mish\" will produce correct output on \"62_452_bn_mish\".\n The shape hint does not affect cpu inferencing.\n The weight file can be downloaded at:\n <denchmark-link:https://drive.google.com/file/d/1RLEdUqUJIEnR2_ZOYkmKK05FfsjfBr13/view?usp=sharing>https://drive.google.com/file/d/1RLEdUqUJIEnR2_ZOYkmKK05FfsjfBr13/view?usp=sharing</denchmark-link>\n \n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "zhiliu6", "commentT": "2020-06-10T16:14:58Z", "comment_text": "\n \t\tconfirmed\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "zhiliu6", "commentT": "2020-06-12T03:20:13Z", "comment_text": "\n \t\tidentical crop pack4 fp16s produce wrong result\n <denchmark-link:https://github.com/Tencent/ncnn/commit/f72b3945885945e2ae5f4d4b31aa8027e7dcdf36>f72b394</denchmark-link>\n  is a potential workaround\n \t\t"}}}, "commit": {"commit_id": "9858d203df81c67ba9ae16ae920adc58d8fc1d3a", "commit_author": "nihui", "commitT": "2020-06-12 22:21:21+08:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "src\\layer\\padding.cpp", "file_new_name": "src\\layer\\padding.cpp", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "39,40,41,42,43", "deleted_lines": "39", "method_info": {"method_name": "ncnn::Padding::load_param", "method_params": "pd", "method_startline": "27", "method_endline": "49"}}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "src\\layer\\vulkan\\crop_vulkan.cpp", "file_new_name": "src\\layer\\vulkan\\crop_vulkan.cpp", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "132", "deleted_lines": "132", "method_info": {"method_name": "ncnn::Crop_vulkan::create_pipeline", "method_params": "opt", "method_startline": "40", "method_endline": "259"}}}}}}}