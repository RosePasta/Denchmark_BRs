{"BR": {"BR_id": "817", "BR_author": "hux999", "BRopenT": "2019-03-06T12:05:04Z", "BRcloseT": "2019-03-07T07:21:02Z", "BR_text": {"BRsummary": "BinaryOp\u5728gpu\u4e0a\u4e0ecpu\u7ed3\u679c\u4e0d\u4e00\u81f4", "BRdescription": "\n \u6211\u5c06torchvision\u7684resnet\u7528onnx\u6210\u529f\u8f6c\u5316\u5230ncnn(\u4e0d\u5305\u542bfc\u66fe)\u3002\u4f46\u662f\u6b8b\u5dee\u8fde\u63a5\u4e2d\u7684BinaryOp\u7528gpu\u8dd1\u7684\u7ed3\u679c\u4e0ecpu\u7684\u4e0d\u4e00\u81f4\u3002\u9a8c\u8bc1\u540ecpu\u7684\u7ed3\u679c\u662f\u6ca1\u95ee\u9898\u7684\u3002\u9644\u4ef6\u662f\u5bf9\u5e94\u7684\u8ba1\u7b97\u56fe\u6587\u4ef6\u3002\n <denchmark-link:https://github.com/Tencent/ncnn/files/2936104/resnet.txt>resnet.txt</denchmark-link>\n \n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "hux999", "commentT": "2019-03-07T05:27:15Z", "comment_text": "\n \t\tconfirmed\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "hux999", "commentT": "2019-10-24T12:02:19Z", "comment_text": "\n \t\t\u6211\u8dd1\u7684\u7f51\u7edc\u4e5f\u5b58\u5728\u8fd9\u4e2a\u95ee\u9898\uff1a\u7528cpu\u8fd0\u884c\u7f51\u7edc\u7ed3\u679c\u662f\u6b63\u786e\u7684\uff0c\u5f00\u542fVulkan\u7684Gpu\u7ed3\u679c\u5c31\u4e0d\u6b63\u786e\u4e86\uff0c\u8bf7\u95ee\u4f60\u7684\u95ee\u9898\u89e3\u51b3\u4e86\u5417\uff1f\n \t\t"}}}, "commit": {"commit_id": "85a28959e431beaa154f51722214cdf07004ac09", "commit_author": "nihuini", "commitT": "2019-03-07 15:18:48+08:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 4, "file_old_name": "src\\allocator.cpp", "file_new_name": "src\\allocator.cpp", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "414,466", "deleted_lines": null, "method_info": {"method_name": "ncnn::VkUnlockedBlobBufferAllocator::fastMalloc", "method_params": "size", "method_startline": "387", "method_endline": "479"}}, "hunk_1": {"Ismethod": 1, "added_lines": "859,860", "deleted_lines": null, "method_info": {"method_name": "ncnn::VkUnlockedStagingBufferAllocator::fastMalloc", "method_params": "size", "method_startline": "822", "method_endline": "864"}}, "hunk_2": {"Ismethod": 1, "added_lines": "930,931", "deleted_lines": null, "method_info": {"method_name": "ncnn::VkWeightStagingBufferAllocator::fastMalloc", "method_params": "size", "method_startline": "912", "method_endline": "935"}}, "hunk_3": {"Ismethod": 1, "added_lines": "672,729,762", "deleted_lines": null, "method_info": {"method_name": "ncnn::VkWeightBufferAllocator::fastMalloc", "method_params": "size", "method_startline": "640", "method_endline": "765"}}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "src\\allocator.h", "file_new_name": "src\\allocator.h", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "197,201,204,205,206,207,208,209,210,211", "deleted_lines": null}}}, "file_2": {"file_change_type": "MODIFY", "file_Nmethod": 6, "file_old_name": "src\\command.cpp", "file_new_name": "src\\command.cpp", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "397", "deleted_lines": "397", "method_info": {"method_name": "ncnn::VkCompute::record_transfer_compute_barrier", "method_params": "m", "method_startline": "395", "method_endline": "408"}}, "hunk_1": {"Ismethod": 1, "added_lines": "427", "deleted_lines": "427", "method_info": {"method_name": "ncnn::VkCompute::record_compute_compute_barrier", "method_params": "m", "method_startline": "425", "method_endline": "438"}}, "hunk_2": {"Ismethod": 1, "added_lines": "457,460,463", "deleted_lines": "457,460,463", "method_info": {"method_name": "ncnn::VkCompute::record_prepare_transfer_barrier", "method_params": "m", "method_startline": "455", "method_endline": "464"}}, "hunk_3": {"Ismethod": 1, "added_lines": "412", "deleted_lines": "412", "method_info": {"method_name": "ncnn::VkCompute::record_compute_transfer_barrier", "method_params": "m", "method_startline": "410", "method_endline": "423"}}, "hunk_4": {"Ismethod": 1, "added_lines": "468,471,474", "deleted_lines": "468,471,474", "method_info": {"method_name": "ncnn::VkCompute::record_prepare_compute_barrier", "method_params": "m", "method_startline": "466", "method_endline": "475"}}, "hunk_5": {"Ismethod": 1, "added_lines": "442", "deleted_lines": "442", "method_info": {"method_name": "ncnn::VkCompute::record_transfer_transfer_barrier", "method_params": "m", "method_startline": "440", "method_endline": "453"}}}}, "file_3": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "src\\command.h", "file_new_name": "src\\command.h", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "93,94", "deleted_lines": "93"}}}, "file_4": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "src\\layer.cpp", "file_new_name": "src\\layer.cpp", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "152", "deleted_lines": null, "method_info": {"method_name": "ncnn::Layer::forward", "method_params": "bottom_blobs,top_blobs,cmd,opt", "method_startline": "139", "method_endline": "157"}}, "hunk_1": {"Ismethod": 1, "added_lines": "169", "deleted_lines": null, "method_info": {"method_name": "ncnn::Layer::forward", "method_params": "bottom_blob,top_blob,cmd,opt", "method_startline": "159", "method_endline": "173"}}}}, "file_5": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "src\\layer\\binaryop.cpp", "file_new_name": "src\\layer\\binaryop.cpp", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "505,506,507,508,509,510", "deleted_lines": "500,501,502,508", "method_info": {"method_name": "ncnn::BinaryOp::create_pipeline", "method_params": "", "method_startline": "498", "method_endline": "520"}}, "hunk_1": {"Ismethod": 1, "added_lines": "547,576", "deleted_lines": "545", "method_info": {"method_name": "ncnn::BinaryOp::forward", "method_params": "bottom_blobs,top_blobs,cmd,opt", "method_startline": "533", "method_endline": "580"}}}}, "file_6": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "src\\layer\\padding.cpp", "file_new_name": "src\\layer\\padding.cpp", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "272,273,274,275,276,277", "deleted_lines": "264,265,266,275", "method_info": {"method_name": "ncnn::Padding::create_pipeline", "method_params": "", "method_startline": "262", "method_endline": "287"}}}}, "file_7": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "src\\layer\\relu.cpp", "file_new_name": "src\\layer\\relu.cpp", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "129,130,131,132,133,134", "deleted_lines": "126,127,128,132", "method_info": {"method_name": "ncnn::ReLU::create_pipeline", "method_params": "", "method_startline": "124", "method_endline": "144"}}}}, "file_8": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "src\\layer\\shader\\binaryop.comp", "file_new_name": "src\\layer\\shader\\binaryop.comp", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "26,27", "deleted_lines": "26,27"}}}, "file_9": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "src\\layer\\shader\\binaryop_pack4.comp", "file_new_name": "src\\layer\\shader\\binaryop_pack4.comp", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "26,27", "deleted_lines": "26,27"}}}, "file_10": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "src\\mat.h", "file_new_name": "src\\mat.h", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "234,236,238,240,242,244,1066,1071,1077,1083,1089,1095,1101,1107,1118,1119,1124,1125,1130,1131,1136,1137,1142,1143,1148,1149,1513,1518,1523,1528,1533,1538,1543,1548", "deleted_lines": "234,236,238,240,242,244,312,313,314,315,316,317,318,1073,1078,1084,1090,1096,1102,1108,1114,1125,1126,1131,1132,1137,1138,1143,1144,1149,1150,1155,1156,1182,1226,1227,1259,1260,1292,1293,1325,1326,1358,1359,1391,1392,1506,1534,1539,1544,1549,1554,1559,1564,1569"}}}}}}