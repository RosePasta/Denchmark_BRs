{"BR": {"BR_id": "93", "BR_author": "Abai", "BRopenT": "2016-02-10T12:17:39Z", "BRcloseT": "2016-02-14T15:07:29Z", "BR_text": {"BRsummary": "Pico tests failing gradient checks", "BRdescription": "\n Not sure if you noticed, but the current test.cpp fails like this:\n 3 of 9 tests failed. [ FAILED ] convolutional gradient_check : /home/travis/build/nyanp/tiny-cnn/test/test.cpp(126): (nn.gradient_check(&a, &t, 1, 1e-4, GRAD_CHECK_ALL)) == true failed for: (nn.gradient_check(&a, &t, 1, 1e-4, GRAD_CHECK_ALL)) == false gradient_check2 : /home/travis/build/nyanp/tiny-cnn/test/test.cpp(138): (nn.gradient_check(&a, &t, 1, 1e-4, GRAD_CHECK_ALL)) == true failed for: (nn.gradient_check(&a, &t, 1, 1e-4, GRAD_CHECK_ALL)) == false gradient_check3 : /home/travis/build/nyanp/tiny-cnn/test/test.cpp(151): (nn.gradient_check(&a, &t, 1, 1e-4, GRAD_CHECK_ALL)) == true failed for: (nn.gradient_check(&a, &t, 1, 1e-4, GRAD_CHECK_ALL)) == false gradient_check4 : /home/travis/build/nyanp/tiny-cnn/test/test.cpp(164): (nn.gradient_check(&a, &t, 1, 1e-4, GRAD_CHECK_ALL)) == true failed for: (nn.gradient_check(&a, &t, 1, 1e-4, GRAD_CHECK_ALL)) == false gradient_check5 : /home/travis/build/nyanp/tiny-cnn/test/test.cpp(177): (nn.gradient_check(&a, &t, 1, 1e-4, GRAD_CHECK_ALL)) == true failed for: (nn.gradient_check(&a, &t, 1, 1e-4, GRAD_CHECK_ALL)) == false [ FAILED ] multi_layer gradient_check : /home/travis/build/nyanp/tiny-cnn/test/test.cpp(342): (nn.gradient_check(&a, &t, 1, 1e-4, GRAD_CHECK_RANDOM)) == true failed for: (nn.gradient_check(&a, &t, 1, 1e-4, GRAD_CHECK_RANDOM)) == false gradient_check3 : /home/travis/build/nyanp/tiny-cnn/test/test.cpp(379): (nn.gradient_check(&a, &t, 1, 1e-4, GRAD_CHECK_RANDOM)) == true failed for: (nn.gradient_check(&a, &t, 1, 1e-4, GRAD_CHECK_RANDOM)) == false [ FAILED ] multi_layer5 gradient_check : /home/travis/build/nyanp/tiny-cnn/test/test.cpp(417): (nn.gradient_check(&a, &t, 1, 5e-3, GRAD_CHECK_RANDOM)) == true failed for: (nn.gradient_check(&a, &t, 1, 5e-3, GRAD_CHECK_RANDOM)) == false\n The exact tests that fail seem to vary with every run. Is there some issue in these layers or is it just the test that needs fixing?\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "Abai", "commentT": "2016-02-11T22:46:37Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/Abai>@Abai</denchmark-link>\n \n Thanks :) I've noticed, but I can't find the reason yet. In my windows environment, all tests are passed... Anyway, it's a bug of unit test or network.\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "Abai", "commentT": "2016-02-14T15:07:26Z", "comment_text": "\n \t\tIt is caused by data race in gradient-check test code, and fixed in <denchmark-link:https://github.com/tiny-dnn/tiny-dnn/commit/635caff34b0c4c6f3ae373840917ab2105235530>635caff</denchmark-link>\n .\n \t\t"}}}, "commit": {"commit_id": "635caff34b0c4c6f3ae373840917ab2105235530", "commit_author": "Taiga Noumi", "commitT": "2016-02-14 22:57:44+09:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 4, "file_old_name": "tiny_cnn\\network.h", "file_new_name": "tiny_cnn\\network.h", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "447", "deleted_lines": "447", "method_info": {"method_name": "tiny_cnn::network::get_loss", "method_params": "out,t", "method_startline": "444", "method_endline": "449"}}, "hunk_1": {"Ismethod": 1, "added_lines": "483,493,497,503,507", "deleted_lines": "483,493,497,503,507", "method_info": {"method_name": "tiny_cnn::network::calc_delta", "method_params": "in,v,data_size,w,dw,check_index", "method_startline": "483", "method_endline": "508"}}, "hunk_2": {"Ismethod": 1, "added_lines": "283,285,289,291", "deleted_lines": "283,285,289,291", "method_info": {"method_name": "tiny_cnn::network::gradient_check", "method_params": "in,t,data_size,eps,mode", "method_startline": "265", "method_endline": "298"}}, "hunk_3": {"Ismethod": 1, "added_lines": "483,493,497,503,507", "deleted_lines": "483,493,497,503,507", "method_info": {"method_name": "tiny_cnn::network::calc_delta", "method_params": "in,v,data_size,w,dw,check_index,eps", "method_startline": "483", "method_endline": "508"}}}}}}}