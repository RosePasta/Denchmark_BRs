{"BR": {"BR_id": "2593", "BR_author": "kparichay", "BRopenT": "2020-07-29T08:16:52Z", "BRcloseT": "2020-09-09T11:08:28Z", "BR_text": {"BRsummary": "Tensor filter memory destroy bug", "BRdescription": "\n Memory allocated by the tensor filters inside them (which support allocate_in_invoke)\n is not freed appropriately. When using the single API, this memory is wrapped with ml_tensors_data\n and freed wtih ml_tensors_data_destroy. However, these memories allocated by the tensor filter itself\n must be destroyed with destroyer of the tensor filter extension.\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "kparichay", "commentT": "2020-07-29T08:16:54Z", "comment_text": "\n \t\t : Thank you for posting issue <denchmark-link:https://github.com/nnstreamer/nnstreamer/issues/2593>#2593</denchmark-link>\n . The person in charge will reply soon.\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "kparichay", "commentT": "2020-07-29T08:25:13Z", "comment_text": "\n \t\tThis issue also exists in the pipeline C-API as well.\n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "kparichay", "commentT": "2020-08-21T07:37:14Z", "comment_text": "\n \t\tIsn't this resolved?\n \t\t"}, "comments_3": {"comment_id": 4, "comment_author": "kparichay", "commentT": "2020-08-24T00:08:20Z", "comment_text": "\n \t\tThe memory allocated by custom filters internally is NOT YET tracked by single/pipeline API to be able to call the filter handle later (if open) as of now.\n \t\t"}}}, "commit": {"commit_id": "34593a01f6eb83fad2be2f165ed9b392ecc4ea3b", "commit_author": "Parichay Kapoor", "commitT": "2020-09-09 20:08:27+09:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "api\\capi\\include\\nnstreamer-capi-private.h", "file_new_name": "api\\capi\\include\\nnstreamer-capi-private.h", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "151,394,395", "deleted_lines": null}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "api\\capi\\include\\nnstreamer-single.h", "file_new_name": "api\\capi\\include\\nnstreamer-single.h", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "99", "deleted_lines": null}}}, "file_2": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "api\\capi\\include\\tensor_filter_single.h", "file_new_name": "api\\capi\\include\\tensor_filter_single.h", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "81,82,83,84", "deleted_lines": null}}}, "file_3": {"file_change_type": "MODIFY", "file_Nmethod": 8, "file_old_name": "api\\capi\\src\\nnstreamer-capi-single.c", "file_new_name": "api\\capi\\src\\nnstreamer-capi-single.c", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220", "deleted_lines": null, "method_info": {"method_name": "ml_single_destroy_notify", "method_params": "single,data", "method_startline": "195", "method_endline": "220"}}, "hunk_1": {"Ismethod": 1, "added_lines": "185,186,187,188,189", "deleted_lines": null, "method_info": {"method_name": "__destroy_notify_free_data", "method_params": "data_h,single_data", "method_startline": "185", "method_endline": "189"}}, "hunk_2": {"Ismethod": 1, "added_lines": "155,156,157,158,159,160,161,162", "deleted_lines": null, "method_info": {"method_name": "set_destroy_notify", "method_params": "single_h,data", "method_startline": "155", "method_endline": "162"}}, "hunk_3": {"Ismethod": 1, "added_lines": "259,260,268,269,270", "deleted_lines": null, "method_info": {"method_name": "__process_output", "method_params": "single_h", "method_startline": "257", "method_endline": "272"}}, "hunk_4": {"Ismethod": 1, "added_lines": "893,899,905,916,924,935,942,953,1007", "deleted_lines": "921", "method_info": {"method_name": "ml_single_invoke", "method_params": "single,input,output", "method_startline": "882", "method_endline": "1010"}}, "hunk_5": {"Ismethod": 1, "added_lines": "585", "deleted_lines": null, "method_info": {"method_name": "ml_single_create_handle", "method_params": "nnfw", "method_startline": "559", "method_endline": "609"}}, "hunk_6": {"Ismethod": 1, "added_lines": "842,843,844,845", "deleted_lines": "819,830,838,849,856", "method_info": {"method_name": "ml_single_close", "method_params": "single", "method_startline": "819", "method_endline": "866"}}, "hunk_7": {"Ismethod": 1, "added_lines": "168,169,170,171,172,173,174,175,176,177,178,179", "deleted_lines": null, "method_info": {"method_name": "__destroy_notify", "method_params": "data_h,single_data", "method_startline": "168", "method_endline": "179"}}}}, "file_4": {"file_change_type": "MODIFY", "file_Nmethod": 3, "file_old_name": "api\\capi\\src\\nnstreamer-capi-util.c", "file_new_name": "api\\capi\\src\\nnstreamer-capi-util.c", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "595", "deleted_lines": null, "method_info": {"method_name": "ml_tensors_data_create_no_alloc", "method_params": "info,data", "method_startline": "574", "method_endline": "607"}}, "hunk_1": {"Ismethod": 1, "added_lines": "633", "deleted_lines": null, "method_info": {"method_name": "ml_tensors_data_clone_no_alloc", "method_params": "data_src,data", "method_startline": "614", "method_endline": "640"}}, "hunk_2": {"Ismethod": 1, "added_lines": "543,554,555,556,557,558,559,560,561,566", "deleted_lines": "553,554,555,556,561", "method_info": {"method_name": "ml_tensors_data_destroy", "method_params": "data", "method_startline": "541", "method_endline": "567"}}}}, "file_5": {"file_change_type": "MODIFY", "file_Nmethod": 4, "file_old_name": "api\\capi\\src\\tensor_filter_single.c", "file_new_name": "api\\capi\\src\\tensor_filter_single.c", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "206,207,208,209", "deleted_lines": null, "method_info": {"method_name": "g_tensor_filter_allocate_in_invoke", "method_params": "self", "method_startline": "206", "method_endline": "209"}}, "hunk_1": {"Ismethod": 1, "added_lines": "314,315,316", "deleted_lines": null, "method_info": {"method_name": "g_tensor_filter_single_invoke", "method_params": "self,input,output", "method_startline": "285", "method_endline": "329"}}, "hunk_2": {"Ismethod": 1, "added_lines": "264,265,266,267,268,269,270,271,272,273,274,275", "deleted_lines": null, "method_info": {"method_name": "g_tensor_filter_destroy_notify", "method_params": "self,mem", "method_startline": "264", "method_endline": "275"}}, "hunk_3": {"Ismethod": 1, "added_lines": "96,97", "deleted_lines": null, "method_info": {"method_name": "g_tensor_filter_single_class_init", "method_params": "klass", "method_startline": "78", "method_endline": "98"}}}}, "file_6": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "gst\\nnstreamer\\tensor_filter\\tensor_filter.c", "file_new_name": "gst\\nnstreamer\\tensor_filter\\tensor_filter.c", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "318", "deleted_lines": "315,317", "method_info": {"method_name": "gst_tensor_filter_destroy_notify", "method_params": "data", "method_startline": "311", "method_endline": "319"}}}}, "file_7": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "gst\\nnstreamer\\tensor_filter\\tensor_filter_common.c", "file_new_name": "gst\\nnstreamer\\tensor_filter\\tensor_filter_common.c", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "578,579,580,581,582,583,584,585,586,587,588,589,590,591,592,593,594", "deleted_lines": null, "method_info": {"method_name": "gst_tensor_filter_destroy_notify_util", "method_params": "priv,data", "method_startline": "578", "method_endline": "594"}}}}, "file_8": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "gst\\nnstreamer\\tensor_filter\\tensor_filter_common.h", "file_new_name": "gst\\nnstreamer\\tensor_filter\\tensor_filter_common.h", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "213,214,215,216,217,218", "deleted_lines": null}}}}}}