{"BR": {"BR_id": "228", "BR_author": "disintegr8te", "BRopenT": "2019-10-08T23:03:06Z", "BRcloseT": "2019-10-09T09:59:17Z", "BR_text": {"BRsummary": "[BUG]Error on enrolling to Grid", "BRdescription": "\n Describe the bug\n After flashing and changing the Config.yml the /var/log/pwnagotchi.log shows an error on enrolling the Device to Grid.\n To Reproduce\n Steps to reproduce the behavior:\n \n Flash Image\n Edit Config.yml\n Reboot\n \n Expected behavior\n Successfully enrolling the Unit in Grid.\n Environment (please complete the following information):\n \n Pwnagotchi v1.0.0rc1\n Raspi0\n Waveshare_v1 Display\n \n Additional context\n /var/log/pwnagotchi.log:\n <denchmark-code>[2019-10-08 23:36:03,106] [INFO] [epoch 10] duration=00:01:32 slept_for=00:00:53 blind=0 inactive=1 active=0 hops=0 missed=0 deauths=0 assocs=0 handshakes=0 cpu=74% mem=62% temperature=39C reward=-0.018181818181818184\n [2019-10-08 23:36:03,112] [INFO] [ai] --- training epoch 8/50 ---\n [2019-10-08 23:36:03,123] [INFO] [ai] REWARD: -0.018182\n [2019-10-08 23:36:03,127] [INFO] [ai] observation:\n [2019-10-08 23:36:03,131] [INFO]     aps\n [2019-10-08 23:36:03,135] [INFO]       CH 1: 0.4705882352913495\n [2019-10-08 23:36:03,139] [INFO]       CH 2: 0.05882352941141869\n [2019-10-08 23:36:03,143] [INFO]       CH 6: 0.35294117646851214\n [2019-10-08 23:36:03,148] [INFO]       CH 11: 0.11764705882283738\n [2019-10-08 23:36:03,152] [INFO]     sta\n [2019-10-08 23:36:03,156] [INFO]       CH 1: 0.4999999999875\n [2019-10-08 23:36:03,161] [INFO]       CH 6: 0.24999999999375\n [2019-10-08 23:36:03,164] [INFO]       CH 11: 0.24999999999375\n [2019-10-08 23:36:03,168] [INFO]     peers\n [2019-10-08 23:36:03,172] [INFO] [ai] saving model to /root/brain.nn ...\n [2019-10-08 23:36:03,247] [INFO] grid: 6 new networks to report\n [2019-10-08 23:36:03,266] [INFO] grid: enrolling unit ...\n [2019-10-08 23:36:03,891] [ERROR] error while enrolling the unit\n Traceback (most recent call last):\n   File \"/usr/local/lib/python3.7/dist-packages/pwnagotchi/plugins/default/grid.py\", line 141, in on_internet_available\n     token = get_api_token(agent.last_session, agent.keypair())\n   File \"/usr/local/lib/python3.7/dist-packages/pwnagotchi/plugins/default/grid.py\", line 47, in get_api_token\n     'epochs': last_session.epochs,\n AttributeError: 'LastSession' object has no attribute 'epochs'\n [2019-10-08 23:36:03,932] [INFO] AUTO-BACKUP: Backing up ...\n [2019-10-08 23:36:04,224] [INFO] [ai] saving /root/brain.json\n [2019-10-08 23:36:04,285] [INFO] [ai] worst reward so far: -0.018181818181818184\n \n /etc/pwnagotchi/config.yml\n \n \n </denchmark-code>\n \n <denchmark-h:h1>main algorithm configuration</denchmark-h>\n \n main:\n # currently implemented: en (default), de, el, fr, it, mk, nl, ru, se\n lang: en\n # custom plugins path, if null only default plugins with be loaded\n custom_plugins:\n # which plugins to load and enable\n plugins:\n grid:\n enabled: true\n report: true # don't report pwned networks by default!\n <denchmark-code>      auto-update:\n         enabled: true\n         interval: 2 # every day\n       auto-backup:\n         enabled: true\n         interval: 1 # every day\n         files:\n           - /root/brain.nn\n           - /root/brain.json\n           - /root/handshakes/\n           - /etc/pwnagotchi/\n           - /etc/hostname\n           - /etc/hosts\n           - /etc/motd\n           - /var/log/pwnagotchi.log\n         commands:\n           - 'tar czf /tmp/backup.tar.gz {files}'\n       gps:\n         enabled: false\n         speed: 19200\n         device: /dev/ttyUSB0\n       twitter:\n         enabled: false\n         consumer_key: aaa\n         consumer_secret: aaa\n         access_token_key: aaa\n         access_token_secret: aaa\n       onlinehashcrack:\n         enabled: false\n         email: ~\n       wpa-sec:\n         enabled: false\n         api_key: ~\n       wigle:\n         enabled: false\n         api_key: ~\n       screen_refresh:\n         enabled: true\n         refresh_interval: 50\n \n \n \n # ui configuration\n ui:\n     # ePaper display can update every 3 secs anyway, set to 0 to only refresh for major data changes\n     # IMPORTANT: The lifespan of an eINK display depends on the cumulative amount of refreshes. If you want to\n     # preserve your display over time, you should set this value to 0.0 so that the display will be refreshed only\n     # if any of the important data fields changed (the uptime and blinking cursor won't trigger a refresh).\n     fps: 0.0\n     display:\n         enabled: true\n         rotation: 180\n         # Possible options inkyphat/inky, papirus/papi, waveshare_1/ws_1 or waveshare_2/ws_2\n         type: 'waveshare_1'\n         # Possible options red/yellow/black (black used for monocromatic displays)\n         color: 'black'\n         video:\n             enabled: true\n             address: '10.0.0.2'\n             port: 8080\n \n \n </denchmark-code>\n \n \t"}, "comments": {}}, "commit": {"commit_id": "8af56040349092520b2905a4c0517b4e43e6f962", "commit_author": "Simone Margaritelli", "commitT": "2019-10-09 11:59:11+02:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "pwnagotchi\\log.py", "file_new_name": "pwnagotchi\\log.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46", "deleted_lines": null, "method_info": {"method_name": "__init__", "method_params": "self,config", "method_startline": "25", "method_endline": "46"}}}}}}}