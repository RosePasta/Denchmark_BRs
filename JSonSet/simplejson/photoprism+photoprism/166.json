{"BR": {"BR_id": "166", "BR_author": "janost", "BRopenT": "2019-12-21T14:42:11Z", "BRcloseT": "2019-12-21T17:07:38Z", "BR_text": {"BRsummary": "OSM: Extracting location information from GPS coordinates ignores `village` property", "BRdescription": "\n First of all, thank you for this awesome project!\n While testing it on my photo collection I noticed that some location labels look a bit weird, so I started investigating and realized that Photoprism seems to ignore the  property of the  object while parsing OSM's response, falling back to . This causes photos taken in a village to have incomplete location labels. (<denchmark-link:https://github.com/photoprism/photoprism/blob/1e7c0c243550e6b2b251455efcc06779efcce2e0/internal/maps/osm/location.go#L75>Code</denchmark-link>\n ) <denchmark-link:https://nominatim.org/release-docs/develop/api/Reverse/>Nominatim's documentation</denchmark-link>\n  fails to mention the  property, but you can see it in their examples.\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "janost", "commentT": "2019-12-21T14:44:12Z", "comment_text": "\n \t\tAmazing, thank you for this hint!\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "janost", "commentT": "2019-12-21T15:26:50Z", "comment_text": "\n \t\tMerged to master. Updated Docker image should soon be available. Let us know if it works for you.\n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "janost", "commentT": "2019-12-21T15:59:52Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/janost>@janost</denchmark-link>\n  Note that you shouldn't index too many photos as OSM does not allow batch processing, see <denchmark-link:https://twitter.com/liotier/status/1207989846159036416>https://twitter.com/liotier/status/1207989846159036416</denchmark-link>\n \n We're currently working on our own geolocation service.\n \t\t"}, "comments_3": {"comment_id": 4, "comment_author": "janost", "commentT": "2019-12-21T17:07:38Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/lastzero>@lastzero</denchmark-link>\n  noted, thank you.\n Also I tested the new container, works very well, thank you!\n Closing the ticket as the issue has been fixed.\n \t\t"}, "comments_4": {"comment_id": 5, "comment_author": "janost", "commentT": "2019-12-21T17:10:29Z", "comment_text": "\n \t\tYou're welcome :) Please consider a <denchmark-link:https://github.com/photoprism/photoprism/blob/develop/SPONSORS.md>donation</denchmark-link>\n  if you like PhotoPrism. We're working on this full-time at the moment.\n \t\t"}}}, "commit": {"commit_id": "245c8beb69833d00c9027a36f35f352359265dd1", "commit_author": "Michael Mayer", "commitT": "2019-12-21 16:22:24+01:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "internal\\maps\\location_test.go", "file_new_name": "internal\\maps\\location_test.go", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "167", "deleted_lines": "167", "method_info": {"method_name": "", "method_params": "", "method_startline": "140", "method_endline": "168"}}, "hunk_1": {"Ismethod": 1, "added_lines": "167", "deleted_lines": "167", "method_info": {"method_name": "TestLocation_Assign", "method_params": "T", "method_startline": "26", "method_endline": "229"}}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "internal\\maps\\osm\\address.go", "file_new_name": "internal\\maps\\osm\\address.go", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "8", "deleted_lines": null}}}, "file_2": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "internal\\maps\\osm\\location.go", "file_new_name": "internal\\maps\\osm\\location.go", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "80,81", "deleted_lines": null, "method_info": {"method_name": "City", "method_params": "", "method_startline": "75", "method_endline": "89"}}}}}}}