{"BR": {"BR_id": "3197", "BR_author": "tqchen", "BRopenT": "2019-05-16T16:41:36Z", "BRcloseT": "2019-05-16T22:09:35Z", "BR_text": {"BRsummary": "[RELAY] Avoid eager creation of global target object", "BRdescription": "\n <denchmark-link:https://github.com/dmlc/tvm/blob/master/src/relay/backend/build_module.cc#L54>https://github.com/dmlc/tvm/blob/master/src/relay/backend/build_module.cc#L54</denchmark-link>\n \n Not all target is enabled.\n \n See https://discuss.tvm.ai/t/unknown-target-name-vpi/2589/3\n Consider changing the map to a function, with switch case\n \n It is usually not a good practice to eagerly create a global static object(which might have initialization order issue).\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "tqchen", "commentT": "2019-05-16T16:41:56Z", "comment_text": "\n \t\tcc <denchmark-link:https://github.com/zhiics>@zhiics</denchmark-link>\n  please fix ASAP\n cc <denchmark-link:https://github.com/jroesch>@jroesch</denchmark-link>\n  <denchmark-link:https://github.com/vinx13>@vinx13</denchmark-link>\n  <denchmark-link:https://github.com/wweic>@wweic</denchmark-link>\n  <denchmark-link:https://github.com/hlu1>@hlu1</denchmark-link>\n \n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "tqchen", "commentT": "2019-05-16T17:12:53Z", "comment_text": "\n \t\tI will move them back to std::string and create when necessary.\n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "tqchen", "commentT": "2019-05-16T17:25:05Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/apache/tvm/pull/3198>#3198</denchmark-link>\n \n \t\t"}, "comments_3": {"comment_id": 4, "comment_author": "tqchen", "commentT": "2019-05-16T17:48:34Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/tqchen>@tqchen</denchmark-link>\n  Thanks for the fix.\n \t\t"}}}, "commit": {"commit_id": "ac3f5bd96f05e93686f9607fff822275e685a90e", "commit_author": "Tianqi Chen", "commitT": "2019-05-16 13:22:31-07:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 6, "file_old_name": "src\\relay\\backend\\build_module.cc", "file_new_name": "src\\relay\\backend\\build_module.cc", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "448", "deleted_lines": null, "method_info": {"method_name": "tvm::relay::backend::RelayBuildModule::Optimize", "method_params": "func,targets,cfg,params", "method_startline": "396", "method_endline": "460"}}, "hunk_1": {"Ismethod": 1, "added_lines": "467,468,469,470,471,472", "deleted_lines": null, "method_info": {"method_name": "tvm::relay::backend::RelayBuildModule::CreateDefaultTarget", "method_params": "device_type", "method_startline": "467", "method_endline": "472"}}, "hunk_2": {"Ismethod": 1, "added_lines": "506,507,519,534", "deleted_lines": "510,523,535", "method_info": {"method_name": "tvm::relay::backend::RelayBuildModule::RunDeviceAnnotationPass", "method_params": "func,cfg,targets_map_ptr", "method_startline": "506", "method_endline": "538"}}, "hunk_3": {"Ismethod": 1, "added_lines": "493", "deleted_lines": null, "method_info": {"method_name": "tvm::relay::backend::RelayBuildModule::UpdateHeterogeneousInputs", "method_params": "targets,cfg", "method_startline": "483", "method_endline": "496"}}, "hunk_4": {"Ismethod": 1, "added_lines": null, "deleted_lines": "48,49,50,51", "method_info": {"method_name": "tvm::relay::backend::ContextTargetMap::Mask2Str", "method_params": "mask", "method_startline": "48", "method_endline": "51"}}, "hunk_5": {"Ismethod": 1, "added_lines": "287,288", "deleted_lines": null, "method_info": {"method_name": "tvm::relay::backend::RelayBuildModule::ListParamNames", "method_params": "", "method_startline": "287", "method_endline": "293"}}}}}}}