{"BR": {"BR_id": "1030", "BR_author": "jiyer2016", "BRopenT": "2020-08-26T14:38:34Z", "BRcloseT": "2020-09-02T00:42:05Z", "BR_text": {"BRsummary": "bentoml serve fails with error is built / packaged on Windows and deployed on Linux", "BRdescription": "\n Describe the bug\n bentoml serve fails with error:\n Error: bentoml-cli serve failed: Can not locate module_file <some_dir1>\\<some_dir2>\\<some_file>.py in saved bundle /<some_dir3> \n This happens because of the windows style backslash in <some_dir1> \\ <some_dir2> \\ <some_file>.py being considered as the escape character on linux.\n The \"<some_dir1> \\ <some_dir2> \\ <some_file>.py\" originates from metadata['module_file'] in bentoml.yml\n To Reproduce\n \n Build Bento on Windows\n Deploy Bento on RHEL Docker Image\n Startup Fails\n \n Environment:\n \n Python 3.8, BentoML-0.8.4\n \n Additional context\n Can't say for sure - but my guess is that this only happens when the Bento is built/packaged on Windows and deployed on Linux.\n I was able to fix this by manually replacing the forward slash with backward slash in betoml.yml\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "jiyer2016", "commentT": "2020-08-26T20:01:12Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/jiyer2016>@jiyer2016</denchmark-link>\n  Thank you for finding this issue.  You are exactly right. BentoML didn't take into account of module_file from Windows.\n We need to improve our Windows support.  Thank you for discovering all of these issues and help BentoML improve!\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "jiyer2016", "commentT": "2020-09-02T00:42:03Z", "comment_text": "\n \t\tThis is fixed in <denchmark-link:https://github.com/bentoml/BentoML/pull/1044>#1044</denchmark-link>\n , will be available in next release\n \t\t"}}}, "commit": {"commit_id": "edbfa22e46180f36213c620d665f0c6e5eddd8b7", "commit_author": "Chaoyu", "commitT": "2020-08-29 22:08:47-07:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": ".github\\workflows\\ci.yml", "file_new_name": ".github\\workflows\\ci.yml", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "115,116,117,118,119,120", "deleted_lines": "115"}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "bentoml\\saved_bundle\\loader.py", "file_new_name": "bentoml\\saved_bundle\\loader.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "150,151", "deleted_lines": null, "method_info": {"method_name": "load_bento_service_class", "method_params": "bundle_path", "method_startline": "135", "method_endline": "191"}}, "hunk_1": {"Ismethod": 1, "added_lines": "94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132", "deleted_lines": "108,109,112,113,114,115,116,117,118,119,120,121", "method_info": {"method_name": "_find_module_file", "method_params": "bundle_path,service_name,module_file", "method_startline": "94", "method_endline": "132"}}}}}}}