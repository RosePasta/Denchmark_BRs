{"BR": {"BR_id": "763", "BR_author": "palver7", "BRopenT": "2020-06-06T06:16:19Z", "BRcloseT": "2020-06-09T00:46:37Z", "BR_text": {"BRsummary": "Error when creating custom handler class", "BRdescription": "\n I created a custom tensorflow_tensor_handler class in order to help with debugging issue <denchmark-link:https://github.com/bentoml/BentoML/issues/742>#742</denchmark-link>\n .\n I put this class inside tensorflow_fashion_mnist.py and attempt to build the bentoservice bundle according to <denchmark-link:https://github.com/bentoml/gallery/blob/master/tensorflow/fashion-mnist/tensorflow_2_fashion_mnist.ipynb>https://github.com/bentoml/gallery/blob/master/tensorflow/fashion-mnist/tensorflow_2_fashion_mnist.ipynb</denchmark-link>\n \n Here are the content of tensorflow_fashion_mnist.py and the relevant code to create the bento service bundle :\n <denchmark-link:https://github.com/bentoml/BentoML/files/4739426/bentoserviceandbuildcommand.txt>bentoserviceandbuildcommand.txt</denchmark-link>\n \n However when I run the code to create the service bundle I got these error messages:\n <denchmark-link:https://github.com/bentoml/BentoML/files/4739430/bentomlservicebuilderror.txt>bentomlservicebuilderror.txt</denchmark-link>\n \n I have tried to find solutions based on the error message but I did not succceed. Any help is much appreciated.\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "palver7", "commentT": "2020-06-06T06:20:23Z", "comment_text": "\n \t\tcc <denchmark-link:https://github.com/bojiang>@bojiang</denchmark-link>\n  could you help take a look when you have a chance?\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "palver7", "commentT": "2020-06-08T14:42:48Z", "comment_text": "\n \t\thi <denchmark-link:https://github.com/palver7>@palver7</denchmark-link>\n   looks like <denchmark-link:https://github.com/bentoml/BentoML/pull/767>#767</denchmark-link>\n  has the fix you need. I think you can also override the  method in your inherited method as the following as a temporally workaround:\n <denchmark-code>from bentoml.handlers import TensorflowTensorHandler\n \n def MyTensorHandler(TensorflowTensorHandler):\n     @property\n     def config(self):\n         base_config = super(TensorflowTensorHandler, self).config\n         return dict(base_config, method=self.method,)\n \n     def handle_request(...):\n        ...\n </denchmark-code>\n \n \t\t"}}}, "commit": {"commit_id": "f0bbb0c335193cb13d59fe41cda84f8e691cbc8e", "commit_author": "bojiang", "commitT": "2020-06-08 17:46:36-07:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "bentoml\\handlers\\dataframe_handler.py", "file_new_name": "bentoml\\handlers\\dataframe_handler.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "243", "deleted_lines": "243", "method_info": {"method_name": "config", "method_params": "self", "method_startline": "242", "method_endline": "251"}}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "bentoml\\handlers\\tensorflow_tensor_handler.py", "file_new_name": "bentoml\\handlers\\tensorflow_tensor_handler.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "62", "deleted_lines": "62", "method_info": {"method_name": "config", "method_params": "self", "method_startline": "61", "method_endline": "63"}}}}, "file_2": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "bentoml\\handlers\\utils.py", "file_new_name": "bentoml\\handlers\\utils.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "53,54,55,56", "deleted_lines": "53", "method_info": {"method_name": "tf_tensor_2_serializable", "method_params": "obj", "method_startline": "22", "method_endline": "65"}}}}, "file_3": {"file_change_type": "MODIFY", "file_Nmethod": 3, "file_old_name": "tests\\handlers\\test_tf_tensor_handler.py", "file_new_name": "tests\\handlers\\test_tf_tensor_handler.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "70,71,72,73,74", "deleted_lines": "70,71,72,73,74", "method_info": {"method_name": "assert_eq_or_both_nan", "method_params": "x,y", "method_startline": "70", "method_endline": "74"}}, "hunk_1": {"Ismethod": 1, "added_lines": "97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112", "deleted_lines": "97,98,99,100,101,102,103,104", "method_info": {"method_name": "test_tf_tensor_handle_batch_request", "method_params": "", "method_startline": "97", "method_endline": "112"}}, "hunk_2": {"Ismethod": 1, "added_lines": "89,91,92,93,94", "deleted_lines": "77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94", "method_info": {"method_name": "test_tf_tensor_handle_request", "method_params": "", "method_startline": "77", "method_endline": "94"}}}}}}}