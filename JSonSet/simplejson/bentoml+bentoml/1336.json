{"BR": {"BR_id": "1336", "BR_author": "jiyer2016", "BRopenT": "2020-12-17T08:28:24Z", "BRcloseT": "2020-12-22T08:11:16Z", "BR_text": {"BRsummary": "bentoml retrieve fails after upgrading to 0.10.1", "BRdescription": "\n Describe the bug\n I first upgraded my yatai-service from 0.9.2 to 0.10.1.\n Then upgraded my traning pipeline to 0.10.1 - It worked flawlessly and stored newer versions of Model into S3 storage.\n I then proceeded to build my BentoService via a custom Docker build.\n Note - I use my own Dockerfile - with the command:\n RUN bentoml retrieve Service:latest --target_dir /bentoservice\n The Docker build broke with the following error:\n <denchmark-code>|   File \"/usr/local/lib/python3.8/site-packages/bentoml/cli/bento_management.py\", line 256, in retrieve                                                       \n |     yc.repository.download_to_directory(bento_pb, target_dir)                    |\n |   File \"/usr/local/lib/python3.8/site-packages/bentoml/yatai/client/bento_repository_api.py\", line 255, in download_to_directory                             |\n |     bento_service_bundle_path = bento_pb.bento.uri.s3_presigned_url              |\n | AttributeError: bento                                                            |\n | The command '/bin/sh -c bentoml retrieve Service:latest --target_dir /bentoservice' returned a non-zero code: 1                              |\n </denchmark-code>\n \n Environment:\n \n Python 3.7.1\n BentoML-0.10.1\n \n \n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "jiyer2016", "commentT": "2020-12-17T08:35:45Z", "comment_text": "\n \t\tOps. I guess just remove the  and it will work. <denchmark-link:https://github.com/yubozhao>@yubozhao</denchmark-link>\n \n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "jiyer2016", "commentT": "2020-12-17T08:44:37Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/bojiang>@bojiang</denchmark-link>\n  - Sorry, I didnt understand - Whhere do I remove the  ?\n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "jiyer2016", "commentT": "2020-12-17T09:44:15Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/jiyer2016>@jiyer2016</denchmark-link>\n \n Sorry for the unclear reply.\n I believe it is indeed a bug of bentoml. The comment I just made is for developers.\n \t\t"}, "comments_3": {"comment_id": 4, "comment_author": "jiyer2016", "commentT": "2020-12-17T17:20:16Z", "comment_text": "\n \t\tThanks for reporting this issue. I will fix it and hopefully we can release a new patch before the holiday with this fix in.\n \t\t"}}}, "commit": {"commit_id": "65e82de88b28a34ca6ce42448f3442ea2104836e", "commit_author": "Bozhao", "commitT": "2020-12-22 00:11:16-08:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": ".github\\workflows\\ci.yml", "file_new_name": ".github\\workflows\\ci.yml", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "309,310,311,312,313,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,329,330,331,332,333,334,335,336,337", "deleted_lines": null}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "bentoml\\yatai\\client\\bento_repository_api.py", "file_new_name": "bentoml\\yatai\\client\\bento_repository_api.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "255", "deleted_lines": "255", "method_info": {"method_name": "download_to_directory", "method_params": "self,bento_pb,target_dir", "method_startline": "253", "method_endline": "261"}}}}, "file_2": {"file_change_type": "ADD", "file_Nmethod": 0, "file_old_name": "None", "file_new_name": "ci\\s3_bucket_integration_tests.sh"}, "file_3": {"file_change_type": "ADD", "file_Nmethod": 0, "file_old_name": "None", "file_new_name": "tests\\integration\\test_s3.py"}}}}