{"BR": {"BR_id": "263", "BR_author": "lambdaofgod", "BRopenT": "2019-08-14T12:00:11Z", "BRcloseT": "2019-08-26T12:43:20Z", "BR_text": {"BRsummary": "Cannot use list in ImageHandler's input_name", "BRdescription": "\n Describe the bug\n I need to create a model that compares two images - in ImageHandler documentation there is mention of input_name parameter which is supposedly string[] type, but when list argument is passed, it fails.\n To Reproduce\n <denchmark-code>\n @env(conda_pip_dependencies=['scikit-image'])\n @ver(major=1, minor=0)\n class ImageSimilarityScorer(BentoService):\n \n     @api(ImageHandler, input_name=['original', 'compared'], accept_multiple_files=True)\n     def predict(self, original, compared):\n         return original[0, 0] == compared[0, 0]\n \n </denchmark-code>\n \n BTW I also tried passing input_name as @api's keyword argument. Also it fails when I use tuple instead of list.\n Screenshots/Logs\n When running bentoml serve of my model I get\n \n Traceback (most recent call last):\n File \"/home/kuba/Projects/venvs/ml_server/lib/python3.6/site-packages/flask/app.py\", line 2446, in wsgi_app\n response = self.full_dispatch_request()\n File \"/home/kuba/Projects/venvs/ml_server/lib/python3.6/site-packages/flask/app.py\", line 1951, in full_dispatch_request\n rv = self.handle_user_exception(e)\n File \"/home/kuba/Projects/venvs/ml_server/lib/python3.6/site-packages/flask/app.py\", line 1820, in handle_user_exception\n reraise(exc_type, exc_value, tb)\n File \"/home/kuba/Projects/venvs/ml_server/lib/python3.6/site-packages/flask/_compat.py\", line 39, in reraise\n raise value\n File \"/home/kuba/Projects/venvs/ml_server/lib/python3.6/site-packages/flask/app.py\", line 1949, in full_dispatch_request\n rv = self.dispatch_request()\n File \"/home/kuba/Projects/venvs/ml_server/lib/python3.6/site-packages/flask/app.py\", line 1935, in dispatch_request\n return self.view_functionsrule.endpoint\n File \"/home/kuba/Projects/venvs/ml_server/lib/python3.6/site-packages/bentoml/server/bento_api_server.py\", line 152, in docs_view_func\n docs = get_docs(bento_service)\n File \"/home/kuba/Projects/venvs/ml_server/lib/python3.6/site-packages/bentoml/server/bento_api_server.py\", line 142, in get_docs\n requestBody=OrderedDict(required=True, content=api.request_schema),\n File \"/home/kuba/Projects/venvs/ml_server/lib/python3.6/site-packages/bentoml/service.py\", line 97, in request_schema\n return self.handler.request_schema\n File \"/home/kuba/Projects/venvs/ml_server/lib/python3.6/site-packages/bentoml/handlers/image_handler.py\", line 91, in request_schema\n self.input_name: {\"type\": \"string\", \"format\": \"binary\"}\n TypeError: unhashable type: 'list'\n \n Environment:\n \n Python 3.6.8, BentoML-0.3.4\n \n \t"}, "comments": {}}, "commit": {"commit_id": "bb8b1a49650181034b2e91aecfb1d15afb5a7fe5", "commit_author": "Jakub Bartczuk", "commitT": "2019-08-19 11:20:04-07:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "bentoml\\handlers\\image_handler.py", "file_new_name": "bentoml\\handlers\\image_handler.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "91,92", "deleted_lines": "91", "method_info": {"method_name": "request_schema", "method_params": "self", "method_startline": "84", "method_endline": "96"}}, "hunk_1": {"Ismethod": 1, "added_lines": "136,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155", "deleted_lines": "136,138", "method_info": {"method_name": "handle_request", "method_params": "self,request,func", "method_startline": "102", "method_endline": "158"}}}}}}}