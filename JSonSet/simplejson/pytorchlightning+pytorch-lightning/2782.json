{"BR": {"BR_id": "2782", "BR_author": "bkhakshoor", "BRopenT": "2020-07-31T17:56:06Z", "BRcloseT": "2020-08-02T03:25:58Z", "BR_text": {"BRsummary": "Use of shell=True could lead to shell injection", "BRdescription": "\n File: pytorch_lightning/trainer/training_io.py\n Line Number: 227-233\n Relevant Code:\n `            # find job id\n job_id = os.environ['SLURM_JOB_ID']\n cmd = 'scontrol requeue {}'.format(job_id)\n <denchmark-code>        # requeue job\n         log.info(f'requeing job {job_id}...')\n         result = call(cmd, shell=True)`\n </denchmark-code>\n \n From <denchmark-link:https://docs.python.org/2/library/subprocess.html>here</denchmark-link>\n , \"Executing shell commands that incorporate unsanitized input from an untrusted source makes a program vulnerable to shell injection, a serious security flaw which can result in arbitrary command execution. For this reason, the use of shell=True is strongly discouraged in cases where the command string is constructed from external input...shell=False disables all shell based features, but does not suffer from this vulnerability\"\n Meaning anything that can set the SLURM_JOB_ID environment variable can perform code execution.\n The documentation also describes why you might need/want shell=True, \"This can be useful if you are using Python primarily for the enhanced control flow it offers over most system shells and still want convenient access to other shell features such as shell pipes, filename wildcards, environment variable expansion, and expansion of ~ to a user\u2019s home directory.\"\n Looking at the code above, it doesn't look like we need any of these features and we can switch to shell=False with no change in functionality while gaining the security benefits of shell=False.\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "bkhakshoor", "commentT": "2020-07-31T17:57:03Z", "comment_text": "\n \t\tHi! thanks for your contribution!, great first issue!\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "bkhakshoor", "commentT": "2020-07-31T18:10:25Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/bkhakshoor>@bkhakshoor</denchmark-link>\n  would you mind submitting a PR for it with the fix?\n \t\t"}}}, "commit": {"commit_id": "96eb6ebacd5b8bba2dea4741355f576e8f1c6a16", "commit_author": "bkhakshoor", "commitT": "2020-08-01 23:25:57-04:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "pytorch_lightning\\trainer\\training_io.py", "file_new_name": "pytorch_lightning\\trainer\\training_io.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "229,233", "deleted_lines": "229,233", "method_info": {"method_name": "sig_handler", "method_params": "self,signum,frame", "method_startline": "221", "method_endline": "242"}}}}}}}