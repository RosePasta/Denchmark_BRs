{"BR": {"BR_id": "2436", "BR_author": "awaelchli", "BRopenT": "2020-06-30T21:54:06Z", "BRcloseT": "2020-07-07T18:54:08Z", "BR_text": {"BRsummary": "Fix horovod tests that try to access filepath on global rank &gt; 0", "BRdescription": "\n <denchmark-h:h2>\ud83d\udc1b Bug</denchmark-h>\n \n We had to skip two tests in <denchmark-link:https://github.com/PyTorchLightning/pytorch-lightning/pull/2425>#2425</denchmark-link>\n , namely\n \n test_horovod_cpu\n test_horovod_cpu_implicit\n \n Problem is that since they run in ddp and the test tries to access the trainer internal variable for the checkpoint path, it gets a NoneType error when trying to os.join() None paths.\n <denchmark-h:h3>To Reproduce</denchmark-h>\n \n Steps to reproduce the behavior:\n Run these two tests:\n \n test_horovod_cpu\n test_horovod_cpu_implicit\n \n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "awaelchli", "commentT": "2020-06-30T21:55:38Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/tgaddair>@tgaddair</denchmark-link>\n  might be able to help us, but I will look into it too.\n \t\t"}}}, "commit": {"commit_id": "78db847e42457ce3dcd89a2a5eccc8e79f60e731", "commit_author": "Adrian W\u00e4lchli", "commitT": "2020-07-07 14:54:07-04:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 3, "file_old_name": "tests\\base\\develop_pipelines.py", "file_new_name": "tests\\base\\develop_pipelines.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": null, "deleted_lines": "19", "method_info": {"method_name": "run_model_test_without_loggers", "method_params": "trainer_options,model,float", "method_startline": "9", "method_endline": "36"}}, "hunk_1": {"Ismethod": 1, "added_lines": "63,64", "deleted_lines": "65", "method_info": {"method_name": "run_model_test", "method_params": "trainer_options,model,bool,version,bool", "method_startline": "37", "method_endline": "75"}}, "hunk_2": {"Ismethod": 1, "added_lines": "80", "deleted_lines": "81,82,83", "method_info": {"method_name": "run_prediction", "method_params": "dataloader,trained_model,dp,min_acc", "method_startline": "78", "method_endline": "98"}}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "tests\\models\\data\\horovod\\train_default_model.py", "file_new_name": "tests\\models\\data\\horovod\\train_default_model.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "49,51,55,56,57,58,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84", "deleted_lines": "50,54", "method_info": {"method_name": "run_test_from_config", "method_params": "trainer_options", "method_startline": "46", "method_endline": "88"}}}}, "file_2": {"file_change_type": "MODIFY", "file_Nmethod": 4, "file_old_name": "tests\\models\\test_horovod.py", "file_new_name": "tests\\models\\test_horovod.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "81", "deleted_lines": null, "method_info": {"method_name": "test_horovod_cpu_implicit", "method_params": "tmpdir", "method_startline": "77", "method_endline": "89"}}, "hunk_1": {"Ismethod": 1, "added_lines": "64", "deleted_lines": null, "method_info": {"method_name": "test_horovod_cpu", "method_params": "tmpdir", "method_startline": "60", "method_endline": "73"}}, "hunk_2": {"Ismethod": 1, "added_lines": "43,44,45,49", "deleted_lines": "46,56", "method_info": {"method_name": "_run_horovod", "method_params": "trainer_options,on_gpu", "method_startline": "41", "method_endline": "56"}}, "hunk_3": {"Ismethod": 1, "added_lines": "99", "deleted_lines": null, "method_info": {"method_name": "test_horovod_multi_gpu", "method_params": "tmpdir", "method_startline": "95", "method_endline": "109"}}}}}}}