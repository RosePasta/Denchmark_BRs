{"BR": {"BR_id": "2433", "BR_author": "jenniew", "BRopenT": "2020-06-11T07:20:19Z", "BRcloseT": "2020-06-16T01:58:59Z", "BR_text": {"BRsummary": "XShards __del__ gets exception if xshards was not cached before", "BRdescription": "\n When xshards.del is called by gc, if xshards was not cached before, it gets such exception:\n Exception ignored in: <bound method SparkXShards.del of <zoo.orca.data.shard.SparkXShards object at 0x7fa5ce0c1470>>\n Traceback (most recent call last):\n File \"/home/jwang/git/analytics-zoo-jennie4/dist/lib/analytics-zoo-bigdl_0.10.0-spark_2.4.3-0.9.0-SNAPSHOT-python-api.zip/zoo/orca/data/shard.py\", line 282, in del\n File \"/home/jwang/git/analytics-zoo-jennie4/dist/lib/analytics-zoo-bigdl_0.10.0-spark_2.4.3-0.9.0-SNAPSHOT-python-api.zip/zoo/orca/data/shard.py\", line 148, in uncache\n File \"/tools/spark-2.4.3-bin-hadoop2.7/python/lib/pyspark.zip/pyspark/rdd.py\", line 255, in unpersist\n File \"/tools/spark-2.4.3-bin-hadoop2.7/python/lib/py4j-0.10.7-src.zip/py4j/java_gateway.py\", line 1257, in call\n File \"/tools/spark-2.4.3-bin-hadoop2.7/python/lib/py4j-0.10.7-src.zip/py4j/protocol.py\", line 332, in get_return_value\n py4j.protocol.Py4JError: An error occurred while calling o81.unpersist. Trace:\n py4j.Py4JException: Target Object ID does not exist for this gateway :o81\n at py4j.Gateway.invoke(Gateway.java:279)\n at py4j.commands.AbstractCommand.invokeMethod(AbstractCommand.java:132)\n at py4j.commands.CallCommand.execute(CallCommand.java:79)\n at py4j.GatewayConnection.run(GatewayConnection.java:238)\n at java.lang.Thread.run(Thread.java:745)\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "jenniew", "commentT": "2020-06-11T07:51:48Z", "comment_text": "\n \t\twe should catch the error in  <denchmark-link:https://github.com/cyita>@cyita</denchmark-link>\n \n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "jenniew", "commentT": "2020-06-11T08:03:35Z", "comment_text": "\n \t\tand we may also need to check if the rdd is cached before calling unpersist?\n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "jenniew", "commentT": "2020-06-11T08:09:36Z", "comment_text": "\n \t\t\n and we may also need to check if the rdd is cached before calling unpersist?\n \n Fixed in <denchmark-link:https://github.com/intel-analytics/analytics-zoo/pull/2434>#2434</denchmark-link>\n \n \t\t"}}}, "commit": {"commit_id": "b6c376389a9b844e44a1ecf58161f0fae088b1bf", "commit_author": "Yina Chen", "commitT": "2020-06-12 11:07:27+08:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "pyzoo\\test\\zoo\\orca\\data\\test_spark_pandas.py", "file_new_name": "pyzoo\\test\\zoo\\orca\\data\\test_spark_pandas.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "132,133", "deleted_lines": null, "method_info": {"method_name": "test_split", "method_params": "self", "method_startline": "125", "method_endline": "139"}}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "pyzoo\\zoo\\orca\\data\\shard.py", "file_new_name": "pyzoo\\zoo\\orca\\data\\shard.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "179,180,181,182,183", "deleted_lines": "178", "method_info": {"method_name": "uncache", "method_params": "self", "method_startline": "177", "method_endline": "184"}}}}}}}