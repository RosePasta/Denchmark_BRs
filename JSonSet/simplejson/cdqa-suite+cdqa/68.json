{"BR": {"BR_id": "68", "BR_author": "fmikaelian", "BRopenT": "2019-03-07T10:59:25Z", "BRcloseT": "2019-03-12T18:58:21Z", "BR_text": {"BRsummary": "NameError: name 'device' is not defined in predict() method", "BRdescription": "\n <denchmark-code>---------------------------------------------------------------------------\n NameError                                 Traceback (most recent call last)\n <ipython-input-14-65cedbb88ef8> in <module>()\n       2 test_examples, test_features = test_processor.fit_transform(X=squad_examples)\n       3 # model = load('model.joblib')\n ----> 4 predictions = model.predict(X=(test_examples, test_features))\n \n ~/cdQA/cdqa/reader/bertqa_sklearn.py in predict(self, X)\n    1037             if len(all_results) % 1000 == 0:\n    1038                 logger.info(\"Processing example: %d\" % (len(all_results)))\n -> 1039             input_ids = input_ids.to(device)\n    1040             input_mask = input_mask.to(device)\n    1041             segment_ids = segment_ids.to(device)\n \n NameError: name 'device' is not defined\n </denchmark-code>\n \n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "fmikaelian", "commentT": "2020-07-15T21:27:00Z", "comment_text": "\n \t\tHello\n I have written the following code:\n <denchmark-h:h1>validate on val set</denchmark-h>\n \n predictions = model.predict(X_val_prep)\n predictions = [1 if x>0.5 else 0 for x in predictions]\n accuracy = accuracy_score(y_val, predictions)\n print('Val Accuracy = %.2f' % accuracy)\n confusion_mtx = confusion_matrix(y_val, predictions)\n cm = plot_confusion_matrix(confusion_mtx, classes = list(labels.items()), normalize=False)\n NameError: name 'X_val_prep' is not defined\n Could you help me how I should tackle it?\n thank u very much.\n \t\t"}}}, "commit": {"commit_id": "05a49eaafe7eb7a22701242cca9c6e5ed43f172c", "commit_author": "Felix MIKAELIAN", "commitT": "2019-03-08 16:00:07+01:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "cdqa\\reader\\bertqa_sklearn.py", "file_new_name": "cdqa\\reader\\bertqa_sklearn.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "1039,1040,1041", "deleted_lines": "1039,1040,1041", "method_info": {"method_name": "predict", "method_params": "self,X", "method_startline": "1015", "method_endline": "1069"}}, "hunk_1": {"Ismethod": 1, "added_lines": "870,871,872,883,902,910,970,971,974,1010", "deleted_lines": "872,883,902,910,970,971,974,1010", "method_info": {"method_name": "fit", "method_params": "self,X,y", "method_startline": "870", "method_endline": "1013"}}}}}}}