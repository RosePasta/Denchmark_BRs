{"BR": {"BR_id": "614", "BR_author": "igiloh", "BRopenT": "2018-05-31T15:37:30Z", "BRcloseT": "2018-07-12T17:18:08Z", "BR_text": {"BRsummary": "Error when using `validation_set='auto'` in Activity classifier", "BRdescription": "\n Creating an activity classifier model with validation_set='auto' (which is the default) give an error:\n <denchmark-code>  File \"/Users/ilaigiloh/anaconda2/envs/TC4/lib/python2.7/site-packages/turicreate/toolkits/activity_classifier/_activity_classifier.py\", line 190, in create\n     validation_set = validation_set.filter_by(target_map.keys(), target)\n   File \"/Users/ilaigiloh/anaconda2/envs/TC4/lib/python2.7/site-packages/turicreate/data_structures/sframe.py\", line 4371, in filter_by\n     column_name + \"' in SFrame.\")\n TypeError: Type of given values does not match type of column 'activity' in SFrame.\n </denchmark-code>\n \n This will only happen if the dataset has more than 100 different sessions. For smaller datasets we currently don't create a validation set at all (by design).\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "igiloh", "commentT": "2018-06-20T14:53:59Z", "comment_text": "\n \t\tIs there a workaround until it is fixed? I am trying to train more than a 100 sessions at the moment\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "igiloh", "commentT": "2018-06-20T17:11:39Z", "comment_text": "\n \t\tHi <denchmark-link:https://github.com/iAmNaz>@iAmNaz</denchmark-link>\n ,\n As a matter of fact - I've just finished fixing this bug, the fix is coming up in a few hours \ud83d\ude00.\n As for a workaround - there are two simple options:\n \n When you're calling  create()  - pass in the param validation_set=None. This will train the model without a validation set.\n Use your own validation set. If you've already saved aside a few of the training sessions - just pass them in as another SFrame, to the validation_set param.\n For example:\n \n <denchmark-code>train = tc.SFrame(sessions_1-200.csv)\n valid = tc.Sframe(sessions_201-250.csv)\n model = tc.activity_classifier.create(train, ... , validation_set=valid)\n </denchmark-code>\n \n Make sure to pass in whole sessions (don't split the same session between test and valid) and have even distribution of the target labels (e.g. \"walking\", \"running\" etc) in both training and validation sets.\n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "igiloh", "commentT": "2018-06-21T12:18:52Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/igiloh>@igiloh</denchmark-link>\n  I was able to process 192 sessions thanks to the second solution you shared! \n \t\t"}}}, "commit": {"commit_id": "741e62ef7e865f0e40d066a10ba508932850c18d", "commit_author": "Ilai Giloh", "commitT": "2018-07-12 20:18:04+03:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 9, "file_old_name": "src\\unity\\python\\turicreate\\test\\test_activity_classifier.py", "file_new_name": "src\\unity\\python\\turicreate\\test\\test_activity_classifier.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "175,176,177,178,179,180,181", "deleted_lines": null, "method_info": {"method_name": "test_create_auto_validation_set_typical", "method_params": "self", "method_startline": "175", "method_endline": "181"}}, "hunk_1": {"Ismethod": 1, "added_lines": "125,126,127", "deleted_lines": null, "method_info": {"method_name": "setUpClass", "method_params": "self", "method_startline": "125", "method_endline": "127"}}, "hunk_2": {"Ismethod": 1, "added_lines": "183,184,185,186,187,188,189,190,191,192,193,194,195", "deleted_lines": null, "method_info": {"method_name": "test_create_auto_validation_set_string_session_id", "method_params": "self", "method_startline": "183", "method_endline": "195"}}, "hunk_3": {"Ismethod": 1, "added_lines": "23,24,25,28,29,30,31,32,38,39,40", "deleted_lines": "22,25,26,27,28,29,35,39", "method_info": {"method_name": "_load_data", "method_params": "self", "method_startline": "22", "method_endline": "40"}}, "hunk_4": {"Ismethod": 1, "added_lines": "129,130,131,132,133,134,135,136", "deleted_lines": null, "method_info": {"method_name": "_create_auto_validation_set", "method_params": "self", "method_startline": "129", "method_endline": "136"}}, "hunk_5": {"Ismethod": 1, "added_lines": "23,24,25", "deleted_lines": "25", "method_info": {"method_name": "_load_data", "method_params": "self,num_examples,num_features,max_num_sessions,randomize_num_sessions,num_labels,prediction_window,enforce_all_sessions", "method_startline": "23", "method_endline": "25"}}, "hunk_6": {"Ismethod": 1, "added_lines": "168,169,170,171,172,173", "deleted_lines": null, "method_info": {"method_name": "test_create_auto_validation_set_small", "method_params": "self", "method_startline": "168", "method_endline": "173"}}, "hunk_7": {"Ismethod": 1, "added_lines": "53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69", "deleted_lines": null, "method_info": {"method_name": "_random_session_ids", "method_params": "num_examples,num_sessions", "method_startline": "53", "method_endline": "69"}}, "hunk_8": {"Ismethod": 1, "added_lines": "138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166", "deleted_lines": null, "method_info": {"method_name": "_test_random_split_by_session", "method_params": "self,num_sessions,is_small", "method_startline": "138", "method_endline": "166"}}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "src\\unity\\python\\turicreate\\toolkits\\activity_classifier\\_activity_classifier.py", "file_new_name": "src\\unity\\python\\turicreate\\toolkits\\activity_classifier\\_activity_classifier.py", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "167,168,169", "deleted_lines": "175,176,177,178,179,180"}}}, "file_2": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "src\\unity\\python\\turicreate\\toolkits\\activity_classifier\\util.py", "file_new_name": "src\\unity\\python\\turicreate\\toolkits\\activity_classifier\\util.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99", "deleted_lines": "71,72,73,74", "method_info": {"method_name": "random_split_by_session", "method_params": "dataset,session_id,fraction,seed", "method_startline": "17", "method_endline": "99"}}, "hunk_1": {"Ismethod": 1, "added_lines": "90,91,92,93,94", "deleted_lines": null, "method_info": {"method_name": "random_split_by_session.random_session_pick", "method_params": "session_id", "method_startline": "90", "method_endline": "94"}}}}}}}