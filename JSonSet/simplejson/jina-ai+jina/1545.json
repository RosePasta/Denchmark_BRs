{"BR": {"BR_id": "1545", "BR_author": "JoanFM", "BRopenT": "2020-12-27T13:05:50Z", "BRcloseT": "2020-12-28T12:54:26Z", "BR_text": {"BRsummary": "Index stored under metas['workspace']/None-{root.metas.pea_id}/ even when no `parallelism` is used", "BRdescription": "\n Describe the bug\n FaissIndexer could not be built. ( I think the reason why many Hub executors failed to be built with latest jina version is also related to this).\n The reason is that some tests expect that the index files to be stored under metas['workspace']/index_filename. However, the path is stored under  metas['workspace']/None-{root.metas.pea_id}/index_filename.\n I think the problem comes when the JAML module was added.\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "JoanFM", "commentT": "2020-12-28T08:11:42Z", "comment_text": "\n \t\tRelated to self reference in metas:\n <denchmark-code>pea_id: ${{root.metas.pea_id}}  # this may result in self-referred\n separated_workspace: ${{root.metas.separated_workspace}}  # this may result in self-referred\n </denchmark-code>\n \n \t\t"}}}, "commit": {"commit_id": "bd776bfc27cb8abfdc13580ebf5bff048e42fd5a", "commit_author": "Joan Fontanals", "commitT": "2020-12-28 13:54:25+01:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "jina\\executors\\__init__.py", "file_new_name": "jina\\executors\\__init__.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "200,206,209", "deleted_lines": "201,206,207,209", "method_info": {"method_name": "_fill_metas", "method_params": "self,_metas", "method_startline": "174", "method_endline": "211"}}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "jina\\executors\\metas.py", "file_new_name": "jina\\executors\\metas.py", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "79,87,95", "deleted_lines": "79,87,95"}}}, "file_2": {"file_change_type": "MODIFY", "file_Nmethod": 5, "file_old_name": "jina\\jaml\\__init__.py", "file_new_name": "jina\\jaml\\__init__.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "192,193,200,201,202,203,204,205,206", "deleted_lines": null, "method_info": {"method_name": "_resolve", "method_params": "v,p", "method_startline": "190", "method_endline": "207"}}, "hunk_1": {"Ismethod": 1, "added_lines": "98,99,100", "deleted_lines": "98", "method_info": {"method_name": "expand_dict", "method_params": "Dict,Dict,SimpleNamespace,None,resolve_cycle_ref,int", "method_startline": "98", "method_endline": "100"}}, "hunk_2": {"Ismethod": 1, "added_lines": "98,99,100,150,174,175,176,177,178,183,184,185,186,187,192,193,200,201,202,203,204", "deleted_lines": "98,171,172", "method_info": {"method_name": "expand_dict", "method_params": "Dict,Dict,resolve_cycle_ref,int", "method_startline": "98", "method_endline": "204"}}, "hunk_3": {"Ismethod": 1, "added_lines": "150,174,175,176,177", "deleted_lines": "171,172", "method_info": {"method_name": "expand_dict._sub", "method_params": "v", "method_startline": "147", "method_endline": "177"}}, "hunk_4": {"Ismethod": 1, "added_lines": "150,174,175,176,177,178,183,184,185,186,187", "deleted_lines": "171,172", "method_info": {"method_name": "_sub", "method_params": "v", "method_startline": "149", "method_endline": "188"}}}}, "file_3": {"file_change_type": "ADD", "file_Nmethod": 0, "file_old_name": "tests\\integration\\issues\\github_1545\\__init__.py", "file_new_name": "tests\\integration\\issues\\github_1545\\__init__.py"}, "file_4": {"file_change_type": "ADD", "file_Nmethod": 0, "file_old_name": "None", "file_new_name": "tests\\integration\\issues\\github_1545\\test_executor_metas.py"}, "file_5": {"file_change_type": "ADD", "file_Nmethod": 0, "file_old_name": "tests\\integration\\issues\\github_936\\__init__.py", "file_new_name": "tests\\integration\\issues\\github_936\\__init__.py"}, "file_6": {"file_change_type": "ADD", "file_Nmethod": 0, "file_old_name": "tests\\integration\\issues\\github_969\\__init__.py", "file_new_name": "tests\\integration\\issues\\github_969\\__init__.py"}, "file_7": {"file_change_type": "ADD", "file_Nmethod": 0, "file_old_name": "tests\\integration\\issues\\github_976\\__init__.py", "file_new_name": "tests\\integration\\issues\\github_976\\__init__.py"}}}}