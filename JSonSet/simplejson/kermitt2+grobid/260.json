{"BR": {"BR_id": "260", "BR_author": "philonor", "BRopenT": "2017-11-15T11:20:10Z", "BRcloseT": "2017-11-22T18:25:13Z", "BR_text": {"BRsummary": "Batch mode: No Grobid home was found in classpath and no Grobid home location was not provided", "BRdescription": "\n Version: 0.5.0\n System: Ubuntu 16.04 LTS\n Problem:\n Running grobid in batch mode supplying a grobid home path fails with the following output:\n <denchmark-code>Nov 15, 2017 12:10:38 PM org.grobid.core.main.GrobidHomeFinder getGrobidHomePathOrLoadFromClasspath\n WARNING: No Grobid property was provided. Attempting to find Grobid home in the current directory...\n Nov 15, 2017 12:10:38 PM org.grobid.core.main.GrobidHomeFinder getGrobidHomePathOrLoadFromClasspath\n WARNING: Attempting to find and in the classpath...\n Exception in thread \"main\" org.grobid.core.exceptions.GrobidPropertyException: [GENERAL] No Grobid home was found in classpath and no Grobid home location was not provided\n </denchmark-code>\n \n The corresponding batch mode call:\n <denchmark-code>$ java -Xmx1G -jar ./grobid-0.5.0/grobid-core/build/libs/grobid-core-0.5.0-onejar.jar -gH /home/ubuntu/uni.mp/project/backend/webservices/grobid-0.5.0/grobid-home/ -dIn ./pdfs/ -dOut ./pdfs/ -r -exe processHeader\n </denchmark-code>\n \n If run from the grobid directory, it works, but specifying the -gH parameter isn't necessary:\n <denchmark-code>$ java -Xmx1G -jar ./grobid-core/build/libs/grobid-core-0.5.0-onejar.jar -gH /home/ubuntu/uni.mp/project/backend/webservices/grobid-0.5.0/grobid-home/ -dIn ./../pdfs/ -dOut ./../pdfs/ -r -exe processHeader\n </denchmark-code>\n \n <denchmark-code>$ java -Xmx1G -jar ./grobid-core/build/libs/grobid-core-0.5.0-onejar.jar -dIn ./../pdfs/ -dOut ./../pdfs/ -r -exe processHeader\n </denchmark-code>\n \n :\n It seems that <denchmark-link:https://github.com/kermitt2/grobid/blob/5d56c06e8170df5a493c3620d9b2210c767124ae/grobid-core/src/main/java/org/grobid/core/main/GrobidHomeFinder.java#L67>GrobidHomeFinder</denchmark-link>\n  only checks env variable but not commandline argument  ?\n Workaround:\n Create a symbolic link to grobid home in the directory grobid is called from:\n <denchmark-code>ln -s ./grobid-0.5.0/grobid-home ./grobid-home\n </denchmark-code>\n \n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "philonor", "commentT": "2017-11-15T12:26:25Z", "comment_text": "\n \t\tHi <denchmark-link:https://github.com/philonor>@philonor</denchmark-link>\n , thanks for the report. Indeed there is a problem because the grobid home provided is not used to configure the , which is looking on  as default location.\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "philonor", "commentT": "2017-11-15T12:28:14Z", "comment_text": "\n \t\tThe issue should be fixed in my last commit, feel free to close the issue or comment back in case of problems\n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "philonor", "commentT": "2017-11-22T08:47:15Z", "comment_text": "\n \t\tDear <denchmark-link:https://github.com/philonor>@philonor</denchmark-link>\n  did you try the fix I've done? Does it works?\n \t\t"}, "comments_3": {"comment_id": 4, "comment_author": "philonor", "commentT": "2017-11-22T18:25:12Z", "comment_text": "\n \t\tSorry <denchmark-link:https://github.com/lfoppiano>@lfoppiano</denchmark-link>\n  for my late reply, just checked your fix and it works now as expected. Thank you!\n I used master @ <denchmark-link:https://github.com/kermitt2/grobid/commit/593c3b8525f5ee013de527ff74142ab5eb7ceeb6>593c3b8</denchmark-link>\n , 3 commits after your specific commit.\n \t\t"}}}, "commit": {"commit_id": "0e1218786fa78300158cd6fe3522efe005c99d9e", "commit_author": "Luca Foppiano", "commitT": "2017-11-15 13:25:11+01:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 3, "file_old_name": "grobid-core\\src\\main\\java\\org\\grobid\\core\\main\\batch\\GrobidMain.java", "file_new_name": "grobid-core\\src\\main\\java\\org\\grobid\\core\\main\\batch\\GrobidMain.java", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "178,179,180,181,182", "deleted_lines": "173", "method_info": {"method_name": "GrobidMain::main", "method_params": "args", "method_startline": "172", "method_endline": "188"}}, "hunk_1": {"Ismethod": 1, "added_lines": "55,56,57,58,59,60,61,62,63", "deleted_lines": "55,56", "method_info": {"method_name": "GrobidMain::initProcess", "method_params": "grobidHome", "method_startline": "55", "method_endline": "63"}}, "hunk_2": {"Ismethod": 1, "added_lines": "55,56,57,58", "deleted_lines": "52,53,54,55,56", "method_info": {"method_name": "GrobidMain::initProcess", "method_params": "", "method_startline": "51", "method_endline": "58"}}}}}}}