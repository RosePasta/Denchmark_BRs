{"BR": {"BR_id": "148", "BR_author": "lfoppiano", "BRopenT": "2016-11-30T15:48:07Z", "BRcloseT": "2016-12-28T12:35:31Z", "BR_text": {"BRsummary": "Pdf annotation doesn't notify in case of errors", "BRdescription": "\n When the PDF annotation fails, the page keep showing \"Request server...\". Seems a problem in the javascript.\n To reproduce the problem:\n \n select tab PDF and then Add layer to PDF\n select the following PDF\n the \"Request server...\" remains independently from the fact that the request had failed with error 500 (see screenshot)\n \n <denchmark-link:https://cloud.githubusercontent.com/assets/15426/20759239/a87af97c-b71c-11e6-911e-01c5e799d9f2.png></denchmark-link>\n \n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "lfoppiano", "commentT": "2016-12-28T10:56:05Z", "comment_text": "\n \t\tSeems there is a regression with commit <denchmark-link:https://github.com/kermitt2/grobid/commit/4a64a2e84031f6aa577256d082323853ce6a0833>4a64a2e</denchmark-link>\n  (see changes in grobid.js)\n When the document is valid, there is still a 'request to server' information:\n <denchmark-link:https://cloud.githubusercontent.com/assets/15426/21520422/7cc5f078-ccf4-11e6-8091-442a87cafcc1.png></denchmark-link>\n \n When the document is invalid, nothing happear:\n <denchmark-link:https://cloud.githubusercontent.com/assets/15426/21520387/5951cf9a-ccf4-11e6-8064-b07ab4d9b891.png></denchmark-link>\n \n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "lfoppiano", "commentT": "2016-12-28T11:09:38Z", "comment_text": "\n \t\tok it's only the add layer to pdf service (/annotatePDF) right?\n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "lfoppiano", "commentT": "2016-12-28T11:18:30Z", "comment_text": "\n \t\tThe other service seems working fine. The 'request to server' is behaving correctly. I don't know in case of error, as I don't have a pdf that fails for that one.\n \t\t"}, "comments_3": {"comment_id": 4, "comment_author": "lfoppiano", "commentT": "2016-12-28T12:35:27Z", "comment_text": "\n \t\tSeems correct now :-)\n <denchmark-link:https://cloud.githubusercontent.com/assets/15426/21521792/533b297e-cd00-11e6-954f-a85a80fd2394.png></denchmark-link>\n \n \t\t"}}}, "commit": {"commit_id": "252e64f5378d4e96b16fe39649069803e056500c", "commit_author": "Luca Foppiano", "commitT": "2016-12-01 11:23:56+01:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 11, "file_old_name": "grobid-service\\src\\main\\webapp\\grobid\\grobid.js", "file_new_name": "grobid-service\\src\\main\\webapp\\grobid\\grobid.js", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "377,378,379,380", "deleted_lines": "377,378,379,380", "method_info": {"method_name": "(anonymous)", "method_params": "", "method_startline": "377", "method_endline": "380"}}, "hunk_1": {"Ismethod": 1, "added_lines": "324,325,326,327,328,329,330,331,332,333,334,335,336,337,338,339,340,341,342,343,344,345,346,347,348,349,350,351,352,353,354,355,356,357,358,359,360,361,362,363,364,365,366,367,368,369,370,371,372,373,374,375,376,377,378,379,380,381,382,383,384,385,386,387,388,389,390,391,392,393,394,395,396,397,398,399,400,401,402,403,404,405,406", "deleted_lines": "324,325,326,327,328,329,330,331,332,333,334,335,336,337,338,339,340,341,342,343,344,345,346,347,348,349,350,351,352,353,354,355,356,357,358,359,360,361,362,363,364,365,366,367,368,369,370,371,372,373,374,375,376,377,378,379,380,381,382,383,384,385,386,387,388,389,390,391,392,393,394,395,396,397,398,399,400,401,402,403,404,405,406", "method_info": {"method_name": "(anonymous)", "method_params": "pdf", "method_startline": "324", "method_endline": "406"}}, "hunk_2": {"Ismethod": 1, "added_lines": "240,241,242,243,244,245", "deleted_lines": "240,241,242,243", "method_info": {"method_name": "AjaxError2", "method_params": "message", "method_startline": "240", "method_endline": "245"}}, "hunk_3": {"Ismethod": 1, "added_lines": "890", "deleted_lines": null, "method_info": {"method_name": "annotatePatentBib", "method_params": "isPatent,thePos,url,page_height,page_width,theBibPos", "method_startline": "887", "method_endline": "942"}}, "hunk_4": {"Ismethod": 1, "added_lines": "338,339,340,341,342,343,344,345,346,347,348,349,350,351,352,353,354,355,356,357,358,359,360,361,362,363,364,365,366,367,368,369,370,371,372,373,374,375,376,377,378,379,380,381,382,383,384,385,386,387,388,389,390,391,392,393,394,395,396,397,398,399,400,401,402,403,404", "deleted_lines": "338,339,340,341,342,343,344,345,346,347,348,349,350,351,352,353,354,355,356,357,358,359,360,361,362,363,364,365,366,367,368,369,370,371,372,373,374,375,376,377,378,379,380,381,382,383,384,385,386,387,388,389,390,391,392,393,394,395,396,397,398,399,400,401,402,403,404", "method_info": {"method_name": "(anonymous)", "method_params": "page", "method_startline": "338", "method_endline": "404"}}, "hunk_5": {"Ismethod": 1, "added_lines": "291,292,293", "deleted_lines": "291,292,293", "method_info": {"method_name": "pdfjsframe.onload", "method_params": "", "method_startline": "291", "method_endline": "293"}}, "hunk_6": {"Ismethod": 1, "added_lines": "269,270,271,272,273,274,275,276,277,278,279,280,281,282,283,284,286,287,288,289,290,291,292,293,294,295,297,298,299,300,301,302,303,304,305,306,307,308,309,310,311,312,313,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,329,330,331,332,333,334,335,336,337,338,339,340,341,342,343,344,345,346,347,348,349,350,351,352,353,354,355,356,357,358,359,360,361,362,363,364,365,366,367,368,369,370,371,372,373,374,375,376,377,378,379,380,381,382,383,384,385,386,387,388,389,390,391,392,393,394,395,396,397,398,399,400,401,402,403,404,405,406,407,408,409,410,411,412,413,414,415,416,417,418,419,420,421,422", "deleted_lines": "269,270,271,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,287,288,289,290,291,292,293,294,295,296,297,298,299,300,301,302,303,304,305,306,307,308,309,310,311,312,313,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,329,330,331,332,333,334,335,336,337,338,339,340,341,342,343,344,345,346,347,348,349,350,351,352,353,354,355,356,357,358,359,360,361,362,363,364,365,366,367,368,369,370,371,372,373,374,375,376,377,378,379,380,381,382,383,384,385,386,387,388,389,390,391,392,393,394,395,396,397,398,399,400,401,402,403,404,405,406,407,409,410,411,412,413,415,416,417,418", "method_info": {"method_name": "submitQuery2", "method_params": "", "method_startline": "269", "method_endline": "422"}}, "hunk_7": {"Ismethod": 1, "added_lines": "319,320,321,322,323,324,325,326,327,328,329,330,331,332,333,334,335,336,337,338,339,340,341,342,343,344,345,346,347,348,349,350,351,352,353,354,355,356,357,358,359,360,361,362,363,364,365,366,367,368,369,370,371,372,373,374,375,376,377,378,379,380,381,382,383,384,385,386,387,388,389,390,391,392,393,394,395,396,397,398,399,400,401,402,403,404,405,406,407", "deleted_lines": "319,320,321,322,323,324,325,326,327,328,329,330,331,332,333,334,335,336,337,338,339,340,341,342,343,344,345,346,347,348,349,350,351,352,353,354,355,356,357,358,359,360,361,362,363,364,365,366,367,368,369,370,371,372,373,374,375,376,377,378,379,380,381,382,383,384,385,386,387,388,389,390,391,392,393,394,395,396,397,398,399,400,401,402,403,404,405,406,407", "method_info": {"method_name": "reader.onloadend", "method_params": "", "method_startline": "319", "method_endline": "407"}}, "hunk_8": {"Ismethod": 1, "added_lines": "282,283,284,286,287,288,289,290,291,292,293,294,295,297,298", "deleted_lines": "282,283,284,285,286,287,288,289,290,291,292,293,294,295,296,297,298", "method_info": {"method_name": "xhr.onreadystatechange", "method_params": "e", "method_startline": "282", "method_endline": "298"}}, "hunk_9": {"Ismethod": 1, "added_lines": "381,382,383,384,385,386,387,388,389,390,391,392,393,394,395,396,397,398,399,400,401,402,403", "deleted_lines": "381,382,383,384,385,386,387,388,389,390,391,392,393,394,395,396,397,398,399,400,401,402,403", "method_info": {"method_name": "(anonymous)", "method_params": "textContent", "method_startline": "381", "method_endline": "403"}}, "hunk_10": {"Ismethod": 1, "added_lines": "240,241,242,243", "deleted_lines": "240,241,242,243", "method_info": {"method_name": "AjaxError2", "method_params": "jqXHR,textStatus,errorThrown", "method_startline": "240", "method_endline": "243"}}}}}}}