{"BR": {"BR_id": "318", "BR_author": "hunterhector", "BRopenT": "2020-09-11T19:52:51Z", "BRcloseT": "2020-09-12T03:22:30Z", "BR_text": {"BRsummary": "Cannot pickle types such as metrics", "BRdescription": "\n <denchmark-h:h2>Description</denchmark-h>\n \n Users may encounter the following error when trying to pickle the objects with generic types, such as Texar metrics (<denchmark-link:https://github.com/asyml/texar-pytorch/blob/master/texar/torch/evals/metrics.py>https://github.com/asyml/texar-pytorch/blob/master/texar/torch/evals/metrics.py</denchmark-link>\n ), as shown in the following stack trace:\n <denchmark-link:https://user-images.githubusercontent.com/1015991/92966959-740b3100-f446-11ea-89b5-8ac46996c383.png></denchmark-link>\n \n This is a known bug in Python 3.6 when pickling the genric types <denchmark-link:https://github.com/python/typing/issues/511>python/typing#511</denchmark-link>\n \n <denchmark-h:h2>Workaround</denchmark-h>\n \n The easiest way to get around this is to upgrade to 3.7, which fixes this problem here <denchmark-link:https://github.com/python/cpython/pull/6216>python/cpython#6216</denchmark-link>\n \n <denchmark-h:h2>Action needed.</denchmark-h>\n \n However, we may consider providing workarounds in Texar. It is also suggested to add unit tests on serialization for affected classes including the metrics class.\n \t"}, "comments": {}}, "commit": {"commit_id": "a2f11862c0029f879e4e0b6175b5115adedd87e1", "commit_author": "Zecong Hu", "commitT": "2020-09-11 23:22:29-04:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "tests\\run\\executor_test.py", "file_new_name": "tests\\run\\executor_test.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "114", "deleted_lines": "114", "method_info": {"method_name": "test_train_loop", "method_params": "self", "method_startline": "101", "method_endline": "135"}}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "tests\\run\\metric\\classification_test.py", "file_new_name": "tests\\run\\metric\\classification_test.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "81,82,83,84,85,86,87,88,89,90,91,92", "deleted_lines": null, "method_info": {"method_name": "test_pickle_unpickle", "method_params": "self", "method_startline": "81", "method_endline": "92"}}}}, "file_2": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "texar\\torch\\run\\metric\\base_metric.py", "file_new_name": "texar\\torch\\run\\metric\\base_metric.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "38,39,40", "deleted_lines": null, "method_info": {"method_name": "__getitem__", "method_params": "cls,params", "method_startline": "38", "method_endline": "40"}}}}}}}