{"BR": {"BR_id": "234", "BR_author": "gpengzhi", "BRopenT": "2019-10-15T04:07:38Z", "BRcloseT": "2019-11-21T03:55:51Z", "BR_text": {"BRsummary": "A (potential bug) in data module", "BRdescription": "\n Run seq2seq_attn example.\n python prepare_data.py --data toy_copy\n \n python seq2seq_attn.py --config-model config_model --config-data config_toy_copy\n Have the following error. I believe there was no such error before.\n <denchmark-code>step=0, loss=36.4250\n step=50, loss=22.1697\n step=100, loss=13.6045\n step=150, loss=6.7436\n step=200, loss=4.6603\n step=250, loss=2.5102\n step=300, loss=0.2983\n Traceback (most recent call last):\n   File \"seq2seq_attn.py\", line 180, in <module>\n     main()\n   File \"seq2seq_attn.py\", line 166, in main\n     _train_epoch()\n   File \"seq2seq_attn.py\", line 131, in _train_epoch\n     for batch in data_iterator:\n   File \"/Users/pengzhi.gao/Desktop/my_git/texar-pytorch/texar/torch/data/data/data_iterators.py\", line 426, in __next__\n     not self.dataset.hparams.allow_smaller_final_batch):\n AttributeError: '_SPDataLoaderIter' object has no attribute 'dataset'\n </denchmark-code>\n \n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "gpengzhi", "commentT": "2019-10-15T04:10:15Z", "comment_text": "\n \t\tCould you confirm which PyTorch version you're using? _SPDataLoaderIter is something we defined but only exists in PyTorch versions 1.2+, and it should be tested thoroughly in unit tests (SP stands for \"single process\" so it's indeed the most trivial case).\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "gpengzhi", "commentT": "2019-10-15T04:13:25Z", "comment_text": "\n \t\tHmm, it's probably a compatibility issue with PyTorch 1.3. They've renamed variables in their data modules so everything is private and dataset became _dataset.\n <denchmark-link:https://github.com/pytorch/pytorch/blob/30d9316f35cb1acab67e680ddc48279d84c7c6fe/torch/utils/data/dataloader.py#L302>https://github.com/pytorch/pytorch/blob/30d9316f35cb1acab67e680ddc48279d84c7c6fe/torch/utils/data/dataloader.py#L302</denchmark-link>\n \n I'm planning on rewriting the core code of data module so I might as well fix it with <denchmark-link:https://github.com/asyml/texar-pytorch/issues/225>#225</denchmark-link>\n .\n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "gpengzhi", "commentT": "2019-10-15T04:44:34Z", "comment_text": "\n \t\tAh, I see. I think it is a compatibility issue with PyTorch 1.3.0.\n \t\t"}}}, "commit": {"commit_id": "53d8eade02ae8d578fad1250dd95130ddc20a3b8", "commit_author": "Pengzhi Gao", "commitT": "2019-11-20 22:55:50-05:00", "changed_files": {"file_0": {"file_change_type": "ADD", "file_Nmethod": 0, "file_old_name": "None", "file_new_name": ".codecov.yml"}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": ".travis.yml", "file_new_name": ".travis.yml", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "14,23,24,30,40,41,44,47", "deleted_lines": "27,37,38,41,44"}}}, "file_2": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "README.md", "file_new_name": "README.md", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "116", "deleted_lines": "116"}}}, "file_3": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "requirements.txt", "file_new_name": "requirements.txt", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "1", "deleted_lines": "1"}}}, "file_4": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "setup.py", "file_new_name": "setup.py", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "43", "deleted_lines": "43"}}}, "file_5": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "texar\\torch\\data\\data\\__init__.py", "file_new_name": "texar\\torch\\data\\data\\__init__.py", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "25", "deleted_lines": null}}}, "file_6": {"file_change_type": "MODIFY", "file_Nmethod": 12, "file_old_name": "texar\\torch\\data\\data\\data_iterators.py", "file_new_name": "texar\\torch\\data\\data\\data_iterators.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "91,92,93,94", "deleted_lines": "87,88,89,90,91,92,93,94", "method_info": {"method_name": "_iterator_unknown_size", "method_params": "self", "method_startline": "87", "method_endline": "94"}}, "hunk_1": {"Ismethod": 1, "added_lines": null, "deleted_lines": "125,126,127,128", "method_info": {"method_name": "__len__", "method_params": "self", "method_startline": "125", "method_endline": "128"}}, "hunk_2": {"Ismethod": 1, "added_lines": null, "deleted_lines": "283,284", "method_info": {"method_name": "__init__", "method_params": "self,int,None,None", "method_startline": "283", "method_endline": "284"}}, "hunk_3": {"Ismethod": 1, "added_lines": "96", "deleted_lines": "96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123", "method_info": {"method_name": "__iter__", "method_params": "self", "method_startline": "96", "method_endline": "123"}}, "hunk_4": {"Ismethod": 1, "added_lines": null, "deleted_lines": "205,206,207,208,209,210,211,212,213,214,215,216", "method_info": {"method_name": "_iterator_given_size", "method_params": "self,size", "method_startline": "205", "method_endline": "216"}}, "hunk_5": {"Ismethod": 1, "added_lines": null, "deleted_lines": "244,245,246,247,248", "method_info": {"method_name": "reset_batch", "method_params": "self", "method_startline": "244", "method_endline": "248"}}, "hunk_6": {"Ismethod": 1, "added_lines": null, "deleted_lines": "250,251,252,253,254,255,256,257,258,259,260,261,262", "method_info": {"method_name": "add_example", "method_params": "self,Example", "method_startline": "250", "method_endline": "262"}}, "hunk_7": {"Ismethod": 1, "added_lines": null, "deleted_lines": "78,79,80,81,82,83,84,85", "method_info": {"method_name": "_iterator_given_size", "method_params": "self,int", "method_startline": "78", "method_endline": "85"}}, "hunk_8": {"Ismethod": 1, "added_lines": null, "deleted_lines": "167,168", "method_info": {"method_name": "__init__", "method_params": "self,Any,bool,None", "method_startline": "167", "method_endline": "168"}}, "hunk_9": {"Ismethod": 1, "added_lines": null, "deleted_lines": "201,202,203", "method_info": {"method_name": "__init__", "method_params": "self,Any,int", "method_startline": "201", "method_endline": "203"}}, "hunk_10": {"Ismethod": 1, "added_lines": null, "deleted_lines": "320,321", "method_info": {"method_name": "__init__", "method_params": "self,Any,SamplerBase", "method_startline": "320", "method_endline": "321"}}, "hunk_11": {"Ismethod": 1, "added_lines": null, "deleted_lines": "72,73,74,75,76", "method_info": {"method_name": "__init__", "method_params": "self,Any", "method_startline": "72", "method_endline": "76"}}}}, "file_7": {"file_change_type": "MODIFY", "file_Nmethod": 6, "file_old_name": "texar\\torch\\data\\data\\data_iterators_test.py", "file_new_name": "texar\\torch\\data\\data\\data_iterators_test.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": null, "deleted_lines": "67,68,69,70,71,72,73,74,75", "method_info": {"method_name": "test_non_lazy_loading", "method_params": "self", "method_startline": "67", "method_endline": "75"}}, "hunk_1": {"Ismethod": 1, "added_lines": null, "deleted_lines": "46,47,48", "method_info": {"method_name": "_test_data", "method_params": "self,DatasetBase,bool,bool", "method_startline": "46", "method_endline": "48"}}, "hunk_2": {"Ismethod": 1, "added_lines": null, "deleted_lines": "27,28", "method_info": {"method_name": "__init__", "method_params": "self,int,str,str,bool", "method_startline": "27", "method_endline": "28"}}, "hunk_3": {"Ismethod": 1, "added_lines": null, "deleted_lines": "77,78,79,80,81,82", "method_info": {"method_name": "test_lazy_loading", "method_params": "self", "method_startline": "77", "method_endline": "82"}}, "hunk_4": {"Ismethod": 1, "added_lines": null, "deleted_lines": "41,42,43", "method_info": {"method_name": "setUp", "method_params": "self", "method_startline": "41", "method_endline": "43"}}, "hunk_5": {"Ismethod": 1, "added_lines": null, "deleted_lines": "61,62,63,64,65", "method_info": {"method_name": "test_known_size", "method_params": "self", "method_startline": "61", "method_endline": "65"}}}}, "file_8": {"file_change_type": "ADD", "file_Nmethod": 0, "file_old_name": "None", "file_new_name": "texar\\torch\\data\\data\\data_iterators_utils.py"}, "file_9": {"file_change_type": "ADD", "file_Nmethod": 0, "file_old_name": "None", "file_new_name": "texar\\torch\\data\\data\\sampler.py"}, "file_10": {"file_change_type": "ADD", "file_Nmethod": 0, "file_old_name": "None", "file_new_name": "texar\\torch\\data\\data\\sampler_test.py"}}}}