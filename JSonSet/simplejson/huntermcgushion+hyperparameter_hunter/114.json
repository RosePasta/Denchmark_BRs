{"BR": {"BR_id": "114", "BR_author": "HunterMcGushion", "BRopenT": "2019-01-11T03:38:58Z", "BRcloseT": "2019-01-11T08:11:50Z", "BR_text": {"BRsummary": "AttributeError hashing `Metric` when `Environment.root_results_path` is None", "BRdescription": "\n <denchmark-h:h1>Problem</denchmark-h>\n \n \n AttributeError: 'Metric' object has no attribute '__name__' is raised when attempting to use an Environment with root_results_path=None\n This is a problem because it disables using Environment without root_results_path, which needs to be allowed in order to run experiments without saving any result files\n \n <denchmark-h:h1>Code to reproduce error</denchmark-h>\n \n from hyperparameter_hunter import Environment, CVExperiment\n from hyperparameter_hunter.utils.learning_utils import get_breast_cancer_data\n from xgboost import XGBClassifier\n \n env = Environment(\n         train_dataset=get_breast_cancer_data(target='target'),\n         # root_results_path=\"HyperparameterHunterAssets\",\n         metrics_map=[\"roc_auc_score\"],\n         cross_validation_params=dict(n_splits=5),\n )\n \n exp = CVExperiment(model_initializer=XGBClassifier, model_init_params=dict())\n <denchmark-h:h1>Error traceback</denchmark-h>\n \n <denchmark-code>'Metric' object has no attribute '__name__'\n Traceback (most recent call last):\n   File \"temp_hunter_trace.py\", line 42, in <module>\n     _execute()\n   File \"temp_hunter_trace.py\", line 27, in _execute\n     cross_validation_params=dict(n_splits=5),\n   File \"/Users/Hunter/hyperparameter_hunter/hyperparameter_hunter/environment.py\", line 395, in __init__\n     self.environment_workflow()\n   File \"/Users/Hunter/hyperparameter_hunter/hyperparameter_hunter/environment.py\", line 418, in environment_workflow\n     self.generate_cross_experiment_key()\n   File \"/Users/Hunter/hyperparameter_hunter/hyperparameter_hunter/environment.py\", line 614, in generate_cross_experiment_key\n     self.cross_experiment_key = CrossExperimentKeyMaker(parameters)\n   File \"/Users/Hunter/hyperparameter_hunter/hyperparameter_hunter/key_handler.py\", line 310, in __init__\n     KeyMaker.__init__(self, parameters, **kwargs)\n   File \"/Users/Hunter/hyperparameter_hunter/hyperparameter_hunter/key_handler.py\", line 104, in __init__\n     self.make_key()\n   File \"/Users/Hunter/hyperparameter_hunter/hyperparameter_hunter/key_handler.py\", line 256, in make_key\n     self.key = make_hash_sha256(self._filter_parameters_to_hash(deepcopy(self.parameters)))\n   File \"/Users/Hunter/hyperparameter_hunter/hyperparameter_hunter/key_handler.py\", line 476, in make_hash_sha256\n     hasher.update(repr(to_hashable(obj, **kwargs)).encode())\n   File \"/Users/Hunter/hyperparameter_hunter/hyperparameter_hunter/key_handler.py\", line 499, in to_hashable\n     return tuple(sorted((_k, to_hashable(_v, **kwargs)) for _k, _v in obj.items()))\n   File \"/Users/Hunter/hyperparameter_hunter/hyperparameter_hunter/key_handler.py\", line 499, in <genexpr>\n     return tuple(sorted((_k, to_hashable(_v, **kwargs)) for _k, _v in obj.items()))\n   File \"/Users/Hunter/hyperparameter_hunter/hyperparameter_hunter/key_handler.py\", line 499, in to_hashable\n     return tuple(sorted((_k, to_hashable(_v, **kwargs)) for _k, _v in obj.items()))\n   File \"/Users/Hunter/hyperparameter_hunter/hyperparameter_hunter/key_handler.py\", line 499, in <genexpr>\n     return tuple(sorted((_k, to_hashable(_v, **kwargs)) for _k, _v in obj.items()))\n   File \"/Users/Hunter/hyperparameter_hunter/hyperparameter_hunter/key_handler.py\", line 499, in to_hashable\n     return tuple(sorted((_k, to_hashable(_v, **kwargs)) for _k, _v in obj.items()))\n   File \"/Users/Hunter/hyperparameter_hunter/hyperparameter_hunter/key_handler.py\", line 499, in <genexpr>\n     return tuple(sorted((_k, to_hashable(_v, **kwargs)) for _k, _v in obj.items()))\n   File \"/Users/Hunter/hyperparameter_hunter/hyperparameter_hunter/key_handler.py\", line 495, in to_hashable\n     return hash_callable(obj, **kwargs)\n   File \"/Users/Hunter/hyperparameter_hunter/hyperparameter_hunter/key_handler.py\", line 555, in hash_callable\n     name = None if ignore_name else obj.__name__\n AttributeError: 'Metric' object has no attribute '__name__'\n </denchmark-code>\n \n \t"}, "comments": {}}, "commit": {"commit_id": "193db170aed32ab6ea3c4d3a3655355cea375645", "commit_author": "Hunter McGushion", "commitT": "2019-01-11 00:06:28-08:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "hyperparameter_hunter\\key_handler.py", "file_new_name": "hyperparameter_hunter\\key_handler.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "186,187,188,189,190,191", "deleted_lines": "189,190,191,192,193", "method_info": {"method_name": "handle_complex_types.visit", "method_params": "path,key,value", "method_startline": "153", "method_endline": "194"}}, "hunk_1": {"Ismethod": 1, "added_lines": "186,187,188,189,190,191", "deleted_lines": "144,145,146,189,190,191,192,193", "method_info": {"method_name": "handle_complex_types", "method_params": "self", "method_startline": "140", "method_endline": "204"}}}}}}}