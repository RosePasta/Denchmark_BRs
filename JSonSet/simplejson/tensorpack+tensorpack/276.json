{"BR": {"BR_id": "276", "BR_author": "Skylion007", "BRopenT": "2017-05-21T21:03:07Z", "BRcloseT": "2017-05-22T03:37:04Z", "BR_text": {"BRsummary": "get_global_step changes seems to have broke examples.", "BRdescription": "\n The new code for get_global_step_var and such seems to have broken certain examples such as DiscoGAN.  Biggest issue seems to be the dtype is an int64_ref instead of an int64 so functions like piecewise constants do not seem to work. Furthermore, despite ending in the word _var it appears to return a tensor instead?\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "Skylion007", "commentT": "2017-05-21T21:08:16Z", "comment_text": "\n \t\tAh, figured it out. It's the same bug the was encountered in the rate portion of DiscoGAN. get_global_step_var()'s return value needs to be wrapped in a tf.identity call.\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "Skylion007", "commentT": "2017-05-21T21:57:33Z", "comment_text": "\n \t\tYou can use the identity workaround. I'll also prepare a fix.\n \t\t"}}}, "commit": {"commit_id": "900a7eb0950ef02edaab090d3ab2cf0a6d116e77", "commit_author": "Yuxin Wu", "commitT": "2017-05-21 20:36:33-07:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "examples\\DoReFa-Net\\dorefa.py", "file_new_name": "examples\\DoReFa-Net\\dorefa.py", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "7,10", "deleted_lines": "7,10"}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "tensorpack\\models\\regularize.py", "file_new_name": "tensorpack\\models\\regularize.py", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "9,16", "deleted_lines": "9,16"}}}, "file_2": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "tensorpack\\tfutils\\common.py", "file_new_name": "tensorpack\\tfutils\\common.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "58,59,60,61,62,63,64,65,66", "deleted_lines": "60,61,62,63,64,65,66", "method_info": {"method_name": "get_global_step_var", "method_params": "", "method_startline": "52", "method_endline": "66"}}}}, "file_3": {"file_change_type": "MODIFY", "file_Nmethod": 3, "file_old_name": "tensorpack\\utils\\argtools.py", "file_new_name": "tensorpack\\utils\\argtools.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58", "deleted_lines": null, "method_info": {"method_name": "graph_memoized", "method_params": "func", "method_startline": "41", "method_endline": "58"}}, "hunk_1": {"Ismethod": 1, "added_lines": "49,50,51", "deleted_lines": null, "method_info": {"method_name": "graph_memoized.func_with_graph_arg", "method_params": "args,kwargs", "method_startline": "49", "method_endline": "51"}}, "hunk_2": {"Ismethod": 1, "added_lines": "53,54,55,56,57", "deleted_lines": null, "method_info": {"method_name": "graph_memoized.wrapper", "method_params": "args,kwargs", "method_startline": "53", "method_endline": "57"}}}}}}}