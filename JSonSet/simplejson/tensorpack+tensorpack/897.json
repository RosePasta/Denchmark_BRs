{"BR": {"BR_id": "897", "BR_author": "thuzhf", "BRopenT": "2018-09-17T11:56:57Z", "BRcloseT": "2018-09-17T15:59:38Z", "BR_text": {"BRsummary": "UnboundLocalError: local variable 'raw_devices' referenced before assignment", "BRdescription": "\n \n \n \n tensorpack/tensorpack/graph_builder/training.py\n \n \n         Lines 350 to 355\n       in\n       801e292\n \n \n \n \n \n \n  if ps_device == 'gpu': \n \n \n \n  raw_devices = ['/gpu:{}'.format(k) for k in self.towers] \n \n \n \n  devices = [LeastLoadedDeviceSetter(d, raw_devices) for d in raw_devices] \n \n \n \n  else: \n \n \n \n  devices = [tf.train.replica_device_setter( \n \n \n \n  worker_device=d, ps_device='/cpu:0', ps_tasks=1) for d in raw_devices] \n \n \n \n \n \n I have reviewed this file, and by comparison I think raw_devices = ['/gpu:{}'.format(k) for k in self.towers] in line 351 should probably be defined before the if-else statement just like line 153-158 in the same file:\n \n \n \n tensorpack/tensorpack/graph_builder/training.py\n \n \n         Lines 153 to 158\n       in\n       801e292\n \n \n \n \n \n \n  raw_devices = ['/gpu:{}'.format(k) for k in self.towers] \n \n \n \n  if self.ps_device == 'gpu': \n \n \n \n  devices = [LeastLoadedDeviceSetter(d, raw_devices) for d in raw_devices] \n \n \n \n  else: \n \n \n \n  devices = [tf.train.replica_device_setter( \n \n \n \n  worker_device=d, ps_device='/cpu:0', ps_tasks=1) for d in raw_devices] \n \n \n \n \n \n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "thuzhf", "commentT": "2018-09-17T15:11:36Z", "comment_text": "\n \t\tThanks \u653e\u795e\uff01\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "thuzhf", "commentT": "2018-09-17T16:28:11Z", "comment_text": "\n \t\tWelcome \u6615\u54e5\uff01\n \t\t"}}}, "commit": {"commit_id": "e943200b1d86cc9254d05118872b40b20c685825", "commit_author": "Yuxin Wu", "commitT": "2018-09-17 08:59:16-07:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "tensorpack\\graph_builder\\training.py", "file_new_name": "tensorpack\\graph_builder\\training.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "350", "deleted_lines": "351", "method_info": {"method_name": "build", "method_params": "self,get_grad_fn,get_opt_fn", "method_startline": "339", "method_endline": "377"}}}}}}}