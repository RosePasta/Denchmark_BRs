{"BR": {"BR_id": "614", "BR_author": "dpkingma", "BRopenT": "2018-01-27T19:04:22Z", "BRcloseT": "2018-01-27T19:29:03Z", "BR_text": {"BRsummary": "imgaug.Saturation", "BRdescription": "\n \n \n What I did: Use fbresnet_augmentor in tensorpack/examples/Inception/imagenet_utils.py.\n \n \n What I observed: when using the fbresnet_augmentor in the code, some augmented images contain overly brightly colored artifacts:\n \n \n <denchmark-link:https://user-images.githubusercontent.com/2432243/35475299-b5a259e8-0350-11e8-89ec-821dd006a2d2.png></denchmark-link>\n \n This is unexpected to me, since the augmented data should resemble natural images.\n When I comment out the line  in , then there are no such artifacts:\n <denchmark-link:https://user-images.githubusercontent.com/2432243/35475300-b5b49e78-0350-11e8-93ab-894e8ee5c38c.png></denchmark-link>\n \n There might be a problem with the imgaug.Saturation() function.\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "dpkingma", "commentT": "2018-01-27T19:10:08Z", "comment_text": "\n \t\tIndeed! I think it's a uint8 overflow. After the saturation changes, values could go out of 255.\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "dpkingma", "commentT": "2018-01-27T19:15:19Z", "comment_text": "\n \t\tYeah, looks like uint8 overflow/underflow.\n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "dpkingma", "commentT": "2018-01-27T19:17:36Z", "comment_text": "\n \t\tPushed a fix. Clipping was used in most other augmentors but somehow saturation was missing.\n \t\t"}, "comments_3": {"comment_id": 4, "comment_author": "dpkingma", "commentT": "2018-01-27T19:28:55Z", "comment_text": "\n \t\tAwesome! Thanks for the quick fix!\n \t\t"}}}, "commit": {"commit_id": "943364bc30bb4bebb8e0bedc940d8002781d5de4", "commit_author": "Yuxin Wu", "commitT": "2018-01-27 11:16:40-08:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "tensorpack\\dataflow\\imgaug\\imgproc.py", "file_new_name": "tensorpack\\dataflow\\imgaug\\imgproc.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "243,244", "deleted_lines": null, "method_info": {"method_name": "_augment", "method_params": "self,img,v", "method_startline": "238", "method_endline": "245"}}}}}}}