{"BR": {"BR_id": "1163", "BR_author": "elvinx", "BRopenT": "2019-12-12T10:42:32Z", "BRcloseT": "2019-12-13T21:39:34Z", "BR_text": {"BRsummary": "Processing job: Cannot specify s3 uri as code location", "BRdescription": "\n According to the docs, one can specify either S3 URI or a local path as code location while running processing jobs with SageMaker:\n <denchmark-link:https://user-images.githubusercontent.com/8008982/70704632-b1356d80-1cd2-11ea-844e-21f75db5b454.png></denchmark-link>\n \n This seems not to be the case.\n When you specify the s3 path, SageMaker Python SDK still tries to create a default S3 bucket and upload the code to it.\n I dug into the code base and can see that there is no check if the given path is an S3 path or not and default behavior is always to expect a local path.\n <denchmark-link:https://github.com/aws/sagemaker-python-sdk/blob/master/src/sagemaker/processing.py#L373>https://github.com/aws/sagemaker-python-sdk/blob/master/src/sagemaker/processing.py#L373</denchmark-link>\n \n <denchmark-link:https://user-images.githubusercontent.com/8008982/70705029-85ff4e00-1cd3-11ea-98d7-21e0babb995b.png></denchmark-link>\n \n <denchmark-link:https://user-images.githubusercontent.com/8008982/70705213-e8584e80-1cd3-11ea-9584-acf21d30515a.png></denchmark-link>\n \n Expected behavior:\n Allow S3 paths as a code location as stated in the docs.\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "elvinx", "commentT": "2019-12-12T20:20:58Z", "comment_text": "\n \t\tHi <denchmark-link:https://github.com/elvinx>@elvinx</denchmark-link>\n , thanks for bringing this to our attention. We'll address this and release a fix as soon as we're able.\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "elvinx", "commentT": "2019-12-13T03:20:52Z", "comment_text": "\n \t\tThanks for reporting this <denchmark-link:https://github.com/elvinx>@elvinx</denchmark-link>\n  .\n I sent a pull request with the fix and tests: <denchmark-link:https://github.com/aws/sagemaker-python-sdk/pull/1167>#1167</denchmark-link>\n \n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "elvinx", "commentT": "2019-12-13T13:08:08Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/andremoeller>@andremoeller</denchmark-link>\n  Thank you!\n \t\t"}, "comments_3": {"comment_id": 4, "comment_author": "elvinx", "commentT": "2019-12-13T21:39:34Z", "comment_text": "\n \t\tHey <denchmark-link:https://github.com/elvinx>@elvinx</denchmark-link>\n  ,\n This fix has been released: <denchmark-link:https://github.com/aws/sagemaker-python-sdk/releases/tag/v1.47.0>https://github.com/aws/sagemaker-python-sdk/releases/tag/v1.47.0</denchmark-link>\n \n You can install this newest release into a notebook instance by:\n \n Running !pip install -U --user sagemaker\n Restarting the kernel.\n \n I'm closing this issue. Please feel free to reach out or reopen this if you run into issues. Thanks!\n \t\t"}}}, "commit": {"commit_id": "425390e895d016da996edfd48ddb8e905ea82ab9", "commit_author": "andre", "commitT": "2019-12-13 10:56:24-08:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 3, "file_old_name": "src\\sagemaker\\processing.py", "file_new_name": "src\\sagemaker\\processing.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "393,394,397,398,399,400,401,402,403,404,405,406,407,408,409,410", "deleted_lines": "392,393,394,397,398,401,402,404,406,407,408,410", "method_info": {"method_name": "_get_user_script_name", "method_params": "self,code", "method_startline": "392", "method_endline": "410"}}, "hunk_1": {"Ismethod": 1, "added_lines": "393,394,397,398,399,400,401,402,403,404", "deleted_lines": "393,394,397,398,401,402,404", "method_info": {"method_name": "_get_user_code_name", "method_params": "self,code", "method_startline": "393", "method_endline": "404"}}, "hunk_2": {"Ismethod": 1, "added_lines": "406,407,408,409,410,411,412,413,416,417,419,420,421,422,423,424,425,426,427,428,429,430,431,432,433,434,435,436,437,438,439,441,442,443,445", "deleted_lines": "406,407,408,410", "method_info": {"method_name": "_handle_user_code_url", "method_params": "self,code", "method_startline": "406", "method_endline": "445"}}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "src\\sagemaker\\sklearn\\processing.py", "file_new_name": "src\\sagemaker\\sklearn\\processing.py", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "29,30,89,90,91,92,93,94,95", "deleted_lines": null}}}, "file_2": {"file_change_type": "MODIFY", "file_Nmethod": 27, "file_old_name": "tests\\unit\\test_processing.py", "file_new_name": "tests\\unit\\test_processing.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "173,174", "deleted_lines": null, "method_info": {"method_name": "test_script_processor_works_with_absolute_local_path", "method_params": "exists_mock,isfile_mock,sagemaker_session", "method_startline": "173", "method_endline": "174"}}, "hunk_1": {"Ismethod": 1, "added_lines": "133,134", "deleted_lines": "133,134", "method_info": {"method_name": "test_sklearn_processor_errors_with_invalid_framework_version", "method_params": "exists_mock,isfile_mock,sagemaker_session", "method_startline": "133", "method_endline": "134"}}, "hunk_2": {"Ismethod": 1, "added_lines": "221,222,223,224,225,226,227,228", "deleted_lines": "221,222,223,224,225,226,227,228", "method_info": {"method_name": "test_script_processor_works_with_s3_code_url", "method_params": "exists_mock,isfile_mock,sagemaker_session", "method_startline": "221", "method_endline": "228"}}, "hunk_3": {"Ismethod": 1, "added_lines": "186,187", "deleted_lines": null, "method_info": {"method_name": "test_script_processor_works_with_relative_local_path", "method_params": "exists_mock,isfile_mock,sagemaker_session", "method_startline": "186", "method_endline": "187"}}, "hunk_4": {"Ismethod": 1, "added_lines": "335,336,342,343,344,345,346,347,348,349,350,351,352,353,354,357,359,360,361,362,363,364,365,366,367,368,369,370,371,372,373,374,375,377,378,379,380,381,382,383,384,385,386,387,388", "deleted_lines": "335,336,337,338,339,340,341,342,343,344,345,346,347,348,349,350,351,352,353,354,355,359,360,365,369,371,373,376,379,381,382", "method_info": {"method_name": "test_processor_with_all_parameters", "method_params": "sagemaker_session", "method_startline": "335", "method_endline": "388"}}, "hunk_5": {"Ismethod": 1, "added_lines": "198,199", "deleted_lines": "198,199", "method_info": {"method_name": "test_script_processor_works_with_relative_local_path_with_directories", "method_params": "exists_mock,isfile_mock,sagemaker_session", "method_startline": "198", "method_endline": "199"}}, "hunk_6": {"Ismethod": 1, "added_lines": "73,74,76,79,80,81,82,83,84,85,86,87,88,89,90,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,122,123,124,125,126,127,128", "deleted_lines": "73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,115,116,117,119,125,126,128", "method_info": {"method_name": "test_sklearn_with_all_parameters", "method_params": "exists_mock,isfile_mock,sagemaker_session", "method_startline": "73", "method_endline": "128"}}, "hunk_7": {"Ismethod": 1, "added_lines": "250,251,252,253,254,255,256", "deleted_lines": "250,251,252,253,254,255,256", "method_info": {"method_name": "test_script_processor_with_required_parameters", "method_params": "exists_mock,isfile_mock,sagemaker_session", "method_startline": "250", "method_endline": "256"}}, "hunk_8": {"Ismethod": 1, "added_lines": "317,318,326,327,328,329,330", "deleted_lines": "317,318,319,320,321,322,323,324,325,326,327,328,329,330,331,332", "method_info": {"method_name": "test_processor_with_required_parameters", "method_params": "sagemaker_session", "method_startline": "317", "method_endline": "332"}}, "hunk_9": {"Ismethod": 1, "added_lines": "402,403,406,408,409,418,429", "deleted_lines": "402,403,411,414,415,416,417,418,419,420,421,423,424,425,426,427,428,430,433,436", "method_info": {"method_name": "_get_expected_args", "method_params": "job_name,code_s3_uri", "method_startline": "402", "method_endline": "436"}}, "hunk_10": {"Ismethod": 1, "added_lines": "454,455,458,459,460,461,462,463,464,465,466,467,468,469,472,478,480,481,482,483,484,485,486,487,488,489,490,491,492,493,498,499,502,504,505,506,507,508,509,510,511,512,513,514,517,518", "deleted_lines": "455,456,458,459,461,462,464", "method_info": {"method_name": "_get_expected_args_all_parameters", "method_params": "job_name", "method_startline": "454", "method_endline": "519"}}, "hunk_11": {"Ismethod": 1, "added_lines": "115,116,117,118,119,120,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165", "deleted_lines": "115,116,117,119,125,126,128,129,130,131,132,133,134,135,136,137,138,139,140,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164", "method_info": {"method_name": "test_sklearn_with_no_inputs", "method_params": "sagemaker_session", "method_startline": "115", "method_endline": "165"}}, "hunk_12": {"Ismethod": 1, "added_lines": "163,164", "deleted_lines": "163,164", "method_info": {"method_name": "test_script_processor_errors_with_invalid_code_url_scheme", "method_params": "exists_mock,isfile_mock,sagemaker_session", "method_startline": "163", "method_endline": "164"}}, "hunk_13": {"Ismethod": 1, "added_lines": "168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,240,241,242,243,244,248,249,250,251,252,253,254,255,256,257,258,259,260,261,262,264,269,270,283,284,285,286", "deleted_lines": "168,169,170,176,177,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,244,245,246,247,248,249,250,251,252,253,254,255,256,257,258,259,260,261,262,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,278,279,280,281,282,283,284,285", "method_info": {"method_name": "test_sklearn_with_all_customizations", "method_params": "sagemaker_session", "method_startline": "168", "method_endline": "286"}}, "hunk_14": {"Ismethod": 1, "added_lines": "233,234,235,236,237,238,240,241,242,243,244", "deleted_lines": "233,234,235,236,237,238,239,240,241,242,244,245", "method_info": {"method_name": "test_script_processor_with_one_input", "method_params": "exists_mock,isfile_mock,sagemaker_session", "method_startline": "233", "method_endline": "245"}}, "hunk_15": {"Ismethod": 1, "added_lines": "50,51,54,59,60,61,62,63,64,65,66", "deleted_lines": "56,57,58,59,60,61,62,64,65,66,67,68", "method_info": {"method_name": "test_sklearn_processor_with_required_parameters", "method_params": "exists_mock,isfile_mock,sagemaker_session", "method_startline": "50", "method_endline": "68"}}, "hunk_16": {"Ismethod": 1, "added_lines": "48,49,50,51,54,59,60,61,62,63,64,65,66,71,72,73,74,76,79,80,81,82,83,84,85,86,87,88,89,90,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112", "deleted_lines": "47,48,49,56,57,58,59,60,61,62,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111", "method_info": {"method_name": "test_sklearn", "method_params": "sagemaker_session", "method_startline": "47", "method_endline": "112"}}, "hunk_17": {"Ismethod": 1, "added_lines": "439,440,441,442,443,444,445,446,447,448,449,450,451", "deleted_lines": "442,444,445,450", "method_info": {"method_name": "_get_data_input", "method_params": "", "method_startline": "439", "method_endline": "451"}}, "hunk_18": {"Ismethod": 1, "added_lines": "359,360,361,362,363,364,365,366,367,368,369,370,371,372,373,374,375,377,378,379,380,381,382,383,384,385,386,387,388,389,390,391,392,393,394,395,396,397,398,401,402,403,406,408,409", "deleted_lines": "359,360,365,369,371,373,376,379,381,382,391,402,403,411", "method_info": {"method_name": "test_byo_container_with_custom_script", "method_params": "sagemaker_session", "method_startline": "359", "method_endline": "411"}}, "hunk_19": {"Ismethod": 1, "added_lines": "261,262,264,269,270,283,284,285,286,287,288,289,290,291,292,293,294,296,297,298,299,300,301,302,303,304,305,306,307,308,309,310,311,312,314", "deleted_lines": "261,262,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,278,279,280,281,282,283,284,285,289,290,293,299,300,301,302,303,304,305,306,308,309,310,311,312,313,314", "method_info": {"method_name": "test_script_processor_with_all_parameters", "method_params": "exists_mock,isfile_mock,sagemaker_session", "method_startline": "261", "method_endline": "314"}}, "hunk_20": {"Ismethod": 1, "added_lines": "39", "deleted_lines": null, "method_info": {"method_name": "sagemaker_session", "method_params": "", "method_startline": "29", "method_endline": "45"}}, "hunk_21": {"Ismethod": 1, "added_lines": "289,290,291,292,293,294,296,297,298,299,300,301,302,303,304,305,306,307,308,309,310,311,312,314,317,318,326,327,328,329,330,335,336,342,343,344,345,346,347,348,349,350,351,352,353,354", "deleted_lines": "289,290,293,299,300,301,302,303,304,305,306,308,309,310,311,312,313,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,329,330,331,332,333,334,335,336,337,338,339,340,341,342,343,344,345,346,347,348,349,350,351,352,353,354,355", "method_info": {"method_name": "test_byo_container_with_script_processor", "method_params": "sagemaker_session", "method_startline": "289", "method_endline": "356"}}, "hunk_22": {"Ismethod": 1, "added_lines": "391,392,393,394,395,396,397,398", "deleted_lines": "391", "method_info": {"method_name": "_get_script_processor", "method_params": "sagemaker_session", "method_startline": "391", "method_endline": "399"}}, "hunk_23": {"Ismethod": 1, "added_lines": "209,210", "deleted_lines": "209,210", "method_info": {"method_name": "test_script_processor_works_with_file_code_url_scheme", "method_params": "exists_mock,isfile_mock,sagemaker_session", "method_startline": "209", "method_endline": "210"}}, "hunk_24": {"Ismethod": 1, "added_lines": "418,429,439,440,441,442,443,444,445,446,447,448,449,450,451,454,455,458,459,460,461,462,463,464", "deleted_lines": "414,415,416,417,418,419,420,421,423,424,425,426,427,428,430,433,436,442,444,445,450,453,455,456,458,459,461,462,464", "method_info": {"method_name": "test_byo_container_with_baked_in_script", "method_params": "sagemaker_session", "method_startline": "414", "method_endline": "464"}}, "hunk_25": {"Ismethod": 1, "added_lines": "147,148,149,150", "deleted_lines": "147,148,149,150", "method_info": {"method_name": "test_script_processor_errors_with_nonexistent_local_code", "method_params": "exists_mock,sagemaker_session", "method_startline": "147", "method_endline": "150"}}, "hunk_26": {"Ismethod": 1, "added_lines": "155,156,157,158", "deleted_lines": "155,156,157,158", "method_info": {"method_name": "test_script_processor_errors_with_code_directory", "method_params": "exists_mock,isfile_mock,sagemaker_session", "method_startline": "155", "method_endline": "158"}}}}}}}