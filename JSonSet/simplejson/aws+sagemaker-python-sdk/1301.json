{"BR": {"BR_id": "1301", "BR_author": "brightsparc", "BRopenT": "2020-02-20T07:16:24Z", "BRcloseT": "2020-03-23T17:50:36Z", "BR_text": {"BRsummary": "Attempt to enable data capture on an endpoint created by cloudformation will fail", "BRdescription": "\n Describe the bug\n Attempt to enable data capture on an endpoint created by cloudformation will fail due as it contains \"aws:cloudformation:*\" tags.  These tags can not be deleted.\n To reproduce\n Attempt to enable data capture on an endpoint created with \"aws:\" tags:\n see: <denchmark-link:https://github.com/awslabs/amazon-sagemaker-examples/blob/master/sagemaker_model_monitor/enable_model_monitor/SageMaker-Enable-Model-Monitor.ipynb>ageMaker-Enable-Model-Monitor</denchmark-link>\n  notebook\n <denchmark-code>predictor = RealTimePredictor(endpoint=endpoint_name)\n predictor.update_data_capture_config(data_capture_config=data_capture_config)\n </denchmark-code>\n \n Returns error:\n <denchmark-code>~/anaconda3/envs/python3/lib/python3.6/site-packages/botocore/client.py in _make_api_call(self, operation_name, api_params)\n     584             error_code = parsed_response.get(\"Error\", {}).get(\"Code\")\n     585             error_class = self.exceptions.from_code(error_code)\n --> 586             raise error_class(parsed_response, operation_name)\n     587         else:\n     588             return parsed_response\n \n ClientError: An error occurred (ValidationException) when calling the DeleteTags operation: System prefix 'aws:' reserved for AWS usage in tag key: aws:cloudformation:stack-name\n </denchmark-code>\n \n Expected behavior\n The \"aws:*\" tags should either be ignore or removed when collecting existing tags.\n The following is a work around that overrides the tags instead of loading existing\n <denchmark-code># Get the current endpoint config \n endpoint_config_name = sm.describe_endpoint(EndpointName=endpoint_name)['EndpointConfigName']\n new_config_name = name_from_base(base=endpoint_config_name)\n \n # Create a new config from the existing adding data capture\n new_tags = [{'Key': 'datacapture', 'Value': 'true'}] \n sm_session.create_endpoint_config_from_existing(\n     endpoint_config_name, new_config_name, new_tags=new_tags, \n     new_data_capture_config_dict=data_capture_config._to_request_dict())\n \n # Update the endpoint\n sm_session.update_endpoint(endpoint_name=endpoint_name, endpoint_config_name=new_config_name)\n </denchmark-code>\n \n System information\n A description of your system. Please provide:\n \n SageMaker Python SDK version: 1.50.9.post0\n Python version:  3.6.5\n CPU:\n Custom Docker image:N\n \n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "brightsparc", "commentT": "2020-03-18T22:33:44Z", "comment_text": "\n \t\tsorry for the delay in response here, and thank you for the bug report! I've opened a PR to fix this: <denchmark-link:https://github.com/aws/sagemaker-python-sdk/pull/1362>#1362</denchmark-link>\n \n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "brightsparc", "commentT": "2020-03-23T17:50:36Z", "comment_text": "\n \t\treleased in <denchmark-link:https://github.com/aws/sagemaker-python-sdk/releases/tag/v1.51.4>v1.51.4</denchmark-link>\n \n \t\t"}}}, "commit": {"commit_id": "ff2ab43e13ed989c237075a82058fc8053dfe575", "commit_author": "Lauren Yu", "commitT": "2020-03-19 17:09:36-07:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "src\\sagemaker\\session.py", "file_new_name": "src\\sagemaker\\session.py", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "2315,2316,2317,2319,2320,2322,2323,2324,2341,2342,2343", "deleted_lines": "2315,2317,2319,2331,2332,2333,2334,2335,2336"}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "tests\\unit\\test_session.py", "file_new_name": "tests\\unit\\test_session.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "1823,1824,1825,1826,1827,1828,1829,1830,1831,1832,1833,1834,1835,1836,1837,1838,1839,1840,1841,1842,1843,1844,1845,1846,1847,1848,1849,1850", "deleted_lines": null, "method_info": {"method_name": "test_create_endpoint_config_from_existing", "method_params": "sagemaker_session", "method_startline": "1823", "method_endline": "1850"}}}}}}}