{"BR": {"BR_id": "782", "BR_author": "remisphere", "BRopenT": "2020-02-14T15:15:25Z", "BRcloseT": "2020-02-15T21:34:19Z", "BR_text": {"BRsummary": "tqdm_logger does not take epoch_length into account", "BRdescription": "\n <denchmark-h:h2>\ud83d\udc1b tqdm_logger does not take epoch_length into account</denchmark-h>\n \n When calling Engine.run() with a custom epoch_length,\n the tqdm progress bar does not adapt and displays the full number of batches in the data.\n Here is a minimal example:\n from ignite.contrib.handlers.tqdm_logger import ProgressBar\n from ignite.engine import Engine\n from torch import nn\n from torch.utils.data import DataLoader\n \n data = list(range(100))\n model = nn.Identity()\n engine = Engine(lambda engine, batch: model(batch))\n \n ProgressBar(persist=True).attach(engine)\n engine.run(data, epoch_length=50)\n We have 100 items in data but the true end of the epoch is at 50 iterations, yet the progress is displayed over the range of 100 and just ends midway, when I expect it to be displayed over the range of 50, thus ending when the bar is full.\n One can not overwrite tqdm's total argument by replacing\n ProgressBar(persist=True).attach(engine)\n by\n ProgressBar(persist=True, total=50).attach(engine)\n for it raises TypeError: type object got multiple values for keyword argument 'total'.\n <denchmark-h:h2>Environment</denchmark-h>\n \n \n PyTorch Version : 1.4.0\n Ignite Version : 0.3.0\n OS : Ubuntu 19.04\n Ignite installation method : pip\n Python version: 3.7.3\n \n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "remisphere", "commentT": "2020-02-14T15:23:41Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/remisphere>@remisphere</denchmark-link>\n  thanks for the feedback! We need to fix it here:\n \n \n as\n if event_name in (Events.ITERATION_STARTED, Events.ITERATION_COMPLETED): \n     return engine.state.epoch_length\n \t\t"}}}, "commit": {"commit_id": "64b8d6f5d4b8ced9a02c995b97815b421ad29d93", "commit_author": "Yogesh Kumar", "commitT": "2020-02-15 16:24:39+01:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "ignite\\contrib\\handlers\\tqdm_logger.py", "file_new_name": "ignite\\contrib\\handlers\\tqdm_logger.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "221", "deleted_lines": "221", "method_info": {"method_name": "get_max_number_events", "method_params": "event_name,engine", "method_startline": "219", "method_endline": "224"}}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "tests\\ignite\\contrib\\handlers\\test_tqdm_logger.py", "file_new_name": "tests\\ignite\\contrib\\handlers\\test_tqdm_logger.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "429,430,431,432,433,434,435,436,437,438,439,440,441,442", "deleted_lines": null, "method_info": {"method_name": "test_tqdm_logger_epoch_length", "method_params": "capsys", "method_startline": "429", "method_endline": "442"}}}}}}}