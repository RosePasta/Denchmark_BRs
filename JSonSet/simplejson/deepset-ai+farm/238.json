{"BR": {"BR_id": "238", "BR_author": "ahmednasserswe", "BRopenT": "2020-02-06T18:12:30Z", "BRcloseT": "2020-02-17T14:56:47Z", "BR_text": {"BRsummary": "error when having 1 worker to preprocess the dataset", "BRdescription": "\n I get the following error when I run a question answering with Farm. Happens after the data preprocessing starts. I am running on colab which gives only 1 worker for this process. When I run on AWS with multiple workers available, I don't receive the error message\n <denchmark-code>02/05/2020 11:26:01 - INFO - numexpr.utils -   NumExpr defaulting to 2 threads.\n ---------------------------------------------------------------------------\n RemoteTraceback                           Traceback (most recent call last)\n RemoteTraceback: \n \"\"\"\n Traceback (most recent call last):\n   File \"/usr/lib/python3.6/multiprocessing/pool.py\", line 119, in worker\n     result = (True, func(*args, **kwds))\n   File \"/usr/local/lib/python3.6/dist-packages/farm/data_handler/data_silo.py\", line 111, in _dataset_from_chunk\n     dataset = processor.dataset_from_dicts(dicts=dicts, indices=indices)\n   File \"/usr/local/lib/python3.6/dist-packages/farm/data_handler/processor.py\", line 894, in dataset_from_dicts\n     self._featurize_samples()\n   File \"/usr/local/lib/python3.6/dist-packages/farm/data_handler/processor.py\", line 283, in _featurize_samples\n     sample.features = self._sample_to_features(sample=sample)\n   File \"/usr/local/lib/python3.6/dist-packages/farm/data_handler/processor.py\", line 1000, in _sample_to_features\n     max_seq_len=self.max_seq_len)\n   File \"/usr/local/lib/python3.6/dist-packages/farm/data_handler/input_features.py\", line 361, in sample_to_features_squad\n     seq_2_start_t = segment_ids.index(1)\n ValueError: 1 is not in list\n \"\"\"\n \n The above exception was the direct cause of the following exception:\n \n ValueError                                Traceback (most recent call last)\n <ipython-input-4-95d6e10bc26a> in <module>()\n ----> 1 question_answering()\n \n 4 frames\n /usr/lib/python3.6/multiprocessing/pool.py in next(self, timeout)\n     733         if success:\n     734             return value\n --> 735         raise value\n     736 \n     737     __next__ = next                    # XXX\n \n ValueError: 1 is not in list```\n </denchmark-code>\n \n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "ahmednasserswe", "commentT": "2020-02-06T18:20:27Z", "comment_text": "\n \t\tSeems related to <denchmark-link:https://github.com/deepset-ai/FARM/issues/208>#208</denchmark-link>\n  . Are you training a roberta model? Do you have the latest FARM version installed?\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "ahmednasserswe", "commentT": "2020-02-06T18:30:53Z", "comment_text": "\n \t\tlatest version - using xlm-roberta-base\n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "ahmednasserswe", "commentT": "2020-02-06T18:37:54Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/brandenchan>@brandenchan</denchmark-link>\n  can you please try to replicate and see if this is related to your work in <denchmark-link:https://github.com/deepset-ai/FARM/pull/216>#216</denchmark-link>\n  ?\n \t\t"}, "comments_3": {"comment_id": 4, "comment_author": "ahmednasserswe", "commentT": "2020-02-10T14:06:40Z", "comment_text": "\n \t\tHey Ahmed, sorry it took so long to get back to you. I've opened a pull request <denchmark-link:https://github.com/deepset-ai/FARM/pull/240>#240</denchmark-link>\n   that should solve this issue. Could you try it out and let me know if it works?\n \t\t"}}}, "commit": {"commit_id": "5e62b713e783fb15939ad47c5ef77acf687fb690", "commit_author": "Branden Chan", "commitT": "2020-02-13 13:25:42+01:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "farm\\data_handler\\input_features.py", "file_new_name": "farm\\data_handler\\input_features.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "358", "deleted_lines": "358", "method_info": {"method_name": "sample_to_features_squad", "method_params": "sample,tokenizer,max_seq_len,max_answers", "method_startline": "309", "method_endline": "397"}}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "farm\\modeling\\language_model.py", "file_new_name": "farm\\modeling\\language_model.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "113,142", "deleted_lines": "115,142", "method_info": {"method_name": "load", "method_params": "cls,pretrained_model_name_or_path,n_added_tokens,kwargs", "method_startline": "70", "method_endline": "148"}}}}}}}