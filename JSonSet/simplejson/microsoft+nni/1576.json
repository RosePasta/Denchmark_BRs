{"BR": {"BR_id": "1576", "BR_author": "ultmaster", "BRopenT": "2019-09-27T04:59:13Z", "BRcloseT": "2019-10-25T09:25:47Z", "BR_text": {"BRsummary": "nnictl package install not working for venv", "BRdescription": "\n It seems that nnictl package install makes the package going to user level, which makes it not accessible from a venv.\n Warning:\n <denchmark-code>Installing collected packages: ConfigSpaceNNI, docutils, pynisher, pyrfr, sphinxcontrib-htmlhelp, sphinxcontrib-qthelp, sphinxcontrib-devhelp, imagesize, Jinja2, sphinxcontrib-applehelp, alabaster, sphinxcontrib-jsmath, Pygments, snowballstemmer, sphinxcontrib-serializinghtml, packaging, sphinx, sphinx-rtd-theme, smac\n   Running setup.py install for ConfigSpaceNNI ... done\n   The script pygmentize is installed in '/home/zhangyuge/.local/bin' which is not on PATH.\n   Consider adding this directory to PATH or, if you prefer to suppress this warning, use --no-warn-script-location.\n   Running setup.py install for snowballstemmer ... done\n   The scripts sphinx-apidoc, sphinx-autogen, sphinx-build and sphinx-quickstart are installed in '/home/zhangyuge/.local/bin' which is not on PATH.\n   Consider adding this directory to PATH or, if you prefer to suppress this warning, use --no-warn-script-location.\n   Running setup.py install for smac ... done\n </denchmark-code>\n \n Corresponding code:\n \n \n \n nni/tools/nni_cmd/command_utils.py\n \n \n          Line 49\n       in\n       958efab\n \n \n \n \n \n \n  cmds = 'cd ' + requirements_path + ' && {0} -m pip install --user -r requirements.txt' \n \n \n \n \n \n We could consider removing this --user.\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "ultmaster", "commentT": "2019-10-02T03:16:32Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/ultmaster>@ultmaster</denchmark-link>\n  Could you try to fix it?\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "ultmaster", "commentT": "2019-10-02T03:18:48Z", "comment_text": "\n \t\tSure. By removing this --user. I just don't understand why we have it in the first place.\n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "ultmaster", "commentT": "2019-10-02T13:05:20Z", "comment_text": "\n \t\tIf users installed nni locally (not in virtual env), no --user means users have to use sudo to run pip command.\n \t\t"}, "comments_3": {"comment_id": 4, "comment_author": "ultmaster", "commentT": "2019-10-02T14:36:23Z", "comment_text": "\n \t\tI don't know about this. As far as I remember, last time I run pip outside a virtual env, it automatically goes into some ~/.pip without asking sudo. I think removing --user is better than adding this, because --user might contaminate the outside environment, which is definitely not wanted.\n Meanwhile, I will check whether there is a way to tell pip is inside a virtualenv/conda or not.\n \t\t"}}}, "commit": {"commit_id": "5557a2e4143f7ec707daf9ae094db84eb91b9d1b", "commit_author": "Yuge Zhang", "commitT": "2019-10-22 16:24:12+08:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 5, "file_old_name": "tools\\nni_cmd\\command_utils.py", "file_new_name": "tools\\nni_cmd\\command_utils.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "54,55,56,57,58,59,60,61,62", "deleted_lines": "53,54,55", "method_info": {"method_name": "install_requirements_command", "method_params": "requirements_path", "method_startline": "53", "method_endline": "62"}}, "hunk_1": {"Ismethod": 1, "added_lines": "10", "deleted_lines": "9", "method_info": {"method_name": "check_output_command", "method_params": "file_path,head,tail", "method_startline": "9", "method_endline": "28"}}, "hunk_2": {"Ismethod": 1, "added_lines": "32", "deleted_lines": null, "method_info": {"method_name": "kill_command", "method_params": "pid", "method_startline": "31", "method_endline": "38"}}, "hunk_3": {"Ismethod": 1, "added_lines": "65,66,67,68,69,70,71", "deleted_lines": null, "method_info": {"method_name": "_get_pip_install", "method_params": "", "method_startline": "65", "method_endline": "71"}}, "hunk_4": {"Ismethod": 1, "added_lines": "42,43,44,45,46,47,48,49,50", "deleted_lines": "41,42,43,44,45,48,49,50", "method_info": {"method_name": "install_package_command", "method_params": "package_name", "method_startline": "41", "method_endline": "50"}}}}}}}