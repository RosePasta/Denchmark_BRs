{"BR": {"BR_id": "61", "BR_author": "edubart", "BRopenT": "2017-09-23T13:01:51Z", "BRcloseT": "2017-09-23T15:47:46Z", "BR_text": {"BRsummary": "Unable to use `_` operator in this example", "BRdescription": "\n import arraymancer\n \n proc foo[T](t: Tensor[T], x: int): Tensor[T] =\n   t.unsafeSlice(x, _, _).unsafeReshape([t.shape[1], t.shape[2]])\n \n echo zeros([2,2,2], int).foo(1)\n in global_config.nim it works.\n <denchmark-code>test2.nim(6, 25) template/generic instantiation from here\n test2.nim(4, 25) Error: type mismatch: got (int, array[0..1, int])\n but expected one of: \n proc unsafeReshape(t: Tensor; new_shape: varargs[int]): Tensor\n </denchmark-code>\n \n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "edubart", "commentT": "2017-09-23T13:37:49Z", "comment_text": "\n \t\tIt works on my machine with latest pull\n You need to change unsafeView ==> unsafeSlice\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "edubart", "commentT": "2017-09-23T14:45:29Z", "comment_text": "\n \t\tI've updated the test case, I doesn't work for me.\n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "edubart", "commentT": "2017-09-23T14:53:01Z", "comment_text": "\n \t\tMore in general\n import arraymancer\n \n proc foo[T](t: Tensor[T]): Tensor[T] =\n   t.unsafeSlice(0, _, 0)\n \n echo zeros([2,2,2], int).foo()\n the problem isAllInt() if in slicer, _ is a int only inside generics\n \t\t"}, "comments_3": {"comment_id": 4, "comment_author": "edubart", "commentT": "2017-09-23T15:24:27Z", "comment_text": "\n \t\tI think tests should have some complex case like:\n import arraymancer\n \n let t = zeros([2,2,2,2,2,2], int)\n discard t[0..1|1, 0..<2|1, 0..^1|1, ^1..0|-1, _, 1] # works\n \n proc foo[T](t: Tensor[T]): Tensor[T] =\n   discard t[0..1|1, 0..<2|1, 0..^1|1, ^1..0|-1, _, 1] # doesnt work\n \n t.foo()\n there are other erros in generics when using 0..1, _, ^, all slicing operators...\n \t\t"}}}, "commit": {"commit_id": "66a8a0e924989909a3e5c2a390f1e6a47cc3edb6", "commit_author": "Mamy Ratsimbazafy", "commitT": "2017-09-23 17:47:38+02:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "src\\arraymancer\\accessors_slicer.nim", "file_new_name": "src\\arraymancer\\accessors_slicer.nim", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "214,215,216,217", "deleted_lines": null}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "src\\arraymancer\\global_config.nim", "file_new_name": "src\\arraymancer\\global_config.nim", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "31,32,33,34", "deleted_lines": "31,32,33,34"}}}, "file_2": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "tests\\test_bugtracker.nim", "file_new_name": "tests\\test_bugtracker.nim", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "31,32,33,34,35,36,37", "deleted_lines": "31"}}}}}}