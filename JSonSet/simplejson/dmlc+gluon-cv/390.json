{"BR": {"BR_id": "390", "BR_author": "KevinNuNu", "BRopenT": "2018-10-14T17:39:25Z", "BRcloseT": "2018-10-15T18:47:43Z", "BR_text": {"BRsummary": "Can't use gpu to predict with my own YOLOv3 model .", "BRdescription": "\n <denchmark-link:https://user-images.githubusercontent.com/34083603/46920060-fc92b400-d01a-11e8-90c1-560684544182.png></denchmark-link>\n \n set the parameter of model_zoo.get_model(ctx=mx.gpu(0)), but return value \"net\" still initialized on cpu.\n i read the code find that:\n the reason is that model_zoo/yolo/yolo3.py  the 503 line, function darknet53() lack a parameter ctx.\n beacuse of this,  model_zoo/yolo/darknet.py the 144 line, net.load_parameters() will only use the default ctx=mx.cpu()!\n add the parameter like this, it will be work~!\n <denchmark-link:https://user-images.githubusercontent.com/34083603/46920040-b8071880-d01a-11e8-87d1-a3f2758480d6.png></denchmark-link>\n \n <denchmark-link:https://github.com/zhreshold>@zhreshold</denchmark-link>\n \n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "KevinNuNu", "commentT": "2018-10-14T20:14:45Z", "comment_text": "\n \t\tRight, it's a bug, but just passing **kwargs to darknet53 should be enough.\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "KevinNuNu", "commentT": "2018-10-14T20:31:47Z", "comment_text": "\n \t\tShould be fixed with <denchmark-link:https://github.com/dmlc/gluon-cv/pull/393>#393</denchmark-link>\n \n \t\t"}}}, "commit": {"commit_id": "d00f0392d78b9afcecf6de564e05005c89bf84b1", "commit_author": "Joshua Z. Zhang", "commitT": "2018-10-15 11:47:39-07:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "gluoncv\\model_zoo\\yolo\\yolo3.py", "file_new_name": "gluoncv\\model_zoo\\yolo\\yolo3.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "503,504", "deleted_lines": "503", "method_info": {"method_name": "yolo3_darknet53_voc", "method_params": "pretrained_base,pretrained,num_sync_bn_devices,kwargs", "method_startline": "481", "method_endline": "511"}}, "hunk_1": {"Ismethod": 1, "added_lines": "533,534", "deleted_lines": "532", "method_info": {"method_name": "yolo3_darknet53_coco", "method_params": "pretrained_base,pretrained,num_sync_bn_devices,kwargs", "method_startline": "513", "method_endline": "541"}}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "tests\\unittests\\test_model_zoo.py", "file_new_name": "tests\\unittests\\test_model_zoo.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "159,160,161,162,163,164,165,166,167,168", "deleted_lines": null, "method_info": {"method_name": "test_two_stage_ctx_loading", "method_params": "", "method_startline": "159", "method_endline": "168"}}}}}}}