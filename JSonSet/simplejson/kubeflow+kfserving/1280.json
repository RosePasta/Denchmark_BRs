{"BR": {"BR_id": "1280", "BR_author": "yuzisun", "BRopenT": "2021-01-07T02:17:22Z", "BRcloseT": "2021-01-07T17:11:59Z", "BR_text": {"BRsummary": "Model puller flag is not set in MMS mode after merging the logger", "BRdescription": "\n /kind bug\n What steps did you take and what happened:\n [A clear and concise description of what the bug is.]\n What did you expect to happen:\n \n enable-puller flag is not set after we merged logger to the model agent\n logger conflicts after merging the model agent\n Model downloader should support public S3 bucket\n \n Anything else you would like to add:\n [Miscellaneous information that will assist in solving the issue.]\n Environment:\n \n Istio Version: 1.3\n Knative Version: 0.14\n KFServing Version: 0.5.0-rc1\n Kubeflow version:\n Kfdef:[k8s_istio]\n Minikube version:\n Kubernetes version: (use kubectl version):\n OS (e.g. from /etc/os-release):\n \n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "yuzisun", "commentT": "2021-01-07T02:17:39Z", "comment_text": "\n \t\t/cc <denchmark-link:https://github.com/adriangonz>@adriangonz</denchmark-link>\n \n \t\t"}}}, "commit": {"commit_id": "da3e7bef9576055c9eeeac3f4bfa26793025df3d", "commit_author": "Dan Sun", "commitT": "2021-01-07 09:11:58-08:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "cmd\\agent\\main.go", "file_new_name": "cmd\\agent\\main.go", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "234,239,254,266,267,268,269", "deleted_lines": "234,253,265,266", "method_info": {"method_name": "startModelPuller", "method_params": "SugaredLogger", "method_startline": "233", "method_endline": "271"}}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "docs\\samples\\v1beta1\\triton\\multimodel\\s3_secret.yaml", "file_new_name": "docs\\samples\\v1beta1\\triton\\multimodel\\s3_secret.yaml", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "6", "deleted_lines": "6"}}}, "file_2": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "pkg\\agent\\downloader.go", "file_new_name": "pkg\\agent\\downloader.go", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "47,59", "deleted_lines": "39,47,50,60", "method_info": {"method_name": "DownloadModel", "method_params": "string,ModelSpec", "method_startline": "39", "method_endline": "63"}}}}, "file_3": {"file_change_type": "MODIFY", "file_Nmethod": 5, "file_old_name": "pkg\\agent\\puller.go", "file_new_name": "pkg\\agent\\puller.go", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "51,57", "deleted_lines": "50", "method_info": {"method_name": "StartPuller", "method_params": "Downloader,ModelOp", "method_startline": "50", "method_endline": "58"}}, "hunk_1": {"Ismethod": 1, "added_lines": "114,116", "deleted_lines": "96,114,116", "method_info": {"method_name": "modelOpComplete", "method_params": "ModelOp,bool", "method_startline": "96", "method_endline": "118"}}, "hunk_2": {"Ismethod": 1, "added_lines": "51,57", "deleted_lines": null, "method_info": {"method_name": "StartPuller", "method_params": "Downloader,ModelOp,SugaredLogger", "method_startline": "51", "method_endline": "60"}}, "hunk_3": {"Ismethod": 1, "added_lines": null, "deleted_lines": "82", "method_info": {"method_name": "enqueueModelOp", "method_params": "ModelOp", "method_startline": "81", "method_endline": "93"}}, "hunk_4": {"Ismethod": 1, "added_lines": "121,129,134,142,145,146,147,148,149,150,151,156,159,167,170,171,172,173,174,175,176", "deleted_lines": "121,122,130,135,143,146,147,148,153,156,164,167,168,169", "method_info": {"method_name": "modelProcessor", "method_params": "string,ModelOp", "method_startline": "120", "method_endline": "183"}}}}, "file_4": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "pkg\\agent\\syncer.go", "file_new_name": "pkg\\agent\\syncer.go", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": null, "deleted_lines": "27,36,37"}}}, "file_5": {"file_change_type": "MODIFY", "file_Nmethod": 6, "file_old_name": "pkg\\agent\\watcher.go", "file_new_name": "pkg\\agent\\watcher.go", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "103,108,113", "deleted_lines": "92,106,111,116", "method_info": {"method_name": "", "method_params": "", "method_startline": "91", "method_endline": "120"}}, "hunk_1": {"Ismethod": 1, "added_lines": "82,87,89,103,108,113,127", "deleted_lines": "82,85,90,92,106,111,116", "method_info": {"method_name": "Start", "method_params": "", "method_startline": "79", "method_endline": "129"}}, "hunk_2": {"Ismethod": 1, "added_lines": "182", "deleted_lines": "185", "method_info": {"method_name": "modelRemoved", "method_params": "string", "method_startline": "181", "method_endline": "187"}}, "hunk_3": {"Ismethod": 1, "added_lines": "39,42,48,53", "deleted_lines": "42,45,55", "method_info": {"method_name": "NewWatcher", "method_params": "string,string,SugaredLogger", "method_startline": "39", "method_endline": "56"}}, "hunk_4": {"Ismethod": 1, "added_lines": "173", "deleted_lines": "176", "method_info": {"method_name": "modelAdded", "method_params": "string,ModelSpec", "method_startline": "172", "method_endline": "179"}}, "hunk_5": {"Ismethod": 1, "added_lines": "42,48,53", "deleted_lines": "42,45,55", "method_info": {"method_name": "NewWatcher", "method_params": "string,string", "method_startline": "42", "method_endline": "58"}}}}, "file_6": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "pkg\\agent\\watcher_test.go", "file_new_name": "pkg\\agent\\watcher_test.go", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "81,82", "deleted_lines": null, "method_info": {"method_name": "", "method_params": "", "method_startline": "75", "method_endline": "84"}}}}, "file_7": {"file_change_type": "MODIFY", "file_Nmethod": 9, "file_old_name": "pkg\\apis\\serving\\v1beta1\\openapi_generated.go", "file_new_name": "pkg\\apis\\serving\\v1beta1\\openapi_generated.go", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": null, "deleted_lines": "5502", "method_info": {"method_name": "schema_pkg_apis_serving_v1beta1_TorchServeSpec", "method_params": "ReferenceCallback", "method_startline": "5245", "method_endline": "5508"}}, "hunk_1": {"Ismethod": 1, "added_lines": null, "deleted_lines": "6219", "method_info": {"method_name": "schema_pkg_apis_serving_v1beta1_TritonSpec", "method_params": "ReferenceCallback", "method_startline": "5969", "method_endline": "6225"}}, "hunk_2": {"Ismethod": 1, "added_lines": null, "deleted_lines": "6477", "method_info": {"method_name": "schema_pkg_apis_serving_v1beta1_XGBoostSpec", "method_params": "ReferenceCallback", "method_startline": "6227", "method_endline": "6483"}}, "hunk_3": {"Ismethod": 1, "added_lines": null, "deleted_lines": "3517", "method_info": {"method_name": "schema_pkg_apis_serving_v1beta1_PMMLSpec", "method_params": "ReferenceCallback", "method_startline": "3267", "method_endline": "3523"}}, "hunk_4": {"Ismethod": 1, "added_lines": null, "deleted_lines": "4182", "method_info": {"method_name": "schema_pkg_apis_serving_v1beta1_PredictorExtensionSpec", "method_params": "ReferenceCallback", "method_startline": "3932", "method_endline": "4188"}}, "hunk_5": {"Ismethod": 1, "added_lines": null, "deleted_lines": "5237", "method_info": {"method_name": "schema_pkg_apis_serving_v1beta1_TFServingSpec", "method_params": "ReferenceCallback", "method_startline": "4987", "method_endline": "5243"}}, "hunk_6": {"Ismethod": 1, "added_lines": null, "deleted_lines": "2974", "method_info": {"method_name": "schema_pkg_apis_serving_v1beta1_LightGBMSpec", "method_params": "ReferenceCallback", "method_startline": "2724", "method_endline": "2980"}}, "hunk_7": {"Ismethod": 1, "added_lines": null, "deleted_lines": "4979", "method_info": {"method_name": "schema_pkg_apis_serving_v1beta1_SKLearnSpec", "method_params": "ReferenceCallback", "method_startline": "4729", "method_endline": "4985"}}, "hunk_8": {"Ismethod": 1, "added_lines": null, "deleted_lines": "3259", "method_info": {"method_name": "schema_pkg_apis_serving_v1beta1_ONNXRuntimeSpec", "method_params": "ReferenceCallback", "method_startline": "3009", "method_endline": "3265"}}}}, "file_8": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "pkg\\constants\\constants.go", "file_new_name": "pkg\\constants\\constants.go", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "56,57,58", "deleted_lines": "56,57"}}}, "file_9": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "pkg\\webhook\\admission\\pod\\agent_injector.go", "file_new_name": "pkg\\webhook\\admission\\pod\\agent_injector.go", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "131,132,133,134,135", "deleted_lines": null, "method_info": {"method_name": "InjectAgent", "method_params": "Pod", "method_startline": "114", "method_endline": "250"}}}}, "file_10": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "pkg\\webhook\\admission\\pod\\agent_injector_test.go", "file_new_name": "pkg\\webhook\\admission\\pod\\agent_injector_test.go", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "122", "deleted_lines": "122", "method_info": {"method_name": "TestAgentInjector", "method_params": "T", "method_startline": "63", "method_endline": "279"}}}}, "file_11": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "test\\e2e\\predictor\\test_torchserve.py", "file_new_name": "test\\e2e\\predictor\\test_torchserve.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": null, "deleted_lines": "68,69,70,71,72", "method_info": {"method_name": "test_torchserve_kfserving", "method_params": "", "method_startline": "42", "method_endline": "76"}}}}}}}