{"BR": {"BR_id": "847", "BR_author": "Ditwoo", "BRopenT": "2020-06-19T07:14:24Z", "BRcloseT": "2020-09-24T06:33:39Z", "BR_text": {"BRsummary": "Bug: catalyst depends from system git", "BRdescription": "\n <denchmark-h:h2>\ud83d\udc1b Bug Report</denchmark-h>\n \n If you try to run experiment in system/docker container where missing git (in system) your code will crush at this line:\n <denchmark-link:https://github.com/catalyst-team/catalyst/blob/master/catalyst/utils/pipelines.py#L4>https://github.com/catalyst-team/catalyst/blob/master/catalyst/utils/pipelines.py#L4</denchmark-link>\n \n with message like this:\n <denchmark-code>Traceback (most recent call last):\n   File \"/usr/local/lib/python3.7/site-packages/git/__init__.py\", line 83, in <module>\n     refresh()\n   File \"/usr/local/lib/python3.7/site-packages/git/__init__.py\", line 73, in refresh\n     if not Git.refresh(path=path):\n   File \"/usr/local/lib/python3.7/site-packages/git/cmd.py\", line 278, in refresh\n     raise ImportError(err)\n ImportError: Bad git executable.\n The git executable must be specified in one of the following ways:\n     - be included in your $PATH\n     - be set via $GIT_PYTHON_GIT_EXECUTABLE\n     - explicitly set via git.refresh()\n \n All git commands will error until this is rectified.\n \n This initial warning can be silenced or aggravated in the future by setting the\n $GIT_PYTHON_REFRESH environment variable. Use one of the following values:\n     - quiet|q|silence|s|none|n|0: for no warning or exception\n     - warn|w|warning|1: for a printed warning\n     - error|e|raise|r|2: for a raised exception\n \n Example:\n     export GIT_PYTHON_REFRESH=quiet\n \n \n During handling of the above exception, another exception occurred:\n \n Traceback (most recent call last):\n   File \"/usr/local/bin/catalyst-dl\", line 5, in <module>\n     from catalyst.dl.__main__ import main\n   File \"/usr/local/lib/python3.7/site-packages/catalyst/dl/__init__.py\", line 4, in <module>\n     from catalyst.core import *\n   File \"/usr/local/lib/python3.7/site-packages/catalyst/core/__init__.py\", line 10, in <module>\n     from .state import State\n   File \"/usr/local/lib/python3.7/site-packages/catalyst/core/state.py\", line 8, in <module>\n     from catalyst.core import utils\n   File \"/usr/local/lib/python3.7/site-packages/catalyst/core/utils/__init__.py\", line 4, in <module>\n     from catalyst.utils import *\n   File \"/usr/local/lib/python3.7/site-packages/catalyst/utils/__init__.py\", line 67, in <module>\n     from .pipelines import clone_pipeline\n   File \"/usr/local/lib/python3.7/site-packages/catalyst/utils/pipelines.py\", line 4, in <module>\n     from git import Repo as repo\n   File \"/usr/local/lib/python3.7/site-packages/git/__init__.py\", line 85, in <module>\n     raise ImportError('Failed to initialize: {0}'.format(exc))\n ImportError: Failed to initialize: Bad git executable.\n The git executable must be specified in one of the following ways:\n     - be included in your $PATH\n     - be set via $GIT_PYTHON_GIT_EXECUTABLE\n     - explicitly set via git.refresh()\n \n All git commands will error until this is rectified.\n \n This initial warning can be silenced or aggravated in the future by setting the\n $GIT_PYTHON_REFRESH environment variable. Use one of the following values:\n     - quiet|q|silence|s|none|n|0: for no warning or exception\n     - warn|w|warning|1: for a printed warning\n     - error|e|raise|r|2: for a raised exception\n \n Example:\n     export GIT_PYTHON_REFRESH=quiet\n \n </denchmark-code>\n \n <denchmark-h:h3>How To Reproduce</denchmark-h>\n \n Here is a repo with all code to reproduce this bug - <denchmark-link:https://github.com/Ditwoo/err-exp>https://github.com/Ditwoo/err-exp</denchmark-link>\n \n <denchmark-h:h3>Expected behavior</denchmark-h>\n \n I think that catalyst should not depend from system's internal packages.\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "Ditwoo", "commentT": "2020-06-22T18:31:33Z", "comment_text": "\n \t\tYup, looks like we need to try-except it a bit :)\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "Ditwoo", "commentT": "2020-08-20T03:40:09Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/Scitator>@Scitator</denchmark-link>\n  Any updates ?\n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "Ditwoo", "commentT": "2020-08-20T04:49:33Z", "comment_text": "\n \t\tHi <denchmark-link:https://github.com/sidml>@sidml</denchmark-link>\n \n looks like we just have no time left for this issue :(\n Could you please help us?\n generally speaking you need to\n \n add something like\n \n <denchmark-code>IS_GIT_AVAILABLE\n </denchmark-code>\n \n example here - <denchmark-link:https://github.com/catalyst-team/catalyst/blob/master/catalyst/tools/settings.py#L19#L24>https://github.com/catalyst-team/catalyst/blob/master/catalyst/tools/settings.py#L19#L24</denchmark-link>\n \n \n add\n \n <denchmark-code>if IS_GIT_AVAILABLE:\n   from catalyst.utils.pipeline import ...\n </denchmark-code>\n \n here <denchmark-link:https://github.com/catalyst-team/catalyst/blob/master/catalyst/utils/__init__.py#L70>https://github.com/catalyst-team/catalyst/blob/master/catalyst/utils/__init__.py#L70</denchmark-link>\n \n example here - <denchmark-link:https://github.com/catalyst-team/catalyst/blob/master/catalyst/utils/__init__.py#L104#L105>https://github.com/catalyst-team/catalyst/blob/master/catalyst/utils/__init__.py#L104#L105</denchmark-link>\n \n I would really appreciate your help with this tiny noisy bug :)\n \t\t"}, "comments_3": {"comment_id": 4, "comment_author": "Ditwoo", "commentT": "2020-09-24T06:33:39Z", "comment_text": "\n \t\tfixed \ud83c\udf89\n \t\t"}}}, "commit": {"commit_id": "c1f24b411c20c82dbe16faf94f967308500b180b", "commit_author": "Siddhartha", "commitT": "2020-08-28 15:31:07+03:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "catalyst\\dl\\__main__.py", "file_new_name": "catalyst\\dl\\__main__.py", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "5,6,8,9,10,11,12", "deleted_lines": "5,7"}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "catalyst\\dl\\utils\\__init__.py", "file_new_name": "catalyst\\dl\\utils\\__init__.py", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "20,21,22,23,24", "deleted_lines": "20"}}}, "file_2": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "catalyst\\tools\\settings.py", "file_new_name": "catalyst\\tools\\settings.py", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "26,27,28,29,30,31,32,324", "deleted_lines": null}}}, "file_3": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "catalyst\\utils\\__init__.py", "file_new_name": "catalyst\\utils\\__init__.py", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "105,106,107,108,109", "deleted_lines": "70"}}}}}}