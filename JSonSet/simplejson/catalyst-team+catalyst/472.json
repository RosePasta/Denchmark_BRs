{"BR": {"BR_id": "472", "BR_author": "Rauf-Kurbanov", "BRopenT": "2019-10-28T08:17:37Z", "BRcloseT": "2019-10-28T09:57:17Z", "BR_text": {"BRsummary": "imread fails with non-jpg files", "BRdescription": "\n catalyst.utils.image.imread fails to read non-jpreg files e.g. .tif or .png because it uses outdated imageio.imread API\n <denchmark-code>import os\n from catalyst.utils.image import imread\n \n os.system(\"wget -O img.png https://www.sample-videos.com/img/Sample-png-image-200kb.png\")\n imread(\"img.png\")\n </denchmark-code>\n \n Provides following error with imageio==2.5.0:\n <denchmark-code>TypeError                                 Traceback (most recent call last)\n <ipython-input-92-cf55df030d98> in <module>\n       3 \n       4 os.system(\"wget -O img.png https://www.sample-videos.com/img/Sample-png-image-200kb.png\")\n ----> 5 imread(\"img.png\")\n \n /usr/local/lib/python3.6/dist-packages/catalyst/utils/image.py in imread(uri, grayscale, expand_dims, rootpath, **kwargs)\n      63             img = rgb2gray(img)\n      64     else:\n ---> 65         img = imageio.imread(uri, as_gray=grayscale, pilmode=\"RGB\", **kwargs)\n      66 \n      67     if expand_dims and len(img.shape) < 3:  # grayscale\n \n /usr/local/lib/python3.6/dist-packages/imageio/core/functions.py in imread(uri, format, **kwargs)\n     183         )\n     184 \n --> 185     # Return its reader object\n     186     return format.get_reader(request)\n     187 \n \n /usr/local/lib/python3.6/dist-packages/imageio/core/functions.py in get_reader(uri, format, mode, **kwargs)\n     109 \n     110     match = mem_re.match(arg)\n --> 111     if match is None:\n     112         raise ValueError(\n     113             \"Memory size could not be parsed \"\n \n /usr/local/lib/python3.6/dist-packages/imageio/core/format.py in get_reader(self, request)\n     156         from the given file. Users are encouraged to use\n     157         imageio.get_reader() instead.\n --> 158         \"\"\"\n     159         select_mode = request.mode[1] if request.mode[1] in \"iIvV\" else \"\"\n     160         if select_mode not in self.modes:\n \n /usr/local/lib/python3.6/dist-packages/imageio/core/format.py in __init__(self, format, request)\n     205         and context management as Python's file objects.\n     206         \"\"\"\n --> 207 \n     208         def __init__(self, format, request):\n     209             self.__closed = False\n \n TypeError: _open() got an unexpected keyword argument 'as_gray'\n </denchmark-code>\n \n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "Rauf-Kurbanov", "commentT": "2019-10-28T09:57:17Z", "comment_text": "\n \t\tThank you!\n \t\t"}}}, "commit": {"commit_id": "fb35ed5f32638af04d41a80a62cceb3b82835d98", "commit_author": "Rauf Kurbanov", "commitT": "2019-10-28 12:57:01+03:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "catalyst\\utils\\image.py", "file_new_name": "catalyst\\utils\\image.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "63,64,65", "deleted_lines": "62,63,65", "method_info": {"method_name": "imread", "method_params": "uri,grayscale,expand_dims,rootpath,kwargs", "method_startline": "41", "method_endline": "70"}}}}}}}