{"BR": {"BR_id": "3751", "BR_author": "daquexian", "BRopenT": "2020-11-02T09:50:49Z", "BRcloseT": "2020-11-02T11:27:18Z", "BR_text": {"BRsummary": "Linking error on some platforms and non-release mode", "BRdescription": "\n Ubuntu 18.04 \u4e0a\u7528 Release/ReleaseWithDebInfo \u4ee5\u5916\u7684\u6a21\u5f0f\u7f16\u8bd1 oneflow \u4f1a\u62a5\u9519\uff0c\u5728 manylinux2014 \u5bb9\u5668\u91cc\u7f16\u8bd1\u4e5f\u89c2\u5bdf\u5230\u540c\u6837\u7684\u73b0\u8c61\u3002\u5df2\u77e5\u662f <denchmark-link:https://github.com/Oneflow-Inc/oneflow/pull/3702>#3702</denchmark-link>\n  \u5408\u5e76\u540e\u51fa\u73b0\u7684\uff08\u63d0\u793a\uff1a\u5728\u5408\u5e76 <denchmark-link:https://github.com/Oneflow-Inc/oneflow/pull/3708>#3708</denchmark-link>\n  \u4e4b\u540e\u624d\u53ef\u4ee5\u7f16\u8bd1\u5426\u5219\u4f1a\u51fa\u73b0\u53e6\u4e00\u4e2a\u9519\u8bef\u4fe1\u606f\uff09\uff0c\u4f46\u4e0d\u6e05\u695a\u5177\u4f53\u539f\u56e0\u3002\n \u62a5\u9519\u4fe1\u606f\u662f\uff1a\n \n [100%] Linking CXX shared module python_scripts/oneflow/_oneflow_internal.cpython-36m-x86_64-linux-gnu.so\n /usr/bin/ld: /tmp/ccrOf02c.ltrans1.ltrans.o: relocation R_X86_64_PC32 against symbol `_ZNSt12__shared_ptrIN7oneflow11OpAttributeELN9__gnu_cxx12_Lock_policyE2EEC1Ev' can not be used when making a shared object; recompile with -fPIC\n /usr/bin/ld: final link failed: Bad value\n collect2: error: ld returned 1 exit status\n CMakeFiles/oneflow_internal.dir/build.make:1655: recipe for target 'python_scripts/oneflow/_oneflow_internal.cpython-36m-x86_64-linux-gnu.so' failed\n make[2]: *** [python_scripts/oneflow/_oneflow_internal.cpython-36m-x86_64-linux-gnu.so] Error 1\n CMakeFiles/Makefile2:1885: recipe for target 'CMakeFiles/oneflow_internal.dir/all' failed\n make[1]: *** [CMakeFiles/oneflow_internal.dir/all] Error 2\n Makefile:94: recipe for target 'all' failed\n make: *** [all] Error 2\n \n \t"}, "comments": {}}, "commit": {"commit_id": "17fc55094cd7ab42d4681da73aadee699846fdeb", "commit_author": "\u5d14\u5c0f\u4e8c", "commitT": "2020-11-02 19:27:17+08:00", "commit_complexity": {"commit_NLOC": "None", "commit_CCN": "None", "commit_Nprams": "None"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "oneflow\\core\\job\\job_build_and_infer_ctx.cpp", "file_new_name": "oneflow\\core\\job\\job_build_and_infer_ctx.cpp", "file_complexity": {"file_NLOC": "1043", "file_CCN": "190", "file_NToken": "10319"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "464", "deleted_lines": "464", "method_info": {"method_name": "oneflow::JobBuildAndInferCtx::AddAndInferMirroredOp", "method_params": "op_conf", "method_startline": "452", "method_endline": "491", "method_complexity": {"method_NLOC": "40", "method_CCN": "4", "method_NToken": "424", "method_nesting_level": "1"}}}}}}}}