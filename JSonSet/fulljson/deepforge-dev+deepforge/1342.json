{"BR": {"BR_id": "1342", "BR_author": "umesh-timalsina", "BRopenT": "2019-11-22T18:42:23Z", "BRcloseT": "2019-12-11T16:35:17Z", "BR_text": {"BRsummary": "Running Execution Deletion throws error in the server", "BRdescription": "\n As of right now,\n \n User initiates execution deletion (sending \"abort\" message to plugin)\n Plugin receives abort and sends \"cancel\" to the running jobs\n Execution is deleted\n Plugin save completes and it updates the node references in memory. Since some of the nodes have been deleted, they are replaced with null\n Plugin receives status update that running job has been canceled and tries to update the node. However, as the node was deleted it results in an error.\n \n To recreate the issue, you would need to (and this should be done in a test):\n \n Call onAbort\n Delete job nodes (or the entire execution)\n Call save (wait until complete)\n Respond with end messages from the compute backend\n \n \t"}, "comments": {}}, "commit": {"commit_id": "d197e92db04fb7f1b72beedcce13677f7693c450", "commit_author": "Brian Broll", "commitT": "2019-12-11 10:35:14-06:00", "commit_complexity": {"commit_NLOC": "1.0", "commit_CCN": "1.0", "commit_Nprams": "1.0"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 3, "file_old_name": "src\\plugins\\ExecuteJob\\ExecuteJob.js", "file_new_name": "src\\plugins\\ExecuteJob\\ExecuteJob.js", "file_complexity": {"file_NLOC": "567", "file_CCN": "109", "file_NToken": "4344"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "222", "deleted_lines": null, "method_info": {"method_name": "ExecuteJob.prototype.onUserCancelDetected", "method_params": "", "method_startline": "220", "method_endline": "227", "method_complexity": {"method_NLOC": "8", "method_CCN": "1", "method_NToken": "41", "method_nesting_level": "0"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "593,594,595,596", "deleted_lines": "604", "method_info": {"method_name": "this.core.getAttribute", "method_params": "job", "method_startline": "497", "method_endline": "729", "method_complexity": {"method_NLOC": "30", "method_CCN": "1", "method_NToken": "200", "method_nesting_level": "0"}}}, "hunk_2": {"Ismethod": 1, "added_lines": "593,594,595,596", "deleted_lines": "604", "method_info": {"method_name": "ExecuteJob.prototype.onOperationEnd", "method_params": "hash", "method_startline": "590", "method_endline": "642", "method_complexity": {"method_NLOC": "44", "method_CCN": "8", "method_NToken": "398", "method_nesting_level": "0"}}}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 5, "file_old_name": "src\\plugins\\ExecutePipeline\\ExecutePipeline.js", "file_new_name": "src\\plugins\\ExecutePipeline\\ExecutePipeline.js", "file_complexity": {"file_NLOC": "432", "file_CCN": "116", "file_NToken": "3662"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": null, "deleted_lines": "416,417,418,419,420", "method_info": {"method_name": "ExecutePipeline.prototype.onPipelineComplete", "method_params": "err", "method_startline": "414", "method_endline": "473", "method_complexity": {"method_NLOC": "27", "method_CCN": "10", "method_NToken": "166", "method_nesting_level": "0"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "522,523,524,525,526", "deleted_lines": "409,416,417,418,419,420,535", "method_info": {"method_name": "this.core.getPath", "method_params": "activeNode", "method_startline": "242", "method_endline": "609", "method_complexity": {"method_NLOC": "27", "method_CCN": "1", "method_NToken": "220", "method_nesting_level": "0"}}}, "hunk_2": {"Ismethod": 1, "added_lines": null, "deleted_lines": "409", "method_info": {"method_name": "ExecutePipeline.prototype.onOperationCanceled", "method_params": "op", "method_startline": "406", "method_endline": "412", "method_complexity": {"method_NLOC": "7", "method_CCN": "1", "method_NToken": "50", "method_nesting_level": "0"}}}, "hunk_3": {"Ismethod": 1, "added_lines": "522,523,524,525", "deleted_lines": null, "method_info": {"method_name": "ExecutePipeline.prototype.onOperationEnd", "method_params": "", "method_startline": "522", "method_endline": "525", "method_complexity": {"method_NLOC": "4", "method_CCN": "1", "method_NToken": "23", "method_nesting_level": "0"}}}, "hunk_4": {"Ismethod": 1, "added_lines": null, "deleted_lines": "535", "method_info": {"method_name": "ExecutePipeline.prototype.onOperationComplete", "method_params": "opNode", "method_startline": "528", "method_endline": "553", "method_complexity": {"method_NLOC": "21", "method_CCN": "3", "method_NToken": "168", "method_nesting_level": "0"}}}}}, "file_2": {"file_change_type": "MODIFY", "file_Nmethod": 3, "file_old_name": "test\\globals.js", "file_new_name": "test\\globals.js", "file_complexity": {"file_NLOC": "41", "file_CCN": "9", "file_NToken": "301"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "57,58,59,60,61", "deleted_lines": null, "method_info": {"method_name": "testFixture.waitUntil", "method_params": "condFn", "method_startline": "57", "method_endline": "61", "method_complexity": {"method_NLOC": "5", "method_CCN": "2", "method_NToken": "22", "method_nesting_level": "0"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "53,54,55", "deleted_lines": null, "method_info": {"method_name": "testFixture.sleep", "method_params": "duration", "method_startline": "53", "method_endline": "55", "method_complexity": {"method_NLOC": "3", "method_CCN": "1", "method_NToken": "13", "method_nesting_level": "0"}}}, "hunk_2": {"Ismethod": 1, "added_lines": "54", "deleted_lines": null, "method_info": {"method_name": "(anonymous)", "method_params": "", "method_startline": "54", "method_endline": "54", "method_complexity": {"method_NLOC": "1", "method_CCN": "1", "method_NToken": "7", "method_nesting_level": "0"}}}}}, "file_3": {"file_change_type": "MODIFY", "file_Nmethod": 11, "file_old_name": "test\\unit\\plugins\\ExecuteJob\\ExecuteJob.spec.js", "file_new_name": "test\\unit\\plugins\\ExecuteJob\\ExecuteJob.spec.js", "file_complexity": {"file_NLOC": "283", "file_CCN": "54", "file_NToken": "2147"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "336,337,338,339", "deleted_lines": "336,337,338,339", "method_info": {"method_name": "(anonymous)", "method_params": "err", "method_startline": "336", "method_endline": "339", "method_complexity": {"method_NLOC": "4", "method_CCN": "1", "method_NToken": "23", "method_nesting_level": "0"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "70,80,81,82,83,84", "deleted_lines": "68,78,79,80,81,82,83,84,85", "method_info": {"method_name": "preparePlugin", "method_params": "done", "method_startline": "68", "method_endline": "86", "method_complexity": {"method_NLOC": "14", "method_CCN": "1", "method_NToken": "70", "method_nesting_level": "0"}}}, "hunk_2": {"Ismethod": 1, "added_lines": "345,346,347,348", "deleted_lines": null, "method_info": {"method_name": "(anonymous)", "method_params": "", "method_startline": "345", "method_endline": "348", "method_complexity": {"method_NLOC": "4", "method_CCN": "1", "method_NToken": "16", "method_nesting_level": "0"}}}, "hunk_3": {"Ismethod": 1, "added_lines": "351,352,353", "deleted_lines": null, "method_info": {"method_name": "plugin.createComputeClient", "method_params": "", "method_startline": "351", "method_endline": "353", "method_complexity": {"method_NLOC": "3", "method_CCN": "1", "method_NToken": "17", "method_nesting_level": "0"}}}, "hunk_4": {"Ismethod": 1, "added_lines": "70,80,81,82,83,84", "deleted_lines": "78,79,80,81,82,83,84,85", "method_info": {"method_name": "preparePlugin", "method_params": "", "method_startline": "70", "method_endline": "85", "method_complexity": {"method_NLOC": "15", "method_CCN": "1", "method_NToken": "92", "method_nesting_level": "0"}}}, "hunk_5": {"Ismethod": 1, "added_lines": "371,372", "deleted_lines": null, "method_info": {"method_name": "cancelJob", "method_params": "", "method_startline": "371", "method_endline": "372", "method_complexity": {"method_NLOC": "2", "method_CCN": "1", "method_NToken": "4", "method_nesting_level": "0"}}}, "hunk_6": {"Ismethod": 1, "added_lines": "330,335,336,337,338,339,340", "deleted_lines": "331,336,337,338,339", "method_info": {"method_name": "(anonymous)", "method_params": "", "method_startline": "330", "method_endline": "341", "method_complexity": {"method_NLOC": "11", "method_CCN": "2", "method_NToken": "68", "method_nesting_level": "0"}}}, "hunk_7": {"Ismethod": 1, "added_lines": "330,335,336,337,338,339,340,343,344,345,346,347,348,349,350,351,352,353,354,355,356,357,358,359,360,361,362,363,364,365,366,367,368,369,370,371,372,373", "deleted_lines": "331,336,337,338,339", "method_info": {"method_name": "plugin.prepare", "method_params": "", "method_startline": "229", "method_endline": "374", "method_complexity": {"method_NLOC": "13", "method_CCN": "1", "method_NToken": "79", "method_nesting_level": "0"}}}, "hunk_8": {"Ismethod": 1, "added_lines": "335,336,337,338,339,340", "deleted_lines": "331,336,337,338,339", "method_info": {"method_name": "(anonymous)", "method_params": "done", "method_startline": "331", "method_endline": "340", "method_complexity": {"method_NLOC": "6", "method_CCN": "1", "method_NToken": "43", "method_nesting_level": "0"}}}, "hunk_9": {"Ismethod": 1, "added_lines": "366,367,368,369", "deleted_lines": null, "method_info": {"method_name": "createJob", "method_params": "hash", "method_startline": "366", "method_endline": "369", "method_complexity": {"method_NLOC": "4", "method_CCN": "1", "method_NToken": "16", "method_nesting_level": "0"}}}, "hunk_10": {"Ismethod": 1, "added_lines": "347", "deleted_lines": null, "method_info": {"method_name": "plugin.startExecHeartBeat", "method_params": "", "method_startline": "347", "method_endline": "347", "method_complexity": {"method_NLOC": "1", "method_CCN": "1", "method_NToken": "2", "method_nesting_level": "0"}}}}}}}}