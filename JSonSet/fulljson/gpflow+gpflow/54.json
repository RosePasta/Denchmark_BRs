{"BR": {"BR_id": "54", "BR_author": "alexisboukouvalas", "BRopenT": "2016-04-24T08:41:31Z", "BRcloseT": "2016-05-28T22:05:34Z", "BR_text": {"BRsummary": "Changing parameter to fixed requires model recompilation prior to prediction", "BRdescription": "\n Error is: ValueError: Cannot feed value of shape (4,) for Tensor u'Variable:0', which has shape '(5,)'\n Error happens in predict_f  - full error trace below.\n Minimal working example below.\n Issue on master branch as of April 24, 2016.\n <denchmark-h:h3>Code MWE - based on simple_regression.py</denchmark-h>\n \n <denchmark-code>import GPflow\n import tensorflow as tf\n import os\n import numpy as np\n def getData():\n     rng = np.random.RandomState( 1 )\n     N = 30\n     X = rng.rand(N,1)\n     Y = np.sin(12*X) + 0.66*np.cos(25*X) + rng.randn(N,1)*0.1 + 3\n     return X,Y\n if __name__ == '__main__':\n     X,Y = getData()\n     k = GPflow.kernels.Matern52(1)\n     meanf = GPflow.mean_functions.Linear(1,0)\n     m = GPflow.gpr.GPR(X, Y, k, meanf)\n     m.likelihood.variance = 0.01\n     m._compile()\n     print \"Here are the parameters before optimization\"\n     print m\n     m.kern.variance.fixed = True\n     #m._compile() # If we compile again the code below works\n     [mu,var] = m.predict_f(X)\n     print mu\n     print 'done'\n </denchmark-code>\n \n <denchmark-h:h3>Trace:</denchmark-h>\n \n <denchmark-code>Traceback (most recent call last):\n   File \"/Users/mqbssaby/PrivateProjects/BranchedGP/runfile.py\", line 29, in <module>\n     [mu,var] = m.predict_f(X)\n   File \"/Users/mqbssaby/pythonlibs/GPflow/GPflow/model.py\", line 82, in runnable\n     return instance._session.run(graph, feed_dict=feed_dict)\n   File \"/Users/mqbssaby/anaconda/lib/python2.7/site-packages/tensorflow/python/client/session.py\", line 340, in run\n     run_metadata_ptr)\n   File \"/Users/mqbssaby/anaconda/lib/python2.7/site-packages/tensorflow/python/client/session.py\", line 553, in _run\n     % (np_val.shape, subfeed_t.name, str(subfeed_t.get_shape())))\n ValueError: Cannot feed value of shape (4,) for Tensor u'Variable:0', which has shape '(5,)'\n </denchmark-code>\n \n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "alexisboukouvalas", "commentT": "2016-04-24T20:08:54Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/alexisboukouvalas>@alexisboukouvalas</denchmark-link>\n  , could you take a look at my PR and see if it successfully covers all your use cases? A little stress-testing would be very helpful.\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "alexisboukouvalas", "commentT": "2016-05-28T22:05:34Z", "comment_text": "\n \t\tthis appears fixed and I haven't hit this issue again.\n \t\t"}}}, "commit": {"commit_id": "a1b4aa9fc15450ac192cb61a97de1fe76a7efd52", "commit_author": "James Hensman", "commitT": "2016-05-27 16:25:10+01:00", "commit_complexity": {"commit_NLOC": "None", "commit_CCN": "None", "commit_Nprams": "None"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "testing\\test_autoflow.py", "file_new_name": "testing\\test_autoflow.py", "file_complexity": {"file_NLOC": "80", "file_CCN": "16", "file_NToken": "761"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "100,101,102,103", "deleted_lines": null, "method_info": {"method_name": "test", "method_params": "self", "method_startline": "100", "method_endline": "103", "method_complexity": {"method_NLOC": "4", "method_CCN": "1", "method_NToken": "39", "method_nesting_level": "1"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "91,92,93,94,95,96,97,98", "deleted_lines": null, "method_info": {"method_name": "setUp", "method_params": "self", "method_startline": "91", "method_endline": "98", "method_complexity": {"method_NLOC": "8", "method_CCN": "1", "method_NToken": "104", "method_nesting_level": "1"}}}}}}}}