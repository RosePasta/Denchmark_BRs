{"BR": {"BR_id": "736", "BR_author": "lukeyeager", "BRopenT": "2016-05-13T23:23:03Z", "BRcloseT": "2016-05-17T17:07:21Z", "BR_text": {"BRsummary": "Torch error when testing a model trained with multiple GPUs", "BRdescription": "\n <denchmark-code>digits.inference.errors.InferenceError:\n   torch classify one task failed with error message -\n   ...6-05-12/install/share/lua/5.1/cunn/DataParallelTable.lua:374:\n   Model was serialized on 2 nGPUs, but you are running on 1 please set \n   DataParallelTable.deserializeNGPUs to ignore  serialized tower-GPU assignments\n </denchmark-code>\n \n <denchmark-link:https://github.com/gheinrich>@gheinrich</denchmark-link>\n  Would <denchmark-link:https://github.com/NVIDIA/DIGITS/pull/732>#732</denchmark-link>\n  fix this?\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "lukeyeager", "commentT": "2016-05-17T11:22:42Z", "comment_text": "\n \t\tThanks for the bug report, I have updated the commit on <denchmark-link:https://github.com/NVIDIA/DIGITS/pull/734>#734</denchmark-link>\n  to fix this (with the new programming model we also need to set the number of GPUs when we deserialize a model when doing inference or fine-tuning).\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "lukeyeager", "commentT": "2016-05-17T16:57:34Z", "comment_text": "\n \t\t^ I think you meant <denchmark-link:https://github.com/NVIDIA/DIGITS/pull/732>#732</denchmark-link>\n ?\n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "lukeyeager", "commentT": "2016-05-17T19:26:27Z", "comment_text": "\n \t\t\n I think you meant #732?\n \n Whoops. Indeed!\n \t\t"}}}, "commit": {"commit_id": "c30c4c81353a3fc85b3fd64f1af4d6ebaf76ff14", "commit_author": "Greg Heinrich", "commitT": "2016-05-17 13:22:24+02:00", "commit_complexity": {"commit_NLOC": "0.7727272727272727", "commit_CCN": "0.8636363636363636", "commit_Nprams": "0.7727272727272727"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "digits\\standard-networks\\torch\\ImageNet-Training\\alexnet.lua", "file_new_name": "digits\\standard-networks\\torch\\ImageNet-Training\\alexnet.lua", "file_complexity": {"file_NLOC": "79", "file_CCN": "11", "file_NToken": "679"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "50,51,52,53,54,56,57,58,59,60,61", "deleted_lines": "50,51,52,53,55", "method_info": {"method_name": "createModel", "method_params": "nGPU,channels,nClasses", "method_startline": "20", "method_endline": "70", "method_complexity": {"method_NLOC": "42", "method_CCN": "3", "method_NToken": "497", "method_nesting_level": "0"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "56,57,58,59,60,61", "deleted_lines": null, "method_info": {"method_name": "(anonymous)", "method_params": "", "method_startline": "56", "method_endline": "61", "method_complexity": {"method_NLOC": "6", "method_CCN": "2", "method_NToken": "23", "method_nesting_level": "0"}}}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "digits\\standard-networks\\torch\\ImageNet-Training\\googlenet.lua", "file_new_name": "digits\\standard-networks\\torch\\ImageNet-Training\\googlenet.lua", "file_complexity": {"file_NLOC": "121", "file_CCN": "18", "file_NToken": "1583"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "63,65,66,71,79,92,106,107,108,109,110,112,113,114,115,116,117", "deleted_lines": "63,65,66,71,79,92,106,107,108,109,111", "method_info": {"method_name": "createModel", "method_params": "nGPU,nChannels,nClasses", "method_startline": "58", "method_endline": "124", "method_complexity": {"method_NLOC": "53", "method_CCN": "4", "method_NToken": "933", "method_nesting_level": "0"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "112,113,114,115,116,117", "deleted_lines": null, "method_info": {"method_name": "(anonymous)", "method_params": "", "method_startline": "112", "method_endline": "117", "method_complexity": {"method_NLOC": "6", "method_CCN": "2", "method_NToken": "23", "method_nesting_level": "0"}}}}}, "file_2": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "digits\\standard-networks\\torch\\lenet.lua", "file_new_name": "digits\\standard-networks\\torch\\lenet.lua", "file_complexity": {"file_NLOC": "60", "file_CCN": "12", "file_NToken": "422"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "55,56,57,58,59,60", "deleted_lines": "55,57", "method_info": {"method_name": "(anonymous)", "method_params": "", "method_startline": "55", "method_endline": "60", "method_complexity": {"method_NLOC": "6", "method_CCN": "2", "method_NToken": "23", "method_nesting_level": "0"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "49,50,51,52,53,54,55,56,57,58,59,60,61,63", "deleted_lines": "49,50,51,52,53,54,55,57", "method_info": {"method_name": "(anonymous)", "method_params": "params", "method_startline": "3", "method_endline": "72", "method_complexity": {"method_NLOC": "55", "method_CCN": "8", "method_NToken": "386", "method_nesting_level": "0"}}}}}, "file_3": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "tools\\torch\\main.lua", "file_new_name": "tools\\torch\\main.lua", "file_complexity": {"file_NLOC": "587", "file_CCN": "37", "file_NToken": "3711"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": null, "deleted_lines": "762", "method_info": {"method_name": "(anonymous)", "method_params": "m", "method_startline": "762", "method_endline": "762", "method_complexity": {"method_NLOC": "1", "method_CCN": "2", "method_NToken": "15", "method_nesting_level": "0"}}}, "hunk_1": {"Ismethod": 1, "added_lines": null, "deleted_lines": "761,762,763", "method_info": {"method_name": "Train", "method_params": "epoch,dataLoader", "method_startline": "700", "method_endline": "807", "method_complexity": {"method_NLOC": "73", "method_CCN": "16", "method_NToken": "481", "method_nesting_level": "0"}}}}}, "file_4": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "tools\\torch\\test.lua", "file_new_name": "tools\\torch\\test.lua", "file_complexity": {"file_NLOC": "297", "file_CCN": "27", "file_NToken": "1740"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "110,111,112,113", "deleted_lines": null, "method_info": {"method_name": "loadNetwork", "method_params": "dir,name,labels,weightsFile,tensorType,inputTensorShape", "method_startline": "101", "method_endline": "152", "method_complexity": {"method_NLOC": "36", "method_CCN": "8", "method_NToken": "236", "method_nesting_level": "0"}}}}}}}}