{"BR": {"BR_id": "59", "BR_author": "lukeyeager", "BRopenT": "2015-04-10T01:08:41Z", "BRcloseT": "2015-04-17T22:51:12Z", "BR_text": {"BRsummary": "Standardize on BGR, but be ready for caffe fix", "BRdescription": "\n Problem originally reported in <denchmark-link:https://github.com/NVIDIA/DIGITS/issues/52>#52</denchmark-link>\n . Remaining issues:\n \n  Save unencoded images to database in BGR (so caffe will read them the same way as encoded images and resulting .caffemodel files will match)*\n  Save mean.binaryproto in BGR (so the mean will be subtracted from the correct channels)\n  Note in the dataset in which order the channels are stored (so we can keep track of which datasets were created in which ways)\n \n * This will be inconvenient when adding other frameworks.\n To be explicit, here is a table representing the problem and the changes:\n \n \n \n \n Old, encoded\n Old, unencoded\n New, encoded\n New, unencoded\n \n \n \n \n Model Creation\n \n \n \n \n \n \n Database format\n JPEG\n RGB\n JPEG\n BGR\n \n \n Mean\n RGB\n RGB\n BGR\n BGR\n \n \n Model trained incorrectly\n _Yes_\n No\n No\n No\n \n \n Inference\n \n \n \n \n \n \n Image needs channel swap\n Yes\n No\n Yes\n Yes\n \n \n Mean needs channel swap\n No\n No\n No\n No\n \n \n \n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "lukeyeager", "commentT": "2015-04-16T18:39:38Z", "comment_text": "\n \t\tAll of the listed features are implemented, and I've verified that data is being prepared as expected. After days of testing and fiddling with random number seeds, I still can't create reproducible results between PNG compression (lossless) and raw BGR, but I am fairly confident it's due to inconsistencies in caffe's results during training rather than any mistakes during data preparation. That's largely due to the fact that I can't reproduce results on back-to-back training sessions on the same GPU with the same data and network, either.\n \t\t"}}}, "commit": {"commit_id": "da649c7fde0d28571b97f32bd8a0e1ad95d3bd7c", "commit_author": "Luke Yeager", "commitT": "2015-04-16 11:28:34-07:00", "commit_complexity": {"commit_NLOC": "0.0", "commit_CCN": "0.2826086956521739", "commit_Nprams": "0.9130434782608695"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "digits\\dataset\\images\\classification\\job.py", "file_new_name": "digits\\dataset\\images\\classification\\job.py", "file_complexity": {"file_NLOC": "139", "file_CCN": "12", "file_NToken": "892"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60", "deleted_lines": null, "method_info": {"method_name": "__setstate__", "method_params": "self,state", "method_startline": "26", "method_endline": "60", "method_complexity": {"method_NLOC": "32", "method_CCN": "6", "method_NToken": "261", "method_nesting_level": "1"}}}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "digits\\dataset\\tasks\\create_db.py", "file_new_name": "digits\\dataset\\tasks\\create_db.py", "file_complexity": {"file_NLOC": "179", "file_CCN": "48", "file_NToken": "1236"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "50,51,52,53", "deleted_lines": null, "method_info": {"method_name": "__init__", "method_params": "self,input_file,db_name,image_dims,kwargs", "method_startline": "21", "method_endline": "56", "method_complexity": {"method_NLOC": "18", "method_CCN": "2", "method_NToken": "149", "method_nesting_level": "1"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "67,68,69,70,71,72,73,74,75,76", "deleted_lines": null, "method_info": {"method_name": "__setstate__", "method_params": "self,state", "method_startline": "64", "method_endline": "76", "method_complexity": {"method_NLOC": "11", "method_CCN": "4", "method_NToken": "64", "method_nesting_level": "1"}}}}}, "file_2": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "digits\\model\\tasks\\caffe_train.py", "file_new_name": "digits\\model\\tasks\\caffe_train.py", "file_complexity": {"file_NLOC": "667", "file_CCN": "172", "file_NToken": "5181"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "934,935,936,937", "deleted_lines": "934,935,936", "method_info": {"method_name": "get_transformer", "method_params": "self", "method_startline": "915", "method_endline": "957", "method_complexity": {"method_NLOC": "29", "method_CCN": "7", "method_NToken": "259", "method_nesting_level": "1"}}}}}, "file_3": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "tools\\create_db.py", "file_new_name": "tools\\create_db.py", "file_complexity": {"file_NLOC": "355", "file_CCN": "33", "file_NToken": "2433"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "257,258,259,260,381,382,383,384", "deleted_lines": null}}}}}}