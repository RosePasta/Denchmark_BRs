{"BR": {"BR_id": "1087", "BR_author": "Yevgnen", "BRopenT": "2020-05-31T08:01:53Z", "BRcloseT": "2020-05-31T19:36:24Z", "BR_text": {"BRsummary": "wandb: WARNING Adding to old History rows isn't currently supported.", "BRdescription": "\n <denchmark-h:h2>\ud83d\udc1b Bug description</denchmark-h>\n \n When setup_wandb_logging is used, no metric is logged into wandb.\n Replace all  setup codes in the <denchmark-link:https://github.com/pytorch/ignite/blob/master/examples/contrib/mnist/mnist_with_wandb_logger.py>example</denchmark-link>\n  with\n <denchmark-code>    setup_wandb_logging(\n         trainer,\n         optimizers=optimizer,\n         evaluators={\"train_evaluator\": train_evaluator, \"val_evaluator\": validation_evaluator},\n     )\n </denchmark-code>\n \n Sample output:\n <denchmark-code>2020-05-31 15:33:48,794 ignite.engine.engine.Engine INFO     Engine run starting with max_epochs=10.\n 2020-05-31 15:34:15,116 ignite.engine.engine.Engine INFO     Epoch[1] Complete. Time taken: 00:00:26\n 2020-05-31 15:34:15,116 ignite.engine.engine.Engine INFO     Engine run starting with max_epochs=1.\n 2020-05-31 15:34:28,936 ignite.engine.engine.Engine INFO     Epoch[1] Complete. Time taken: 00:00:14\n wandb: WARNING Adding to old History rows isn't currently supported.  Step 1 < 900; dropping {'train_evaluator/accuracy': 0.93575, 'train_evaluator/loss': 0.21386248969634375}.\n 2020-05-31 15:34:28,937 ignite.engine.engine.Engine INFO     Engine run complete. Time taken 00:00:14\n 2020-05-31 15:34:28,937 ignite.engine.engine.Engine INFO     Engine run starting with max_epochs=1.\n 2020-05-31 15:34:31,217 ignite.engine.engine.Engine INFO     Epoch[1] Complete. Time taken: 00:00:02\n wandb: WARNING Adding to old History rows isn't currently supported.  Step 1 < 900; dropping {'val_evaluator/accuracy': 0.9388, 'val_evaluator/loss': 0.19922671020030974}.\n 2020-05-31 15:34:31,218 ignite.engine.engine.Engine INFO     Engine run complete. Time taken 00:00:02\n 2020-05-31 15:35:00,453 ignite.engine.engine.Engine INFO     Epoch[2] Complete. Time taken: 00:00:29\n 2020-05-31 15:35:00,454 ignite.engine.engine.Engine INFO     Engine run starting with max_epochs=1.\n 2020-05-31 15:35:14,638 ignite.engine.engine.Engine INFO     Epoch[1] Complete. Time taken: 00:00:14\n wandb: WARNING Adding to old History rows isn't currently supported.  Step 2 < 1800; dropping {'train_evaluator/accuracy': 0.95845, 'train_evaluator/loss': 0.13595107924938202}.\n 2020-05-31 15:35:14,639 ignite.engine.engine.Engine INFO     Engine run complete. Time taken 00:00:14\n 2020-05-31 15:35:14,639 ignite.engine.engine.Engine INFO     Engine run starting with max_epochs=1.\n 2020-05-31 15:35:16,887 ignite.engine.engine.Engine INFO     Epoch[1] Complete. Time taken: 00:00:02\n wandb: WARNING Adding to old History rows isn't currently supported.  Step 2 < 1800; dropping {'val_evaluator/accuracy': 0.9615, 'val_evaluator/loss': 0.12946590296924115}.\n </denchmark-code>\n \n When login to <denchmark-link:https://app.wandb.ai/>wandb</denchmark-link>\n , no metric is logged.\n <denchmark-h:h2>Environment</denchmark-h>\n \n \n PyTorch Version (e.g., 1.4): 1.5.0\n Ignite Version (e.g., 0.3.0):cfd0799\n OS (e.g., Linux): macOS 10.15.5\n How you installed Ignite (conda, pip, source): source\n Python version: 3.8.2\n \n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "Yevgnen", "commentT": "2020-05-31T08:32:18Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/Yevgnen>@Yevgnen</denchmark-link>\n  thanks for reporting ! Indeed, as we log evaluators' metrics on epochs:\n \n \n in addition to logging other stuff (lr, training metrics etc) on iterations, this is not supported by wandb...\n Let's see what can be done...\n \t\t"}}}, "commit": {"commit_id": "70059fc0b4941f98259082c1aaade27b7f10f6dd", "commit_author": "vfdev", "commitT": "2020-05-31 21:36:23+02:00", "commit_complexity": {"commit_NLOC": "0.9444444444444444", "commit_CCN": "0.9444444444444444", "commit_Nprams": "0.9444444444444444"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "examples\\contrib\\mnist\\mnist_with_neptune_logger.py", "file_new_name": "examples\\contrib\\mnist\\mnist_with_neptune_logger.py", "file_complexity": {"file_NLOC": "133", "file_CCN": "8", "file_NToken": "981"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "81,86,88,108,111,112,115,116,117,118,119,120,121,122,124,136,148", "deleted_lines": "85,86,87,88,89,90,91,92,93,94,95,96,121,123,124,125,129,130,131,132,133,134,135,136,137,138,139,141,142,143", "method_info": {"method_name": "run", "method_params": "train_batch_size,val_batch_size,epochs,lr,momentum", "method_startline": "69", "method_endline": "149", "method_complexity": {"method_NLOC": "62", "method_CCN": "3", "method_NToken": "428", "method_nesting_level": "0"}}}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "examples\\contrib\\mnist\\mnist_with_tensorboard_logger.py", "file_new_name": "examples\\contrib\\mnist\\mnist_with_tensorboard_logger.py", "file_complexity": {"file_NLOC": "136", "file_CCN": "10", "file_NToken": "1061"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "82,99,101,110,113,114,115,118,119,120,121,122,123,124,125,127,137,138,139,140,141,142,143,144,145,146,147,148,149,152", "deleted_lines": "109,111,112,113,117,118,119,120,121,123,124,125,126,127,128,129,130,131", "method_info": {"method_name": "run", "method_params": "train_batch_size,val_batch_size,epochs,lr,momentum,log_dir", "method_startline": "70", "method_endline": "153", "method_complexity": {"method_NLOC": "61", "method_CCN": "5", "method_NToken": "484", "method_nesting_level": "0"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "137,138", "deleted_lines": null, "method_info": {"method_name": "run.score_function", "method_params": "engine", "method_startline": "137", "method_endline": "138", "method_complexity": {"method_NLOC": "2", "method_CCN": "1", "method_NToken": "14", "method_nesting_level": "1"}}}}}, "file_2": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "examples\\contrib\\mnist\\mnist_with_tqdm_logger.py", "file_new_name": "examples\\contrib\\mnist\\mnist_with_tqdm_logger.py", "file_complexity": {"file_NLOC": "94", "file_CCN": "8", "file_NToken": "838"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "11", "deleted_lines": "14,15"}}}, "file_3": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "examples\\contrib\\mnist\\mnist_with_trains_logger.py", "file_new_name": "examples\\contrib\\mnist\\mnist_with_trains_logger.py", "file_complexity": {"file_NLOC": "120", "file_CCN": "7", "file_NToken": "998"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "75,80,82,91,94,95,98,99,100,101,102,103,104,105,106,107,108,127,128,137", "deleted_lines": "91,93,94,95,99,100,101,102,103,104,105,106,107,108,109,110,111,112,131,132,136", "method_info": {"method_name": "run", "method_params": "train_batch_size,val_batch_size,epochs,lr,momentum", "method_startline": "63", "method_endline": "137", "method_complexity": {"method_NLOC": "56", "method_CCN": "3", "method_NToken": "458", "method_nesting_level": "0"}}}}}, "file_4": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "examples\\contrib\\mnist\\mnist_with_visdom_logger.py", "file_new_name": "examples\\contrib\\mnist\\mnist_with_visdom_logger.py", "file_complexity": {"file_NLOC": "120", "file_CCN": "8", "file_NToken": "968"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "119,120", "deleted_lines": null, "method_info": {"method_name": "run.score_function", "method_params": "engine", "method_startline": "119", "method_endline": "120", "method_complexity": {"method_NLOC": "2", "method_CCN": "1", "method_NToken": "14", "method_nesting_level": "1"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "81,86,88,97,100,101,104,105,106,107,108,109,110,111,113,119,120,121,122,123,124,125,126,127,128,129,130,131,135", "deleted_lines": "93,95,99,100,101,102,103,104,105,106,107,108,109,111,112,113,132", "method_info": {"method_name": "run", "method_params": "train_batch_size,val_batch_size,epochs,lr,momentum,log_dir", "method_startline": "69", "method_endline": "135", "method_complexity": {"method_NLOC": "48", "method_CCN": "3", "method_NToken": "393", "method_nesting_level": "0"}}}}}, "file_5": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "examples\\contrib\\mnist\\mnist_with_wandb_logger.py", "file_new_name": "examples\\contrib\\mnist\\mnist_with_wandb_logger.py", "file_complexity": {"file_NLOC": "128", "file_CCN": "8", "file_NToken": "945"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "75,79,84,86,105,108,109,112,113,114,115,116,119,121,122,135,141", "deleted_lines": "103,105,106,107,108,109,110,114,115,116,117,118,119,120,121,122,123,124,125,128,129,130,132,133", "method_info": {"method_name": "run", "method_params": "train_batch_size,val_batch_size,epochs,lr,momentum", "method_startline": "67", "method_endline": "142", "method_complexity": {"method_NLOC": "59", "method_CCN": "3", "method_NToken": "392", "method_nesting_level": "0"}}}}}, "file_6": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "ignite\\contrib\\engines\\common.py", "file_new_name": "ignite\\contrib\\engines\\common.py", "file_complexity": {"file_NLOC": "238", "file_CCN": "35", "file_NToken": "1592"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "250,251", "deleted_lines": "251", "method_info": {"method_name": "_setup_logging", "method_params": "logger,trainer,optimizers,evaluators,log_every_iters", "method_startline": "217", "method_endline": "255", "method_complexity": {"method_NLOC": "29", "method_CCN": "13", "method_NToken": "239", "method_nesting_level": "0"}}}}}, "file_7": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "ignite\\contrib\\handlers\\wandb_logger.py", "file_new_name": "ignite\\contrib\\handlers\\wandb_logger.py", "file_complexity": {"file_NLOC": "303", "file_CCN": "17", "file_NToken": "480"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "32,39,49,239,240,246,250,251,257,299,300,301", "deleted_lines": "32,39,49,239,240,246,250,251,257,299,300,301"}}}, "file_8": {"file_change_type": "MODIFY", "file_Nmethod": 3, "file_old_name": "ignite\\handlers\\__init__.py", "file_new_name": "ignite\\handlers\\__init__.py", "file_complexity": {"file_NLOC": "32", "file_CCN": "3", "file_NToken": "130"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "21,27,34,35", "deleted_lines": "21", "method_info": {"method_name": "global_step_from_engine", "method_params": "Engine", "method_startline": "21", "method_endline": "35", "method_complexity": {"method_NLOC": "12", "method_CCN": "1", "method_NToken": "14", "method_nesting_level": "0"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "34,35", "deleted_lines": null, "method_info": {"method_name": "global_step_from_engine.wrapper", "method_params": "Any,EventEnum", "method_startline": "33", "method_endline": "36", "method_complexity": {"method_NLOC": "4", "method_CCN": "2", "method_NToken": "34", "method_nesting_level": "1"}}}, "hunk_2": {"Ismethod": 1, "added_lines": "21,27,34,35", "deleted_lines": "21", "method_info": {"method_name": "global_step_from_engine", "method_params": "Engine,custom_event_name", "method_startline": "21", "method_endline": "38", "method_complexity": {"method_NLOC": "13", "method_CCN": "1", "method_NToken": "18", "method_nesting_level": "0"}}}}}, "file_9": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "tests\\ignite\\contrib\\handlers\\test_base_logger.py", "file_new_name": "tests\\ignite\\contrib\\handlers\\test_base_logger.py", "file_complexity": {"file_NLOC": "143", "file_CCN": "20", "file_NToken": "1262"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "7", "deleted_lines": "7"}}}, "file_10": {"file_change_type": "ADD", "file_Nmethod": 0, "file_old_name": "None", "file_new_name": "tests\\ignite\\handlers\\test_handlers.py", "file_complexity": {"file_NLOC": "13", "file_CCN": "1", "file_NToken": "100"}}}}}