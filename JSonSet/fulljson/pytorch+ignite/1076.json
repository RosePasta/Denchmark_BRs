{"BR": {"BR_id": "1076", "BR_author": "snie2012", "BRopenT": "2020-05-27T23:59:37Z", "BRcloseT": "2020-05-28T12:25:41Z", "BR_text": {"BRsummary": "Length check fails for IterableDataset", "BRdescription": "\n I am using IterableDataset with unknown length. It fails inside the following if clause:\n \n \n \n ignite/ignite/engine/engine.py\n \n \n          Line 642\n       in\n       cc78b3b\n \n \n \n \n \n \n  if hasattr(data, \"__len__\"): \n \n \n \n \n \n Here is the logic why it fails:\n \n Data is PyTorch DataLoader, which has the __len__ attr, so it goes into the if clause\n It runs the code epoch_length = len(data), and leads to length = self._IterableDataset_len_called = len(self.dataset) in dataloader.py in pytorch\n Since dataset is an IterableDataset, it doesn't have length so it throws sth like TypeError: object of type 'IterableDataset' has no len()\n \n My concern is that we shouldn't expect IterableDataset to have __len__ and the code should not fail because of it. Any thoughts on this?\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "snie2012", "commentT": "2020-05-28T00:05:39Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/snie2012>@snie2012</denchmark-link>\n  thanks for the report! Yes, you are right about that. We have a test with  but with defined : \n  Yes, definitely, we need to support  with unknown length !\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "snie2012", "commentT": "2020-05-28T12:35:35Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/snie2012>@snie2012</denchmark-link>\n  the bug should be fixed in the next nightly release\n \t\t"}}}, "commit": {"commit_id": "6ccc4a81f27124c39e37a9f8b9763875decbc95b", "commit_author": "vfdev", "commitT": "2020-05-28 14:25:40+02:00", "commit_complexity": {"commit_NLOC": "1.0", "commit_CCN": "1.0", "commit_Nprams": "1.0"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "ignite\\engine\\deterministic.py", "file_new_name": "ignite\\engine\\deterministic.py", "file_complexity": {"file_NLOC": "214", "file_CCN": "51", "file_NToken": "1134"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "196", "deleted_lines": "196,197,198,199,200,201,202", "method_info": {"method_name": "_setup_engine", "method_params": "self", "method_startline": "195", "method_endline": "234", "method_complexity": {"method_NLOC": "29", "method_CCN": "13", "method_NToken": "260", "method_nesting_level": "1"}}}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "ignite\\engine\\engine.py", "file_new_name": "ignite\\engine\\engine.py", "file_complexity": {"file_NLOC": "592", "file_CCN": "86", "file_NToken": "2383"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "666,667,668,669,670,671,672,673,674", "deleted_lines": null, "method_info": {"method_name": "_get_data_length", "method_params": "self,data", "method_startline": "666", "method_endline": "674", "method_complexity": {"method_NLOC": "8", "method_CCN": "3", "method_NToken": "32", "method_nesting_level": "1"}}}}}, "file_2": {"file_change_type": "MODIFY", "file_Nmethod": 6, "file_old_name": "tests\\ignite\\engine\\test_engine.py", "file_new_name": "tests\\ignite\\engine\\test_engine.py", "file_complexity": {"file_NLOC": "606", "file_CCN": "134", "file_NToken": "4877"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "527,528,529", "deleted_lines": "527,528,529", "method_info": {"method_name": "test_engine_with_iterable_dataloader.foo", "method_params": "e,b", "method_startline": "527", "method_endline": "529", "method_complexity": {"method_NLOC": "3", "method_CCN": "1", "method_NToken": "34", "method_nesting_level": "1"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "637", "deleted_lines": null, "method_info": {"method_name": "test_engine_with_dataloader_no_auto_batching", "method_params": "", "method_startline": "632", "method_endline": "650", "method_complexity": {"method_NLOC": "11", "method_CCN": "1", "method_NToken": "90", "method_nesting_level": "0"}}}, "hunk_2": {"Ismethod": 1, "added_lines": "887,894,895", "deleted_lines": null, "method_info": {"method_name": "test_set_data", "method_params": "", "method_startline": "885", "method_endline": "911", "method_complexity": {"method_NLOC": "14", "method_CCN": "1", "method_NToken": "102", "method_nesting_level": "0"}}}, "hunk_3": {"Ismethod": 1, "added_lines": "512,513,514,515,525,527,528,529,530,532,534,535,536,538,539,540,541,542,543,544,545,546,547", "deleted_lines": "512,522,523,525,527,528,529,531,532,534", "method_info": {"method_name": "test_engine_with_iterable_dataloader", "method_params": "", "method_startline": "511", "method_endline": "547", "method_complexity": {"method_NLOC": "8", "method_CCN": "1", "method_NToken": "40", "method_nesting_level": "0"}}}, "hunk_4": {"Ismethod": 1, "added_lines": "525,527,528,529,530,532,534,535,536,538,539,540,541,542", "deleted_lines": "525,527,528,529,531,532,534", "method_info": {"method_name": "test_engine_with_iterable_dataloader._test", "method_params": "epoch_length", "method_startline": "525", "method_endline": "542", "method_complexity": {"method_NLOC": "11", "method_CCN": "2", "method_NToken": "78", "method_nesting_level": "1"}}}, "hunk_5": {"Ismethod": 1, "added_lines": "534,535,536", "deleted_lines": "534", "method_info": {"method_name": "test_engine_with_iterable_dataloader.test_engine_with_iterable_dataloader._test.foo", "method_params": "e,b", "method_startline": "534", "method_endline": "536", "method_complexity": {"method_NLOC": "3", "method_CCN": "1", "method_NToken": "34", "method_nesting_level": "2"}}}}}}}}