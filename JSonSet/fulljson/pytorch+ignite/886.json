{"BR": {"BR_id": "886", "BR_author": "bendboaz", "BRopenT": "2020-04-04T21:44:57Z", "BRcloseT": "2020-04-05T08:42:57Z", "BR_text": {"BRsummary": "utils.convert_tensor considers `device = 0` to be no device", "BRdescription": "\n <denchmark-h:h2>\ud83d\udc1b Bug description</denchmark-h>\n \n In utils.convert_tensor, this line appears:\n return tensor.to(device=device, non_blocking=non_blocking) if device else tensor\n This means that for device = 0 (as returned from torch.cuda.current_device) no conversion is applied, which can be very confusing. I might add a PR for that tomorrow, unless people tell me there's a reason to leave that line as it is.\n For reproduction:\n import torch\n from ignite.utils import convert_tensor\n \n mytens = torch.zeros(2)\n device = torch.cuda.current_device()\n converted_tens = convert_tensor(mytens, device)\n assert converted_tens.device == device\n <denchmark-h:h2>Environment</denchmark-h>\n \n \n PyTorch Version (e.g., 1.4): 1.4\n Ignite Version (e.g., 0.3.0): 0.3\n OS (e.g., Linux): Windows 10\n How you installed Ignite (conda, pip, source): conda\n Python version: 3.7.6\n \n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "bendboaz", "commentT": "2020-04-04T22:07:51Z", "comment_text": "\n \t\tThanks for the report <denchmark-link:https://github.com/bendboaz>@bendboaz</denchmark-link>\n  ! Yes, please send a PR to fix that with \n \t\t"}}}, "commit": {"commit_id": "5e05252801f6d145e94717207419cb348fe9ea64", "commit_author": "bendboaz", "commitT": "2020-04-05 10:42:56+02:00", "commit_complexity": {"commit_NLOC": "None", "commit_CCN": "None", "commit_Nprams": "None"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "ignite\\utils.py", "file_new_name": "ignite\\utils.py", "file_complexity": {"file_NLOC": "105", "file_CCN": "7", "file_NToken": "647"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "18", "deleted_lines": "18", "method_info": {"method_name": "_func", "method_params": "Tensor", "method_startline": "17", "method_endline": "18", "method_complexity": {"method_NLOC": "2", "method_CCN": "2", "method_NToken": "33", "method_nesting_level": "1"}}}}}}}}