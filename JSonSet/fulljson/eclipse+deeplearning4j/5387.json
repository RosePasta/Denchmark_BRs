{"BR": {"BR_id": "5387", "BR_author": "AlexDBlack", "BRopenT": "2018-05-30T05:34:18Z", "BRcloseT": "2018-05-30T11:25:44Z", "BR_text": {"BRsummary": "SameDiff: incomingArgs keys not necessarily unique; overwrites existing values", "BRdescription": "\n Consider the following code:\n <denchmark-code>        SameDiff sd = SameDiff.create();\n \n         int nOut = 4;\n         int minibatch = 10;\n         SDVariable a = sd.var(\"A\", new int[]{minibatch, nOut});\n         SDVariable b = sd.var(\"B\", new int[]{minibatch, nOut});\n \n         SDVariable add1 = a.add(\"add1\",b);\n         SDVariable add2 = a.add(\"add2\",b);\n \n         SDVariable mul = add1.mul(\"mul\",add2);\n         SDVariable sum = sd.sum(\"sum\", mul, Integer.MAX_VALUE);\n </denchmark-code>\n \n The key {\"A\",\"B\"} would have appeared multiple times with different values. However, this is not possible:\n <denchmark-code>private Map<List<String>, DifferentialFunction> incomingArgs;\n </denchmark-code>\n \n (Previously this was a  which had its own problems: <denchmark-link:https://github.com/deeplearning4j/deeplearning4j/issues/5385>https://github.com/deeplearning4j/deeplearning4j/issues/5385</denchmark-link>\n  )\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "AlexDBlack", "commentT": "2018-09-21T23:24:04Z", "comment_text": "\n \t\tThis thread has been automatically locked since there has not been any recent activity after it was closed. Please open a new issue for related bugs.\n \t\t"}}}, "commit": {"commit_id": "e631a60c4079e2020ddedc0e89f3a38366ad6281", "commit_author": "Alex Black", "commitT": "2018-05-30 15:52:00+10:00", "commit_complexity": {"commit_NLOC": "1.0", "commit_CCN": "1.0", "commit_Nprams": "0.0"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 8, "file_old_name": "nd4j\\nd4j-backends\\nd4j-api-parent\\nd4j-api\\src\\main\\java\\org\\nd4j\\autodiff\\samediff\\SameDiff.java", "file_new_name": "nd4j\\nd4j-backends\\nd4j-api-parent\\nd4j-api\\src\\main\\java\\org\\nd4j\\autodiff\\samediff\\SameDiff.java", "file_complexity": {"file_NLOC": "3554", "file_CCN": "967", "file_NToken": "30444"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "6817,6818,6819,6820,6824,6826,6828,6829,6831,6832", "deleted_lines": "6826,6827,6828,6829,6833,6835,6837,6839,6840", "method_info": {"method_name": "SameDiff::summary", "method_params": "", "method_startline": "6790", "method_endline": "6921", "method_complexity": {"method_NLOC": "104", "method_CCN": "19", "method_NToken": "1104", "method_nesting_level": "1"}}}, "hunk_1": {"Ismethod": 1, "added_lines": null, "deleted_lines": "1117", "method_info": {"method_name": "SameDiff::addOutgoingFor", "method_params": "varNames,function", "method_startline": "1098", "method_endline": "1129", "method_complexity": {"method_NLOC": "23", "method_CCN": "8", "method_NToken": "182", "method_nesting_level": "1"}}}, "hunk_2": {"Ismethod": 1, "added_lines": null, "deleted_lines": "832,833", "method_info": {"method_name": "SameDiff::SameDiff", "method_params": "", "method_startline": "818", "method_endline": "847", "method_complexity": {"method_NLOC": "29", "method_CCN": "1", "method_NToken": "246", "method_nesting_level": "1"}}}, "hunk_3": {"Ismethod": 1, "added_lines": "5175,5176,5177,5178,5180,5181,5182,5183,5184,5185,5186,5187,5188,5189,5191,5193,5194,5195,5196,5199,5200,5201,5204,5205,5206,5207,5208,5209,5210,5211,5213,5214,5216,5217,5218,5219,5220,5222,5223,5224,5225,5227,5229,5230,5231,5235,5236,5237,5238,5239,5240,5243,5244,5245,5246,5248,5249,5250,5251,5252,5253,5254,5258,5259,5260,5261,5262,5263,5264,5267,5271,5272,5273,5274,5275,5276,5278,5279,5280,5281,5282,5283,5284", "deleted_lines": "5176,5177,5178,5179,5180,5181,5182,5184,5186,5187,5188,5189,5192,5193,5194,5195,5197,5198,5199,5200,5201,5202,5203,5204,5206,5207,5209,5210,5211,5212,5215,5216,5217,5218,5219,5220,5221,5222,5223,5224,5228,5229,5230,5231,5232,5233,5234,5236,5237,5238,5239,5241,5242,5243,5244,5245,5246,5247,5248,5249,5252,5253,5254,5255,5256,5257,5258,5260,5264,5265,5266,5267,5271,5272,5275,5277,5278,5281,5282,5283,5284,5285", "method_info": {"method_name": "SameDiff::createGradFunction", "method_params": "", "method_startline": "5175", "method_endline": "5285", "method_complexity": {"method_NLOC": "80", "method_CCN": "20", "method_NToken": "665", "method_nesting_level": "1"}}}, "hunk_4": {"Ismethod": 1, "added_lines": "5156,5157,5160,5161,5162,5163,5164,5165,5166,5167,5168,5169,5170,5172,5173", "deleted_lines": "5167,5168,5170,5171,5172", "method_info": {"method_name": "SameDiff::execBackwards", "method_params": "", "method_startline": "5154", "method_endline": "5173", "method_complexity": {"method_NLOC": "16", "method_CCN": "5", "method_NToken": "98", "method_nesting_level": "1"}}}, "hunk_5": {"Ismethod": 1, "added_lines": null, "deleted_lines": "1148,1149", "method_info": {"method_name": "SameDiff::addArgsFor", "method_params": "variables,function", "method_startline": "1137", "method_endline": "1161", "method_complexity": {"method_NLOC": "19", "method_CCN": "6", "method_NToken": "140", "method_nesting_level": "1"}}}, "hunk_6": {"Ismethod": 1, "added_lines": "1185,1186", "deleted_lines": null, "method_info": {"method_name": "SameDiff::hasArgs", "method_params": "function", "method_startline": "1184", "method_endline": "1187", "method_complexity": {"method_NLOC": "4", "method_CCN": "2", "method_NToken": "34", "method_nesting_level": "1"}}}, "hunk_7": {"Ismethod": 1, "added_lines": null, "deleted_lines": "1518,1528", "method_info": {"method_name": "SameDiff::removeArgFromFunction", "method_params": "varName,function", "method_startline": "1507", "method_endline": "1534", "method_complexity": {"method_NLOC": "20", "method_CCN": "5", "method_NToken": "198", "method_nesting_level": "1"}}}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "nd4j\\nd4j-backends\\nd4j-tests\\src\\test\\java\\org\\nd4j\\autodiff\\samediff\\SameDiffTests.java", "file_new_name": "nd4j\\nd4j-backends\\nd4j-tests\\src\\test\\java\\org\\nd4j\\autodiff\\samediff\\SameDiffTests.java", "file_complexity": {"file_NLOC": "2822", "file_CCN": "245", "file_NToken": "29488"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "3717,3718,3726,3727,3728,3729,3730,3731,3732,3733,3734,3735,3736,3737,3738,3739,3740,3741,3742,3743,3744,3745,3746,3747,3748,3751,3757,3758,3760,3761,3762,3763,3764", "deleted_lines": "3724,3725,3726,3727,3728,3730,3731,3732,3734,3735,3736,3738,3739,3740,3747,3748,3749,3750,3751,3752,3753,3754,3755,3756,3757,3758,3759", "method_info": {"method_name": "SameDiffTests::validateInternalState", "method_params": "", "method_startline": "3700", "method_endline": "3764", "method_complexity": {"method_NLOC": "21", "method_CCN": "1", "method_NToken": "236", "method_nesting_level": "1"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "3767,3768,3769,3770,3771,3772,3773,3774,3775,3776,3777,3778,3779,3780,3781,3782,3783", "deleted_lines": null, "method_info": {"method_name": "SameDiffTests::validateInternalState2", "method_params": "", "method_startline": "3767", "method_endline": "3787", "method_complexity": {"method_NLOC": "13", "method_CCN": "1", "method_NToken": "146", "method_nesting_level": "1"}}}}}}}}