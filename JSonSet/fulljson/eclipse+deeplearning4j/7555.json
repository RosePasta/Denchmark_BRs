{"BR": {"BR_id": "7555", "BR_author": "AlexDBlack", "BRopenT": "2019-04-16T13:26:38Z", "BRcloseT": "2019-08-07T07:18:30Z", "BR_text": {"BRsummary": "DL4J cuDNN helpers: don't fall back on built-in implementation from profiler exceptions", "BRdescription": "\n Profiler exceptions like the one shown below shouldn't trigger our cuDNN helpers to fall back on the built-in implementation. Instead, it should simply propagate the exception up.\n <denchmark-code>o.d.n.l.c.s.SubsamplingLayer - CuDNN execution failed - falling back on built-in implementation\n org.nd4j.linalg.exception.ND4JIllegalStateException: P.A.N.I.C.! Op.Z() contains 9267 NaN value(s): \n \tat org.nd4j.linalg.api.ops.executioner.OpExecutionerUtil.checkForNaN(OpExecutionerUtil.java:66)\n \tat org.nd4j.linalg.api.ops.executioner.OpExecutionerUtil.checkForNaN(OpExecutionerUtil.java:107)\n \tat org.nd4j.linalg.api.ops.executioner.DefaultOpExecutioner.profilingConfigurableHookOut(DefaultOpExecutioner.java:502)\n \tat org.nd4j.linalg.jcublas.ops.executioner.CudaExecutioner.invoke(CudaExecutioner.java:1472)\n \tat org.nd4j.linalg.jcublas.ops.executioner.CudaExecutioner.exec(CudaExecutioner.java:634)\n </denchmark-code>\n \n \t"}, "comments": {}}, "commit": {"commit_id": "edb71bf46f06bffb9bee4a2025a08aa022aeba2e", "commit_author": "Alex Black", "commitT": "2019-08-07 17:18:29+10:00", "commit_complexity": {"commit_NLOC": "0.07096774193548387", "commit_CCN": "0.0", "commit_Nprams": "0.16129032258064516"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "deeplearning4j\\deeplearning4j-core\\src\\test\\java\\org\\deeplearning4j\\nn\\layers\\FrozenLayerWithBackpropTest.java", "file_new_name": "deeplearning4j\\deeplearning4j-core\\src\\test\\java\\org\\deeplearning4j\\nn\\layers\\FrozenLayerWithBackpropTest.java", "file_complexity": {"file_NLOC": "461", "file_CCN": "12", "file_NToken": "4145"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "219,220,221,222,223,224,225,226,227,228,229,230", "deleted_lines": "196,241,242,243,244,245,246,247,248,249,250", "method_info": {"method_name": "FrozenLayerWithBackpropTest::testComputationGraphFrozenLayerParamsAfterBackprop", "method_params": "", "method_startline": "196", "method_endline": "250", "method_complexity": {"method_NLOC": "45", "method_CCN": "2", "method_NToken": "614", "method_nesting_level": "1"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "168,169,170,171,172,173,174", "deleted_lines": "168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193", "method_info": {"method_name": "FrozenLayerWithBackpropTest::testMultiLayerNetworkFrozenLayerParamsAfterBackprop", "method_params": "", "method_startline": "159", "method_endline": "193", "method_complexity": {"method_NLOC": "29", "method_CCN": "2", "method_NToken": "403", "method_nesting_level": "1"}}}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "deeplearning4j\\deeplearning4j-nn\\src\\main\\java\\org\\deeplearning4j\\nn\\layers\\convolution\\ConvolutionLayer.java", "file_new_name": "deeplearning4j\\deeplearning4j-nn\\src\\main\\java\\org\\deeplearning4j\\nn\\layers\\convolution\\ConvolutionLayer.java", "file_complexity": {"file_NLOC": "351", "file_CCN": "77", "file_NToken": "3355"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "365,366", "deleted_lines": null, "method_info": {"method_name": "ConvolutionLayer::preOutput", "method_params": "training,forBackprop,workspaceMgr", "method_startline": "307", "method_endline": "431", "method_complexity": {"method_NLOC": "89", "method_CCN": "25", "method_NToken": "946", "method_nesting_level": "1"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "174,175", "deleted_lines": null, "method_info": {"method_name": "ConvolutionLayer::backpropGradient", "method_params": "epsilon,workspaceMgr", "method_startline": "107", "method_endline": "257", "method_complexity": {"method_NLOC": "104", "method_CCN": "17", "method_NToken": "1162", "method_nesting_level": "1"}}}}}, "file_2": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "deeplearning4j\\deeplearning4j-nn\\src\\main\\java\\org\\deeplearning4j\\nn\\layers\\convolution\\subsampling\\SubsamplingLayer.java", "file_new_name": "deeplearning4j\\deeplearning4j-nn\\src\\main\\java\\org\\deeplearning4j\\nn\\layers\\convolution\\subsampling\\SubsamplingLayer.java", "file_complexity": {"file_NLOC": "290", "file_CCN": "62", "file_NToken": "2200"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "135,136", "deleted_lines": null, "method_info": {"method_name": "SubsamplingLayer::backpropGradient", "method_params": "epsilon,workspaceMgr", "method_startline": "104", "method_endline": "202", "method_complexity": {"method_NLOC": "79", "method_CCN": "18", "method_NToken": "685", "method_nesting_level": "1"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "262,263", "deleted_lines": null, "method_info": {"method_name": "SubsamplingLayer::activate", "method_params": "training,workspaceMgr", "method_startline": "219", "method_endline": "311", "method_complexity": {"method_NLOC": "76", "method_CCN": "15", "method_NToken": "633", "method_nesting_level": "1"}}}}}, "file_3": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "deeplearning4j\\deeplearning4j-nn\\src\\main\\java\\org\\deeplearning4j\\nn\\layers\\normalization\\BatchNormalization.java", "file_new_name": "deeplearning4j\\deeplearning4j-nn\\src\\main\\java\\org\\deeplearning4j\\nn\\layers\\normalization\\BatchNormalization.java", "file_complexity": {"file_NLOC": "440", "file_CCN": "83", "file_NToken": "4363"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "453,454", "deleted_lines": null, "method_info": {"method_name": "BatchNormalization::preOutput", "method_params": "x,training,workspaceMgr", "method_startline": "402", "method_endline": "581", "method_complexity": {"method_NLOC": "127", "method_CCN": "29", "method_NToken": "1216", "method_nesting_level": "1"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "160,161", "deleted_lines": null, "method_info": {"method_name": "BatchNormalization::backpropGradient", "method_params": "epsilon,workspaceMgr", "method_startline": "108", "method_endline": "384", "method_complexity": {"method_NLOC": "182", "method_CCN": "25", "method_NToken": "2080", "method_nesting_level": "1"}}}}}, "file_4": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "deeplearning4j\\deeplearning4j-nn\\src\\main\\java\\org\\deeplearning4j\\nn\\layers\\normalization\\LocalResponseNormalization.java", "file_new_name": "deeplearning4j\\deeplearning4j-nn\\src\\main\\java\\org\\deeplearning4j\\nn\\layers\\normalization\\LocalResponseNormalization.java", "file_complexity": {"file_NLOC": "215", "file_CCN": "40", "file_NToken": "2040"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "145,146", "deleted_lines": null, "method_info": {"method_name": "LocalResponseNormalization::backpropGradient", "method_params": "epsilon,workspaceMgr", "method_startline": "132", "method_endline": "193", "method_complexity": {"method_NLOC": "52", "method_CCN": "10", "method_NToken": "620", "method_nesting_level": "1"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "212,213", "deleted_lines": null, "method_info": {"method_name": "LocalResponseNormalization::activateHelper", "method_params": "training,workspaceMgr,forBackprop", "method_startline": "200", "method_endline": "272", "method_complexity": {"method_NLOC": "61", "method_CCN": "12", "method_NToken": "652", "method_nesting_level": "1"}}}}}, "file_5": {"file_change_type": "ADD", "file_Nmethod": 0, "file_old_name": "None", "file_new_name": "nd4j\\nd4j-backends\\nd4j-api-parent\\nd4j-api\\src\\main\\java\\org\\nd4j\\autodiff\\listeners\\debugging\\ExecDebuggingListener.java", "file_complexity": {"file_NLOC": "200", "file_CCN": "71", "file_NToken": "1911"}}, "file_6": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "nd4j\\nd4j-backends\\nd4j-api-parent\\nd4j-api\\src\\main\\java\\org\\nd4j\\imports\\converters\\DifferentialFunctionClassHolder.java", "file_new_name": "nd4j\\nd4j-backends\\nd4j-api-parent\\nd4j-api\\src\\main\\java\\org\\nd4j\\imports\\converters\\DifferentialFunctionClassHolder.java", "file_complexity": {"file_NLOC": "247", "file_CCN": "58", "file_NToken": "2140"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "238,239,240,241,242,243,244,245,246,247,248,249", "deleted_lines": "238", "method_info": {"method_name": "DifferentialFunctionClassHolder::DifferentialFunctionClassHolder", "method_params": "", "method_startline": "157", "method_endline": "292", "method_complexity": {"method_NLOC": "103", "method_CCN": "33", "method_NToken": "965", "method_nesting_level": "1"}}}}}, "file_7": {"file_change_type": "ADD", "file_Nmethod": 0, "file_old_name": "None", "file_new_name": "nd4j\\nd4j-backends\\nd4j-tests\\src\\test\\java\\org\\nd4j\\autodiff\\samediff\\listeners\\ExecDebuggingListenerTest.java", "file_complexity": {"file_NLOC": "47", "file_CCN": "4", "file_NToken": "462"}}}}}