{"BR": {"BR_id": "2598", "BR_author": "lyschoening", "BRopenT": "2020-10-05T14:14:20Z", "BRcloseT": "2020-10-15T00:56:38Z", "BR_text": {"BRsummary": "TFX 0.24 fails on/after trainer step in interactive run", "BRdescription": "\n The typical TFX pipeline fails with a kernel restart after the trainer is run for the first time.\n For example, when running the following colab, the kernel restarts if the trainer step is re-run.\n <denchmark-link:https://colab.research.google.com/github/tensorflow/tfx/blob/master/docs/tutorials/tfx/components_keras.ipynb#scrollTo=429-vvCWibO0>https://colab.research.google.com/github/tensorflow/tfx/blob/master/docs/tutorials/tfx/components_keras.ipynb#scrollTo=429-vvCWibO0</denchmark-link>\n \n The runtime logs list this error:\n \n \n \n \n Oct 5, 2020, 4:05:08 PM\n WARNING\n WARNING:root:kernel 31895490-d985-4a77-9518-021f4be051b0 restarted\n \n \n \n \n Oct 5, 2020, 4:05:08 PM\n INFO\n KernelRestarter: restarting kernel (1/5), keep random ports\n \n \n Oct 5, 2020, 4:05:07 PM\n WARNING\n 2020-10-05 14:05:07.377834: F ml_metadata/metadata_store/query_config_executor.cc:299] Unexpected oneof:\n \n \n \n \n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "lyschoening", "commentT": "2020-10-06T16:43:58Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/lyschoening>@lyschoening</denchmark-link>\n  Please downgrade to tfx 0.22 and let me know if the issue still persists. Thanks!\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "lyschoening", "commentT": "2020-10-06T23:09:27Z", "comment_text": "\n \t\tAny story moving forward? This is blocking upgrade.\n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "lyschoening", "commentT": "2020-10-07T12:00:55Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/gowthamkpr>@gowthamkpr</denchmark-link>\n  This issue does not occur in TFX 0.22, only in TFX 0.24.\n I ran the above Colab substituting !pip install tfx for !pip install  tfx==0.22.1 apache-beam==2.21.0 and that works without issues. (The TFX 0.22 install is broken in a different way, as it depends on apache-beam[gcp]>=2.21,<3, yet is incompatible with 2.24.0.)\n \t\t"}, "comments_3": {"comment_id": 4, "comment_author": "lyschoening", "commentT": "2020-10-08T17:08:00Z", "comment_text": "\n \t\t@Iyschoening This is a know issue and will be fixed in the next release. Thanks!\n \t\t"}, "comments_4": {"comment_id": 5, "comment_author": "lyschoening", "commentT": "2020-10-08T17:10:08Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/gowthamkpr>@gowthamkpr</denchmark-link>\n  do we have any ETA for that release?\n \t\t"}, "comments_5": {"comment_id": 6, "comment_author": "lyschoening", "commentT": "2020-10-09T19:41:37Z", "comment_text": "\n \t\tCC: <denchmark-link:https://github.com/hughmiao>@hughmiao</denchmark-link>\n \n \t\t"}, "comments_6": {"comment_id": 7, "comment_author": "lyschoening", "commentT": "2020-10-12T16:59:51Z", "comment_text": "\n \t\tHi <denchmark-link:https://github.com/gowthamkpr>@gowthamkpr</denchmark-link>\n  <denchmark-link:https://github.com/charlesccychen>@charlesccychen</denchmark-link>\n  <denchmark-link:https://github.com/hughmiao>@hughmiao</denchmark-link>\n  do we have any updates on the ETA? This blocks upgrade if we can't run training reliably. Thanks\n \t\t"}, "comments_7": {"comment_id": 8, "comment_author": "lyschoening", "commentT": "2020-10-13T22:20:49Z", "comment_text": "\n \t\tThis will be fixed in <denchmark-link:https://github.com/tensorflow/tfx/pull/2652>#2652</denchmark-link>\n .  We will need a patch release to resolve this issue.\n CC: <denchmark-link:https://github.com/zhitaoli>@zhitaoli</denchmark-link>\n  <denchmark-link:https://github.com/dhruvesh09>@dhruvesh09</denchmark-link>\n \n \t\t"}, "comments_8": {"comment_id": 9, "comment_author": "lyschoening", "commentT": "2020-10-13T22:57:09Z", "comment_text": "\n \t\tAre you satisfied with the resolution of your issue?\n <denchmark-link:https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=Yes&entry.2137816233=https://github.com/tensorflow/tfx/issues/2598>Yes</denchmark-link>\n \n <denchmark-link:https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=No&entry.2137816233=https://github.com/tensorflow/tfx/issues/2598>No</denchmark-link>\n \n \t\t"}, "comments_9": {"comment_id": 10, "comment_author": "lyschoening", "commentT": "2020-10-13T22:57:12Z", "comment_text": "\n \t\tAre you satisfied with the resolution of your issue?\n <denchmark-link:https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=Yes&entry.2137816233=https://github.com/tensorflow/tfx/issues/2598>Yes</denchmark-link>\n \n <denchmark-link:https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=No&entry.2137816233=https://github.com/tensorflow/tfx/issues/2598>No</denchmark-link>\n \n \t\t"}, "comments_10": {"comment_id": 11, "comment_author": "lyschoening", "commentT": "2020-10-13T23:07:22Z", "comment_text": "\n \t\tReopening pending patch release.\n CC: <denchmark-link:https://github.com/zhitaoli>@zhitaoli</denchmark-link>\n  <denchmark-link:https://github.com/dhruvesh09>@dhruvesh09</denchmark-link>\n \n \t\t"}, "comments_11": {"comment_id": 12, "comment_author": "lyschoening", "commentT": "2020-10-14T02:16:28Z", "comment_text": "\n \t\tTFX 0.24.1 is now available. Please feel free to test it and report any issues you find.\n CC: <denchmark-link:https://github.com/zhitaoli>@zhitaoli</denchmark-link>\n  <denchmark-link:https://github.com/charlesccychen>@charlesccychen</denchmark-link>\n \n \t\t"}, "comments_12": {"comment_id": 13, "comment_author": "lyschoening", "commentT": "2020-10-15T00:54:12Z", "comment_text": "\n \t\tIt works indeed! Ty for the fast turnaround!\n \t\t"}, "comments_13": {"comment_id": 14, "comment_author": "lyschoening", "commentT": "2020-10-15T00:56:40Z", "comment_text": "\n \t\tAre you satisfied with the resolution of your issue?\n <denchmark-link:https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=Yes&entry.2137816233=https://github.com/tensorflow/tfx/issues/2598>Yes</denchmark-link>\n \n <denchmark-link:https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=No&entry.2137816233=https://github.com/tensorflow/tfx/issues/2598>No</denchmark-link>\n \n \t\t"}}}, "commit": {"commit_id": "7923292d622b435efdb7e6174a0e8fc9604c4897", "commit_author": "tfx-team", "commitT": "2020-10-13 15:56:59-07:00", "commit_complexity": {"commit_NLOC": "0.5714285714285714", "commit_CCN": "1.0", "commit_Nprams": "1.0"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "RELEASE.md", "file_new_name": "RELEASE.md", "file_complexity": {"file_NLOC": "None", "file_CCN": "None", "file_NToken": "None"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "30,31", "deleted_lines": null}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "tfx\\types\\artifact.py", "file_new_name": "tfx\\types\\artifact.py", "file_complexity": {"file_NLOC": "375", "file_CCN": "77", "file_NToken": "2108"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "471,472", "deleted_lines": null, "method_info": {"method_name": "get_string_custom_property", "method_params": "self,Text", "method_startline": "469", "method_endline": "473", "method_complexity": {"method_NLOC": "5", "method_CCN": "2", "method_NToken": "35", "method_nesting_level": "1"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "477,478", "deleted_lines": null, "method_info": {"method_name": "get_int_custom_property", "method_params": "self,Text", "method_startline": "475", "method_endline": "479", "method_complexity": {"method_NLOC": "5", "method_CCN": "2", "method_NToken": "35", "method_nesting_level": "1"}}}}}, "file_2": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "tfx\\types\\artifact_test.py", "file_new_name": "tfx\\types\\artifact_test.py", "file_complexity": {"file_NLOC": "323", "file_CCN": "17", "file_NToken": "2000"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "282,283,284", "deleted_lines": null, "method_info": {"method_name": "testArtifactProperties", "method_params": "self", "method_startline": "268", "method_endline": "296", "method_complexity": {"method_NLOC": "26", "method_CCN": "1", "method_NToken": "191", "method_nesting_level": "1"}}}}}}}}