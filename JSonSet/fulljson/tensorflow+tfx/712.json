{"BR": {"BR_id": "712", "BR_author": "ucdmkt", "BRopenT": "2019-10-08T06:16:37Z", "BRcloseT": "2019-10-11T18:48:59Z", "BR_text": {"BRsummary": "AI Platform Pusher fails on 2nd run", "BRdescription": "\n I am imitating  of <denchmark-link:https://github.com/tensorflow/tfx/blob/46bb4f975c36ea1defde4b3c33553e088b3dc5b8/tfx/examples/chicago_taxi_pipeline/taxi_pipeline_kubeflow.py#L85>taxi_pipeline_kubeflow.py</denchmark-link>\n \n When I execute the Pusher for 2nd time, it fails on the following error, as opposed to creating a new version under the same model name.\n <denchmark-code>Traceback (most recent call last):\n   File \"/opt/venv/lib/python3.6/site-packages/tfx/extensions/google_cloud_ai_platform/runner.py\", line 176, in deploy_model_for_cmle_serving\n     api.projects().models().create(body=body, parent=parent).execute()\n   File \"/opt/venv/lib/python3.6/site-packages/googleapiclient/_helpers.py\", line 130, in positional_wrapper\n     return wrapped(*args, **kwargs)\n   File \"/opt/venv/lib/python3.6/site-packages/googleapiclient/http.py\", line 856, in execute\n     raise HttpError(resp, content, uri=self.uri)\n googleapiclient.errors.HttpError: <HttpError 409 when requesting \n https://ml.googleapis.com/v1/projects/xxxxxxxx/models?alt=json\n  returned \"Field: model.name Error: A model with the same name already exists.\". Details: \"[{'@type': 'type.googleapis.com/google.rpc.BadRequest', 'fieldViolations': [{'field': 'model.name', 'description': 'A model with the same name already exists.'}]}]\">\n </denchmark-code>\n \n I would expect that a new version with v{{unix timestamp}} to be created under the same model name.\n \t"}, "comments": {}}, "commit": {"commit_id": "443b03f4356068538df4a6764a91356c2f250150", "commit_author": "muchida", "commitT": "2019-10-11 11:48:41-07:00", "commit_complexity": {"commit_NLOC": "1.0", "commit_CCN": "1.0", "commit_Nprams": "1.0"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "RELEASE.md", "file_new_name": "RELEASE.md", "file_complexity": {"file_NLOC": "None", "file_CCN": "None", "file_NToken": "None"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "51", "deleted_lines": null}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "tfx\\extensions\\google_cloud_ai_platform\\runner.py", "file_new_name": "tfx\\extensions\\google_cloud_ai_platform\\runner.py", "file_complexity": {"file_NLOC": "118", "file_CCN": "4", "file_NToken": "825"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "180", "deleted_lines": "180"}}}, "file_2": {"file_change_type": "MODIFY", "file_Nmethod": 6, "file_old_name": "tfx\\orchestration\\kubeflow\\kubeflow_gcp_integration_test.py", "file_new_name": "tfx\\orchestration\\kubeflow\\kubeflow_gcp_integration_test.py", "file_complexity": {"file_NLOC": "267", "file_CCN": "19", "file_NToken": "1709"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "323,324,325,326,327,328,329,330,331,332,333,334,335,336,337,338,339,341,342,343", "deleted_lines": "318,319,320,321,322,323,324,325,326,327,328", "method_info": {"method_name": "testAIPlatformPusherPipeline", "method_params": "self", "method_startline": "318", "method_endline": "346", "method_complexity": {"method_NLOC": "10", "method_CCN": "1", "method_NToken": "79", "method_nesting_level": "1"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "267", "deleted_lines": "260", "method_info": {"method_name": "testEvaluatorOnDataflowRunner", "method_params": "self", "method_startline": "258", "method_endline": "273", "method_complexity": {"method_NLOC": "15", "method_CCN": "1", "method_NToken": "85", "method_nesting_level": "1"}}}, "hunk_2": {"Ismethod": 1, "added_lines": "150,151,153", "deleted_lines": "151", "method_info": {"method_name": "_delete_ai_platform_model", "method_params": "self,model_name", "method_startline": "137", "method_endline": "166", "method_complexity": {"method_NLOC": "22", "method_CCN": "3", "method_NToken": "174", "method_nesting_level": "1"}}}, "hunk_3": {"Ismethod": 1, "added_lines": "324,325,326,327,328,329,330,331,332,333,334,335,336,337,338", "deleted_lines": "324,325,326,327,328", "method_info": {"method_name": "testAIPlatformPusherPipeline._pusher", "method_params": "model,name", "method_startline": "324", "method_endline": "338", "method_complexity": {"method_NLOC": "15", "method_CCN": "1", "method_NToken": "69", "method_nesting_level": "2"}}}, "hunk_4": {"Ismethod": 1, "added_lines": "283", "deleted_lines": "276", "method_info": {"method_name": "testModelValidatorOnDataflowRunner", "method_params": "self", "method_startline": "275", "method_endline": "285", "method_complexity": {"method_NLOC": "10", "method_CCN": "1", "method_NToken": "63", "method_nesting_level": "1"}}}, "hunk_5": {"Ismethod": 1, "added_lines": "209,210,211,212,213,214,215,216,217", "deleted_lines": "207,208,209,210", "method_info": {"method_name": "setUp", "method_params": "self", "method_startline": "168", "method_endline": "223", "method_complexity": {"method_NLOC": "43", "method_CCN": "1", "method_NToken": "287", "method_nesting_level": "1"}}}}}}}}