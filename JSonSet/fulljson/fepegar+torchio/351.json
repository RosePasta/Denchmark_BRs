{"BR": {"BR_id": "351", "BR_author": "romainVala", "BRopenT": "2020-11-05T16:41:06Z", "BRcloseT": "2020-11-05T17:02:01Z", "BR_text": {"BRsummary": "composition of Pad and Crop lead to a nifti header change", "BRdescription": "\n \ud83d\udc1bBug\n Not sure if it is a bug, sorry if I miss something: I want to do a padding (before model prediction) and then a crop on the prediction, but I notice a change in the nifti header, which make it as if there was a translation (if I save the output in a nifti file )\n To reproduce\n # Your code here\n import torchio as tio\n sub = tio.datasets.Colin27()\n \n t = tio.Compose([tio.Pad(padding=10), tio.Crop(bounds_parameters=10)])\n new_sub = t(sub)\n \n print(new_sub.t1.affine)\n print(sub.t1.affine)\n # Your errors here\n Expected behavior\n the transformed image should have the save affine no ?\n Actual behavior\n TorchIO version\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "romainVala", "commentT": "2020-11-05T16:54:50Z", "comment_text": "\n \t\tYes. It looks like a bug! I'll take a look.\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "romainVala", "commentT": "2020-11-05T16:59:48Z", "comment_text": "\n \t\tThe problem seems to be in Crop.\n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "romainVala", "commentT": "2020-11-05T17:02:32Z", "comment_text": "\n \t\tFixed in v0.17.53. Thanks for reporting!\n \t\t"}, "comments_3": {"comment_id": 4, "comment_author": "romainVala", "commentT": "2020-11-05T17:03:22Z", "comment_text": "\n \t\tthanks for correcting !\n \t\t"}}}, "commit": {"commit_id": "ba31a188c4aad2db1bd550b06fa00863b15a62c8", "commit_author": "Fernando Perez-Garcia", "commitT": "2020-11-05 17:01:20+00:00", "commit_complexity": {"commit_NLOC": "1.0", "commit_CCN": "1.0", "commit_Nprams": "1.0"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "torchio\\transforms\\preprocessing\\spatial\\crop.py", "file_new_name": "torchio\\transforms\\preprocessing\\spatial\\crop.py", "file_complexity": {"file_NLOC": "38", "file_CCN": "2", "file_NToken": "173"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "39", "deleted_lines": null, "method_info": {"method_name": "apply_transform", "method_params": "self,sample", "method_startline": "27", "method_endline": "40", "method_complexity": {"method_NLOC": "14", "method_CCN": "2", "method_NToken": "135", "method_nesting_level": "1"}}}}}}}}