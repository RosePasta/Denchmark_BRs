{"BR": {"BR_id": "383", "BR_author": "fepegar", "BRopenT": "2020-12-14T21:20:51Z", "BRcloseT": "2020-12-15T10:44:50Z", "BR_text": {"BRsummary": "AttributeError: 'NoneType' object has no attribute 'read' when converting to PIL", "BRdescription": "\n \ud83d\udc1bBug\n To reproduce\n In [1]: import torchio as tio\n \n In [2]: import numpy as np\n \n In [3]: x = 100 * np.random.rand(3, 50, 50, 1)\n \n In [4]: x.as_pil()\n ---------------------------------------------------------------------------\n AttributeError                            Traceback (most recent call last)\n <ipython-input-4-bf55f6468bbb> in <module>\n ----> 1 x.as_pil()\n \n AttributeError: 'numpy.ndarray' object has no attribute 'as_pil'\n \n In [5]: im = tio.ScalarImage(tensor=x)\n \n In [6]: im.as_pil()\n ---------------------------------------------------------------------------\n AttributeError                            Traceback (most recent call last)\n /usr/local/Caskroom/miniconda/base/envs/torchio/lib/python3.8/site-packages/PIL/Image.py in open(fp, mode)\n    2881     try:\n -> 2882         fp.seek(0)\n    2883     except (AttributeError, io.UnsupportedOperation):\n \n AttributeError: 'NoneType' object has no attribute 'seek'\n \n During handling of the above exception, another exception occurred:\n \n AttributeError                            Traceback (most recent call last)\n <ipython-input-6-bc29f2434f0a> in <module>\n ----> 1 im.as_pil()\n \n ~/git/torchio/torchio/data/image.py in as_pil(self)\n     466         \"\"\"Get the image as an instance of :class:`PIL.Image`.\"\"\"\n     467         self.check_is_2d()\n --> 468         return ImagePIL.open(self.path)\n     469\n     470     def get_center(self, lps: bool = False) -> TypeTripletFloat:\n \n /usr/local/Caskroom/miniconda/base/envs/torchio/lib/python3.8/site-packages/PIL/Image.py in open(fp, mode)\n    2882         fp.seek(0)\n    2883     except (AttributeError, io.UnsupportedOperation):\n -> 2884         fp = io.BytesIO(fp.read())\n    2885         exclusive_fp = True\n    2886\n Expected behavior\n Actual behavior\n TorchIO version\n \t"}, "comments": {}}, "commit": {"commit_id": "d4206fb39b2a3b3b14770e37eb359d21b44700a8", "commit_author": "Fernando P\u00e9rez-Garc\u00eda", "commitT": "2020-12-15 10:44:49+00:00", "commit_complexity": {"commit_NLOC": "1.0", "commit_CCN": "1.0", "commit_Nprams": "1.0"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 4, "file_old_name": "tests\\data\\test_image.py", "file_new_name": "tests\\data\\test_image.py", "file_complexity": {"file_NLOC": "139", "file_CCN": "31", "file_NToken": "1427"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "175,176", "deleted_lines": null, "method_info": {"method_name": "test_pil_3", "method_params": "self", "method_startline": "175", "method_endline": "176", "method_complexity": {"method_NLOC": "2", "method_CCN": "1", "method_NToken": "28", "method_nesting_level": "1"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "168,169", "deleted_lines": null, "method_info": {"method_name": "test_pil_1", "method_params": "self", "method_startline": "168", "method_endline": "169", "method_complexity": {"method_NLOC": "2", "method_CCN": "1", "method_NToken": "28", "method_nesting_level": "1"}}}, "hunk_2": {"Ismethod": 1, "added_lines": "164,165,166", "deleted_lines": null, "method_info": {"method_name": "test_pil_3d", "method_params": "self", "method_startline": "164", "method_endline": "166", "method_complexity": {"method_NLOC": "3", "method_CCN": "1", "method_NToken": "36", "method_nesting_level": "1"}}}, "hunk_3": {"Ismethod": 1, "added_lines": "171,172,173", "deleted_lines": null, "method_info": {"method_name": "test_pil_2", "method_params": "self", "method_startline": "171", "method_endline": "173", "method_complexity": {"method_NLOC": "3", "method_CCN": "1", "method_NToken": "36", "method_nesting_level": "1"}}}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "torchio\\data\\image.py", "file_new_name": "torchio\\data\\image.py", "file_complexity": {"file_NLOC": "486", "file_CCN": "76", "file_NToken": "2292"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "455,456,457,458,460,461,462,463,464,465,466,467", "deleted_lines": "455,457", "method_info": {"method_name": "as_pil", "method_params": "self", "method_startline": "454", "method_endline": "467", "method_complexity": {"method_NLOC": "14", "method_CCN": "3", "method_NToken": "96", "method_nesting_level": "1"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "338", "deleted_lines": "338", "method_info": {"method_name": "_parse_path", "method_params": "self,TypePath", "method_startline": "335", "method_endline": "338", "method_complexity": {"method_NLOC": "4", "method_CCN": "1", "method_NToken": "30", "method_nesting_level": "1"}}}}}}}}