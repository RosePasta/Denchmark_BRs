{"BR": {"BR_id": "2173", "BR_author": "gvskalyan", "BRopenT": "2020-05-22T13:27:41Z", "BRcloseT": "2020-05-26T22:46:43Z", "BR_text": {"BRsummary": "Generating Alignments take longer time than prediction on a GPU", "BRdescription": "\n <denchmark-h:h2>\ud83d\udc1b Bug</denchmark-h>\n \n --print-alignment takes too much time on GPU probably due to extract_hard_alignment in utils\n <denchmark-h:h3>To Reproduce</denchmark-h>\n \n \n Run command in here.\n Same command with --print-alignment takes around 3X the time.\n \n <denchmark-h:h3>Expected behavior</denchmark-h>\n \n \n On CPU it takes only 70 ms to generate alignments for a batch size 32, beam size 5 and an average sequence size of 5.\n On GPU it is supposed to take around the same time, but is around 250 ms for the same sequences.\n \n <denchmark-h:h3>Environment</denchmark-h>\n \n \n fairseq Version - 0.9.0 / master(e.g., 1.0 or master):\n PyTorch Version - 1.5.0\n OS (e.g., Linux): Linux\n How you installed fairseq (pip, source): pip\n Build command you used (if compiling from source): pip install --editable\n Python version: 3.7.5\n CUDA/cuDNN version: 10.2\n GPU models and configuration: fconv pre-trained\n \n \t"}, "comments": {}}, "commit": {"commit_id": "eb509f0c584ebae01834e773fb83584102a4f4da", "commit_author": "Guntupalli Venkata Sai Kalyan", "commitT": "2020-05-26 15:46:33-07:00", "commit_complexity": {"commit_NLOC": "0.0", "commit_CCN": "0.0", "commit_Nprams": "0.0"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "fairseq\\sequence_generator.py", "file_new_name": "fairseq\\sequence_generator.py", "file_complexity": {"file_NLOC": "662", "file_CCN": "78", "file_NToken": "5131"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "836,837,838,839,840", "deleted_lines": null, "method_info": {"method_name": "generate", "method_params": "self,models,sample,kwargs", "method_startline": "818", "method_endline": "847", "method_complexity": {"method_NLOC": "26", "method_CCN": "7", "method_NToken": "206", "method_nesting_level": "1"}}}}}}}}