{"BR": {"BR_id": "1315", "BR_author": "twelveth", "BRopenT": "2019-10-28T15:13:53Z", "BRcloseT": "2019-12-19T20:58:56Z", "BR_text": {"BRsummary": "FairseqMultimodel doesn't have forward_decoder", "BRdescription": "\n When I try to inference model, inheriting from FairseqMultimodel (I've created custom MultilingualLSTMModel with MultilingualTransformerModel as example) with either fairseq-generate or fairseq-interactive, it crashes, saying\n <denchmark-code>AttributeError: 'MultilingualLSTMModel' object has no attribute 'forward_decoder'\n </denchmark-code>\n \n There is no such method both in FairseqMultiModel and BaseFairseqModel (which is parent of FairseqMultiModel).\n I suppose, the same issue will be with multilingual transformer, because both it and my class inherit from FairseqMultiModel.\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "twelveth", "commentT": "2019-10-30T07:15:39Z", "comment_text": "\n \t\t+1\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "twelveth", "commentT": "2019-12-19T20:58:56Z", "comment_text": "\n \t\tResolved by <denchmark-link:https://github.com/pytorch/fairseq/commit/4c5934ac61354d9b6d164f7317905e4ac2ae1064>4c5934a</denchmark-link>\n \n \t\t"}}}, "commit": {"commit_id": "4c5934ac61354d9b6d164f7317905e4ac2ae1064", "commit_author": "Peng-Jen Chen", "commitT": "2019-12-19 07:08:59-08:00", "commit_complexity": {"commit_NLOC": "0.25806451612903225", "commit_CCN": "0.5161290322580645", "commit_Nprams": "1.0"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "fairseq\\data\\transform_eos_lang_pair_dataset.py", "file_new_name": "fairseq\\data\\transform_eos_lang_pair_dataset.py", "file_complexity": {"file_NLOC": "68", "file_CCN": "14", "file_NToken": "429"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71", "deleted_lines": "50,52,53,54,55,56,57", "method_info": {"method_name": "collater", "method_params": "self,samples", "method_startline": "48", "method_endline": "73", "method_complexity": {"method_NLOC": "22", "method_CCN": "6", "method_NToken": "232", "method_nesting_level": "1"}}}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "fairseq\\models\\fairseq_model.py", "file_new_name": "fairseq\\models\\fairseq_model.py", "file_complexity": {"file_NLOC": "247", "file_CCN": "71", "file_NToken": "1679"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "343,344", "deleted_lines": null, "method_info": {"method_name": "forward_decoder", "method_params": "self,prev_output_tokens,kwargs", "method_startline": "343", "method_endline": "344", "method_complexity": {"method_NLOC": "2", "method_CCN": "1", "method_NToken": "20", "method_nesting_level": "1"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "346,347,348,349,350,351,352,353,354,355", "deleted_lines": null, "method_info": {"method_name": "load_state_dict", "method_params": "self,state_dict,strict,args", "method_startline": "346", "method_endline": "355", "method_complexity": {"method_NLOC": "4", "method_CCN": "1", "method_NToken": "41", "method_nesting_level": "1"}}}}}, "file_2": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "fairseq\\models\\multilingual_transformer.py", "file_new_name": "fairseq\\models\\multilingual_transformer.py", "file_complexity": {"file_NLOC": "161", "file_CCN": "33", "file_NToken": "991"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "167,174", "deleted_lines": "167,174", "method_info": {"method_name": "load_state_dict", "method_params": "self,state_dict,strict", "method_startline": "167", "method_endline": "174", "method_complexity": {"method_NLOC": "8", "method_CCN": "3", "method_NToken": "72", "method_nesting_level": "1"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "167,174", "deleted_lines": "167,174", "method_info": {"method_name": "load_state_dict", "method_params": "self,state_dict,strict,args", "method_startline": "167", "method_endline": "174", "method_complexity": {"method_NLOC": "8", "method_CCN": "3", "method_NToken": "80", "method_nesting_level": "1"}}}}}, "file_3": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "fairseq\\tasks\\multilingual_translation.py", "file_new_name": "fairseq\\tasks\\multilingual_translation.py", "file_complexity": {"file_NLOC": "295", "file_CCN": "72", "file_NToken": "2230"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "125,126", "deleted_lines": "125", "method_info": {"method_name": "prepare", "method_params": "cls,args,kargs", "method_startline": "119", "method_endline": "147", "method_complexity": {"method_NLOC": "26", "method_CCN": "12", "method_NToken": "295", "method_nesting_level": "1"}}}}}, "file_4": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "fairseq\\utils.py", "file_new_name": "fairseq\\utils.py", "file_complexity": {"file_NLOC": "300", "file_CCN": "114", "file_NToken": "2259"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256", "deleted_lines": "240,241,242,243,244,245", "method_info": {"method_name": "_match_types", "method_params": "arg1,arg2", "method_startline": "239", "method_endline": "257", "method_complexity": {"method_NLOC": "7", "method_CCN": "5", "method_NToken": "66", "method_nesting_level": "0"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "241,242,243,244,245,246,247,248,249,250", "deleted_lines": "241,242,243,244,245", "method_info": {"method_name": "_match_types.upgrade", "method_params": "arg_number,arg_structure", "method_startline": "241", "method_endline": "250", "method_complexity": {"method_NLOC": "10", "method_CCN": "4", "method_NToken": "62", "method_nesting_level": "1"}}}}}, "file_5": {"file_change_type": "MODIFY", "file_Nmethod": 4, "file_old_name": "tests\\test_binaries.py", "file_new_name": "tests\\test_binaries.py", "file_complexity": {"file_NLOC": "712", "file_CCN": "57", "file_NToken": "3733"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "680,681", "deleted_lines": null, "method_info": {"method_name": "train_translation_model", "method_params": "data_dir,arch,extra_flags,task,run_validation,lang_flags,extra_valid_flags", "method_startline": "680", "method_endline": "681", "method_complexity": {"method_NLOC": "2", "method_CCN": "1", "method_NToken": "27", "method_nesting_level": "0"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193", "deleted_lines": null, "method_info": {"method_name": "test_multilingual_transformer", "method_params": "self", "method_startline": "159", "method_endline": "193", "method_complexity": {"method_NLOC": "34", "method_CCN": "3", "method_NToken": "182", "method_nesting_level": "1"}}}, "hunk_2": {"Ismethod": 1, "added_lines": "680", "deleted_lines": "645,659,660,662,678", "method_info": {"method_name": "train_translation_model", "method_params": "data_dir,arch,extra_flags,task,run_validation", "method_startline": "645", "method_endline": "680", "method_complexity": {"method_NLOC": "34", "method_CCN": "3", "method_NToken": "151", "method_nesting_level": "0"}}}, "hunk_3": {"Ismethod": 1, "added_lines": null, "deleted_lines": "590", "method_info": {"method_name": "create_dummy_data", "method_params": "data_dir,num_examples,maxlen,alignment", "method_startline": "589", "method_endline": "626", "method_complexity": {"method_NLOC": "13", "method_CCN": "2", "method_NToken": "72", "method_nesting_level": "0"}}}}}}}}