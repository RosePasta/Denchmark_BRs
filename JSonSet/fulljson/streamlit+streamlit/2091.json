{"BR": {"BR_id": "2091", "BR_author": "domoritz", "BRopenT": "2020-10-06T01:36:37Z", "BRcloseT": "2020-10-23T20:46:34Z", "BR_text": {"BRsummary": "Default bar chart should use ordinal scale for categorial data", "BRdescription": "\n <denchmark-h:h1>Summary</denchmark-h>\n \n The default bar chart should use an ordinal scale so that the style is correct.\n <denchmark-h:h1>Steps to reproduce</denchmark-h>\n \n import streamlit as st\n import pandas as pd\n import numpy as np\n \n st.title('Uber pickups in NYC')\n \n DATE_COLUMN = 'date/time'\n DATA_URL = ('https://s3-us-west-2.amazonaws.com/'\n             'streamlit-demo-data/uber-raw-data-sep14.csv.gz')\n \n @st.cache\n def load_data(nrows):\n     data = pd.read_csv(DATA_URL, nrows=nrows)\n     lowercase = lambda x: str(x).lower()\n     data.rename(lowercase, axis='columns', inplace=True)\n     data[DATE_COLUMN] = pd.to_datetime(data[DATE_COLUMN])\n     return data\n \n data_load_state = st.text('Loading data...')\n data = load_data(10000)\n data_load_state.text(\"Done! (using st.cache)\")\n \n if st.checkbox('Show raw data'):\n     st.subheader('Raw data')\n     st.write(data)\n \n st.subheader('Number of pickups by hour')\n hist_values = np.histogram(data[DATE_COLUMN].dt.hour, bins=24, range=(0,24))[0]\n st.bar_chart(hist_values)\n <denchmark-h:h2>Expected behavior:</denchmark-h>\n \n <denchmark-link:https://user-images.githubusercontent.com/589034/95149008-abb18400-0739-11eb-9e34-588dab443af8.png></denchmark-link>\n \n <denchmark-h:h2>Actual behavior:</denchmark-h>\n \n <denchmark-link:https://user-images.githubusercontent.com/589034/95149011-aeac7480-0739-11eb-9436-7d37d7f398a5.png></denchmark-link>\n \n <denchmark-h:h1>Debug info</denchmark-h>\n \n \n Streamlit version: 0.65.2\n \n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "domoritz", "commentT": "2020-10-06T06:11:04Z", "comment_text": "\n \t\tAgree that the lines on the bar chart look too thin, and ordinal scale sounds like a good fix.\n \t\t"}}}, "commit": {"commit_id": "246ea34f7aab319be7160f4b1b7cc41d76345448", "commit_author": "Austin Chen", "commitT": "2020-10-23 13:46:33-07:00", "commit_complexity": {"commit_NLOC": "0.0", "commit_CCN": "0.0", "commit_Nprams": "0.0"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "docs\\api-examples-source\\layout.expander.py", "file_new_name": "docs\\api-examples-source\\layout.expander.py", "file_complexity": {"file_NLOC": "12", "file_CCN": "0", "file_NToken": "56"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "3", "deleted_lines": "3"}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "lib\\streamlit\\delta_generator.py", "file_new_name": "lib\\streamlit\\delta_generator.py", "file_complexity": {"file_NLOC": "554", "file_CCN": "66", "file_NToken": "2085"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "617", "deleted_lines": "617", "method_info": {"method_name": "beta_expander", "method_params": "self,label,expanded", "method_startline": "582", "method_endline": "632", "method_complexity": {"method_NLOC": "48", "method_CCN": "2", "method_NToken": "74", "method_nesting_level": "1"}}}}}, "file_2": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "lib\\streamlit\\elements\\altair.py", "file_new_name": "lib\\streamlit\\elements\\altair.py", "file_complexity": {"file_NLOC": "90", "file_CCN": "17", "file_NToken": "690"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "272,273,274,275,276,277,281", "deleted_lines": "273", "method_info": {"method_name": "generate_chart", "method_params": "chart_type,data,width,height", "method_startline": "242", "method_endline": "289", "method_complexity": {"method_NLOC": "32", "method_CCN": "9", "method_NToken": "273", "method_nesting_level": "0"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "161", "deleted_lines": "159", "method_info": {"method_name": "bar_chart", "method_params": "dg,data,width,height,use_container_width", "method_startline": "126", "method_endline": "171", "method_complexity": {"method_NLOC": "6", "method_CCN": "1", "method_NToken": "66", "method_nesting_level": "1"}}}}}}}}