{"BR": {"BR_id": "2147", "BR_author": "treuille", "BRopenT": "2020-10-10T15:43:29Z", "BRcloseT": "2020-11-12T22:07:52Z", "BR_text": {"BRsummary": "Clicking on a text field in the sidebar (on mobile) causes the sidebar to close.", "BRdescription": "\n <denchmark-h:h1>Summary</denchmark-h>\n \n When the window is too narrow, clicking on a text input in the sidebar causes the sidebar to disappear, making it impossible to type in text. [<denchmark-link:https://drive.google.com/file/d/1KetCBECPsg3UAiESZCRdm6W9M_zIrNkc/view?usp=sharing>video example</denchmark-link>\n ]\n <denchmark-h:h1>Steps to reproduce</denchmark-h>\n \n \n Put a text input in the sidebar.\n Make the Streamlit app window narrow.\n Click the text input in the sidebar.\n \n <denchmark-h:h2>Expected behavior:</denchmark-h>\n \n Ideally, the sidebar would stay open and the text input box would have focus and you coudl type something in.\n In fact, this  happen when the window is a bit wider. [<denchmark-link:https://drive.google.com/file/d/1fObxQWIjkL_5VBJY_niltG489Ki8tRB8/view?usp=sharing>video example</denchmark-link>\n ]\n <denchmark-h:h2>Actual behavior:</denchmark-h>\n \n Clicking on a text input in the sidebar causes the sidebar to disappear, making it impossible to type in text. [<denchmark-link:https://drive.google.com/file/d/1KetCBECPsg3UAiESZCRdm6W9M_zIrNkc/view?usp=sharing>video example</denchmark-link>\n ]\n <denchmark-h:h2>Is this a regression?</denchmark-h>\n \n Unkown\n <denchmark-h:h1>Debug info</denchmark-h>\n \n \n Streamlit version: Streamlit, version 0.68.0\n Python version: Python 3.8.5\n Using Conda? PipEnv? PyEnv? Pex? pipenv, version 2020.8.13\n OS version:\n \n <denchmark-code>Distributor ID: Ubuntu\n Description:    Ubuntu 20.04.1 LTS\n Release:        20.04\n Codename:       focal\n </denchmark-code>\n \n \n Browser version: Safari on iPadOS 14\n \n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "treuille", "commentT": "2020-11-06T21:31:48Z", "comment_text": "\n \t\tNaomi Most commented: Requested by [~accountid:5f571ad5c9c528007ca18054]\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "treuille", "commentT": "2020-11-12T06:10:25Z", "comment_text": "\n \t\tDev notes:\n Hm, unable to repro on Chrome/Windows with a simple example <denchmark-link:https://share.streamlit.io/akrolsmir/streamlit-snippet/main?snippet_id=8zu2vvp2>https://share.streamlit.io/akrolsmir/streamlit-snippet/main?snippet_id=8zu2vvp2</denchmark-link>\n \n <denchmark-code>import streamlit as st\n \n input = st.sidebar.text_input('Write some stuff')\n st.write(input)\n </denchmark-code>\n \n Also did not repro on Safari/Macbook.\n But it repros on Chrome/Android. So it's probably a mobile slash touch-related issue.\n The app is not re-running, just popping. Is it related to touch event vs click event? TextInput is a BaseWeb component, so look there.\n TextInput.tsx: onBlur, onKeyPress, onChange are not firing when this thing disappears.\n Sidebar.tsx: toggleCollapse is not firing (?!)... AHA! It's checkmobileOnResize().\n So why does tapping on Sidebar trigger a resize event? Oh, probably cuz the keyboard pops up all of a sudden\n Ideas:\n \n Do nothing\n Remove checkMobileOnResize entirely\n Only collapse if the innerWidth got smaller? This has the advantage of doing the right thing when a user is making the window wider/taller/shorter. But requires another parameter to track. (Also in the video cast it didn't really look like Adrien's innerwidth was changing?)\n Only collapse if innerWidth just equalled the threshold? Could be bad if checkMobileOnResize is used for other things. Also, this doesn't work, since resize sometimes skips over the threshold (not every pixel size fires)\n \n Let's do 2.\n \t\t"}}}, "commit": {"commit_id": "a27d4c7fc8dfef32ba40f51c1a57f6f87b0ef800", "commit_author": "Austin Chen", "commitT": "2020-11-12 14:07:51-08:00", "commit_complexity": {"commit_NLOC": "1.0", "commit_CCN": "1.0", "commit_Nprams": "1.0"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "e2e\\scripts\\st_sidebar.py", "file_new_name": "e2e\\scripts\\st_sidebar.py", "file_complexity": {"file_NLOC": "10", "file_CCN": "0", "file_NToken": "96"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "27,28", "deleted_lines": null}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "e2e\\specs\\st_sidebar.spec.js", "file_new_name": "e2e\\specs\\st_sidebar.spec.js", "file_complexity": {"file_NLOC": "47", "file_CCN": "6", "file_NToken": "248"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75", "deleted_lines": null, "method_info": {"method_name": "(anonymous)", "method_params": "", "method_startline": "18", "method_endline": "76", "method_complexity": {"method_NLOC": "7", "method_CCN": "1", "method_NToken": "50", "method_nesting_level": "0"}}}}}, "file_2": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "frontend\\src\\components\\core\\Sidebar\\Sidebar.tsx", "file_new_name": "frontend\\src\\components\\core\\Sidebar\\Sidebar.tsx", "file_complexity": {"file_NLOC": "None", "file_CCN": "None", "file_NToken": "None"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "40,64,131,132,133,134,135,137,138", "deleted_lines": "129"}}}}}}