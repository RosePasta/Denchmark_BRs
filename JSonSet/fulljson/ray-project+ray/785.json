{"BR": {"BR_id": "785", "BR_author": "robertnishihara", "BRopenT": "2017-07-31T22:56:19Z", "BRcloseT": "2017-08-01T00:56:12Z", "BR_text": {"BRsummary": "Test failure in Jenkins \"Exception: Expected 10 Redis shard addresses, found 7\".", "BRdescription": "\n The following error occurred in Jenkins in this log <denchmark-link:https://amplab.cs.berkeley.edu/jenkins/job/Ray-PRB/1453/console>https://amplab.cs.berkeley.edu/jenkins/job/Ray-PRB/1453/console</denchmark-link>\n .\n <denchmark-code>+ python /home/jenkins/workspace/Ray-PRB/test/jenkins_tests/multi_node_docker_test.py --docker-image=60125e3f54e6f8f0623b956c8cb04ddc6402819ed22ef5908c5b9ba8db38b46d --num-nodes=5 --num-redis-shards=10 --test-script=/ray/test/jenkins_tests/multi_node_tests/test_0.py\n Starting head node with command:['docker', 'run', '-d', '--shm-size=1G', '60125e3f54e6f8f0623b956c8cb04ddc6402819ed22ef5908c5b9ba8db38b46d', 'ray', 'start', '--head', '--block', '--redis-port=6379', '--num-redis-shards=10', '--num-cpus=10', '--num-gpus=0']\n Starting worker node with command:['docker', 'run', '-d', '--shm-size=1G', '--shm-size=1G', '60125e3f54e6f8f0623b956c8cb04ddc6402819ed22ef5908c5b9ba8db38b46d', 'ray', 'start', '--block', '--redis-address=172.17.0.12:6379', '--num-cpus=10', '--num-gpus=0']\n Starting worker node with command:['docker', 'run', '-d', '--shm-size=1G', '--shm-size=1G', '60125e3f54e6f8f0623b956c8cb04ddc6402819ed22ef5908c5b9ba8db38b46d', 'ray', 'start', '--block', '--redis-address=172.17.0.12:6379', '--num-cpus=10', '--num-gpus=0']\n Starting worker node with command:['docker', 'run', '-d', '--shm-size=1G', '--shm-size=1G', '60125e3f54e6f8f0623b956c8cb04ddc6402819ed22ef5908c5b9ba8db38b46d', 'ray', 'start', '--block', '--redis-address=172.17.0.12:6379', '--num-cpus=10', '--num-gpus=0']\n Starting worker node with command:['docker', 'run', '-d', '--shm-size=1G', '--shm-size=1G', '60125e3f54e6f8f0623b956c8cb04ddc6402819ed22ef5908c5b9ba8db38b46d', 'ray', 'start', '--block', '--redis-address=172.17.0.12:6379', '--num-cpus=10', '--num-gpus=0']\n Starting driver with command /ray/test/jenkins_tests/multi_node_tests/test_0.py.\n STDOUT:\n Driver 0 started at 1501449715.55.\n \n STDERR:\n Traceback (most recent call last):\n   File \"/ray/test/jenkins_tests/multi_node_tests/test_0.py\", line 22, in <module>\n     ray.init(redis_address=redis_address)\n   File \"/opt/conda/lib/python2.7/site-packages/ray-0.1.2-py2.7-linux-x86_64.egg/ray/worker.py\", line 1011, in init\n     num_gpus=num_gpus, num_redis_shards=num_redis_shards)\n   File \"/opt/conda/lib/python2.7/site-packages/ray-0.1.2-py2.7-linux-x86_64.egg/ray/worker.py\", line 962, in _init\n     mode=driver_mode, worker=global_worker, actor_id=NIL_ACTOR_ID)\n   File \"/opt/conda/lib/python2.7/site-packages/ray-0.1.2-py2.7-linux-x86_64.egg/ray/worker.py\", line 1338, in connect\n     global_state._initialize_global_state(redis_ip_address, int(redis_port))\n   File \"/opt/conda/lib/python2.7/site-packages/ray-0.1.2-py2.7-linux-x86_64.egg/ray/experimental/state.py\", line 96, in _initialize_global_state\n     len(ip_address_ports)))\n Exception: Expected 10 Redis shard addresses, found 7\n \n stop_node {'container_id': u'fea4409391126e14fca2459ce705051d644ec15163d5143708fc7820a2b7ba2a', 'is_head': True}\n stop_node {'container_id': u'd9942971920d496cd39b65b4b9f95525a4479d455036ec2460fdbe8fe4b51c6e', 'is_head': False}\n Traceback (most recent call last):\n   File \"/home/jenkins/workspace/Ray-PRB/test/jenkins_tests/multi_node_docker_test.py\", line 323, in <module>\n     d.stop_ray()\n   File \"/home/jenkins/workspace/Ray-PRB/test/jenkins_tests/multi_node_docker_test.py\", line 224, in stop_ray\n     self._stop_node(container_id)\n   File \"/home/jenkins/workspace/Ray-PRB/test/jenkins_tests/multi_node_docker_test.py\", line 207, in _stop_node\n     .format(container_id))\n Exception: Failed to stop container 27327225b793cc721628b2fa4cf66b3c0a49eb5f0732273b66fa7ee505689655.\n Build step 'Execute shell' marked build as failure\n Test FAILed.\n Refer to this link for build results (access rights to CI server needed): \n https://amplab.cs.berkeley.edu/jenkins//job/Ray-PRB/1453/\n Test FAILed.\n Finished: FAILURE\n </denchmark-code>\n \n \t"}, "comments": {}}, "commit": {"commit_id": "c394a65ffcfabeac103c95cf5ee551b6419f98f8", "commit_author": "Robert Nishihara", "commitT": "2017-07-31 17:56:11-07:00", "commit_complexity": {"commit_NLOC": "1.0", "commit_CCN": "0.0", "commit_Nprams": "1.0"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 4, "file_old_name": "python\\ray\\experimental\\state.py", "file_new_name": "python\\ray\\experimental\\state.py", "file_complexity": {"file_NLOC": "468", "file_CCN": "103", "file_NToken": "3220"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "73,74,75", "deleted_lines": "72", "method_info": {"method_name": "_check_connected", "method_params": "self", "method_startline": "62", "method_endline": "75", "method_complexity": {"method_NLOC": "7", "method_CCN": "3", "method_NToken": "32", "method_nesting_level": "1"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "73,74,75,76,77,78,81,82,83,84,89,90,95,96,97,98,99,100,101", "deleted_lines": "72,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96", "method_info": {"method_name": "_initialize_global_state", "method_params": "self,redis_ip_address,redis_port", "method_startline": "72", "method_endline": "101", "method_complexity": {"method_NLOC": "21", "method_CCN": "5", "method_NToken": "154", "method_nesting_level": "1"}}}, "hunk_2": {"Ismethod": 1, "added_lines": "60", "deleted_lines": null, "method_info": {"method_name": "__init__", "method_params": "self", "method_startline": "57", "method_endline": "60", "method_complexity": {"method_NLOC": "3", "method_CCN": "1", "method_NToken": "16", "method_nesting_level": "1"}}}, "hunk_3": {"Ismethod": 1, "added_lines": "77,78", "deleted_lines": null, "method_info": {"method_name": "_initialize_global_state", "method_params": "self,redis_ip_address,redis_port,timeout", "method_startline": "77", "method_endline": "78", "method_complexity": {"method_NLOC": "2", "method_CCN": "1", "method_NToken": "13", "method_nesting_level": "1"}}}}}}}}