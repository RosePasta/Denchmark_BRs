{"BR": {"BR_id": "847", "BR_author": "robertnishihara", "BRopenT": "2017-08-19T02:05:43Z", "BRcloseT": "2017-08-22T19:25:53Z", "BR_text": {"BRsummary": "EvolutionStrategies algorithm doesn't run on Pong-v0.", "BRdescription": "\n This occurs on both Ubuntu 16 and MacOS (I tried Anaconda Python 3).\n EvolutionStrategies can be run on Pong with the following command.\n <denchmark-code>python ray/python/ray/rllib/train.py --alg=EvolutionStrategies --env=Pong-v0\n </denchmark-code>\n \n This fails very quickly with the following error.\n <denchmark-code>Traceback (most recent call last):\n   File \"/home/ubuntu/anaconda3/lib/python3.6/site-packages/tensorflow/python/framework/common_shapes.py\", line 671, in _call_cpp_shape_fn_impl\n     input_tensors_as_shapes, status)\n   File \"/home/ubuntu/anaconda3/lib/python3.6/contextlib.py\", line 89, in __exit__\n     next(self.gen)\n   File \"/home/ubuntu/anaconda3/lib/python3.6/site-packages/tensorflow/python/framework/errors_impl.py\", line 466, in raise_exception_on_not_ok_status\n     pywrap_tensorflow.TF_GetCode(status))\n tensorflow.python.framework.errors_impl.InvalidArgumentError: Can not squeeze dim[1], expected a dimension of 1, got 18 for 'GenericPolicy/vision_net/Squeeze' (op: 'Squeeze') with input shapes: [?,18,11,6].\n </denchmark-code>\n \n The error can be reproduced more easily as follows.\n import gym\n from ray.rllib.models import ModelCatalog\n import tensorflow as tf\n \n env = gym.make(\"Pong-v0\")\n \n inputs = tf.placeholder(tf.float32, [None] + list(env.observation_space.shape))\n \n ModelCatalog.get_model(inputs, env.action_space.n)\n cc <denchmark-link:https://github.com/ericl>@ericl</denchmark-link>\n \n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "robertnishihara", "commentT": "2017-08-19T21:35:08Z", "comment_text": "\n \t\tWill take a look\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "robertnishihara", "commentT": "2017-08-20T02:06:57Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/ray-project/ray/pull/848>#848</denchmark-link>\n  should fix this\n \t\t"}}}, "commit": {"commit_id": "c81821b8562daecc9796d205c25d4ceeb72d1a31", "commit_author": "Eric Liang", "commitT": "2017-08-21 18:51:49-07:00", "commit_complexity": {"commit_NLOC": "1.0", "commit_CCN": "1.0", "commit_Nprams": "1.0"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": ".gitignore", "file_new_name": ".gitignore", "file_complexity": {"file_NLOC": "None", "file_CCN": "None", "file_NToken": "None"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "3,8", "deleted_lines": null}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 3, "file_old_name": "python\\ray\\rllib\\evolution_strategies\\evolution_strategies.py", "file_new_name": "python\\ray\\rllib\\evolution_strategies\\evolution_strategies.py", "file_complexity": {"file_NLOC": "253", "file_CCN": "39", "file_NToken": "2104"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "170,171,172,173,176,177,180", "deleted_lines": "166,169", "method_info": {"method_name": "__init__", "method_params": "self,env_name,config,upload_dir", "method_startline": "160", "method_endline": "196", "method_complexity": {"method_NLOC": "28", "method_CCN": "2", "method_NToken": "221", "method_nesting_level": "1"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "119", "deleted_lines": "112,113", "method_info": {"method_name": "do_rollouts", "method_params": "self,params,ob_mean,ob_std,timestep_limit", "method_startline": "107", "method_endline": "156", "method_complexity": {"method_NLOC": "37", "method_CCN": "7", "method_NToken": "367", "method_nesting_level": "1"}}}, "hunk_2": {"Ismethod": 1, "added_lines": "97,98,103,104", "deleted_lines": "92,97", "method_info": {"method_name": "rollout_and_update_ob_stat", "method_params": "self,timestep_limit,task_ob_stat", "method_startline": "92", "method_endline": "105", "method_complexity": {"method_NLOC": "14", "method_CCN": "4", "method_NToken": "142", "method_nesting_level": "1"}}}}}, "file_2": {"file_change_type": "MODIFY", "file_Nmethod": 4, "file_old_name": "python\\ray\\rllib\\evolution_strategies\\policies.py", "file_new_name": "python\\ray\\rllib\\evolution_strategies\\policies.py", "file_complexity": {"file_NLOC": "149", "file_CCN": "27", "file_NToken": "1269"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "87,88", "deleted_lines": "87,88", "method_info": {"method_name": "rollout", "method_params": "self,env,preprocessor,render,timestep_limit,save_obs,random_stream", "method_startline": "87", "method_endline": "88", "method_complexity": {"method_NLOC": "2", "method_CCN": "1", "method_NToken": "25", "method_nesting_level": "1"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "146,149,154,157,159,160,166,167", "deleted_lines": "150,153,155,156,162", "method_info": {"method_name": "_initialize", "method_params": "self,ob_space,ac_space,preprocessor,ac_noise_std", "method_startline": "146", "method_endline": "179", "method_complexity": {"method_NLOC": "27", "method_CCN": "1", "method_NToken": "274", "method_nesting_level": "1"}}}, "hunk_2": {"Ismethod": 1, "added_lines": "87,88", "deleted_lines": "87,88", "method_info": {"method_name": "rollout", "method_params": "self,env,render,timestep_limit,save_obs,random_stream", "method_startline": "87", "method_endline": "88", "method_complexity": {"method_NLOC": "2", "method_CCN": "1", "method_NToken": "23", "method_nesting_level": "1"}}}, "hunk_3": {"Ismethod": 1, "added_lines": "146,149,154,157,159,160,166,167", "deleted_lines": "143,150,153,155,156,162", "method_info": {"method_name": "_initialize", "method_params": "self,ob_space,ac_space,ac_noise_std", "method_startline": "143", "method_endline": "174", "method_complexity": {"method_NLOC": "25", "method_CCN": "1", "method_NToken": "260", "method_nesting_level": "1"}}}}}, "file_3": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "python\\ray\\rllib\\models\\catalog.py", "file_new_name": "python\\ray\\rllib\\models\\catalog.py", "file_complexity": {"file_NLOC": "58", "file_CCN": "18", "file_NToken": "327"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "88,89,90,91,92,93,94,95,96,97,98,99,100,101", "deleted_lines": "86", "method_info": {"method_name": "get_preprocessor", "method_params": "env_name", "method_startline": "78", "method_endline": "101", "method_complexity": {"method_NLOC": "15", "method_CCN": "9", "method_NToken": "74", "method_nesting_level": "1"}}}}}, "file_4": {"file_change_type": "DELETE", "file_Nmethod": 0, "file_old_name": "python\\ray\\rllib\\models\\preprocessor.py", "file_new_name": "None", "file_complexity": {"file_NLOC": "None", "file_CCN": "None", "file_NToken": "None"}}, "file_5": {"file_change_type": "ADD", "file_Nmethod": 0, "file_old_name": "None", "file_new_name": "python\\ray\\rllib\\models\\preprocessors.py", "file_complexity": {"file_NLOC": "24", "file_CCN": "8", "file_NToken": "157"}}, "file_6": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "python\\ray\\rllib\\policy_gradient\\agent.py", "file_new_name": "python\\ray\\rllib\\policy_gradient\\agent.py", "file_complexity": {"file_NLOC": "151", "file_CCN": "11", "file_NToken": "1164"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "63,64,65,67,125,126", "deleted_lines": "49,50,66,124"}}}, "file_7": {"file_change_type": "MODIFY", "file_Nmethod": 4, "file_old_name": "python\\ray\\rllib\\policy_gradient\\env.py", "file_new_name": "python\\ray\\rllib\\policy_gradient\\env.py", "file_complexity": {"file_NLOC": "36", "file_CCN": "10", "file_NToken": "313"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": null, "deleted_lines": "10,11", "method_info": {"method_name": "__init__", "method_params": "self", "method_startline": "10", "method_endline": "11", "method_complexity": {"method_NLOC": "2", "method_CCN": "1", "method_NToken": "16", "method_nesting_level": "1"}}}, "hunk_1": {"Ismethod": 1, "added_lines": null, "deleted_lines": "13,14,15", "method_info": {"method_name": "__call__", "method_params": "self,observation", "method_startline": "13", "method_endline": "15", "method_complexity": {"method_NLOC": "3", "method_CCN": "1", "method_NToken": "32", "method_nesting_level": "1"}}}, "hunk_2": {"Ismethod": 1, "added_lines": "37", "deleted_lines": "26,27,28,29,30,31,32,33", "method_info": {"method_name": "step", "method_params": "self,actions,render", "method_startline": "26", "method_endline": "41", "method_complexity": {"method_NLOC": "16", "method_CCN": "4", "method_NToken": "147", "method_nesting_level": "1"}}}, "hunk_3": {"Ismethod": 1, "added_lines": "20,21", "deleted_lines": "19,20,21,22,23,24", "method_info": {"method_name": "reset", "method_params": "self", "method_startline": "19", "method_endline": "24", "method_complexity": {"method_NLOC": "6", "method_CCN": "3", "method_NToken": "60", "method_nesting_level": "1"}}}}}, "file_8": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "python\\ray\\rllib\\policy_gradient\\policy_gradient.py", "file_new_name": "python\\ray\\rllib\\policy_gradient\\policy_gradient.py", "file_complexity": {"file_NLOC": "187", "file_CCN": "19", "file_NToken": "1280"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "77", "deleted_lines": "78,79,80,81,82,83,84,85,86,87,88,89", "method_info": {"method_name": "__init__", "method_params": "self,env_name,config,upload_dir", "method_startline": "72", "method_endline": "89", "method_complexity": {"method_NLOC": "16", "method_CCN": "2", "method_NToken": "142", "method_nesting_level": "1"}}}}}, "file_9": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "python\\ray\\rllib\\train.py", "file_new_name": "python\\ray\\rllib\\train.py", "file_complexity": {"file_NLOC": "63", "file_CCN": "0", "file_NToken": "452"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "63,64", "deleted_lines": "63,64"}}}}}}