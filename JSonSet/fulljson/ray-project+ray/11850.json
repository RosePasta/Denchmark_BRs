{"BR": {"BR_id": "11850", "BR_author": "aaronhmiller", "BRopenT": "2020-11-06T06:31:26Z", "BRcloseT": "2020-11-06T16:57:15Z", "BR_text": {"BRsummary": "[launching cluster] `ray up` on Kubernetes failing", "BRdescription": "\n <denchmark-h:h3>What is the problem?</denchmark-h>\n \n Following the documentation: <denchmark-link:https://docs.ray.io/en/latest/cluster/launcher.html>https://docs.ray.io/en/latest/cluster/launcher.html</denchmark-link>\n \n When running ray up example-full.yaml receive an error:\n jsonschema.exceptions.ValidationError: Additional properties are not allowed ('rsync_filter', 'rsync_exclude' were unexpected)\n Ray version and other system information (Python version, TensorFlow version, OS):\n ray --version: ray, version 1.0.0\n python --version: Python 3.7.3\n OS version: MacOS X 10.15.7\n kubectl version: Client Version: version.Info{Major:\"1\", Minor:\"19\", GitVersion:\"v1.19.2\", GitCommit:\"f5743093fd1c663cb0cbc89748f730662345d44d\", GitTreeState:\"clean\", BuildDate:\"2020-09-16T21:51:49Z\", GoVersion:\"go1.15.2\", Compiler:\"gc\", Platform:\"darwin/amd64\"} Server Version: version.Info{Major:\"1\", Minor:\"17+\", GitVersion:\"v1.17.12-eks-7684af\", GitCommit:\"7684af4ac41370dd109ac13817023cb8063e3d45\", GitTreeState:\"clean\", BuildDate:\"2020-10-20T22:57:40Z\", GoVersion:\"go1.13.15\", Compiler:\"gc\", Platform:\"linux/amd64\"}\n <denchmark-h:h3>Reproduction (REQUIRED)</denchmark-h>\n \n Please provide a script that can be run to reproduce the issue. The script should have no external library dependencies (i.e., use fake or mock data / environments):\n \n connect to your Kubernetes cluster and verify with kubectl get nodes\n [it shouldn't matter, but I was using EKS]\n run `ray up ray/python/ray/autoscaler/kubernetes/example-full.yaml\n receive the error above about rsync_filter and rsync_exclude\n \n If we cannot run your script, we cannot fix your issue.\n \n  I have verified my script runs in a clean environment and reproduces the issue.\n  I have verified the issue also occurs with the latest wheels.\n ^^ tried to install latest wheel, but received 404 on pulling the .whl file: ERROR: HTTP error 404 while getting https://s3-us-west-2.amazonaws.com/ray-wheels/latest/ray-1.0.0-cp37-cp37m-macosx_10_13_intel.whl ERROR: Could not install requirement ray==1.0.0 from https://s3-us-west-2.amazonaws.com/ray-wheels/latest/ray-1.0.0-cp37-cp37m-macosx_10_13_intel.whl because of HTTP error 404 Client Error: Not Found for url: https://s3-us-west-2.amazonaws.com/ray-wheels/latest/ray-1.0.0-cp37-cp37m-macosx_10_13_intel.whl for URL https://s3-us-west-2.amazonaws.com/ray-wheels/latest/ray-1.0.0-cp37-cp37m-macosx_10_13_intel.whl\n \n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "aaronhmiller", "commentT": "2020-11-06T16:01:19Z", "comment_text": "\n \t\tTry commenting out the lines involving rsync_exclude and rsync_filter in ray/python/ray/autoscaler/kubernetes/example-full.yaml\n and, just in case, also in\n ray/python/ray/autoscaler/kubernetes/defaults.yaml\n These options aren't compatible with Ray 1.0.0.\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "aaronhmiller", "commentT": "2020-11-06T16:57:15Z", "comment_text": "\n \t\tThank you <denchmark-link:https://github.com/Gekho457>@Gekho457</denchmark-link>\n . I'll submit a tiny PR to update those. Both indicate the options are not compatible w/ K8S.\n \t\t"}}}, "commit": {"commit_id": "045fed5cd241c2c290e08d766e7487aaaab19759", "commit_author": "Aaron Miller", "commitT": "2020-11-06 14:35:21-08:00", "commit_complexity": {"commit_NLOC": "None", "commit_CCN": "None", "commit_Nprams": "None"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "python\\ray\\autoscaler\\kubernetes\\defaults.yaml", "file_new_name": "python\\ray\\autoscaler\\kubernetes\\defaults.yaml", "file_complexity": {"file_NLOC": "None", "file_CCN": "None", "file_NToken": "None"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "280,286", "deleted_lines": "280,286"}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "python\\ray\\autoscaler\\kubernetes\\example-full.yaml", "file_new_name": "python\\ray\\autoscaler\\kubernetes\\example-full.yaml", "file_complexity": {"file_NLOC": "None", "file_CCN": "None", "file_NToken": "None"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "280,286", "deleted_lines": "280,286"}}}}}}