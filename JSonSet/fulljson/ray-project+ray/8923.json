{"BR": {"BR_id": "8923", "BR_author": "richardliaw", "BRopenT": "2020-06-13T02:21:28Z", "BRcloseT": "2020-06-23T17:02:31Z", "BR_text": {"BRsummary": "[ray] Raylet logs is blasting output", "BRdescription": "\n <denchmark-h:h3>What is your question?</denchmark-h>\n \n Can we improve the logging mechanisms and output for ray.init?\n With such verbose output, it is hard to seamlessly integrate Ray into a library that actually cares about output.\n 2020-06-12 19:19:13,519 INFO resource_spec.py:212 -- Starting Ray with 4.98 GiB memory available for workers and up to 2.51 GiB for objects. You can adjust these settings with ray.init(memory=, object_store_memory=).\n 2020-06-12 19:19:13,743 WARNING services.py:923 -- Redis failed to start, retrying now.\n 2020-06-12 19:19:13,948 INFO services.py:1165 -- View the Ray dashboard at localhost:8265\n (pid=raylet) I0612 19:19:13.981485 24354 409001408 store_runner.cc:44] Allowing the Plasma store to use up to 2.69557GB of memory.\n (pid=raylet) I0612 19:19:13.981541 24354 409001408 store_runner.cc:58] Starting object store with directory /tmp and huge page support disabled\n (pid=raylet) I0612 19:19:13.982936 24354 409001408 grpc_server.cc:74] ObjectManager server started, listening on port 55476.\n (pid=raylet) I0612 19:19:13.996219 24354 409001408 node_manager.cc:166] Initializing NodeManager with ID 8685342a66581942e80ece7f2d0c00b3061f39ee\n (pid=raylet) I0612 19:19:14.003435 24354 409001408 grpc_server.cc:74] NodeManager server started, listening on port 64310.\n (pid=raylet) I0612 19:19:14.037457 24354 409001408 service_based_accessor.cc:739] Received notification for node id = 8685342a66581942e80ece7f2d0c00b3061f39ee, IsAlive = 1\n (pid=raylet) I0612 19:19:14.037865 24354 409001408 service_based_accessor.cc:739] Received notification for node id = 8685342a66581942e80ece7f2d0c00b3061f39ee, IsAlive = 1\n ^ I don't need to know about any of this!\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "richardliaw", "commentT": "2020-06-13T06:33:49Z", "comment_text": "\n \t\tThis isn't the first time this has regressed. We should add a unit test checking the output.\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "richardliaw", "commentT": "2020-06-22T22:51:36Z", "comment_text": "\n \t\tCannot reproduce it from 0.8.6 so far. I will remove release blocker. But we should definitely fix this before 0.8.7, so I will keep P0\n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "richardliaw", "commentT": "2020-06-23T05:38:14Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/ericl>@ericl</denchmark-link>\n  I have created a PR to fix the issue. but I am not sure about how to create unit tests.\n \t\t"}, "comments_3": {"comment_id": 4, "comment_author": "richardliaw", "commentT": "2020-06-23T05:54:47Z", "comment_text": "\n \t\tCould we use subprocess to run and check the output of a noop ray script? I\n think we have a couple tests that do that already for testing multiple\n drivers, for instance.\n <denchmark-link:#>\u2026</denchmark-link>\n \n \n On Mon, Jun 22, 2020, 10:38 PM Siyuan (Ryans) Zhuang < ***@***.***> wrote:\n  @ericl <https://github.com/ericl> I have created a PR to fix the issue.\n  but I am not sure about how to create unit tests.\n \n  \u2014\n  You are receiving this because you were mentioned.\n  Reply to this email directly, view it on GitHub\n  <#8923 (comment)>,\n  or unsubscribe\n  <https://github.com/notifications/unsubscribe-auth/AAADUSWMKQJ7YTTIKGUO7DDRYA5VFANCNFSM4N4ZAEDA>\n  .\n \n \n \n \t\t"}}}, "commit": {"commit_id": "306ca7573779d3cf7aeee7d06d57f480e825bae0", "commit_author": "Siyuan (Ryans) Zhuang", "commitT": "2020-06-23 10:02:30-07:00", "commit_complexity": {"commit_NLOC": "0.7562557924003707", "commit_CCN": "0.03151065801668211", "commit_Nprams": "0.024096385542168676"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 19, "file_old_name": "src\\ray\\object_manager\\plasma\\client.cc", "file_new_name": "src\\ray\\object_manager\\plasma\\client.cc", "file_complexity": {"file_NLOC": "817", "file_CCN": "127", "file_NToken": "6891"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "210", "deleted_lines": "210", "method_info": {"method_name": "plasma::ClientMmapTableEntry::~ClientMmapTableEntry", "method_params": "", "method_startline": "197", "method_endline": "212", "method_complexity": {"method_NLOC": "8", "method_CCN": "4", "method_NToken": "54", "method_nesting_level": "2"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "508", "deleted_lines": "508", "method_info": {"method_name": "plasma::PlasmaClient::Impl::CreateAndSeal", "method_params": "object_id,data,metadata,evict_if_full", "method_startline": "502", "method_endline": "517", "method_complexity": {"method_NLOC": "14", "method_CCN": "1", "method_NToken": "118", "method_nesting_level": "1"}}}, "hunk_2": {"Ismethod": 1, "added_lines": "424", "deleted_lines": "424", "method_info": {"method_name": "plasma::PlasmaClient::Impl::IncrementObjectCount", "method_params": "object_id,object,is_sealed", "method_startline": "407", "method_endline": "430", "method_complexity": {"method_NLOC": "17", "method_CCN": "2", "method_NToken": "131", "method_nesting_level": "1"}}}, "hunk_3": {"Ismethod": 1, "added_lines": "986,989,995", "deleted_lines": "986,989,995", "method_info": {"method_name": "plasma::PlasmaClient::Impl::Subscribe", "method_params": "fd", "method_startline": "969", "method_endline": "1001", "method_complexity": {"method_NLOC": "18", "method_CCN": "3", "method_NToken": "201", "method_nesting_level": "1"}}}, "hunk_4": {"Ismethod": 1, "added_lines": "921", "deleted_lines": "921", "method_info": {"method_name": "plasma::PlasmaClient::Impl::Delete", "method_params": "object_ids", "method_startline": "905", "method_endline": "928", "method_complexity": {"method_NLOC": "22", "method_CCN": "4", "method_NToken": "180", "method_nesting_level": "1"}}}, "hunk_5": {"Ismethod": 1, "added_lines": "385", "deleted_lines": "385", "method_info": {"method_name": "plasma::PlasmaClient::Impl::LookupMmappedFile", "method_params": "store_fd_val", "method_startline": "383", "method_endline": "387", "method_complexity": {"method_NLOC": "5", "method_CCN": "1", "method_NToken": "41", "method_nesting_level": "1"}}}, "hunk_6": {"Ismethod": 1, "added_lines": "869,871,885,886", "deleted_lines": "869,871,885,886", "method_info": {"method_name": "plasma::PlasmaClient::Impl::Abort", "method_params": "object_id", "method_startline": "866", "method_endline": "903", "method_complexity": {"method_NLOC": "27", "method_CCN": "4", "method_NToken": "226", "method_nesting_level": "1"}}}, "hunk_7": {"Ismethod": 1, "added_lines": "857", "deleted_lines": "857", "method_info": {"method_name": "plasma::PlasmaClient::Impl::Seal", "method_params": "object_id", "method_startline": "834", "method_endline": "864", "method_complexity": {"method_NLOC": "20", "method_CCN": "3", "method_NToken": "156", "method_nesting_level": "1"}}}, "hunk_8": {"Ismethod": 1, "added_lines": "400", "deleted_lines": "400", "method_info": {"method_name": "plasma::PlasmaClient::Impl::GetStoreFd", "method_params": "store_fd", "method_startline": "396", "method_endline": "405", "method_complexity": {"method_NLOC": "10", "method_CCN": "2", "method_NToken": "66", "method_nesting_level": "1"}}}, "hunk_9": {"Ismethod": 1, "added_lines": "757", "deleted_lines": "757", "method_info": {"method_name": "plasma::PlasmaClient::Impl::Contains", "method_params": "object_id,has_object", "method_startline": "744", "method_endline": "762", "method_complexity": {"method_NLOC": "15", "method_CCN": "2", "method_NToken": "128", "method_nesting_level": "1"}}}, "hunk_10": {"Ismethod": 1, "added_lines": "799", "deleted_lines": "799", "method_info": {"method_name": "plasma::PlasmaClient::Impl::ComputeObjectHashParallel", "method_params": "hash_state,data,nbytes", "method_startline": "771", "method_endline": "805", "method_complexity": {"method_NLOC": "26", "method_CCN": "3", "method_NToken": "225", "method_nesting_level": "1"}}}, "hunk_11": {"Ismethod": 1, "added_lines": "525", "deleted_lines": "525", "method_info": {"method_name": "plasma::PlasmaClient::Impl::CreateAndSealBatch", "method_params": "object_ids,data,metadata,evict_if_full", "method_startline": "519", "method_endline": "535", "method_complexity": {"method_NLOC": "14", "method_CCN": "1", "method_NToken": "133", "method_nesting_level": "1"}}}, "hunk_12": {"Ismethod": 1, "added_lines": "697,698", "deleted_lines": "697,698", "method_info": {"method_name": "plasma::PlasmaClient::Impl::MarkObjectUnused", "method_params": "object_id", "method_startline": "695", "method_endline": "703", "method_complexity": {"method_NLOC": "7", "method_CCN": "1", "method_NToken": "59", "method_nesting_level": "1"}}}, "hunk_13": {"Ismethod": 1, "added_lines": "819,820", "deleted_lines": "819,820", "method_info": {"method_name": "plasma::PlasmaClient::Impl::ComputeObjectHashCPU", "method_params": "data,data_size,metadata,metadata_size", "method_startline": "816", "method_endline": "832", "method_complexity": {"method_NLOC": "17", "method_CCN": "2", "method_NToken": "120", "method_nesting_level": "1"}}}, "hunk_14": {"Ismethod": 1, "added_lines": "1066", "deleted_lines": "1066", "method_info": {"method_name": "plasma::PlasmaClient::Impl::Connect", "method_params": "store_socket_name,manager_socket_name,release_delay,num_retries", "method_startline": "1056", "method_endline": "1075", "method_complexity": {"method_NLOC": "18", "method_CCN": "3", "method_NToken": "151", "method_nesting_level": "1"}}}, "hunk_15": {"Ismethod": 1, "added_lines": "184,191", "deleted_lines": "184,191", "method_info": {"method_name": "plasma::ClientMmapTableEntry::ClientMmapTableEntry", "method_params": "fd,map_size", "method_startline": "175", "method_endline": "195", "method_complexity": {"method_NLOC": "14", "method_CCN": "4", "method_NToken": "125", "method_nesting_level": "2"}}}, "hunk_16": {"Ismethod": 1, "added_lines": "438,454,455,457,486", "deleted_lines": "438,454,455,457,486", "method_info": {"method_name": "plasma::PlasmaClient::Impl::Create", "method_params": "object_id,data_size,metadata,metadata_size,data,device_num,evict_if_full", "method_startline": "432", "method_endline": "500", "method_complexity": {"method_NLOC": "49", "method_CCN": "5", "method_NToken": "417", "method_nesting_level": "1"}}}, "hunk_17": {"Ismethod": 1, "added_lines": "713,719,728", "deleted_lines": "713,719,728", "method_info": {"method_name": "plasma::PlasmaClient::Impl::Release", "method_params": "object_id", "method_startline": "705", "method_endline": "741", "method_complexity": {"method_NLOC": "29", "method_CCN": "7", "method_NToken": "230", "method_nesting_level": "1"}}}, "hunk_18": {"Ismethod": 1, "added_lines": "554,556,571,575,615,620,651,666,667", "deleted_lines": "554,556,571,575,615,620,651,666,667", "method_info": {"method_name": "plasma::PlasmaClient::Impl::GetBuffers", "method_params": "object_ids,num_objects,timeout_ms,wrap_buffer,object_buffers", "method_startline": "537", "method_endline": "671", "method_complexity": {"method_NLOC": "100", "method_CCN": "14", "method_NToken": "889", "method_nesting_level": "1"}}}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 3, "file_old_name": "src\\ray\\object_manager\\plasma\\dlmalloc.cc", "file_new_name": "src\\ray\\object_manager\\plasma\\dlmalloc.cc", "file_complexity": {"file_NLOC": "98", "file_CCN": "22", "file_NToken": "706"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "158", "deleted_lines": "158", "method_info": {"method_name": "plasma::fake_munmap", "method_params": "addr,size", "method_startline": "157", "method_endline": "182", "method_complexity": {"method_NLOC": "17", "method_CCN": "6", "method_NToken": "129", "method_nesting_level": "1"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "121,129,135,137,153", "deleted_lines": "121,129,135,137,153", "method_info": {"method_name": "plasma::fake_mmap", "method_params": "size", "method_startline": "114", "method_endline": "155", "method_complexity": {"method_NLOC": "27", "method_CCN": "6", "method_NToken": "212", "method_nesting_level": "1"}}}, "hunk_2": {"Ismethod": 1, "added_lines": "93,98,106", "deleted_lines": "93,98,106", "method_info": {"method_name": "plasma::create_buffer", "method_params": "size", "method_startline": "75", "method_endline": "112", "method_complexity": {"method_NLOC": "31", "method_CCN": "7", "method_NToken": "242", "method_nesting_level": "1"}}}}}, "file_2": {"file_change_type": "MODIFY", "file_Nmethod": 4, "file_old_name": "src\\ray\\object_manager\\plasma\\eviction_policy.cc", "file_new_name": "src\\ray\\object_manager\\plasma\\eviction_policy.cc", "file_complexity": {"file_NLOC": "124", "file_CCN": "30", "file_NToken": "970"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "44", "deleted_lines": "44", "method_info": {"method_name": "plasma::LRUCache::Remove", "method_params": "key", "method_startline": "35", "method_endline": "46", "method_complexity": {"method_NLOC": "12", "method_CCN": "2", "method_NToken": "81", "method_nesting_level": "1"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "28", "deleted_lines": "28", "method_info": {"method_name": "plasma::LRUCache::Add", "method_params": "key,size", "method_startline": "26", "method_endline": "33", "method_complexity": {"method_NLOC": "7", "method_CCN": "1", "method_NToken": "61", "method_nesting_level": "1"}}}, "hunk_2": {"Ismethod": 1, "added_lines": "49,52", "deleted_lines": "49,52", "method_info": {"method_name": "plasma::LRUCache::AdjustCapacity", "method_params": "delta", "method_startline": "48", "method_endline": "53", "method_complexity": {"method_NLOC": "6", "method_CCN": "1", "method_NToken": "61", "method_nesting_level": "1"}}}, "hunk_3": {"Ismethod": 1, "added_lines": "131,134", "deleted_lines": "131,134", "method_info": {"method_name": "plasma::EvictionPolicy::RequireSpace", "method_params": "size,objects_to_evict", "method_startline": "123", "method_endline": "139", "method_complexity": {"method_NLOC": "13", "method_CCN": "2", "method_NToken": "117", "method_nesting_level": "1"}}}}}, "file_3": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "src\\ray\\object_manager\\plasma\\fling.cc", "file_new_name": "src\\ray\\object_manager\\plasma\\fling.cc", "file_complexity": {"file_NLOC": "105", "file_CCN": "34", "file_NToken": "763"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "114", "deleted_lines": "114", "method_info": {"method_name": "recv_fd", "method_params": "conn", "method_startline": "97", "method_endline": "164", "method_complexity": {"method_NLOC": "49", "method_CCN": "22", "method_NToken": "380", "method_nesting_level": "0"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "74,84,88,91", "deleted_lines": "74,84,88,91", "method_info": {"method_name": "send_fd", "method_params": "conn,fd", "method_startline": "40", "method_endline": "95", "method_complexity": {"method_NLOC": "40", "method_CCN": "11", "method_NToken": "287", "method_nesting_level": "0"}}}}}, "file_4": {"file_change_type": "DELETE", "file_Nmethod": 0, "file_old_name": "src\\ray\\object_manager\\plasma\\hash_table_store.cc", "file_new_name": "None", "file_complexity": {"file_NLOC": "None", "file_CCN": "None", "file_NToken": "None"}}, "file_5": {"file_change_type": "DELETE", "file_Nmethod": 0, "file_old_name": "src\\ray\\object_manager\\plasma\\hash_table_store.h", "file_new_name": "None", "file_complexity": {"file_NLOC": "None", "file_CCN": "None", "file_NToken": "None"}}, "file_6": {"file_change_type": "MODIFY", "file_Nmethod": 7, "file_old_name": "src\\ray\\object_manager\\plasma\\io.cc", "file_new_name": "src\\ray\\object_manager\\plasma\\io.cc", "file_complexity": {"file_NLOC": "200", "file_CCN": "42", "file_NToken": "1477"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "212", "deleted_lines": "212", "method_info": {"method_name": "plasma::ConnectIpcSocketRetry", "method_params": "pathname,num_retries,timeout,fd", "method_startline": "201", "method_endline": "226", "method_complexity": {"method_NLOC": "21", "method_CCN": "6", "method_NToken": "141", "method_nesting_level": "1"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "104", "deleted_lines": "104", "method_info": {"method_name": "plasma::ReadMessage", "method_params": "fd,type,buffer", "method_startline": "100", "method_endline": "119", "method_complexity": {"method_NLOC": "19", "method_CCN": "2", "method_NToken": "189", "method_nesting_level": "1"}}}, "hunk_2": {"Ismethod": 1, "added_lines": "92", "deleted_lines": "92", "method_info": {"method_name": "plasma::ReadBytes", "method_params": "fd,cursor,length", "method_startline": "77", "method_endline": "98", "method_complexity": {"method_NLOC": "20", "method_CCN": "7", "method_NToken": "126", "method_nesting_level": "1"}}}, "hunk_3": {"Ismethod": 1, "added_lines": "142,146,153,161,169,182,188", "deleted_lines": "142,146,153,161,169,182,188", "method_info": {"method_name": "plasma::ConnectOrListenIpcSock", "method_params": "pathname,shall_listen", "method_startline": "121", "method_endline": "199", "method_complexity": {"method_NLOC": "72", "method_CCN": "14", "method_NToken": "562", "method_nesting_level": "1"}}}, "hunk_4": {"Ismethod": 1, "added_lines": "61", "deleted_lines": "61", "method_info": {"method_name": "plasma::WriteBytes", "method_params": "fd,cursor,length", "method_startline": "45", "method_endline": "67", "method_complexity": {"method_NLOC": "20", "method_CCN": "7", "method_NToken": "126", "method_nesting_level": "1"}}}, "hunk_5": {"Ismethod": 1, "added_lines": "231", "deleted_lines": "231", "method_info": {"method_name": "plasma::AcceptClient", "method_params": "socket_fd", "method_startline": "228", "method_endline": "235", "method_complexity": {"method_NLOC": "8", "method_CCN": "2", "method_NToken": "42", "method_nesting_level": "1"}}}, "hunk_6": {"Ismethod": 1, "added_lines": "242,250", "deleted_lines": "242,250", "method_info": {"method_name": "plasma::ReadMessageAsync", "method_params": "sock", "method_startline": "237", "method_endline": "255", "method_complexity": {"method_NLOC": "17", "method_CCN": "3", "method_NToken": "124", "method_nesting_level": "1"}}}}}, "file_7": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "src\\ray\\object_manager\\plasma\\malloc.cc", "file_new_name": "src\\ray\\object_manager\\plasma\\malloc.cc", "file_complexity": {"file_NLOC": "40", "file_CCN": "9", "file_NToken": "252"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "64", "deleted_lines": "64", "method_info": {"method_name": "plasma::GetMmapSize", "method_params": "fd", "method_startline": "58", "method_endline": "66", "method_complexity": {"method_NLOC": "9", "method_CCN": "3", "method_NToken": "52", "method_nesting_level": "1"}}}}}, "file_8": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "src\\ray\\object_manager\\plasma\\plasma.cc", "file_new_name": "src\\ray\\object_manager\\plasma\\plasma.cc", "file_complexity": {"file_NLOC": "61", "file_CCN": "12", "file_NToken": "493"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "41,48", "deleted_lines": "41,48", "method_info": {"method_name": "plasma::WarnIfSigpipe", "method_params": "status,client_sock", "method_startline": "36", "method_endline": "50", "method_complexity": {"method_NLOC": "15", "method_CCN": "5", "method_NToken": "74", "method_nesting_level": "1"}}}}}, "file_9": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "src\\ray\\object_manager\\plasma\\plasma.h", "file_new_name": "src\\ray\\object_manager\\plasma\\plasma.h", "file_complexity": {"file_NLOC": "64", "file_CCN": "8", "file_NToken": "297"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "34,40,57", "deleted_lines": "37,56"}}}, "file_10": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "src\\ray\\object_manager\\plasma\\plasma_allocator.cc", "file_new_name": "src\\ray\\object_manager\\plasma\\plasma_allocator.cc", "file_complexity": {"file_NLOC": "29", "file_CCN": "6", "file_NToken": "168"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "38", "deleted_lines": "38", "method_info": {"method_name": "plasma::PlasmaAllocator::Memalign", "method_params": "alignment,bytes", "method_startline": "33", "method_endline": "41", "method_complexity": {"method_NLOC": "9", "method_CCN": "2", "method_NToken": "54", "method_nesting_level": "1"}}}}}, "file_11": {"file_change_type": "MODIFY", "file_Nmethod": 32, "file_old_name": "src\\ray\\object_manager\\plasma\\protocol.cc", "file_new_name": "src\\ray\\object_manager\\plasma\\protocol.cc", "file_complexity": {"file_NLOC": "610", "file_CCN": "94", "file_NToken": "6004"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "745,747", "deleted_lines": "745,747", "method_info": {"method_name": "plasma::ReadRefreshLRURequest", "method_params": "data,size,object_ids", "method_startline": "743", "method_endline": "753", "method_complexity": {"method_NLOC": "11", "method_CCN": "2", "method_NToken": "113", "method_nesting_level": "1"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "362,364", "deleted_lines": "362,364", "method_info": {"method_name": "plasma::ReadAbortRequest", "method_params": "data,size,object_id", "method_startline": "361", "method_endline": "367", "method_complexity": {"method_NLOC": "7", "method_CCN": "1", "method_NToken": "72", "method_nesting_level": "1"}}}, "hunk_2": {"Ismethod": 1, "added_lines": "235", "deleted_lines": "235", "method_info": {"method_name": "plasma::SendCreateReply", "method_params": "sock,object_id,object,error_code,mmap_size", "method_startline": "209", "method_endline": "240", "method_complexity": {"method_NLOC": "27", "method_CCN": "5", "method_NToken": "237", "method_nesting_level": "1"}}}, "hunk_3": {"Ismethod": 1, "added_lines": "600,602", "deleted_lines": "600,602", "method_info": {"method_name": "plasma::ReadGetRequest", "method_params": "data,size,object_ids,timeout_ms", "method_startline": "598", "method_endline": "609", "method_complexity": {"method_NLOC": "12", "method_CCN": "2", "method_NToken": "126", "method_nesting_level": "1"}}}, "hunk_4": {"Ismethod": 1, "added_lines": "762,764", "deleted_lines": "762,764", "method_info": {"method_name": "plasma::ReadRefreshLRUReply", "method_params": "data,size", "method_startline": "761", "method_endline": "766", "method_complexity": {"method_NLOC": "6", "method_CCN": "1", "method_NToken": "50", "method_nesting_level": "1"}}}, "hunk_5": {"Ismethod": 1, "added_lines": "141,143", "deleted_lines": "141,143", "method_info": {"method_name": "plasma::ReadSetOptionsRequest", "method_params": "data,size,client_name,output_memory_quota", "method_startline": "139", "method_endline": "147", "method_complexity": {"method_NLOC": "9", "method_CCN": "1", "method_NToken": "87", "method_nesting_level": "1"}}}, "hunk_6": {"Ismethod": 1, "added_lines": "177,179", "deleted_lines": "177,179", "method_info": {"method_name": "plasma::ReadGetDebugStringReply", "method_params": "data,size,debug_string", "method_startline": "176", "method_endline": "182", "method_complexity": {"method_NLOC": "7", "method_CCN": "1", "method_NToken": "69", "method_nesting_level": "1"}}}, "hunk_7": {"Ismethod": 1, "added_lines": "645,650,671", "deleted_lines": "645,650,671", "method_info": {"method_name": "plasma::ReadGetReply", "method_params": "data,size,num_objects,store_fds,mmap_sizes", "method_startline": "642", "method_endline": "677", "method_complexity": {"method_NLOC": "32", "method_CCN": "7", "method_NToken": "372", "method_nesting_level": "1"}}}, "hunk_8": {"Ismethod": 1, "added_lines": "392,394", "deleted_lines": "392,394", "method_info": {"method_name": "plasma::ReadSealRequest", "method_params": "data,size,object_id", "method_startline": "391", "method_endline": "397", "method_complexity": {"method_NLOC": "7", "method_CCN": "1", "method_NToken": "72", "method_nesting_level": "1"}}}, "hunk_9": {"Ismethod": 1, "added_lines": "424,426", "deleted_lines": "424,426", "method_info": {"method_name": "plasma::ReadReleaseRequest", "method_params": "data,size,object_id", "method_startline": "423", "method_endline": "429", "method_complexity": {"method_NLOC": "7", "method_CCN": "1", "method_NToken": "72", "method_nesting_level": "1"}}}, "hunk_10": {"Ismethod": 1, "added_lines": "471", "deleted_lines": "471", "method_info": {"method_name": "plasma::SendDeleteReply", "method_params": "sock,object_ids,errors", "method_startline": "469", "method_endline": "480", "method_complexity": {"method_NLOC": "12", "method_CCN": "1", "method_NToken": "134", "method_nesting_level": "1"}}}, "hunk_11": {"Ismethod": 1, "added_lines": "699,701,702", "deleted_lines": "699,701,702", "method_info": {"method_name": "plasma::ReadDataRequest", "method_params": "data,size,object_id,address,port", "method_startline": "697", "method_endline": "711", "method_complexity": {"method_NLOC": "12", "method_CCN": "2", "method_NToken": "139", "method_nesting_level": "1"}}}, "hunk_12": {"Ismethod": 1, "added_lines": "280,282", "deleted_lines": "280,282", "method_info": {"method_name": "plasma::ReadCreateAndSealRequest", "method_params": "data,size,object_id,evict_if_full,object_data,metadata", "method_startline": "277", "method_endline": "289", "method_complexity": {"method_NLOC": "12", "method_CCN": "1", "method_NToken": "123", "method_nesting_level": "1"}}}, "hunk_13": {"Ismethod": 1, "added_lines": "567,569", "deleted_lines": "567,569", "method_info": {"method_name": "plasma::ReadEvictRequest", "method_params": "data,size,num_bytes", "method_startline": "566", "method_endline": "572", "method_complexity": {"method_NLOC": "7", "method_CCN": "1", "method_NToken": "63", "method_nesting_level": "1"}}}, "hunk_14": {"Ismethod": 1, "added_lines": "486,487,488,490", "deleted_lines": "486,487,488,490", "method_info": {"method_name": "plasma::ReadDeleteReply", "method_params": "data,size,object_ids,errors", "method_startline": "482", "method_endline": "498", "method_complexity": {"method_NLOC": "16", "method_CCN": "1", "method_NToken": "166", "method_nesting_level": "1"}}}, "hunk_15": {"Ismethod": 1, "added_lines": "124", "deleted_lines": "124", "method_info": {"method_name": "plasma::PlasmaErrorStatus", "method_params": "plasma_error", "method_startline": "110", "method_endline": "127", "method_complexity": {"method_NLOC": "18", "method_CCN": "5", "method_NToken": "106", "method_nesting_level": "1"}}}, "hunk_16": {"Ismethod": 1, "added_lines": "156,158", "deleted_lines": "156,158", "method_info": {"method_name": "plasma::ReadSetOptionsReply", "method_params": "data,size", "method_startline": "155", "method_endline": "160", "method_complexity": {"method_NLOC": "6", "method_CCN": "1", "method_NToken": "53", "method_nesting_level": "1"}}}, "hunk_17": {"Ismethod": 1, "added_lines": "439,441", "deleted_lines": "439,441", "method_info": {"method_name": "plasma::ReadReleaseReply", "method_params": "data,size,object_id", "method_startline": "438", "method_endline": "444", "method_complexity": {"method_NLOC": "7", "method_CCN": "1", "method_NToken": "75", "method_nesting_level": "1"}}}, "hunk_18": {"Ismethod": 1, "added_lines": "335,337", "deleted_lines": "335,337", "method_info": {"method_name": "plasma::ReadCreateAndSealReply", "method_params": "data,size", "method_startline": "334", "method_endline": "339", "method_complexity": {"method_NLOC": "6", "method_CCN": "1", "method_NToken": "53", "method_nesting_level": "1"}}}, "hunk_19": {"Ismethod": 1, "added_lines": "459,460,462", "deleted_lines": "459,460,462", "method_info": {"method_name": "plasma::ReadDeleteRequest", "method_params": "data,size,object_ids", "method_startline": "456", "method_endline": "467", "method_complexity": {"method_NLOC": "11", "method_CCN": "1", "method_NToken": "110", "method_nesting_level": "1"}}}, "hunk_20": {"Ismethod": 1, "added_lines": "244,246", "deleted_lines": "244,246", "method_info": {"method_name": "plasma::ReadCreateReply", "method_params": "data,size,object_id,object,store_fd,mmap_size", "method_startline": "242", "method_endline": "266", "method_complexity": {"method_NLOC": "21", "method_CCN": "3", "method_NToken": "225", "method_nesting_level": "1"}}}, "hunk_21": {"Ismethod": 1, "added_lines": "75", "deleted_lines": "75", "method_info": {"method_name": "plasma::PlasmaReceive", "method_params": "sock,message_type,buffer", "method_startline": "72", "method_endline": "79", "method_complexity": {"method_NLOC": "8", "method_CCN": "1", "method_NToken": "73", "method_nesting_level": "1"}}}, "hunk_22": {"Ismethod": 1, "added_lines": "349,351", "deleted_lines": "349,351", "method_info": {"method_name": "plasma::ReadCreateAndSealBatchReply", "method_params": "data,size", "method_startline": "348", "method_endline": "353", "method_complexity": {"method_NLOC": "6", "method_CCN": "1", "method_NToken": "53", "method_nesting_level": "1"}}}, "hunk_23": {"Ismethod": 1, "added_lines": "198,200", "deleted_lines": "198,200", "method_info": {"method_name": "plasma::ReadCreateRequest", "method_params": "data,size,object_id,evict_if_full,data_size,metadata_size,device_num", "method_startline": "195", "method_endline": "207", "method_complexity": {"method_NLOC": "13", "method_CCN": "1", "method_NToken": "124", "method_nesting_level": "1"}}}, "hunk_24": {"Ismethod": 1, "added_lines": "376,378", "deleted_lines": "376,378", "method_info": {"method_name": "plasma::ReadAbortReply", "method_params": "data,size,object_id", "method_startline": "375", "method_endline": "381", "method_complexity": {"method_NLOC": "7", "method_CCN": "1", "method_NToken": "72", "method_nesting_level": "1"}}}, "hunk_25": {"Ismethod": 1, "added_lines": "526,528", "deleted_lines": "526,528", "method_info": {"method_name": "plasma::ReadContainsReply", "method_params": "data,size,object_id,has_object", "method_startline": "524", "method_endline": "532", "method_complexity": {"method_NLOC": "9", "method_CCN": "1", "method_NToken": "85", "method_nesting_level": "1"}}}, "hunk_26": {"Ismethod": 1, "added_lines": "581,583", "deleted_lines": "581,583", "method_info": {"method_name": "plasma::ReadEvictReply", "method_params": "data,size,num_bytes", "method_startline": "580", "method_endline": "586", "method_complexity": {"method_NLOC": "7", "method_CCN": "1", "method_NToken": "62", "method_nesting_level": "1"}}}, "hunk_27": {"Ismethod": 1, "added_lines": "407,409", "deleted_lines": "407,409", "method_info": {"method_name": "plasma::ReadSealReply", "method_params": "data,size,object_id", "method_startline": "406", "method_endline": "412", "method_complexity": {"method_NLOC": "7", "method_CCN": "1", "method_NToken": "75", "method_nesting_level": "1"}}}, "hunk_28": {"Ismethod": 1, "added_lines": "551,553", "deleted_lines": "551,553", "method_info": {"method_name": "plasma::ReadConnectReply", "method_params": "data,size,memory_capacity", "method_startline": "550", "method_endline": "556", "method_complexity": {"method_NLOC": "7", "method_CCN": "1", "method_NToken": "63", "method_nesting_level": "1"}}}, "hunk_29": {"Ismethod": 1, "added_lines": "723,725", "deleted_lines": "723,725", "method_info": {"method_name": "plasma::ReadDataReply", "method_params": "data,size,object_id,object_size,metadata_size", "method_startline": "721", "method_endline": "730", "method_complexity": {"method_NLOC": "10", "method_CCN": "1", "method_NToken": "110", "method_nesting_level": "1"}}}, "hunk_30": {"Ismethod": 1, "added_lines": "510,512", "deleted_lines": "510,512", "method_info": {"method_name": "plasma::ReadContainsRequest", "method_params": "data,size,object_id", "method_startline": "509", "method_endline": "515", "method_complexity": {"method_NLOC": "7", "method_CCN": "1", "method_NToken": "72", "method_nesting_level": "1"}}}, "hunk_31": {"Ismethod": 1, "added_lines": "309,311", "deleted_lines": "309,311", "method_info": {"method_name": "plasma::ReadCreateAndSealBatchRequest", "method_params": "data,size,object_ids,evict_if_full,object_data,metadata", "method_startline": "304", "method_endline": "326", "method_complexity": {"method_NLOC": "19", "method_CCN": "1", "method_NToken": "192", "method_nesting_level": "1"}}}}}, "file_12": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "src\\ray\\object_manager\\plasma\\quota_aware_policy.cc", "file_new_name": "src\\ray\\object_manager\\plasma\\quota_aware_policy.cc", "file_complexity": {"file_NLOC": "133", "file_CCN": "29", "file_NToken": "936"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "50,56", "deleted_lines": "50,56", "method_info": {"method_name": "plasma::QuotaAwarePolicy::SetClientQuota", "method_params": "client,output_memory_quota", "method_startline": "48", "method_endline": "65", "method_complexity": {"method_NLOC": "15", "method_CCN": "3", "method_NToken": "111", "method_nesting_level": "1"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "75", "deleted_lines": "75", "method_info": {"method_name": "plasma::QuotaAwarePolicy::EnforcePerClientQuota", "method_params": "client,size,is_create,objects_to_evict", "method_startline": "67", "method_endline": "103", "method_complexity": {"method_NLOC": "31", "method_CCN": "7", "method_NToken": "200", "method_nesting_level": "1"}}}}}, "file_13": {"file_change_type": "MODIFY", "file_Nmethod": 17, "file_old_name": "src\\ray\\object_manager\\plasma\\store.cc", "file_new_name": "src\\ray\\object_manager\\plasma\\store.cc", "file_complexity": {"file_NLOC": "776", "file_CCN": "159", "file_NToken": "6028"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "402", "deleted_lines": "402", "method_info": {"method_name": "plasma::PlasmaStore::UpdateObjectGetRequests", "method_params": "object_id", "method_startline": "386", "method_endline": "428", "method_complexity": {"method_NLOC": "26", "method_CCN": "5", "method_NToken": "181", "method_nesting_level": "1"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "871,882", "deleted_lines": "871,882", "method_info": {"method_name": "plasma::PlasmaStore::SubscribeToUpdates", "method_params": "client", "method_startline": "870", "method_endline": "901", "method_complexity": {"method_NLOC": "23", "method_CCN": "5", "method_NToken": "152", "method_nesting_level": "1"}}}, "hunk_2": {"Ismethod": 1, "added_lines": "212,231,243,248", "deleted_lines": "212,231,243,248", "method_info": {"method_name": "plasma::PlasmaStore::CreateObject", "method_params": "object_id,evict_if_full,data_size,metadata_size,device_num,client,result", "method_startline": "208", "method_endline": "284", "method_complexity": {"method_NLOC": "58", "method_CCN": "7", "method_NToken": "443", "method_nesting_level": "1"}}}, "hunk_3": {"Ismethod": 1, "added_lines": "604,605", "deleted_lines": "604,605", "method_info": {"method_name": "plasma::PlasmaStore::AbortObject", "method_params": "object_id,client", "method_startline": "602", "method_endline": "618", "method_complexity": {"method_NLOC": "14", "method_CCN": "2", "method_NToken": "99", "method_nesting_level": "1"}}}, "hunk_4": {"Ismethod": 1, "added_lines": "663,668,669,671,694", "deleted_lines": "663,668,669,671,694", "method_info": {"method_name": "plasma::PlasmaStore::EvictObjects", "method_params": "object_ids", "method_startline": "655", "method_endline": "701", "method_complexity": {"method_NLOC": "35", "method_CCN": "7", "method_NToken": "267", "method_nesting_level": "1"}}}, "hunk_5": {"Ismethod": 1, "added_lines": "287,288,289", "deleted_lines": "287,288,289", "method_info": {"method_name": "plasma::PlasmaObject_init", "method_params": "object,entry", "method_startline": "286", "method_endline": "301", "method_complexity": {"method_NLOC": "14", "method_CCN": "3", "method_NToken": "107", "method_nesting_level": "1"}}}, "hunk_6": {"Ismethod": 1, "added_lines": "553", "deleted_lines": "553", "method_info": {"method_name": "plasma::PlasmaStore::EraseFromObjectTable", "method_params": "object_id", "method_startline": "546", "method_endline": "557", "method_complexity": {"method_NLOC": "10", "method_CCN": "3", "method_NToken": "82", "method_nesting_level": "1"}}}, "hunk_7": {"Ismethod": 1, "added_lines": "183", "deleted_lines": "183", "method_info": {"method_name": "plasma::PlasmaStore::AllocateMemory", "method_params": "size,evict_if_full,fd,map_size,offset,client,is_create", "method_startline": "139", "method_endline": "186", "method_complexity": {"method_NLOC": "31", "method_CCN": "8", "method_NToken": "184", "method_nesting_level": "1"}}}, "hunk_8": {"Ismethod": 1, "added_lines": "906,954,963,996,1010,1022,1084,1104", "deleted_lines": "906,954,963,996,1010,1022,1084,1104", "method_info": {"method_name": "plasma::PlasmaStore::ProcessMessage", "method_params": "client", "method_startline": "903", "method_endline": "1107", "method_complexity": {"method_NLOC": "173", "method_CCN": "33", "method_NToken": "1485", "method_nesting_level": "1"}}}, "hunk_9": {"Ismethod": 1, "added_lines": "721,723,727", "deleted_lines": "721,723,727", "method_info": {"method_name": "plasma::PlasmaStore::DisconnectClient", "method_params": "client_fd", "method_startline": "720", "method_endline": "769", "method_complexity": {"method_NLOC": "34", "method_CCN": "6", "method_NToken": "246", "method_nesting_level": "1"}}}, "hunk_10": {"Ismethod": 1, "added_lines": "341", "deleted_lines": "341", "method_info": {"method_name": "plasma::PlasmaStore::RemoveGetRequestsForClient", "method_params": "client", "method_startline": "329", "method_endline": "345", "method_complexity": {"method_NLOC": "14", "method_CCN": "5", "method_NToken": "85", "method_nesting_level": "1"}}}, "hunk_11": {"Ismethod": 1, "added_lines": "578,582,583", "deleted_lines": "578,582,583", "method_info": {"method_name": "plasma::PlasmaStore::SealObjects", "method_params": "object_ids", "method_startline": "575", "method_endline": "600", "method_complexity": {"method_NLOC": "20", "method_CCN": "3", "method_NToken": "189", "method_nesting_level": "1"}}}, "hunk_12": {"Ismethod": 1, "added_lines": "450,481", "deleted_lines": "450,481", "method_info": {"method_name": "plasma::PlasmaStore::ProcessGetRequest", "method_params": "client,object_ids,timeout_ms", "method_startline": "430", "method_endline": "515", "method_complexity": {"method_NLOC": "62", "method_CCN": "15", "method_NToken": "549", "method_nesting_level": "1"}}}, "hunk_13": {"Ismethod": 1, "added_lines": "714,717", "deleted_lines": "714,717", "method_info": {"method_name": "plasma::PlasmaStore::ConnectClient", "method_params": "listener_sock", "method_startline": "703", "method_endline": "718", "method_complexity": {"method_NLOC": "12", "method_CCN": "2", "method_NToken": "104", "method_nesting_level": "1"}}}, "hunk_14": {"Ismethod": 1, "added_lines": "797,800,813", "deleted_lines": "797,800,813", "method_info": {"method_name": "plasma::PlasmaStore::SendNotifications", "method_params": "it", "method_startline": "780", "method_endline": "836", "method_complexity": {"method_NLOC": "40", "method_CCN": "10", "method_NToken": "299", "method_nesting_level": "1"}}}, "hunk_15": {"Ismethod": 1, "added_lines": "561,563", "deleted_lines": "561,563", "method_info": {"method_name": "plasma::PlasmaStore::ReleaseObject", "method_params": "object_id,client", "method_startline": "559", "method_endline": "564", "method_complexity": {"method_NLOC": "5", "method_CCN": "1", "method_NToken": "47", "method_nesting_level": "1"}}}, "hunk_16": {"Ismethod": 1, "added_lines": "324", "deleted_lines": "324", "method_info": {"method_name": "plasma::PlasmaStore::RemoveGetRequest", "method_params": "get_request", "method_startline": "303", "method_endline": "327", "method_complexity": {"method_NLOC": "19", "method_CCN": "6", "method_NToken": "138", "method_nesting_level": "1"}}}}}, "file_14": {"file_change_type": "MODIFY", "file_Nmethod": 3, "file_old_name": "src\\ray\\object_manager\\plasma\\store_runner.cc", "file_new_name": "src\\ray\\object_manager\\plasma\\store_runner.cc", "file_complexity": {"file_NLOC": "107", "file_CCN": "19", "file_NToken": "660"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "135", "deleted_lines": "133", "method_info": {"method_name": "plasma::PlasmaStoreRunner::Stop", "method_params": "", "method_startline": "131", "method_endline": "137", "method_complexity": {"method_NLOC": "7", "method_CCN": "2", "method_NToken": "30", "method_nesting_level": "1"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "87,91,93,94,96,110,118", "deleted_lines": "91,95,97,98,100,114,122", "method_info": {"method_name": "plasma::PlasmaStoreRunner::Start", "method_params": "", "method_startline": "78", "method_endline": "129", "method_complexity": {"method_NLOC": "34", "method_CCN": "5", "method_NToken": "280", "method_nesting_level": "1"}}}, "hunk_2": {"Ismethod": 1, "added_lines": "22,26,30,34,44,61", "deleted_lines": "16,23,26,30,34,38,48,65", "method_info": {"method_name": "plasma::PlasmaStoreRunner::PlasmaStoreRunner", "method_params": "socket_name,system_memory,hugepages_enabled,plasma_directory,external_store_endpoint", "method_startline": "16", "method_endline": "76", "method_complexity": {"method_NLOC": "49", "method_CCN": "11", "method_NToken": "291", "method_nesting_level": "1"}}}}}, "file_15": {"file_change_type": "DELETE", "file_Nmethod": 0, "file_old_name": "src\\ray\\object_manager\\plasma\\test\\client_tests.cc", "file_new_name": "None", "file_complexity": {"file_NLOC": "None", "file_CCN": "None", "file_NToken": "None"}}, "file_16": {"file_change_type": "DELETE", "file_Nmethod": 0, "file_old_name": "src\\ray\\object_manager\\plasma\\test\\external_store_tests.cc", "file_new_name": "None", "file_complexity": {"file_NLOC": "None", "file_CCN": "None", "file_NToken": "None"}}, "file_17": {"file_change_type": "DELETE", "file_Nmethod": 0, "file_old_name": "src\\ray\\object_manager\\plasma\\test\\serialization_tests.cc", "file_new_name": "None", "file_complexity": {"file_NLOC": "None", "file_CCN": "None", "file_NToken": "None"}}, "file_18": {"file_change_type": "DELETE", "file_Nmethod": 0, "file_old_name": "src\\ray\\object_manager\\plasma\\test_util.h", "file_new_name": "None", "file_complexity": {"file_NLOC": "None", "file_CCN": "None", "file_NToken": "None"}}, "file_19": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "src\\ray\\plasma\\store_exec.cc", "file_new_name": "src\\ray\\plasma\\store_exec.cc", "file_complexity": {"file_NLOC": "70", "file_CCN": "12", "file_NToken": "359"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "17", "deleted_lines": "15,16,19", "method_info": {"method_name": "HandleSignal", "method_params": "signal", "method_startline": "15", "method_endline": "20", "method_complexity": {"method_NLOC": "6", "method_CCN": "2", "method_NToken": "31", "method_nesting_level": "0"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "23,24,25,26,27,28,54,80,81", "deleted_lines": "50,63,76,78,79,80", "method_info": {"method_name": "main", "method_params": "argc", "method_startline": "22", "method_endline": "88", "method_complexity": {"method_NLOC": "58", "method_CCN": "10", "method_NToken": "314", "method_nesting_level": "0"}}}}}}}}