{"BR": {"BR_id": "9662", "BR_author": "AmeerHajAli", "BRopenT": "2020-07-23T10:40:39Z", "BRcloseT": "2020-08-03T17:38:45Z", "BR_text": {"BRsummary": "Can't reduce num_workers for local node provider", "BRdescription": "\n Consecutive calls to ray up with a reduced number of workers for local node provider crashes.\n steps to reproduce:\n \n ray up example-full.yaml\n //remove one worker\n ray up example_full.yaml\n \n This triggers the following assert:\n \n \n \n ray/python/ray/autoscaler/local/node_provider.py\n \n \n          Line 60\n       in\n       993ff5f\n \n \n \n \n \n \n  assert len(workers) == len(provider_config[\"worker_ips\"]) + 1 \n \n \n \n \n \n I will fix that in an upcoming PR.\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "AmeerHajAli", "commentT": "2020-07-23T18:06:27Z", "comment_text": "\n \t\tthanks! this is a pretty important issue, agree\n \t\t"}}}, "commit": {"commit_id": "9089fab0ef8330126abfa7516e9361842a4bc10c", "commit_author": "Ameer Haj Ali", "commitT": "2020-08-03 10:38:44-07:00", "commit_complexity": {"commit_NLOC": "0.3447368421052632", "commit_CCN": "0.8763157894736842", "commit_Nprams": "0.7947368421052632"}, "changed_files": {"file_0": {"file_change_type": "ADD", "file_Nmethod": 0, "file_old_name": "None", "file_new_name": "python\\ray\\autoscaler\\local\\coordinator_node_provider.py", "file_complexity": {"file_NLOC": "82", "file_CCN": "14", "file_NToken": "494"}}, "file_1": {"file_change_type": "ADD", "file_Nmethod": 0, "file_old_name": "None", "file_new_name": "python\\ray\\autoscaler\\local\\coordinator_server.py", "file_complexity": {"file_NLOC": "89", "file_CCN": "11", "file_NToken": "477"}}, "file_2": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "python\\ray\\autoscaler\\local\\example-full.yaml", "file_new_name": "python\\ray\\autoscaler\\local\\example-full.yaml", "file_complexity": {"file_NLOC": "None", "file_CCN": "None", "file_NToken": "None"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "41,42,43,44", "deleted_lines": null}}}, "file_3": {"file_change_type": "MODIFY", "file_Nmethod": 4, "file_old_name": "python\\ray\\autoscaler\\local\\node_provider.py", "file_new_name": "python\\ray\\autoscaler\\local\\node_provider.py", "file_complexity": {"file_NLOC": "200", "file_CCN": "39", "file_NToken": "1161"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "159,160,161,162,163,164,165,166,167,168,169,170,171,172", "deleted_lines": null, "method_info": {"method_name": "__init__", "method_params": "self,provider_config,cluster_name", "method_startline": "157", "method_endline": "172", "method_complexity": {"method_NLOC": "14", "method_CCN": "2", "method_NToken": "72", "method_nesting_level": "1"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "51,52,61,62,63,64,65,66,67,68,69,70", "deleted_lines": "48,49,58,59", "method_info": {"method_name": "__init__", "method_params": "self,lock_path,save_path,provider_config", "method_startline": "23", "method_endline": "75", "method_complexity": {"method_NLOC": "49", "method_CCN": "9", "method_NToken": "323", "method_nesting_level": "1"}}}, "hunk_2": {"Ismethod": 1, "added_lines": "211,217,218,222,223,224", "deleted_lines": null, "method_info": {"method_name": "create_node", "method_params": "self,node_config,tags,count", "method_startline": "210", "method_endline": "224", "method_complexity": {"method_NLOC": "14", "method_CCN": "6", "method_NToken": "104", "method_nesting_level": "1"}}}, "hunk_3": {"Ismethod": 1, "added_lines": "106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137", "deleted_lines": null, "method_info": {"method_name": "__init__", "method_params": "self,lock_path,save_path,list_of_node_ips", "method_startline": "106", "method_endline": "137", "method_complexity": {"method_NLOC": "28", "method_CCN": "6", "method_NToken": "179", "method_nesting_level": "1"}}}}}, "file_4": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "python\\ray\\autoscaler\\node_provider.py", "file_new_name": "python\\ray\\autoscaler\\node_provider.py", "file_complexity": {"file_NLOC": "198", "file_CCN": "42", "file_NToken": "996"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "29,30,31,32,33,34,35", "deleted_lines": "29,30", "method_info": {"method_name": "import_local", "method_params": "provider_config", "method_startline": "28", "method_endline": "35", "method_complexity": {"method_NLOC": "8", "method_CCN": "2", "method_NToken": "38", "method_nesting_level": "0"}}}}}, "file_5": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "python\\ray\\tests\\BUILD", "file_new_name": "python\\ray\\tests\\BUILD", "file_complexity": {"file_NLOC": "None", "file_CCN": "None", "file_NToken": "None"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "193,194,195,196,197,198,199", "deleted_lines": null}}}, "file_6": {"file_change_type": "ADD", "file_Nmethod": 0, "file_old_name": "None", "file_new_name": "python\\ray\\tests\\test_coordinator_server.py", "file_complexity": {"file_NLOC": "210", "file_CCN": "8", "file_NToken": "1335"}}}}}