{"BR": {"BR_id": "7258", "BR_author": "waldroje", "BRopenT": "2020-02-21T03:17:24Z", "BRcloseT": "2020-04-23T02:16:31Z", "BR_text": {"BRsummary": "[tune][rllib] \"node manager has mistakenly been marked dead by the monitor\" - from long running PBT", "BRdescription": "\n <denchmark-h:h3>What is the problem?</denchmark-h>\n \n I was running PBT trials, and I thought after <denchmark-link:https://github.com/ray-project/ray/pull/7201>#7201</denchmark-link>\n  it might succeed, but after running for a decent amount of time, it crashed with the following.\n <denchmark-code>== Status == \n Memory usage on this node: 58.9/184.7 GiB\n PopulationBasedTraining: 15 checkpoints, 10 perturbs\n Resources requested: 65/144 CPUs, 0.0/0 GPUs, 0.0/294.97 GiB heap, 0.0/43.65 GiB objects\n Result logdir: /home/ubuntu/ray_results/2020/2/20/220836984702/ip-172-31-5-2/front-time\n Number of trials: 8 (7 PAUSED, 1 RUNNING)\n +------------------------------+----------+------------------+--------+------------------+-------------+-----------+\n | Trial name                   | status   | loc              |   iter |   total time (s) |   timesteps |    reward |\n |------------------------------+----------+------------------+--------+------------------+-------------+-----------|\n | IMPALA_make_fpc_env_8b193446 | PAUSED   |                  |     50 |          2789.58 |     4183168 |  0.930425 |\n | IMPALA_make_fpc_env_8b193447 | PAUSED   |                  |     50 |          2977.83 |     4131712 | -0.544352 |\n | IMPALA_make_fpc_env_8b193448 | PAUSED   |                  |     50 |          2197.65 |     4217344 | -0.161039 |\n | IMPALA_make_fpc_env_8b193449 | PAUSED   |                  |     50 |          1814.8  |     5104000 |  0.203119 |\n | IMPALA_make_fpc_env_8b19344a | PAUSED   |                  |     50 |          2787.9  |     4180736 | -0.470465 |\n | IMPALA_make_fpc_env_8b19344b | PAUSED   |                  |     50 |          3216.9  |     4077312 | -7.46704  |\n | IMPALA_make_fpc_env_8b19344c | RUNNING  | 172.31.5.2:66208 |     49 |          2022.33 |     4590464 | -0.598401 |\n | IMPALA_make_fpc_env_8b19344d | PAUSED   |                  |     40 |          1456.58 |     4065408 | -2.61389  |\n +------------------------------+----------+------------------+--------+------------------+-------------+-----------+                                                                                                                                                                                                                                                                                                                                                                                                    \n E0221 00:59:27.506393 21075 task_manager.cc:165] Task failed: IOError: sent task to dead actor: Type=ACTOR_TASK, Language=PYTHON, function_descriptor={type=PythonFunctionDescriptor, module_name=ray.rllib.agents.trainer_template, class_name=IMPALA, function_name=stop, function_hash=}, task_id=53576960b66fdad15bba91dc0100, job_id=0100 , num_args=0, num_returns=2, actor_task_spec={actor_id=5bba91dc0100, actor_caller_id=ffffffffffffffffffffffff0100, actor_counter=11}                                    \n E0221 00:59:45.873986 21150 task_manager.cc:147] 3 retries left for task fffffffffffffffff9c5fe5b0100, attempting to resubmit.                                          \n E0221 00:59:45.874063 21150 core_worker.cc:196] Will resubmit task after a 5 second delay: Type=ACTOR_CREATION_TASK, Language=PYTHON, function_descriptor={type=PythonF unctionDescriptor, module_name=ray.rllib.agents.trainer_template, class_name=IMPALA, function_name=__init__, function_hash=230012600}, task_id=fffffffffffffffff9c5fe5b 0100, job_id=0100, num_args=4, num_returns=1, actor_creation_task_spec={actor_id=f9c5fe5b0100, max_reconstructions=0, is_direct_call=1, max_concurrency=1, is_asyncio_a ctor=0, is_detached=0}                                                                                                                                                  \n F0221 00:59:51.171756 21150 direct_task_transport.cc:153] Lost connection with local raylet. \n Error: IOError: 14: failed to connect to all addresses                    \n  *** Check failure stack trace: *** \n @     0x7feef24a5d8d  google::LogMessage::Fail()\n @     0x7feef24a71fc  google::LogMessage::SendToLog()\n @     0x7feef24a5a69  google::LogMessage::Flush()\n @     0x7feef24a5c81  google::LogMessage::~LogMessage()\n @     0x7feef2252fa9  ray::RayLog::~RayLog()\n @     0x7feef213e349  ray::CoreWorkerDirectTaskSubmitter::RetryLeaseRequest()\n @     0x7feef2140b07 _ZNSt17_Function_handlerIFvRKN3ray6StatusERKNS0_3rpc23RequestWorkerLeaseReplyEEZNS0_29CoreWorkerDirectTaskSubmitter24RequestNewWorkerIfNeededERKSt5tupleIIiSt6vectorINS0_8ObjectIDESaISC_EENS0_7ActorIDEEEPKNS4_7AddressEEUlS3_S7_E_E9_M_invokeERKSt9_Any_dataS3_S7_\n @     0x7feef2177ea5  ray::rpc::ClientCallImpl<>::OnReplyReceived()                                                                                                     @     0x7feef2106993 _ZN5boost4asio6detail18completion_handlerIZN3ray3rpc17ClientCallManager29PollEventsFromCompletionQueueEiEUlvE_E11do_completeEPvPNS1_19schedul er_operationERKNS_6system10error_codeEm\n @     0x7feef2104e35  boost::asio::detail::scheduler::run()\n @     0x7feef210a3b3  ray::CoreWorker::RunIOService()\n @     0x7fee4ce789e0  (unknown)\n @     0x7feef6db56db  start_thread\n @     0x7feef70ee88f  clone\n Aborted (core dumped)\n --\n </denchmark-code>\n \n Any insight? I'm running 2 x c5.18xlarge, no gpus, as my custom model is not very deep, and I've run this successfully in the past, definitely on 0,7,7,, but have generally been getting failure ever since 0.8.0,\n A couple items from logs... working up from bottom in terms of recent output.\n raylet.out\n <denchmark-code>F0221 00:59:33.108211  4371 node_manager.cc:472]  Check failed: node_id != self_node_id_ Exiting because this node manager has mistakenly been marked dead by the monitor.\n --\n \n </denchmark-code>\n \n python-driver\n <denchmark-code>I0221 00:58:42.699936 21150 direct_actor_transport.cc:101] Failing pending tasks for actor a63d60130100\n I0221 00:58:42.699982 21150 core_worker.cc:897] received notification on actor, state=2, actor_id: a63d60130100, ip address: 172.31.5.2, port: 42913, worker_id: 4537e1 998f60fa3e5576a978b514b23fa9ac5713, raylet_id: c32ef7252b22fde98d0adc211081baa441a44b37\n I0221 00:58:42.723261 21150 direct_task_transport.cc:34] Connected to 172.31.5.2:38085\n I0221 00:58:47.063997 21150 core_worker.cc:897] received notification on actor, state=0, actor_id: 7982f88e0100, ip address: 172.31.5.2, port: 38085, worker_id: 47caa0 115cb69ec7c8bb3f7ffd21c1b0925dbaed, raylet_id: c32ef7252b22fde98d0adc211081baa441a44b37\n I0221 00:59:18.804953 21150 direct_actor_transport.cc:101] Failing pending tasks for actor 7982f88e0100\n I0221 00:59:18.804987 21150 core_worker.cc:897] received notification on actor, state=2, actor_id: 7982f88e0100, ip address: 172.31.5.2, port: 38085, worker_id: 47caa0 115cb69ec7c8bb3f7ffd21c1b0925dbaed, raylet_id: c32ef7252b22fde98d0adc211081baa441a44b37\n I0221 00:59:18.805001 21150 direct_actor_transport.cc:101] Failing pending tasks for actor 5bba91dc0100\n I0221 00:59:18.805004 21150 core_worker.cc:897] received notification on actor, state=2, actor_id: 5bba91dc0100, ip address: 172.31.5.2, port: 37067, worker_id: 9c5f44 9e201ec97bb8ccc771ff560db5a463ef56, raylet_id: c32ef7252b22fde98d0adc211081baa441a44b37\n E0221 00:59:19.567294 21075 task_manager.cc:165] Task failed: IOError: sent task to dead actor: Type=ACTOR_TASK, Language=PYTHON, function_descriptor={type=PythonFunct ionDescriptor, module_name=ray.rllib.agents.trainer_template, class_name=IMPALA, function_name=save_to_object, function_hash=}, task_id=4703b247b808e1c97982f88e0100, j ob_id=0100, num_args=0, num_returns=2, actor_task_spec={actor_id=7982f88e0100, actor_caller_id=ffffffffffffffffffffffff0100, actor_counter=3}\n E0221 00:59:19.571149 21075 task_manager.cc:165] Task failed: IOError: sent task to dead actor: Type=ACTOR_TASK, Language=PYTHON, function_descriptor={type=PythonFunct ionDescriptor, module_name=ray.rllib.agents.trainer_template, class_name=IMPALA, function_name=stop, function_hash=}, task_id=4d47f048bdbaeda87982f88e0100, job_id=0100 , num_args=0, num_returns=2, actor_task_spec={actor_id=7982f88e0100, actor_caller_id=ffffffffffffffffffffffff0100, actor_counter=4}\n W0221 00:59:20.355378 21075 plasma_store_provider.cc:66] Trying to put an object that already existed in plasma: ab2b067417969e8c4756862d010000c801000000.\n W0221 00:59:21.368199 21075 plasma_store_provider.cc:66] Trying to put an object that already existed in plasma: 35ba21f43e8607d08778027a010000c801000000.\n W0221 00:59:22.377468 21075 plasma_store_provider.cc:66] Trying to put an object that already existed in plasma: bdd16c3b71214fe0686a406a010000c801000000.\n W0221 00:59:23.761042 21075 plasma_store_provider.cc:66] Trying to put an object that already existed in plasma: acd84b982f24b7602203123e010000c801000000.\n W0221 00:59:25.134455 21075 plasma_store_provider.cc:66] Trying to put an object that already existed in plasma: d271658bf2072ba67132dc3a010000c801000000.\n W0221 00:59:26.955770 21075 plasma_store_provider.cc:66] Trying to put an object that already existed in plasma: 3ab66d48d45f6d4ebc823686010000c801000000.\n W0221 00:59:27.456938 21075 plasma_store_provider.cc:66] Trying to put an object that already existed in plasma: 525ad1491b5cce6f34efea21010000c801000000.\n E0221 00:59:27.506393 21075 task_manager.cc:165] Task failed: IOError: sent task to dead actor: Type=ACTOR_TASK, Language=PYTHON, function_descriptor={type=PythonFunct ionDescriptor, module_name=ray.rllib.agents.trainer_template, class_name=IMPALA, function_name=stop, function_hash=}, task_id=53576960b66fdad15bba91dc0100, job_id=0100 , num_args=0, num_returns=2, actor_task_spec={actor_id=5bba91dc0100, actor_caller_id=ffffffffffffffffffffffff0100, actor_counter=11}\n I0221 00:59:31.302026 21150 direct_task_transport.cc:34] Connected to 172.31.5.2:41377\n E0221 00:59:45.873986 21150 task_manager.cc:147] 3 retries left for task fffffffffffffffff9c5fe5b0100, attempting to resubmit.\n E0221 00:59:45.874063 21150 core_worker.cc:196] Will resubmit task after a 5 second delay: Type=ACTOR_CREATION_TASK, Language=PYTHON, function_descriptor={type=PythonF unctionDescriptor, module_name=ray.rllib.agents.trainer_template, class_name=IMPALA, function_name=__init__, function_hash=230012600}, task_id=fffffffffffffffff9c5fe5b 0100, job_id=0100, num_args=4, num_returns=1, actor_creation_task_spec={actor_id=f9c5fe5b0100, max_reconstructions=0, is_direct_call=1, max_concurrency=1, is_asyncio_a ctor=0, is_detached=0}\n I0221 00:59:45.874127 21150 raylet_client.cc:364] Error returning worker: IOError: 14: failed to connect to all addresses\n F0221 00:59:51.171756 21150 direct_task_transport.cc:153] Lost connection with local raylet. Error: IOError: 14: failed to connect to all addresses\n --\n </denchmark-code>\n \n Happy to attach more info if you think it will help... let me know.  I can't provide scripts as it's all off custom models/envs...\n Ray version and other system information (Python version, TensorFlow version, OS):\n ray 0.9.0, python 3.6.8, tensorflow 2.1, aws ubuntu 18.04\n <denchmark-h:h3>Reproduction (REQUIRED)</denchmark-h>\n \n Please provide a script that can be run to reproduce the issue. The script should have no external library dependencies (i.e., use fake or mock data / environments):\n If we cannot run your script, we cannot fix your issue.\n \n  I have verified my script runs in a clean environment and reproduces the issue.\n [x ] I have verified the issue also occurs with the latest wheels.\n \n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "waldroje", "commentT": "2020-02-21T18:18:08Z", "comment_text": "\n \t\tcc <denchmark-link:https://github.com/edoakes>@edoakes</denchmark-link>\n  <denchmark-link:https://github.com/ericl>@ericl</denchmark-link>\n \n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "waldroje", "commentT": "2020-02-21T19:25:01Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/waldroje>@waldroje</denchmark-link>\n  can you make a reproduction script with a standard gym env?\n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "waldroje", "commentT": "2020-02-21T19:57:00Z", "comment_text": "\n \t\ti'll try and see if I can replicate the behavior... will revert\n \t\t"}, "comments_3": {"comment_id": 4, "comment_author": "waldroje", "commentT": "2020-02-25T12:34:34Z", "comment_text": "\n \t\tSo.. I'm going back to square one, and going to build up from simple cases to more complex.... I have installed 0.8.2,\n I created a simple pbt with a toy gym env that I can use in more complex cases... but I'm getting errors on what appears to be checkpoint intervals on the most basic case.  It seems the fetch_result is returning a checkpoint string rather than a result dictionary\n Do you get the same behavior?\n <denchmark-code>Traceback (most recent call last):\n   File \"/home/svc-tai-dev/virt/algo_36/lib64/python3.6/site-packages/ray/tune/trial_runner.py\", line 536, in _process_trial_save\n     trial.on_checkpoint(trial.saving_to)\n   File \"/home/svc-tai-dev/virt/algo_36/lib64/python3.6/site-packages/ray/tune/trial.py\", line 400, in on_checkpoint\n     if not os.path.exists(checkpoint.value):\n   File \"/usr/lib64/python3.6/genericpath.py\", line 19, in exists\n     os.stat(path)\n TypeError: stat: path should be string, bytes, os.PathLike or integer, not dict\n </denchmark-code>\n \n <denchmark-link:https://github.com/ray-project/ray/files/4249964/pbt_dqn_test.zip>pbt_dqn_test.zip</denchmark-link>\n \n \t\t"}, "comments_4": {"comment_id": 5, "comment_author": "waldroje", "commentT": "2020-02-29T17:16:35Z", "comment_text": "\n \t\tI tested the attached script from my previous post on the latest wheel and it still errors... any ideas on this?\n \t\t"}, "comments_5": {"comment_id": 6, "comment_author": "waldroje", "commentT": "2020-02-29T17:58:59Z", "comment_text": "\n \t\tOK thanks a lot for the script! Let me try running this; I think this could be an bug with how we handle checkpoints.\n cc <denchmark-link:https://github.com/ujvl>@ujvl</denchmark-link>\n \n BTW, can you join the Ray slack so we can communicate faster?\n \t\t"}, "comments_6": {"comment_id": 7, "comment_author": "waldroje", "commentT": "2020-02-29T18:43:40Z", "comment_text": "\n \t\tfwiw... i see the problem in trial_runner._process_trial_save where\n checkpoint_value = self.trial_executor.fetch_result(trial) \n where checkpoint_value is supposed to be a path... but sometimes comes back as trial results... which then cascades into the errors...\n yes, I will get up on Slack...\n \t\t"}, "comments_7": {"comment_id": 8, "comment_author": "waldroje", "commentT": "2020-03-01T10:57:43Z", "comment_text": "\n \t\tlooks like an edge case where the checkpoint interval and perturbation interval coincide, causing PBT to restart the trial (resulting in a train call dispatch) and tune to dispatch a save call in the same step. which violates the invariant that only 1 future per trial is queued.\n imo we should consider refactoring pbt in a way that isn't directly interacting with the executor. like at most it should be calling back into trial_runner\n as a more immediate fix we could just check the type of the return value before figuring out how to process it (ie before calling process_{save/train/restore}). or avoid calling save altogether if there's a future for the trial currently queued.\n i prefer the former but <denchmark-link:https://github.com/richardliaw>@richardliaw</denchmark-link>\n  lmk if you have any other ideas i can push a quick fix\n \t\t"}, "comments_8": {"comment_id": 9, "comment_author": "waldroje", "commentT": "2020-03-01T23:57:37Z", "comment_text": "\n \t\tShouldn't the immediate fix be that PBT has a way to call \"save\" without affecting the event loop?\n \t\t"}, "comments_9": {"comment_id": 10, "comment_author": "waldroje", "commentT": "2020-03-02T00:30:04Z", "comment_text": "\n \t\tpbt shouldn't be responsible for FT (memory checkpoints already don't affect the event loop). if you mean give PBT a way to start/restore trials without affecting the event loop then i agree\n \t\t"}, "comments_10": {"comment_id": 11, "comment_author": "waldroje", "commentT": "2020-03-21T15:04:20Z", "comment_text": "\n \t\tIs there a quick fix on this that you can suggest which would enable me to use pbt on the current master?\n \t\t"}, "comments_11": {"comment_id": 12, "comment_author": "waldroje", "commentT": "2020-04-22T03:06:23Z", "comment_text": "\n \t\tWe just merged a fix - so the second issue in the thread should be resolved. <denchmark-link:https://github.com/waldroje>@waldroje</denchmark-link>\n  are you still seeing this issue?\n \t\t"}, "comments_12": {"comment_id": 13, "comment_author": "waldroje", "commentT": "2020-04-22T03:19:51Z", "comment_text": "\n \t\tI saw that come through and merged it in and kicked off a run earlier\u2026 so far no problems, will let you know if it finishes w/ no problems.\n \n On Apr 21, 2020, at 11:06 PM, Richard Liaw <notifications@github.com> wrote:\n \n \n We just merged a fix - so the second issue in the thread should be resolved. <denchmark-link:https://github.com/waldroje>@waldroje</denchmark-link>\n  <<denchmark-link:https://github.com/waldroje>https://github.com/waldroje</denchmark-link>\n > are you still seeing this issue?\n \n \u2014\n You are receiving this because you were mentioned.\n Reply to this email directly, view it on GitHub <<denchmark-link:https://github.com/ray-project/ray/issues/7258#issuecomment-617521371>#7258 (comment)</denchmark-link>\n >, or unsubscribe <<denchmark-link:https://github.com/notifications/unsubscribe-auth/AHSHWMPA2V6FJJWNGFVGD73RNZNLZANCNFSM4KY3LNVA>https://github.com/notifications/unsubscribe-auth/AHSHWMPA2V6FJJWNGFVGD73RNZNLZANCNFSM4KY3LNVA</denchmark-link>\n >.\n \t\t"}, "comments_13": {"comment_id": 14, "comment_author": "waldroje", "commentT": "2020-04-22T04:04:06Z", "comment_text": "\n \t\tAwesome! sorry for the delay.\n <denchmark-link:#>\u2026</denchmark-link>\n \n \n On Tue, Apr 21, 2020 at 8:20 PM waldroje ***@***.***> wrote:\n  I saw that come through and merged it in and kicked off a run earlier\u2026 so\n  far no problems, will let you know if it finishes w/ no problems.\n \n  On Apr 21, 2020, at 11:06 PM, Richard Liaw ***@***.***>\n  wrote:\n \n \n  We just merged a fix - so the second issue in the thread should be\n  resolved. @waldroje <https://github.com/waldroje> are you still seeing\n  this issue?\n \n  \u2014\n  You are receiving this because you were mentioned.\n  Reply to this email directly, view it on GitHub <\n  #7258 (comment)>,\n  or unsubscribe <\n  https://github.com/notifications/unsubscribe-auth/AHSHWMPA2V6FJJWNGFVGD73RNZNLZANCNFSM4KY3LNVA\n  >.\n \n \n  \u2014\n  You are receiving this because you were mentioned.\n  Reply to this email directly, view it on GitHub\n  <#7258 (comment)>,\n  or unsubscribe\n  <https://github.com/notifications/unsubscribe-auth/ABCRZZP6X62Q2CUW45B3MM3RNZO6HANCNFSM4KY3LNVA>\n  .\n \n \n \n \t\t"}, "comments_14": {"comment_id": 15, "comment_author": "waldroje", "commentT": "2020-04-23T01:31:52Z", "comment_text": "\n \t\tNo issues after running all day\u2026 much appreciated!\n <denchmark-link:#>\u2026</denchmark-link>\n \n \n On Apr 22, 2020, at 12:04 AM, Richard Liaw ***@***.***> wrote:\n \n  Awesome! sorry for the delay.\n \n  On Tue, Apr 21, 2020 at 8:20 PM waldroje ***@***.***> wrote:\n \n  > I saw that come through and merged it in and kicked off a run earlier\u2026 so\n  > far no problems, will let you know if it finishes w/ no problems.\n  >\n  > On Apr 21, 2020, at 11:06 PM, Richard Liaw ***@***.***>\n  > wrote:\n  >\n  >\n  > We just merged a fix - so the second issue in the thread should be\n  > resolved. @waldroje <https://github.com/waldroje> are you still seeing\n  > this issue?\n  >\n  > \u2014\n  > You are receiving this because you were mentioned.\n  > Reply to this email directly, view it on GitHub <\n  > #7258 (comment)>,\n  > or unsubscribe <\n  > https://github.com/notifications/unsubscribe-auth/AHSHWMPA2V6FJJWNGFVGD73RNZNLZANCNFSM4KY3LNVA\n  > >.\n  >\n  >\n  > \u2014\n  > You are receiving this because you were mentioned.\n  > Reply to this email directly, view it on GitHub\n  > <#7258 (comment)>,\n  > or unsubscribe\n  > <https://github.com/notifications/unsubscribe-auth/ABCRZZP6X62Q2CUW45B3MM3RNZO6HANCNFSM4KY3LNVA>\n  > .\n  >\n  \u2014\n  You are receiving this because you were mentioned.\n  Reply to this email directly, view it on GitHub, or unsubscribe.\n \n \n \n \t\t"}, "comments_15": {"comment_id": 16, "comment_author": "waldroje", "commentT": "2020-04-23T02:16:30Z", "comment_text": "\n \t\tAmazing! thanks for the long long wait.\n \t\t"}}}, "commit": {"commit_id": "708dff6d8f7dd6f7919e06c1845f1fea0cca5b89", "commit_author": "Ujval Misra", "commitT": "2020-04-20 15:10:36-07:00", "commit_complexity": {"commit_NLOC": "0.4235294117647059", "commit_CCN": "0.9647058823529412", "commit_Nprams": "0.8470588235294118"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "python\\ray\\tune\\durable_trainable.py", "file_new_name": "python\\ray\\tune\\durable_trainable.py", "file_complexity": {"file_NLOC": "60", "file_CCN": "9", "file_NToken": "303"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": null, "deleted_lines": "60", "method_info": {"method_name": "save", "method_params": "self,checkpoint_dir", "method_startline": "41", "method_endline": "64", "method_complexity": {"method_NLOC": "9", "method_CCN": "3", "method_NToken": "72", "method_nesting_level": "1"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "86,87,88,89,90,91,92,93", "deleted_lines": "85,86", "method_info": {"method_name": "delete_checkpoint", "method_params": "self,checkpoint_path", "method_startline": "80", "method_endline": "94", "method_complexity": {"method_NLOC": "10", "method_CCN": "2", "method_NToken": "58", "method_nesting_level": "1"}}}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "python\\ray\\tune\\examples\\pbt_example.py", "file_new_name": "python\\ray\\tune\\examples\\pbt_example.py", "file_complexity": {"file_NLOC": "97", "file_CCN": "8", "file_NToken": "467"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "111", "deleted_lines": null}}}, "file_2": {"file_change_type": "MODIFY", "file_Nmethod": 7, "file_old_name": "python\\ray\\tune\\ray_trial_executor.py", "file_new_name": "python\\ray\\tune\\ray_trial_executor.py", "file_complexity": {"file_NLOC": "498", "file_CCN": "115", "file_NToken": "3296"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "216,226,243", "deleted_lines": "216,242", "method_info": {"method_name": "_start_trial", "method_params": "self,trial,checkpoint,runner,train", "method_startline": "216", "method_endline": "244", "method_complexity": {"method_NLOC": "14", "method_CCN": "7", "method_NToken": "133", "method_nesting_level": "1"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "347,348", "deleted_lines": "345,346,347,348", "method_info": {"method_name": "reset_trial", "method_params": "self,trial,new_config,new_experiment_tag", "method_startline": "342", "method_endline": "366", "method_complexity": {"method_NLOC": "15", "method_CCN": "2", "method_NToken": "75", "method_nesting_level": "1"}}}, "hunk_2": {"Ismethod": 1, "added_lines": "216,226,243", "deleted_lines": "216,242", "method_info": {"method_name": "_start_trial", "method_params": "self,trial,checkpoint,runner", "method_startline": "216", "method_endline": "243", "method_complexity": {"method_NLOC": "14", "method_CCN": "6", "method_NToken": "127", "method_nesting_level": "1"}}}, "hunk_3": {"Ismethod": 1, "added_lines": "636,644,684", "deleted_lines": "636,683,684", "method_info": {"method_name": "restore", "method_params": "self,trial,checkpoint", "method_startline": "636", "method_endline": "684", "method_complexity": {"method_NLOC": "32", "method_CCN": "8", "method_NToken": "201", "method_nesting_level": "1"}}}, "hunk_4": {"Ismethod": 1, "added_lines": "636,644,684,685,686,687,688,689", "deleted_lines": "636,683,684", "method_info": {"method_name": "restore", "method_params": "self,trial,checkpoint,block", "method_startline": "636", "method_endline": "689", "method_complexity": {"method_NLOC": "35", "method_CCN": "9", "method_NToken": "216", "method_nesting_level": "1"}}}, "hunk_5": {"Ismethod": 1, "added_lines": "282,291,295", "deleted_lines": "281,293", "method_info": {"method_name": "start_trial", "method_params": "self,trial,checkpoint", "method_startline": "281", "method_endline": "305", "method_complexity": {"method_NLOC": "16", "method_CCN": "3", "method_NToken": "106", "method_nesting_level": "1"}}}, "hunk_6": {"Ismethod": 1, "added_lines": "282,291,295", "deleted_lines": "293", "method_info": {"method_name": "start_trial", "method_params": "self,trial,checkpoint,train", "method_startline": "282", "method_endline": "307", "method_complexity": {"method_NLOC": "16", "method_CCN": "3", "method_NToken": "114", "method_nesting_level": "1"}}}}}, "file_3": {"file_change_type": "MODIFY", "file_Nmethod": 3, "file_old_name": "python\\ray\\tune\\schedulers\\pbt.py", "file_new_name": "python\\ray\\tune\\schedulers\\pbt.py", "file_complexity": {"file_NLOC": "314", "file_CCN": "47", "file_NToken": "1623"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": null, "deleted_lines": "369,371", "method_info": {"method_name": "choose_trial_to_run", "method_params": "self,trial_runner", "method_startline": "364", "method_endline": "379", "method_complexity": {"method_NLOC": "9", "method_CCN": "5", "method_NToken": "79", "method_nesting_level": "1"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "326,327,328,329,330,332,333,338,339", "deleted_lines": "304,306,330,335", "method_info": {"method_name": "_exploit", "method_params": "self,trial_executor,trial,trial_to_clone", "method_startline": "299", "method_endline": "343", "method_complexity": {"method_NLOC": "32", "method_CCN": "4", "method_NToken": "199", "method_nesting_level": "1"}}}, "hunk_2": {"Ismethod": 1, "added_lines": null, "deleted_lines": "345,347", "method_info": {"method_name": "_quantiles", "method_params": "self", "method_startline": "341", "method_endline": "362", "method_complexity": {"method_NLOC": "15", "method_CCN": "6", "method_NToken": "137", "method_nesting_level": "1"}}}}}, "file_4": {"file_change_type": "MODIFY", "file_Nmethod": 15, "file_old_name": "python\\ray\\tune\\tests\\test_trial_scheduler.py", "file_new_name": "python\\ray\\tune\\tests\\test_trial_scheduler.py", "file_complexity": {"file_NLOC": "1129", "file_CCN": "181", "file_NToken": "9773"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "1177,1178", "deleted_lines": null, "method_info": {"method_name": "testCheckpointDict._train", "method_params": "self", "method_startline": "1177", "method_endline": "1178", "method_complexity": {"method_NLOC": "2", "method_CCN": "1", "method_NToken": "13", "method_nesting_level": "3"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "1174,1175", "deleted_lines": null, "method_info": {"method_name": "testCheckpointDict._setup", "method_params": "self,config", "method_startline": "1174", "method_endline": "1175", "method_complexity": {"method_NLOC": "2", "method_CCN": "1", "method_NToken": "16", "method_nesting_level": "3"}}}, "hunk_2": {"Ismethod": 1, "added_lines": "1183,1184", "deleted_lines": null, "method_info": {"method_name": "testCheckpointDict._restore", "method_params": "self,state", "method_startline": "1183", "method_endline": "1184", "method_complexity": {"method_NLOC": "2", "method_CCN": "1", "method_NToken": "12", "method_nesting_level": "3"}}}, "hunk_3": {"Ismethod": 1, "added_lines": "1142,1143", "deleted_lines": null, "method_info": {"method_name": "testCheckpointing._train", "method_params": "self", "method_startline": "1142", "method_endline": "1143", "method_complexity": {"method_NLOC": "2", "method_CCN": "1", "method_NToken": "13", "method_nesting_level": "3"}}}, "hunk_4": {"Ismethod": 1, "added_lines": "1180,1181", "deleted_lines": null, "method_info": {"method_name": "testCheckpointDict._save", "method_params": "self,path", "method_startline": "1180", "method_endline": "1181", "method_complexity": {"method_NLOC": "2", "method_CCN": "1", "method_NToken": "11", "method_nesting_level": "3"}}}, "hunk_5": {"Ismethod": 1, "added_lines": "190", "deleted_lines": "189", "method_info": {"method_name": "start_trial", "method_params": "self,trial,checkpoint_obj", "method_startline": "189", "method_endline": "192", "method_complexity": {"method_NLOC": "4", "method_CCN": "1", "method_NToken": "30", "method_nesting_level": "1"}}}, "hunk_6": {"Ismethod": 1, "added_lines": "1114,1115,1116,1117,1118,1119,1120,1121", "deleted_lines": null, "method_info": {"method_name": "basicSetup", "method_params": "self,resample_prob,explore,perturbation_interval,log_config,hyperparams,hyperparam_mutations,step_once", "method_startline": "1114", "method_endline": "1121", "method_complexity": {"method_NLOC": "8", "method_CCN": "1", "method_NToken": "35", "method_nesting_level": "1"}}}, "hunk_7": {"Ismethod": 1, "added_lines": "1145,1146,1147,1148,1149", "deleted_lines": null, "method_info": {"method_name": "testCheckpointing._save", "method_params": "self,path", "method_startline": "1145", "method_endline": "1149", "method_complexity": {"method_NLOC": "5", "method_CCN": "1", "method_NToken": "30", "method_nesting_level": "3"}}}, "hunk_8": {"Ismethod": 1, "added_lines": "1107,1108", "deleted_lines": null, "method_info": {"method_name": "setUp", "method_params": "self", "method_startline": "1107", "method_endline": "1108", "method_complexity": {"method_NLOC": "2", "method_CCN": "1", "method_NToken": "13", "method_nesting_level": "1"}}}, "hunk_9": {"Ismethod": 1, "added_lines": "1170,1171,1172,1173,1174,1175,1176,1177,1178,1179,1180,1181,1182,1183,1184,1185,1186,1187,1188,1189,1190,1191,1192,1193,1194,1195,1196,1197,1198,1199,1200,1201,1202,1203", "deleted_lines": null, "method_info": {"method_name": "testCheckpointDict", "method_params": "self", "method_startline": "1170", "method_endline": "1203", "method_complexity": {"method_NLOC": "23", "method_CCN": "2", "method_NToken": "113", "method_nesting_level": "1"}}}, "hunk_10": {"Ismethod": 1, "added_lines": "1138,1139,1140,1141,1142,1143,1144,1145,1146,1147,1148,1149,1150,1151,1152,1153,1154,1155,1156,1157,1158,1159,1160,1161,1162,1163,1164,1165,1166,1167,1168", "deleted_lines": null, "method_info": {"method_name": "testCheckpointing", "method_params": "self", "method_startline": "1138", "method_endline": "1168", "method_complexity": {"method_NLOC": "21", "method_CCN": "2", "method_NToken": "109", "method_nesting_level": "1"}}}, "hunk_11": {"Ismethod": 1, "added_lines": "200", "deleted_lines": null, "method_info": {"method_name": "restore", "method_params": "self,trial,checkpoint,block", "method_startline": "200", "method_endline": "201", "method_complexity": {"method_NLOC": "2", "method_CCN": "1", "method_NToken": "16", "method_nesting_level": "1"}}}, "hunk_12": {"Ismethod": 1, "added_lines": "200", "deleted_lines": "199", "method_info": {"method_name": "restore", "method_params": "self,trial,checkpoint", "method_startline": "199", "method_endline": "200", "method_complexity": {"method_NLOC": "2", "method_CCN": "1", "method_NToken": "12", "method_nesting_level": "1"}}}, "hunk_13": {"Ismethod": 1, "added_lines": "190", "deleted_lines": null, "method_info": {"method_name": "start_trial", "method_params": "self,trial,checkpoint_obj,train", "method_startline": "190", "method_endline": "193", "method_complexity": {"method_NLOC": "4", "method_CCN": "1", "method_NToken": "34", "method_nesting_level": "1"}}}, "hunk_14": {"Ismethod": 1, "added_lines": "1110,1111,1112", "deleted_lines": null, "method_info": {"method_name": "tearDown", "method_params": "self", "method_startline": "1110", "method_endline": "1112", "method_complexity": {"method_NLOC": "3", "method_CCN": "1", "method_NToken": "13", "method_nesting_level": "1"}}}}}, "file_5": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "python\\ray\\tune\\trainable.py", "file_new_name": "python\\ray\\tune\\trainable.py", "file_complexity": {"file_NLOC": "328", "file_CCN": "62", "file_NToken": "2081"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "189", "deleted_lines": "189", "method_info": {"method_name": "default_resource_request", "method_params": "cls,config", "method_startline": "186", "method_endline": "205", "method_complexity": {"method_NLOC": "2", "method_CCN": "1", "method_NToken": "10", "method_nesting_level": "1"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "559,560,561,562,563,564,565,566", "deleted_lines": null, "method_info": {"method_name": "training_iteration", "method_params": "self", "method_startline": "559", "method_endline": "566", "method_complexity": {"method_NLOC": "2", "method_CCN": "1", "method_NToken": "10", "method_nesting_level": "1"}}}}}, "file_6": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "python\\ray\\tune\\trial.py", "file_new_name": "python\\ray\\tune\\trial.py", "file_complexity": {"file_NLOC": "420", "file_CCN": "94", "file_NToken": "2474"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "111,194", "deleted_lines": "111,194,195"}}}, "file_7": {"file_change_type": "MODIFY", "file_Nmethod": 4, "file_old_name": "python\\ray\\tune\\trial_executor.py", "file_new_name": "python\\ray\\tune\\trial_executor.py", "file_complexity": {"file_NLOC": "113", "file_CCN": "36", "file_NToken": "686"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "215,224", "deleted_lines": "214", "method_info": {"method_name": "restore", "method_params": "self,trial,checkpoint", "method_startline": "214", "method_endline": "228", "method_complexity": {"method_NLOC": "3", "method_CCN": "1", "method_NToken": "18", "method_nesting_level": "1"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "75,82", "deleted_lines": "75", "method_info": {"method_name": "start_trial", "method_params": "self,trial,checkpoint", "method_startline": "75", "method_endline": "84", "method_complexity": {"method_NLOC": "3", "method_CCN": "1", "method_NToken": "18", "method_nesting_level": "1"}}}, "hunk_2": {"Ismethod": 1, "added_lines": "75,82", "deleted_lines": "75", "method_info": {"method_name": "start_trial", "method_params": "self,trial,checkpoint,train", "method_startline": "75", "method_endline": "85", "method_complexity": {"method_NLOC": "3", "method_CCN": "1", "method_NToken": "22", "method_nesting_level": "1"}}}, "hunk_3": {"Ismethod": 1, "added_lines": "215,224", "deleted_lines": null, "method_info": {"method_name": "restore", "method_params": "self,trial,checkpoint,block", "method_startline": "215", "method_endline": "230", "method_complexity": {"method_NLOC": "3", "method_CCN": "1", "method_NToken": "22", "method_nesting_level": "1"}}}}}}}}