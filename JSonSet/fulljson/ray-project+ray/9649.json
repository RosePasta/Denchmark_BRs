{"BR": {"BR_id": "9649", "BR_author": "ffbin", "BRopenT": "2020-07-23T03:22:26Z", "BRcloseT": "2020-07-24T21:09:06Z", "BR_text": {"BRsummary": "[GCS]Java testcase crash", "BRdescription": "\n <denchmark-h:h3>What is the problem?</denchmark-h>\n \n Testcase is MultiThreadingTest.\n Stack: [0x0000700002740000,0x0000700002840000],  sp=0x000070000283e190,  free space=1016k\n Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)\n C  [libcore_worker_library_java.dylib+0x18ccf0]  ZNSt3__113unordered_mapIN3ray7ActorIDENS_8functionIFvRKNS3_IFvNS1_6StatusEEEEEEENS_4hashIS2_EENS_8equal_toIS2_EENS_9allocatorINS_4pairIKS2_SA_EEEEEixERSH+0x70\n C  [libcore_worker_library_java.dylib+0x18c500]  _ZN3ray3gcs29ServiceBasedActorInfoAccessor14AsyncSubscribeERKNS_7ActorIDERKNSt3__18functionIFvS4_RKNS_3rpc14ActorTableDataEEEERKNS6_IFvNS_6StatusEEEE+0x3b0\n C  [libcore_worker_library_java.dylib+0x2dcef]  _ZN3ray12ActorManager14AddActorHandleENSt3__110unique_ptrINS_11ActorHandleENS1_14default_deleteIS3_EEEEbRKNS_6TaskIDERKNS1_12basic_stringIcNS1_11char_traitsIcEENS1_9allocatorIcEEEERKNS_3rpc7AddressERKNS_7ActorIDERKNS_8ObjectIDE+0x15f\n C  [libcore_worker_library_java.dylib+0x2e527]  _ZN3ray12ActorManager17AddNewActorHandleENSt3__110unique_ptrINS_11ActorHandleENS1_14default_deleteIS3_EEEERKNS_6TaskIDERKNS1_12basic_stringIcNS1_11char_traitsIcEENS1_9allocatorIcEEEERKNS_3rpc7AddressEb+0x107\n C  [libcore_worker_library_java.dylib+0x45c90]  _ZN3ray10CoreWorker11CreateActorERKNS_11RayFunctionERKNSt3__16vectorINS4_10unique_ptrINS_7TaskArgENS4_14default_deleteIS7_EEEENS4_9allocatorISA_EEEERKNS_20ActorCreationOptionsERKNS4_12basic_stringIcNS4_11char_traitsIcEENSB_IcEEEEPNS_7ActorIDE+0x4b0\n C  [libcore_worker_library_java.dylib+0x220bd]  Java_io_ray_runtime_task_NativeTaskSubmitter_nativeCreateActor+0x11d\n j  io.ray.runtime.task.NativeTaskSubmitter.nativeCreateActor(Lio/ray/runtime/functionmanager/FunctionDescriptor;ILjava/util/List;Lio/ray/api/options/ActorCreationOptions;)[B+0\n j  io.ray.runtime.task.NativeTaskSubmitter.createActor(Lio/ray/runtime/functionmanager/FunctionDescriptor;Ljava/util/List;Lio/ray/api/options/ActorCreationOptions;)Lio/ray/api/BaseActorHandle;+79\n j  io.ray.runtime.AbstractRayRuntime.createActorImpl(Lio/ray/runtime/functionmanager/FunctionDescriptor;[Ljava/lang/Object;Lio/ray/api/options/ActorCreationOptions;)Lio/ray/api/BaseActorHandle;+46\n j  io.ray.runtime.AbstractRayRuntime.createActor(Lio/ray/api/function/RayFunc;[Ljava/lang/Object;Lio/ray/api/options/ActorCreationOptions;)Lio/ray/api/ActorHandle;+27\n Ray version and other system information (Python version, TensorFlow version, OS):\n <denchmark-h:h3>Reproduction (REQUIRED)</denchmark-h>\n \n Please provide a script that can be run to reproduce the issue. The script should have no external library dependencies (i.e., use fake or mock data / environments):\n If we cannot run your script, we cannot fix your issue.\n \n  I have verified my script runs in a clean environment and reproduces the issue.\n  I have verified the issue also occurs with the latest wheels.\n \n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "ffbin", "commentT": "2020-07-24T21:09:06Z", "comment_text": "\n \t\tfixed?\n \t\t"}}}, "commit": {"commit_id": "d4324a4a8f886f60cd5f12356b97466e86a78b89", "commit_author": "fangfengbin", "commitT": "2020-07-24 15:36:49+08:00", "commit_complexity": {"commit_NLOC": "0.0", "commit_CCN": "1.0", "commit_Nprams": "0.0"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "src\\ray\\core_worker\\actor_manager.cc", "file_new_name": "src\\ray\\core_worker\\actor_manager.cc", "file_complexity": {"file_NLOC": "139", "file_CCN": "18", "file_NToken": "1011"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "92,93,94,95,96", "deleted_lines": "92,93,94", "method_info": {"method_name": "ray::ActorManager::AddActorHandle", "method_params": "actor_handle,is_owner_handle,caller_id,call_site,caller_address,actor_id,actor_creation_return_id", "method_startline": "74", "method_endline": "129", "method_complexity": {"method_NLOC": "40", "method_CCN": "4", "method_NToken": "245", "method_nesting_level": "1"}}}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "src\\ray\\core_worker\\actor_manager.h", "file_new_name": "src\\ray\\core_worker\\actor_manager.h", "file_complexity": {"file_NLOC": "46", "file_CCN": "1", "file_NToken": "327"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "135,136,137,138,139", "deleted_lines": "135,136"}}}}}}