{"BR": {"BR_id": "12575", "BR_author": "timurlenk07", "BRopenT": "2020-12-02T19:01:40Z", "BRcloseT": "2020-12-04T20:21:26Z", "BR_text": {"BRsummary": "[tune] register_env checks for FunctionType instead of callable", "BRdescription": "\n <denchmark-h:h3>What is the problem?</denchmark-h>\n \n In <denchmark-link:https://github.com/ray-project/ray/blob/master/python/ray/tune/registry.py#L85>registry.py</denchmark-link>\n  line 85, check is made for , while in my opinion any  should be accepted, like .\n Ray version and other system information (Python version, TensorFlow version, OS):\n Ubuntu 18\n Python 3.8\n ray=1.0.1.post1\n <denchmark-h:h3>Reproduction (REQUIRED)</denchmark-h>\n \n from functools import partial\n import ray\n from ray.tune.registry import register_env\n \n def launch_env_from_config(config, extra_config=None):\n     pass # create env from config and extra_config here\n model = None # Here a pytorch model is loaded\n ray.init()\n \n foo = partial(launch_env_from_config, extra_config={'model': model})\n register_env('MyEnv', foo)\n This results in:\n TypeError: ('Second argument must be a function.', functools.partial(...))\n This is somewhere between a feature request and a bug, but as a user I definitly expected register_env should work as well with functools.partial, as IMO the latter can do all a FuntionType can.\n I am not really familiar with the codebase so there might be reasons why check for FunctionType rather than callable is necessary.\n \n  I have verified my script runs in a clean environment and reproduces the issue.\n  I have verified the issue also occurs with the latest wheels.\n \n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "timurlenk07", "commentT": "2020-12-02T20:13:13Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/timurlenk07>@timurlenk07</denchmark-link>\n  good catch! Would you be interested in pushing a fix?\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "timurlenk07", "commentT": "2020-12-02T20:48:12Z", "comment_text": "\n \t\tSure, will do it :)\n \t\t"}}}, "commit": {"commit_id": "f965537ae9a0492eec6ddc50b9c89b76f99ec7b1", "commit_author": "Marci", "commitT": "2020-12-04 12:21:25-08:00", "commit_complexity": {"commit_NLOC": "None", "commit_CCN": "None", "commit_Nprams": "None"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "python\\ray\\tune\\registry.py", "file_new_name": "python\\ray\\tune\\registry.py", "file_complexity": {"file_NLOC": "105", "file_CCN": "32", "file_NToken": "737"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "82,85,86", "deleted_lines": "82,85,86", "method_info": {"method_name": "register_env", "method_params": "name,env_creator", "method_startline": "74", "method_endline": "87", "method_complexity": {"method_NLOC": "4", "method_CCN": "2", "method_NToken": "32", "method_nesting_level": "0"}}}}}}}}