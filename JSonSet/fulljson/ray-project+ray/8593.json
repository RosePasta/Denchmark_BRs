{"BR": {"BR_id": "8593", "BR_author": "ericl", "BRopenT": "2020-05-25T07:36:14Z", "BRcloseT": "2020-06-08T19:37:12Z", "BR_text": {"BRsummary": "Cannot overwrite named actor even after killing it", "BRdescription": "\n <denchmark-h:h3>What is the problem?</denchmark-h>\n \n Ray version and other system information (Python version, TensorFlow version, OS): Latest ray\n There doesn't seem to be a way to reuse an actor name.\n <denchmark-h:h3>Reproduction (REQUIRED)</denchmark-h>\n \n <denchmark-code>>>> b = Bar.options(name=\"bar\").remote()\n >>> b = ray.get_actor(\"bar\")\n >>> ray.kill(b)\n >>> b = Bar.options(name=\"bar\").remote()\n Traceback (most recent call last):\n   File \"<stdin>\", line 1, in <module>\n   File \"/home/eric/Desktop/ray/python/ray/actor.py\", line 397, in remote\n     return actor_cls._remote(args=args, kwargs=kwargs, **options)\n   File \"/home/eric/Desktop/ray/python/ray/actor.py\", line 496, in _remote\n     \"ray.get_actor('{name}')\".format(name=name))\n ValueError: The name bar is already taken.\n Please use a different name or get the existing\n actor using ray.get_actor('bar')\n </denchmark-code>\n \n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "ericl", "commentT": "2020-05-25T07:36:20Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/edoakes>@edoakes</denchmark-link>\n \n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "ericl", "commentT": "2020-05-25T08:01:26Z", "comment_text": "\n \t\tThis has been an issue for a while actually. I was planning to work on fixing this issue next sprint. Is it an urgent issue?\n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "ericl", "commentT": "2020-05-25T08:38:07Z", "comment_text": "\n \t\tIt's not urgent, but does seem like a regression from the previous experimental implementation of named actors.\n \t\t"}, "comments_3": {"comment_id": 4, "comment_author": "ericl", "commentT": "2020-05-25T18:30:46Z", "comment_text": "\n \t\tRelated issue here. <denchmark-link:https://github.com/ray-project/ray/issues/7591>#7591</denchmark-link>\n \n \t\t"}, "comments_4": {"comment_id": 5, "comment_author": "ericl", "commentT": "2020-05-28T21:58:01Z", "comment_text": "\n \t\tThis is urgent for <denchmark-link:https://github.com/allenyin55>@allenyin55</denchmark-link>\n  and we will work on it next week.\n \t\t"}}}, "commit": {"commit_id": "3388864768fa198f27496824407f9aee16256c2f", "commit_author": "SangBin Cho", "commitT": "2020-06-08 11:22:01-05:00", "commit_complexity": {"commit_NLOC": "0.11219512195121951", "commit_CCN": "0.751219512195122", "commit_Nprams": "1.0"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 9, "file_old_name": "python\\ray\\tests\\test_actor_advanced.py", "file_new_name": "python\\ray\\tests\\test_actor_advanced.py", "file_complexity": {"file_NLOC": "634", "file_CCN": "150", "file_NToken": "4223"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "788,789,790", "deleted_lines": null, "method_info": {"method_name": "test_detached_actor_cleanup_due_to_failure.kill_itself", "method_params": "self", "method_startline": "788", "method_endline": "790", "method_complexity": {"method_NLOC": "2", "method_CCN": "1", "method_NToken": "11", "method_nesting_level": "2"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "795,796,797,798,799,800,801,802,803,804,805,806", "deleted_lines": null, "method_info": {"method_name": "test_detached_actor_cleanup_due_to_failure.wait_until_actor_dead", "method_params": "handle", "method_startline": "795", "method_endline": "806", "method_complexity": {"method_NLOC": "12", "method_CCN": "3", "method_NToken": "80", "method_nesting_level": "1"}}}, "hunk_2": {"Ismethod": 1, "added_lines": "785,786", "deleted_lines": null, "method_info": {"method_name": "test_detached_actor_cleanup_due_to_failure.ping", "method_params": "self", "method_startline": "785", "method_endline": "786", "method_complexity": {"method_NLOC": "2", "method_CCN": "1", "method_NToken": "7", "method_nesting_level": "2"}}}, "hunk_3": {"Ismethod": 1, "added_lines": "702,703,704,705,706,707,708,709,710,711,712,713,714,715,716,717,718,719,720,721,722,723,724,725,726,727,728,729,730,731,732,733,734,735,736,737,738,739,740,741,742,743,744,745,746,747,748,749,750,751,752,753,754,755,756,757,758,759,760,761,762,763,764,765,766", "deleted_lines": null, "method_info": {"method_name": "test_detached_actor_cleanup", "method_params": "ray_start_regular", "method_startline": "702", "method_endline": "766", "method_complexity": {"method_NLOC": "37", "method_CCN": "1", "method_NToken": "51", "method_nesting_level": "0"}}}, "hunk_4": {"Ismethod": 1, "added_lines": "710,711,712,713,714,715,716,717,718,719,720,721,722,723,724,725,726,727", "deleted_lines": null, "method_info": {"method_name": "test_detached_actor_cleanup.create_and_kill_actor", "method_params": "actor_name", "method_startline": "710", "method_endline": "727", "method_complexity": {"method_NLOC": "15", "method_CCN": "3", "method_NToken": "115", "method_nesting_level": "1"}}}, "hunk_5": {"Ismethod": 1, "added_lines": "705,706", "deleted_lines": null, "method_info": {"method_name": "test_detached_actor_cleanup.ping", "method_params": "self", "method_startline": "705", "method_endline": "706", "method_complexity": {"method_NLOC": "2", "method_CCN": "1", "method_NToken": "7", "method_nesting_level": "2"}}}, "hunk_6": {"Ismethod": 1, "added_lines": "671,672,673", "deleted_lines": "671", "method_info": {"method_name": "test_detached_actor", "method_params": "ray_start_regular", "method_startline": "658", "method_endline": "699", "method_complexity": {"method_NLOC": "34", "method_CCN": "1", "method_NToken": "146", "method_nesting_level": "0"}}}, "hunk_7": {"Ismethod": 1, "added_lines": "778,779,780,781,782,783,784,785,786,787,788,789,790,791,792,793,794,795,796,797,798,799,800,801,802,803,804,805,806,807,808,809,810,811,812,813,814,815,816,817,818,819,820,821,822,823,824,825,826,827,828,829,830,831,832,833,834", "deleted_lines": null, "method_info": {"method_name": "test_detached_actor_cleanup_due_to_failure", "method_params": "ray_start_cluster", "method_startline": "778", "method_endline": "834", "method_complexity": {"method_NLOC": "30", "method_CCN": "2", "method_NToken": "179", "method_nesting_level": "0"}}}, "hunk_8": {"Ismethod": 1, "added_lines": "808,809", "deleted_lines": null, "method_info": {"method_name": "test_detached_actor_cleanup_due_to_failure.create_detached_actor_blocking", "method_params": "actor_name,schedule_in_second_node", "method_startline": "808", "method_endline": "809", "method_complexity": {"method_NLOC": "2", "method_CCN": "1", "method_NToken": "9", "method_nesting_level": "1"}}}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "python\\ray\\util\\named_actors.py", "file_new_name": "python\\ray\\util\\named_actors.py", "file_complexity": {"file_NLOC": "47", "file_CCN": "13", "file_NToken": "295"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "34,35,36,37,38,39,40,41", "deleted_lines": "33", "method_info": {"method_name": "_get_actor", "method_params": "name", "method_startline": "23", "method_endline": "42", "method_complexity": {"method_NLOC": "16", "method_CCN": "5", "method_NToken": "115", "method_nesting_level": "0"}}}}}, "file_2": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "src\\ray\\core_worker\\core_worker.cc", "file_new_name": "src\\ray\\core_worker\\core_worker.cc", "file_complexity": {"file_NLOC": "1611", "file_CCN": "278", "file_NToken": "12713"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "1383,1387,1388,1389,1390,1411,1412,1413,1414", "deleted_lines": "1383,1384,1385,1386,1387,1388,1412", "method_info": {"method_name": "ray::CoreWorker::GetNamedActorHandle", "method_params": "name,actor_handle", "method_startline": "1363", "method_endline": "1420", "method_complexity": {"method_NLOC": "45", "method_CCN": "5", "method_NToken": "376", "method_nesting_level": "1"}}}}}, "file_3": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "src\\ray\\gcs\\gcs_client\\service_based_accessor.cc", "file_new_name": "src\\ray\\gcs\\gcs_client\\service_based_accessor.cc", "file_complexity": {"file_NLOC": "1166", "file_CCN": "149", "file_NToken": "8642"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "16", "deleted_lines": null}}}, "file_4": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "src\\ray\\gcs\\gcs_server\\gcs_actor_manager.cc", "file_new_name": "src\\ray\\gcs\\gcs_server\\gcs_actor_manager.cc", "file_complexity": {"file_NLOC": "618", "file_CCN": "108", "file_NToken": "5122"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "660,661,662,663,664,665,666,667,672,673,674,675,676", "deleted_lines": "664", "method_info": {"method_name": "ray::gcs::GcsActorManager::ReconstructActor", "method_params": "actor_id,need_reschedule", "method_startline": "624", "method_endline": "686", "method_complexity": {"method_NLOC": "51", "method_CCN": "7", "method_NToken": "406", "method_nesting_level": "2"}}}}}, "file_5": {"file_change_type": "MODIFY", "file_Nmethod": 3, "file_old_name": "src\\ray\\gcs\\gcs_server\\test\\gcs_actor_manager_test.cc", "file_new_name": "src\\ray\\gcs\\gcs_server\\test\\gcs_actor_manager_test.cc", "file_complexity": {"file_NLOC": "405", "file_CCN": "19", "file_NToken": "3788"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "452,453,454,455,456,457,458,459,460,461,462,463,464,465,466,467,468,469,470,471,472,473,474,475,476,477,478,479,480,481,482,483,484,485,486,487,488,489", "deleted_lines": null, "method_info": {"method_name": "ray::TEST_F", "method_params": "GcsActorManagerTest,TestNamedActorDeletionNodeFailure", "method_startline": "452", "method_endline": "489", "method_complexity": {"method_NLOC": "29", "method_CCN": "1", "method_NToken": "289", "method_nesting_level": "1"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "412,413,414,415,416,417,418,419,420,421,422,423,424,425,426,427,428,429,430,431,432,433,434,435,436,437,438,439,440,441,442,443,444,445,446,447,448,449,450", "deleted_lines": null, "method_info": {"method_name": "ray::TEST_F", "method_params": "GcsActorManagerTest,TestNamedActorDeletionWorkerFailure", "method_startline": "412", "method_endline": "450", "method_complexity": {"method_NLOC": "30", "method_CCN": "1", "method_NToken": "302", "method_nesting_level": "1"}}}, "hunk_2": {"Ismethod": 1, "added_lines": "491,492,493,494,495,496,497,498,499,500,501,502,503,504,505,506,507,508,509,510,511,512,513,514,515,516,517,518,519,520,521,522,523,524,525,526,527,528,529,530,531", "deleted_lines": null, "method_info": {"method_name": "ray::TEST_F", "method_params": "GcsActorManagerTest,TestNamedActorDeletionNotHappendWhenReconstructed", "method_startline": "491", "method_endline": "531", "method_complexity": {"method_NLOC": "29", "method_CCN": "1", "method_NToken": "291", "method_nesting_level": "1"}}}}}}}}