{"BR": {"BR_id": "12859", "BR_author": "simon-mo", "BRopenT": "2020-12-15T00:45:03Z", "BRcloseT": "2020-12-15T17:39:40Z", "BR_text": {"BRsummary": "[Metric] Override error", "BRdescription": "\n <denchmark-h:h3>What is the problem?</denchmark-h>\n \n Ray version and other system information (Python version, TensorFlow version, OS):\n <denchmark-code>import ray\n from ray.util import metrics\n import time\n \n ray.init()\n \n a = metrics.Count(\"num_count\", description=\"\")\n b = metrics.Count(\"num_count\", description=\"\")\n \n a.record(1)\n b.record(1)\n \n time.sleep(10)\n </denchmark-code>\n \n shows\n <denchmark-code>Attempt to register measure with already-registered name: name: \"num_count\"; units: \"\"; description: \"\"; type: double\n </denchmark-code>\n \n <denchmark-h:h3>Reproduction (REQUIRED)</denchmark-h>\n \n Please provide a short code snippet (less than 50 lines if possible) that can be copy-pasted to reproduce the issue. The snippet should have no external library dependencies (i.e., use fake or mock data / environments):\n If the code snippet cannot be run by itself, the issue will be closed with \"needs-repro-script\".\n \n  I have verified my script runs in a clean environment and reproduces the issue.\n  I have verified the issue also occurs with the latest wheels.\n \n \t"}, "comments": {}}, "commit": {"commit_id": "b291dd44865ace133e5808cc221620b8f3290610", "commit_author": "Simon Mo", "commitT": "2020-12-15 09:39:39-08:00", "commit_complexity": {"commit_NLOC": "None", "commit_CCN": "None", "commit_Nprams": "None"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "python\\ray\\tests\\test_metrics_agent.py", "file_new_name": "python\\ray\\tests\\test_metrics_agent.py", "file_complexity": {"file_NLOC": "233", "file_CCN": "53", "file_NToken": "1658"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "301,302,303,304,305", "deleted_lines": null, "method_info": {"method_name": "test_metrics_override_shouldnt_warn.override", "method_params": "", "method_startline": "301", "method_endline": "305", "method_complexity": {"method_NLOC": "5", "method_CCN": "1", "method_NToken": "36", "method_nesting_level": "1"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "297,298,299,300,301,302,303,304,305,306,307,308,309,310,311,312,313,314,315,316,317,318,319,320,321", "deleted_lines": null, "method_info": {"method_name": "test_metrics_override_shouldnt_warn", "method_params": "ray_start_regular,log_pubsub", "method_startline": "297", "method_endline": "321", "method_complexity": {"method_NLOC": "15", "method_CCN": "5", "method_NToken": "99", "method_nesting_level": "0"}}}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "src\\ray\\stats\\metric.cc", "file_new_name": "src\\ray\\stats\\metric.cc", "file_complexity": {"file_NLOC": "111", "file_CCN": "23", "file_NToken": "793"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "89,90,91,92,93,94,95,96,97,98,99", "deleted_lines": "87,88", "method_info": {"method_name": "ray::stats::Metric::Record", "method_params": "value,tags", "method_startline": "83", "method_endline": "109", "method_complexity": {"method_NLOC": "21", "method_CCN": "4", "method_NToken": "166", "method_nesting_level": "2"}}}}}}}}