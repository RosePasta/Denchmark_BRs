{"BR": {"BR_id": "1189", "BR_author": "robertnishihara", "BRopenT": "2017-11-07T21:10:33Z", "BRcloseT": "2017-11-09T08:56:35Z", "BR_text": {"BRsummary": "Jenkins test failures in tune.py.", "BRdescription": "\n The Jenkins tests seem to be failing frequently with\n <denchmark-code>usage: tune.py [-h] [--redis-address REDIS_ADDRESS] [--num-cpus NUM_CPUS]\n                [--num-gpus NUM_GPUS] -f CONFIG_FILE\n tune.py: error: unrecognized arguments: --env mnist --stop {\"training_iteration\": 2}\n </denchmark-code>\n \n See <denchmark-link:https://amplab.cs.berkeley.edu/jenkins/job/Ray/2114/console>https://amplab.cs.berkeley.edu/jenkins/job/Ray/2114/console</denchmark-link>\n  for example.\n Any ideas <denchmark-link:https://github.com/ericl>@ericl</denchmark-link>\n  <denchmark-link:https://github.com/richardliaw>@richardliaw</denchmark-link>\n ?\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "robertnishihara", "commentT": "2017-11-07T22:26:29Z", "comment_text": "\n \t\tSo the culprint line is here:\n \n \n \n ray/test/jenkins_tests/run_multi_node_tests.sh\n \n \n         Lines 131 to 135\n       in\n       52888e4\n \n \n \n \n \n \n  docker run --shm-size=10G --memory=10G $DOCKER_SHA \\ \n \n \n \n      python /ray/python/ray/tune/tune.py \\ \n \n \n \n      --env mnist \\ \n \n \n \n      --stop '{\"training_iteration\": 2}' \\ \n \n \n \n      --config '{\"script_file_path\": \"/ray/python/ray/tune/examples/tune_mnist_ray.py\", \"activation\": \"relu\"}' \n \n \n \n \n \n I think the right fix should we keep a tune test is just to change it to\n python /ray/python/ray/tune/examples/tune_mnist_ray.py?\n Alternatively, I don't think we support CLI experiments anymore, so maybe it's fine to remove.\n <denchmark-link:https://github.com/ericl>@ericl</denchmark-link>\n \n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "robertnishihara", "commentT": "2017-11-07T22:32:40Z", "comment_text": "\n \t\tWhen you say \"we don't support CLI experiments anymore\", you mean that users are supposed to use the Python hyperparameter tuning API and not the tune.py script, right?\n And internally tune_mnist_ray.py uses the Pytho hyperparameter tuning API, right?\n If that's the case, then let's just do\n <denchmark-code>docker run --shm-size=10G --memory=10G $DOCKER_SHA \\ \n      python /ray/python/ray/tune/examples/tune_mnist_ray.py\n </denchmark-code>\n \n or something like that, which is what you are suggesting I think?\n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "robertnishihara", "commentT": "2017-11-07T22:47:46Z", "comment_text": "\n \t\tAh sorry. I meant that there is still a CLI, but not one like before. Now,\n `tune.py` can only be used either with a YAML/JSON file, rather than\n specifying all the experiment parameters in a series of flags.\n Alternatively, users can use the Python API.\n \n `tune_mnist_ray.py` uses the Python API internally, and the latter\n suggestion is correct.\n <denchmark-link:#>\u2026</denchmark-link>\n \n \n On Tue, Nov 7, 2017 at 2:32 PM, Robert Nishihara ***@***.***> wrote:\n  When you say \"we don't support CLI experiments anymore\", you mean that\n  users are supposed to use the Python hyperparameter tuning API and not the\n  tune.py script, right?\n \n  And internally tune_mnist_ray.py uses the Pytho hyperparameter tuning\n  API, right?\n \n  If that's the case, then let's just do\n \n  docker run --shm-size=10G --memory=10G $DOCKER_SHA \\\n       python /ray/python/ray/tune/examples/tune_mnist_ray.py\n \n  or something like that, which is what you are suggesting I think?\n \n  \u2014\n  You are receiving this because you were mentioned.\n  Reply to this email directly, view it on GitHub\n  <#1189 (comment)>,\n  or mute the thread\n  <https://github.com/notifications/unsubscribe-auth/AEUc5buU2xEhBhidCnBOv41wOWlTPQHsks5s0NqJgaJpZM4QVc7C>\n  .\n \n \n \n \t\t"}, "comments_3": {"comment_id": 4, "comment_author": "robertnishihara", "commentT": "2017-11-09T08:56:35Z", "comment_text": "\n \t\tFixed by <denchmark-link:https://github.com/ray-project/ray/pull/1194>#1194</denchmark-link>\n .\n \t\t"}}}, "commit": {"commit_id": "6197b260b8512379d5bb177d21566bad12cbe9e3", "commit_author": "Richard Liaw", "commitT": "2017-11-09 00:56:20-08:00", "commit_complexity": {"commit_NLOC": "None", "commit_CCN": "None", "commit_Nprams": "None"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "python\\ray\\tune\\examples\\tune_mnist_ray.py", "file_new_name": "python\\ray\\tune\\examples\\tune_mnist_ray.py", "file_complexity": {"file_NLOC": "130", "file_CCN": "10", "file_NToken": "1100"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "218,219,220,221,222,223,224,225,226", "deleted_lines": null}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "test\\jenkins_tests\\run_multi_node_tests.sh", "file_new_name": "test\\jenkins_tests\\run_multi_node_tests.sh", "file_complexity": {"file_NLOC": "None", "file_CCN": "None", "file_NToken": "None"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "132,133", "deleted_lines": "132,133,134,135"}}}}}}