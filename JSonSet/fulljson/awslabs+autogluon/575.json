{"BR": {"BR_id": "575", "BR_author": "cibic89", "BRopenT": "2020-07-21T14:37:19Z", "BRcloseT": "2020-07-22T17:26:16Z", "BR_text": {"BRsummary": "TabularPrediction task .fit fails on Ubuntu and Windows", "BRdescription": "\n <denchmark-code>import os\n import autogluon as ag\n from autogluon import TabularPrediction as task\n \n # example from https://towardsdatascience.com/autogluon-deep-learning-automl-5cdb4e2388ec\n train_path = 'https://autogluon.s3.amazonaws.com/datasets/AdultIncomeBinaryClassification/train_data.csv'\n train_data = task.Dataset(file_path=train_path)\n predictor = task.fit(train_data, label='survived', output_directory='ag-example-out/')\n </denchmark-code>\n \n Fails with:\n <denchmark-code>Loaded data from: https://autogluon.s3.amazonaws.com/datasets/AdultIncomeBinaryClassification/train_data.csv | Columns = 15 / 15 | Rows = 39073 -> 39073\n \n ---------------------------------------------------------------------------\n TypeError                                 Traceback (most recent call last)\n <ipython-input-5-2666bea8bf44> in <module>\n       3 # train_path = data_dir + \"titanic_clean.csv\"\n       4 train_data = task.Dataset(file_path=train_path)\n ----> 5 predictor = task.fit(train_data, label='survived', output_directory='ag-example-out/')\n \n TypeError: _call() takes 0 positional arguments but 1 was given\n </denchmark-code>\n \n Pip list\n <denchmark-code>Package                Version\n ---------------------- ------------\n attrs                  19.3.0\n autogluon              0.0.12\n backcall               0.2.0\n bcrypt                 3.1.7\n bleach                 3.1.5\n boto3                  1.14.24\n botocore               1.17.24\n brotlipy               0.7.0\n catboost               0.23.2\n certifi                2020.6.20\n cffi                   1.14.0\n chardet                3.0.4\n click                  7.1.2\n cloudpickle            1.5.0\n conda                  4.8.3\n conda-package-handling 1.7.0\n ConfigSpace            0.4.10\n cryptography           2.9.2\n cycler                 0.10.0\n Cython                 0.29.21\n dabl                   0.1.9.dev0\n dask                   2.21.0\n decorator              4.4.2\n defusedxml             0.6.0\n distributed            2.21.0\n docutils               0.15.2\n entrypoints            0.3\n gluoncv                0.7.0\n graphviz               0.8.4\n HeapDict               1.0.1\n idna                   2.9\n importlib-metadata     1.7.0\n ipykernel              5.3.3\n ipython                7.16.1\n ipython-genutils       0.2.0\n ipywidgets             7.5.1\n jedi                   0.17.2\n Jinja2                 2.11.2\n jmespath               0.10.0\n joblib                 0.16.0\n json5                  0.9.5\n jsonschema             3.2.0\n jupyter                1.0.0\n jupyter-client         6.1.6\n jupyter-console        6.1.0\n jupyter-core           4.6.3\n jupyterlab             2.2.0\n jupyterlab-server      1.2.0\n kiwisolver             1.2.0\n liac-arff              2.4.0\n lightgbm               2.3.1\n MarkupSafe             1.1.1\n matplotlib             3.3.0\n mistune                0.8.4\n more-itertools         8.4.0\n msgpack                1.0.0\n mxnet-mkl              1.6.0\n nbconvert              5.6.1\n nbformat               5.0.7\n networkx               2.4\n notebook               6.0.3\n numpy                  1.19.0\n openml                 0.10.2\n packaging              20.4\n pandas                 0.25.3\n pandocfilters          1.4.2\n paramiko               2.7.1\n parso                  0.7.0\n pexpect                4.8.0\n pickleshare            0.7.5\n Pillow                 6.2.1\n pip                    20.1.1\n plotly                 4.9.0\n pluggy                 0.13.1\n portalocker            1.7.1\n prometheus-client      0.8.0\n prompt-toolkit         3.0.5\n psutil                 5.7.2\n ptyprocess             0.6.0\n py                     1.9.0\n pyaml                  20.4.0\n pycosat                0.6.3\n pycparser              2.20\n Pygments               2.6.1\n PyNaCl                 1.4.0\n pyOpenSSL              19.1.0\n pyparsing              3.0.0a2\n pyrsistent             0.16.0\n PySocks                1.7.1\n pytest                 5.4.3\n python-dateutil        2.8.1\n pytz                   2020.1\n PyYAML                 5.3.1\n pyzmq                  19.0.1\n qtconsole              4.7.5\n QtPy                   1.9.0\n requests               2.24.0\n retrying               1.3.3\n ruamel-yaml            0.15.87\n s3transfer             0.3.3\n scikit-learn           0.22.2.post1\n scikit-optimize        0.7.4\n scipy                  1.5.1\n seaborn                0.10.1\n Send2Trash             1.5.0\n setuptools             49.2.0\n six                    1.15.0\n sortedcontainers       2.2.2\n tblib                  1.6.0\n terminado              0.8.3\n testpath               0.4.4\n threadpoolctl          2.1.0\n toolz                  0.10.0\n tornado                6.0.4\n tqdm                   4.46.1\n traitlets              4.3.3\n typing                 3.7.4.3\n urllib3                1.25.9\n wcwidth                0.2.5\n webencodings           0.5.1\n wheel                  0.34.2\n widgetsnbextension     3.5.1\n xmltodict              0.12.0\n zict                   2.0.0\n zipp                   3.1.0\n </denchmark-code>\n \n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "cibic89", "commentT": "2020-07-21T17:44:31Z", "comment_text": "\n \t\tGreat catch! This bug was added when presets were added in 0.0.8, since the presets decorator only had kwargs as an input argument. I have updated this to also support args in <denchmark-link:https://github.com/awslabs/autogluon/pull/576>#576</denchmark-link>\n , and the fix should be available in the next release.\n In the meantime, avoid using any positional arguments in the fit call, instead do:\n <denchmark-code>from autogluon import TabularPrediction as task\n # example from https://towardsdatascience.com/autogluon-deep-learning-automl-5cdb4e2388ec\n train_path = 'https://autogluon.s3.amazonaws.com/datasets/AdultIncomeBinaryClassification/train_data.csv'\n train_data = task.Dataset(file_path=train_path)\n predictor = task.fit(train_data=train_data, label='class', output_directory='ag-example-out/')\n </denchmark-code>\n \n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "cibic89", "commentT": "2020-07-21T19:15:12Z", "comment_text": "\n \t\t\n Great catch! This bug was added when presets were added in 0.0.8, since the presets decorator only had kwargs as an input argument. I have updated this to also support args in #576, and the fix should be available in the next release.\n In the meantime, avoid using any positional arguments in the fit call, instead do:\n from autogluon import TabularPrediction as task\n # example from https://towardsdatascience.com/autogluon-deep-learning-automl-5cdb4e2388ec\n train_path = 'https://autogluon.s3.amazonaws.com/datasets/AdultIncomeBinaryClassification/train_data.csv'\n train_data = task.Dataset(file_path=train_path)\n predictor = task.fit(train_data=train_data, label='class', output_directory='ag-example-out/')\n \n \n Working fine now. Don't mind contributing to update the examples/tutorials.\n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "cibic89", "commentT": "2020-07-21T19:48:39Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/cibic89>@cibic89</denchmark-link>\n  Thanks for the offer, although I believe the only example which didn't work was the one from towardsdatascience you mentioned (which I have since edited to work correctly). If you do see any examples that don't work, feel free to point them out and I'll fix them.\n \t\t"}, "comments_3": {"comment_id": 4, "comment_author": "cibic89", "commentT": "2020-07-22T07:26:54Z", "comment_text": "\n \t\t\n @cibic89 Thanks for the offer, although I believe the only example which didn't work was the one from towardsdatascience you mentioned (which I have since edited to work correctly). If you do see any examples that don't work, feel free to point them out and I'll fix them.\n \n Sure, thank you\n \t\t"}}}, "commit": {"commit_id": "b540960b39ca7579ffbad2d425046de2ae6869e4", "commit_author": "Nick Erickson", "commitT": "2020-07-22 10:26:15-07:00", "commit_complexity": {"commit_NLOC": "None", "commit_CCN": "None", "commit_Nprams": "None"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 6, "file_old_name": "autogluon\\task\\tabular_prediction\\presets_configs.py", "file_new_name": "autogluon\\task\\tabular_prediction\\presets_configs.py", "file_complexity": {"file_NLOC": "41", "file_CCN": "14", "file_NToken": "298"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "52,74", "deleted_lines": "73", "method_info": {"method_name": "set_presets", "method_params": "args,kwargs", "method_startline": "52", "method_endline": "74", "method_complexity": {"method_NLOC": "23", "method_CCN": "11", "method_NToken": "136", "method_nesting_level": "0"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "52", "deleted_lines": "51,73", "method_info": {"method_name": "set_presets", "method_params": "kwargs", "method_startline": "51", "method_endline": "73", "method_complexity": {"method_NLOC": "23", "method_CCN": "11", "method_NToken": "131", "method_nesting_level": "0"}}}, "hunk_2": {"Ismethod": 1, "added_lines": "8,9", "deleted_lines": "8,9", "method_info": {"method_name": "unpack.unpack._unpack_inner._call", "method_params": "kwargs", "method_startline": "8", "method_endline": "9", "method_complexity": {"method_NLOC": "2", "method_CCN": "1", "method_NToken": "16", "method_nesting_level": "2"}}}, "hunk_3": {"Ismethod": 1, "added_lines": "8,9,10", "deleted_lines": "8,9", "method_info": {"method_name": "unpack.unpack._unpack_inner._call", "method_params": "args,kwargs", "method_startline": "8", "method_endline": "10", "method_complexity": {"method_NLOC": "3", "method_CCN": "1", "method_NToken": "30", "method_nesting_level": "2"}}}, "hunk_4": {"Ismethod": 1, "added_lines": "8,9,10", "deleted_lines": "8,9", "method_info": {"method_name": "unpack", "method_params": "g", "method_startline": "5", "method_endline": "12", "method_complexity": {"method_NLOC": "3", "method_CCN": "1", "method_NToken": "9", "method_nesting_level": "0"}}}, "hunk_5": {"Ismethod": 1, "added_lines": "8,9,10", "deleted_lines": "8,9", "method_info": {"method_name": "unpack._unpack_inner", "method_params": "f", "method_startline": "6", "method_endline": "11", "method_complexity": {"method_NLOC": "4", "method_CCN": "1", "method_NToken": "16", "method_nesting_level": "1"}}}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 8, "file_old_name": "autogluon\\utils\\tabular\\features\\abstract_feature_generator.py", "file_new_name": "autogluon\\utils\\tabular\\features\\abstract_feature_generator.py", "file_complexity": {"file_NLOC": "344", "file_CCN": "110", "file_NToken": "2979"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": null, "deleted_lines": "461,462,463,464,465", "method_info": {"method_name": "digit_ratio", "method_params": "string", "method_startline": "461", "method_endline": "465", "method_complexity": {"method_NLOC": "5", "method_CCN": "3", "method_NToken": "39", "method_nesting_level": "1"}}}, "hunk_1": {"Ismethod": 1, "added_lines": null, "deleted_lines": "453,454,455,456,457,458", "method_info": {"method_name": "special_ratio", "method_params": "string", "method_startline": "453", "method_endline": "458", "method_complexity": {"method_NLOC": "6", "method_CCN": "2", "method_NToken": "44", "method_nesting_level": "1"}}}, "hunk_2": {"Ismethod": 1, "added_lines": null, "deleted_lines": "380,381,382,383,384,385,386,387,388,389,390,391,392,393,394,395,396,397", "method_info": {"method_name": "generate_text_features", "method_params": "self,Series,str", "method_startline": "380", "method_endline": "397", "method_complexity": {"method_NLOC": "15", "method_CCN": "9", "method_NToken": "280", "method_nesting_level": "1"}}}, "hunk_3": {"Ismethod": 1, "added_lines": null, "deleted_lines": "445,446", "method_info": {"method_name": "word_count", "method_params": "string", "method_startline": "445", "method_endline": "446", "method_complexity": {"method_NLOC": "2", "method_CCN": "1", "method_NToken": "14", "method_nesting_level": "1"}}}, "hunk_4": {"Ismethod": 1, "added_lines": null, "deleted_lines": "475,476,477,478,479", "method_info": {"method_name": "capital_ratio", "method_params": "string", "method_startline": "475", "method_endline": "479", "method_complexity": {"method_NLOC": "5", "method_CCN": "4", "method_NToken": "41", "method_nesting_level": "1"}}}, "hunk_5": {"Ismethod": 1, "added_lines": null, "deleted_lines": "468,469,470,471,472", "method_info": {"method_name": "lower_ratio", "method_params": "string", "method_startline": "468", "method_endline": "472", "method_complexity": {"method_NLOC": "5", "method_CCN": "3", "method_NToken": "39", "method_nesting_level": "1"}}}, "hunk_6": {"Ismethod": 1, "added_lines": null, "deleted_lines": "449,450", "method_info": {"method_name": "char_count", "method_params": "string", "method_startline": "449", "method_endline": "450", "method_complexity": {"method_NLOC": "2", "method_CCN": "1", "method_NToken": "10", "method_nesting_level": "1"}}}, "hunk_7": {"Ismethod": 1, "added_lines": null, "deleted_lines": "482,483,484,485", "method_info": {"method_name": "symbol_in_string_count", "method_params": "string,character", "method_startline": "482", "method_endline": "485", "method_complexity": {"method_NLOC": "4", "method_CCN": "4", "method_NToken": "26", "method_nesting_level": "1"}}}}}, "file_2": {"file_change_type": "MODIFY", "file_Nmethod": 9, "file_old_name": "autogluon\\utils\\tabular\\features\\auto_ml_feature_generator.py", "file_new_name": "autogluon\\utils\\tabular\\features\\auto_ml_feature_generator.py", "file_complexity": {"file_NLOC": "229", "file_CCN": "84", "file_NToken": "1854"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "268,269,270,271,272", "deleted_lines": null, "method_info": {"method_name": "lower_ratio", "method_params": "string", "method_startline": "268", "method_endline": "272", "method_complexity": {"method_NLOC": "5", "method_CCN": "3", "method_NToken": "39", "method_nesting_level": "1"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "261,262,263,264,265", "deleted_lines": null, "method_info": {"method_name": "digit_ratio", "method_params": "string", "method_startline": "261", "method_endline": "265", "method_complexity": {"method_NLOC": "5", "method_CCN": "3", "method_NToken": "39", "method_nesting_level": "1"}}}, "hunk_2": {"Ismethod": 1, "added_lines": "245,246", "deleted_lines": null, "method_info": {"method_name": "word_count", "method_params": "string", "method_startline": "245", "method_endline": "246", "method_complexity": {"method_NLOC": "2", "method_CCN": "1", "method_NToken": "14", "method_nesting_level": "1"}}}, "hunk_3": {"Ismethod": 1, "added_lines": "74", "deleted_lines": "73", "method_info": {"method_name": "generate_features", "method_params": "self,DataFrame", "method_startline": "61", "method_endline": "175", "method_complexity": {"method_NLOC": "95", "method_CCN": "32", "method_NToken": "733", "method_nesting_level": "1"}}}, "hunk_4": {"Ismethod": 1, "added_lines": "275,276,277,278,279", "deleted_lines": null, "method_info": {"method_name": "capital_ratio", "method_params": "string", "method_startline": "275", "method_endline": "279", "method_complexity": {"method_NLOC": "5", "method_CCN": "4", "method_NToken": "41", "method_nesting_level": "1"}}}, "hunk_5": {"Ismethod": 1, "added_lines": "227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242", "deleted_lines": null, "method_info": {"method_name": "generate_text_special", "method_params": "self,Series,str", "method_startline": "227", "method_endline": "242", "method_complexity": {"method_NLOC": "14", "method_CCN": "9", "method_NToken": "247", "method_nesting_level": "1"}}}, "hunk_6": {"Ismethod": 1, "added_lines": "249,250", "deleted_lines": null, "method_info": {"method_name": "char_count", "method_params": "string", "method_startline": "249", "method_endline": "250", "method_complexity": {"method_NLOC": "2", "method_CCN": "1", "method_NToken": "10", "method_nesting_level": "1"}}}, "hunk_7": {"Ismethod": 1, "added_lines": "253,254,255,256,257,258", "deleted_lines": null, "method_info": {"method_name": "special_ratio", "method_params": "string", "method_startline": "253", "method_endline": "258", "method_complexity": {"method_NLOC": "6", "method_CCN": "2", "method_NToken": "44", "method_nesting_level": "1"}}}, "hunk_8": {"Ismethod": 1, "added_lines": "282,283,284,285", "deleted_lines": null, "method_info": {"method_name": "symbol_in_string_count", "method_params": "string,character", "method_startline": "282", "method_endline": "285", "method_complexity": {"method_NLOC": "4", "method_CCN": "4", "method_NToken": "26", "method_nesting_level": "1"}}}}}}}}