{"BR": {"BR_id": "1545", "BR_author": "manybodycpa", "BRopenT": "2020-05-15T13:56:23Z", "BRcloseT": "2020-06-25T19:28:02Z", "BR_text": {"BRsummary": "Errors in 1.0.0 on login and creating task", "BRdescription": "\n <denchmark-h:h3>My actions before raising this issue</denchmark-h>\n \n \n  Read/searched the docs\n  Searched past issues\n \n <denchmark-h:h3>Expected Behaviour</denchmark-h>\n \n Installed latest version in new directory. Expected working system.\n <denchmark-h:h3>Current Behaviour</denchmark-h>\n \n Ended up with\n Server 1.0\n Core 0.5.2\n Canvas 0.5.2\n UI 0.5.2\n with error messages appearing on login:\n Could not get formats from the server\n TypeError: (intermediate value).map is not a function\n and when trying to create a task:\n Could not create the task\n Error: Request failed with status code 400. {\"image_quality\":[\"This field is required.\"]}.\n <denchmark-h:h3>Possible Solution</denchmark-h>\n \n Problems may be related to previous installation of version 0.5.2 in different directory?\n <denchmark-h:h3>Steps to Reproduce (for bugs)</denchmark-h>\n \n \n Install CVAT according to instructions.\n Login\n Try to create task\n \n <denchmark-h:h3>Context</denchmark-h>\n \n Trying to switch from version 0.5.2 to 1.0.0.\n <denchmark-h:h3>Your Environment</denchmark-h>\n \n \n Git hash commit (git log -1): 0934d77\n Docker version docker version (e.g. Docker 17.0.05): 19.03.8\n Are you using Docker Swarm or Kubernetes? No\n Operating System and version (e.g. Linux, Windows, MacOS): Ubuntu 18.04\n \n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "manybodycpa", "commentT": "2020-05-15T14:00:10Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/manybodycpa>@manybodycpa</denchmark-link>\n  Hi, could you please try to clear browser cache?\n Probably related issue <denchmark-link:https://github.com/openvinotoolkit/cvat/issues/1496>#1496</denchmark-link>\n \n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "manybodycpa", "commentT": "2020-05-15T14:06:11Z", "comment_text": "\n \t\tThanks! Clearing the cache resolved these errors. Can you confirm that having server version 1.0.0 and version 0.5.2 after installation is the intended behavior?\n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "manybodycpa", "commentT": "2020-05-18T04:31:37Z", "comment_text": "\n \t\tI have the same problem, but clearing the cache does not work. I find the posted payload has no image_quality field.\n Git hash commit: (git log -1): 011c4aa675381e(v1.0.0-beta.2)\n Browser:Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:76.0) Gecko/20100101 Firefox/76.0\n \t\t"}, "comments_3": {"comment_id": 4, "comment_author": "manybodycpa", "commentT": "2020-05-18T07:03:54Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/zonxin>@zonxin</denchmark-link>\n  Could you try to create a task with another browser or incognito mode?\n \t\t"}, "comments_4": {"comment_id": 5, "comment_author": "manybodycpa", "commentT": "2020-05-18T13:34:32Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/azhavoro>@azhavoro</denchmark-link>\n \n I also try it in Chrome. I think I find the bug.   misses  field, which is required  in  and not missed in . I will give a try.\n <denchmark-link:https://github.com/opencv/cvat/blob/v1.0.0-beta.2/cvat-core/src/session.js#1582>https://github.com/opencv/cvat/blob/v1.0.0-beta.2/cvat-core/src/session.js#1582</denchmark-link>\n \n <denchmark-link:https://github.com/opencv/cvat/blob/v1.0.0-beta.2/cvat-core/src/server-proxy.js#L388>https://github.com/opencv/cvat/blob/v1.0.0-beta.2/cvat-core/src/server-proxy.js#L388</denchmark-link>\n \n <denchmark-link:https://github.com/opencv/cvat/blob/v0.6.0/cvat-core/src/session.js#1459>https://github.com/opencv/cvat/blob/v0.6.0/cvat-core/src/session.js#1459</denchmark-link>\n \n \t\t"}, "comments_5": {"comment_id": 6, "comment_author": "manybodycpa", "commentT": "2020-05-18T14:03:27Z", "comment_text": "\n \t\t field was moved into taskDataSpec <denchmark-link:https://github.com/opencv/cvat/blob/v1.0.0-beta.2/cvat-core/src/session.js#L1614>https://github.com/opencv/cvat/blob/v1.0.0-beta.2/cvat-core/src/session.js#L1614</denchmark-link>\n \n Could you attach the screenshot of  window?\n \t\t"}, "comments_6": {"comment_id": 7, "comment_author": "manybodycpa", "commentT": "2020-05-18T15:49:08Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/azhavoro>@azhavoro</denchmark-link>\n   Sorry, I have delete the server. I think it may be my faults. I build the server fail now, because pyav requires FFmpeg>=3.2. Maybe, it is because I did not notice the upgrade fail.\n Now I want to know, for the , the  field is required or not at the server side?\n \t\t"}, "comments_7": {"comment_id": 8, "comment_author": "manybodycpa", "commentT": "2020-05-18T15:58:01Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/zonxin>@zonxin</denchmark-link>\n  when you create the task the client makes 2 requests:\n post at the  endpoint and there is no  field required\n post at : the  field is required for this request\n \t\t"}, "comments_8": {"comment_id": 9, "comment_author": "manybodycpa", "commentT": "2020-05-18T16:19:54Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/azhavoro>@azhavoro</denchmark-link>\n  That's it! It is because my server upgrade fails, and  endpoint of previous version requires  .\n The upgrade fail comes from that python av module requires ffmpeg>=3.2, but the version installed from source is 2.8.15 using Docker image ubuntu16.04. May I have to install latest ffmpeg manually?\n \t\t"}, "comments_9": {"comment_id": 10, "comment_author": "manybodycpa", "commentT": "2020-05-18T16:40:46Z", "comment_text": "\n \t\tWe use this repo to install ffmpeg3 <denchmark-link:https://github.com/opencv/cvat/blob/develop/Dockerfile#L26-L27>https://github.com/opencv/cvat/blob/develop/Dockerfile#L26-L27</denchmark-link>\n \n Did  you modify the Dockerfile to delete these lines?\n \t\t"}, "comments_10": {"comment_id": 11, "comment_author": "manybodycpa", "commentT": "2020-05-18T23:49:49Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/azhavoro>@azhavoro</denchmark-link>\n  Yes, I am in China. The repo is very slow due to some reasons, so I delete the repo and install some related packages manually. However, installing ffmpeg manually is very boring.\n \t\t"}, "comments_11": {"comment_id": 12, "comment_author": "manybodycpa", "commentT": "2020-05-19T06:35:05Z", "comment_text": "\n \t\tGot it, in you case I think will be better try to change base image to 18.04 or 20.04 that have ffmpeg3  in main repository. So, I think that minimal dockerfile modifications will be required. We plan to change the base image but if you help with this it would be nice.\n \t\t"}, "comments_12": {"comment_id": 13, "comment_author": "manybodycpa", "commentT": "2020-05-19T10:11:44Z", "comment_text": "\n \t\tI tried a little last night with 18.04, but I did not find gstreamer-ffmpeg for ubuntu above 16.04. In addition, some dependencies of gstreamer0.10-ffmpeg can not be found in 18.04 main repository. I wonder the  package will not work properly in ubuntu > 16.04. Now I have solved my problem by downloading related packages and making a local repository.\n \t\t"}, "comments_13": {"comment_id": 14, "comment_author": "manybodycpa", "commentT": "2020-05-20T07:35:54Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/bsekachev>@bsekachev</denchmark-link>\n  Can we add a hash to the bundle or use something else to resolve such issues in the future?\n \t\t"}, "comments_14": {"comment_id": 15, "comment_author": "manybodycpa", "commentT": "2020-05-20T07:37:59Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/azhavoro>@azhavoro</denchmark-link>\n \n Probably webpack has something like this.\n Need to investigate\n \t\t"}}}, "commit": {"commit_id": "db29291d43172aa33194a6fb28f8000309d38344", "commit_author": "Andrey Zhavoronkov", "commitT": "2020-06-25 22:28:01+03:00", "commit_complexity": {"commit_NLOC": "None", "commit_CCN": "None", "commit_Nprams": "None"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "cvat-canvas\\webpack.config.js", "file_new_name": "cvat-canvas\\webpack.config.js", "file_complexity": {"file_NLOC": "109", "file_CCN": "0", "file_NToken": "426"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "63,64,65,68", "deleted_lines": "63,66"}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "cvat-core\\webpack.config.js", "file_new_name": "cvat-core\\webpack.config.js", "file_complexity": {"file_NLOC": "73", "file_CCN": "0", "file_NToken": "265"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "33,34,35,38,63,73", "deleted_lines": "33,36,61,71"}}}, "file_2": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "cvat-data\\webpack.config.js", "file_new_name": "cvat-data\\webpack.config.js", "file_complexity": {"file_NLOC": "59", "file_CCN": "0", "file_NToken": "204"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "12,13,14,17,44,53", "deleted_lines": "12,15,42,51"}}}, "file_3": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "cvat-ui\\src\\index.html", "file_new_name": "cvat-ui\\src\\index.html", "file_complexity": {"file_NLOC": "None", "file_CCN": "None", "file_NToken": "None"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": null, "deleted_lines": "18"}}}, "file_4": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "cvat-ui\\webpack.config.js", "file_new_name": "cvat-ui\\webpack.config.js", "file_complexity": {"file_NLOC": "109", "file_CCN": "0", "file_NToken": "434"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "17,18,19,22,23,85,95,103", "deleted_lines": "17,20,82,92,100"}}}}}}