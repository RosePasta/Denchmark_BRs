{"BR": {"BR_id": "1613", "BR_author": "mkostiv", "BRopenT": "2020-05-28T17:27:39Z", "BRcloseT": "2020-06-15T12:26:26Z", "BR_text": {"BRsummary": "Dump annotations with frame step: Key error", "BRdescription": "\n Steps to reproduce:\n \n Create a task with frame step (5 in my case)\n Annotate a few images\n Dump annotations\n \n git describe 0.2.0-750-g3f46258\n <denchmark-link:https://user-images.githubusercontent.com/45266535/83173301-7eb4eb00-a121-11ea-8f06-0457062e01a4.png></denchmark-link>\n \n Traceback (most recent call last):\n File \"/usr/local/lib/python3.5/dist-packages/rq/worker.py\", line 812, in perform_job\n rv = job.perform()\n File \"/usr/local/lib/python3.5/dist-packages/rq/job.py\", line 588, in perform\n self._result = self._execute()\n File \"/usr/local/lib/python3.5/dist-packages/rq/job.py\", line 594, in _execute\n return self.func(*self.args, **self.kwargs)\n File \"/home/django/cvat/apps/dataset_manager/views.py\", line 87, in export_task_annotations\n return export_task(task_id, dst_format, server_url=server_url, save_images=False)\n File \"/home/django/cvat/apps/dataset_manager/views.py\", line 62, in export_task\n server_url=server_url, save_images=save_images)\n File \"/home/django/cvat/apps/dataset_manager/task.py\", line 723, in export_task\n save_images=save_images)\n File \"/home/django/cvat/apps/dataset_manager/task.py\", line 619, in export\n exporter(dst_file, task_data, **options)\n File \"/home/django/cvat/apps/dataset_manager/formats/registry.py\", line 35, in call\n f_or_cls(*args, **kwargs)\n File \"/home/django/cvat/apps/dataset_manager/formats/cvat.py\", line 545, in _export_images\n anno_callback=dump_as_cvat_annotation, save_images=save_images)\n File \"/home/django/cvat/apps/dataset_manager/formats/cvat.py\", line 517, in _export\n anno_callback(f, task_data)\n File \"/home/django/cvat/apps/dataset_manager/formats/cvat.py\", line 178, in dump_as_cvat_annotation\n for frame_annotation in annotations.group_by_frame(include_empty=True):\n File \"/home/django/cvat/apps/dataset_manager/bindings.py\", line 259, in group_by_frame\n get_frame(shape['frame']).labeled_shapes.append(\n File \"/home/django/cvat/apps/dataset_manager/bindings.py\", line 234, in get_frame\n frame_info = self._frame_info[idx]\n KeyError: 1\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "mkostiv", "commentT": "2020-05-28T19:23:57Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/zhiltsov-max>@zhiltsov-max</denchmark-link>\n  , do you think you can look at the issue tomorrow?\n \t\t"}}}, "commit": {"commit_id": "1fb7e5bf6d2fd5ccb57cc7285c486d9f2c63cef8", "commit_author": "zhiltsov-max", "commitT": "2020-06-15 15:26:25+03:00", "commit_complexity": {"commit_NLOC": "0.6666666666666666", "commit_CCN": "0.3333333333333333", "commit_Nprams": "0.0"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "CHANGELOG.md", "file_new_name": "CHANGELOG.md", "file_complexity": {"file_NLOC": "None", "file_CCN": "None", "file_NToken": "None"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "28,89,90", "deleted_lines": null}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 12, "file_old_name": "cvat\\apps\\dataset_manager\\bindings.py", "file_new_name": "cvat\\apps\\dataset_manager\\bindings.py", "file_complexity": {"file_NLOC": "508", "file_CCN": "142", "file_NToken": "4115"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "201", "deleted_lines": null, "method_info": {"method_name": "_export_tracked_shape", "method_params": "self,shape", "method_startline": "198", "method_endline": "211", "method_complexity": {"method_NLOC": "14", "method_CCN": "1", "method_NToken": "121", "method_nesting_level": "1"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "237", "deleted_lines": "235", "method_info": {"method_name": "group_by_frame", "method_params": "self,include_empty", "method_startline": "233", "method_endline": "267", "method_complexity": {"method_NLOC": "18", "method_CCN": "6", "method_NToken": "144", "method_nesting_level": "1"}}}, "hunk_2": {"Ismethod": 1, "added_lines": "330,331,336", "deleted_lines": "330,331,336,337", "method_info": {"method_name": "_import_track", "method_params": "self,track", "method_startline": "327", "method_endline": "344", "method_complexity": {"method_NLOC": "17", "method_CCN": "8", "method_NToken": "178", "method_nesting_level": "1"}}}, "hunk_3": {"Ismethod": 1, "added_lines": "304", "deleted_lines": "302,303", "method_info": {"method_name": "_import_tag", "method_params": "self,tag", "method_startline": "301", "method_endline": "309", "method_complexity": {"method_NLOC": "9", "method_CCN": "3", "method_NToken": "85", "method_nesting_level": "1"}}}, "hunk_4": {"Ismethod": 1, "added_lines": "320", "deleted_lines": "319,320", "method_info": {"method_name": "_import_shape", "method_params": "self,shape", "method_startline": "317", "method_endline": "325", "method_complexity": {"method_NLOC": "9", "method_CCN": "3", "method_NToken": "85", "method_nesting_level": "1"}}}, "hunk_5": {"Ismethod": 1, "added_lines": "103,104", "deleted_lines": "103,104", "method_info": {"method_name": "rel_frame_id", "method_params": "self,absolute_id", "method_startline": "103", "method_endline": "104", "method_complexity": {"method_NLOC": "2", "method_CCN": "1", "method_NToken": "20", "method_nesting_level": "1"}}}, "hunk_6": {"Ismethod": 1, "added_lines": "217", "deleted_lines": "213,214", "method_info": {"method_name": "_export_labeled_shape", "method_params": "self,shape", "method_startline": "213", "method_endline": "223", "method_complexity": {"method_NLOC": "11", "method_CCN": "1", "method_NToken": "92", "method_nesting_level": "1"}}}, "hunk_7": {"Ismethod": 1, "added_lines": "569", "deleted_lines": "570", "method_info": {"method_name": "import_dm_annotations", "method_params": "dm_dataset,task_data", "method_startline": "558", "method_endline": "607", "method_complexity": {"method_NLOC": "45", "method_CCN": "14", "method_NToken": "410", "method_nesting_level": "0"}}}, "hunk_8": {"Ismethod": 1, "added_lines": "237", "deleted_lines": "235", "method_info": {"method_name": "group_by_frame.get_frame", "method_params": "idx", "method_startline": "235", "method_endline": "248", "method_complexity": {"method_NLOC": "14", "method_CCN": "2", "method_NToken": "81", "method_nesting_level": "2"}}}, "hunk_9": {"Ismethod": 1, "added_lines": "109,114", "deleted_lines": "109", "method_info": {"method_name": "_init_frame_info", "method_params": "self", "method_startline": "106", "method_endline": "123", "method_complexity": {"method_NLOC": "17", "method_CCN": "5", "method_NToken": "158", "method_nesting_level": "1"}}}, "hunk_10": {"Ismethod": 1, "added_lines": "227", "deleted_lines": "225", "method_info": {"method_name": "_export_tag", "method_params": "self,tag", "method_startline": "225", "method_endline": "231", "method_complexity": {"method_NLOC": "7", "method_CCN": "1", "method_NToken": "60", "method_nesting_level": "1"}}}, "hunk_11": {"Ismethod": 1, "added_lines": "100,101", "deleted_lines": null, "method_info": {"method_name": "abs_frame_id", "method_params": "self,relative_id", "method_startline": "100", "method_endline": "101", "method_complexity": {"method_NLOC": "2", "method_CCN": "1", "method_NToken": "21", "method_nesting_level": "1"}}}}}, "file_2": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "cvat\\apps\\dataset_manager\\formats\\mot.py", "file_new_name": "cvat\\apps\\dataset_manager\\formats\\mot.py", "file_complexity": {"file_NLOC": "53", "file_CCN": "8", "file_NToken": "444"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "43,60", "deleted_lines": "43,60", "method_info": {"method_name": "_import", "method_params": "src_file,task_data", "method_startline": "32", "method_endline": "75", "method_complexity": {"method_NLOC": "33", "method_CCN": "7", "method_NToken": "275", "method_nesting_level": "0"}}}}}}}}