{"BR": {"BR_id": "1794", "BR_author": "MuadDev", "BRopenT": "2020-06-23T11:44:45Z", "BRcloseT": "2020-10-12T13:59:28Z", "BR_text": {"BRsummary": "Error when creating superuser in fresh install", "BRdescription": "\n <denchmark-h:h3>My actions before raising this issue</denchmark-h>\n \n \n  Read/searched the docs\n  Searched past issues\n \n <denchmark-h:h3>Expected Behaviour</denchmark-h>\n \n After building the docker I expect to be able to create a super user with the following command from the installation guide:\n <denchmark-code> docker exec -it cvat bash -ic 'python3 ~/manage.py createsuperuser'\n </denchmark-code>\n \n <denchmark-h:h3>Current Behaviour</denchmark-h>\n \n Instead I get the following error message:\n <denchmark-code>You have 54 unapplied migration(s). Your project may not work properly until you apply the migrations for app(s): account, admin, auth, authtoken, contenttypes, engine, git, sessions, sites, socialaccount.\n Run 'python manage.py migrate' to apply them.\n \n Traceback (most recent call last):\n   File \"/usr/local/lib/python3.5/dist-packages/django/db/backends/utils.py\", line 84, in _execute\n     return self.cursor.execute(sql, params)\n psycopg2.errors.UndefinedTable: relation \"auth_user\" does not exist\n LINE 1: ...user\".\"is_active\", \"auth_user\".\"date_joined\" FROM \"auth_user...\n                                                              ^\n \n \n The above exception was the direct cause of the following exception:\n \n Traceback (most recent call last):\n   File \"/home/django/manage.py\", line 21, in <module>\n     execute_from_command_line(sys.argv)\n   File \"/usr/local/lib/python3.5/dist-packages/django/core/management/__init__.py\", line 381, in execute_from_command_line\n     utility.execute()\n   File \"/usr/local/lib/python3.5/dist-packages/django/core/management/__init__.py\", line 375, in execute\n     self.fetch_command(subcommand).run_from_argv(self.argv)\n   File \"/usr/local/lib/python3.5/dist-packages/django/core/management/base.py\", line 323, in run_from_argv\n     self.execute(*args, **cmd_options)\n   File \"/usr/local/lib/python3.5/dist-packages/django/contrib/auth/management/commands/createsuperuser.py\", line 61, in execute\n     return super().execute(*args, **options)\n   File \"/usr/local/lib/python3.5/dist-packages/django/core/management/base.py\", line 364, in execute\n     output = self.handle(*args, **options)\n   File \"/usr/local/lib/python3.5/dist-packages/django/contrib/auth/management/commands/createsuperuser.py\", line 82, in handle\n     default_username = get_default_username()\n   File \"/usr/local/lib/python3.5/dist-packages/django/contrib/auth/management/__init__.py\", line 140, in get_default_username\n     auth_app.User._default_manager.get(username=default_username)\n   File \"/usr/local/lib/python3.5/dist-packages/django/db/models/manager.py\", line 82, in manager_method\n     return getattr(self.get_queryset(), name)(*args, **kwargs)\n   File \"/usr/local/lib/python3.5/dist-packages/cacheops/query.py\", line 359, in get\n     return qs._no_monkey.get(qs, *args, **kwargs)\n   File \"/usr/local/lib/python3.5/dist-packages/django/db/models/query.py\", line 402, in get\n     num = len(clone)\n   File \"/usr/local/lib/python3.5/dist-packages/django/db/models/query.py\", line 256, in __len__\n     self._fetch_all()\n   File \"/usr/local/lib/python3.5/dist-packages/cacheops/query.py\", line 279, in _fetch_all\n     return self._no_monkey._fetch_all(self)\n   File \"/usr/local/lib/python3.5/dist-packages/django/db/models/query.py\", line 1242, in _fetch_all\n     self._result_cache = list(self._iterable_class(self))\n   File \"/usr/local/lib/python3.5/dist-packages/django/db/models/query.py\", line 55, in __iter__\n     results = compiler.execute_sql(chunked_fetch=self.chunked_fetch, chunk_size=self.chunk_size)\n   File \"/usr/local/lib/python3.5/dist-packages/django/db/models/sql/compiler.py\", line 1140, in execute_sql\n     cursor.execute(sql, params)\n   File \"/usr/local/lib/python3.5/dist-packages/cacheops/transaction.py\", line 93, in execute\n     result = self._no_monkey.execute(self, sql, params)\n   File \"/usr/local/lib/python3.5/dist-packages/django/db/backends/utils.py\", line 67, in execute\n     return self._execute_with_wrappers(sql, params, many=False, executor=self._execute)\n   File \"/usr/local/lib/python3.5/dist-packages/django/db/backends/utils.py\", line 76, in _execute_with_wrappers\n     return executor(sql, params, many, context)\n   File \"/usr/local/lib/python3.5/dist-packages/django/db/backends/utils.py\", line 84, in _execute\n     return self.cursor.execute(sql, params)\n   File \"/usr/local/lib/python3.5/dist-packages/django/db/utils.py\", line 89, in __exit__\n     raise dj_exc_value.with_traceback(traceback) from exc_value\n   File \"/usr/local/lib/python3.5/dist-packages/django/db/backends/utils.py\", line 84, in _execute\n     return self.cursor.execute(sql, params)\n django.db.utils.ProgrammingError: relation \"auth_user\" does not exist\n LINE 1: ...user\".\"is_active\", \"auth_user\".\"date_joined\" FROM \"auth_user...\n </denchmark-code>\n \n Perhaps something with a database?\n <denchmark-h:h3>Possible Solution</denchmark-h>\n \n ?\n <denchmark-h:h3>Steps to Reproduce (for bugs)</denchmark-h>\n \n \n git clone https://github.com/opencv/cvat.git\n docker-compose build\n docker-compose up -d\n docker exec -it cvat bash -ic 'python3 ~/manage.py createsuperuser'\n \n <denchmark-h:h3>Context</denchmark-h>\n \n I tried this on a pc which had an older version of CVAT running without problems. I also tried it on another pc which did not have a previous install of CVAT to be sure.\n <denchmark-h:h3>Your Environment</denchmark-h>\n \n \n Git hash commit (git log -1):\n \n Docker version docker version (e.g. Docker 17.0.05):\n \n Are you using Docker Swarm or Kubernetes?\n I don't know, for sure not kubernetes.\n Operating System and version (e.g. Linux, Windows, MacOS):\n \n Code example or link to GitHub repo or gist to reproduce problem:\n Other diagnostic information / logs:\n   \n Logs from `cvat` container\n \n \n \n <denchmark-h:h3>Next steps</denchmark-h>\n \n You may <denchmark-link:https://gitter.im/opencv-cvat/public>join our Gitter</denchmark-link>\n  channel for community support.\n I also raised this issue on gitter.\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "MuadDev", "commentT": "2020-06-23T13:05:57Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/MuadDev>@MuadDev</denchmark-link>\n  Hi, please attach full container log: .\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "MuadDev", "commentT": "2020-06-23T13:43:02Z", "comment_text": "\n \t\tHere are the logs:\n <denchmark-link:https://user-images.githubusercontent.com/29200372/85411099-3645ed00-b568-11ea-8f4b-b96ff6ddd672.png></denchmark-link>\n \n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "MuadDev", "commentT": "2020-06-23T16:50:14Z", "comment_text": "\n \t\tHow long is the cvat container up? I see only ~7 sec time difference between the first and last event and cannot obtain any messages about applied migrations and so on. Please note that cvat cannot start instantly and this process takes some time. It's depend on the machine (disk performance, cpu, etc), especially it's relevant for fresh installation.\n Please start container with docker-compose up -d command\n Wait about 1min and make sure that you see message like this in the docker logs cvat\n <denchmark-code>2020-06-23 16:35:04,590 DEBG 'runserver' stdout output:\n Successfully ran command.\n Server URL         : http://localhost:8080/\n Server Root        : /tmp/cvat-server\n Server Conf        : /tmp/cvat-server/httpd.conf\n Error Log File     : /dev/stderr (INFO)\n Request Capacity   : 5 (1 process * 5 threads)\n Request Timeout    : 60 (seconds)\n Startup Timeout    : 15 (seconds)\n Queue Backlog      : 100 (connections)\n Queue Timeout      : 45 (seconds)\n Server Capacity    : 20 (event/worker), 20 (prefork)\n Server Backlog     : 500 (connections)\n Locale Setting     : C.UTF-8\n </denchmark-code>\n \n After that should be possible to create a new superuser.\n \t\t"}, "comments_3": {"comment_id": 4, "comment_author": "MuadDev", "commentT": "2020-06-24T08:46:51Z", "comment_text": "\n \t\tAh thank you, that might be the issue since I do not wait when starting up. I will test this and report back.\n \t\t"}, "comments_4": {"comment_id": 5, "comment_author": "MuadDev", "commentT": "2020-06-24T14:40:16Z", "comment_text": "\n \t\tOk, so these are the steps I tried:\n \n Started the docker and waited for 15 min\n docker-compose up -d\n Looked at the logs\n docker logs cvat\n This resulted in similar output as was shown above. Therefore I tried starting from scratch.\n \n Starting from scratch\n \n Shutdown and remove containers\n docker-compose down -v\n Rebuild without cache\n docker-compose build --no-cache\n Start\n docker-compose up -d\n Waited several hours, but the result is the same...\n \n For some context. This happens on a quite powerful machine. The storage is a SSD drive, the CPU is a Intel(R) Core(TM) i7-6800K CPU @ 3.40GHz, and it also has 2 GPUs but that is probably not relevant. What I am trying to say, I would expect that this machine would not take so long for starting up as it is quite powerful.\n \t\t"}, "comments_5": {"comment_id": 6, "comment_author": "MuadDev", "commentT": "2020-06-24T16:20:37Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/MuadDev>@MuadDev</denchmark-link>\n  ok, startup process usually takes no more than 1 min. Could you save your log as file and attach it here? \n \t\t"}, "comments_6": {"comment_id": 7, "comment_author": "MuadDev", "commentT": "2020-06-25T07:41:16Z", "comment_text": "\n \t\tOf course:\n <denchmark-link:https://github.com/opencv/cvat/files/4829755/cvat.log>cvat.log</denchmark-link>\n \n \t\t"}, "comments_7": {"comment_id": 8, "comment_author": "MuadDev", "commentT": "2020-06-25T13:22:23Z", "comment_text": "\n \t\tIn the original error message i posted it gave a hint about a migration that needed to be done, see my first post in this thread. I just carried that out:\n <denchmark-code>docker exec -it cvat bash -ic '/usr/bin/python3 ~/manage.py migrate'\n </denchmark-code>\n \n This gave the following output\n <denchmark-link:https://user-images.githubusercontent.com/29200372/85727291-2dcfec80-b6f7-11ea-8fe8-6e39e3c15d34.png></denchmark-link>\n \n <denchmark-link:https://user-images.githubusercontent.com/29200372/85727385-404a2600-b6f7-11ea-9583-6224b304b182.png></denchmark-link>\n \n After that I was at least able to create the superuser and get to the webpage using chrome. However, I cannot use this user to login. This is the error shown:\n <denchmark-link:https://user-images.githubusercontent.com/29200372/85727760-91f2b080-b6f7-11ea-951d-df57b674073d.png></denchmark-link>\n \n So for me it is unclear if my original error is now solved or that it this is just the next step in the same error?\n \t\t"}, "comments_8": {"comment_id": 9, "comment_author": "MuadDev", "commentT": "2020-06-25T14:00:46Z", "comment_text": "\n \t\tYou original issue doesn't related with unapplied migrations, for some reason the backend server is not started properly. Unfortunately I cannot reproduce this issue. Could you do the following steps:\n \n docker-compose up -d\n wait 1-3 min\n docker exec -it cvat bash\n open  top utility and make a screenshot.\n \n \t\t"}, "comments_9": {"comment_id": 10, "comment_author": "MuadDev", "commentT": "2020-06-25T14:40:24Z", "comment_text": "\n \t\t<denchmark-link:https://user-images.githubusercontent.com/29200372/85741258-8e185b80-b702-11ea-92a2-d749c69ef7f6.png></denchmark-link>\n \n \t\t"}, "comments_10": {"comment_id": 11, "comment_author": "MuadDev", "commentT": "2020-06-26T09:59:28Z", "comment_text": "\n \t\tCould you please attach output of docker exec -it cvat bash -ic 'ps -aux' command and database logs docker logs cvat_db > db.log?\n \t\t"}, "comments_11": {"comment_id": 12, "comment_author": "MuadDev", "commentT": "2020-07-30T06:52:04Z", "comment_text": "\n \t\tHello.  I just wanted to say that I'm getting this same issue.  I've tried both the release-1.1.0 branch, and develop, and I get django.db.utils.ProgrammingError: relation \"auth_user\" does not exist as well when I try to run docker exec -it cvat bash -ic 'python3 ~/manage.py createsuperuser'.\n My environment:\n <denchmark-code>[andromodon@yogie cvat]$ docker-compose --version\n docker-compose version 1.23.2, build 1110ad01\n [andromodon@yogie cvat]$ cat /etc/lsb-release \n DISTRIB_ID=Ubuntu\n DISTRIB_RELEASE=18.04\n DISTRIB_CODENAME=bionic\n DISTRIB_DESCRIPTION=\"Ubuntu 18.04.4 LTS\"\n [andromodon@yogie cvat]$ docker --version\n Docker version 19.03.12, build 48a66213fe\n \n [andromodon@yogie cvat]$ dpkg --list | grep docker\n rc  docker                                                           1.5-1                                               amd64        System tray for KDE3/GNOME2 docklet applications\n ii  docker-ce                                                        5:19.03.12~3-0~ubuntu-bionic                        amd64        Docker: the open-source application container engine\n ii  docker-ce-cli                                                    5:19.03.12~3-0~ubuntu-bionic                        amd64        Docker CLI: the open-source application container engine\n ii  docker-compose                                                   1.17.1-2                                            all          Punctual, lightweight development environments using Docker\n rc  docker.io                                                        17.12.1-0ubuntu1                                    amd64        Linux container runtime\n ii  golang-docker-credential-helpers                                 0.5.0-2                                             amd64        Use native stores to safeguard Docker credentials\n rc  nvidia-docker2                                                   2.0.3+docker18.09.3-1                               all          nvidia-docker CLI wrapper\n ii  python-docker                                                    2.5.1-1                                             all          Python wrapper to access docker.io's control socket\n ii  python-dockerpty                                                 0.4.1-1                                             all          Pseudo-tty handler for docker Python client (Python 2.x)\n ii  python-dockerpycreds                                             0.2.1-1                                             all          Python bindings for the docker credentials store API\n </denchmark-code>\n \n I just start the server with 'docker-compose up'.  I don't bother with the -d, but I doubt that has anything to do with anything.  I haven't edited the code-base at all, but I didn't copy-paste the install steps either because I didn't want to use all of these 3rd party repos that I don't necessarily trust.  I'm using docker-ce from a previous project.  Just wondering if this helps at all.  I know it's super hard to troubleshoot issues you can't reproduce yet.\n \t\t"}, "comments_12": {"comment_id": 13, "comment_author": "MuadDev", "commentT": "2020-07-30T07:03:48Z", "comment_text": "\n \t\tMuadDev and my  look very similar to each other.  Niether of them have the \"Successfully ran command... Server URL... etc\" text in them, which seems different than what <denchmark-link:https://github.com/azhavoro>@azhavoro</denchmark-link>\n  suggests should happen.\n Here is mine:\n <denchmark-code>[andromodon@yogie cvat]$ docker logs -f cvat\n 2020-07-30 06:30:35,230 INFO RPC interface 'supervisor' initialized\n 2020-07-30 06:30:35,231 CRIT Server 'unix_http_server' running without any HTTP authentication checking\n 2020-07-30 06:30:35,231 INFO supervisord started with pid 1\n 2020-07-30 06:30:36,233 INFO spawned: 'ssh-agent' with pid 9\n 2020-07-30 06:30:36,235 INFO spawned: 'rqscheduler' with pid 10\n 2020-07-30 06:30:36,238 INFO spawned: 'runserver' with pid 11\n 2020-07-30 06:30:36,240 INFO spawned: 'rqworker_low' with pid 12\n 2020-07-30 06:30:36,243 INFO spawned: 'rqworker_default_0' with pid 13\n 2020-07-30 06:30:36,245 INFO spawned: 'rqworker_default_1' with pid 14\n 2020-07-30 06:30:36,249 INFO spawned: 'git_status_updater' with pid 15\n 2020-07-30 06:30:36,251 INFO spawned: 'clamav_update' with pid 17\n 2020-07-30 06:30:36,269 DEBG fd 41 closed, stopped monitoring <POutputDispatcher at 139725109311032 for <Subprocess at 139725109462584 with name clamav_update in state STARTING> (stdout)>\n 2020-07-30 06:30:36,269 DEBG fd 45 closed, stopped monitoring <POutputDispatcher at 139725109311176 for <Subprocess at 139725109462584 with name clamav_update in state STARTING> (stderr)>\n 2020-07-30 06:30:36,270 INFO exited: clamav_update (exit status 0; not expected)\n 2020-07-30 06:30:36,270 DEBG received SIGCLD indicating a child quit\n 2020-07-30 06:30:36,271 DEBG 'ssh-agent' stdout output:\n SSH_AUTH_SOCK=/tmp/ssh-agent.sock; export SSH_AUTH_SOCK;\n echo Agent pid 20;\n \n 2020-07-30 06:30:36,271 DEBG 'ssh-agent' stderr output:\n debug2: fd 3 setting O_NONBLOCK\n \n 2020-07-30 06:30:36,277 DEBG 'rqworker_default_1' stderr output:\n wait-for-it.sh: waiting for cvat_redis:6379 without a timeout\n \n 2020-07-30 06:30:36,278 DEBG 'rqworker_low' stderr output:\n wait-for-it.sh: waiting for cvat_redis:6379 without a timeout\n \n 2020-07-30 06:30:36,278 DEBG 'git_status_updater' stderr output:\n wait-for-it.sh: waiting for cvat_redis:6379 without a timeout\n \n 2020-07-30 06:30:36,279 DEBG 'rqscheduler' stderr output:\n wait-for-it.sh: waiting for cvat_redis:6379 without a timeout\n \n 2020-07-30 06:30:36,279 DEBG 'runserver' stderr output:\n wait-for-it.sh: waiting for cvat_db:5432 without a timeout\n \n 2020-07-30 06:30:36,281 DEBG 'rqworker_default_0' stderr output:\n wait-for-it.sh: waiting for cvat_redis:6379 without a timeout\n \n 2020-07-30 06:30:36,315 DEBG 'rqscheduler' stderr output:\n wait-for-it.sh: cvat_redis:6379 is available after 0 seconds\n \n 2020-07-30 06:30:36,316 DEBG 'runserver' stderr output:\n wait-for-it.sh: cvat_db:5432 is available after 0 seconds\n \n 2020-07-30 06:30:36,318 DEBG 'rqworker_low' stderr output:\n wait-for-it.sh: cvat_redis:6379 is available after 0 seconds\n \n 2020-07-30 06:30:36,319 DEBG 'rqworker_default_0' stderr output:\n wait-for-it.sh: cvat_redis:6379 is available after 0 seconds\n \n 2020-07-30 06:30:36,325 DEBG 'rqworker_low' stderr output:\n bash: cannot set terminal process group (-1): Inappropriate ioctl for device\n bash: no job control in this shell\n \n 2020-07-30 06:30:36,325 DEBG 'rqworker_default_0' stderr output:\n bash: cannot set terminal process group (-1): Inappropriate ioctl for device\n bash: no job control in this shell\n \n 2020-07-30 06:30:36,325 DEBG 'git_status_updater' stderr output:\n wait-for-it.sh: cvat_redis:6379 is available after 0 seconds\n \n 2020-07-30 06:30:36,325 DEBG 'runserver' stderr output:\n bash: cannot set terminal process group (-1): Inappropriate ioctl for device\n bash: no job control in this shell\n \n 2020-07-30 06:30:36,327 DEBG 'rqscheduler' stderr output:\n bash: cannot set terminal process group (-1): Inappropriate ioctl for device\n bash: no job control in this shell\n \n 2020-07-30 06:30:36,329 DEBG 'rqworker_default_1' stderr output:\n wait-for-it.sh: cvat_redis:6379 is available after 0 seconds\n \n 2020-07-30 06:30:36,331 DEBG 'git_status_updater' stderr output:\n bash: cannot set terminal process group (-1): Inappropriate ioctl for device\n bash: no job control in this shell\n \n 2020-07-30 06:30:36,332 DEBG 'rqworker_default_1' stderr output:\n bash: cannot set terminal process group (-1): Inappropriate ioctl for device\n bash: no job control in this shell\n \n 2020-07-30 06:30:36,771 DEBG 'ssh-agent' stderr output:\n debug2: fd 4 setting O_NONBLOCK\n \n 2020-07-30 06:30:36,813 DEBG 'rqscheduler' stderr output:\n 06:30:36 Registering birth\n \n 2020-07-30 06:30:37,814 INFO success: ssh-agent entered RUNNING state, process has stayed up for > than 1 seconds (startsecs)\n 2020-07-30 06:30:37,814 INFO success: rqscheduler entered RUNNING state, process has stayed up for > than 1 seconds (startsecs)\n 2020-07-30 06:30:37,814 INFO success: runserver entered RUNNING state, process has stayed up for > than 1 seconds (startsecs)\n 2020-07-30 06:30:37,814 INFO success: rqworker_low entered RUNNING state, process has stayed up for > than 1 seconds (startsecs)\n 2020-07-30 06:30:37,815 INFO success: rqworker_default_0 entered RUNNING state, process has stayed up for > than 1 seconds (startsecs)\n 2020-07-30 06:30:37,815 INFO success: rqworker_default_1 entered RUNNING state, process has stayed up for > than 1 seconds (startsecs)\n 2020-07-30 06:30:37,815 INFO success: git_status_updater entered RUNNING state, process has stayed up for > than 1 seconds (startsecs)\n 2020-07-30 06:30:37,819 INFO spawned: 'clamav_update' with pid 78\n 2020-07-30 06:30:37,827 DEBG fd 41 closed, stopped monitoring <POutputDispatcher at 139725109311320 for <Subprocess at 139725109462584 with name clamav_update in state STARTING> (stdout)>\n 2020-07-30 06:30:37,827 DEBG fd 45 closed, stopped monitoring <POutputDispatcher at 139725109310888 for <Subprocess at 139725109462584 with name clamav_update in state STARTING> (stderr)>\n 2020-07-30 06:30:37,827 INFO exited: clamav_update (exit status 0; not expected)\n 2020-07-30 06:30:37,827 DEBG received SIGCLD indicating a child quit\n 2020-07-30 06:30:39,833 INFO spawned: 'clamav_update' with pid 79\n 2020-07-30 06:30:39,843 DEBG fd 41 closed, stopped monitoring <POutputDispatcher at 139725109311392 for <Subprocess at 139725109462584 with name clamav_update in state STARTING> (stdout)>\n 2020-07-30 06:30:39,843 DEBG fd 45 closed, stopped monitoring <POutputDispatcher at 139725109311176 for <Subprocess at 139725109462584 with name clamav_update in state STARTING> (stderr)>\n 2020-07-30 06:30:39,843 INFO exited: clamav_update (exit status 0; not expected)\n 2020-07-30 06:30:39,843 DEBG received SIGCLD indicating a child quit\n 2020-07-30 06:30:42,851 INFO spawned: 'clamav_update' with pid 80\n 2020-07-30 06:30:42,860 DEBG fd 41 closed, stopped monitoring <POutputDispatcher at 139725109311464 for <Subprocess at 139725109462584 with name clamav_update in state STARTING> (stdout)>\n 2020-07-30 06:30:42,861 DEBG fd 45 closed, stopped monitoring <POutputDispatcher at 139725109310888 for <Subprocess at 139725109462584 with name clamav_update in state STARTING> (stderr)>\n 2020-07-30 06:30:42,861 INFO exited: clamav_update (exit status 0; not expected)\n 2020-07-30 06:30:42,861 DEBG received SIGCLD indicating a child quit\n 2020-07-30 06:30:43,863 INFO gave up: clamav_update entered FATAL state, too many start retries too quickly\n 2020-07-30 06:34:14,274 WARN received SIGTERM indicating exit request\n 2020-07-30 06:34:14,274 INFO waiting for ssh-agent, rqscheduler, runserver, rqworker_low, rqworker_default_0, rqworker_default_1, git_status_updater to die\n 2020-07-30 06:34:15,275 DEBG killing git_status_updater (pid 15) with signal SIGTERM\n 2020-07-30 06:34:15,277 DEBG fd 36 closed, stopped monitoring <POutputDispatcher at 139725109310312 for <Subprocess at 139725109462728 with name git_status_updater in state STOPPING> (stdout)>\n 2020-07-30 06:34:15,277 DEBG fd 40 closed, stopped monitoring <POutputDispatcher at 139725109310600 for <Subprocess at 139725109462728 with name git_status_updater in state STOPPING> (stderr)>\n 2020-07-30 06:34:15,277 INFO stopped: git_status_updater (terminated by SIGTERM)\n 2020-07-30 06:34:15,277 DEBG received SIGCLD indicating a child quit\n 2020-07-30 06:34:15,277 DEBG killing rqworker_default_1 (pid 14) with signal SIGTERM\n 2020-07-30 06:34:15,277 DEBG killing rqworker_default_0 (pid 13) with signal SIGTERM\n 2020-07-30 06:34:15,278 DEBG fd 26 closed, stopped monitoring <POutputDispatcher at 139725109247656 for <Subprocess at 139725109463016 with name rqworker_default_0 in state STOPPING> (stdout)>\n 2020-07-30 06:34:15,278 DEBG fd 30 closed, stopped monitoring <POutputDispatcher at 139725109247944 for <Subprocess at 139725109463016 with name rqworker_default_0 in state STOPPING> (stderr)>\n 2020-07-30 06:34:15,278 DEBG fd 31 closed, stopped monitoring <POutputDispatcher at 139725109309736 for <Subprocess at 139725109463088 with name rqworker_default_1 in state STOPPING> (stdout)>\n 2020-07-30 06:34:15,278 DEBG fd 35 closed, stopped monitoring <POutputDispatcher at 139725109310024 for <Subprocess at 139725109463088 with name rqworker_default_1 in state STOPPING> (stderr)>\n 2020-07-30 06:34:15,279 INFO stopped: rqworker_default_0 (terminated by SIGTERM)\n 2020-07-30 06:34:15,279 INFO stopped: rqworker_default_1 (terminated by SIGTERM)\n 2020-07-30 06:34:15,279 DEBG received SIGCLD indicating a child quit\n 2020-07-30 06:34:15,279 DEBG killing rqworker_low (pid 12) with signal SIGTERM\n 2020-07-30 06:34:15,280 DEBG fd 21 closed, stopped monitoring <POutputDispatcher at 139725109247080 for <Subprocess at 139725109463232 with name rqworker_low in state STOPPING> (stdout)>\n 2020-07-30 06:34:15,280 DEBG fd 25 closed, stopped monitoring <POutputDispatcher at 139725109247368 for <Subprocess at 139725109463232 with name rqworker_low in state STOPPING> (stderr)>\n 2020-07-30 06:34:15,280 INFO stopped: rqworker_low (terminated by SIGTERM)\n 2020-07-30 06:34:15,280 DEBG received SIGCLD indicating a child quit\n 2020-07-30 06:34:15,280 DEBG killing runserver (pid 11) with signal SIGTERM\n 2020-07-30 06:34:17,283 INFO waiting for ssh-agent, rqscheduler, runserver to die\n 2020-07-30 06:34:20,288 INFO waiting for ssh-agent, rqscheduler, runserver to die\n 2020-07-30 06:34:23,293 INFO waiting for ssh-agent, rqscheduler, runserver to die\n Unlinking stale socket /tmp/supervisord/supervisor.sock\n 2020-07-30 06:35:59,637 INFO RPC interface 'supervisor' initialized\n 2020-07-30 06:35:59,637 CRIT Server 'unix_http_server' running without any HTTP authentication checking\n 2020-07-30 06:35:59,637 INFO supervisord started with pid 1\n 2020-07-30 06:36:00,641 INFO spawned: 'ssh-agent' with pid 8\n 2020-07-30 06:36:00,644 INFO spawned: 'rqscheduler' with pid 9\n 2020-07-30 06:36:00,648 INFO spawned: 'runserver' with pid 10\n 2020-07-30 06:36:00,650 INFO spawned: 'rqworker_low' with pid 11\n 2020-07-30 06:36:00,652 INFO spawned: 'rqworker_default_0' with pid 12\n 2020-07-30 06:36:00,658 INFO spawned: 'rqworker_default_1' with pid 15\n 2020-07-30 06:36:00,660 INFO spawned: 'git_status_updater' with pid 17\n 2020-07-30 06:36:00,665 INFO spawned: 'clamav_update' with pid 19\n 2020-07-30 06:36:00,671 DEBG 'ssh-agent' stdout output:\n SSH_AUTH_SOCK=/tmp/ssh-agent.sock; export SSH_AUTH_SOCK;\n echo Agent pid 18;\n \n 2020-07-30 06:36:00,672 DEBG 'ssh-agent' stderr output:\n debug2: fd 3 setting O_NONBLOCK\n \n 2020-07-30 06:36:00,676 DEBG 'rqscheduler' stderr output:\n wait-for-it.sh: waiting for cvat_redis:6379 without a timeout\n \n 2020-07-30 06:36:00,677 DEBG fd 41 closed, stopped monitoring <POutputDispatcher at 139855060321848 for <Subprocess at 139855060469304 with name clamav_update in state STARTING> (stdout)>\n 2020-07-30 06:36:00,677 DEBG fd 45 closed, stopped monitoring <POutputDispatcher at 139855060321992 for <Subprocess at 139855060469304 with name clamav_update in state STARTING> (stderr)>\n 2020-07-30 06:36:00,677 INFO exited: clamav_update (exit status 0; not expected)\n 2020-07-30 06:36:00,678 DEBG received SIGCLD indicating a child quit\n 2020-07-30 06:36:00,681 DEBG 'runserver' stderr output:\n wait-for-it.sh: waiting for cvat_db:5432 without a timeout\n \n 2020-07-30 06:36:00,682 DEBG 'rqworker_low' stderr output:\n wait-for-it.sh: waiting for cvat_redis:6379 without a timeout\n \n 2020-07-30 06:36:00,682 DEBG 'rqworker_default_0' stderr output:\n wait-for-it.sh: waiting for cvat_redis:6379 without a timeout\n \n 2020-07-30 06:36:00,682 DEBG 'rqworker_default_1' stderr output:\n wait-for-it.sh: waiting for cvat_redis:6379 without a timeout\n \n 2020-07-30 06:36:00,688 DEBG 'git_status_updater' stderr output:\n wait-for-it.sh: waiting for cvat_redis:6379 without a timeout\n \n 2020-07-30 06:36:00,689 DEBG 'runserver' stderr output:\n wait-for-it.sh: cvat_db:5432 is available after 0 seconds\n \n 2020-07-30 06:36:00,689 DEBG 'rqscheduler' stderr output:\n wait-for-it.sh: cvat_redis:6379 is available after 0 seconds\n \n 2020-07-30 06:36:00,693 DEBG 'rqscheduler' stderr output:\n bash: cannot set terminal process group (-1): Inappropriate ioctl for device\n bash: no job control in this shell\n \n 2020-07-30 06:36:00,693 DEBG 'runserver' stderr output:\n bash: cannot set terminal process group (-1): Inappropriate ioctl for device\n bash: no job control in this shell\n \n 2020-07-30 06:36:00,693 DEBG 'rqworker_default_1' stderr output:\n wait-for-it.sh: cvat_redis:6379 is available after 0 seconds\n \n 2020-07-30 06:36:00,695 DEBG 'rqworker_default_0' stderr output:\n wait-for-it.sh: cvat_redis:6379 is available after 0 seconds\n \n 2020-07-30 06:36:00,698 DEBG 'rqworker_low' stderr output:\n wait-for-it.sh: cvat_redis:6379 is available after 0 seconds\n \n 2020-07-30 06:36:00,698 DEBG 'rqworker_default_0' stderr output:\n bash: cannot set terminal process group (-1): Inappropriate ioctl for device\n bash: no job control in this shell\n \n 2020-07-30 06:36:00,698 DEBG 'rqworker_default_1' stderr output:\n bash: cannot set terminal process group (-1): Inappropriate ioctl for device\n bash: no job control in this shell\n \n 2020-07-30 06:36:00,701 DEBG 'rqworker_low' stderr output:\n bash: cannot set terminal process group (-1): Inappropriate ioctl for device\n bash: no job control in this shell\n \n 2020-07-30 06:36:00,703 DEBG 'git_status_updater' stderr output:\n wait-for-it.sh: cvat_redis:6379 is available after 0 seconds\n \n 2020-07-30 06:36:00,714 DEBG 'git_status_updater' stderr output:\n bash: cannot set terminal process group (-1): Inappropriate ioctl for device\n bash: no job control in this shell\n \n 2020-07-30 06:36:01,026 DEBG 'ssh-agent' stderr output:\n debug2: fd 4 setting O_NONBLOCK\n \n 2020-07-30 06:36:01,090 DEBG 'rqscheduler' stderr output:\n 06:36:01 Registering birth\n \n 2020-07-30 06:36:02,091 INFO success: ssh-agent entered RUNNING state, process has stayed up for > than 1 seconds (startsecs)\n 2020-07-30 06:36:02,091 INFO success: rqscheduler entered RUNNING state, process has stayed up for > than 1 seconds (startsecs)\n 2020-07-30 06:36:02,091 INFO success: runserver entered RUNNING state, process has stayed up for > than 1 seconds (startsecs)\n 2020-07-30 06:36:02,091 INFO success: rqworker_low entered RUNNING state, process has stayed up for > than 1 seconds (startsecs)\n 2020-07-30 06:36:02,091 INFO success: rqworker_default_0 entered RUNNING state, process has stayed up for > than 1 seconds (startsecs)\n 2020-07-30 06:36:02,091 INFO success: rqworker_default_1 entered RUNNING state, process has stayed up for > than 1 seconds (startsecs)\n 2020-07-30 06:36:02,091 INFO success: git_status_updater entered RUNNING state, process has stayed up for > than 1 seconds (startsecs)\n 2020-07-30 06:36:02,093 INFO spawned: 'clamav_update' with pid 77\n 2020-07-30 06:36:02,098 DEBG fd 41 closed, stopped monitoring <POutputDispatcher at 139855060322136 for <Subprocess at 139855060469304 with name clamav_update in state STARTING> (stdout)>\n 2020-07-30 06:36:02,098 DEBG fd 45 closed, stopped monitoring <POutputDispatcher at 139855060321704 for <Subprocess at 139855060469304 with name clamav_update in state STARTING> (stderr)>\n 2020-07-30 06:36:02,099 INFO exited: clamav_update (exit status 0; not expected)\n 2020-07-30 06:36:02,099 DEBG received SIGCLD indicating a child quit\n 2020-07-30 06:36:04,103 INFO spawned: 'clamav_update' with pid 78\n 2020-07-30 06:36:04,113 DEBG fd 41 closed, stopped monitoring <POutputDispatcher at 139855060322208 for <Subprocess at 139855060469304 with name clamav_update in state STARTING> (stdout)>\n 2020-07-30 06:36:04,113 DEBG fd 45 closed, stopped monitoring <POutputDispatcher at 139855060321992 for <Subprocess at 139855060469304 with name clamav_update in state STARTING> (stderr)>\n 2020-07-30 06:36:04,113 INFO exited: clamav_update (exit status 0; not expected)\n 2020-07-30 06:36:04,113 DEBG received SIGCLD indicating a child quit\n 2020-07-30 06:36:07,119 INFO spawned: 'clamav_update' with pid 79\n 2020-07-30 06:36:07,125 DEBG fd 41 closed, stopped monitoring <POutputDispatcher at 139855060322280 for <Subprocess at 139855060469304 with name clamav_update in state STARTING> (stdout)>\n 2020-07-30 06:36:07,126 DEBG fd 45 closed, stopped monitoring <POutputDispatcher at 139855060321704 for <Subprocess at 139855060469304 with name clamav_update in state STARTING> (stderr)>\n 2020-07-30 06:36:07,126 INFO exited: clamav_update (exit status 0; not expected)\n 2020-07-30 06:36:07,126 DEBG received SIGCLD indicating a child quit\n 2020-07-30 06:36:08,127 INFO gave up: clamav_update entered FATAL state, too many start retries too quickly\n 2020-07-30 06:53:05,734 WARN received SIGTERM indicating exit request\n 2020-07-30 06:53:05,735 INFO waiting for ssh-agent, rqscheduler, runserver, rqworker_low, rqworker_default_0, rqworker_default_1, git_status_updater to die\n 2020-07-30 06:53:06,736 DEBG killing git_status_updater (pid 17) with signal SIGTERM\n 2020-07-30 06:53:06,739 DEBG fd 36 closed, stopped monitoring <POutputDispatcher at 139855060321128 for <Subprocess at 139855060469448 with name git_status_updater in state STOPPING> (stdout)>\n 2020-07-30 06:53:06,739 DEBG fd 40 closed, stopped monitoring <POutputDispatcher at 139855060321416 for <Subprocess at 139855060469448 with name git_status_updater in state STOPPING> (stderr)>\n 2020-07-30 06:53:06,739 INFO stopped: git_status_updater (terminated by SIGTERM)\n 2020-07-30 06:53:06,739 DEBG received SIGCLD indicating a child quit\n 2020-07-30 06:53:06,739 DEBG killing rqworker_default_1 (pid 15) with signal SIGTERM\n 2020-07-30 06:53:06,740 DEBG killing rqworker_default_0 (pid 12) with signal SIGTERM\n 2020-07-30 06:53:06,741 DEBG fd 26 closed, stopped monitoring <POutputDispatcher at 139855060254376 for <Subprocess at 139855060469736 with name rqworker_default_0 in state STOPPING> (stdout)>\n 2020-07-30 06:53:06,741 DEBG fd 30 closed, stopped monitoring <POutputDispatcher at 139855060254664 for <Subprocess at 139855060469736 with name rqworker_default_0 in state STOPPING> (stderr)>\n 2020-07-30 06:53:06,741 DEBG fd 35 closed, stopped monitoring <POutputDispatcher at 139855060320840 for <Subprocess at 139855060469808 with name rqworker_default_1 in state STOPPING> (stderr)>\n 2020-07-30 06:53:06,741 INFO stopped: rqworker_default_0 (terminated by SIGTERM)\n 2020-07-30 06:53:06,741 DEBG fd 31 closed, stopped monitoring <POutputDispatcher at 139855060320552 for <Subprocess at 139855060469808 with name rqworker_default_1 in state STOPPING> (stdout)>\n 2020-07-30 06:53:06,741 INFO stopped: rqworker_default_1 (terminated by SIGTERM)\n 2020-07-30 06:53:06,741 DEBG received SIGCLD indicating a child quit\n 2020-07-30 06:53:06,742 DEBG killing rqworker_low (pid 11) with signal SIGTERM\n 2020-07-30 06:53:06,742 DEBG 'ssh-agent' stderr output:\n debug1: XXX shrink: 3 < 4\n \n 2020-07-30 06:53:06,742 INFO reaped unknown pid 75\n 2020-07-30 06:53:06,742 DEBG received SIGCLD indicating a child quit\n 2020-07-30 06:53:06,742 DEBG fd 21 closed, stopped monitoring <POutputDispatcher at 139855060253800 for <Subprocess at 139855060469952 with name rqworker_low in state STOPPING> (stdout)>\n 2020-07-30 06:53:06,742 DEBG fd 25 closed, stopped monitoring <POutputDispatcher at 139855060254088 for <Subprocess at 139855060469952 with name rqworker_low in state STOPPING> (stderr)>\n 2020-07-30 06:53:06,742 INFO stopped: rqworker_low (terminated by SIGTERM)\n 2020-07-30 06:53:06,743 DEBG received SIGCLD indicating a child quit\n 2020-07-30 06:53:06,743 DEBG killing runserver (pid 10) with signal SIGTERM\n 2020-07-30 06:53:06,746 DEBG 'ssh-agent' stderr output:\n debug2: fd 4 setting O_NONBLOCK\n \n 2020-07-30 06:53:08,748 INFO waiting for ssh-agent, rqscheduler, runserver to die\n 2020-07-30 06:53:11,753 INFO waiting for ssh-agent, rqscheduler, runserver to die\n 2020-07-30 06:53:14,758 INFO waiting for ssh-agent, rqscheduler, runserver to die\n Unlinking stale socket /tmp/supervisord/supervisor.sock\n 2020-07-30 06:53:26,725 INFO RPC interface 'supervisor' initialized\n 2020-07-30 06:53:26,725 CRIT Server 'unix_http_server' running without any HTTP authentication checking\n 2020-07-30 06:53:26,725 INFO supervisord started with pid 1\n 2020-07-30 06:53:27,729 INFO spawned: 'ssh-agent' with pid 8\n 2020-07-30 06:53:27,734 INFO spawned: 'rqscheduler' with pid 9\n 2020-07-30 06:53:27,738 INFO spawned: 'runserver' with pid 10\n 2020-07-30 06:53:27,740 INFO spawned: 'rqworker_low' with pid 11\n 2020-07-30 06:53:27,742 INFO spawned: 'rqworker_default_0' with pid 12\n 2020-07-30 06:53:27,744 INFO spawned: 'rqworker_default_1' with pid 15\n 2020-07-30 06:53:27,748 INFO spawned: 'git_status_updater' with pid 16\n 2020-07-30 06:53:27,751 INFO spawned: 'clamav_update' with pid 17\n 2020-07-30 06:53:27,763 DEBG 'ssh-agent' stdout output:\n SSH_AUTH_SOCK=/tmp/ssh-agent.sock; export SSH_AUTH_SOCK;\n echo Agent pid 19;\n \n 2020-07-30 06:53:27,766 DEBG 'ssh-agent' stderr output:\n debug2: fd 3 setting O_NONBLOCK\n \n 2020-07-30 06:53:27,768 DEBG 'rqscheduler' stderr output:\n wait-for-it.sh: waiting for cvat_redis:6379 without a timeout\n \n 2020-07-30 06:53:27,774 DEBG 'rqworker_low' stderr output:\n wait-for-it.sh: waiting for cvat_redis:6379 without a timeout\n \n 2020-07-30 06:53:27,776 DEBG fd 41 closed, stopped monitoring <POutputDispatcher at 140553271248440 for <Subprocess at 140553271395896 with name clamav_update in state STARTING> (stdout)>\n 2020-07-30 06:53:27,776 DEBG fd 45 closed, stopped monitoring <POutputDispatcher at 140553271248584 for <Subprocess at 140553271395896 with name clamav_update in state STARTING> (stderr)>\n 2020-07-30 06:53:27,776 INFO exited: clamav_update (exit status 0; not expected)\n 2020-07-30 06:53:27,776 DEBG received SIGCLD indicating a child quit\n 2020-07-30 06:53:27,779 DEBG 'rqworker_default_1' stderr output:\n wait-for-it.sh: waiting for cvat_redis:6379 without a timeout\n \n 2020-07-30 06:53:27,787 DEBG 'runserver' stderr output:\n wait-for-it.sh: waiting for cvat_db:5432 without a timeout\n \n 2020-07-30 06:53:27,788 DEBG 'git_status_updater' stderr output:\n wait-for-it.sh: waiting for cvat_redis:6379 without a timeout\n \n 2020-07-30 06:53:27,789 DEBG 'rqworker_low' stderr output:\n wait-for-it.sh: cvat_redis:6379 is available after 0 seconds\n \n 2020-07-30 06:53:27,789 DEBG 'rqworker_default_1' stderr output:\n wait-for-it.sh: cvat_redis:6379 is available after 0 seconds\n \n 2020-07-30 06:53:27,792 DEBG 'rqscheduler' stderr output:\n wait-for-it.sh: cvat_redis:6379 is available after 0 seconds\n \n 2020-07-30 06:53:27,793 DEBG 'rqworker_default_1' stderr output:\n bash: cannot set terminal process group (-1): Inappropriate ioctl for device\n bash: no job control in this shell\n \n 2020-07-30 06:53:27,796 DEBG 'rqworker_low' stderr output:\n bash: cannot set terminal process group (-1): Inappropriate ioctl for device\n bash: no job control in this shell\n \n 2020-07-30 06:53:27,797 DEBG 'rqworker_default_0' stderr output:\n wait-for-it.sh: waiting for cvat_redis:6379 without a timeout\n \n 2020-07-30 06:53:27,800 DEBG 'rqscheduler' stderr output:\n bash: cannot set terminal process group (-1): Inappropriate ioctl for device\n bash: no job control in this shell\n \n 2020-07-30 06:53:27,801 DEBG 'git_status_updater' stderr output:\n wait-for-it.sh: cvat_redis:6379 is available after 0 seconds\n \n 2020-07-30 06:53:27,803 DEBG 'runserver' stderr output:\n wait-for-it.sh: cvat_db:5432 is available after 0 seconds\n \n 2020-07-30 06:53:27,804 DEBG 'git_status_updater' stderr output:\n bash: cannot set terminal process group (-1): Inappropriate ioctl for device\n bash: no job control in this shell\n \n 2020-07-30 06:53:27,805 DEBG 'runserver' stderr output:\n bash: cannot set terminal process group (-1): Inappropriate ioctl for device\n bash: no job control in this shell\n \n 2020-07-30 06:53:27,817 DEBG 'rqworker_default_0' stderr output:\n wait-for-it.sh: cvat_redis:6379 is available after 0 seconds\n \n 2020-07-30 06:53:27,819 DEBG 'rqworker_default_0' stderr output:\n bash: cannot set terminal process group (-1): Inappropriate ioctl for device\n bash: no job control in this shell\n \n 2020-07-30 06:53:28,073 DEBG 'ssh-agent' stderr output:\n debug2: fd 4 setting O_NONBLOCK\n \n 2020-07-30 06:53:28,142 DEBG 'rqscheduler' stderr output:\n 06:53:28 Registering birth\n \n 2020-07-30 06:53:29,144 INFO success: ssh-agent entered RUNNING state, process has stayed up for > than 1 seconds (start\n 2020-07-30 06:53:29,144 INFO success: rqscheduler entered RUNNING state, process has stayed up for > than 1 seconds (sta\n 2020-07-30 06:53:29,144 INFO success: runserver entered RUNNING state, process has stayed up for > than 1 seconds (start\n 2020-07-30 06:53:29,144 INFO success: rqworker_low entered RUNNING state, process has stayed up for > than 1 seconds (st\n 2020-07-30 06:53:29,144 INFO success: rqworker_default_0 entered RUNNING state, process has stayed up for > than 1 secon\n 2020-07-30 06:53:29,144 INFO success: rqworker_default_1 entered RUNNING state, process has stayed up for > than 1 secon\n 2020-07-30 06:53:29,144 INFO success: git_status_updater entered RUNNING state, process has stayed up for > than 1 secon\n 2020-07-30 06:53:29,145 INFO spawned: 'clamav_update' with pid 77\n 2020-07-30 06:53:29,152 DEBG fd 41 closed, stopped monitoring <POutputDispatcher at 140553271248728 for <Subprocess at 1\n 2020-07-30 06:53:29,152 DEBG fd 45 closed, stopped monitoring <POutputDispatcher at 140553271248296 for <Subprocess at 1\n 2020-07-30 06:53:29,152 INFO exited: clamav_update (exit status 0; not expected)\n 2020-07-30 06:53:29,152 DEBG received SIGCLD indicating a child quit\n 2020-07-30 06:53:31,156 INFO spawned: 'clamav_update' with pid 78\n 2020-07-30 06:53:31,162 DEBG fd 41 closed, stopped monitoring <POutputDispatcher at 140553271248800 for <Subprocess at 1\n 2020-07-30 06:53:31,162 DEBG fd 45 closed, stopped monitoring <POutputDispatcher at 140553271248584 for <Subprocess at 1\n 2020-07-30 06:53:31,162 INFO exited: clamav_update (exit status 0; not expected)\n 2020-07-30 06:53:31,162 DEBG received SIGCLD indicating a child quit\n 2020-07-30 06:53:34,168 INFO spawned: 'clamav_update' with pid 79\n 2020-07-30 06:53:34,181 DEBG fd 41 closed, stopped monitoring <POutputDispatcher at 140553271248872 for <Subprocess at 1\n 2020-07-30 06:53:34,181 DEBG fd 45 closed, stopped monitoring <POutputDispatcher at 140553271248296 for <Subprocess at 1\n 2020-07-30 06:53:34,181 INFO exited: clamav_update (exit status 0; not expected)\n 2020-07-30 06:53:34,181 DEBG received SIGCLD indicating a child quit\n 2020-07-30 06:53:35,183 INFO gave up: clamav_update entered FATAL state, too many start retries too quickly\n </denchmark-code>\n \n Also, my docker logs cvat_db:\n <denchmark-code>[andromodon@yogie cvat]$ docker logs cvat_db\n \n PostgreSQL Database directory appears to contain a database; Skipping initialization\n \n 2020-07-30 06:30:33.132 UTC [1] LOG:  listening on IPv4 address \"0.0.0.0\", port 5432\n 2020-07-30 06:30:33.132 UTC [1] LOG:  listening on IPv6 address \"::\", port 5432\n 2020-07-30 06:30:33.142 UTC [1] LOG:  listening on Unix socket \"/var/run/postgresql/.s.PGSQL.5432\"\n 2020-07-30 06:30:33.177 UTC [20] LOG:  database system was shut down at 2020-07-21 07:58:52 UTC\n 2020-07-30 06:30:33.196 UTC [1] LOG:  database system is ready to accept connections\n 2020-07-30 06:30:36.310 UTC [27] LOG:  incomplete startup packet\n 2020-07-30 06:33:10.166 UTC [28] ERROR:  relation \"auth_user\" does not exist at character 280\n 2020-07-30 06:33:10.166 UTC [28] STATEMENT:  SELECT \"auth_user\".\"id\", \"auth_user\".\"password\", \"auth_user\".\"last_login\", \"auth_user\".\"is_superuser\", \"auth_user\".\"username\", \"auth_user\".\"first_name\", \"auth_user\".\"last_name\", \"auth_user\".\"email\", \"auth_user\".\"is_staff\", \"auth_user\".\"is_active\", \"auth_user\".\"date_joined\" FROM \"auth_user\" WHERE \"auth_user\".\"username\" = 'django'\n 2020-07-30 06:34:24.712 UTC [1] LOG:  received smart shutdown request\n 2020-07-30 06:34:24.715 UTC [1] LOG:  worker process: logical replication launcher (PID 26) exited with exit code 1\n 2020-07-30 06:34:24.715 UTC [21] LOG:  shutting down\n 2020-07-30 06:34:24.769 UTC [1] LOG:  database system is shut down\n \n PostgreSQL Database directory appears to contain a database; Skipping initialization\n \n 2020-07-30 06:35:58.197 UTC [1] LOG:  listening on IPv4 address \"0.0.0.0\", port 5432\n 2020-07-30 06:35:58.197 UTC [1] LOG:  listening on IPv6 address \"::\", port 5432\n 2020-07-30 06:35:58.216 UTC [1] LOG:  listening on Unix socket \"/var/run/postgresql/.s.PGSQL.5432\"\n 2020-07-30 06:35:58.256 UTC [20] LOG:  database system was shut down at 2020-07-30 06:34:24 UTC\n 2020-07-30 06:35:58.279 UTC [1] LOG:  database system is ready to accept connections\n 2020-07-30 06:36:00.686 UTC [27] LOG:  incomplete startup packet\n 2020-07-30 06:36:36.556 UTC [28] ERROR:  relation \"auth_user\" does not exist at character 280                                                                          \n 2020-07-30 06:36:36.556 UTC [28] STATEMENT:  SELECT \"auth_user\".\"id\", \"auth_user\".\"password\", \"auth_user\".\"last_login\", \"auth_user\".\"is_superuser\", \"auth_user\".\"username\", \"auth_user\".\"first_name\", \"auth_user\".\"last_name\", \"auth_user\".\"email\", \"auth_user\".\"is_staff\", \"auth_user\".\"is_active\", \"auth_user\".\"date_joined\" FROM \"auth_user\" WHERE \"auth_user\".\"username\" = 'django'                                                                                                                                            \n 2020-07-30 06:43:16.986 UTC [36] ERROR:  relation \"auth_user\" does not exist at character 280                                                                            \n 2020-07-30 06:43:16.986 UTC [36] STATEMENT:  SELECT \"auth_user\".\"id\", \"auth_user\".\"password\", \"auth_user\".\"last_login\", \"auth_user\".\"is_superuser\", \"auth_user\".\"username\", \"auth_user\".\"first_name\", \"auth_user\".\"last_name\", \"auth_user\".\"email\", \"auth_user\".\"is_staff\", \"auth_user\".\"is_active\", \"auth_user\".\"date_joined\" FROM \"auth_user\" WHERE \"auth_user\".\"username\" = 'django'                                                                                                                                                \n 2020-07-30 06:44:33.529 UTC [38] ERROR:  relation \"auth_user\" does not exist at character 280                                                                              \n 2020-07-30 06:44:33.529 UTC [38] STATEMENT:  SELECT \"auth_user\".\"id\", \"auth_user\".\"password\", \"auth_user\".\"last_login\", \"auth_user\".\"is_superuser\", \"auth_user\".\"username\", \"auth_user\".\"first_name\", \"auth_user\".\"last_name\", \"auth_user\".\"email\", \"auth_user\".\"is_staff\", \"auth_user\".\"is_active\", \"auth_user\".\"date_joined\" FROM \"auth_user\" WHERE \"auth_user\".\"username\" = 'django'                                                                                                                                                   \n 2020-07-30 06:48:33.871 UTC [43] ERROR:  relation \"auth_user\" does not exist at character 280                                                                                 \n 2020-07-30 06:48:33.871 UTC [43] STATEMENT:  SELECT \"auth_user\".\"id\", \"auth_user\".\"password\", \"auth_user\".\"last_login\", \"auth_user\".\"is_superuser\", \"auth_user\".\"username\", \"auth_user\".\"first_name\", \"auth_user\".\"last_name\", \"auth_user\".\"email\", \"auth_user\".\"is_staff\", \"auth_user\".\"is_active\", \"auth_user\".\"date_joined\" FROM \"auth_user\" WHERE \"auth_user\".\"username\" = 'django'\n 2020-07-30 06:53:16.174 UTC [1] LOG:  received smart shutdown request\n 2020-07-30 06:53:16.182 UTC [1] LOG:  worker process: logical replication launcher (PID 26) exited with exit code 1\n 2020-07-30 06:53:16.183 UTC [21] LOG:  shutting down\n 2020-07-30 06:53:16.223 UTC [1] LOG:  database system is shut down\n \n PostgreSQL Database directory appears to contain a database; Skipping initialization\n \n 2020-07-30 06:53:24.555 UTC [1] LOG:  listening on IPv4 address \"0.0.0.0\", port 5432\n 2020-07-30 06:53:24.555 UTC [1] LOG:  listening on IPv6 address \"::\", port 5432\n 2020-07-30 06:53:24.572 UTC [1] LOG:  listening on Unix socket \"/var/run/postgresql/.s.PGSQL.5432\"\n 2020-07-30 06:53:24.601 UTC [21] LOG:  database system was shut down at 2020-07-30 06:53:16 UTC\n 2020-07-30 06:53:24.611 UTC [1] LOG:  database system is ready to accept connections\n 2020-07-30 06:53:27.797 UTC [28] LOG:  incomplete startup packet\n </denchmark-code>\n \n I hope I'm not stepping on your guys's conversation by adding my experience of the same error.\n \t\t"}, "comments_13": {"comment_id": 14, "comment_author": "MuadDev", "commentT": "2020-07-30T07:16:21Z", "comment_text": "\n \t\tUpdate:  I also tried the migrate command <denchmark-link:https://github.com/MuadDev>@MuadDev</denchmark-link>\n  came up with, and these migrations ran:\n <denchmark-code>andromodon@yogie cvat]$ docker exec -it cvat bash -ic '/usr/bin/python3 ~/manage.py migrate'\n Operations to perform:\n   Apply all migrations: account, admin, auth, authtoken, contenttypes, engine, git, sessions, sites, socialaccount\n Running migrations:\n   Applying contenttypes.0001_initial... OK\n   Applying auth.0001_initial... OK\n   Applying account.0001_initial... OK\n   Applying account.0002_email_max_length... OK\n   Applying admin.0001_initial... OK\n   Applying admin.0002_logentry_remove_auto_add... OK\n   Applying admin.0003_logentry_add_action_flag_choices... OK\n   Applying contenttypes.0002_remove_content_type_name... OK\n   Applying auth.0002_alter_permission_name_max_length... OK\n   Applying auth.0003_alter_user_email_max_length... OK\n   Applying auth.0004_alter_user_username_opts... OK\n   Applying auth.0005_alter_user_last_login_null... OK\n   Applying auth.0006_require_contenttypes_0002... OK\n   Applying auth.0007_alter_validators_add_error_messages... OK\n   Applying auth.0008_alter_user_username_max_length... OK\n   Applying auth.0009_alter_user_last_name_max_length... OK\n   Applying auth.0010_alter_group_name_max_length... OK\n   Applying auth.0011_update_proxy_permissions... OK\n   Applying authtoken.0001_initial... OK\n   Applying authtoken.0002_auto_20160226_1747... OK\n   Applying engine.0001_release_v0_1_0... OK\n   Applying engine.0002_labeledpoints_labeledpointsattributeval_labeledpolygon_labeledpolygonattributeval_labeledpolyline_la... OK\n   Applying engine.0003_objectpath_shapes... OK\n   Applying engine.0004_task_z_order... OK\n   Applying engine.0005_auto_20180609_1512... OK\n   Applying engine.0006_auto_20180629_1501... OK\n   Applying engine.0007_task_flipped... OK\n   Applying engine.0008_auto_20180917_1424... OK\n   Applying engine.0009_auto_20180917_1424... OK\n   Applying engine.0010_auto_20181011_1517... OK\n   Applying engine.0011_add_task_source_and_safecharfield... OK\n   Applying engine.0012_auto_20181025_1618... OK\n   Applying engine.0013_auth_no_default_permissions... OK\n   Applying engine.0014_job_max_shape_id... OK\n   Applying engine.0015_db_redesign_20190217... OK\n   Applying engine.0016_attribute_spec_20190217... OK\n   Applying engine.0017_db_redesign_20190221... OK\n   Applying engine.0018_jobcommit... OK\n   Applying engine.0019_frame_selection... OK\n   Applying engine.0020_remove_task_flipped...Getting flipped tasks...\n Conversion started...\n  OK\n   Applying engine.0021_auto_20190826_1827... OK\n   Applying engine.0022_auto_20191004_0817... OK\n   Applying engine.0023_auto_20200113_1323... OK\n   Applying engine.0024_auto_20191023_1025...\n Start schema migration...\n INFO:0024_auto_20191023_1025:\n Start schema migration...\n \n Schema migration is finished...\n INFO:0024_auto_20191023_1025:\n Schema migration is finished...\n \n Start data migration...\n INFO:0024_auto_20191023_1025:\n Start data migration...\n  OK\n   Applying engine.0025_auto_20200324_1222... OK\n   Applying engine.0026_auto_20200719_1511... OK\n   Applying git.0001_initial... OK\n   Applying git.0002_auto_20190123_1305... OK\n   Applying git.0003_gitdata_lfs... OK\n   Applying sessions.0001_initial... OK\n   Applying sites.0001_initial... OK\n   Applying sites.0002_alter_domain_unique... OK\n   Applying socialaccount.0001_initial... OK\n   Applying socialaccount.0002_token_max_lengths... OK\n   Applying socialaccount.0003_extra_data_default_dict... OK\n </denchmark-code>\n \n After that, I could create the user too, but also not use it yet to log-in because of the same gateway error.\n Here is the log stuff when I get the gateway error when trying to log-in:\n <denchmark-code>cvat_proxy    | 172.23.0.1 - - [30/Jul/2020:07:19:31 +0000] \"POST /api/v1/auth/login HTTP/1.1\" 502 559 \"http://localhost:8080/auth/login\" \"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/84.0.4147.89 Safari/537.36\"\n cvat_proxy    | 2020/07/30 07:19:31 [error] 7#7: *1 connect() failed (111: Connection refused) while connecting to upstream, client: 172.23.0.1, server: localhost, request: \"POST /api/v1/auth/login HTTP/1.1\", upstream: \"http://172.23.0.4:8080/api/v1/auth/login\", host: \"localhost:8080\", referrer: \"http://localhost:8080/auth/login\"\n </denchmark-code>\n \n I do suspect these are layerd problems and the migration thing is a solution to the first one.  There's some additional discussion about the original problem here:\n <denchmark-link:https://github.com/pinax/django-user-accounts/issues/179>pinax/django-user-accounts#179</denchmark-link>\n \n \t\t"}, "comments_14": {"comment_id": 15, "comment_author": "MuadDev", "commentT": "2020-07-31T02:24:17Z", "comment_text": "\n \t\tAs far as reproducing goes:  <denchmark-link:https://github.com/azhavoro>@azhavoro</denchmark-link>\n  : Did you try removing your docker volumes and removing the cvat docker containers before doing a \"docker-compose up\"?  That reproduces it for me every time on the release-1.1.0 branch.\n \t\t"}, "comments_15": {"comment_id": 16, "comment_author": "MuadDev", "commentT": "2020-08-03T02:16:38Z", "comment_text": "\n \t\tAh HA!!! :-D  I finally figured out why this happens for some people and not for others.  It took me days, but I was able to do a binary search on the difference between my machine (where the installation instructions did NOT work) and a machine in the cloud (where the exact same install script worked).  After starting with entire filesystems as potential differences, I eventually got it down to a single line in my .bashrc file.  The line is this:\n <denchmark-code>umask 077\n </denchmark-code>\n \n So, it seems, that the ability to run and use cvat (even if I got past the superuser issue with the migration, the server would never actually work when this umask line was in place), depends on the user's umask!!!\n This greatly simplifies the problem now, hopefully the point that someone can submit a patch for it.  I don't know enough about the cvat system to determine why the umask is breaking the install process .  I suspect it has something to do with permissions in the git clone but I haven't verified that yet.  Can someone from the cvat team replicate this and maybe adjust the installation instructions to set any permissions as needed after the clone, or better yet, fix whatever permissions thing is happening?  I think 077 should be a valid umask for people to work under.\n If it helps, here's my install script - it's the same as your instructions, but in one place so it might be helpful for you.\n <denchmark-code>set -xe \n sudo apt-get update\n sudo apt-get upgrade -y\n \n # start instructions from cvat\n \n sudo apt-get --no-install-recommends install -y \\\n   apt-transport-https \\\n   ca-certificates \\\n   curl \\\n   gnupg-agent \\\n   software-properties-common\n \n curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -\n \n sudo add-apt-repository \\\n   \"deb [arch=amd64] https://download.docker.com/linux/ubuntu \\\n   $(lsb_release -cs) \\\n   stable\"\n   \n sudo apt-get update\n sudo apt-get --no-install-recommends install -y docker-ce docker-ce-cli containerd.io\n \n sudo usermod -aG docker $USER\n \n sudo apt-get --no-install-recommends install -y python3-pip\n \n sudo apt-get install -y python3-setuptools\n sudo python3 -m pip install docker-compose compose\n sudo chown -R \"$USER\":\"$USER\" /usr/local/lib/python3.6/dist-packages\n \n \n sudo apt-get --no-install-recommends install -y git\n git clone https://github.com/opencv/cvat\n cd cvat\n git checkout 820f2c5724a50650f7325508152c3ee166ffe245\n \n #docker-compose build\n \n sudo su -ml \"$USER\" <<EOF\n # TODO: Try to remove the -d\n docker-compose up -d\n EOF\n \n echo 'sleeping 1m to make sure the server is up.'\n sleep 60\n \n # #Exit and re-log in and then do this.  If it errors, then you have the issue.  If it runs fine, then you don't.\n # docker exec -it cvat bash -ic 'python3 ~/manage.py createsuperuser'\n \n </denchmark-code>\n \n \t\t"}, "comments_16": {"comment_id": 17, "comment_author": "MuadDev", "commentT": "2020-08-03T04:38:05Z", "comment_text": "\n \t\tUpdate:  A sudo chmod -R o+rX . after the git clone ... and cd cvat makes it work even if I have umask 077 as my usermask.  Seems to be a permissions thing on something in the repo.  I recommend finding what that thing is and maybe changing permissions in the docker container.  IMHO, people should be able to have restrictive permissions in their home dir.\n \t\t"}, "comments_17": {"comment_id": 18, "comment_author": "MuadDev", "commentT": "2020-10-06T19:23:08Z", "comment_text": "\n \t\tThis worked for me as well <denchmark-link:https://github.com/andyDoucette>@andyDoucette</denchmark-link>\n . Thanks!\n \t\t"}, "comments_18": {"comment_id": 19, "comment_author": "MuadDev", "commentT": "2020-10-06T22:59:27Z", "comment_text": "\n \t\tOh great!  \ud83d\ude0a I'm so glad my experience helped someone.\n <denchmark-link:#>\u2026</denchmark-link>\n \n \n On Wed, Oct 7, 2020, 3:23 AM Cyril Zakka ***@***.*** wrote:\n  This worked for me as well @andyDoucette <https://github.com/andyDoucette>.\n  Thanks!\n \n  \u2014\n  You are receiving this because you were mentioned.\n  Reply to this email directly, view it on GitHub\n  <#1794 (comment)>,\n  or unsubscribe\n  <https://github.com/notifications/unsubscribe-auth/AEVLQ5REKUBQ3AADIX64ZYDSJNVC7ANCNFSM4OFSRYCQ>\n  .\n \n \n \n \t\t"}}}, "commit": {"commit_id": "796a8d3f54bc70457492d03af5d5e9569c74de91", "commit_author": "Andrey Zhavoronkov", "commitT": "2020-10-12 16:59:27+03:00", "commit_complexity": {"commit_NLOC": "0.9", "commit_CCN": "1.0", "commit_Nprams": "1.0"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "CHANGELOG.md", "file_new_name": "CHANGELOG.md", "file_complexity": {"file_NLOC": "None", "file_CCN": "None", "file_NToken": "None"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "64", "deleted_lines": "64"}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "cvat\\settings\\base.py", "file_new_name": "cvat\\settings\\base.py", "file_complexity": {"file_NLOC": "349", "file_CCN": "9", "file_NToken": "1614"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "53,54,55,56,57,58,59,60,61,62,63", "deleted_lines": "56", "method_info": {"method_name": "generate_ssh_keys.add_ssh_keys", "method_params": "", "method_startline": "53", "method_endline": "63", "method_complexity": {"method_NLOC": "9", "method_CCN": "4", "method_NToken": "83", "method_nesting_level": "1"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "53,54,55,56,57,58,59,60,61,62,63,64,68", "deleted_lines": "56", "method_info": {"method_name": "generate_ssh_keys", "method_params": "", "method_startline": "48", "method_endline": "89", "method_complexity": {"method_NLOC": "30", "method_CCN": "5", "method_NToken": "334", "method_nesting_level": "0"}}}}}, "file_2": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "ssh\\README.md", "file_new_name": "ssh\\README.md", "file_complexity": {"file_NLOC": "None", "file_CCN": "None", "file_NToken": "None"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "2", "deleted_lines": null}}}}}}