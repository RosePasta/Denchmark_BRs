{"BR": {"BR_id": "321", "BR_author": "carlogrisetti", "BRopenT": "2019-05-02T15:22:45Z", "BRcloseT": "2019-05-02T23:12:25Z", "BR_text": {"BRsummary": "ResNet size in image_encoders incoherent with convolutional_modules", "BRdescription": "\n Describe the bug\n In ludwig\\image_encoders.py within init of class ResNetEncoder on line 115 there's a check that enforces resnet size to follow 6n+2 rule.\n In ludwig/models/modules/convolutional_modules.py within get_resnet_block_sizes on line 663 there's a fixed list of choices that don't align with the previous filtering made by image_encoders.py\n It's maybe my second attempt at using ResNets, but even if my understanding of the background logic is wrong (and this is the intended behavior), some more detailed error messages could be provided.\n AFAIK resnet size 34 and 101 specified in the choices list are non-reachable. Maybe resnet size 101 follows the v2 rule of 9n+2 ?\n To Reproduce\n Try to train a model with encoder: resnet and resnet_size: 34 -> it will tell you that you must follow 6n+2 rule\n Try to train a model with encoder: resnet and resnet_size: 38 -> it will tell you that there are no layers available for the size chosen\n Expected behavior\n Any possible and usable value should be correctly parsed, any non-usable value should be \"filtered\" in image_encoders.py, without trying to create the conv module for a nonexisting block size\n Environment\n \n Python 3.6.8\n Ludwig 0.1.2\n \n Additional context\n Add any other context about the problem here.\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "carlogrisetti", "commentT": "2019-05-02T23:12:43Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/carlogrisetti>@carlogrisetti</denchmark-link>\n  thank you for spotting this. I was indeed following the 6n+2 rule of ResNet v1 but the implementation is v2, so I will think about how to better provide values for both. For the time being I'm removing that check and just checking if the value is among the base ones and also adding a note in the documentation that highlights the set of available values.\n \t\t"}}}, "commit": {"commit_id": "7477d870d933c3d2d5501f22851fedb48d3cae84", "commit_author": "piero", "commitT": "2019-05-02 16:12:15-07:00", "commit_complexity": {"commit_NLOC": "None", "commit_CCN": "None", "commit_Nprams": "None"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "docs\\user_guide\\index.html", "file_new_name": "docs\\user_guide\\index.html", "file_complexity": {"file_NLOC": "None", "file_CCN": "None", "file_NToken": "None"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "4417,4418,4419,4420", "deleted_lines": "4417"}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "ludwig\\models\\modules\\convolutional_modules.py", "file_new_name": "ludwig\\models\\modules\\convolutional_modules.py", "file_complexity": {"file_NLOC": "656", "file_CCN": "28", "file_NToken": "3957"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "676,680", "deleted_lines": "663,664,665,666,667,668,669,670,671,672,673,675,679", "method_info": {"method_name": "get_resnet_block_sizes", "method_params": "resnet_size", "method_startline": "663", "method_endline": "681", "method_complexity": {"method_NLOC": "8", "method_CCN": "2", "method_NToken": "38", "method_nesting_level": "0"}}}}}, "file_2": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "ludwig\\models\\modules\\image_encoders.py", "file_new_name": "ludwig\\models\\modules\\image_encoders.py", "file_complexity": {"file_NLOC": "139", "file_CCN": "4", "file_NToken": "504"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": null, "deleted_lines": "115,116,117"}}}, "file_3": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "mkdocs\\docs\\user_guide.md", "file_new_name": "mkdocs\\docs\\user_guide.md", "file_complexity": {"file_NLOC": "None", "file_CCN": "None", "file_NToken": "None"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "2133", "deleted_lines": "2133"}}}}}}