{"BR": {"BR_id": "90", "BR_author": "cook-jr", "BRopenT": "2019-02-15T07:22:57Z", "BRcloseT": "2019-02-17T01:23:36Z", "BR_text": {"BRsummary": "utf-8 encoding error on text prediction", "BRdescription": "\n Hi, I'm getting the following stack trace when trying to do a simple prediction that should yield a text output containing utf-8 text, in this case the symbol \u264b .  I believe this comes down to csv.writer (in data_utils.py function save_csv) not playing nice with utf-8 out of the box.  I'm not super familiar with using python's native csv writing though.\n <denchmark-code>Traceback (most recent call last):\n   File \"C:\\Users\\xxx\\AppData\\Local\\Programs\\Python\\Python36\\Scripts\\ludwig-script.py\", line 11, in <module>\n     load_entry_point('ludwig==0.1.0', 'console_scripts', 'ludwig')()\n   File \"c:\\users\\xxx\\appdata\\local\\programs\\python\\python36\\lib\\site-packages\\ludwig\\cli.py\", line 86, in main\n     CLI()\n   File \"c:\\users\\xxxi\\appdata\\local\\programs\\python\\python36\\lib\\site-packages\\ludwig\\cli.py\", line 64, in __init__\n     getattr(self, args.command)()\n   File \"c:\\users\\xxx\\appdata\\local\\programs\\python\\python36\\lib\\site-packages\\ludwig\\cli.py\", line 73, in predict\n     predict.cli(sys.argv[2:])\n   File \"c:\\users\\xxx\\appdata\\local\\programs\\python\\python36\\lib\\site-packages\\ludwig\\predict.py\", line 379, in cli\n     full_predict(**vars(args))\n   File \"c:\\users\\xxx\\appdata\\local\\programs\\python\\python36\\lib\\site-packages\\ludwig\\predict.py\", line 120, in full_predict\n     save_prediction_outputs(postprocessed_output, experiment_dir_name)\n   File \"c:\\users\\xxx\\appdata\\local\\programs\\python\\python36\\lib\\site-packages\\ludwig\\predict.py\", line 210, in save_prediction_outputs\n     save_csv(csv_filename.format(output_field, output_type), values)\n   File \"c:\\users\\xxx\\appdata\\local\\programs\\python\\python36\\lib\\site-packages\\ludwig\\utils\\data_utils.py\", line 60, in save_csv\n     writer.writerow(row)\n   File \"c:\\users\\xxx\\appdata\\local\\programs\\python\\python36\\lib\\encodings\\cp1252.py\", line 19, in encode\n     return codecs.charmap_encode(input,self.errors,encoding_table)[0]\n UnicodeEncodeError: 'charmap' codec can't encode character '\\u264b' in position 0: character maps to <undefined>\n </denchmark-code>\n \n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "cook-jr", "commentT": "2019-02-15T09:46:07Z", "comment_text": "\n \t\tI pushed a commit that should fix the issue. Can you please confirm that the fix solves the issue?\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "cook-jr", "commentT": "2019-02-17T01:23:36Z", "comment_text": "\n \t\tClosing the issue for now, feel free to reopen it if the fix doesn't solve your problem.\n \t\t"}}}, "commit": {"commit_id": "c1afe0ce82735002b643df2714ff41ac72e2e4d3", "commit_author": "Piero Molino", "commitT": "2019-02-15 01:16:23-08:00", "commit_complexity": {"commit_NLOC": "None", "commit_CCN": "None", "commit_Nprams": "None"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "ludwig\\data\\dataset_synthesyzer.py", "file_new_name": "ludwig\\data\\dataset_synthesyzer.py", "file_complexity": {"file_NLOC": "203", "file_CCN": "46", "file_NToken": "1100"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": null, "deleted_lines": "248,249,250,251,252", "method_info": {"method_name": "write_csv", "method_params": "dataset,csv_file_path", "method_startline": "248", "method_endline": "252", "method_complexity": {"method_NLOC": "5", "method_CCN": "2", "method_NToken": "36", "method_nesting_level": "0"}}}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "ludwig\\utils\\data_utils.py", "file_new_name": "ludwig\\utils\\data_utils.py", "file_complexity": {"file_NLOC": "197", "file_CCN": "69", "file_NToken": "1499"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "56,57,58,59,60,61", "deleted_lines": "56,57,58,59,60", "method_info": {"method_name": "save_csv", "method_params": "data_fp,data", "method_startline": "55", "method_endline": "61", "method_complexity": {"method_NLOC": "7", "method_CCN": "4", "method_NToken": "63", "method_nesting_level": "0"}}}}}}}}