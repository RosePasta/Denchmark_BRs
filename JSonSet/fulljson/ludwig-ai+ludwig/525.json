{"BR": {"BR_id": "525", "BR_author": "BeWe11", "BRopenT": "2019-09-24T17:42:51Z", "BRcloseT": "2019-09-30T15:00:54Z", "BR_text": {"BRsummary": "Horovod training permission error because of hardcoded \"/\" path", "BRdescription": "\n When training using horovod, all processes that are not \"on_worker\" are being given a hardcoded  in training, see <denchmark-link:https://github.com/uber/ludwig/blob/10aac398edb8655a527e3d650f1b5f263eb364eb/ludwig/train.py#L206>https://github.com/uber/ludwig/blob/10aac398edb8655a527e3d650f1b5f263eb364eb/ludwig/train.py#L206</denchmark-link>\n . This leads to permissions errors when write permission for this directory are not given to the user.\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "BeWe11", "commentT": "2019-09-27T12:10:48Z", "comment_text": "\n \t\tWe definitely need to fix this, but the non-master workers should not write anything to disk this should not be a problem. If they are writing something, that's actually what we have to fix. Can you please provide the error you get so that we can identify where the workers are writing?\n As a temporary workaround I suggest you to replace \"/\" with \".\" and you can set writing permissions to the current working directory.\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "BeWe11", "commentT": "2019-09-27T14:52:54Z", "comment_text": "\n \t\tHey <denchmark-link:https://github.com/w4nderlust>@w4nderlust</denchmark-link>\n ,\n The actual path that the workers are attempting to use is /model. We temporarily fixed this by just creating this directory. The workers will not write anything into this directory, but they will attempt to create it nevertheless. If the directory already exists, no exception occurs.\n I don't have access to a multi-GPU machine right now, but I think the error stems from this line: <denchmark-link:https://github.com/uber/ludwig/blob/10aac398edb8655a527e3d650f1b5f263eb364eb/ludwig/models/model.py#L402>https://github.com/uber/ludwig/blob/10aac398edb8655a527e3d650f1b5f263eb364eb/ludwig/models/model.py#L402</denchmark-link>\n \n There is no is_on_master guard that protects this line from non-master workers.\n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "BeWe11", "commentT": "2019-09-30T15:01:15Z", "comment_text": "\n \t\tThank you, you were right indeed, that was the cause. Should be fixed now, please confirm.\n \t\t"}}}, "commit": {"commit_id": "67fec7ab1908972c3e21c333f283d3af7d118e80", "commit_author": "Piero Molino", "commitT": "2019-09-30 17:00:36+02:00", "commit_complexity": {"commit_NLOC": "None", "commit_CCN": "None", "commit_Nprams": "None"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "ludwig\\models\\model.py", "file_new_name": "ludwig\\models\\model.py", "file_complexity": {"file_NLOC": "1354", "file_CCN": "64", "file_NToken": "6324"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "402,403", "deleted_lines": "402"}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "ludwig\\train.py", "file_new_name": "ludwig\\train.py", "file_complexity": {"file_NLOC": "525", "file_CCN": "13", "file_NToken": "2125"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "206", "deleted_lines": "206"}}}}}}