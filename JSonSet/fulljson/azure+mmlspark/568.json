{"BR": {"BR_id": "568", "BR_author": "sunilsu", "BRopenT": "2019-05-16T15:27:24Z", "BRcloseT": "2019-06-14T21:39:07Z", "BR_text": {"BRsummary": "LightGBMClassifier: for multiclass objective, wrong probability and prediction", "BRdescription": "\n Training a LightGBMClassifier with multiclass objective,\n <denchmark-code>lgbm = LightGBMClassifier(objective='multiclass')\n model = lgbm.fit(train)\n scoredData = model.transform(test)\n \n \n scoredData (raw and probability) looks like,\n rawPrediction=DenseVector([-1.4917, -1.4697, -1.5847, -1.8326, -1.7148]),\n probability=DenseVector([0.1837, 0.8163, -1.5847, -1.8326, -1.7148])\n </denchmark-code>\n \n probability is still calculated as binary classification.\n Maybe prediction column is also wrong because of above.\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "sunilsu", "commentT": "2019-06-14T21:39:07Z", "comment_text": "\n \t\tclosing as this is now fixed with <denchmark-link:https://github.com/Azure/mmlspark/pull/578>#578</denchmark-link>\n \n latest build with fix:\n Maven package uploaded, use --packages com.microsoft.ml.spark:mmlspark_2.11:0.17.dev21 and --repositories <denchmark-link:https://mmlspark.azureedge.net/maven>https://mmlspark.azureedge.net/maven</denchmark-link>\n \n the fix should be available in the next v0.18 release\n \t\t"}}}, "commit": {"commit_id": "45c91f98c7ed425beefec23bcd436690e1540dd7", "commit_author": "Ilya Matiach", "commitT": "2019-06-14 09:44:39-07:00", "commit_complexity": {"commit_NLOC": "0.0", "commit_CCN": "0.0", "commit_Nprams": "0.95"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "src\\lightgbm\\src\\main\\scala\\LightGBMClassifier.scala", "file_new_name": "src\\lightgbm\\src\\main\\scala\\LightGBMClassifier.scala", "file_complexity": {"file_NLOC": "154", "file_CCN": "27", "file_NToken": "1275"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "145,146,147", "deleted_lines": null, "method_info": {"method_name": "raw2probabilityInPlace", "method_params": "Vector", "method_startline": "145", "method_endline": "150", "method_complexity": {"method_NLOC": "5", "method_CCN": "1", "method_NToken": "21", "method_nesting_level": "0"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,137,138,139,140,141,142,143,144,145", "deleted_lines": null, "method_info": {"method_name": "transform", "method_params": "", "method_startline": "96", "method_endline": "145", "method_complexity": {"method_NLOC": "45", "method_CCN": "9", "method_NToken": "286", "method_nesting_level": "0"}}}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "src\\lightgbm\\src\\test\\scala\\VerifyLightGBMClassifier.scala", "file_new_name": "src\\lightgbm\\src\\test\\scala\\VerifyLightGBMClassifier.scala", "file_complexity": {"file_NLOC": "470", "file_CCN": "8", "file_NToken": "3652"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "446,447", "deleted_lines": null, "method_info": {"method_name": "verifyLearnerOnMulticlassCsvFile", "method_params": "String,String,Int", "method_startline": "416", "method_endline": "463", "method_complexity": {"method_NLOC": "46", "method_CCN": "2", "method_NToken": "368", "method_nesting_level": "0"}}}}}}}}