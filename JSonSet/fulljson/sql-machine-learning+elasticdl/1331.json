{"BR": {"BR_id": "1331", "BR_author": "workingloong", "BRopenT": "2019-10-22T05:52:11Z", "BRcloseT": "2019-10-24T03:33:24Z", "BR_text": {"BRsummary": "Failed to reshape embedding outputs when ids shape is (None, None)", "BRdescription": "\n The tf.reshape in the Embedding call will failed when the  shape of input layer is (None, None) for elasticdl.layers.Embedding and the error is\n TypeError: Failed to convert object of type <class 'tuple'> to Tensor. Contents: (-1, None, 4). Consider casting elements to a supported type\n The error can reproduced in tf.keras.models.clone_model:\n <denchmark-code>import tensorflow as tf\n from elasticdl.python.elasticdl.layers.embedding import Embedding as edl_Embedding\n def clone_function(layer):\n     if type(layer) == tf.keras.layers.Embedding:\n         edl_layer = edl_Embedding(layer.output_dim)\n         return edl_layer\n     return layer\n \n model = tf.keras.Sequential()\n model.add(tf.keras.layers.Embedding(10,4)),\n model.add(tf.keras.layers.Dense(4, activation='relu'))\n model.add(tf.keras.layers.Dense(1, activation='sigmoid'))\n new_model = tf.keras.models.clone_model(model, clone_function=clone_function)\n </denchmark-code>\n \n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "workingloong", "commentT": "2019-10-24T03:33:24Z", "comment_text": "\n \t\tWe have resolved the issue in  <denchmark-link:https://github.com/sql-machine-learning/elasticdl/pull/1332>#1332</denchmark-link>\n , so I close it.\n \t\t"}}}, "commit": {"commit_id": "96c87af8c7c3be61e52e31b55cdd7628b1380974", "commit_author": "workingloong", "commitT": "2019-10-23 21:08:16+08:00", "commit_complexity": {"commit_NLOC": "None", "commit_CCN": "None", "commit_Nprams": "None"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "elasticdl\\python\\elasticdl\\layers\\embedding.py", "file_new_name": "elasticdl\\python\\elasticdl\\layers\\embedding.py", "file_complexity": {"file_NLOC": "228", "file_CCN": "42", "file_NToken": "1263"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "208,209,210,211,212", "deleted_lines": "208", "method_info": {"method_name": "call", "method_params": "self,input", "method_startline": "188", "method_endline": "217", "method_complexity": {"method_NLOC": "22", "method_CCN": "5", "method_NToken": "190", "method_nesting_level": "1"}}}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "elasticdl\\python\\tests\\layer_test.py", "file_new_name": "elasticdl\\python\\tests\\layer_test.py", "file_complexity": {"file_NLOC": "333", "file_CCN": "43", "file_NToken": "2478"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "376,377,378,379,380,381,382,383", "deleted_lines": null, "method_info": {"method_name": "test_embedding_layer_with_none_shape_input", "method_params": "self", "method_startline": "376", "method_endline": "383", "method_complexity": {"method_NLOC": "8", "method_CCN": "1", "method_NToken": "67", "method_nesting_level": "1"}}}}}}}}