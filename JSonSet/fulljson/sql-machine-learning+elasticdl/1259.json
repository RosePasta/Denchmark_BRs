{"BR": {"BR_id": "1259", "BR_author": "LiMinghao1994", "BRopenT": "2019-09-28T14:11:51Z", "BRcloseT": "2019-10-11T03:31:04Z", "BR_text": {"BRsummary": "Evaluation minibatches may be calculated repeatedly", "BRdescription": "\n Currently, each task contains multiple minibatches. In the evaluation phase, workers calculate each minibatch in turn. Every time a minibatch calculation is completed, the worker immediately passes the calculated evaluation metrics to the master. When the worker completes all the minibatches in a task, the worker tells the master the results of the entire task.\n If a worker A is killed in the process of calculating a task, the master will find another worker B to calculate the failed task, but it will not clear the metrics of the minibatch already calculated in the task. So some minibatches are calculated both by worker A and worker B, which will lead to errors in the final evaluation metrics.\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "LiMinghao1994", "commentT": "2019-09-29T14:44:11Z", "comment_text": "\n \t\tInteresting. I think workers should report results per task as the task is the minimum unit watched by the master.\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "LiMinghao1994", "commentT": "2019-09-30T04:32:20Z", "comment_text": "\n \t\t\n Interesting. I think workers should report results per task as the task is the minimum unit watched by the master.\n \n Agree. In evaluation phase, worker should report results per task.\n \t\t"}}}, "commit": {"commit_id": "a68cbb9c6b5ac2cb479eb33f98f54c8b245625c8", "commit_author": "Chunyang Wen", "commitT": "2019-10-11 11:31:03+08:00", "commit_complexity": {"commit_NLOC": "None", "commit_CCN": "None", "commit_Nprams": "None"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "elasticdl\\python\\common\\constants.py", "file_new_name": "elasticdl\\python\\common\\constants.py", "file_complexity": {"file_NLOC": "26", "file_CCN": "0", "file_NToken": "107"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "40", "deleted_lines": null}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 4, "file_old_name": "elasticdl\\python\\worker\\worker.py", "file_new_name": "elasticdl\\python\\worker\\worker.py", "file_complexity": {"file_NLOC": "443", "file_CCN": "83", "file_NToken": "2513"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "486,487,488,489,490,491,493", "deleted_lines": null, "method_info": {"method_name": "_process_eval_task_if_needed", "method_params": "self", "method_startline": "459", "method_endline": "494", "method_complexity": {"method_NLOC": "29", "method_CCN": "5", "method_NToken": "149", "method_nesting_level": "1"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "401,402,403,404", "deleted_lines": null, "method_info": {"method_name": "_run_evaluation_task", "method_params": "self,features,labels", "method_startline": "399", "method_endline": "404", "method_complexity": {"method_NLOC": "6", "method_CCN": "2", "method_NToken": "45", "method_nesting_level": "1"}}}, "hunk_2": {"Ismethod": 1, "added_lines": "385,386,387,388,389,390,391,392,393,394,395,396,397", "deleted_lines": "385,386", "method_info": {"method_name": "_collect_evaluation_result", "method_params": "self,outputs,labels", "method_startline": "385", "method_endline": "397", "method_complexity": {"method_NLOC": "13", "method_CCN": "5", "method_NToken": "128", "method_nesting_level": "1"}}}, "hunk_3": {"Ismethod": 1, "added_lines": "273,274,275,276", "deleted_lines": "270,271,273,274", "method_info": {"method_name": "report_evaluation_metrics", "method_params": "self,model_outputs,labels", "method_startline": "266", "method_endline": "279", "method_complexity": {"method_NLOC": "10", "method_CCN": "2", "method_NToken": "94", "method_nesting_level": "1"}}}}}}}}