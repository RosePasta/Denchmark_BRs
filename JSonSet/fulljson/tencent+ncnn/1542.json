{"BR": {"BR_id": "1542", "BR_author": "jiayilee97", "BRopenT": "2020-02-21T13:49:43Z", "BRcloseT": "2020-07-27T10:39:46Z", "BR_text": {"BRsummary": "Error when making source code on Ubuntu 16.04", "BRdescription": "\n i followed these instructions (for linux x86): <denchmark-link:https://github.com/Tencent/ncnn/wiki/how-to-build>https://github.com/Tencent/ncnn/wiki/how-to-build</denchmark-link>\n \n when i tried to build the NCNN using sudo make -j4, i got these errors\n <denchmark-link:https://user-images.githubusercontent.com/34804280/75039512-cf4df400-54f3-11ea-8fa6-a129977908a2.png></denchmark-link>\n \n The errors are very similar to this:\n /ncnn/tools/quantize/ncnn2table.cpp:820:26: error: passing \u2018const cv::CommandLineParser\u2019 as \u2018this\u2019 argument discards qualifiers [-fpermissive]\n im using g++-5, gcc5 and opencv 2.4\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "jiayilee97", "commentT": "2020-02-21T13:53:04Z", "comment_text": "\n \t\tfixed in <denchmark-link:https://github.com/Tencent/ncnn/commit/c089ddb3c235033f8da52b5d22639df5b0ff0824>c089ddb</denchmark-link>\n \n please update the ncnn git code and try again  :)\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "jiayilee97", "commentT": "2020-02-21T14:03:37Z", "comment_text": "\n \t\tThanks for the quick reply. There are still errors after running your updated git code.\n Here are the screenshots of the error:\n Screenshot 1\n <denchmark-link:https://user-images.githubusercontent.com/34804280/75040573-db3ab580-54f5-11ea-8cbd-319f546745b7.png></denchmark-link>\n \n Screenshot 2\n <denchmark-link:https://user-images.githubusercontent.com/34804280/75040600-ebeb2b80-54f5-11ea-97b7-94024522f478.png></denchmark-link>\n \n The full output is as follows:\n [ 71%] Linking CXX executable ncnnoptimize\n In file included from /usr/include/opencv2/opencv.hpp:47:0,\n from /media/leejiayi/DATA/ubuntu/Downloads/JobsApplication/BlackSesameTech/ncnn/ncnn/tools/quantize/ncnn2table.cpp:30:\n /usr/include/opencv2/core/core.hpp: In function \u2018int main(int, char)\u2019:\n /usr/include/opencv2/core/core.hpp:4744:10: error: \u2018bool cv::CommandLineParser::has(const string&)\u2019 is protected\n bool has(const std::string& keys);\n ^\n /media/leejiayi/DATA/ubuntu/Downloads/JobsApplication/BlackSesameTech/ncnn/ncnn/tools/quantize/ncnn2table.cpp:820:26: error: within this context\n if (parser.has(\"help\"))\n ^\n /media/leejiayi/DATA/ubuntu/Downloads/JobsApplication/BlackSesameTech/ncnn/ncnn/tools/quantize/ncnn2table.cpp:822:16: error: \u2018class cv::CommandLineParser\u2019 has no member named \u2018printMessage\u2019\n parser.printMessage();\n ^\n In file included from /usr/include/opencv2/opencv.hpp:47:0,\n from /media/leejiayi/DATA/ubuntu/Downloads/JobsApplication/BlackSesameTech/ncnn/ncnn/tools/quantize/ncnn2table.cpp:30:\n /usr/include/opencv2/core/core.hpp:4744:10: error: \u2018bool cv::CommandLineParser::has(const string&)\u2019 is protected\n bool has(const std::string& keys);\n ^\n /media/leejiayi/DATA/ubuntu/Downloads/JobsApplication/BlackSesameTech/ncnn/ncnn/tools/quantize/ncnn2table.cpp:827:28: error: within this context\n if (!parser.has(\"param\") || !parser.has(\"bin\") || !parser.has(\"images\") || !parser.has(\"output\") || !parser.has(\"mean\") || !parser.has(\"norm\"))\n ^\n In file included from /usr/include/opencv2/opencv.hpp:47:0,\n from /media/leejiayi/DATA/ubuntu/Downloads/JobsApplication/BlackSesameTech/ncnn/ncnn/tools/quantize/ncnn2table.cpp:30:\n /usr/include/opencv2/core/core.hpp:4744:10: error: \u2018bool cv::CommandLineParser::has(const string&)\u2019 is protected\n bool has(const std::string& keys);\n ^\n /media/leejiayi/DATA/ubuntu/Downloads/JobsApplication/BlackSesameTech/ncnn/ncnn/tools/quantize/ncnn2table.cpp:827:50: error: within this context\n if (!parser.has(\"param\") || !parser.has(\"bin\") || !parser.has(\"images\") || !parser.has(\"output\") || !parser.has(\"mean\") || !parser.has(\"norm\"))\n ^\n In file included from /usr/include/opencv2/opencv.hpp:47:0,\n from /media/leejiayi/DATA/ubuntu/Downloads/JobsApplication/BlackSesameTech/ncnn/ncnn/tools/quantize/ncnn2table.cpp:30:\n /usr/include/opencv2/core/core.hpp:4744:10: error: \u2018bool cv::CommandLineParser::has(const string&)\u2019 is protected\n bool has(const std::string& keys);\n ^\n /media/leejiayi/DATA/ubuntu/Downloads/JobsApplication/BlackSesameTech/ncnn/ncnn/tools/quantize/ncnn2table.cpp:827:75: error: within this context\n if (!parser.has(\"param\") || !parser.has(\"bin\") || !parser.has(\"images\") || !parser.has(\"output\") || !parser.has(\"mean\") || !parser.has(\"norm\"))\n ^\n In file included from /usr/include/opencv2/opencv.hpp:47:0,\n from /media/leejiayi/DATA/ubuntu/Downloads/JobsApplication/BlackSesameTech/ncnn/ncnn/tools/quantize/ncnn2table.cpp:30:\n /usr/include/opencv2/core/core.hpp:4744:10: error: \u2018bool cv::CommandLineParser::has(const string&)\u2019 is protected\n bool has(const std::string& keys);\n ^\n /media/leejiayi/DATA/ubuntu/Downloads/JobsApplication/BlackSesameTech/ncnn/ncnn/tools/quantize/ncnn2table.cpp:827\ud83d\udcaf error: within this context\n if (!parser.has(\"param\") || !parser.has(\"bin\") || !parser.has(\"images\") || !parser.has(\"output\") || !parser.has(\"mean\") || !parser.has(\"norm\"))\n ^\n In file included from /usr/include/opencv2/opencv.hpp:47:0,\n from /media/leejiayi/DATA/ubuntu/Downloads/JobsApplication/BlackSesameTech/ncnn/ncnn/tools/quantize/ncnn2table.cpp:30:\n /usr/include/opencv2/core/core.hpp:4744:10: error: \u2018bool cv::CommandLineParser::has(const string&)\u2019 is protected\n bool has(const std::string& keys);\n ^\n /media/leejiayi/DATA/ubuntu/Downloads/JobsApplication/BlackSesameTech/ncnn/ncnn/tools/quantize/ncnn2table.cpp:827:123: error: within this context\n if (!parser.has(\"param\") || !parser.has(\"bin\") || !parser.has(\"images\") || !parser.has(\"output\") || !parser.has(\"mean\") || !parser.has(\"norm\"))\n ^\n In file included from /usr/include/opencv2/opencv.hpp:47:0,\n from /media/leejiayi/DATA/ubuntu/Downloads/JobsApplication/BlackSesameTech/ncnn/ncnn/tools/quantize/ncnn2table.cpp:30:\n /usr/include/opencv2/core/core.hpp:4744:10: error: \u2018bool cv::CommandLineParser::has(const string&)\u2019 is protected\n bool has(const std::string& keys);\n ^\n /media/leejiayi/DATA/ubuntu/Downloads/JobsApplication/BlackSesameTech/ncnn/ncnn/tools/quantize/ncnn2table.cpp:827:146: error: within this context\n if (!parser.has(\"param\") || !parser.has(\"bin\") || !parser.has(\"images\") || !parser.has(\"output\") || !parser.has(\"mean\") || !parser.has(\"norm\"))\n ^\n /media/leejiayi/DATA/ubuntu/Downloads/JobsApplication/BlackSesameTech/ncnn/ncnn/tools/quantize/ncnn2table.cpp:830:16: error: \u2018class cv::CommandLineParser\u2019 has no member named \u2018printMessage\u2019\n parser.printMessage();\n ^\n In file included from /usr/include/opencv2/opencv.hpp:47:0,\n from /media/leejiayi/DATA/ubuntu/Downloads/JobsApplication/BlackSesameTech/ncnn/ncnn/tools/quantize/ncnn2table.cpp:30:\n /usr/include/opencv2/core/core.hpp:4744:10: error: \u2018bool cv::CommandLineParser::has(const string&)\u2019 is protected\n bool has(const std::string& keys);\n ^\n /media/leejiayi/DATA/ubuntu/Downloads/JobsApplication/BlackSesameTech/ncnn/ncnn/tools/quantize/ncnn2table.cpp:860:26: error: within this context\n if (parser.has(\"mean\"))\n ^\n In file included from /usr/include/opencv2/opencv.hpp:47:0,\n from /media/leejiayi/DATA/ubuntu/Downloads/JobsApplication/BlackSesameTech/ncnn/ncnn/tools/quantize/ncnn2table.cpp:30:\n /usr/include/opencv2/core/core.hpp:4744:10: error: \u2018bool cv::CommandLineParser::has(const string&)\u2019 is protected\n bool has(const std::string& keys);\n ^\n /media/leejiayi/DATA/ubuntu/Downloads/JobsApplication/BlackSesameTech/ncnn/ncnn/tools/quantize/ncnn2table.cpp:878:26: error: within this context\n if (parser.has(\"norm\"))\n ^\n In file included from /usr/include/opencv2/opencv.hpp:47:0,\n from /media/leejiayi/DATA/ubuntu/Downloads/JobsApplication/BlackSesameTech/ncnn/ncnn/tools/quantize/ncnn2table.cpp:30:\n /usr/include/opencv2/core/core.hpp:4744:10: error: \u2018bool cv::CommandLineParser::has(const string&)\u2019 is protected\n bool has(const std::string& keys);\n ^\n /media/leejiayi/DATA/ubuntu/Downloads/JobsApplication/BlackSesameTech/ncnn/ncnn/tools/quantize/ncnn2table.cpp:896:26: error: within this context\n if (parser.has(\"size\"))\n ^\n In file included from /usr/include/opencv2/opencv.hpp:47:0,\n from /media/leejiayi/DATA/ubuntu/Downloads/JobsApplication/BlackSesameTech/ncnn/ncnn/tools/quantize/ncnn2table.cpp:30:\n /usr/include/opencv2/core/core.hpp:4744:10: error: \u2018bool cv::CommandLineParser::has(const string&)\u2019 is protected\n bool has(const std::string& keys);\n ^\n /media/leejiayi/DATA/ubuntu/Downloads/JobsApplication/BlackSesameTech/ncnn/ncnn/tools/quantize/ncnn2table.cpp:921:28: error: within this context\n if (parser.has(\"swapRB\"))\n ^\n [ 71%] Built target test_softmax\n tools/quantize/CMakeFiles/ncnn2table.dir/build.make:62: recipe for target 'tools/quantize/CMakeFiles/**\n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "jiayilee97", "commentT": "2020-02-21T14:26:07Z", "comment_text": "\n \t\thmmm, the opencv api compatibility issue is not so easy to fix\n For now, you can comment the quantize directory if you aren't eager to use the quantization tools.\n \n \n \n ncnn/tools/CMakeLists.txt\n \n \n          Line 6\n       in\n       c089ddb\n \n \n \n \n \n \n  add_subdirectory(quantize) \n \n \n \n \n \n \t\t"}, "comments_3": {"comment_id": 4, "comment_author": "jiayilee97", "commentT": "2020-03-20T03:49:13Z", "comment_text": "\n \t\tI have the same issue. Have you solved the problem\uff1f\n \t\t"}, "comments_4": {"comment_id": 5, "comment_author": "jiayilee97", "commentT": "2020-04-25T06:32:06Z", "comment_text": "\n \t\tThe default opencv version of Ubuntu 16.04 is too old, using opencv 3.+ could solve the problem. download and compile 3.x+ version of opencv, then setting the env like this:\n export PATH=xxx/opencv-3.xx/bin:$PATH\n then...\n cd build; cmake ../; make -j10\n That works for me\n \t\t"}, "comments_5": {"comment_id": 6, "comment_author": "jiayilee97", "commentT": "2020-05-26T08:50:37Z", "comment_text": "\n \t\t\n The default opencv version of Ubuntu 16.04 is too old, using opencv 3.+ could solve the problem. download and compile 3.x+ version of opencv, then setting the env like this:\n export PATH=xxx/opencv-3.xx/bin:$PATH\n then...\n cd build; cmake ../; make -j10\n That works for me\n \n \u91cd\u88c5\u4e00\u4e0bopencv3\u5c31\u597d\u4e86\uff0c\u611f\u8c22\n \t\t"}}}, "commit": {"commit_id": "b80b84fda51c02bbf5b12030a0b66fea65fbb94e", "commit_author": "zchrissirhcz", "commitT": "2020-07-27 18:39:39+08:00", "commit_complexity": {"commit_NLOC": "None", "commit_CCN": "None", "commit_Nprams": "None"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "src\\layer\\x86\\cast_x86.cpp", "file_new_name": "src\\layer\\x86\\cast_x86.cpp", "file_complexity": {"file_NLOC": "204", "file_CCN": "39", "file_NToken": "1283"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "25", "deleted_lines": null}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 4, "file_old_name": "tools\\quantize\\ncnn2table.cpp", "file_new_name": "tools\\quantize\\ncnn2table.cpp", "file_complexity": {"file_NLOC": "747", "file_CCN": "139", "file_NToken": "5428"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "802,803,804,805", "deleted_lines": null, "method_info": {"method_name": "NcnnQuantCommandLineParser::NcnnQuantCommandLineParser", "method_params": "argc,key_map", "method_startline": "802", "method_endline": "805", "method_complexity": {"method_NLOC": "4", "method_CCN": "1", "method_NToken": "31", "method_nesting_level": "1"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "810,811,812,813", "deleted_lines": null, "method_info": {"method_name": "NcnnQuantCommandLineParser::printMessage", "method_params": "", "method_startline": "810", "method_endline": "813", "method_complexity": {"method_NLOC": "4", "method_CCN": "1", "method_NToken": "13", "method_nesting_level": "1"}}}, "hunk_2": {"Ismethod": 1, "added_lines": "806,807,808,809", "deleted_lines": null, "method_info": {"method_name": "NcnnQuantCommandLineParser::has", "method_params": "keys", "method_startline": "806", "method_endline": "809", "method_complexity": {"method_NLOC": "4", "method_CCN": "1", "method_NToken": "21", "method_nesting_level": "1"}}}, "hunk_3": {"Ismethod": 1, "added_lines": "832,833,834,836", "deleted_lines": null, "method_info": {"method_name": "main", "method_params": "argc,argv", "method_startline": "817", "method_endline": "979", "method_complexity": {"method_NLOC": "125", "method_CCN": "24", "method_NToken": "952", "method_nesting_level": "0"}}}}}}}}