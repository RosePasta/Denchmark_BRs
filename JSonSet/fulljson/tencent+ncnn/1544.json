{"BR": {"BR_id": "1544", "BR_author": "myl7", "BRopenT": "2020-02-22T14:36:17Z", "BRcloseT": "2020-02-22T15:11:35Z", "BR_text": {"BRsummary": "Manjaro make ncnn failed", "BRdescription": "\n Following doc <denchmark-link:https://github.com/Tencent/ncnn/wiki/how-to-build#build-for-linux-x86>https://github.com/Tencent/ncnn/wiki/how-to-build#build-for-linux-x86</denchmark-link>\n , make failed on Manjaro with \"glslangValidator: Error: -Os not available; optimizer not linked\", while there is  in .\n Reproduce:\n $ uname -a\n Linux dell 5.4.18-1-MANJARO #1 SMP PREEMPT Thu Feb 6 11:41:30 UTC 2020 x86_64 GNU/Linux\n $ echo $VULKAN_SDK\n /home/[username]/App/vulkansdk/1.2.131.2/x86_64\n $ git clone https://github.com/Tencent/ncnn\n $ cd ncnn\n $ mkdir build\n $ cd build\n $ cmake -DCMAKE_INSTALL_PREFIX=/usr -DNCNN_BUILD_EXAMPLES=OFF -DNCNN_BUILD_TOOLS=OFF -DNCNN_VULKAN=ON ..\n $ make\n make[1]: Entering directory '/home/myl/Volume/source/ncnn/build'\n make[2]: Entering directory '/home/myl/Volume/source/ncnn/build'\n make[2]: Leaving directory '/home/myl/Volume/source/ncnn/build'\n make[2]: Entering directory '/home/myl/Volume/source/ncnn/build'\n [  0%] Building SPIR-V module absval.spv\n /usr/bin/glslangValidator: Error: -Os not available; optimizer not linked (use -h for usage)\n make[2]: *** [src/CMakeFiles/generate-spirv.dir/build.make:1566: src/absval.spv.hex.h] Error 1\n make[2]: Leaving directory '/home/myl/Volume/source/ncnn/build'\n make[1]: *** [CMakeFiles/Makefile2:222: src/CMakeFiles/generate-spirv.dir/all] Error 2\n make[1]: Leaving directory '/home/myl/Volume/source/ncnn/build'\n make: *** [Makefile:141: all] Error 2\n $ glslangValidator -v\n Glslang Version: 8.13.3559\n ESSL Version: OpenGL ES GLSL 3.20 glslang Khronos. 13.3559\n GLSL Version: 4.60 glslang Khronos. 13.3559\n SPIR-V Version 0x00010400, Revision 1\n GLSL.std.450 Version 100, Revision 1\n Khronos Tool ID 8\n SPIR-V Generator Version 8\n GL_KHR_vulkan_glsl version 100\n ARB_GL_gl_spirv version 100\n And the package ncnn-git 20200106.r52.g0185301-2 in AUR has the same problem.\n \t"}, "comments": {}}, "commit": {"commit_id": "999da7158f22034e13ae2f6ce82a7ce6450ced57", "commit_author": "nihui", "commitT": "2020-02-22 23:11:08+08:00", "commit_complexity": {"commit_NLOC": "None", "commit_CCN": "None", "commit_Nprams": "None"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "cmake\\ncnn_generate_shader_spv_header.cmake", "file_new_name": "cmake\\ncnn_generate_shader_spv_header.cmake", "file_complexity": {"file_NLOC": "None", "file_CCN": "None", "file_NToken": "None"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "34,70,106,142,180", "deleted_lines": "34,70,106,142,180"}}}}}}