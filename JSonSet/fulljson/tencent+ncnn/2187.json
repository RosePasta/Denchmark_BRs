{"BR": {"BR_id": "2187", "BR_author": "RangiLyu", "BRopenT": "2020-10-10T02:21:05Z", "BRcloseT": "2020-10-10T04:31:16Z", "BR_text": {"BRsummary": "Windows compile error in ncnn\\tools\\caffe\\caffe2ncnn.cpp(318)", "BRdescription": "\n \u73af\u5883:\n Windows10\n VS2019 MSVC 14.27.29110\n Protobuf-3.4.0\n ncnn commit <denchmark-link:https://github.com/Tencent/ncnn/commit/4463c3b455e921c55a102622849b249d0ad1dd48>4463c3b</denchmark-link>\n \n \u7f16\u8bd1\u5230caffe2ncnn\u65f6\u62a5\u9519\uff0c\u9519\u8bef\u4fe1\u606f\u5982\u4e0b\n <denchmark-code>[ 99%] Building CXX object tools/caffe/CMakeFiles/caffe2ncnn.dir/caffe2ncnn.cpp.obj\n caffe2ncnn.cpp\n D:\\Programs\\ncnn\\tools\\caffe\\caffe2ncnn.cpp(318): error C2660: \u201cgoogle::protobuf::io::CodedInputStream::SetTotalBytesLimit\u201d: \u51fd\u6570\u4e0d\u63a5\u53d7 1 \u4e2a\u53c2\u6570\n D:\\Programs\\protobuf-3.4.0\\build-vs2019\\install\\include\\google/protobuf/io/coded_stream.h(407): note: \u53c2\u89c1\u201cgoogle::protobuf::io::CodedInputStream::SetTotalBytesLimit\u201d\u7684\u58f0\u660e\n NMAKE : fatal error U1077: \u201cC:\\PROGRA~2\\MICROS~1\\2019\\COMMUN~1\\VC\\Tools\\MSVC\\1427~1.291\\bin\\Hostx64\\x64\\cl.exe\u201d: \u8fd4\u56de\u4ee3\u7801\u201c0x2\u201d\n Stop.\n NMAKE : fatal error U1077: \u201c\"C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Community\\VC\\Tools\\MSVC\\14.27.29110\\bin\\HostX64\\x64\\nmake.exe\"\u201d: \u8fd4 \u56de\u4ee3\u7801\u201c0x2\u201d\n </denchmark-code>\n \n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "RangiLyu", "commentT": "2020-10-10T02:50:13Z", "comment_text": "\n \t\t<denchmark-code>#if GOOGLE_PROTOBUF_VERSION >= 3002000\n     codedstr.SetTotalBytesLimit(INT_MAX);\n #else\n     codedstr.SetTotalBytesLimit(INT_MAX, INT_MAX / 2);\n #endif\n </denchmark-code>\n \n \u628a\u8fd9\u91cc\u7684\u5224\u65ad\u53bb\u4e86\u6539\u6210codedstr.SetTotalBytesLimit(INT_MAX, INT_MAX / 2)\u5c31\u80fd\u7f16\u8bd1\u901a\u8fc7\u4e86\uff0c\u540c\u6837\u51fa\u95ee\u9898\u7684\u8fd8\u6709onnx2ncnn.cpp\u768443\u884c\u3002\u5e94\u8be5\u662fcommit ecc63a6d52b951986859869b15957728d418a843\u5bfc\u81f4\u7684\uff0c\u662f\u4e0d\u662f\u8fd9\u91cc\u5224\u65adprotobuf\u7248\u672c\u7684\u65f6\u5019\u8bbe\u7f6e\u9519\u4e86\uff1f\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "RangiLyu", "commentT": "2020-10-10T02:57:40Z", "comment_text": "\n \t\t\u5f88\u53ef\u80fd\u662f\u8fd9\u4e2a\u95ee\u9898\n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "RangiLyu", "commentT": "2020-10-10T03:13:15Z", "comment_text": "\n \t\t<denchmark-code>#if GOOGLE_PROTOBUF_VERSION >= 3011000\n </denchmark-code>\n \n \t\t"}, "comments_3": {"comment_id": 4, "comment_author": "RangiLyu", "commentT": "2020-10-10T04:31:16Z", "comment_text": "\n \t\t\u5df2\u4fee\u6b63\n \t\t"}}}, "commit": {"commit_id": "0690995b1a0a7696db20fe0662cf678a80726029", "commit_author": "deepage", "commitT": "2020-10-10 12:30:37+08:00", "commit_complexity": {"commit_NLOC": "None", "commit_CCN": "None", "commit_Nprams": "None"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "tools\\caffe\\caffe2ncnn.cpp", "file_new_name": "tools\\caffe\\caffe2ncnn.cpp", "file_complexity": {"file_NLOC": "1491", "file_CCN": "298", "file_NToken": "11337"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "317", "deleted_lines": "317", "method_info": {"method_name": "read_proto_from_binary", "method_params": "filepath,message", "method_startline": "305", "method_endline": "328", "method_complexity": {"method_NLOC": "16", "method_CCN": "3", "method_NToken": "124", "method_nesting_level": "0"}}}}}}}}