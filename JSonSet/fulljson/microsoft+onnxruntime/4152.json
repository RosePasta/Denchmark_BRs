{"BR": {"BR_id": "4152", "BR_author": "jgbradley1", "BRopenT": "2020-06-06T05:18:52Z", "BRcloseT": "2020-06-10T23:02:54Z", "BR_text": {"BRsummary": "Build failure on redundant move statement", "BRdescription": "\n \n <denchmark-link:https://github.com/microsoft/onnxruntime/blob/master/onnxruntime/test/perftest/TFModelInfo.cc#L51>This</denchmark-link>\n  line is throwing a compilation error on master branch when I try to build.\n System information\n \n OS Platform and Distribution: Linux Ubuntu 18.04\n ONNX Runtime installed from (source or binary): master branch\n ONNX Runtime version: latest\n Python version: v3.6.9\n GCC/Compiler version (if compiling from source): GCC v9.2.1 20191102\n \n To Reproduce\n \n clone the repo\n run the build.sh script\n \n <denchmark-code>./build.sh --config RelWithDebInfo --build_shared_lib\n </denchmark-code>\n \n Full Error Message\n <denchmark-code>/home/josh/Downloads/tmp/onnxruntime/onnxruntime/test/perftest/TFModelInfo.cc: In static member function \u2018static std::unique_ptr<TestModelInfo> TFModelInfo::Create(const PATH_CHAR_TYPE*)\u2019:\n /home/josh/Downloads/tmp/onnxruntime/onnxruntime/test/perftest/TFModelInfo.cc:51:19: error: redundant move in return statement [-Werror=redundant-move]\n    51 |   return std::move(ret);\n       |          ~~~~~~~~~^~~~~\n /home/josh/Downloads/tmp/onnxruntime/onnxruntime/test/perftest/TFModelInfo.cc:51:19: note: remove \u2018std::move\u2019 call\n cc1plus: all warnings being treated as errors\n CMakeFiles/onnxruntime_perf_test.dir/build.make:82: recipe for target 'CMakeFiles/onnxruntime_perf_test.dir/home/josh/Downloads/tmp/onnxruntime/onnxruntime/test/perftest/TFModelInfo.cc.o' failed\n make[2]: *** [CMakeFiles/onnxruntime_perf_test.dir/home/josh/Downloads/tmp/onnxruntime/onnxruntime/test/perftest/TFModelInfo.cc.o] Error 1\n CMakeFiles/Makefile2:888: recipe for target 'CMakeFiles/onnxruntime_perf_test.dir/all' failed\n make[1]: *** [CMakeFiles/onnxruntime_perf_test.dir/all] Error 2\n Makefile:160: recipe for target 'all' failed\n make: *** [all] Error 2\n Traceback (most recent call last):\n   File \"/home/josh/Downloads/tmp/onnxruntime/tools/ci_build/build.py\", line 1795, in <module>\n     sys.exit(main())\n   File \"/home/josh/Downloads/tmp/onnxruntime/tools/ci_build/build.py\", line 1690, in main\n     build_targets(args, cmake_path, build_dir, configs, args.parallel)\n   File \"/home/josh/Downloads/tmp/onnxruntime/tools/ci_build/build.py\", line 868, in build_targets\n     run_subprocess(cmd_args, env=env)\n   File \"/home/josh/Downloads/tmp/onnxruntime/tools/ci_build/build.py\", line 402, in run_subprocess\n     env=my_env, shell=shell)\n   File \"/usr/lib/python3.6/subprocess.py\", line 438, in run\n     output=stdout, stderr=stderr)\n subprocess.CalledProcessError: Command '['/usr/bin/cmake', '--build', '/home/josh/Downloads/tmp/onnxruntime/build/Linux/RelWithDebInfo', '--config', 'RelWithDebInfo']' returned non-zero exit status 2.\n </denchmark-code>\n \n Solution\n Removing the explicit move statement appears to resolve the problem.\n <denchmark-code>return ret;\n </denchmark-code>\n \n The code then compiles and passes all tests.\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "jgbradley1", "commentT": "2020-06-10T23:02:54Z", "comment_text": "\n \t\tClosed via <denchmark-link:https://github.com/microsoft/onnxruntime/pull/4163>#4163</denchmark-link>\n \n \t\t"}}}, "commit": {"commit_id": "28d12dc4f073a3e8e2e5a70b86b5177f6c6d9cbc", "commit_author": "Scott McKay", "commitT": "2020-06-09 21:41:49+10:00", "commit_complexity": {"commit_NLOC": "0.0", "commit_CCN": "0.0", "commit_Nprams": "1.0"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "onnxruntime\\test\\perftest\\TFModelInfo.cc", "file_new_name": "onnxruntime\\test\\perftest\\TFModelInfo.cc", "file_complexity": {"file_NLOC": "48", "file_CCN": "15", "file_NToken": "464"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "11,12,13,14,45,47,53", "deleted_lines": "11,12,43,45,51", "method_info": {"method_name": "TFModelInfo::Create", "method_params": "model_url", "method_startline": "10", "method_endline": "54", "method_complexity": {"method_NLOC": "41", "method_CCN": "11", "method_NToken": "366", "method_nesting_level": "0"}}}}}}}}