{"BR": {"BR_id": "63", "BR_author": "avik-pal", "BRopenT": "2018-12-07T06:43:26Z", "BRcloseT": "2018-12-08T06:39:07Z", "BR_text": {"BRsummary": "Fix Gradient Visualization", "BRdescription": "\n Currently, instead of displaying the gradients norm we are showing the norm of the model parameters.\n Problems in fixing this simply:\n \n We are clearing the gradient buffers every time; this makes it impossible to track gradients for different losses.\n Printing the gradient wrt only the last executed loss will lead to wrong inference on the part of the user.\n Can't make gradients a property of the loss as it makes custom losses a nightmare to implement (we will have to impose a lot of constraints).\n \n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "avik-pal", "commentT": "2018-12-07T18:08:49Z", "comment_text": "\n \t\tThis can be fixed by storing the gradients of each parameter after going through the train_ops of each loss (as the gradient buffers are zeroed out at the beginning and not at the end). Will submit a PR once <denchmark-link:https://github.com/torchgan/torchgan/pull/62>#62</denchmark-link>\n  is merged.\n \t\t"}}}, "commit": {"commit_id": "cb5b5123d310c106d2f760fca85fbbe7f3185cda", "commit_author": "Aniket Das", "commitT": "2018-12-08 11:57:06+05:18", "commit_complexity": {"commit_NLOC": "0.17142857142857143", "commit_CCN": "0.2857142857142857", "commit_Nprams": "0.6571428571428571"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "torchgan\\logging\\logger.py", "file_new_name": "torchgan\\logging\\logger.py", "file_complexity": {"file_NLOC": "58", "file_CCN": "18", "file_NToken": "473"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "55,57,58", "deleted_lines": "52,53", "method_info": {"method_name": "run_end_epoch", "method_params": "self,trainer,epoch,args", "method_startline": "52", "method_endline": "67", "method_complexity": {"method_NLOC": "16", "method_CCN": "7", "method_NToken": "105", "method_nesting_level": "1"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "32,33", "deleted_lines": null, "method_info": {"method_name": "get_grad_viz", "method_params": "self", "method_startline": "32", "method_endline": "33", "method_complexity": {"method_NLOC": "2", "method_CCN": "1", "method_NToken": "12", "method_nesting_level": "1"}}}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 10, "file_old_name": "torchgan\\logging\\visualize.py", "file_new_name": "torchgan\\logging\\visualize.py", "file_complexity": {"file_NLOC": "186", "file_CCN": "54", "file_NToken": "1784"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "180,181", "deleted_lines": null, "method_info": {"method_name": "__call__", "method_params": "self,trainer,kwargs", "method_startline": "178", "method_endline": "181", "method_complexity": {"method_NLOC": "4", "method_CCN": "2", "method_NToken": "44", "method_nesting_level": "1"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "158,159", "deleted_lines": "158,159", "method_info": {"method_name": "log_console", "method_params": "self,name", "method_startline": "158", "method_endline": "159", "method_complexity": {"method_NLOC": "2", "method_CCN": "1", "method_NToken": "36", "method_nesting_level": "1"}}}, "hunk_2": {"Ismethod": 1, "added_lines": "149,150,151", "deleted_lines": "149,150", "method_info": {"method_name": "log_visdom", "method_params": "self,name,gradsum", "method_startline": "149", "method_endline": "151", "method_complexity": {"method_NLOC": "3", "method_CCN": "1", "method_NToken": "50", "method_nesting_level": "1"}}}, "hunk_3": {"Ismethod": 1, "added_lines": "146,147", "deleted_lines": "146,147", "method_info": {"method_name": "log_console", "method_params": "self,name,gradsum", "method_startline": "146", "method_endline": "147", "method_complexity": {"method_NLOC": "2", "method_CCN": "1", "method_NToken": "20", "method_nesting_level": "1"}}}, "hunk_4": {"Ismethod": 1, "added_lines": "161,162", "deleted_lines": null, "method_info": {"method_name": "log_visdom", "method_params": "self,name", "method_startline": "161", "method_endline": "163", "method_complexity": {"method_NLOC": "3", "method_CCN": "1", "method_NToken": "66", "method_nesting_level": "1"}}}, "hunk_5": {"Ismethod": 1, "added_lines": "143,144,145,146,147,148,149,150,151,152,153", "deleted_lines": "143,144,146,147,149,150", "method_info": {"method_name": "__init__", "method_params": "self,visualize_list,visdom_port,log_dir,writer", "method_startline": "143", "method_endline": "153", "method_complexity": {"method_NLOC": "11", "method_CCN": "6", "method_NToken": "88", "method_nesting_level": "1"}}}, "hunk_6": {"Ismethod": 1, "added_lines": "143,144", "deleted_lines": "143,144", "method_info": {"method_name": "log_tensorboard", "method_params": "self,name,gradsum", "method_startline": "143", "method_endline": "144", "method_complexity": {"method_NLOC": "2", "method_CCN": "1", "method_NToken": "28", "method_nesting_level": "1"}}}, "hunk_7": {"Ismethod": 1, "added_lines": "174,175,176", "deleted_lines": null, "method_info": {"method_name": "report_end_epoch", "method_params": "self", "method_startline": "174", "method_endline": "176", "method_complexity": {"method_NLOC": "3", "method_CCN": "2", "method_NToken": "37", "method_nesting_level": "1"}}}, "hunk_8": {"Ismethod": 1, "added_lines": "155,156", "deleted_lines": "155,156", "method_info": {"method_name": "log_tensorboard", "method_params": "self,name", "method_startline": "155", "method_endline": "156", "method_complexity": {"method_NLOC": "2", "method_CCN": "1", "method_NToken": "44", "method_nesting_level": "1"}}}, "hunk_9": {"Ismethod": 1, "added_lines": "165,166,167,168,169,170,171,172", "deleted_lines": null, "method_info": {"method_name": "update_grads", "method_params": "self,name,model,eps", "method_startline": "165", "method_endline": "172", "method_complexity": {"method_NLOC": "8", "method_CCN": "4", "method_NToken": "88", "method_nesting_level": "1"}}}}}, "file_2": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "torchgan\\trainer\\trainer.py", "file_new_name": "torchgan\\trainer\\trainer.py", "file_complexity": {"file_NLOC": "384", "file_CCN": "62", "file_NToken": "2039"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "367,368,369", "deleted_lines": null, "method_info": {"method_name": "train", "method_params": "self,data_loader,kwargs", "method_startline": "357", "method_endline": "404", "method_complexity": {"method_NLOC": "39", "method_CCN": "10", "method_NToken": "261", "method_nesting_level": "1"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "308,316,317,324,325,326,327,332,333,334,335", "deleted_lines": null, "method_info": {"method_name": "train_iter", "method_params": "self", "method_startline": "296", "method_endline": "336", "method_complexity": {"method_NLOC": "41", "method_CCN": "14", "method_NToken": "354", "method_nesting_level": "1"}}}}}}}}