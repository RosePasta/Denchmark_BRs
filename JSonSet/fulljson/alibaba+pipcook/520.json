{"BR": {"BR_id": "520", "BR_author": "FeelyChau", "BRopenT": "2020-08-27T16:18:48Z", "BRcloseT": "2020-09-10T11:26:18Z", "BR_text": {"BRsummary": "build: dev-build doesn't work", "BRdescription": "\n It's not work for me.\n After npm run dev-build, I got an error as:\n $ node ./packages/daemon/bootstrap.js\n ERROR: Error reading \"dist/config/config.js\". Error: SyntaxError: Cannot use import statement outside a module\n npm ERR! code ELIFECYCLE\n npm ERR! errno 1\n npm ERR! @pipcook/daemon@1.1.2 migration: `sequelize-cli db:migrate`\n npm ERR! Exit status 1\n npm ERR! \n npm ERR! Failed at the @pipcook/daemon@1.1.2 migration script.\n npm ERR! This is probably not a problem with npm. There is likely additional logging output above.\n \n npm ERR! A complete log of this run can be found in:\n npm ERR!     /path/to/.npm/_logs/2020-08-27T16_17_29_953Z-debug.log\n (node:16127) UnhandledPromiseRejectionWarning: Error: Command failed: npm run migration\n ERROR: Error reading \"dist/config/config.js\". Error: SyntaxError: Cannot use import statement outside a module\n npm ERR! code ELIFECYCLE\n npm ERR! errno 1\n npm ERR! @pipcook/daemon@1.1.2 migration: `sequelize-cli db:migrate`\n npm ERR! Exit status 1\n npm ERR! \n npm ERR! Failed at the @pipcook/daemon@1.1.2 migration script.\n npm ERR! This is probably not a problem with npm. There is likely additional logging output above.\n \n npm ERR! A complete log of this run can be found in:\n npm ERR!     /path/to/.npm/_logs/2020-08-27T16_17_29_953Z-debug.log\n \n     at checkExecSyncError (child_process.js:630:11)\n     at execSync (child_process.js:666:15)\n     at bootstrap (/path/to/pipcook/packages/daemon/bootstrap.js:48:17)\n     at Object.<anonymous> (/path/to/pipcook/packages/daemon/bootstrap.js:97:3)\n     at Module._compile (internal/modules/cjs/loader.js:1138:30)\n     at Object.Module._extensions..js (internal/modules/cjs/loader.js:1158:10)\n     at Module.load (internal/modules/cjs/loader.js:986:32)\n     at Function.Module._load (internal/modules/cjs/loader.js:879:14)\n     at Function.executeUserEntryPoint [as runMain] (internal/modules/run_main.js:71:12)\n     at internal/main/run_main_module.js:17:47\n (node:16127) UnhandledPromiseRejectionWarning: Unhandled promise rejection. This error originated either by throwing inside of an async function without a catch block, or by rejecting a promise which was not handled with .catch(). To terminate the node process on unhandled promise rejection, use the CLI flag `--unhandled-rejections=strict` (see https://nodejs.org/api/cli.html#cli_unhandled_rejections_mode). (rejection id: 1)\n (node:16127) [DEP0018] DeprecationWarning: Unhandled promise rejections are deprecated. In the future, promise rejections that are not handled will terminate the Node.js process with a non-zero exit code.\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "FeelyChau", "commentT": "2020-08-28T02:03:19Z", "comment_text": "\n \t\tThis is because esbuild only supports esm output for non-bundle building. I am working on a cjs output solution now.\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "FeelyChau", "commentT": "2020-08-29T19:38:11Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/FeelyChau>@FeelyChau</denchmark-link>\n  the title of an issue should be in this way: .\n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "FeelyChau", "commentT": "2020-08-29T19:40:04Z", "comment_text": "\n \t\t\n This is because esbuild only supports esm output for non-bundle building. I am working on a cjs output solution now.\n \n We should maintain the esbuild can work on Pipcook absolutely, and we need a workflow to ensure that's working always.\n \t\t"}, "comments_3": {"comment_id": 4, "comment_author": "FeelyChau", "commentT": "2020-09-10T11:27:03Z", "comment_text": "\n \t\tClosed by <denchmark-link:https://github.com/alibaba/pipcook/pull/562>#562</denchmark-link>\n \n \t\t"}}}, "commit": {"commit_id": "1362e14c3129fbb78fd1d6a05978a50c25462982", "commit_author": "WenheLI", "commitT": "2020-09-09 13:39:31+08:00", "commit_complexity": {"commit_NLOC": "None", "commit_CCN": "None", "commit_Nprams": "None"}, "changed_files": {"file_0": {"file_change_type": "ADD", "file_Nmethod": 0, "file_old_name": "None", "file_new_name": ".github\\workflows\\esbuild.yml", "file_complexity": {"file_NLOC": "None", "file_CCN": "None", "file_NToken": "None"}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "package-lock.json", "file_new_name": "package-lock.json", "file_complexity": {"file_NLOC": "None", "file_CCN": "None", "file_NToken": "None"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "3463,3464,3465", "deleted_lines": "3463,3464,3465"}}}, "file_2": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "package.json", "file_new_name": "package.json", "file_complexity": {"file_NLOC": "None", "file_CCN": "None", "file_NToken": "None"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "13", "deleted_lines": "13"}}}, "file_3": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "packages\\app\\package.json", "file_new_name": "packages\\app\\package.json", "file_complexity": {"file_NLOC": "None", "file_CCN": "None", "file_NToken": "None"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "14", "deleted_lines": "14"}}}, "file_4": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "packages\\cli\\package.json", "file_new_name": "packages\\cli\\package.json", "file_complexity": {"file_NLOC": "None", "file_CCN": "None", "file_NToken": "None"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "11", "deleted_lines": "11"}}}, "file_5": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "packages\\core\\package.json", "file_new_name": "packages\\core\\package.json", "file_complexity": {"file_NLOC": "None", "file_CCN": "None", "file_NToken": "None"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "14", "deleted_lines": "14"}}}, "file_6": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "packages\\costa\\package.json", "file_new_name": "packages\\costa\\package.json", "file_complexity": {"file_NLOC": "None", "file_CCN": "None", "file_NToken": "None"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "16", "deleted_lines": "16"}}}, "file_7": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "packages\\costa\\src\\runnable.ts", "file_new_name": "packages\\costa\\src\\runnable.ts", "file_complexity": {"file_NLOC": "163", "file_CCN": "6", "file_NToken": "1256"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": null, "deleted_lines": "10"}}}, "file_8": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "packages\\daemon\\package.json", "file_new_name": "packages\\daemon\\package.json", "file_complexity": {"file_NLOC": "None", "file_CCN": "None", "file_NToken": "None"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "59", "deleted_lines": "59"}}}, "file_9": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "packages\\sdk\\package.json", "file_new_name": "packages\\sdk\\package.json", "file_complexity": {"file_NLOC": "None", "file_CCN": "None", "file_NToken": "None"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "14", "deleted_lines": "14"}}}}}}