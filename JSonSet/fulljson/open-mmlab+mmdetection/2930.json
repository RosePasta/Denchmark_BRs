{"BR": {"BR_id": "2930", "BR_author": "caidandaren", "BRopenT": "2020-06-07T13:26:32Z", "BRcloseT": "2020-06-08T13:40:09Z", "BR_text": {"BRsummary": "Error when test HTC model", "BRdescription": "\n I have trained HTC model on our own dataset. Train process is all right but I find error when test.\n Test command is\n <denchmark-code>python  tools/test.py configs/htc/htc_without_semantic_x101_64x4d_fpn_dconv_c3-c5_mstrain_400_1400_2x_Future3d.py /tools/work_dirs/htc_without_semantic_x101_64x4d_fpn_dconv_c3-c5_mstrain_400_1400_2x_Future3d/latest.pth --format-only --options \"jsonfile_prefix=./mask_rcnn_test-dev_results\"\n </denchmark-code>\n \n Error trackback here.\n <denchmark-code>File \"/remote-home/my/Future3d/tools/test.py\", line 149, in <module>\n     main()\n   File \"/remote-home/my/Future3d/tools/test.py\", line 127, in main\n     args.show_score_thr)\n   File \"/remote-home/my/Future3d/mmdet/apis/test.py\", line 48, in single_gpu_test\n     result = model(return_loss=False, rescale=True, **data)\n   File \"/usr/local/miniconda3/envs/dl10/lib/python3.6/site-packages/torch/nn/modules/module.py\", line 541, in __call__\n     result = self.forward(*input, **kwargs)\n   File \"/usr/local/miniconda3/envs/dl10/lib/python3.6/site-packages/torch/nn/parallel/data_parallel.py\", line 150, in forward\n     return self.module(*inputs[0], **kwargs[0])\n   File \"/usr/local/miniconda3/envs/dl10/lib/python3.6/site-packages/torch/nn/modules/module.py\", line 541, in __call__\n     result = self.forward(*input, **kwargs)\n   File \"/remote-home/my/Future3d/mmdet/core/fp16/decorators.py\", line 51, in new_func\n     return old_func(*args, **kwargs)\n   File \"/remote-home/my/Future3d/mmdet/models/detectors/base.py\", line 150, in forward\n     return self.forward_test(img, img_metas, **kwargs)\n   File \"/remote-home/my/Future3d/mmdet/models/detectors/base.py\", line 135, in forward_test\n     return self.aug_test(imgs, img_metas, **kwargs)\n   File \"/remote-home/my/Future3d/mmdet/models/detectors/two_stage.py\", line 204, in aug_test\n     x, proposal_list, img_metas, rescale=rescale)\n   File \"/remote-home/my/Future3d/mmdet/models/roi_heads/htc_roi_head.py\", line 393, in aug_test\n     proposal_list = self.aug_test_rpn(img_feats, img_metas,\n   File \"/usr/local/miniconda3/envs/dl10/lib/python3.6/site-packages/torch/nn/modules/module.py\", line 585, in __getattr__\n     type(self).__name__, name))\n AttributeError: 'HybridTaskCascadeRoIHead' object has no attribute 'aug_test_rpn'\n </denchmark-code>\n \n Actually, i can't find 'aug_test_rpn' in the class.\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "caidandaren", "commentT": "2020-06-08T06:57:21Z", "comment_text": "\n \t\tThanks for your bug report. This is indeed a bug and we will fix it ASAP.\n \t\t"}}}, "commit": {"commit_id": "204f7514afedb41f69d08f91a3ca264cf7c5b4e4", "commit_author": "Wenwei Zhang", "commitT": "2020-06-08 21:40:09+08:00", "commit_complexity": {"commit_NLOC": "1.0", "commit_CCN": "1.0", "commit_Nprams": "1.0"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": ".isort.cfg", "file_new_name": ".isort.cfg", "file_complexity": {"file_NLOC": "None", "file_CCN": "None", "file_NToken": "None"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "6", "deleted_lines": "6"}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "mmdet\\models\\roi_heads\\cascade_roi_head.py", "file_new_name": "mmdet\\models\\roi_heads\\cascade_roi_head.py", "file_complexity": {"file_NLOC": "334", "file_CCN": "52", "file_NToken": "2387"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "396", "deleted_lines": "396,397", "method_info": {"method_name": "aug_test", "method_params": "self,features,proposal_list,img_metas,rescale", "method_startline": "338", "method_endline": "427", "method_complexity": {"method_NLOC": "74", "method_CCN": "9", "method_NToken": "540", "method_nesting_level": "1"}}}}}, "file_2": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "mmdet\\models\\roi_heads\\htc_roi_head.py", "file_new_name": "mmdet\\models\\roi_heads\\htc_roi_head.py", "file_complexity": {"file_NLOC": "421", "file_CCN": "56", "file_NToken": "2843"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "379", "deleted_lines": "379,392,393,394,395", "method_info": {"method_name": "aug_test", "method_params": "self,img_feats,proposal_list,img_metas,rescale", "method_startline": "379", "method_endline": "496", "method_complexity": {"method_NLOC": "101", "method_CCN": "14", "method_NToken": "698", "method_nesting_level": "1"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "379", "deleted_lines": "379,392,393,394,395", "method_info": {"method_name": "aug_test", "method_params": "self,img_feats,img_metas,proposals,rescale", "method_startline": "379", "method_endline": "500", "method_complexity": {"method_NLOC": "103", "method_CCN": "14", "method_NToken": "716", "method_nesting_level": "1"}}}}}}}}