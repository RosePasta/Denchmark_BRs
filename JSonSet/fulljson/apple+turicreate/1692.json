{"BR": {"BR_id": "1692", "BR_author": "hoytak", "BRopenT": "2019-04-02T19:08:08Z", "BRcloseT": "2019-04-10T17:54:13Z", "BR_text": {"BRsummary": "read_csv with mismatched quote characters fails silently.", "BRdescription": "\n The following (bad) file should error out; instead it fails silently.\n Test.csv:\n <denchmark-code>a, b\n \"a\", \"b\"\n \"c\", \"d\n </denchmark-code>\n \n Then gives this output:\n <denchmark-code>In [7]: X = tc.SFrame.read_csv(\"Test.csv\")\n Finished parsing file /Users/hoytak/Test.csv\n Parsing completed. Parsed 1 lines in 0.035703 secs.\n ------------------------------------------------------\n Inferred types from first 100 line(s) of file as\n column_type_hints=[str,str]\n If parsing fails due to incorrect types, you can correct\n the inferred type list above and pass it to read_csv in\n the column_type_hints argument\n ------------------------------------------------------\n Finished parsing file /Users/hoytak/Test.csv\n Parsing completed. Parsed 1 lines in 0.005156 secs.\n \n In [8]: X\n Out[8]:\n Columns:\n \ta\tstr\n \tb\tstr\n \n Rows: 1\n \n Data:\n +---+---+\n | a | b |\n +---+---+\n | a | b |\n +---+---+\n [1 rows x 2 columns]\n \n In [9]: cat Test.csv\n a, b\n \"a\", \"b\"\n \"c\", \"d\n </denchmark-code>\n \n Note that this also drops all subsequent lines:\n <denchmark-code>In [12]: X = tc.SFrame.read_csv(\"Test.csv\")\n Finished parsing file /Users/hoytak/Test.csv\n Parsing completed. Parsed 1 lines in 0.028732 secs.\n ------------------------------------------------------\n Inferred types from first 100 line(s) of file as\n column_type_hints=[str,str]\n If parsing fails due to incorrect types, you can correct\n the inferred type list above and pass it to read_csv in\n the column_type_hints argument\n ------------------------------------------------------\n Finished parsing file /Users/hoytak/Test.csv\n Parsing completed. Parsed 1 lines in 0.004767 secs.\n \n In [13]: X\n Out[13]:\n Columns:\n     a    str\n     b    str\n \n Rows: 1\n \n Data:\n +---+---+\n | a | b |\n +---+---+\n | a | b |\n +---+---+\n [1 rows x 2 columns]\n \n In [14]: !cat Test.csv\n a, b\n \"a\", \"b\"\n \"c\", \"d\n \"d\", \"e\"\n \"d\", \"eb\"\n \"d1\", \"ec\"\n \"d2\", \"eb\"\n \"d3\", \"ea\"\n \"d4\", \"e9\"\n \"d5\", \"e8\"\n \"d6\", \"e7\"\n </denchmark-code>\n \n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "hoytak", "commentT": "2019-04-10T17:54:13Z", "comment_text": "\n \t\tFixed with <denchmark-link:https://github.com/apple/turicreate/pull/1694>#1694</denchmark-link>\n .\n \t\t"}}}, "commit": {"commit_id": "b6cf6d767048910d4ecbe4db5201fd565a2008f9", "commit_author": "Yucheng Low", "commitT": "2019-04-09 11:58:11-07:00", "commit_complexity": {"commit_NLOC": "0.68", "commit_CCN": "0.12", "commit_Nprams": "1.0"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 3, "file_old_name": "src\\sframe\\parallel_csv_parser.cpp", "file_new_name": "src\\sframe\\parallel_csv_parser.cpp", "file_complexity": {"file_NLOC": "863", "file_CCN": "218", "file_NToken": "6013"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "871,879,880,881,882", "deleted_lines": null, "method_info": {"method_name": "turi::parallel_csv_parser::parallel_parse", "method_params": "eof", "method_startline": "871", "method_endline": "899", "method_complexity": {"method_NLOC": "22", "method_CCN": "6", "method_NToken": "172", "method_nesting_level": "3"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "257", "deleted_lines": "257", "method_info": {"method_name": "turi::parallel_csv_parser::parse", "method_params": "fin,output_frame,errors", "method_startline": "242", "method_endline": "338", "method_complexity": {"method_NLOC": "64", "method_CCN": "21", "method_NToken": "425", "method_nesting_level": "3"}}}, "hunk_2": {"Ismethod": 1, "added_lines": "867,868,869,871,879,880,881,882", "deleted_lines": "867", "method_info": {"method_name": "turi::parallel_csv_parser::parallel_parse", "method_params": "", "method_startline": "867", "method_endline": "891", "method_complexity": {"method_NLOC": "19", "method_CCN": "4", "method_NToken": "143", "method_nesting_level": "3"}}}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 5, "file_old_name": "test\\sframe\\sframe_csv_test.cxx", "file_new_name": "test\\sframe\\sframe_csv_test.cxx", "file_complexity": {"file_NLOC": "805", "file_CCN": "91", "file_NToken": "7991"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "527,528,529,530,531,532,533,534,535,536,537", "deleted_lines": null, "method_info": {"method_name": "incorrectly_quoted_1", "method_params": "", "method_startline": "527", "method_endline": "537", "method_complexity": {"method_NLOC": "11", "method_CCN": "1", "method_NToken": "52", "method_nesting_level": "0"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "716", "deleted_lines": null, "method_info": {"method_name": "sframe_test::evaluate", "method_params": "data", "method_startline": "710", "method_endline": "739", "method_complexity": {"method_NLOC": "26", "method_CCN": "5", "method_NToken": "222", "method_nesting_level": "1"}}}, "hunk_2": {"Ismethod": 1, "added_lines": "928,929,930", "deleted_lines": null, "method_info": {"method_name": "sframe_test::test_invalid_csv_cases", "method_params": "", "method_startline": "928", "method_endline": "930", "method_complexity": {"method_NLOC": "3", "method_CCN": "1", "method_NToken": "12", "method_nesting_level": "1"}}}, "hunk_3": {"Ismethod": 1, "added_lines": "952,953,954", "deleted_lines": null, "method_info": {"method_name": "BOOST_AUTO_TEST_CASE", "method_params": "test_invalid_csv_cases", "method_startline": "952", "method_endline": "954", "method_complexity": {"method_NLOC": "3", "method_CCN": "1", "method_NToken": "12", "method_nesting_level": "0"}}}, "hunk_4": {"Ismethod": 1, "added_lines": "791,792,793,794", "deleted_lines": null, "method_info": {"method_name": "sframe_test::validate_file", "method_params": "data,filename", "method_startline": "775", "method_endline": "814", "method_complexity": {"method_NLOC": "36", "method_CCN": "5", "method_NToken": "348", "method_nesting_level": "1"}}}}}}}}