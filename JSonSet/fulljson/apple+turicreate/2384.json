{"BR": {"BR_id": "2384", "BR_author": "syoutsey", "BRopenT": "2019-10-02T00:36:47Z", "BRcloseT": "2019-10-16T20:02:38Z", "BR_text": {"BRsummary": "HTTPS downloads fail with Turi Create 5.7", "BRdescription": "\n HTTPS downloads fail with Turi Create 5.7. This issue does not reproduce on Turi Create 5.6.\n System: macOS 10.15 beta\n Error: OSError: Cannot open https://static.turi.com/datasets/audioscrobbler for read. Not implemented: compiled without support for http(s):// URLs.\n Reproduction steps - working version:\n <denchmark-code>(venv) \u279c  turi-create-3.6-5.6 pip list | grep turicreate\n turicreate      5.6        \n (venv) \u279c  turi-create-3.6-5.6 python --version\n Python 3.6.8\n (venv) \u279c  turi-create-3.6-5.6 python\n Python 3.6.8 (v3.6.8:3c6b436a57, Dec 24 2018, 02:04:31) \n [GCC 4.2.1 Compatible Apple LLVM 6.0 (clang-600.0.57)] on darwin\n Type \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n >>> import turicreate as tc\n >>> sf = tc.SFrame('https://static.turi.com/datasets/audioscrobbler')\n Downloading https://static.turi.com/datasets/audioscrobbler/dir_archive.ini to /var/folders/bt/d7_f7y897cz8f7256sj30j1c0000gn/T/turicreate-sam/41175/2c04d8ef-585a-4937-89f5-3c8ba78d52b9.ini\n Downloading https://static.turi.com/datasets/audioscrobbler/objects.bin to /var/folders/bt/d7_f7y897cz8f7256sj30j1c0000gn/T/turicreate-sam/41175/1f709ccd-edfe-4cc0-9c4c-175ef6f38ef4.bin\n Downloading https://static.turi.com/datasets/audioscrobbler/m_74b0dc51.frame_idx to /var/folders/bt/d7_f7y897cz8f7256sj30j1c0000gn/T/turicreate-sam/41175/aa6f3d62-9b01-4071-8d8c-db5291cf3276.frame_idx\n Downloading https://static.turi.com/datasets/audioscrobbler/m_74b0dc51.sidx to /var/folders/bt/d7_f7y897cz8f7256sj30j1c0000gn/T/turicreate-sam/41175/561e4baa-7d91-4a81-a5a4-24d5785c5a9d.sidx\n </denchmark-code>\n \n Reproduction steps - nonfunctional version:\n <denchmark-code>(venv) \u279c  turi-create-3.6-5.7 pip list | grep turicreate                                                    \n turicreate      5.7        \n (venv) \u279c  turi-create-3.6-5.7 python --version\n Python 3.6.8\n (venv) \u279c  turi-create-3.6-5.7 python\n Python 3.6.8 (v3.6.8:3c6b436a57, Dec 24 2018, 02:04:31) \n [GCC 4.2.1 Compatible Apple LLVM 6.0 (clang-600.0.57)] on darwin\n Type \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n >>> import turicreate as tc\n sf = tc.SFrame('https://static.turi.com/datasets/audioscrobbler')\n >>> sf = tc.SFrame('https://static.turi.com/datasets/audioscrobbler')\n Downloading https://static.turi.com/datasets/audioscrobbler to /var/folders/bt/d7_f7y897cz8f7256sj30j1c0000gn/T/turicreate-sam/42755/8ae0d96b-935c-4ecd-a0a5-f6fa33b9bc83\n Failed to download https://static.turi.com/datasets/audioscrobbler: HTTP response code said error\n Traceback (most recent call last):\n   File \"/Users/sam/src/explore/turi-create-3.6-5.7/venv/lib/python3.6/site-packages/turicreate/data_structures/sframe.py\", line 808, in __init__\n     self.__proxy__.load_from_sframe_index(url)\n   File \"cy_sframe.pyx\", line 71, in turicreate._cython.cy_sframe.UnitySFrameProxy.load_from_sframe_index\n   File \"cy_sframe.pyx\", line 74, in turicreate._cython.cy_sframe.UnitySFrameProxy.load_from_sframe_index\n OSError: Cannot open https://static.turi.com/datasets/audioscrobbler for read. Not implemented: compiled without support for http(s):// URLs.\n \n During handling of the above exception, another exception occurred:\n \n Traceback (most recent call last):\n   File \"<stdin>\", line 1, in <module>\n   File \"/Users/sam/src/explore/turi-create-3.6-5.7/venv/lib/python3.6/site-packages/turicreate/data_structures/sframe.py\", line 812, in __init__\n     raise ValueError('Unknown input type: ' + format)\n   File \"/Users/sam/src/explore/turi-create-3.6-5.7/venv/lib/python3.6/site-packages/turicreate/_cython/context.py\", line 49, in __exit__\n     raise exc_type(exc_value)\n OSError: Cannot open https://static.turi.com/datasets/audioscrobbler for read. Not implemented: compiled without support for http(s):// URLs.\n >>> \n </denchmark-code>\n \n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "syoutsey", "commentT": "2019-10-02T23:25:30Z", "comment_text": "\n \t\tThis could intersect with <denchmark-link:https://github.com/apple/turicreate/pull/2387>#2387</denchmark-link>\n .  This fixes a few places where the if-defs were wrong.\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "syoutsey", "commentT": "2019-10-03T00:38:47Z", "comment_text": "\n \t\tCould we confirm that this works with 5.6?  In the browser it says it's invalid.\n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "syoutsey", "commentT": "2019-10-03T00:39:19Z", "comment_text": "\n \t\tYes, it works with 5.6.\n <denchmark-code>\n In [1]: import turicreate as tc                                                                                                \n  \n In [2]: sf = tc.SFrame('https://static.turi.com/datasets/audioscrobbler')                                                      \n Downloading https://static.turi.com/datasets/audioscrobbler/dir_archive.ini to /var/folders/8h/vj1q8h6s7mz5rsv68990qkl40000gn/T/turicreate-schhabra/11811/8d808c34-ea9f-47d2-8d7a-1b98dc04826c.ini\n Downloading https://static.turi.com/datasets/audioscrobbler/objects.bin to /var/folders/8h/vj1q8h6s7mz5rsv68990qkl40000gn/T/turicreate-schhabra/11811/8c33d1a1-dc64-4c2d-9d05-ce57a7667d51.bin\n Downloading https://static.turi.com/datasets/audioscrobbler/m_74b0dc51.frame_idx to /var/folders/8h/vj1q8h6s7mz5rsv68990qkl40000gn/T/turicreate-schhabra/11811/0f4a9d89-e022-48ef-8446-6436f299ac15.frame_idx\n Downloading https://static.turi.com/datasets/audioscrobbler/m_74b0dc51.sidx to /var/folders/8h/vj1q8h6s7mz5rsv68990qkl40000gn/T/turicreate-schhabra/11811/1740010e-bdd0-462f-a9bd-10921d6871c9.sidx\n \n In [3]: sf                                                                                                                     \n Out[3]: Downloading https://static.turi.com/datasets/audioscrobbler/m_74b0dc51.0000 to /var/folders/8h/vj1q8h6s7mz5rsv68990qkl40000gn/T/turicreate-schhabra/11811/665a9ade-c5e8-471b-9905-2d6ab97c2cf3.0000\n Downloading https://static.turi.com/datasets/audioscrobbler/m_74b0dc51.0001 to /var/folders/8h/vj1q8h6s7mz5rsv68990qkl40000gn/T/turicreate-schhabra/11811/556625b0-fcf7-49de-aa1f-804cc4a53464.0001\n Downloading https://static.turi.com/datasets/audioscrobbler/m_74b0dc51.0002 to /var/folders/8h/vj1q8h6s7mz5rsv68990qkl40000gn/T/turicreate-schhabra/11811/55af3ec2-b9b9-4377-90fc-b077742c600d.0002\n Downloading https://static.turi.com/datasets/audioscrobbler/m_74b0dc51.0003 to /var/folders/8h/vj1q8h6s7mz5rsv68990qkl40000gn/T/turicreate-schhabra/11811/1534df0d-f3af-4753-b2db-c7f4d03092e4.0003\n Downloading https://static.turi.com/datasets/audioscrobbler/m_74b0dc51.0004 to /var/folders/8h/vj1q8h6s7mz5rsv68990qkl40000gn/T/turicreate-schhabra/11811/f9492570-f266-4e32-86d9-3d6540a8166f.0004\n Downloading https://static.turi.com/datasets/audioscrobbler/m_74b0dc51.0005 to /var/folders/8h/vj1q8h6s7mz5rsv68990qkl40000gn/T/turicreate-schhabra/11811/9fb99454-77ed-48f7-99c4-378e7ad2f4fa.0005\n Downloading https://static.turi.com/datasets/audioscrobbler/m_74b0dc51.0006 to /var/folders/8h/vj1q8h6s7mz5rsv68990qkl40000gn/T/turicreate-schhabra/11811/b0705330-0e8b-4129-8de9-6fb86531ba10.0006\n Downloading https://static.turi.com/datasets/audioscrobbler/m_74b0dc51.0007 to /var/folders/8h/vj1q8h6s7mz5rsv68990qkl40000gn/T/turicreate-schhabra/11811/e3fc9410-d51f-4dd7-beaa-5f0d998c3447.0007\n \n Columns:\n \tuser_id\tstr\n \titem_id\tstr\n \ttarget\tint\n \n Rows: 418036\n \n Data:\n +---------+----------------+--------+\n | user_id |    item_id     | target |\n +---------+----------------+--------+\n | 1001606 | Raver's Nature |   2    |\n | 1002598 | Raver's Nature |   1    |\n | 1009768 | Raver's Nature |   29   |\n | 1020855 | Raver's Nature |   9    |\n | 1024677 | Raver's Nature |   1    |\n | 1025593 | Raver's Nature |   3    |\n | 1036036 | Raver's Nature |   51   |\n | 1037250 | Raver's Nature |   3    |\n | 1037372 | Raver's Nature |   1    |\n | 1037666 | Raver's Nature |   1    |\n +---------+----------------+--------+\n [418036 rows x 3 columns]\n Note: Only the head of the SFrame is printed.\n You can use print_rows(num_rows=m, num_columns=n) to print more rows and columns.\n </denchmark-code>\n \n \t\t"}, "comments_3": {"comment_id": 4, "comment_author": "syoutsey", "commentT": "2019-10-03T00:41:46Z", "comment_text": "\n \t\tIt's valid if you assume it's a directory filled with SFrame contents.\n \t\t"}, "comments_4": {"comment_id": 5, "comment_author": "syoutsey", "commentT": "2019-10-03T00:43:11Z", "comment_text": "\n \t\tAh, I see. Yes, then this is a regression.\n \t\t"}, "comments_5": {"comment_id": 6, "comment_author": "syoutsey", "commentT": "2019-10-04T22:34:04Z", "comment_text": "\n \t\tDo we have a sample http/https dataset we can use to do integration test?\n \t\t"}, "comments_6": {"comment_id": 7, "comment_author": "syoutsey", "commentT": "2019-10-04T23:06:40Z", "comment_text": "\n \t\t@Jarvi-Izana I'm not sure what you mean, does the SFrame linked in the original error report work?\n \t\t"}, "comments_7": {"comment_id": 8, "comment_author": "syoutsey", "commentT": "2019-10-06T03:01:23Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/syoutsey>@syoutsey</denchmark-link>\n  Yes, it's fixed in <denchmark-link:https://github.com/apple/turicreate/pull/2405>#2405</denchmark-link>\n . I need another link to a small sample data for test purpose to make sure we won't break reading from https/http in the future.\n \t\t"}, "comments_8": {"comment_id": 9, "comment_author": "syoutsey", "commentT": "2019-10-07T16:30:01Z", "comment_text": "\n \t\t@Jarvi-Izana does this work? <denchmark-link:https://static.turi.com/datasets/nips-text>https://static.turi.com/datasets/nips-text</denchmark-link>\n \n \t\t"}, "comments_9": {"comment_id": 10, "comment_author": "syoutsey", "commentT": "2019-10-07T22:31:07Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/syoutsey>@syoutsey</denchmark-link>\n  That doesn't contain frame formatted data. Do you have dataset similar to  but with small size, probably 1 row is enough for us to test pull data over real network.\n \t\t"}, "comments_10": {"comment_id": 11, "comment_author": "syoutsey", "commentT": "2019-10-16T20:02:38Z", "comment_text": "\n \t\tfixed by <denchmark-link:https://github.com/apple/turicreate/pull/2405>#2405</denchmark-link>\n \n \t\t"}}}, "commit": {"commit_id": "0b73e6d178adf4a72b8c8b6eca7ce87ddd41ceeb", "commit_author": "Guihao Liang", "commitT": "2019-10-16 13:02:02-07:00", "commit_complexity": {"commit_NLOC": "1.0", "commit_CCN": "1.0", "commit_Nprams": "0.0"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "src\\core\\storage\\sframe_interface\\unity_sframe.cpp", "file_new_name": "src\\core\\storage\\sframe_interface\\unity_sframe.cpp", "file_complexity": {"file_NLOC": "1519", "file_CCN": "320", "file_NToken": "11802"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "104,105", "deleted_lines": "104,109,115,116,117,118", "method_info": {"method_name": "turi::unity_sframe::construct_from_sframe_index", "method_params": "location", "method_startline": "98", "method_endline": "144", "method_complexity": {"method_NLOC": "37", "method_CCN": "12", "method_NToken": "302", "method_nesting_level": "1"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "1164", "deleted_lines": null, "method_info": {"method_name": "turi::unity_sframe::sample", "method_params": "percent,random_seed,exact", "method_startline": "1155", "method_endline": "1166", "method_complexity": {"method_NLOC": "11", "method_CCN": "2", "method_NToken": "84", "method_nesting_level": "1"}}}}}}}}