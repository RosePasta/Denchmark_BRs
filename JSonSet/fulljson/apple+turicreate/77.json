{"BR": {"BR_id": "77", "BR_author": "cor-rine", "BRopenT": "2017-12-12T23:45:37Z", "BRcloseT": "2018-03-23T17:22:53Z", "BR_text": {"BRsummary": "ToolkitError: Unsupported PNG bit depth: 4", "BRdescription": "\n While creating graph lab images - PNG images are not currently supported by the ToolKit, resulting in the following error to be thrown:\n ToolkitError: Unsupported PNG bit depth: 4\n Complete error details:\n <denchmark-code>---------------------------------------------------------------------------\n ToolkitError                              Traceback (most recent call last)\n /Users/corrinetoracchio/Projects/corSheetMusic/turi/read-timed-notes.py in <module>()\n      11 \n      12                 for imageFile in data:\n ---> 13                          gl.Image(imageFile.replace('\\n', ''))\n \n /Users/corrinetoracchio/anaconda/envs/gl-env/lib/python2.7/site-packages/graphlab/data_structures/image.pyc in __init__(self, path, format, **_Image__internal_kw_args)\n      70             from ..util import _make_internal_url\n      71             from .. import extensions as _extensions\n ---> 72             img = _extensions.load_image(_make_internal_url(path), format)\n      73             for key, value in list(img.__dict__.items()):\n      74                 setattr(self, key, value)\n \n /Users/corrinetoracchio/anaconda/envs/gl-env/lib/python2.7/site-packages/graphlab/extensions.pyc in <lambda>(*args, **kwargs)\n     166 \n     167 def _make_injected_function(fn, arguments):\n --> 168     return lambda *args, **kwargs: _run_toolkit_function(fn, arguments, args, kwargs)\n     169 \n     170 def _class_instance_from_name(class_name, *arg, **kwarg):\n \n /Users/corrinetoracchio/anaconda/envs/gl-env/lib/python2.7/site-packages/graphlab/extensions.pyc in _run_toolkit_function(fnname, arguments, args, kwargs)\n     155     if ret[0] != True:\n     156         if len(ret[1]) > 0:\n --> 157             raise _ToolkitError(ret[1])\n     158         else:\n     159             raise _ToolkitError(\"Toolkit failed with unknown error\")\n \n ToolkitError: Unsupported PNG bit depth: 4\n </denchmark-code>\n \n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "cor-rine", "commentT": "2017-12-12T23:54:47Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/cor-rine>@cor-rine</denchmark-link>\n  PNG images should be supported with other bit depths (like 8 bits per channel). We'll keep this issue open to track adding support for 4-bit images. In the meantime, as a workaround you could use another tool like ImageMagick to convert the bit depth to 24-bit (8 bits per channel, 3 channels) or 32-bit (8 bits per channel, 4 channels) prior to loading the images into Turi Create. Hope that helps!\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "cor-rine", "commentT": "2017-12-13T00:02:13Z", "comment_text": "\n \t\tHey, thanks <denchmark-link:https://github.com/znation>@znation</denchmark-link>\n  - actually, I think I messed up and logged my issue into your bucket by accident.  I was working with graphlab Image and filed your issue because of the logo.  Are you associated with graphlab?  This issue might be more relevant to their team.\n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "cor-rine", "commentT": "2018-03-23T17:22:53Z", "comment_text": "\n \t\tThis issue is fixed by <denchmark-link:https://github.com/apple/turicreate/pull/393>#393</denchmark-link>\n . In the next release of Turi Create, you should be able to load those images without a problem. Thanks for reporting this!\n \t\t"}}}, "commit": {"commit_id": "48a285bd97328ed552fdf94f8bbb1c5074d319d3", "commit_author": "Gustav Larsson", "commitT": "2018-03-23 10:21:43-07:00", "commit_complexity": {"commit_NLOC": "0.06666666666666667", "commit_CCN": "1.0", "commit_Nprams": "0.9"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "src\\image\\png_io.cpp", "file_new_name": "src\\image\\png_io.cpp", "file_complexity": {"file_NLOC": "221", "file_CCN": "44", "file_NToken": "1540"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": null, "deleted_lines": "230,231,232,233", "method_info": {"method_name": "turi::parse_png", "method_params": "data,length,width,height,channels", "method_startline": "191", "method_endline": "242", "method_complexity": {"method_NLOC": "40", "method_CCN": "6", "method_NToken": "288", "method_nesting_level": "1"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "322,323,324,325,326,327,328,329,330,331,332,333,334,335", "deleted_lines": null, "method_info": {"method_name": "turi::decode_png", "method_params": "data,length,out_data,out_length", "method_startline": "291", "method_endline": "345", "method_complexity": {"method_NLOC": "36", "method_CCN": "8", "method_NToken": "271", "method_nesting_level": "1"}}}}}, "file_1": {"file_change_type": "ADD", "file_Nmethod": 0, "file_old_name": "src\\unity\\python\\turicreate\\test\\images\\bitdepths\\color_16bit.png", "file_new_name": "src\\unity\\python\\turicreate\\test\\images\\bitdepths\\color_16bit.png", "file_complexity": {"file_NLOC": "None", "file_CCN": "None", "file_NToken": "None"}}, "file_2": {"file_change_type": "ADD", "file_Nmethod": 0, "file_old_name": "src\\unity\\python\\turicreate\\test\\images\\bitdepths\\color_1bit.png", "file_new_name": "src\\unity\\python\\turicreate\\test\\images\\bitdepths\\color_1bit.png", "file_complexity": {"file_NLOC": "None", "file_CCN": "None", "file_NToken": "None"}}, "file_3": {"file_change_type": "ADD", "file_Nmethod": 0, "file_old_name": "src\\unity\\python\\turicreate\\test\\images\\bitdepths\\color_2bit.png", "file_new_name": "src\\unity\\python\\turicreate\\test\\images\\bitdepths\\color_2bit.png", "file_complexity": {"file_NLOC": "None", "file_CCN": "None", "file_NToken": "None"}}, "file_4": {"file_change_type": "ADD", "file_Nmethod": 0, "file_old_name": "src\\unity\\python\\turicreate\\test\\images\\bitdepths\\color_4bit.png", "file_new_name": "src\\unity\\python\\turicreate\\test\\images\\bitdepths\\color_4bit.png", "file_complexity": {"file_NLOC": "None", "file_CCN": "None", "file_NToken": "None"}}, "file_5": {"file_change_type": "ADD", "file_Nmethod": 0, "file_old_name": "src\\unity\\python\\turicreate\\test\\images\\bitdepths\\color_8bit.png", "file_new_name": "src\\unity\\python\\turicreate\\test\\images\\bitdepths\\color_8bit.png", "file_complexity": {"file_NLOC": "None", "file_CCN": "None", "file_NToken": "None"}}, "file_6": {"file_change_type": "ADD", "file_Nmethod": 0, "file_old_name": "src\\unity\\python\\turicreate\\test\\images\\bitdepths\\gray_16bit.png", "file_new_name": "src\\unity\\python\\turicreate\\test\\images\\bitdepths\\gray_16bit.png", "file_complexity": {"file_NLOC": "None", "file_CCN": "None", "file_NToken": "None"}}, "file_7": {"file_change_type": "ADD", "file_Nmethod": 0, "file_old_name": "src\\unity\\python\\turicreate\\test\\images\\bitdepths\\gray_1bit.png", "file_new_name": "src\\unity\\python\\turicreate\\test\\images\\bitdepths\\gray_1bit.png", "file_complexity": {"file_NLOC": "None", "file_CCN": "None", "file_NToken": "None"}}, "file_8": {"file_change_type": "ADD", "file_Nmethod": 0, "file_old_name": "src\\unity\\python\\turicreate\\test\\images\\bitdepths\\gray_2bit.png", "file_new_name": "src\\unity\\python\\turicreate\\test\\images\\bitdepths\\gray_2bit.png", "file_complexity": {"file_NLOC": "None", "file_CCN": "None", "file_NToken": "None"}}, "file_9": {"file_change_type": "ADD", "file_Nmethod": 0, "file_old_name": "src\\unity\\python\\turicreate\\test\\images\\bitdepths\\gray_4bit.png", "file_new_name": "src\\unity\\python\\turicreate\\test\\images\\bitdepths\\gray_4bit.png", "file_complexity": {"file_NLOC": "None", "file_CCN": "None", "file_NToken": "None"}}, "file_10": {"file_change_type": "ADD", "file_Nmethod": 0, "file_old_name": "src\\unity\\python\\turicreate\\test\\images\\bitdepths\\gray_8bit.png", "file_new_name": "src\\unity\\python\\turicreate\\test\\images\\bitdepths\\gray_8bit.png", "file_complexity": {"file_NLOC": "None", "file_CCN": "None", "file_NToken": "None"}}, "file_11": {"file_change_type": "ADD", "file_Nmethod": 0, "file_old_name": "src\\unity\\python\\turicreate\\test\\images\\bitdepths\\palette_1bit.png", "file_new_name": "src\\unity\\python\\turicreate\\test\\images\\bitdepths\\palette_1bit.png", "file_complexity": {"file_NLOC": "None", "file_CCN": "None", "file_NToken": "None"}}, "file_12": {"file_change_type": "ADD", "file_Nmethod": 0, "file_old_name": "src\\unity\\python\\turicreate\\test\\images\\bitdepths\\palette_2bit.png", "file_new_name": "src\\unity\\python\\turicreate\\test\\images\\bitdepths\\palette_2bit.png", "file_complexity": {"file_NLOC": "None", "file_CCN": "None", "file_NToken": "None"}}, "file_13": {"file_change_type": "ADD", "file_Nmethod": 0, "file_old_name": "src\\unity\\python\\turicreate\\test\\images\\bitdepths\\palette_4bit.png", "file_new_name": "src\\unity\\python\\turicreate\\test\\images\\bitdepths\\palette_4bit.png", "file_complexity": {"file_NLOC": "None", "file_CCN": "None", "file_NToken": "None"}}, "file_14": {"file_change_type": "ADD", "file_Nmethod": 0, "file_old_name": "src\\unity\\python\\turicreate\\test\\images\\bitdepths\\palette_8bit.png", "file_new_name": "src\\unity\\python\\turicreate\\test\\images\\bitdepths\\palette_8bit.png", "file_complexity": {"file_NLOC": "None", "file_CCN": "None", "file_NToken": "None"}}, "file_15": {"file_change_type": "MODIFY", "file_Nmethod": 4, "file_old_name": "src\\unity\\python\\turicreate\\test\\test_image_type.py", "file_new_name": "src\\unity\\python\\turicreate\\test\\test_image_type.py", "file_complexity": {"file_NLOC": "198", "file_CCN": "42", "file_NToken": "2491"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "250", "deleted_lines": "244", "method_info": {"method_name": "test_pixel_data", "method_params": "self", "method_startline": "234", "method_endline": "250", "method_complexity": {"method_NLOC": "12", "method_CCN": "2", "method_NToken": "177", "method_nesting_level": "1"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "252,253", "deleted_lines": null, "method_info": {"method_name": "test_png_bitdepth.path", "method_params": "name", "method_startline": "252", "method_endline": "253", "method_complexity": {"method_NLOC": "2", "method_CCN": "1", "method_NToken": "20", "method_nesting_level": "2"}}}, "hunk_2": {"Ismethod": 1, "added_lines": "138,150", "deleted_lines": "138,150", "method_info": {"method_name": "test_load_images", "method_params": "self", "method_startline": "133", "method_endline": "169", "method_complexity": {"method_NLOC": "23", "method_CCN": "1", "method_NToken": "271", "method_nesting_level": "1"}}}, "hunk_3": {"Ismethod": 1, "added_lines": "251,252,253,254,255,256,257,258,259,260,261,262,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,278,279,280,281,282", "deleted_lines": null, "method_info": {"method_name": "test_png_bitdepth", "method_params": "self", "method_startline": "251", "method_endline": "282", "method_complexity": {"method_NLOC": "25", "method_CCN": "2", "method_NToken": "567", "method_nesting_level": "1"}}}}}}}}