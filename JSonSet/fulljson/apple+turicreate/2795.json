{"BR": {"BR_id": "2795", "BR_author": "jakesabathia2", "BRopenT": "2019-12-04T23:16:23Z", "BRcloseT": "2019-12-06T05:35:58Z", "BR_text": {"BRsummary": "output regression for OD export_coreml meta data", "BRdescription": "\n When run\n <denchmark-code>model.export_coreml(filename,include_non_maximum_suppression=True)\n </denchmark-code>\n \n 6.0:\n <denchmark-code>metadata {\n   shortDescription: \"Object detector (darknet-yolo) with non-maximum suppression created by Turi Create (version 5.8)\"\n   userDefined {\n     key: \"annotations\"\n     value: \"annotations\"\n   }\n   userDefined {\n     key: \"classes\"\n     value: \"bike,carsgraz\"\n   }\n   userDefined {\n     key: \"confidence_threshold\"\n     value: \"0.25\"\n   }\n   userDefined {\n     key: \"feature\"\n     value: \"image\"\n   }\n   userDefined {\n     key: \"include_non_maximum_suppression\"\n     value: \"True\"\n   }\n   userDefined {\n     key: \"iou_threshold\"\n     value: \"0.45\"\n   }\n   userDefined {\n     key: \"max_iterations\"\n     value: \"500\"\n   }\n   userDefined {\n     key: \"model\"\n     value: \"darknet-yolo\"\n   }\n   userDefined {\n     key: \"non_maximum_suppression_threshold\"\n     value: \"0.45\"\n   }\n   userDefined {\n     key: \"training_iterations\"\n     value: \"500\"\n   }\n   userDefined {\n     key: \"turicreate_version\"\n     value: \"5.8\"\n   }\n   userDefined {\n     key: \"type\"\n     value: \"ObjectDetector\"\n   }\n   userDefined {\n     key: \"version\"\n     value: \"1\"\n   }\n }\n \n </denchmark-code>\n \n 5.8:\n <denchmark-code>metadata {\n   shortDescription: \"Object detector created by Turi Create (version 6.0rc1)\"\n   userDefined {\n     key: \"annotations\"\n     value: \"annotations\"\n   }\n   userDefined {\n     key: \"classes\"\n     value: \"bike,carsgraz\"\n   }\n   userDefined {\n     key: \"com.github.apple.os.platform\"\n     value: \"Darwin-19.0.0-x86_64-i386-64bit\"\n   }\n   userDefined {\n     key: \"com.github.apple.turicreate.version\"\n     value: \"6.0rc1\"\n   }\n   userDefined {\n     key: \"confidence_threshold\"\n     value: \"\"\n   }\n   userDefined {\n     key: \"feature\"\n     value: \"image\"\n   }\n   userDefined {\n     key: \"include_non_maximum_suppression\"\n     value: \"True\"\n   }\n   userDefined {\n     key: \"iou_threshold\"\n     value: \"\"\n   }\n   userDefined {\n     key: \"max_iterations\"\n     value: \"500\"\n   }\n   userDefined {\n     key: \"model\"\n     value: \"darknet-yolo\"\n   }\n   userDefined {\n     key: \"training_iterations\"\n     value: \"500\"\n   }\n   userDefined {\n     key: \"type\"\n     value: \"object_detector\"\n   }\n }\n </denchmark-code>\n \n We got three issues need to be fixed:\n \n iou_threshold should produce default value (0.45)\n confidence_threshold should produce default value (0.25)\n Should have version attribute.\n ============\n When we run\n \n <denchmark-code>model.export_coreml(filename,include_non_maximum_suppression=False)\n </denchmark-code>\n \n 5.8:\n <denchmark-code>metadata {\n   shortDescription: \"Object detector (darknet-yolo) created by Turi Create (version 5.8)\"\n   userDefined {\n     key: \"annotations\"\n     value: \"annotations\"\n   }\n   userDefined {\n     key: \"classes\"\n     value: \"bike,carsgraz\"\n   }\n   userDefined {\n     key: \"confidence_threshold\"\n     value: \"0.25\"\n   }\n   userDefined {\n     key: \"feature\"\n     value: \"image\"\n   }\n   userDefined {\n     key: \"include_non_maximum_suppression\"\n     value: \"False\"\n   }\n   userDefined {\n     key: \"iou_threshold\"\n     value: \"0.45\"\n   }\n   userDefined {\n     key: \"max_iterations\"\n     value: \"500\"\n   }\n   userDefined {\n     key: \"model\"\n     value: \"darknet-yolo\"\n   }\n   userDefined {\n     key: \"non_maximum_suppression_threshold\"\n     value: \"0.45\"\n   }\n   userDefined {\n     key: \"training_iterations\"\n     value: \"500\"\n   }\n   userDefined {\n     key: \"turicreate_version\"\n     value: \"5.8\"\n   }\n   userDefined {\n     key: \"type\"\n     value: \"ObjectDetector\"\n   }\n   userDefined {\n     key: \"version\"\n     value: \"1\"\n   }\n }\n </denchmark-code>\n \n 6.0:\n <denchmark-code>metadata {\n   shortDescription: \"Object detector created by Turi Create (version 6.0rc1)\"\n   userDefined {\n     key: \"annotations\"\n     value: \"annotations\"\n   }\n   userDefined {\n     key: \"classes\"\n     value: \"bike,carsgraz\"\n   }\n   userDefined {\n     key: \"com.github.apple.os.platform\"\n     value: \"Darwin-19.0.0-x86_64-i386-64bit\"\n   }\n   userDefined {\n     key: \"com.github.apple.turicreate.version\"\n     value: \"6.0rc1\"\n   }\n   userDefined {\n     key: \"feature\"\n     value: \"image\"\n   }\n   userDefined {\n     key: \"include_non_maximum_suppression\"\n     value: \"False\"\n   }\n   userDefined {\n     key: \"max_iterations\"\n     value: \"500\"\n   }\n   userDefined {\n     key: \"model\"\n     value: \"darknet-yolo\"\n   }\n   userDefined {\n     key: \"training_iterations\"\n     value: \"500\"\n   }\n   userDefined {\n     key: \"type\"\n     value: \"object_detector\"\n   }\n }\n </denchmark-code>\n \n It makes sense that iou_threshold doesn't appear when nms is set to 'False',\n but confidence_thrshold has nothing to do with nms but it also disappears.\n Oh but somehow in 5.8 without nms confidence_threshold is also not used hmmmm.\n Will leave this issue open hmmm.\n So 3 total issues at least need to be fixed.\n \t"}, "comments": {}}, "commit": {"commit_id": "0da78126008c2eb934cc4aa0fe7414d07e3cdbfe", "commit_author": "Henry Tao", "commitT": "2019-12-05 21:35:57-08:00", "commit_complexity": {"commit_NLOC": "0.0", "commit_CCN": "0.5", "commit_Nprams": "0.5"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "src\\python\\turicreate\\test\\test_object_detector.py", "file_new_name": "src\\python\\turicreate\\test\\test_object_detector.py", "file_complexity": {"file_NLOC": "357", "file_CCN": "49", "file_NToken": "3432"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "336", "deleted_lines": null, "method_info": {"method_name": "test_export_coreml", "method_params": "self", "method_startline": "316", "method_endline": "365", "method_complexity": {"method_NLOC": "41", "method_CCN": "2", "method_NToken": "353", "method_nesting_level": "1"}}}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "src\\python\\turicreate\\toolkits\\object_detector\\object_detector.py", "file_new_name": "src\\python\\turicreate\\toolkits\\object_detector\\object_detector.py", "file_complexity": {"file_NLOC": "1026", "file_CCN": "56", "file_NToken": "7890"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "1665,1666,1667,1668,1669", "deleted_lines": "1665,1666"}}}, "file_2": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "src\\toolkits\\object_detection\\object_detector.cpp", "file_new_name": "src\\toolkits\\object_detection\\object_detector.cpp", "file_complexity": {"file_NLOC": "1011", "file_CCN": "122", "file_NToken": "7671"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "1007,1008", "deleted_lines": null, "method_info": {"method_name": "turi::object_detection::object_detector::export_to_coreml", "method_params": "filename,short_desc,additional_user_defined,opts", "method_startline": "933", "method_endline": "1025", "method_complexity": {"method_NLOC": "71", "method_CCN": "11", "method_NToken": "580", "method_nesting_level": "2"}}}}}}}}