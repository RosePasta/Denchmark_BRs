{"BR": {"BR_id": "1975", "BR_author": "znation", "BRopenT": "2019-05-29T05:29:24Z", "BRcloseT": "2019-05-29T15:39:02Z", "BR_text": {"BRsummary": "Drawing classifier evaluate().explore() throws JSON error", "BRdescription": "\n import turicreate as tc\n sf = tc.SFrame('https://static.turi.com/datasets/mnist/sframe/train6k')\n sf = sf[0:50]\n (train, test) = sf.random_split(0.8)\n model = tc.drawing_classifier.create(train, target='label')\n evaluation = model.evaluate(test)\n evaluation.explore()\n <denchmark-code>---------------------------------------------------------------------------\n TypeError                                 Traceback (most recent call last)\n <ipython-input-10-a3386219574e> in <module>()\n ----> 1 evaluation.explore()\n \n /Users/zach/turicreate/debug/src/unity/python/turicreate/toolkits/image_classifier/_evaluation.py in explore(self)\n      50 \n      51   def explore(self):\n ---> 52     params = (self._get_eval_json()+\"\\n\", self.data[\"test_data\"], self, )\n      53     # Suppress visualization output if 'none' target is set\n      54     from ...visualization._plot import _target\n \n /Users/zach/turicreate/debug/src/unity/python/turicreate/toolkits/image_classifier/_evaluation.py in _get_eval_json(self)\n      47     evaluation_dictionary[\"incorrects_size\"] = evaluation_dictionary[\"table_spec\"][\"size\"] - evaluation_dictionary[\"corrects_size\"]\n      48 \n ---> 49     return str(_json.dumps({ \"evaluation_spec\": evaluation_dictionary }, allow_nan = False))\n      50 \n      51   def explore(self):\n \n /System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/json/__init__.pyc in dumps(obj, skipkeys, ensure_ascii, check_circular, allow_nan, cls, indent, separators, encoding, default, sort_keys, **kw)\n     248         check_circular=check_circular, allow_nan=allow_nan, indent=indent,\n     249         separators=separators, encoding=encoding, default=default,\n --> 250         sort_keys=sort_keys, **kw).encode(obj)\n     251 \n     252 \n \n /System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/json/encoder.pyc in encode(self, o)\n     205         # exceptions aren't as detailed.  The list call should be roughly\n     206         # equivalent to the PySequence_Fast that ''.join() would do.\n --> 207         chunks = self.iterencode(o, _one_shot=True)\n     208         if not isinstance(chunks, (list, tuple)):\n     209             chunks = list(chunks)\n \n /System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/json/encoder.pyc in iterencode(self, o, _one_shot)\n     268                 self.key_separator, self.item_separator, self.sort_keys,\n     269                 self.skipkeys, _one_shot)\n --> 270         return _iterencode(o, 0)\n     271 \n     272 def _make_iterencode(markers, _default, _encoder, _indent, _floatstr,\n \n /System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/json/encoder.pyc in default(self, o)\n     182 \n     183         \"\"\"\n --> 184         raise TypeError(repr(o) + \" is not JSON serializable\")\n     185 \n     186     def encode(self, o):\n \n TypeError: 2.0006382 is not JSON serializable\n </denchmark-code>\n \n \t"}, "comments": {}}, "commit": {"commit_id": "47a37d7dc202c9cbce521b48087604b338701291", "commit_author": "Zach Nation", "commitT": "2019-05-29 08:39:00-07:00", "commit_complexity": {"commit_NLOC": "0.0", "commit_CCN": "0.0", "commit_Nprams": "1.0"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "src\\unity\\python\\turicreate\\toolkits\\image_classifier\\_evaluation.py", "file_new_name": "src\\unity\\python\\turicreate\\toolkits\\image_classifier\\_evaluation.py", "file_complexity": {"file_NLOC": "161", "file_CCN": "41", "file_NToken": "1506"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "48,49,50", "deleted_lines": "48", "method_info": {"method_name": "_get_eval_json", "method_params": "self", "method_startline": "29", "method_endline": "51", "method_complexity": {"method_NLOC": "18", "method_CCN": "8", "method_NToken": "187", "method_nesting_level": "1"}}}}}}}}