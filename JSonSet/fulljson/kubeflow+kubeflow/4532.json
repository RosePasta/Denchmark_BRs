{"BR": {"BR_id": "4532", "BR_author": "hougangliu", "BRopenT": "2019-11-27T07:18:31Z", "BRcloseT": "2019-12-04T23:20:33Z", "BR_text": {"BRsummary": "Profile-controller crashed", "BRdescription": "\n /kind bug\n What steps did you take and what happened:\n [A clear and concise description of what the bug is.]\n \n create a profile\n delete the labels field of corresponding namespace\n \n Then the profiles-deployment pod crashed with below log\n <denchmark-code>\n ```E1127 06:24:27.430951       1 runtime.go:69] Observed a panic: \"assignment to entry in nil map\" (assignment to entry in nil map)\n /go/pkg/mod/k8s.io/apimachinery@v0.0.0-20190404173353-6a84e37a896d/pkg/util/runtime/runtime.go:76\n /go/pkg/mod/k8s.io/apimachinery@v0.0.0-20190404173353-6a84e37a896d/pkg/util/runtime/runtime.go:65\n /go/pkg/mod/k8s.io/apimachinery@v0.0.0-20190404173353-6a84e37a896d/pkg/util/runtime/runtime.go:51\n /usr/local/go/src/runtime/panic.go:522\n /usr/local/go/src/runtime/map_faststr.go:204\n /workspace/controllers/profile_controller.go:155\n /go/pkg/mod/sigs.k8s.io/controller-runtime@v0.2.0/pkg/internal/controller/controller.go:216\n /go/pkg/mod/sigs.k8s.io/controller-runtime@v0.2.0/pkg/internal/controller/controller.go:192\n /go/pkg/mod/sigs.k8s.io/controller-runtime@v0.2.0/pkg/internal/controller/controller.go:171\n /go/pkg/mod/k8s.io/apimachinery@v0.0.0-20190404173353-6a84e37a896d/pkg/util/wait/wait.go:152\n /go/pkg/mod/k8s.io/apimachinery@v0.0.0-20190404173353-6a84e37a896d/pkg/util/wait/wait.go:153\n /go/pkg/mod/k8s.io/apimachinery@v0.0.0-20190404173353-6a84e37a896d/pkg/util/wait/wait.go:88\n /usr/local/go/src/runtime/asm_amd64.s:1337\n panic: assignment to entry in nil map [recovered]\n \tpanic: assignment to entry in nil map\n \n goroutine 281 [running]:\n k8s.io/apimachinery/pkg/util/runtime.HandleCrash(0x0, 0x0, 0x0)\n \t/go/pkg/mod/k8s.io/apimachinery@v0.0.0-20190404173353-6a84e37a896d/pkg/util/runtime/runtime.go:58 +0x105\n panic(0x139e7e0, 0x170a900)\n \t/usr/local/go/src/runtime/panic.go:522 +0x1b5\n github.com/kubeflow/kubeflow/components/profile-controller/controllers.(*ProfileReconciler).Reconcile(0xc000128f60, 0x0, 0x0, 0xc00028154c, 0x3, 0x230d040, 0x42bd21, 0x172fca0, 0xc00075dd88)\n \t/workspace/controllers/profile_controller.go:155 +0x2423\n sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler(0xc0001072c0, 0x13ed5c0, 0xc0004e8de0, 0x13ed500)\n \t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.2.0/pkg/internal/controller/controller.go:216 +0x149\n sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem(0xc0001072c0, 0xc0003bfc00)\n \t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.2.0/pkg/internal/controller/controller.go:192 +0xb5\n sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).worker(0xc0001072c0)\n \t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.2.0/pkg/internal/controller/controller.go:171 +0x2b\n k8s.io/apimachinery/pkg/util/wait.JitterUntil.func1(0xc0003f2aa0)\n \t/go/pkg/mod/k8s.io/apimachinery@v0.0.0-20190404173353-6a84e37a896d/pkg/util/wait/wait.go:152 +0x54\n k8s.io/apimachinery/pkg/util/wait.JitterUntil(0xc0003f2aa0, 0x3b9aca00, 0x0, 0xc0000cd501, 0xc000046900)\n \t/go/pkg/mod/k8s.io/apimachinery@v0.0.0-20190404173353-6a84e37a896d/pkg/util/wait/wait.go:153 +0xf8\n k8s.io/apimachinery/pkg/util/wait.Until(0xc0003f2aa0, 0x3b9aca00, 0xc000046900)\n \t/go/pkg/mod/k8s.io/apimachinery@v0.0.0-20190404173353-6a84e37a896d/pkg/util/wait/wait.go:88 +0x4d\n created by sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start\n \t/go/pkg/mod/sigs.k8s.io/controller-runtime@v0.2.0/pkg/internal/controller/controller.go:157 +0x311\n \n \n **What did you expect to happen:**\n \n \n **Anything else you would like to add:**\n [Miscellaneous information that will assist in solving the issue.]\n \n \n **Environment:**\n \n - Kubeflow version: (version number can be found at the bottom left corner of the Kubeflow dashboard):\n - kfctl version: (use `kfctl version`):\n - Kubernetes platform: (e.g. `minikube`)\n - Kubernetes version: (use `kubectl version`):\n - OS (e.g. from `/etc/os-release`):\n </denchmark-code>\n \n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "hougangliu", "commentT": "2019-11-27T07:18:33Z", "comment_text": "\n \t\tIssue-Label Bot is automatically applying the label kind/bug to this issue, with a confidence of 1.00. Please mark this comment with \ud83d\udc4d or \ud83d\udc4e to give our bot feedback!\n Links: <denchmark-link:https://github.com/marketplace/issue-label-bot>app homepage</denchmark-link>\n , <denchmark-link:https://mlbot.net/data/kubeflow/kubeflow>dashboard</denchmark-link>\n  and <denchmark-link:https://github.com/hamelsmu/MLapp>code</denchmark-link>\n  for this bot.\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "hougangliu", "commentT": "2019-11-27T08:16:40Z", "comment_text": "\n \t\t/assign\n \t\t"}}}, "commit": {"commit_id": "3dc308e33f6bc319036503051cdcc5c122798ec2", "commit_author": "Hougang Liu", "commitT": "2019-12-04 15:20:32-08:00", "commit_complexity": {"commit_NLOC": "0.0", "commit_CCN": "1.0", "commit_Nprams": "1.0"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "components\\profile-controller\\controllers\\profile_controller.go", "file_new_name": "components\\profile-controller\\controllers\\profile_controller.go", "file_complexity": {"file_NLOC": "498", "file_CCN": "2", "file_NToken": "3285"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "59,60,61,62,65,66,67,68,69,123,128,159,594,595,596,597,598,599,600,601,602,603,604,605,606,607", "deleted_lines": "59,60,61,62,63,119,120,155,156"}}}, "file_1": {"file_change_type": "ADD", "file_Nmethod": 0, "file_old_name": "None", "file_new_name": "components\\profile-controller\\controllers\\profile_controller_test.go", "file_complexity": {"file_NLOC": "55", "file_CCN": "3", "file_NToken": "253"}}}}}