{"BR": {"BR_id": "3056", "BR_author": "jlewi", "BRopenT": "2019-04-19T13:33:30Z", "BRcloseT": "2019-10-27T03:17:34Z", "BR_text": {"BRsummary": "kfctl application_types_test and v1alpha_suite_test don't pass", "BRdescription": "\n In <denchmark-link:https://github.com/kubeflow/kubeflow/issues/2874>#2874</denchmark-link>\n  we started running kfctl unittests on pre/post submit. That uncovered the fact that the following tests aren't passing\n <denchmark-link:https://github.com/kubeflow/kubeflow/blob/master/bootstrap/pkg/apis/apps/kfdef/v1alpha1/application_types_test.go>https://github.com/kubeflow/kubeflow/blob/master/bootstrap/pkg/apis/apps/kfdef/v1alpha1/application_types_test.go</denchmark-link>\n \n <denchmark-link:https://github.com/kubeflow/kubeflow/blob/master/bootstrap/v2/pkg/apis/apps/kfdef/v1alpha1/application_types_test.go>https://github.com/kubeflow/kubeflow/blob/master/bootstrap/v2/pkg/apis/apps/kfdef/v1alpha1/application_types_test.go</denchmark-link>\n \n <denchmark-link:https://github.com/kubeflow/kubeflow/blob/master/bootstrap/pkg/apis/apps/kfdef/v1alpha1/v1alpha1_suite_test.go>https://github.com/kubeflow/kubeflow/blob/master/bootstrap/pkg/apis/apps/kfdef/v1alpha1/v1alpha1_suite_test.go</denchmark-link>\n \n <denchmark-link:https://github.com/kubeflow/kubeflow/blob/master/bootstrap/v2/pkg/apis/apps/kfdef/v1alpha1/v1alpha1_suite_test.go>https://github.com/kubeflow/kubeflow/blob/master/bootstrap/v2/pkg/apis/apps/kfdef/v1alpha1/v1alpha1_suite_test.go</denchmark-link>\n \n I think these might be auto-generated as part of kubebuilder.\n I believe there are two copies of the file (\"v2\") because of an issue with ksonnet and kustomize depending on different versions of K8s client libraries. <denchmark-link:https://github.com/kkasravi>@kkasravi</denchmark-link>\n  came up with some magic to work around this.\n I think one issue is pulling in appropriate dependencies.\n I think a second issue though is that the t at least v1alpha1_suite_test might be trying to start etcd in a sub process.\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "jlewi", "commentT": "2019-04-19T13:33:32Z", "comment_text": "\n \t\tIssue-Label Bot is automatically applying the label kind/bug to this issue, with a confidence of 0.94. Please mark this comment with \ud83d\udc4d or \ud83d\udc4e to give our bot feedback!\n Links: <denchmark-link:https://github.com/marketplace/issue-label-bot>app homepage</denchmark-link>\n , <denchmark-link:https://mlbot.net/data/kubeflow/kubeflow>dashboard</denchmark-link>\n  and <denchmark-link:https://github.com/hamelsmu/MLapp>code</denchmark-link>\n  for this bot.\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "jlewi", "commentT": "2019-07-18T14:17:24Z", "comment_text": "\n \t\tThis issue has been automatically marked as stale because it has not had recent activity. It will be closed if no further activity occurs. Thank you for your contributions.\n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "jlewi", "commentT": "2019-07-22T02:01:13Z", "comment_text": "\n \t\tWe should try to fix the tests as part of 0.7\n \t\t"}, "comments_3": {"comment_id": 4, "comment_author": "jlewi", "commentT": "2019-10-20T02:20:22Z", "comment_text": "\n \t\tThis issue has been automatically marked as stale because it has not had recent activity. It will be closed if no further activity occurs. Thank you for your contributions.\n \t\t"}}}, "commit": {"commit_id": "27cc5f5da9c8829b011361ec5b1341d0a223961d", "commit_author": "Jeremy Lewi", "commitT": "2019-04-23 09:36:31-07:00", "commit_complexity": {"commit_NLOC": "1.0", "commit_CCN": "0.0", "commit_Nprams": "0.0"}, "changed_files": {"file_0": {"file_change_type": "ADD", "file_Nmethod": 0, "file_old_name": "None", "file_new_name": "bootstrap\\.gcloudignore", "file_complexity": {"file_NLOC": "None", "file_CCN": "None", "file_NToken": "None"}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "bootstrap\\Dockerfile", "file_new_name": "bootstrap\\Dockerfile", "file_complexity": {"file_NLOC": "None", "file_CCN": "None", "file_NToken": "None"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "1,2,3,4,6,9,10,11,12,23,24,25,26,27,28,29,30,31,32,33,34,35,36,41,42,51,55,58,59", "deleted_lines": "1,2,3,5,8,23,24,25"}}}, "file_2": {"file_change_type": "ADD", "file_Nmethod": 0, "file_old_name": "None", "file_new_name": "bootstrap\\Dockerfile.builder", "file_complexity": {"file_NLOC": "None", "file_CCN": "None", "file_NToken": "None"}}, "file_3": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "bootstrap\\Makefile", "file_new_name": "bootstrap\\Makefile", "file_complexity": {"file_NLOC": "None", "file_CCN": "None", "file_NToken": "None"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "32,33,34,120,121,122,123,124,125,126,127,128,129,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,208,209,210,211,212,213,214,215,216,217,218,219,220,221", "deleted_lines": "117,118"}}}, "file_4": {"file_change_type": "ADD", "file_Nmethod": 0, "file_old_name": "None", "file_new_name": "bootstrap\\cloudbuild.yaml", "file_complexity": {"file_NLOC": "None", "file_CCN": "None", "file_NToken": "None"}}, "file_5": {"file_change_type": "MODIFY", "file_Nmethod": 3, "file_old_name": "bootstrap\\cmd\\bootstrap\\app\\server_test.go", "file_new_name": "bootstrap\\cmd\\bootstrap\\app\\server_test.go", "file_complexity": {"file_NLOC": "133", "file_CCN": "13", "file_NToken": "590"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "81,82,83", "deleted_lines": "66", "method_info": {"method_name": "TestModifyGcloudCommand", "method_params": "T", "method_startline": "41", "method_endline": "86", "method_complexity": {"method_NLOC": "44", "method_CCN": "4", "method_NToken": "219", "method_nesting_level": "0"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "30,31,32,33,34,35,36,37,38,39", "deleted_lines": null, "method_info": {"method_name": "Pformat", "method_params": "", "method_startline": "30", "method_endline": "39", "method_complexity": {"method_NLOC": "10", "method_CCN": "3", "method_NToken": "64", "method_nesting_level": "0"}}}, "hunk_2": {"Ismethod": 1, "added_lines": "129,130,131,132,143,144,145,146,151,157,158", "deleted_lines": "124,125,130,136", "method_info": {"method_name": "TestHasDefaultStorageClass", "method_params": "T", "method_startline": "118", "method_endline": "161", "method_complexity": {"method_NLOC": "43", "method_CCN": "3", "method_NToken": "179", "method_nesting_level": "0"}}}}}, "file_6": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "bootstrap\\developer_guide.md", "file_new_name": "bootstrap\\developer_guide.md", "file_complexity": {"file_NLOC": "None", "file_CCN": "None", "file_NToken": "None"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "27,28,29,30,31,32,33,34,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229", "deleted_lines": "27"}}}, "file_7": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "bootstrap\\go.mod", "file_new_name": "bootstrap\\go.mod", "file_complexity": {"file_NLOC": "None", "file_CCN": "None", "file_NToken": "None"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "52,105", "deleted_lines": null}}}, "file_8": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "bootstrap\\pkg\\apis\\apps\\kfdef\\v1alpha1\\application_types_test.go", "file_new_name": "bootstrap\\pkg\\apis\\apps\\kfdef\\v1alpha1\\application_types_test.go", "file_complexity": {"file_NLOC": "1", "file_CCN": "0", "file_NToken": "2"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56", "deleted_lines": "26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56", "method_info": {"method_name": "TestStorageApplication", "method_params": "T", "method_startline": "26", "method_endline": "56", "method_complexity": {"method_NLOC": "23", "method_CCN": "1", "method_NToken": "276", "method_nesting_level": "0"}}}}}, "file_9": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "bootstrap\\pkg\\apis\\apps\\kfdef\\v1alpha1\\v1alpha1_suite_test.go", "file_new_name": "bootstrap\\pkg\\apis\\apps\\kfdef\\v1alpha1\\v1alpha1_suite_test.go", "file_complexity": {"file_NLOC": "1", "file_CCN": "0", "file_NToken": "2"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53", "deleted_lines": "32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53", "method_info": {"method_name": "TestMain", "method_params": "M", "method_startline": "32", "method_endline": "53", "method_complexity": {"method_NLOC": "18", "method_CCN": "4", "method_NToken": "139", "method_nesting_level": "0"}}}}}, "file_10": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "bootstrap\\v2\\pkg\\apis\\apps\\kfdef\\v1alpha1\\application_types_test.go", "file_new_name": "bootstrap\\v2\\pkg\\apis\\apps\\kfdef\\v1alpha1\\application_types_test.go", "file_complexity": {"file_NLOC": "1", "file_CCN": "0", "file_NToken": "2"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56", "deleted_lines": "26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56", "method_info": {"method_name": "TestStorageApplication", "method_params": "T", "method_startline": "26", "method_endline": "56", "method_complexity": {"method_NLOC": "23", "method_CCN": "1", "method_NToken": "276", "method_nesting_level": "0"}}}}}, "file_11": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "bootstrap\\v2\\pkg\\apis\\apps\\kfdef\\v1alpha1\\v1alpha1_suite_test.go", "file_new_name": "bootstrap\\v2\\pkg\\apis\\apps\\kfdef\\v1alpha1\\v1alpha1_suite_test.go", "file_complexity": {"file_NLOC": "1", "file_CCN": "0", "file_NToken": "2"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53", "deleted_lines": "32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53", "method_info": {"method_name": "TestMain", "method_params": "M", "method_startline": "32", "method_endline": "53", "method_complexity": {"method_NLOC": "18", "method_CCN": "4", "method_NToken": "139", "method_nesting_level": "0"}}}}}, "file_12": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "testing\\workflows\\components\\unit_tests.jsonnet", "file_new_name": "testing\\workflows\\components\\unit_tests.jsonnet", "file_complexity": {"file_NLOC": "None", "file_CCN": "None", "file_NToken": "None"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "50,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139", "deleted_lines": "50"}}}, "file_13": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "testing\\workflows\\environments\\kubeflow-testing\\params.libsonnet", "file_new_name": "testing\\workflows\\environments\\kubeflow-testing\\params.libsonnet", "file_complexity": {"file_NLOC": "None", "file_CCN": "None", "file_NToken": "None"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "19,20", "deleted_lines": "19,20"}}}}}}