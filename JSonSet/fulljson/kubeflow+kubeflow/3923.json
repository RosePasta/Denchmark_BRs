{"BR": {"BR_id": "3923", "BR_author": "lluunn", "BRopenT": "2019-08-16T15:59:25Z", "BRcloseT": "2019-10-10T18:25:20Z", "BR_text": {"BRsummary": "kfctl cannot infer project when not set", "BRdescription": "\n /kind bug\n What steps did you take and what happened:\n I am using the latest config from master (removing the dummy value of project/email)\n <denchmark-code>kfctl init --config=kfctl_gcp_iap.yaml\n kfctl generate all\n </denchmark-code>\n \n The project field is missing, and hostname treat it as empty string\n kf0815-2.endpoints..cloud.goog\n It can infer the email though.\n gcloud config has both email and project set:\n <denchmark-code>$ gcloud config list\n [compute]\n region = us-central1\n zone = us-central1-a\n [core]\n account = lunkai@google.com\n disable_usage_reporting = True\n project = kai-test2\n \n Your active configuration is: [default]\n </denchmark-code>\n \n cc <denchmark-link:https://github.com/jlewi>@jlewi</denchmark-link>\n \n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "lluunn", "commentT": "2019-08-16T15:59:27Z", "comment_text": "\n \t\tIssue-Label Bot is automatically applying the label kind/bug to this issue, with a confidence of 0.99. Please mark this comment with \ud83d\udc4d or \ud83d\udc4e to give our bot feedback!\n Links: <denchmark-link:https://github.com/marketplace/issue-label-bot>app homepage</denchmark-link>\n , <denchmark-link:https://mlbot.net/data/kubeflow/kubeflow>dashboard</denchmark-link>\n  and <denchmark-link:https://github.com/hamelsmu/MLapp>code</denchmark-link>\n  for this bot.\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "lluunn", "commentT": "2019-10-08T20:30:11Z", "comment_text": "\n \t\tIt looks like we have logic to get the Default email\n \n \n \n kubeflow/bootstrap/pkg/kfapp/gcp/gcp.go\n \n \n          Line 229\n       in\n       d82aa59\n \n \n \n \n \n \n  func GetGcloudDefaultAccount() (string, error) { \n \n \n \n \n \n We are missing similar logic for project and zone.\n Bump to P0 because we should try to fix this in 0.7.X.\n This should be a relatively straightforward fix.\n Without it users can't deploy in one command e.g.\n <denchmark-code>kfctl apply -f https:/.../kfctl_gcp_iap.yaml\n </denchmark-code>\n \n Because they have to modify the config to set the values.\n \t\t"}}}, "commit": {"commit_id": "1486acd723de1bbeaf6d690a27c3260167788e71", "commit_author": "Zhenghui Wang", "commitT": "2019-10-10 11:25:19-07:00", "commit_complexity": {"commit_NLOC": "0.7", "commit_CCN": "0.7", "commit_Nprams": "1.0"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 3, "file_old_name": "bootstrap\\pkg\\kfapp\\gcp\\gcp.go", "file_new_name": "bootstrap\\pkg\\kfapp\\gcp\\gcp.go", "file_complexity": {"file_NLOC": "1900", "file_CCN": "42", "file_NToken": "13153"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "232,233,234,235,236,237,238,239,240,241", "deleted_lines": null, "method_info": {"method_name": "GetGcloudDefaultProject", "method_params": "", "method_startline": "232", "method_endline": "241", "method_complexity": {"method_NLOC": "10", "method_CCN": "2", "method_NToken": "78", "method_nesting_level": "0"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "142,143", "deleted_lines": "140", "method_info": {"method_name": "GetPlatform", "method_params": "KfDef", "method_startline": "138", "method_endline": "148", "method_complexity": {"method_NLOC": "10", "method_CCN": "1", "method_NToken": "48", "method_nesting_level": "0"}}}, "hunk_2": {"Ismethod": 1, "added_lines": "244,245,246,247,248,249,250,251,252,253", "deleted_lines": null, "method_info": {"method_name": "GetGcloudDefaultZone", "method_params": "", "method_startline": "244", "method_endline": "253", "method_complexity": {"method_NLOC": "10", "method_CCN": "2", "method_NToken": "78", "method_nesting_level": "0"}}}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "bootstrap\\pkg\\kfapp\\gcp\\gcp_test.go", "file_new_name": "bootstrap\\pkg\\kfapp\\gcp\\gcp_test.go", "file_complexity": {"file_NLOC": "504", "file_CCN": "33", "file_NToken": "2427"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "117,118,119,120,121,215,216,217,218,219,220,221,222,223,443,444,466,467,468,469,470,472,473,474,475", "deleted_lines": "209,450,451,452,453", "method_info": {"method_name": "Expected", "method_params": "", "method_startline": "117", "method_endline": "477", "method_complexity": {"method_NLOC": "335", "method_CCN": "15", "method_NToken": "1537", "method_nesting_level": "0"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "215,216,217", "deleted_lines": null, "method_info": {"method_name": "", "method_params": "", "method_startline": "215", "method_endline": "217", "method_complexity": {"method_NLOC": "3", "method_CCN": "1", "method_NToken": "14", "method_nesting_level": "0"}}}}}}}}