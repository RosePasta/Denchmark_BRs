{"BR": {"BR_id": "4355", "BR_author": "Jeffwan", "BRopenT": "2019-10-20T08:44:56Z", "BRcloseT": "2019-10-21T22:13:22Z", "BR_text": {"BRsummary": "Missing plugin:  aws set aws plugin defaults error", "BRdescription": "\n /kind bug\n What steps did you take and what happened:\n <denchmark-code>kfctl apply -V -f ${CONFIG}\n INFO[0000] Downloading /tmp/kfctl_aws.yaml to /var/folders/7z/9cx2bbsd3q3352bd8b01j_nmzx5lm9/T/564625102/app.yaml  filename=\"configconverters/converters.go:54\"\n INFO[0000] converting to kfconfig, appdir=/Users/shjiaxin/Downloads/kf07/kf07  filename=\"configconverters/v1alpha1.go:56\"\n INFO[0000] Running `eksctl version` ...                  filename=\"utils/awsutil.go:54\"\n INFO[0000] output: [\u2139]  version.Info{BuiltAt:\"\", GitCommit:\"\", GitTag:\"0.5.3\"}  filename=\"utils/awsutil.go:62\"\n INFO[0000]\n ****************************************************************\n Notice anonymous usage reporting enabled using spartakus\n To disable it\n If you have already deployed it run the following commands:\n   cd $(pwd)\n   kubectl -n ${K8S_NAMESPACE} delete deploy -l app=spartakus\n \n \n For more info: https://www.kubeflow.org/docs/other-guides/usage-reporting/\n ****************************************************************\n   filename=\"coordinator/coordinator.go:120\"\n INFO[0000] Creating directory /tmp/.cache                filename=\"kfconfig/types.go:435\"\n INFO[0000] Fetching https://github.com/kubeflow/manifests/archive/v0.7-branch/head.tar.gz to /tmp/.cache/manifests  filename=\"kfconfig/types.go:483\"\n INFO[0003] Fetch succeeded; LocalPath /tmp/.cache/manifests/manifests-0.7-branch  filename=\"kfconfig/types.go:510\"\n INFO[0004] Caller ARN Info: {\n   Account: \"348134392524\",\n   Arn: \"arn:aws:iam::xx:user/eks-dev\",\n   UserId: \"xxxxx\"\n }  filename=\"utils/awsutil.go:38\"\n Error: failed to build kfApp from URI /tmp/kfctl_aws.yaml: couldn't generate KfApp:  (kubeflow.error): Code 500 with message: coordinator Generate failed for aws:  (kubeflow.error): Code 404 with message: aws set aws plugin defaults Error Missing plugin aws\n Usage:\n   kfctl apply [all(=default)|k8s|platform] [flags]\n \n \n Flags:\n   -f, --file string   Static config file to use. Can be either a local path or a URL.\n                       For example:\n                       --file=https://raw.githubusercontent.com/kubeflow/kubeflow/master/bootstrap/config/kfctl_platform_existing.yaml\n                       --file=kfctl_platform_gcp.yaml\n   -h, --help          help for apply\n   -V, --verbose       verbose output default is false\n \n \n failed to build kfApp from URI /tmp/kfctl_aws.yaml: couldn't generate KfApp:  (kubeflow.error): Code 500 with message: coordinator Generate failed for aws:  (kubeflow.error): Code 404 with message: aws set aws plugin defaults Error Missing plugin aws\n </denchmark-code>\n \n Check the code\n \n \n \n kubeflow/bootstrap/pkg/apis/apps/kfconfig/types.go\n \n \n         Lines 217 to 219\n       in\n       ad0893e\n \n \n \n \n \n \n  if p.Kind != pluginKind { \n \n \n \n  continue \n \n \n \n  } \n \n \n \n \n \n In aws.go, we still pass aws\n \n \n \n kubeflow/bootstrap/pkg/kfapp/aws/aws.go\n \n \n          Line 100\n       in\n       ad0893e\n \n \n \n \n \n \n  err := aws.kfDef.GetPluginSpec(AwsPluginName, awsPluginSpec) \n \n \n \n \n \n Use value here instead,\n \n \n \n kubeflow/bootstrap/pkg/apis/apps/kfconfig/types.go\n \n \n          Line 178\n       in\n       ad0893e\n \n \n \n \n \n \n  AWS_PLUGIN_KIND PluginKindType = \"KfAwsPlugin\" \n \n \n \n \n \n What did you expect to happen:\n apply command go through\n Anything else you would like to add:\n [Miscellaneous information that will assist in solving the issue.]\n Environment:\n \n Kubeflow version: (version number can be found at the bottom left corner of the Kubeflow dashboard):\n kfctl version: (use kfctl version): master\n Kubernetes platform: (e.g. minikube) aws\n Kubernetes version: (use kubectl version): 1.14.7\n \n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "Jeffwan", "commentT": "2019-10-20T08:45:13Z", "comment_text": "\n \t\tIssue Label Bot is not confident enough to auto-label this issue.\n See <denchmark-link:https://mlbot.net/data/kubeflow/kubeflow>dashboard</denchmark-link>\n  for more details.\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "Jeffwan", "commentT": "2019-10-25T00:09:17Z", "comment_text": "\n \t\t/assign <denchmark-link:https://github.com/Jeffwan>@Jeffwan</denchmark-link>\n \n \t\t"}}}, "commit": {"commit_id": "33ed40e2edd447862115d888c3f15e3fc79d15ec", "commit_author": "Jiaxin Shan", "commitT": "2019-10-21 15:13:21-07:00", "commit_complexity": {"commit_NLOC": "None", "commit_CCN": "None", "commit_Nprams": "None"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "bootstrap\\pkg\\kfapp\\aws\\aws.go", "file_new_name": "bootstrap\\pkg\\kfapp\\aws\\aws.go", "file_complexity": {"file_NLOC": "684", "file_CCN": "123", "file_NToken": "4683"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "64", "deleted_lines": "64"}}}}}}