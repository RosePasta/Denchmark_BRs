{"BR": {"BR_id": "3046", "BR_author": "hougangliu", "BRopenT": "2019-04-18T03:28:12Z", "BRcloseT": "2019-04-24T02:08:01Z", "BR_text": {"BRsummary": "host of istio route rule uses hardcode cluster-domain", "BRdescription": "\n I notice that host of istio route rule for multiple services of kubeflow component is like $servicename + $namespace + \".svc.cluster.local\" in multiple PR, such as <denchmark-link:https://github.com/kubeflow/kubeflow/pull/3013>#3013</denchmark-link>\n  <denchmark-link:https://github.com/kubeflow/kubeflow/pull/3028>#3028</denchmark-link>\n  <denchmark-link:https://github.com/kubeflow/kubeflow/pull/3033>#3033</denchmark-link>\n  <denchmark-link:https://github.com/kubeflow/kubeflow/pull/3036>#3036</denchmark-link>\n \n However .cluster.local can be set as a different value for k8s cluster with cluster-domain option.\n I think $servicename + $namespace + \".svc\" is enough.\n <denchmark-link:https://github.com/gabrielwen>@gabrielwen</denchmark-link>\n  WDYT?\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "hougangliu", "commentT": "2019-04-18T03:28:15Z", "comment_text": "\n \t\tIssue-Label Bot is automatically applying the label kind/bug to this issue, with a confidence of 0.63. Please mark this comment with \ud83d\udc4d or \ud83d\udc4e to give our bot feedback!\n Links: <denchmark-link:https://github.com/marketplace/issue-label-bot>app homepage</denchmark-link>\n , <denchmark-link:https://mlbot.net/data/kubeflow/kubeflow>dashboard</denchmark-link>\n  and <denchmark-link:https://github.com/hamelsmu/MLapp>code</denchmark-link>\n  for this bot.\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "hougangliu", "commentT": "2019-04-18T03:28:52Z", "comment_text": "\n \t\t/assign <denchmark-link:https://github.com/gabrielwen>@gabrielwen</denchmark-link>\n \n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "hougangliu", "commentT": "2019-04-18T17:37:56Z", "comment_text": "\n \t\tfrom <denchmark-link:https://github.com/istio/api/blob/6b8d1849e7f44ef523b4442af69b57ddc960d38b/networking/v1alpha3/virtual_service.proto#L330>here</denchmark-link>\n  it seems it's either short name (e.g. service name) or fully qualified name.  Kunming and I tried to use  +  but ISTIO couldn't resolve it correctly.  Therefore I doubt  +  +  would work.  I could try to see if it works if you think we should, tho.\n \t\t"}, "comments_3": {"comment_id": 4, "comment_author": "hougangliu", "commentT": "2019-04-19T00:02:53Z", "comment_text": "\n \t\t\n from here it seems it's either short name (e.g. service name) or fully qualified name. Kunming and I tried to use service name + namespace but ISTIO couldn't resolve it correctly. Therefore I doubt service name + namespace + .svc would work. I could try to see if it works if you think we should, tho.\n \n From the link, it seems we should use full path name. But as mentioned above,  hardcode .cluster.local is a potential issue. How about add a param named clusterDomain, if clusterDomain set, use it. Otherwise use \"cluster.local\" by default\n \t\t"}, "comments_4": {"comment_id": 5, "comment_author": "hougangliu", "commentT": "2019-04-19T05:18:44Z", "comment_text": "\n \t\t\n \n from here it seems it's either short name (e.g. service name) or fully qualified name. Kunming and I tried to use service name + namespace but ISTIO couldn't resolve it correctly. Therefore I doubt service name + namespace + .svc would work. I could try to see if it works if you think we should, tho.\n \n From the link, it seems we should use full path name. But as mentioned above, hardcode .cluster.local is a potential issue. How about add a param named clusterDomain, if clusterDomain set, use it. Otherwise use \"cluster.local\" by default\n \n Yea, agree.  I'm thinking about the same thing :)\n \t\t"}, "comments_5": {"comment_id": 6, "comment_author": "hougangliu", "commentT": "2019-04-19T18:15:44Z", "comment_text": "\n \t\tPending PRs are updated.\n \t\t"}}}, "commit": {"commit_id": "f2bb6229a0eb8a88b2802fb373ae01fdd6647c76", "commit_author": "Hung-Ting Wen", "commitT": "2019-04-23 19:08:00-07:00", "commit_complexity": {"commit_NLOC": "None", "commit_CCN": "None", "commit_Nprams": "None"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "kubeflow\\katib\\prototypes\\all.jsonnet", "file_new_name": "kubeflow\\katib\\prototypes\\all.jsonnet", "file_complexity": {"file_NLOC": "None", "file_CCN": "None", "file_NToken": "None"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "17", "deleted_lines": null}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "kubeflow\\katib\\vizier.libsonnet", "file_new_name": "kubeflow\\katib\\vizier.libsonnet", "file_complexity": {"file_NLOC": "None", "file_CCN": "None", "file_NToken": "None"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "22,27,56,57,58,59,60,61,71", "deleted_lines": "22,27,56,66"}}}}}}