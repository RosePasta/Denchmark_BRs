{"BR": {"BR_id": "34", "BR_author": "jirenz", "BRopenT": "2018-04-21T23:59:08Z", "BRcloseT": "2018-10-12T19:18:47Z", "BR_text": {"BRsummary": "Returned observations will be mutated when the environment steps.", "BRdescription": "\n from dm_control import suite\n import numpy as np\n \n env = suite.load(domain_name=\"cartpole\", task_name=\"swingup\")\n action_spec = env.action_spec()\n action = np.random.uniform(action_spec.minimum,\n                              action_spec.maximum,\n                              size=action_spec.shape)\n time_step = env.step(action)\n obs = time_step.observation['velocity']\n print('obs', obs)\n for i in range(10):\n     time_step = env.step(action)\n print('obs', obs)\n print('obs_new', time_step.observation['velocity'])\n Gives\n obs [-0.00617124  0.00592542]\n obs [0.65594909 0.9535503 ]\n obs_new [0.65594909 0.9535503 ]\n So if I obtain observation from the environment, the array will be mutated when the environment steps. I believe that this behavior can cause a lot of trouble for people.\n It would be great if something like copy(qvel) can be added instead.\n \t"}, "comments": {}}, "commit": {"commit_id": "0277e4352c57287c9f8497cb600a2bbe6d82ac45", "commit_author": "alimuldal", "commitT": "2018-10-12 20:17:16+01:00", "commit_complexity": {"commit_NLOC": "1.0", "commit_CCN": "1.0", "commit_Nprams": "0.0"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 4, "file_old_name": "dm_control\\mujoco\\engine.py", "file_new_name": "dm_control\\mujoco\\engine.py", "file_complexity": {"file_NLOC": "422", "file_CCN": "77", "file_NToken": "2736"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "464,465", "deleted_lines": "464,465", "method_info": {"method_name": "position", "method_params": "self", "method_startline": "463", "method_endline": "465", "method_complexity": {"method_NLOC": "2", "method_CCN": "1", "method_NToken": "19", "method_nesting_level": "1"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "445,446", "deleted_lines": "445,446", "method_info": {"method_name": "control", "method_params": "self", "method_startline": "444", "method_endline": "446", "method_complexity": {"method_NLOC": "2", "method_CCN": "1", "method_NToken": "19", "method_nesting_level": "1"}}}, "hunk_2": {"Ismethod": 1, "added_lines": "468,469", "deleted_lines": "468,469", "method_info": {"method_name": "velocity", "method_params": "self", "method_startline": "467", "method_endline": "469", "method_complexity": {"method_NLOC": "2", "method_CCN": "1", "method_NToken": "19", "method_nesting_level": "1"}}}, "hunk_3": {"Ismethod": 1, "added_lines": "449,457", "deleted_lines": "449,457", "method_info": {"method_name": "activation", "method_params": "self", "method_startline": "448", "method_endline": "457", "method_complexity": {"method_NLOC": "2", "method_CCN": "1", "method_NToken": "19", "method_nesting_level": "1"}}}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "dm_control\\suite\\cheetah.py", "file_new_name": "dm_control\\suite\\cheetah.py", "file_complexity": {"file_NLOC": "47", "file_CCN": "9", "file_NToken": "326"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "94", "deleted_lines": "94", "method_info": {"method_name": "get_observation", "method_params": "self,physics", "method_startline": "90", "method_endline": "96", "method_complexity": {"method_NLOC": "5", "method_CCN": "1", "method_NToken": "45", "method_nesting_level": "1"}}}}}, "file_2": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "dm_control\\suite\\hopper.py", "file_new_name": "dm_control\\suite\\hopper.py", "file_complexity": {"file_NLOC": "74", "file_CCN": "13", "file_NToken": "576"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "120", "deleted_lines": "120", "method_info": {"method_name": "get_observation", "method_params": "self,physics", "method_startline": "116", "method_endline": "123", "method_complexity": {"method_NLOC": "6", "method_CCN": "1", "method_NToken": "55", "method_nesting_level": "1"}}}}}, "file_3": {"file_change_type": "MODIFY", "file_Nmethod": 3, "file_old_name": "dm_control\\suite\\humanoid.py", "file_new_name": "dm_control\\suite\\humanoid.py", "file_complexity": {"file_NLOC": "126", "file_CCN": "24", "file_NToken": "1072"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "117", "deleted_lines": "117", "method_info": {"method_name": "center_of_mass_velocity", "method_params": "self", "method_startline": "115", "method_endline": "117", "method_complexity": {"method_NLOC": "2", "method_CCN": "1", "method_NToken": "21", "method_nesting_level": "1"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "125", "deleted_lines": "125", "method_info": {"method_name": "joint_angles", "method_params": "self", "method_startline": "123", "method_endline": "125", "method_complexity": {"method_NLOC": "2", "method_CCN": "1", "method_NToken": "20", "method_nesting_level": "1"}}}, "hunk_2": {"Ismethod": 1, "added_lines": "113", "deleted_lines": "113", "method_info": {"method_name": "center_of_mass_position", "method_params": "self", "method_startline": "111", "method_endline": "113", "method_complexity": {"method_NLOC": "2", "method_CCN": "1", "method_NToken": "21", "method_nesting_level": "1"}}}}}, "file_4": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "dm_control\\suite\\humanoid_CMU.py", "file_new_name": "dm_control\\suite\\humanoid_CMU.py", "file_complexity": {"file_NLOC": "105", "file_CCN": "20", "file_NToken": "872"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "93", "deleted_lines": "93", "method_info": {"method_name": "center_of_mass_velocity", "method_params": "self", "method_startline": "91", "method_endline": "93", "method_complexity": {"method_NLOC": "2", "method_CCN": "1", "method_NToken": "21", "method_nesting_level": "1"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "101", "deleted_lines": "101", "method_info": {"method_name": "joint_angles", "method_params": "self", "method_startline": "99", "method_endline": "101", "method_complexity": {"method_NLOC": "2", "method_CCN": "1", "method_NToken": "20", "method_nesting_level": "1"}}}}}, "file_5": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "dm_control\\suite\\pendulum.py", "file_new_name": "dm_control\\suite\\pendulum.py", "file_complexity": {"file_NLOC": "47", "file_CCN": "9", "file_NToken": "367"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "67", "deleted_lines": "67", "method_info": {"method_name": "angular_velocity", "method_params": "self", "method_startline": "65", "method_endline": "67", "method_complexity": {"method_NLOC": "2", "method_CCN": "1", "method_NToken": "21", "method_nesting_level": "1"}}}}}, "file_6": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "dm_control\\suite\\swimmer.py", "file_new_name": "dm_control\\suite\\swimmer.py", "file_complexity": {"file_NLOC": "126", "file_CCN": "21", "file_NToken": "1112"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "166", "deleted_lines": "166", "method_info": {"method_name": "joints", "method_params": "self", "method_startline": "164", "method_endline": "166", "method_complexity": {"method_NLOC": "2", "method_CCN": "1", "method_NToken": "20", "method_nesting_level": "1"}}}}}, "file_7": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "dm_control\\suite\\tests\\domains_test.py", "file_new_name": "dm_control\\suite\\tests\\domains_test.py", "file_complexity": {"file_NLOC": "164", "file_CCN": "34", "file_NToken": "1272"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "208,209,210,211,212,213,214,215,216,217", "deleted_lines": null, "method_info": {"method_name": "test_observation_arrays_dont_share_memory", "method_params": "self,domain,task", "method_startline": "208", "method_endline": "217", "method_complexity": {"method_NLOC": "10", "method_CCN": "2", "method_NToken": "92", "method_nesting_level": "1"}}}}}}}}