{"BR": {"BR_id": "1076", "BR_author": "Crysple", "BRopenT": "2019-05-14T09:05:24Z", "BRcloseT": "2019-06-28T08:46:18Z", "BR_text": {"BRsummary": "Failed to connect to PAI http code:500", "BRdescription": "\n Short summary about the issue/question:\n Brief what process you are following:\n How to reproduce it:\n nni Environment:\n \n nni version:\n nni mode(local|pai|remote):\n OS:\n python version:\n is conda or virtualenv used?:\n is running in docker?:\n \n need to update document(yes/no):\n Anything else we need to know:\n Error info:\n <denchmark-code>[5/12/2019, 1:10:07 AM] ERROR [ 'PAI Training service: get job info for trial Y7TZR from PAI Cluste\n r failed!' ] \n [5/12/2019, 1:10:08 AM] ERROR [ 'Submit trial XPxTn failed, http code:500, http body: [object Objec\n t]' ]\n [5/12/2019, 1:10:08 AM] ERROR [ 'Error: Submit trial XPxTn failed, http code:500, http body: [objec\n t Object]\\n \u00a0\u00a0\u00a0at Request.request [as _callback] (/data/home/v-zejlin/.conda/envs/pynni/nni/training_service/pai/paiTrainingService.js:322:33)\\n \u00a0\u00a0\u00a0at Request.self.callback (/data/home/v-zejlin/.conda/envs/pynni/nni/node_modules/request/request.js:185:22)\\n \u00a0\u00a0\u00a0at Request.emit (events.js:182:13)\\n \u00a0\u00a0\u00a0at Request.<anonymous> (/data/home/v-zejlin/.conda/envs/pynni/nni/node_modules/request/request.js:1161:10)\\n \u00a0\u00a0\u00a0at Request.emit (events.js:182:13)\\n \u00a0\u00a0\u00a0at IncomingMessage.<anonymous> (/data/home/v-zejlin/.conda/envs/pynni/nni/node_modules/request/request.js:1083:12)\\n \u00a0\u00a0\u00a0at Object.onceWrapper (events.js:273:13)\\n \u00a0\u00a0\u00a0at IncomingMessage.emit (events.js:187:15)\\n \u00a0\u00a0\u00a0at endReadableNT (_stream_readable.js:1094:12)\\n \u00a0\u00a0\u00a0at process._tickCallback (internal/process/next_tick.js:63:19)' ]\n [5/12/2019, 1:10:08 AM] INFO [ 'Change NNIManager status from: TUNER_NO_MORE_TRIAL to: ERROR' ]\n </denchmark-code>\n \n Two experiments resulted in the same bug. Note that after I decreased the interval time of updating PAI token (from originally 2 hours to half an hour),  it was fixed.\n Root cause analyze:\n There are 2 types of 500 errors (so far we know), trial failure or experiment failure. For trial failure, in this issue, we will catch the trial failure and add an NNI Error log, fail the trial but won't failure the entire experiment. For experiment failure, fail the experiment and add NNI error log.\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "Crysple", "commentT": "2019-05-15T02:16:24Z", "comment_text": "\n \t\tSorry, it is useless to decrease the interval time now. It failed again\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "Crysple", "commentT": "2019-06-03T02:56:36Z", "comment_text": "\n \t\tIt can be reproduce by running over 100 trails (sometimes). We need to expose more log from PAI to indicate what's the rootcause first.\n \t\t"}}}, "commit": {"commit_id": "14c1b31c784e14a498e78631bb7f40f0ca3a9151", "commit_author": "demianzhang", "commitT": "2019-06-19 11:08:34+08:00", "commit_complexity": {"commit_NLOC": "None", "commit_CCN": "None", "commit_Nprams": "None"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "src\\nni_manager\\training_service\\pai\\paiTrainingService.ts", "file_new_name": "src\\nni_manager\\training_service\\pai\\paiTrainingService.ts", "file_complexity": {"file_NLOC": "477", "file_CCN": "17", "file_NToken": "3640"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "516", "deleted_lines": "513", "method_info": {"method_name": "(anonymous)", "method_params": "", "method_startline": "510", "method_endline": "521", "method_complexity": {"method_NLOC": "12", "method_CCN": "4", "method_NToken": "97", "method_nesting_level": "0"}}}}}}}}