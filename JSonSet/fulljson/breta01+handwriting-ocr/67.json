{"BR": {"BR_id": "67", "BR_author": "ayush7506", "BRopenT": "2018-12-28T12:49:19Z", "BRcloseT": "2019-04-05T09:37:47Z", "BR_text": {"BRsummary": "Error while training the model", "BRdescription": "\n While training the model on IAM Dataset using word_classifier_CTC, I got this error:\n Traceback (most recent call last):\n File \"word_classifier_CTC.py\", line 532, in \n train_step.run(fd)\n File \"/data/anaconda3/envs/ocr/lib/python3.6/site-packages/tensorflow/python/f                                                                                                                     ramework/ops.py\", line 2241, in run\n _run_using_default_session(self, feed_dict, self.graph, session)\n File \"/data/anaconda3/envs/ocr/lib/python3.6/site-packages/tensorflow/python/f                                                                                                                     ramework/ops.py\", line 4986, in _run_using_default_session\n session.run(operation, feed_dict)\n File \"/data/anaconda3/envs/ocr/lib/python3.6/site-packages/tensorflow/python/c                                                                                                                     lient/session.py\", line 877, in run\n run_metadata_ptr)\n File \"/data/anaconda3/envs/ocr/lib/python3.6/site-packages/tensorflow/python/c                                                                                                                     lient/session.py\", line 1100, in _run\n feed_dict_tensor, options, run_metadata)\n File \"/data/anaconda3/envs/ocr/lib/python3.6/site-packages/tensorflow/python/c                                                                                                                     lient/session.py\", line 1272, in _do_run\n run_metadata)\n File \"/data/anaconda3/envs/ocr/lib/python3.6/site-packages/tensorflow/python/c                                                                                                                     lient/session.py\", line 1291, in _do_call\n raise type(e)(node_def, op, message)\n tensorflow.python.framework.errors_impl.InvalidArgumentError: Saw a non-null lab                                                                                                                     el (index >= num_classes - 1) following a null label, batch: 2 num_classes: 54 l                                                                                                                     abels: 37,35,46,31\n [[Node: CTCLoss = CTCLoss[ctc_merge_repeated=true, ignore_longer_output                                                                                                                     s_than_inputs=false, preprocess_collapse_repeated=false, _device=\"/job:localhost                                                                                                                     /replica:0/task:0/device:CPU:0\"](Reshape_1, _arg_targets/indices_0_3, _arg_targe                                                                                                                     ts/values_0_5, _arg_inputs_length_0_1)]]\n Caused by op 'CTCLoss', defined at:\n File \"word_classifier_CTC.py\", line 464, in \n ctc_loss = tf.nn.ctc_loss(targets, logits, inputs_length)\n File \"/data/anaconda3/envs/ocr/lib/python3.6/site-packages/tensorflow/python/o                                                                                                                     ps/ctc_ops.py\", line 158, in ctc_loss\n ignore_longer_outputs_than_inputs=ignore_longer_outputs_than_inputs)\n File \"/data/anaconda3/envs/ocr/lib/python3.6/site-packages/tensorflow/python/o                                                                                                                     ps/gen_ctc_ops.py\", line 285, in ctc_loss\n name=name)\n File \"/data/anaconda3/envs/ocr/lib/python3.6/site-packages/tensorflow/python/f                                                                                                                     ramework/op_def_library.py\", line 787, in _apply_op_helper\n op_def=op_def)\n File \"/data/anaconda3/envs/ocr/lib/python3.6/site-packages/tensorflow/python/u                                                                                                                     til/deprecation.py\", line 454, in new_func\n return func(*args, **kwargs)\n File \"/data/anaconda3/envs/ocr/lib/python3.6/site-packages/tensorflow/python/f                                                                                                                     ramework/ops.py\", line 3155, in create_op\n op_def=op_def)\n File \"/data/anaconda3/envs/ocr/lib/python3.6/site-packages/tensorflow/python/f                                                                                                                     ramework/ops.py\", line 1717, in init\n self._traceback = tf_stack.extract_stack()\n InvalidArgumentError (see above for traceback): Saw a non-null label (index >= n                                                                                                                     um_classes - 1) following a null label, batch: 2 num_classes: 54 labels: 37,35,4                                                                                                                     6,31\n [[Node: CTCLoss = CTCLoss[ctc_merge_repeated=true, ignore_longer_output                                                                                                                     s_than_inputs=false, preprocess_collapse_repeated=false, _device=\"/job:localhost                                                                                                                     /replica:0/task:0/device:CPU:0\"](Reshape_1, _arg_targets/indices_0_3, _arg_targe                                                                                                                     ts/values_0_5, _arg_inputs_length_0_1)]]\n How do I resolve this?\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "ayush7506", "commentT": "2018-12-29T23:16:49Z", "comment_text": "\n \t\tHi,\n I didn't test the training since rework, so there might be some issues. This problem is probably caused due to the wrong value in char_size (number of labels). IAM dataset includes some characters which I previously ignored. Try setting it to char_size = 67.\n Please let me know if it works.\n I will try to look into the problem by myself as soon as possible.\n \t\t"}}}, "commit": {"commit_id": "ff417b089f7f5a504621826db6519ab6e4c85187", "commit_author": "B\u0159etislav H\u00e1jek", "commitT": "2019-04-05 11:37:46+02:00", "commit_complexity": {"commit_NLOC": "None", "commit_CCN": "None", "commit_Nprams": "None"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "word_classifier_CTC.ipynb", "file_new_name": "word_classifier_CTC.ipynb", "file_complexity": {"file_NLOC": "None", "file_CCN": "None", "file_NToken": "None"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "45,97,103", "deleted_lines": "45,97,103,104,105,106,107,108,109"}}}}}}