{"BR": {"BR_id": "1367", "BR_author": "logogin", "BRopenT": "2020-09-18T09:48:18Z", "BRcloseT": "2020-09-20T03:55:09Z", "BR_text": {"BRsummary": "Wrong order of positional parameters in calls to Seq2SeqEncoder", "BRdescription": "\n <denchmark-h:h2>Description</denchmark-h>\n \n Seq2SeqEncoder has next signature for the call:\n def __call__(self, inputs, valid_length=None, states=None)\n but both child implementations, TransformerEncoder and BERTEncoder have signatures\n def __call__(self, inputs, states=None, valid_length=None)\n i.e. flipped order of states and valid_length positions. Both implementations also call super with positional arguments.\n The bug gets compensated by the fact that Seq2SeqEncoder simply passes through parameters without transformation and parameters flip back to the original positions.\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "logogin", "commentT": "2020-09-20T03:55:09Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/logogin>@logogin</denchmark-link>\n  I think this should have been solved via <denchmark-link:https://github.com/dmlc/gluon-nlp/pull/1368>#1368</denchmark-link>\n  so I closed the issue.\n \t\t"}}}, "commit": {"commit_id": "52e3de1dbe1b680eca7e2d771c5c380d849d5fcf", "commit_author": "Sheng Zha", "commitT": "2020-09-18 13:25:00-07:00", "commit_complexity": {"commit_NLOC": "None", "commit_CCN": "None", "commit_Nprams": "None"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "scripts\\machine_translation\\gnmt.py", "file_new_name": "scripts\\machine_translation\\gnmt.py", "file_complexity": {"file_NLOC": "355", "file_CCN": "23", "file_NToken": "1669"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "136", "deleted_lines": "136", "method_info": {"method_name": "forward", "method_params": "self,inputs,states,valid_length", "method_startline": "136", "method_endline": "160", "method_complexity": {"method_NLOC": "22", "method_CCN": "7", "method_NToken": "187", "method_nesting_level": "1"}}}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "src\\gluonnlp\\model\\bert.py", "file_new_name": "src\\gluonnlp\\model\\bert.py", "file_complexity": {"file_NLOC": "1329", "file_CCN": "62", "file_NToken": "5375"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "343", "deleted_lines": "343", "method_info": {"method_name": "__call__", "method_params": "self,inputs,states,valid_length", "method_startline": "343", "method_endline": "364", "method_complexity": {"method_NLOC": "2", "method_CCN": "1", "method_NToken": "29", "method_nesting_level": "1"}}}}}, "file_2": {"file_change_type": "MODIFY", "file_Nmethod": 4, "file_old_name": "src\\gluonnlp\\model\\seq2seq_encoder_decoder.py", "file_new_name": "src\\gluonnlp\\model\\seq2seq_encoder_decoder.py", "file_complexity": {"file_NLOC": "69", "file_CCN": "12", "file_NToken": "296"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "56,63,64,74", "deleted_lines": "56,66,67,74", "method_info": {"method_name": "__call__", "method_params": "self,inputs,states,valid_length", "method_startline": "56", "method_endline": "74", "method_complexity": {"method_NLOC": "2", "method_CCN": "1", "method_NToken": "32", "method_nesting_level": "1"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "56,63,64,74", "deleted_lines": "56,66,67,74", "method_info": {"method_name": "__call__", "method_params": "self,inputs,valid_length,states", "method_startline": "56", "method_endline": "74", "method_complexity": {"method_NLOC": "2", "method_CCN": "1", "method_NToken": "32", "method_nesting_level": "1"}}}, "hunk_2": {"Ismethod": 1, "added_lines": "76", "deleted_lines": "76", "method_info": {"method_name": "forward", "method_params": "self,inputs,valid_length,states", "method_startline": "76", "method_endline": "77", "method_complexity": {"method_NLOC": "2", "method_CCN": "1", "method_NToken": "17", "method_nesting_level": "1"}}}, "hunk_3": {"Ismethod": 1, "added_lines": "76", "deleted_lines": "76", "method_info": {"method_name": "forward", "method_params": "self,inputs,states,valid_length", "method_startline": "76", "method_endline": "77", "method_complexity": {"method_NLOC": "2", "method_CCN": "1", "method_NToken": "17", "method_nesting_level": "1"}}}}}, "file_3": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "src\\gluonnlp\\model\\transformer.py", "file_new_name": "src\\gluonnlp\\model\\transformer.py", "file_complexity": {"file_NLOC": "747", "file_CCN": "61", "file_NToken": "3881"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "347", "deleted_lines": "347", "method_info": {"method_name": "__call__", "method_params": "self,inputs,states,valid_length", "method_startline": "347", "method_endline": "367", "method_complexity": {"method_NLOC": "2", "method_CCN": "1", "method_NToken": "29", "method_nesting_level": "1"}}}}}}}}