{"BR": {"BR_id": "660", "BR_author": "Gpwner", "BRopenT": "2019-04-12T07:31:40Z", "BRcloseT": "2019-04-16T22:26:12Z", "BR_text": {"BRsummary": "Find a Bug in pretrain script of bert", "BRdescription": "\n <denchmark-link:https://github.com/dmlc/gluon-nlp/blob/master/scripts/bert/run_pretraining.py>https://github.com/dmlc/gluon-nlp/blob/master/scripts/bert/run_pretraining.py</denchmark-link>\n \n line 296 and 297,throw a exception\uff1a\n <denchmark-code>Traceback (most recent call last):\n   File \"/home/xzc/gluon-nlp/scripts/bert/run_pretraining.py\", line 477, in <module>\n     evaluate(data_eval, model, nsp_loss, mlm_loss, len(vocabulary), ctx)\n   File \"/home/xzc/gluon-nlp/scripts/bert/run_pretraining.py\", line 297, in evaluate\n     mlm_metric.reset_running()\n AttributeError: 'MaskedAccuracy' object has no attribute 'reset_running'\n </denchmark-code>\n \n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "Gpwner", "commentT": "2019-04-15T04:24:37Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/eric-haibin-lin>@eric-haibin-lin</denchmark-link>\n  I just checked the class , there is no function called .\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "Gpwner", "commentT": "2019-04-15T17:03:45Z", "comment_text": "\n \t\tSorry it should be reset_local instead. I'll make a PR with the fix\n \t\t"}}}, "commit": {"commit_id": "610eac8894a2ebdedcfba5d21aa3abbd35f42681", "commit_author": "Haibin Lin", "commitT": "2019-04-16 15:26:11-07:00", "commit_complexity": {"commit_NLOC": "None", "commit_CCN": "None", "commit_Nprams": "None"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "docs\\examples\\sequence_sampling\\sequence_sampling.md", "file_new_name": "docs\\examples\\sequence_sampling\\sequence_sampling.md", "file_complexity": {"file_NLOC": "None", "file_CCN": "None", "file_NToken": "None"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "174", "deleted_lines": "174"}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "env\\py3-master.yml", "file_new_name": "env\\py3-master.yml", "file_complexity": {"file_NLOC": "None", "file_CCN": "None", "file_NToken": "None"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "16", "deleted_lines": "16"}}}, "file_2": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "scripts\\bert\\run_pretraining.py", "file_new_name": "scripts\\bert\\run_pretraining.py", "file_complexity": {"file_NLOC": "371", "file_CCN": "50", "file_NToken": "3123"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "296,297", "deleted_lines": "296,297", "method_info": {"method_name": "evaluate", "method_params": "data_eval,model,nsp_loss,mlm_loss,vocab_size,ctx", "method_startline": "238", "method_endline": "306", "method_complexity": {"method_NLOC": "53", "method_CCN": "5", "method_NToken": "410", "method_nesting_level": "0"}}}}}, "file_3": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "scripts\\tests\\test_bert.py", "file_new_name": "scripts\\tests\\test_bert.py", "file_complexity": {"file_NLOC": "35", "file_CCN": "2", "file_NToken": "152"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "13", "deleted_lines": "13", "method_info": {"method_name": "test_pretrain", "method_params": "", "method_startline": "10", "method_endline": "39", "method_complexity": {"method_NLOC": "28", "method_CCN": "2", "method_NToken": "127", "method_nesting_level": "0"}}}}}}}}