{"BR": {"BR_id": "4911", "BR_author": "hzy46", "BRopenT": "2020-09-17T06:47:47Z", "BRcloseT": "2020-09-21T02:16:38Z", "BR_text": {"BRsummary": "Task retry will cause wrong framework retry records", "BRdescription": "\n How to reproduce:\n \n Use this job config:\n \n protocolVersion: 2\n name: retry_test_3_a9a85a47\n type: job\n jobRetryCount: 10\n prerequisites:\n   - type: dockerimage\n     uri: 'openpai/standard:python_3.6-pytorch_1.2.0-gpu'\n     name: docker_image_0\n taskRoles:\n   taskrole:\n     instances: 2\n     completion:\n       minFailedInstances: 1\n       minSucceededInstances: -1\n     taskRetryCount: 2\n     dockerImage: docker_image_0\n     resourcePerInstance:\n       gpu: 1\n       cpu: 1\n       memoryMB: 2000\n     commands:\n       - printenv\n       - exit 133\n defaults:\n   virtualCluster: default\n extras:\n   gangAllocation: false\n \n Go to the job retry page:\n \n <denchmark-link:https://user-images.githubusercontent.com/7499023/93429958-824cc780-f8f4-11ea-8801-13dc51730845.png></denchmark-link>\n \n Some tasks are recorded in RUNNING status. It is not true.\n The cause for this problem:\n FC will output framework object every time a task is retried. But the fluentd only records the framework object when the first task retry happens.\n \t"}, "comments": {}}, "commit": {"commit_id": "f5552defafd3f4e11521fe9d3ac2c0319db71ea9", "commit_author": "Zhiyuan He", "commitT": "2020-09-21 10:16:37+08:00", "commit_complexity": {"commit_NLOC": "0.0", "commit_CCN": "0.0", "commit_Nprams": "1.0"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "src\\fluentd\\deploy\\fluentd-config.yaml.template", "file_new_name": "src\\fluentd\\deploy\\fluentd-config.yaml.template", "file_complexity": {"file_NLOC": "None", "file_CCN": "None", "file_NToken": "None"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114", "deleted_lines": null}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "src\\fluentd\\src\\fluent-plugin-pgjson\\lib\\fluent\\plugin\\out_pgjson.rb", "file_new_name": "src\\fluentd\\src\\fluent-plugin-pgjson\\lib\\fluent\\plugin\\out_pgjson.rb", "file_complexity": {"file_NLOC": "199", "file_CCN": "32", "file_NToken": "1131"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "210,211,212,214,216,217,218", "deleted_lines": "210,211,213", "method_info": {"method_name": "write", "method_params": "chunk", "method_startline": "199", "method_endline": "236", "method_complexity": {"method_NLOC": "37", "method_CCN": "9", "method_NToken": "214", "method_nesting_level": "0"}}}}}}}}