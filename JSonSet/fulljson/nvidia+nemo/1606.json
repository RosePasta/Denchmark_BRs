{"BR": {"BR_id": "1606", "BR_author": "amirj", "BRopenT": "2021-01-06T11:02:21Z", "BRcloseT": "2021-01-08T08:14:30Z", "BR_text": {"BRsummary": "ConfigKeyError: str interpolation key 'model.language_model.pretrained_model_name' not found", "BRdescription": "\n I'm trying to reproduce <denchmark-link:https://colab.research.google.com/github/NVIDIA/NeMo/blob/r1.0.0b3/tutorials/nlp/Token_Classification-BioMegatron.ipynb>Named Entity Recognition - BioMegatron colab</denchmark-link>\n , everything is fine until the following cell:\n model_ner = nemo_nlp.models.TokenClassificationModel(cfg=config.model, trainer=trainer)\n Output:\n <denchmark-code>[NeMo I 2021-01-06 10:36:00 megatron_utils:235] Downloading from https://api.ngc.nvidia.com/v2/models/nvidia/biomegatron345mcased/versions/0/files/vocab.txt\n Downloading: 100%\n 625/625 [00:00<00:00, 1.31kB/s]\n \n Downloading: 100%\n 213k/213k [00:00<00:00, 3.31MB/s]\n Using bos_token, but it is not set yet.\n Using eos_token, but it is not set yet.\n \n ---------------------------------------------------------------------------\n ConfigKeyError                            Traceback (most recent call last)\n <ipython-input-25-4645443f78bc> in <module>()\n ----> 1 model_ner = nemo_nlp.models.TokenClassificationModel(cfg=config.model, trainer=trainer)\n \n 8 frames\n /usr/local/lib/python3.6/dist-packages/omegaconf/base.py in _resolve_simple_interpolation(self, key, inter_type, inter_key, throw_on_missing, throw_on_resolution_failure)\n     326                 if throw_on_resolution_failure:\n     327                     raise ConfigKeyError(\n --> 328                         f\"{inter_type} interpolation key '{inter_key}' not found\"\n     329                     )\n     330                 else:\n \n ConfigKeyError: str interpolation key 'model.language_model.pretrained_model_name' not found\n </denchmark-code>\n \n I believe that config.model.language_model.pretrained_model_name = 'biomegatron-bert-345m-cased'. In addition, I'm getting an error in the installation phase though I'm not sure it would be related to this issue:\n <denchmark-code># install NeMo\n BRANCH = 'main'\n !python -m pip install git+https://github.com/NVIDIA/NeMo.git@$BRANCH#egg=nemo_toolkit[nlp]\n </denchmark-code>\n \n Output:\n <denchmark-code>Collecting nemo_toolkit[nlp]\n   Cloning https://github.com/NVIDIA/NeMo.git (to revision main) to /tmp/pip-install-hz__8v6m/nemo-toolkit\n   Running command git clone -q https://github.com/NVIDIA/NeMo.git /tmp/pip-install-hz__8v6m/nemo-toolkit\n Requirement already satisfied: numpy>=1.18.2 in /usr/local/lib/python3.6/dist-packages (from nemo_toolkit[nlp]) (1.19.4)\n ...\n Successfully built nemo-toolkit wget future PyYAML antlr4-python3-runtime sacremoses idna-ssl\n ERROR: albumentations 0.1.12 has requirement imgaug<0.2.7,>=0.2.5, but you'll have imgaug 0.2.9 which is incompatible.\n ERROR: botocore 1.19.49 has requirement urllib3<1.27,>=1.25.4; python_version != \"3.4\", but you'll have urllib3 1.24.3 which is incompatible.\n Installing collected packages: onnx, multidict, yarl, async-timeout, idna-ssl, aiohttp, fsspec, future, PyYAML, pytorch-lightning, wget, ruamel.yaml.clib, ruamel.yaml, omegaconf, antlr4-python3-runtime, hydra-core, sacremoses, tokenizers, transformers, sentencepiece, typer, braceexpand, simplejson, objectio, webdataset, jmespath, botocore, s3transfer, boto3, matplotlib, unidecode, youtokentome, rapidfuzz, pybind11, megatron-lm, nemo-toolkit\n   Found existing installation: future 0.16.0\n     Uninstalling future-0.16.0:\n       Successfully uninstalled future-0.16.0\n   Found existing installation: PyYAML 3.13\n     Uninstalling PyYAML-3.13:\n       Successfully uninstalled PyYAML-3.13\n   Found existing installation: matplotlib 3.2.2\n     Uninstalling matplotlib-3.2.2:\n       Successfully uninstalled matplotlib-3.2.2\n Successfully installed PyYAML-5.3.1 aiohttp-3.7.3 antlr4-python3-runtime-4.8 async-timeout-3.0.1 boto3-1.16.49 botocore-1.19.49 braceexpand-0.1.6 fsspec-0.8.5 future-0.18.2 hydra-core-1.0.4 idna-ssl-1.1.0 jmespath-0.10.0 matplotlib-3.3.3 megatron-lm-1.1.5 multidict-5.1.0 nemo-toolkit-1.0.0b4 objectio-0.2.29 omegaconf-2.0.5 onnx-1.8.0 pybind11-2.6.1 pytorch-lightning-1.1.3 rapidfuzz-0.14.2 ruamel.yaml-0.16.12 ruamel.yaml.clib-0.2.2 s3transfer-0.3.3 sacremoses-0.0.43 sentencepiece-0.1.94 simplejson-3.17.2 tokenizers-0.9.4 transformers-4.1.1 typer-0.3.2 unidecode-1.1.2 webdataset-0.1.40 wget-3.2 yarl-1.6.3 youtokentome-1.0.6\n </denchmark-code>\n \n \t"}, "comments": {}}, "commit": {"commit_id": "ede204df0d5adc54714981511b83cf6d2fa905b2", "commit_author": "Somshubra Majumdar", "commitT": "2021-01-08 00:14:29-08:00", "commit_complexity": {"commit_NLOC": "None", "commit_CCN": "None", "commit_Nprams": "None"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "nemo\\utils\\model_utils.py", "file_new_name": "nemo\\utils\\model_utils.py", "file_complexity": {"file_NLOC": "253", "file_CCN": "52", "file_NToken": "1105"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "359", "deleted_lines": "359", "method_info": {"method_name": "convert_model_config_to_dict_config", "method_params": "DictConfig", "method_startline": "346", "method_endline": "367", "method_complexity": {"method_NLOC": "20", "method_CCN": "4", "method_NToken": "78", "method_nesting_level": "0"}}}}}}}}