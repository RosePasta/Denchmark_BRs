{"BR": {"BR_id": "3592", "BR_author": "shiv-u", "BRopenT": "2020-07-12T12:04:10Z", "BRcloseT": "2020-08-18T13:09:02Z", "BR_text": {"BRsummary": "BytesInGpu keep increasing whereas the numBytes is constant.", "BRdescription": "\n To get help from the community, we encourage using Stack Overflow and the <denchmark-link:https://stackoverflow.com/questions/tagged/tensorflow.js>tensorflow.js</denchmark-link>\n  tag.\n <denchmark-h:h4>TensorFlow.js version</denchmark-h>\n \n Using this source for the script : <denchmark-link:https://cdn.jsdelivr.net/npm/@tensorflow/tfjs/dist/tf.min.js>https://cdn.jsdelivr.net/npm/@tensorflow/tfjs/dist/tf.min.js</denchmark-link>\n \n <denchmark-h:h4>Describe the problem or feature request</denchmark-h>\n \n The BytesInGpu keep increasing whereas the numBytes, numTensors,numDataBuffers are constant. I'm using tf.tidy and even disposing the tensors after using tf.browser.toPixels. Is there any way I can resolve this ?\n <denchmark-link:https://user-images.githubusercontent.com/29162160/87245753-9f34cc80-c465-11ea-8fb1-87791de51519.png></denchmark-link>\n \n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "shiv-u", "commentT": "2020-07-13T12:44:24Z", "comment_text": "\n \t\tHi <denchmark-link:https://github.com/shiv-u>@shiv-u</denchmark-link>\n  - would you be able to provide a minimal test case that reproduces this behavior? Thank you.\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "shiv-u", "commentT": "2020-07-21T09:53:48Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/rthadur>@rthadur</denchmark-link>\n , <denchmark-link:https://github.com/annxingyuan>@annxingyuan</denchmark-link>\n  sorry for late reply, while I was running this piece of code I was able to reproduce the above issue.\n <denchmark-code>console.log(\"*****start*****\",tf.memory());\n this.pixels =  tf.browser.fromPixels(this.video);\n await tf.browser.toPixels(this.pixels,this.c2);\n console.log(\"*****end*****\",tf.memory());\n </denchmark-code>\n \n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "shiv-u", "commentT": "2020-07-27T16:51:58Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/annxingyuan>@annxingyuan</denchmark-link>\n  were you able to look into this ?\n \t\t"}, "comments_3": {"comment_id": 4, "comment_author": "shiv-u", "commentT": "2020-08-04T09:15:21Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/annxingyuan>@annxingyuan</denchmark-link>\n  I'm still not able to solve this issue, is there any update from your end ? Do you need more info from my end ?\n \t\t"}, "comments_4": {"comment_id": 5, "comment_author": "shiv-u", "commentT": "2020-08-11T08:31:57Z", "comment_text": "\n \t\tclosing this issue as it's not getting response.\n \t\t"}, "comments_5": {"comment_id": 6, "comment_author": "shiv-u", "commentT": "2020-08-11T14:28:17Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/annxingyuan>@annxingyuan</denchmark-link>\n  gentle ping if you have any update ?\n \t\t"}, "comments_6": {"comment_id": 7, "comment_author": "shiv-u", "commentT": "2020-08-17T07:42:17Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/annxingyuan>@annxingyuan</denchmark-link>\n  <denchmark-link:https://github.com/rthadur>@rthadur</denchmark-link>\n  It's been nearly a week from reopening this issue, is there no update at all ?\n \t\t"}, "comments_7": {"comment_id": 8, "comment_author": "shiv-u", "commentT": "2020-08-17T07:42:18Z", "comment_text": "\n \t\tAre you satisfied with the resolution of your issue?\n <denchmark-link:https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=Yes&entry.2137816233=https://github.com/tensorflow/tfjs/issues/3592>Yes</denchmark-link>\n \n <denchmark-link:https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=No&entry.2137816233=https://github.com/tensorflow/tfjs/issues/3592>No</denchmark-link>\n \n \t\t"}, "comments_8": {"comment_id": 9, "comment_author": "shiv-u", "commentT": "2020-08-18T13:09:04Z", "comment_text": "\n \t\tAre you satisfied with the resolution of your issue?\n <denchmark-link:https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=Yes&entry.2137816233=https://github.com/tensorflow/tfjs/issues/3592>Yes</denchmark-link>\n \n <denchmark-link:https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=No&entry.2137816233=https://github.com/tensorflow/tfjs/issues/3592>No</denchmark-link>\n \n \t\t"}, "comments_9": {"comment_id": 10, "comment_author": "shiv-u", "commentT": "2020-08-18T18:23:57Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/annxingyuan>@annxingyuan</denchmark-link>\n  Thanks for the fix, when I looked into your code I got the optimisation part of the code but I didn't get where was the memory leaking ?\n \t\t"}, "comments_10": {"comment_id": 11, "comment_author": "shiv-u", "commentT": "2020-08-18T19:23:35Z", "comment_text": "\n \t\tThe leak may have been with calling min / max on the GPU, which we removed with this optimization.\n \t\t"}}}, "commit": {"commit_id": "44a288dbde5459c5fd50cce3f843cfafaa8ace6d", "commit_author": "Ann Yuan", "commitT": "2020-08-18 09:09:01-04:00", "commit_complexity": {"commit_NLOC": "1.0", "commit_CCN": "1.0", "commit_Nprams": "1.0"}, "changed_files": {"file_0": {"file_change_type": "ADD", "file_Nmethod": 0, "file_old_name": "None", "file_new_name": "tfjs-backend-webgl\\src\\webgl_topixels_test.ts", "file_complexity": {"file_NLOC": "20", "file_CCN": "3", "file_NToken": "194"}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "tfjs-core\\src\\ops\\browser.ts", "file_new_name": "tfjs-core\\src\\ops\\browser.ts", "file_complexity": {"file_NLOC": "177", "file_CCN": "39", "file_NToken": "1387"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "197,202,203,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,237,238,239,240", "deleted_lines": "199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,249,250,251,252", "method_info": {"method_name": "toPixels", "method_params": "TensorLike,HTMLCanvasElement", "method_startline": "174", "method_endline": "254", "method_complexity": {"method_NLOC": "71", "method_CCN": "24", "method_NToken": "646", "method_nesting_level": "0"}}}}}}}}