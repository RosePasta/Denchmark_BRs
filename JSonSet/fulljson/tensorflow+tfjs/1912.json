{"BR": {"BR_id": "1912", "BR_author": "eggerand13", "BRopenT": "2019-08-25T11:14:29Z", "BRcloseT": "2019-09-09T21:58:58Z", "BR_text": {"BRsummary": "Issue running tfjs-node-gpu under Windows", "BRdescription": "\n <denchmark-h:h4>TensorFlow.js version</denchmark-h>\n \n tfjs-node-gpu 1.2.7\n <denchmark-h:h4>Node version</denchmark-h>\n \n v12.9.0\n <denchmark-h:h4>Describe the problem or feature request</denchmark-h>\n \n When trying to run a file that only contains the following line:\n const tf = require('@tensorflow/tfjs-node-gpu');\n I will receive the following error:\n <denchmark-code>internal/modules/cjs/loader.js:977\n   return process.dlopen(module, path.toNamespacedPath(filename));\n                  ^\n \n Error: The specified module could not be found.\n \\\\?\\C:\\development\\JS ML\\node_modules\\@tensorflow\\tfjs-node-gpu\\lib\\napi-v4\\tfjs_binding.node\n     at Object.Module._extensions..node (internal/modules/cjs/loader.js:977:18)\n     at Module.load (internal/modules/cjs/loader.js:790:32)\n     at Function.Module._load (internal/modules/cjs/loader.js:703:12)\n     at Module.require (internal/modules/cjs/loader.js:830:19)\n     at require (internal/modules/cjs/helpers.js:68:18)\n     at Object.<anonymous> (C:\\Entwicklung_neu\\JS ML\\node_modules\\@tensorflow\\tfjs-node-gpu\\dist\\index.js:44:16)\n     at Module._compile (internal/modules/cjs/loader.js:936:30)\n     at Object.Module._extensions..js (internal/modules/cjs/loader.js:947:10)\n     at Module.load (internal/modules/cjs/loader.js:790:32)\n     at Function.Module._load (internal/modules/cjs/loader.js:703:12)\n </denchmark-code>\n \n I tried to find out why there is this strange \"\\?\" prepended to the path but I couldn't really find out why it is happening.\n The code will run without any problem when I only use the CPU module (tfjs-node).\n I have a CUDA compatible graphics card (GTX960M) and followed the complete installation guide. When installing the module I have only Python 2.7 installed. The installation of the module also seems to work as expected:\n <denchmark-code>> @tensorflow/tfjs-node-gpu@1.2.7 install C:\\development\\JS ML\\node_modules\\@tensorflow\\tfjs-node-gpu\n > node scripts/install.js gpu download\n \n GPU-windows-1.2.7.zip\n * Downloading libtensorflow\n [==============================] 3508656/bps 100% 0.0s\n [==============================] 1862362/bps 100% 0.0s\n * Building TensorFlow Node.js bindings\n npm WARN js-ml@1.0.0 No description\n npm WARN js-ml@1.0.0 No repository field.\n \n added 86 packages from 83 contributors and audited 150 packages in 98.859s\n found 0 vulnerabilities\n </denchmark-code>\n \n I would be very glad if anyone could help me with this issue.\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "eggerand13", "commentT": "2019-08-25T14:39:49Z", "comment_text": "\n \t\tThe same issue in windows 10.\n Error: Cannot find module 'C:\\Users\\zx\\work\\escher-project\\escher-util\\node_modules\\_@tensorflow_tfjs-node@1.2.8@@tensorflow\\tfjs-node\\lib\\napi-v4\\tfjs_binding.node' at Function.Module._resolveFilename (internal/modules/cjs/loader.js:636:15) at Function.Module._load (internal/modules/cjs/loader.js:562:25) at Module.require (internal/modules/cjs/loader.js:690:17) at require (internal/modules/cjs/helpers.js:25:18) at Object.<anonymous> (C:\\Users\\zx\\work\\escher-project\\escher-util\\node_modules\\_@tensorflow_tfjs-node@1.2.8@@tensorflow\\tfjs-node\\dist\\index.js:44:16) at Module._compile (internal/modules/cjs/loader.js:776:30) at Object.Module._extensions..js (internal/modules/cjs/loader.js:787:10) at Module.load (internal/modules/cjs/loader.js:653:32) at tryModuleLoad (internal/modules/cjs/loader.js:593:12) at Function.Module._load (internal/modules/cjs/loader.js:585:3)\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "eggerand13", "commentT": "2019-08-25T18:21:54Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/eggerand13>@eggerand13</denchmark-link>\n  <denchmark-link:https://github.com/chenqing>@chenqing</denchmark-link>\n  I just updated the addon module for windows. Please try @tensorflow/tfjs-node @ 1.2.8.\n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "eggerand13", "commentT": "2019-08-25T18:53:51Z", "comment_text": "\n \t\t\n @eggerand13 @chenqing I just updated the addon module for windows. Please try @tensorflow/tfjs-node @ 1.2.8.\n \n Thank you very much for your help. Could you point me in the right direction HOW I could get the version 1.2.8?\n NPM doesn't know about (\"No matching version found for @tensorflow/tfjs-node-gpu@^1.2.8\") and I also see that the latest commit in tfjs-node is already 17 hours old and it's not about this issue. Also in your private fork of tfjs-node I don't see any updates.\n I hope am not missing something obvious here.\n Thank you.\n \t\t"}, "comments_3": {"comment_id": 4, "comment_author": "eggerand13", "commentT": "2019-08-25T19:18:56Z", "comment_text": "\n \t\tI had this same error.\n I further went to bulid @tensorflow/tfjs-node-gyp using node-gyp configure\n <denchmark-code>M:\\javascript\\tensorflow\\node_modules\\@tensorflow\\tfjs-node-gpu>node-gyp configure\n gyp info it worked if it ends with ok\n gyp info using node-gyp@5.0.3\n gyp info using node@12.9.0 | win32 | x64\n gyp info find Python using Python version 2.7.11 found at \"c:\\tools\\Python27\\python.exe\"\n gyp info find VS using VS2015 (14.0) found at:\n gyp info find VS \"C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\"\n gyp info find VS run with --verbose for detailed information\n gyp info spawn c:\\tools\\Python27\\python.exe\n gyp info spawn args [\n gyp info spawn args   'C:\\\\tools\\\\nodejs\\\\node_modules\\\\node-gyp\\\\gyp\\\\gyp_main.py',\n gyp info spawn args   'binding.gyp',\n gyp info spawn args   '-f',\n gyp info spawn args   'msvs',\n gyp info spawn args   '-I',\n gyp info spawn args   'M:\\\\javascript\\\\tensorflow\\\\node_modules\\\\@tensorflow\\\\tfjs-node-gpu\\\\build\\\\config.gypi',\n gyp info spawn args   '-I',\n gyp info spawn args   'C:\\\\tools\\\\nodejs\\\\node_modules\\\\node-gyp\\\\addon.gypi',\n gyp info spawn args   '-I',\n gyp info spawn args   'C:\\\\Users\\\\d3x0r\\\\AppData\\\\Local\\\\node-gyp\\\\Cache\\\\12.9.0\\\\include\\\\node\\\\common.gypi',\n gyp info spawn args   '-Dlibrary=shared_library',\n gyp info spawn args   '-Dvisibility=default',\n gyp info spawn args   '-Dnode_root_dir=C:\\\\Users\\\\d3x0r\\\\AppData\\\\Local\\\\node-gyp\\\\Cache\\\\12.9.0',\n gyp info spawn args   '-Dnode_gyp_dir=C:\\\\tools\\\\nodejs\\\\node_modules\\\\node-gyp',\n gyp info spawn args   '-Dnode_lib_file=C:\\\\Users\\\\d3x0r\\\\AppData\\\\Local\\\\node-gyp\\\\Cache\\\\12.9.0\\\\<(target_arch)\\\\node.lib',\n gyp info spawn args   '-Dmodule_root_dir=M:\\\\javascript\\\\tensorflow\\\\node_modules\\\\@tensorflow\\\\tfjs-node-gpu',\n gyp info spawn args   '-Dnode_engine=v8',\n gyp info spawn args   '--depth=.',\n gyp info spawn args   '--no-parallel',\n gyp info spawn args   '--generator-output',\n gyp info spawn args   'M:\\\\javascript\\\\tensorflow\\\\node_modules\\\\@tensorflow\\\\tfjs-node-gpu\\\\build',\n gyp info spawn args   '-Goutput_dir=.'\n gyp info spawn args ]\n gyp: Undefined variable module_name in binding.gyp while trying to load binding.gyp\n gyp ERR! configure error\n gyp ERR! stack Error: `gyp` failed with exit code: 1\n gyp ERR! stack     at ChildProcess.onCpExit (C:\\tools\\nodejs\\node_modules\\node-gyp\\lib\\configure.js:344:16)\n gyp ERR! stack     at ChildProcess.emit (events.js:209:13)\n gyp ERR! stack     at Process.ChildProcess._handle.onexit (internal/child_process.js:272:12)\n gyp ERR! System Windows_NT 6.1.7601\n gyp ERR! command \"C:\\\\tools\\\\nodejs\\\\node.exe\" \"C:\\\\tools\\\\nodejs\\\\node_modules\\\\node-gyp\\\\bin\\\\node-gyp.js\" \"configure\"\n gyp ERR! cwd M:\\javascript\\tensorflow\\node_modules\\@tensorflow\\tfjs-node-gpu\n gyp ERR! node -v v12.9.0\n gyp ERR! node-gyp -v v5.0.3\n gyp ERR! not ok\n </denchmark-code>\n \n which I gues scomes form this part of binding.gyp\n <denchmark-code>  , {\n       \"target_name\": \"action_after_build\",\n       \"type\": \"none\",\n       \"dependencies\": [ \"<(module_name)\" ],\n       \"copies\": [\n         {\n           \"files\": [ \"<(PRODUCT_DIR)/<(module_name).node\" ],\n           \"destination\": \"<(module_path)\"\n         }\n       }\n </denchmark-code>\n \n which gracking down 'binding.gyp module name.....' seems to be a problem with node-pre-gyp which doesn't appear to be a thing....\n I saw the other notes, and the WINDOWS _TROUBLESHOOTING.md but really none of that applies, bulding other things with node-gyp works fine\n but then I don't use <(module_name).\n \t\t"}, "comments_4": {"comment_id": 5, "comment_author": "eggerand13", "commentT": "2019-08-25T23:55:39Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/eggerand13>@eggerand13</denchmark-link>\n  ah turns out we only published tfjs-node@1.2.8 but missed tfjs-node-gpu. I just published it. Please give it a try.\n FYI we are hosting the pre compiled addon module in google cloud platform, so it's not a change in github.\n \t\t"}, "comments_5": {"comment_id": 6, "comment_author": "eggerand13", "commentT": "2019-08-25T23:58:03Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/d3x0r>@d3x0r</denchmark-link>\n  we switched to <denchmark-link:https://github.com/mapbox/node-pre-gyp>node-pre-gyp</denchmark-link>\n  instead of node-gyp, that's why you are seeing the error. Please try tfjs-node-gpu @ 1.2.8 again.\n FYI in future if you want to build the module by yourself, you can just run yarn or npm install, the install script (tfjs-node/scripts/install.js) will do all the work.\n \t\t"}, "comments_6": {"comment_id": 7, "comment_author": "eggerand13", "commentT": "2019-08-26T05:00:02Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/kangyizhang>@kangyizhang</denchmark-link>\n   npm install iin...\n myproject/node_modules/@tensorflow/tfjs-node-gpu\n will then install everything in\n myproject/node_modules/@tensorflow/\n again in\n myproject/node_modules/@tensorflow/tfjs-node-gpu/node_modules/@tensorflow/... including  tfjs-node-gpu again :)\n npm install in an addon  is not a good idea :)\n I was just doing npm update in an existing project that (almost)) worked with 1.2.4..\n <denchmark-h:hr></denchmark-h>\n \n <denchmark-code>\n > @tensorflow/tfjs-node-gpu@1.1.2 install M:\\javascript\\tensorflow\\node_modules\\@tensorflow\\tfjs-node-gpu\n > node scripts/install.js gpu download\n \n * Downloading libtensorflow\n \n \n * Building TensorFlow Node.js bindings\n M:\\javascript\\tensorflow\\node_modules\\@tensorflow\\tfjs-node-gpu\\scripts\\install.js:165\n       throw new Error('node-gyp rebuild failed with: ' + err);\n       ^\n \n Error: node-gyp rebuild failed with: Error: Command failed: node-gyp rebuild\n gyp ERR! build error \n gyp ERR! stack Error: `msbuild` failed with exit code: 1\n gyp ERR! stack     at ChildProcess.onExit (C:\\Users\\Panther\\AppData\\Roaming\\npm\\node_modules\\npm\\node_modules\\node-gyp\\lib\\build.js:262:23)\n gyp ERR! stack     at ChildProcess.emit (events.js:197:13)\n gyp ERR! stack     at Process.ChildProcess._handle.onexit (internal/child_process.js:254:12)\n gyp ERR! System Windows_NT 10.0.17134\n gyp ERR! command \"h:\\\\dev2\\\\nodejs\\\\node.exe\" \"C:\\\\Users\\\\Panther\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\npm\\\\node_modules\\\\node-gyp\\\\bin\\\\node-gyp.js\" \"rebuild\"\n gyp ERR! cwd M:\\javascript\\tensorflow\\node_modules\\@tensorflow\\tfjs-node-gpu\n gyp ERR! node -v v11.9.0\n gyp ERR! node-gyp -v v3.8.0\n gyp ERR! not ok \n \n     at cp.exec (M:\\javascript\\tensorflow\\node_modules\\@tensorflow\\tfjs-node-gpu\\scripts\\install.js:165:13)\n     at ChildProcess.exithandler (child_process.js:304:5)\n     at ChildProcess.emit (events.js:197:13)\n     at maybeClose (internal/child_process.js:978:16)\n     at Process.ChildProcess._handle.onexit (internal/child_process.js:265:5)\n npm WARN rollup-plugin-visualizer@1.1.1 requires a peer of rollup@>=0.60.0 but none is installed. You must install peer dependencies yourself.\n npm WARN tensorflow@1.0.0 No description\n npm WARN tensorflow@1.0.0 No repository field.\n \n npm ERR! code ELIFECYCLE\n npm ERR! errno 1\n npm ERR! @tensorflow/tfjs-node-gpu@1.1.2 install: `node scripts/install.js gpu download`\n npm ERR! Exit status 1\n npm ERR! \n npm ERR! Failed at the @tensorflow/tfjs-node-gpu@1.1.2 install script.\n npm ERR! This is probably not a problem with npm. There is likely additional logging output above.\n \n npm ERR! A complete log of this run can be found in:\n npm ERR!     C:\\Users\\Panther\\AppData\\Roaming\\npm-cache\\_logs\\2019-05-06T10_53_38_142Z-debug.log\n </denchmark-code>\n \n This is a pretty clean system, there was a dependancy of rollup\n <denchmark-code>M:\\javascript\\tensorflow>npm install @tensorflow/tfjs-node-gpu\n (node:11204) MaxListenersExceededWarning: Possible EventEmitter memory leak detected. 11 drain listeners added to [TLSSocket]. Use emitter.setMaxListeners() to increase limit\n (node:11204) MaxListenersExceededWarning: Possible EventEmitter memory leak detected. 11 drain listeners added to [TLSSocket]. Use emitter.setMaxListeners() to increase limit\n (node:11204) MaxListenersExceededWarning: Possible EventEmitter memory leak detected. 11 drain listeners added to [TLSSocket]. Use emitter.setMaxListeners() to increase limit\n (node:11204) MaxListenersExceededWarning: Possible EventEmitter memory leak detected. 11 drain listeners added to [TLSSocket]. Use emitter.setMaxListeners() to increase limit\n (node:11204) MaxListenersExceededWarning: Possible EventEmitter memory leak detected. 11 drain listeners added to [TLSSocket]. Use emitter.setMaxListeners() to increase limit\n (node:11204) MaxListenersExceededWarning: Possible EventEmitter memory leak detected. 11 drain listeners added to [TLSSocket]. Use emitter.setMaxListeners() to increase limit\n \n > @tensorflow/tfjs-node-gpu@1.2.8 install M:\\javascript\\tensorflow\\node_modules\\@tensorflow\\tfjs-node-gpu\n > node scripts/install.js gpu download\n \n GPU-windows-1.2.8.zip\n * Downloading libtensorflow\n [==============================] 2506038/bps 100% 0.0s\n [==============================] 658990/bps 100% 0.0s\n * Building TensorFlow Node.js bindings\n node-pre-gyp install failed with error: Error: Command failed: node-pre-gyp install --fallback-to-build\n node-pre-gyp WARN Using needle for node-pre-gyp https download\n node-pre-gyp WARN Tried to download(404): https://storage.googleapis.com/tf-builds/pre-built-binary/napi-v4/1.2.8/tfjs_binding-v1.2.8-node-v72-win32-x64.tar.gz\n node-pre-gyp WARN Pre-built binaries not found for @tensorflow/tfjs-node-gpu@1.2.8 and node@12.9.0 (node-v72 ABI, unknown) (falling back to source compile with node-gyp)\n gyp ERR! build error\n gyp ERR! stack Error: `C:\\Program Files (x86)\\MSBuild\\14.0\\bin\\MSBuild.exe` failed with exit code: 1\n gyp ERR! stack     at ChildProcess.onExit (C:\\tools\\nodejs\\node_modules\\npm\\node_modules\\node-gyp\\lib\\build.js:196:23)\n gyp ERR! stack     at ChildProcess.emit (events.js:209:13)\n gyp ERR! stack     at Process.ChildProcess._handle.onexit (internal/child_process.js:272:12)\n gyp ERR! System Windows_NT 6.1.7601\n gyp ERR! command \"C:\\\\tools\\\\nodejs\\\\node.exe\" \"C:\\\\tools\\\\nodejs\\\\node_modules\\\\npm\\\\node_modules\\\\node-gyp\\\\bin\\\\node-gyp.js\" \"build\" \"--fallback-to-build\" \"--module=M:\\\\javascript\\\\tensorflow\\\\node_modules\\\\@tensorflo\n w\\\\tfjs-node-gpu\\\\lib\\\\napi-v4\\\\tfjs_binding.node\" \"--module_name=tfjs_binding\" \"--module_path=M:\\\\javascript\\\\tensorflow\\\\node_modules\\\\@tensorflow\\\\tfjs-node-gpu\\\\lib\\\\napi-v4\" \"--napi_version=4\" \"--node_abi_napi=napi\"\n  \"--napi_build_version=4\" \"--node_napi_label=napi-v4\"\n gyp ERR! cwd M:\\javascript\\tensorflow\\node_modules\\@tensorflow\\tfjs-node-gpu\n gyp ERR! node -v v12.9.0\n gyp ERR! node-gyp -v v5.0.3\n gyp ERR! not ok\n node-pre-gyp ERR! build error\n node-pre-gyp ERR! stack Error: Failed to execute 'C:\\tools\\nodejs\\node.exe C:\\tools\\nodejs\\node_modules\\npm\\node_modules\\node-gyp\\bin\\node-gyp.js build --fallback-to-build --module=M:\\javascript\\tensorflow\\node_modules\\@\n tensorflow\\tfjs-node-gpu\\lib\\napi-v4\\tfjs_binding.node --module_name=tfjs_binding --module_path=M:\\javascript\\tensorflow\\node_modules\\@tensorflow\\tfjs-node-gpu\\lib\\napi-v4 --napi_version=4 --node_abi_napi=napi --napi_bui\n ld_version=4 --node_napi_label=napi-v4' (1)\n node-pre-gyp ERR! stack     at ChildProcess.<anonymous> (M:\\javascript\\tensorflow\\node_modules\\node-pre-gyp\\lib\\util\\compile.js:83:29)\n node-pre-gyp ERR! stack     at ChildProcess.emit (events.js:209:13)\n node-pre-gyp ERR! stack     at maybeClose (internal/child_process.js:1021:16)\n node-pre-gyp ERR! stack     at Process.ChildProcess._handle.onexit (internal/child_process.js:283:5)\n node-pre-gyp ERR! System Windows_NT 6.1.7601\n node-pre-gyp ERR! command \"C:\\\\tools\\\\nodejs\\\\node.exe\" \"M:\\\\javascript\\\\tensorflow\\\\node_modules\\\\node-pre-gyp\\\\bin\\\\node-pre-gyp\" \"install\" \"--fallback-to-build\"\n node-pre-gyp ERR! cwd M:\\javascript\\tensorflow\\node_modules\\@tensorflow\\tfjs-node-gpu\n node-pre-gyp ERR! node -v v12.9.0\n node-pre-gyp ERR! node-pre-gyp -v v0.13.0\n node-pre-gyp ERR! not ok\n \n npm WARN tensorflow@1.0.0 No description\n npm WARN tensorflow@1.0.0 No repository field.\n \n + @tensorflow/tfjs-node-gpu@1.2.8\n updated 1 package and audited 150 packages in 131.814s\n found 0 vulnerabilities\n </denchmark-code>\n \n \t\t"}, "comments_7": {"comment_id": 8, "comment_author": "eggerand13", "commentT": "2019-08-26T15:02:49Z", "comment_text": "\n \t\t\n @eggerand13 @chenqing I just updated the addon module for windows. Please try @tensorflow/tfjs-node @ 1.2.8.\n \n <denchmark-link:https://storage.googleapis.com/tf-builds/pre-built-binary/napi-v4/1.2.8/tfjs_binding-v1.2.8-node-v64-win32-x64.tar.gz>https://storage.googleapis.com/tf-builds/pre-built-binary/napi-v4/1.2.8/tfjs_binding-v1.2.8-node-v64-win32-x64.tar.gz</denchmark-link>\n   404 now\n \t\t"}, "comments_8": {"comment_id": 9, "comment_author": "eggerand13", "commentT": "2019-08-26T16:52:10Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/chenqing>@chenqing</denchmark-link>\n  the module is uploaded to <denchmark-link:https://storage.googleapis.com/tf-builds/pre-built-binary/napi-v4/1.2.8/GPU-windows-1.2.8.zip>https://storage.googleapis.com/tf-builds/pre-built-binary/napi-v4/1.2.8/GPU-windows-1.2.8.zip</denchmark-link>\n \n I notice <denchmark-link:https://github.com/d3x0r>@d3x0r</denchmark-link>\n  get the same error. I'll take a look.\n \t\t"}, "comments_9": {"comment_id": 10, "comment_author": "eggerand13", "commentT": "2019-08-26T17:33:59Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/kangyizhang>@kangyizhang</denchmark-link>\n  Thank you for providing a new version and handling this issue. Unfortunately there was no change with the 1.2.8 version. I still receive the same error as in my initial question.\n \t\t"}, "comments_10": {"comment_id": 11, "comment_author": "eggerand13", "commentT": "2019-08-26T17:36:56Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/eggerand13>@eggerand13</denchmark-link>\n  can you try  and let me know if it works? I think you installed  but you are importing .\n \t\t"}, "comments_11": {"comment_id": 12, "comment_author": "eggerand13", "commentT": "2019-08-26T17:43:19Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/kangyizhang>@kangyizhang</denchmark-link>\n   Ohh I just realized that in my initial post I accidentially wrote tfjs-node instead of tfjs-node-gpu. I edited that part. I do import tfjs-node-gpu. It was just a copy-paste error when writing the issue post.\n So no, unfortunately that is not the issue.\n As you can see from the error, the module is actually loaded. It is in node_modules@tensorflow\\tfjs-node-gpu\\dist\\index.js:44 that the error appears. It seems that somewhere here the problem occurs.\n <denchmark-code>var bindingPath = binary.find(path.resolve(path.join(__dirname, '/../package.json')));\n // tslint:disable-next-line:no-require-imports\n var bindings = require(bindingPath);\n </denchmark-code>\n \n When it tries to load the \\node_modules@tensorflow\\tfjs-node-gpu\\lib\\napi-v4\\tfjs_binding.node file (which is referenced in the package.json).\n \t\t"}, "comments_12": {"comment_id": 13, "comment_author": "eggerand13", "commentT": "2019-08-27T18:23:01Z", "comment_text": "\n \t\tThis is a bug in tfjs-node@1.2.8 and will be fixed in the next release.\n \t\t"}, "comments_13": {"comment_id": 14, "comment_author": "eggerand13", "commentT": "2019-08-28T01:56:35Z", "comment_text": "\n \t\tSolution?\n Use:\n npm install @tensorflow/tfjs@1.2.7 and\n npm install @tensorflow/tfjs-node@1.2.7\n This solved my problem.\n \t\t"}, "comments_14": {"comment_id": 15, "comment_author": "eggerand13", "commentT": "2019-08-28T05:44:28Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/Arturbarth>@Arturbarth</denchmark-link>\n  Do you mean using those two installs BEFORE/AFTER using the @tensorflow/tfjs-node-gpu install? Because those two alone will not install tfjs-node-gpu module which this issue here is all about.\n I tried using the two installs you proposed BEFORE the @tensorflow/tfjs-node-gpu install which unfortunately did not help.\n \t\t"}, "comments_15": {"comment_id": 16, "comment_author": "eggerand13", "commentT": "2019-08-28T06:18:20Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/eggerand13>@eggerand13</denchmark-link>\n  it should work when you only install @tensorflow/tfjs-node-gpu@1.2.7. We will release a new version soon.\n <denchmark-link:https://github.com/Arturbarth>@Arturbarth</denchmark-link>\n  You only need to install @tensorflow/tfjs-node. @tensorflow/tfjs will be installed when you install @tensorflow/tfjs-node.\n \t\t"}, "comments_16": {"comment_id": 17, "comment_author": "eggerand13", "commentT": "2019-08-28T16:01:08Z", "comment_text": "\n \t\tJust a small note on mine - I did get node-pre-gyp to build it... but it still wouldn't load, even though the file was there.  But in my case, this is a Radeon Mobile HD 5850 (from 2009), and being AMD it doesn't have CUDA.  (Cuda doesn't have a fall back tp pure CPU mode either, apparently)\n Just out of curiosity; any work done to use OpenCL instead of CUDA?\n \t\t"}, "comments_17": {"comment_id": 18, "comment_author": "eggerand13", "commentT": "2019-08-28T17:33:42Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/d3x0r>@d3x0r</denchmark-link>\n  thank you,There is no plan for supporting OpenCL  but it depends on overall TF Project , you can follow the discussion <denchmark-link:https://github.com/tensorflow/tensorflow/issues/22>here</denchmark-link>\n .\n CC <denchmark-link:https://github.com/tafsiri>@tafsiri</denchmark-link>\n \n \t\t"}, "comments_18": {"comment_id": 19, "comment_author": "eggerand13", "commentT": "2019-08-28T19:58:28Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/kangyizhang>@kangyizhang</denchmark-link>\n  Thanks.\n <denchmark-link:https://github.com/eggerand13>@eggerand13</denchmark-link>\n  reinstall\n npm uninstall @tensorflow/tfjs-node-gpu\n npm uninstall @tensorflow/tfjs-node\n npm update\n npm install @tensorflow/tfjs-node@1.2.7\n npm install @tensorflow/tfjs-node-gpu@1.2.7\n \t\t"}, "comments_19": {"comment_id": 20, "comment_author": "eggerand13", "commentT": "2019-09-02T04:36:40Z", "comment_text": "\n \t\tI still get the above error when I use version 1.2.7\n I get a very similar error when I use version 1.2.6\n Is there another workaround?\n \t\t"}, "comments_20": {"comment_id": 21, "comment_author": "eggerand13", "commentT": "2019-09-06T22:08:02Z", "comment_text": "\n \t\tI'm also getting this issue using tfjs-node-gpu 1.2.9. tfjs-node also fails but with a different error. I tried older versions but they wont work either.\n <denchmark-code>Cannot find module 'd:\\development\\node_modules\\@tensorflow\\tfjs-node-gpu\\lib\\napi-v4\\tfjs_binding.node'\n     at Function.Module._resolveFilename (internal/modules/cjs/loader.js:636:15)\n     at Function.Module._load (internal/modules/cjs/loader.js:562:25)\n     at Module.require (internal/modules/cjs/loader.js:692:17)\n     at require (internal/modules/cjs/helpers.js:25:18)\n     at Object.<anonymous> (d:\\development\\node_modules\\@tensorflow\\tfjs-node-gpu\\dist\\index.js:44:16)\n     at Module._compile (internal/modules/cjs/loader.js:778:30)\n     at Object.Module._extensions..js (internal/modules/cjs/loader.js:789:10)\n     at Module.load (internal/modules/cjs/loader.js:653:32)\n     at tryModuleLoad (internal/modules/cjs/loader.js:593:12)\n     at Function.Module._load (internal/modules/cjs/loader.js:585:3)\n </denchmark-code>\n \n \t\t"}, "comments_21": {"comment_id": 22, "comment_author": "eggerand13", "commentT": "2019-09-06T22:34:50Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/nnt0>@nnt0</denchmark-link>\n  I can not reproduce this error on my machine. Can you try the following:\n \n remove node_module and reinstall the packages.\n if it's still not working, can you check what's in path d:\\development\\node_modules\\@tensorflow\\tfjs-node-gpu\\lib\n go to d:\\development\\node_modules\\@tensorflow\\tfjs-node-gpu and run yarn or npm install\n \n also what's the error you see for tfjs-node?\n \t\t"}, "comments_22": {"comment_id": 23, "comment_author": "eggerand13", "commentT": "2019-09-06T22:53:48Z", "comment_text": "\n \t\tThanks for the fast reply.\n I deleted the node_modules folder and reinstalled everything.\n Since i still got the same error i checked the path you gave me and found out that the lib folder doesn't even exist.\n I ran npm install in d:\\development\\node_modules\\@tensorflow\\tfjs-node-gpu and got this output\n <denchmark-code>> @tensorflow/tfjs-node-gpu@1.2.9 install D:\\development\\node_modules\\@tensorflow\\tfjs-node-gpu\n > node scripts/install.js gpu download\n \n GPU-windows-1.2.9.zip\n * Downloading libtensorflow\n [==============================] 10903954/bps 100% 0.0s\n (node:25632) UnhandledPromiseRejectionWarning: RangeError: Array buffer allocation failed\n     at new ArrayBuffer (<anonymous>)\n     at new Uint8Array (<anonymous>)\n     at new FastBuffer (buffer.js:79:1)\n     at Function.alloc (buffer.js:283:10)\n     at decompress (D:\\development\\node_modules\\@tensorflow\\tfjs-node-gpu\\node_modules\\adm-zip\\zipEntry.js:56:27)\n     at Object.getData (D:\\development\\node_modules\\@tensorflow\\tfjs-node-gpu\\node_modules\\adm-zip\\zipEntry.js:242:12)\n     at D:\\development\\node_modules\\@tensorflow\\tfjs-node-gpu\\node_modules\\adm-zip\\adm-zip.js:438:25\n     at Array.forEach (<anonymous>)\n     at Object.extractAllTo (D:\\development\\node_modules\\@tensorflow\\tfjs-node-gpu\\node_modules\\adm-zip\\adm-zip.js:432:17)\n     at WriteStream.response.on.pipe.on (D:\\development\\node_modules\\@tensorflow\\tfjs-node-gpu\\scripts\\resources.js:70:21)\n (node:25632) UnhandledPromiseRejectionWarning: Unhandled promise rejection. This error originated either by throwing inside of an async function without a catch block, or by rejecting a promise which was not handled with .catch(). (rejection id: 1)\n (node:25632) [DEP0018] DeprecationWarning: Unhandled promise rejections are deprecated. In the future, promise rejections that are not handled will terminate the Node.js process with a non-zero exit code.\n npm WARN @tensorflow/tfjs-node-gpu@1.2.9 No license field.\n \n audited 732 packages in 25.007s\n found 2 high severity vulnerabilities\n   run `npm audit fix` to fix them, or `npm audit` for details\n </denchmark-code>\n \n The error i'm getting for tfjs-node is this\n <denchmark-code>Error: \\\\?\\d:\\development\\node_modules\\@tensorflow\\tfjs-node\\lib\\napi-v4\\tfjs_binding.node is not a valid Win32 application.\n \\\\?\\d:\\development\\node_modules\\@tensorflow\\tfjs-node\\lib\\napi-v4\\tfjs_binding.node\n     at Object.Module._extensions..node (internal/modules/cjs/loader.js:807:18)\n     at Module.load (internal/modules/cjs/loader.js:653:32)\n     at tryModuleLoad (internal/modules/cjs/loader.js:593:12)\n     at Function.Module._load (internal/modules/cjs/loader.js:585:3)\n     at Module.require (internal/modules/cjs/loader.js:692:17)\n     at require (internal/modules/cjs/helpers.js:25:18)\n     at Object.<anonymous> (d:\\development\\node_modules\\@tensorflow\\tfjs-node\\dist\\index.js:44:16)\n     at Module._compile (internal/modules/cjs/loader.js:778:30)\n     at Object.Module._extensions..js (internal/modules/cjs/loader.js:789:10)\n     at Module.load (internal/modules/cjs/loader.js:653:32)\n </denchmark-code>\n \n \t\t"}, "comments_23": {"comment_id": 24, "comment_author": "eggerand13", "commentT": "2019-09-06T23:19:49Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/nnt0>@nnt0</denchmark-link>\n \n For the tfjs-node-gpu error, it seems like your computer does not have enough memory for unzipping the libtensorflow file. Can you clean up your memory and try again? Also can you check what's in the D:\\development\\node_modules\\@tensorflow\\tfjs-node-gpu\\deps folder?\n For the tfjs-node error, it seems like a prefix  is added in . If you just print out  in a nodejs process, what's the result? <denchmark-link:https://github.com/mapbox/node-pre-gyp#3-dynamically-require-your-node>This</denchmark-link>\n  is why I'm asking this.\n \t\t"}, "comments_24": {"comment_id": 25, "comment_author": "eggerand13", "commentT": "2019-09-06T23:47:43Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/kangyizhang>@kangyizhang</denchmark-link>\n \n I reinstalled tfjs-node-gpu while monitoring my ram usage and still got the exact same error and stack trace as before even though my memory usage stayed under 80% the whole time.\n The D:\\development\\node_modules\\@tensorflow\\tfjs-node-gpu\\deps exists but it's completely empty.\n I ran\n <denchmark-code>const path = require(\"path\")\n console.log(path.resolve(path.join(__dirname, \"./package.json\")))\n </denchmark-code>\n \n and got d:\\development\\package.json back.\n \t\t"}, "comments_25": {"comment_id": 26, "comment_author": "eggerand13", "commentT": "2019-09-09T19:02:08Z", "comment_text": "\n \t\thi <denchmark-link:https://github.com/nnt0>@nnt0</denchmark-link>\n  looks like your machine is 32-bit, which is not supported by tensorflow yet: <denchmark-link:https://www.tensorflow.org/install/lang_c#supported_platforms>https://www.tensorflow.org/install/lang_c#supported_platforms</denchmark-link>\n \n \t\t"}, "comments_26": {"comment_id": 27, "comment_author": "eggerand13", "commentT": "2019-09-09T19:06:38Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/kangyizhang>@kangyizhang</denchmark-link>\n \n I'm very sure that this isn't the issue especially since i am running Windows 10 64 bit.\n \t\t"}, "comments_27": {"comment_id": 28, "comment_author": "eggerand13", "commentT": "2019-09-09T19:15:46Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/eggerand13>@eggerand13</denchmark-link>\n  the prefix  in the addon path is because of the space in your path (the project is in folder ). Space in path is not supported by the binding tool node-gyp. Please try to move it to a folder without space and let me know if the error still exist.\n \t\t"}, "comments_28": {"comment_id": 29, "comment_author": "eggerand13", "commentT": "2019-09-09T19:27:33Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/nnt0>@nnt0</denchmark-link>\n \n For GPU, it seems like the process failed to unzip the libtensorflow, which is 200+ MB. I can not tell or reproduce the root cause of Array buffer allocation failed, but most likely it relates to memory exhausted. I would recommend you to monitor the memory used by node process, and see is there any patterns.\n For CPU error, it looks like node.js kernel is trying to load the addon as Win32 application.Can you try to run node -p \"process.arch\"?\n \t\t"}, "comments_29": {"comment_id": 30, "comment_author": "eggerand13", "commentT": "2019-09-09T20:48:11Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/kangyizhang>@kangyizhang</denchmark-link>\n \n Okay, i ran node -p \"process.arch\" and got ia32 back. I then reinstalled Node.js 64 bit, ran the command again and got x64 back. I guess i must have accidentally installed a 32 bit version of node at some point.\n I then reinstalled tfjs-node as well as tfjs-node-gpu which completed without any error.\n But trying to run either still produced errors. After some testing i found out that everything worked fine in a different directory. After some more testing i found out that a - that i had in a part of a directory caused it to fail. Once i removed the - from the directory everything ran fine.\n I am a bit confused about how exactly this - caused everything to fail. I've used the same directory with tfjs-node 1.2.1 a while back and it didn't cause any errors.\n Anyhow, thank you very much for helping me figure this out.\n \t\t"}, "comments_30": {"comment_id": 31, "comment_author": "eggerand13", "commentT": "2019-09-09T21:58:58Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/nnt0>@nnt0</denchmark-link>\n  Glad to hear it works and thank you for update your investigation.\n We were using  as the binding tool previously, and switched to  after 1.2.4 to avoid compiling issues on user's machine (the issues in the <denchmark-link:https://github.com/tensorflow/tfjs/blob/master/tfjs-node/WINDOWS_TROUBLESHOOTING.md>WINDOWS_TROUBLESHOOTING doc</denchmark-link>\n ). It may be related with path resolving in the  package. Though I tried with  and/or space in the directory name on my machine, I can not reproduce it.\n I am gonna close this issue, but feel free to reopen/update if you have any issue.\n \t\t"}, "comments_31": {"comment_id": 32, "comment_author": "eggerand13", "commentT": "2019-09-24T12:43:46Z", "comment_text": "\n \t\tsame issue on windows :  \"@tensorflow/tfjs-node-gpu\": \"^1.2.9\", this line is from my package.json\n \t\t"}, "comments_32": {"comment_id": 33, "comment_author": "eggerand13", "commentT": "2019-09-24T17:12:41Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/AionDev>@AionDev</denchmark-link>\n  did you install the <denchmark-link:https://www.tensorflow.org/install/gpu>NVIDIA software</denchmark-link>\n  for gpu support (CUDA and cuDNN)? Misconfigured gpu software has been the reason for most of the errors.\n \t\t"}, "comments_33": {"comment_id": 34, "comment_author": "eggerand13", "commentT": "2019-11-03T13:58:16Z", "comment_text": "\n \t\tHey, I've managed to remove all the console issues while npm install by doing the following:\n \n Remove node_modules/\n npm install -g yarn // because it is required to install some packages\n Install python 2.7\n Install Visual Studio + Desktop development with c++\n restart your PC\n npm install @tensorflow/tfjs-node-gpu @tensorflow/tfjs\n \n Problem went away after doing that.\n \t\t"}}}, "commit": {"commit_id": "e64920f04ec3838d15153449898bcb52a8c94712", "commit_author": "Kangyi Zhang", "commitT": "2019-08-27 14:07:39-07:00", "commit_complexity": {"commit_NLOC": "1.0", "commit_CCN": "1.0", "commit_Nprams": "1.0"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 6, "file_old_name": "tfjs-node\\scripts\\install.js", "file_new_name": "tfjs-node\\scripts\\install.js", "file_complexity": {"file_NLOC": "148", "file_CCN": "34", "file_NToken": "831"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "146,147,148,149,150,151,152,153,154,155,156,157,159,160,161,163,164,165,166,167,169,170,171,172,173,174,175,176,177,178,179,180,182", "deleted_lines": "148,149,150,151,152,153,154,155,156,157,158,159,161,162,163,165,166,167,168,169,171,172,173,174,175,176,177,178,179,180,181", "method_info": {"method_name": "(anonymous)", "method_params": "", "method_startline": "146", "method_endline": "182", "method_complexity": {"method_NLOC": "22", "method_CCN": "6", "method_NToken": "122", "method_nesting_level": "0"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "61,62", "deleted_lines": null, "method_info": {"method_name": "setPackageJsonFile", "method_params": "", "method_startline": "60", "method_endline": "63", "method_complexity": {"method_NLOC": "4", "method_CCN": "1", "method_NToken": "22", "method_nesting_level": "0"}}}, "hunk_2": {"Ismethod": 1, "added_lines": "94", "deleted_lines": "96", "method_info": {"method_name": "getPlatformLibtensorflowUri", "method_params": "", "method_startline": "88", "method_endline": "116", "method_complexity": {"method_NLOC": "27", "method_CCN": "7", "method_NToken": "115", "method_nesting_level": "0"}}}, "hunk_3": {"Ismethod": 1, "added_lines": null, "deleted_lines": "220", "method_info": {"method_name": "run", "method_params": "", "method_startline": "206", "method_endline": "221", "method_complexity": {"method_NLOC": "11", "method_CCN": "3", "method_NToken": "50", "method_nesting_level": "0"}}}, "hunk_4": {"Ismethod": 1, "added_lines": "146,147,148,149,150,151,152,153,154,155,156,157,159,160,161,163,164,165,166,167,169,170,171,172,173,174,175,176,177,178,179,180,182", "deleted_lines": "148,149,150,151,152,153,154,155,156,157,158,159,161,162,163,165,166,167,168,169,171,172,173,174,175,176,177,178,179,180,181,183", "method_info": {"method_name": "downloadLibtensorflow", "method_params": "callback", "method_startline": "140", "method_endline": "183", "method_complexity": {"method_NLOC": "6", "method_CCN": "1", "method_NToken": "35", "method_nesting_level": "0"}}}, "hunk_5": {"Ismethod": 1, "added_lines": "198", "deleted_lines": null, "method_info": {"method_name": "build", "method_params": "", "method_startline": "188", "method_endline": "200", "method_complexity": {"method_NLOC": "4", "method_CCN": "1", "method_NToken": "24", "method_nesting_level": "0"}}}}}}}}