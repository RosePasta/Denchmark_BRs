{"BR": {"BR_id": "9019", "BR_author": "typhoonzero", "BRopenT": "2018-03-13T06:37:03Z", "BRcloseT": "2018-03-14T02:38:01Z", "BR_text": {"BRsummary": "Develop branch fluid distribute transpiler error: KeyError: u'learning_rate_0'", "BRdescription": "\n Test to run: <denchmark-link:https://github.com/PaddlePaddle/Paddle/blob/develop/python/paddle/fluid/tests/book/test_recognize_digits.py>https://github.com/PaddlePaddle/Paddle/blob/develop/python/paddle/fluid/tests/book/test_recognize_digits.py</denchmark-link>\n \n <denchmark-code>Traceback (most recent call last):\n   File \"dist_test.py\", line 281, in <module>\n     main(False, False, \"conv\", False)\n   File \"dist_test.py\", line 237, in main\n     params_filename=params_filename)\n   File \"dist_test.py\", line 177, in train\n     pserver_prog = t.get_pserver_program(current_endpoint)\n   File \"/paddle/build/python/build/lib-python/paddle/fluid/distribute_transpiler.py\", line 312, in get_pserver_program\n     self._append_pserver_ops(optimize_block, op, endpoint)\n   File \"/paddle/build/python/build/lib-python/paddle/fluid/distribute_transpiler.py\", line 579, in _append_pserver_ops\n     new_inputs[key] = pserver_block.vars[opt_op.input(key)[0]]\n KeyError: u'learning_rate_0'\n </denchmark-code>\n \n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "typhoonzero", "commentT": "2018-03-13T06:47:39Z", "comment_text": "\n \t\tI'm checking it now!\n \t\t"}}}, "commit": {"commit_id": "d13ce3587559c5553f05d75789269a0dff49734f", "commit_author": "\u6b66\u6bc5", "commitT": "2018-03-14 10:38:01+08:00", "commit_complexity": {"commit_NLOC": "1.0", "commit_CCN": "1.0", "commit_Nprams": "1.0"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 4, "file_old_name": "paddle\\fluid\\operators\\detail\\grpc_client.cc", "file_new_name": "paddle\\fluid\\operators\\detail\\grpc_client.cc", "file_complexity": {"file_NLOC": "145", "file_CCN": "16", "file_NToken": "1138"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "187,188", "deleted_lines": null, "method_info": {"method_name": "paddle::operators::detail::RPCClient::GetChannel", "method_params": "ep", "method_startline": "180", "method_endline": "197", "method_complexity": {"method_NLOC": "15", "method_CCN": "2", "method_NToken": "121", "method_nesting_level": "3"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "167", "deleted_lines": "157", "method_info": {"method_name": "paddle::operators::detail::RPCClient::Proceed", "method_params": "", "method_startline": "153", "method_endline": "178", "method_complexity": {"method_NLOC": "20", "method_CCN": "3", "method_NToken": "128", "method_nesting_level": "3"}}}, "hunk_2": {"Ismethod": 1, "added_lines": "100,111", "deleted_lines": "100", "method_info": {"method_name": "paddle::operators::detail::RPCClient::AsyncSendBatchBarrier", "method_params": "ep,time_out", "method_startline": "100", "method_endline": "111", "method_complexity": {"method_NLOC": "10", "method_CCN": "1", "method_NToken": "101", "method_nesting_level": "3"}}}, "hunk_3": {"Ismethod": 1, "added_lines": "113,114,115,116,117,118,119,120,121,122", "deleted_lines": null, "method_info": {"method_name": "paddle::operators::detail::RPCClient::AsyncSendFetchBarrier", "method_params": "ep,time_out", "method_startline": "113", "method_endline": "123", "method_complexity": {"method_NLOC": "10", "method_CCN": "1", "method_NToken": "101", "method_nesting_level": "3"}}}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 10, "file_old_name": "paddle\\fluid\\operators\\detail\\grpc_client.h", "file_new_name": "paddle\\fluid\\operators\\detail\\grpc_client.h", "file_complexity": {"file_NLOC": "132", "file_CCN": "19", "file_NToken": "779"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "62", "deleted_lines": "62", "method_info": {"method_name": "paddle::operators::detail::ClientBase::~ClientBase", "method_params": "", "method_startline": "62", "method_endline": "62", "method_complexity": {"method_NLOC": "1", "method_CCN": "1", "method_NToken": "5", "method_nesting_level": "4"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "57", "deleted_lines": "57", "method_info": {"method_name": "paddle::operators::detail::ClientBase::ClientBase", "method_params": "ch", "method_startline": "57", "method_endline": "60", "method_complexity": {"method_NLOC": "4", "method_CCN": "1", "method_NToken": "29", "method_nesting_level": "4"}}}, "hunk_2": {"Ismethod": 1, "added_lines": "96,97", "deleted_lines": "96", "method_info": {"method_name": "paddle::operators::detail::SendProcessor::SendProcessor", "method_params": "ch", "method_startline": "96", "method_endline": "97", "method_complexity": {"method_NLOC": "2", "method_CCN": "1", "method_NToken": "19", "method_nesting_level": "4"}}}, "hunk_3": {"Ismethod": 1, "added_lines": "147", "deleted_lines": null, "method_info": {"method_name": "paddle::operators::detail::FetchBarrierProcessor::~FetchBarrierProcessor", "method_params": "", "method_startline": "147", "method_endline": "147", "method_complexity": {"method_NLOC": "1", "method_CCN": "1", "method_NToken": "5", "method_nesting_level": "4"}}}, "hunk_4": {"Ismethod": 1, "added_lines": "116,117", "deleted_lines": null, "method_info": {"method_name": "paddle::operators::detail::GetProcessor::GetProcessor", "method_params": "ch", "method_startline": "116", "method_endline": "117", "method_complexity": {"method_NLOC": "2", "method_CCN": "1", "method_NToken": "19", "method_nesting_level": "4"}}}, "hunk_5": {"Ismethod": 1, "added_lines": "134", "deleted_lines": null, "method_info": {"method_name": "paddle::operators::detail::BatchBarrierProcessor::BatchBarrierProcessor", "method_params": "ch", "method_startline": "133", "method_endline": "134", "method_complexity": {"method_NLOC": "2", "method_CCN": "1", "method_NToken": "19", "method_nesting_level": "4"}}}, "hunk_6": {"Ismethod": 1, "added_lines": "57", "deleted_lines": "57", "method_info": {"method_name": "paddle::operators::detail::BaseProcessor::BaseProcessor", "method_params": "ch", "method_startline": "57", "method_endline": "60", "method_complexity": {"method_NLOC": "4", "method_CCN": "1", "method_NToken": "29", "method_nesting_level": "4"}}}, "hunk_7": {"Ismethod": 1, "added_lines": "149", "deleted_lines": null, "method_info": {"method_name": "paddle::operators::detail::FetchBarrierProcessor::Process", "method_params": "", "method_startline": "149", "method_endline": "149", "method_complexity": {"method_NLOC": "1", "method_CCN": "1", "method_NToken": "5", "method_nesting_level": "4"}}}, "hunk_8": {"Ismethod": 1, "added_lines": "62", "deleted_lines": "62", "method_info": {"method_name": "paddle::operators::detail::BaseProcessor::~BaseProcessor", "method_params": "", "method_startline": "62", "method_endline": "62", "method_complexity": {"method_NLOC": "1", "method_CCN": "1", "method_NToken": "5", "method_nesting_level": "4"}}}, "hunk_9": {"Ismethod": 1, "added_lines": "144,145", "deleted_lines": null, "method_info": {"method_name": "paddle::operators::detail::FetchBarrierProcessor::FetchBarrierProcessor", "method_params": "ch", "method_startline": "144", "method_endline": "145", "method_complexity": {"method_NLOC": "2", "method_CCN": "1", "method_NToken": "19", "method_nesting_level": "4"}}}}}, "file_2": {"file_change_type": "MODIFY", "file_Nmethod": 4, "file_old_name": "paddle\\fluid\\operators\\detail\\grpc_server.cc", "file_new_name": "paddle\\fluid\\operators\\detail\\grpc_server.cc", "file_complexity": {"file_NLOC": "201", "file_CCN": "35", "file_NToken": "1385"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "126,127,128,129,130,131", "deleted_lines": null, "method_info": {"method_name": "paddle::operators::detail::AsyncGRPCServer::WaitClientGet", "method_params": "count", "method_startline": "125", "method_endline": "133", "method_complexity": {"method_NLOC": "9", "method_CCN": "3", "method_NToken": "44", "method_nesting_level": "3"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "87", "deleted_lines": "87", "method_info": {"method_name": "paddle::operators::detail::RequestGet::RequestGet", "method_params": "service,cq,scope,dev_ctx,queue", "method_startline": "84", "method_endline": "94", "method_complexity": {"method_NLOC": "11", "method_CCN": "1", "method_NToken": "86", "method_nesting_level": "4"}}}, "hunk_2": {"Ismethod": 1, "added_lines": "87", "deleted_lines": "87", "method_info": {"method_name": "paddle::operators::detail::RequestGet::RequestGet", "method_params": "service,cq,scope,dev_ctx,queue", "method_startline": "84", "method_endline": "94", "method_complexity": {"method_NLOC": "11", "method_CCN": "1", "method_NToken": "86", "method_nesting_level": "4"}}}, "hunk_3": {"Ismethod": 1, "added_lines": "104,105,106,110,111,112,113", "deleted_lines": "104,108", "method_info": {"method_name": "paddle::operators::detail::RequestGet::Process", "method_params": "", "method_startline": "100", "method_endline": "114", "method_complexity": {"method_NLOC": "12", "method_CCN": "2", "method_NToken": "91", "method_nesting_level": "4"}}}}}, "file_3": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "paddle\\fluid\\operators\\detail\\grpc_server.h", "file_new_name": "paddle\\fluid\\operators\\detail\\grpc_server.h", "file_complexity": {"file_NLOC": "55", "file_CCN": "5", "file_NToken": "340"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "80", "deleted_lines": "80"}}}, "file_4": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "paddle\\fluid\\operators\\detail\\sendrecvop_utils.h", "file_new_name": "paddle\\fluid\\operators\\detail\\sendrecvop_utils.h", "file_complexity": {"file_NLOC": "45", "file_CCN": "6", "file_NToken": "249"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "35", "deleted_lines": null}}}, "file_5": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "paddle\\fluid\\operators\\listen_and_serv_op.cc", "file_new_name": "paddle\\fluid\\operators\\listen_and_serv_op.cc", "file_complexity": {"file_NLOC": "147", "file_CCN": "18", "file_NToken": "895"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "132,151", "deleted_lines": "131,151", "method_info": {"method_name": "paddle::operators::ListenAndServOp::RunImpl", "method_params": "scope,dev_place", "method_startline": "78", "method_endline": "154", "method_complexity": {"method_NLOC": "62", "method_CCN": "10", "method_NToken": "444", "method_nesting_level": "3"}}}}}, "file_6": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "paddle\\fluid\\operators\\send_op.cc", "file_new_name": "paddle\\fluid\\operators\\send_op.cc", "file_complexity": {"file_NLOC": "120", "file_CCN": "14", "file_NToken": "874"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "91,92,93,94,95,96", "deleted_lines": null, "method_info": {"method_name": "paddle::operators::SendOp::RunImpl", "method_params": "scope,place", "method_startline": "51", "method_endline": "98", "method_complexity": {"method_NLOC": "42", "method_CCN": "7", "method_NToken": "421", "method_nesting_level": "3"}}}}}, "file_7": {"file_change_type": "MODIFY", "file_Nmethod": 4, "file_old_name": "python\\paddle\\fluid\\distribute_transpiler.py", "file_new_name": "python\\paddle\\fluid\\distribute_transpiler.py", "file_complexity": {"file_NLOC": "525", "file_CCN": "85", "file_NToken": "3555"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "253,254", "deleted_lines": null, "method_info": {"method_name": "get_trainer_program", "method_params": "self", "method_startline": "250", "method_endline": "255", "method_complexity": {"method_NLOC": "4", "method_CCN": "1", "method_NToken": "30", "method_nesting_level": "1"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "526,527,583,584,585,586,587,588,589,590,591,592,593", "deleted_lines": "523,579", "method_info": {"method_name": "_append_pserver_ops", "method_params": "self,optimize_block,opt_op,endpoint", "method_startline": "523", "method_endline": "606", "method_complexity": {"method_NLOC": "71", "method_CCN": "16", "method_NToken": "499", "method_nesting_level": "1"}}}, "hunk_2": {"Ismethod": 1, "added_lines": "526,527", "deleted_lines": null, "method_info": {"method_name": "_append_pserver_ops", "method_params": "self,optimize_block,opt_op,endpoint,origin_program", "method_startline": "526", "method_endline": "527", "method_complexity": {"method_NLOC": "2", "method_CCN": "1", "method_NToken": "13", "method_nesting_level": "1"}}}, "hunk_3": {"Ismethod": 1, "added_lines": "314,315", "deleted_lines": "312", "method_info": {"method_name": "get_pserver_program", "method_params": "self,endpoint", "method_startline": "257", "method_endline": "330", "method_complexity": {"method_NLOC": "49", "method_CCN": "12", "method_NToken": "343", "method_nesting_level": "1"}}}}}}}}