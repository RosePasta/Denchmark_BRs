{"BR": {"BR_id": "243", "BR_author": "alvations", "BRopenT": "2016-10-25T07:17:45Z", "BRcloseT": "2016-10-28T04:51:35Z", "BR_text": {"BRsummary": "seqToseq translation demo", "BRdescription": "\n This is a strange bug where the model has to be saved under a subdirectory within Paddle/demo/seqToseq/translation and cannot be saved onto the Paddle/demo/seqToseq/ dynamically:\n E.g. if i want the save the model directory to , then <denchmark-link:https://github.com/baidu/Paddle/blob/master/demo/seqToseq/translation/train.sh>train.sh</denchmark-link>\n  from the demo works.\n Also, if i use a static full path, e.g. /path/to/model/ the model saves properly too, i.e.\n <denchmark-code>paddle train \\\n --config='translation/train.conf' \\\n --save_dir='/path/to/model/' \\\n --use_gpu=false \\\n --num_passes=16 \\\n --show_parameter_stats_period=100 \\\n --trainer_count=4 \\\n --log_period=10 \\\n --dot_period=5 \\\n 2>&1 | tee 'translation/train.log'\n </denchmark-code>\n \n But if i use the same path as Paddle/demo/seqToseq/, Paddle will throw the error after the first epoch:\n <denchmark-code>I1025 15:11:11.968819  3359 TrainerInternal.cpp:163]  Batch=200 samples=10000 AvgCost=54.3925 CurrentCost=47.7486 Eval: classification_error_evaluator=0.822107  CurrentEval: classification_error_evaluator=0.756779 \n I1025 15:11:11.968868  3359 TrainerInternal.cpp:180]  Pass=0 Batch=200 samples=10000 AvgCost=54.3925 Eval: classification_error_evaluator=0.822107 \n I1025 15:11:37.395536  3359 Tester.cpp:111]  Test samples=50000 cost=48.2543 Eval: classification_error_evaluator=0.758948 \n /home/ltan/Paddle/binary/bin/paddle: line 81:  3359 Segmentation fault      (core dumped) ${DEBUGGER} $MYDIR/../opt/paddle/bin/paddle_trainer ${@:2}\n </denchmark-code>\n \n To replicate the error above, change <denchmark-link:https://github.com/baidu/Paddle/blob/master/demo/seqToseq/translation/train.sh#L20>this line</denchmark-link>\n  in  to :\n <denchmark-code>--save_dir='model' \\\n </denchmark-code>\n \n It's a rather odd bug, although it can be simply solved by using fullpath, i.e.:\n <denchmark-code>--save_dir='/home/ltan/Paddle/demo/seqToseq/model' \\\n </denchmark-code>\n \n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "alvations", "commentT": "2016-10-25T09:27:27Z", "comment_text": "\n \t\tTrying to reproduce this bug.\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "alvations", "commentT": "2016-10-26T09:53:20Z", "comment_text": "\n \t\tI have already reproduced this bug.\n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "alvations", "commentT": "2016-10-28T04:53:07Z", "comment_text": "\n \t\tThis code is merged in our develop branch, and the next release is <denchmark-link:https://github.com/baidu/Paddle/milestone/1>milestone 0.8.1</denchmark-link>\n .\n \t\t"}}}, "commit": {"commit_id": "ca5a5ec480db806674043311b2c59fd318ad4f41", "commit_author": "luotao1", "commitT": "2016-10-28 12:51:35+08:00", "commit_complexity": {"commit_NLOC": "0.0", "commit_CCN": "1.0", "commit_Nprams": "1.0"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "paddle\\trainer\\ParamUtil.cpp", "file_new_name": "paddle\\trainer\\ParamUtil.cpp", "file_complexity": {"file_NLOC": "122", "file_CCN": "21", "file_NToken": "820"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "92,93,94", "deleted_lines": null, "method_info": {"method_name": "paddle::ParameterUtil::saveParameters", "method_params": "passId,passInnerId", "method_startline": "82", "method_endline": "115", "method_complexity": {"method_NLOC": "31", "method_CCN": "5", "method_NToken": "225", "method_nesting_level": "1"}}}}}}}}