{"BR": {"BR_id": "11522", "BR_author": "kolinwei", "BRopenT": "2018-06-15T11:09:45Z", "BRcloseT": "2018-06-25T03:45:20Z", "BR_text": {"BRsummary": "se-resnet\u6a21\u578b\u8bad\u7ec3imagent\u6570\u636e\uff0c2ps\u30014trainer\uff0c\u8bad\u7ec3\u5b8c1\u4e2apass\u540etrain\u8fde\u4e0d\u4e0aps", "BRdescription": "\n ps\u5b9e\u9645\u4e0a\u8fd8\u5728\u8fd0\u884c\u3002\n Pass 0,testbatch 3100,loss 3.85814905167,                        acc1 0.1875,acc5 0.4375,time 0.10 sec\n Pass 0,testbatch 3110,loss 4.93263053894,                        acc1 0.0,acc5 0.25,time 0.11 sec\n Pass 0,testbatch 3120,loss 4.12771701813,                        acc1 0.125,acc5 0.5,time 0.11 sec\n End pass 0, train_loss 5.50010538101, train_acc1 0.0622033625841, train_acc5 0.166548013687, test_loss 4.27425519508, test_acc1 0.16096, test_acc5 0.36604\n Pass 1, trainbatch 0, loss 4.62829589844,                        acc1 0.1640625, acc5 0.31640625 time 2.08 sec\n E0615 07:36:18.786679  3867 grpc_client.cc:248] var: name:[fc_18.w_0.block1] ep:[192.168.16.26:5002] grpc error:Deadline Exceeded\n E0615 07:36:18.787700  3867 grpc_client.cc:248] var: name:[fc_15.b_0] ep:[192.168.16.26:5002] grpc error:Deadline Exceeded\n E0615 07:36:18.787750  3867 grpc_client.cc:248] var: name:[fc_6.b_0] ep:[192.168.16.26:5002] grpc error:Deadline Exceeded\n E0615 07:36:18.787788  3867 grpc_client.cc:248] var: name:[fc_30.b_0] ep:[192.168.16.24:5002] grpc error:Deadline Exceeded\n E0615 07:36:18.787829  3867 grpc_client.cc:248] var: name:[fc_9.w_0.block1] ep:[192.168.16.24:5002] grpc error:Deadline Exceeded\n E0615 07:36:18.787865  3867 grpc_client.cc:248] var: name:[conv2d_24.w_0.block0] ep:[192.168.16.24:5002] grpc error:Deadline Exceeded\n E0615 07:36:18.787900  3867 grpc_client.cc:248] var: name:[fc_27.w_0.block1] ep:[192.168.16.24:5002] grpc error:Deadline Exceeded\n E0615 07:36:18.787935  3867 grpc_client.cc:248] var: name:[batch_norm_13.w_0] ep:[192.168.16.24:5002] grpc error:Deadline Exceeded\n E0615 07:36:18.787969  3867 grpc_client.cc:248] var: name:[fc_18.w_0.block0] ep:[192.168.16.24:5002] grpc error:Deadline Exceeded\n E0615 07:36:18.788002  3867 grpc_client.cc:248] var: name:[fc_19.b_0] ep:[192.168.16.24:5002] grpc error:Deadline Exceeded\n E0615 07:36:18.788034  3867 grpc_client.cc:248] var: name:[conv2d_26.w_0.block1] ep:[192.168.16.24:5002] grpc error:Deadline Exceeded\n E0615 07:36:18.788066  3867 grpc_client.cc:248] var: name:[conv2d_50.w_0.block1] ep:[192.168.16.24:5002] grpc error:Deadline Exceeded\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "kolinwei", "commentT": "2018-06-19T12:38:29Z", "comment_text": "\n \t\tpass\u6570\u4e0d\u5b9a\uff0c\u6709\u65f6\u5019\u662f16\u4e2apass \u6709\u65f6\u5019\u662f45\u4e2apass\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "kolinwei", "commentT": "2018-06-20T01:29:30Z", "comment_text": "\n \t\tDup: <denchmark-link:https://github.com/PaddlePaddle/Paddle/issues/11200>#11200</denchmark-link>\n \n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "kolinwei", "commentT": "2018-06-21T07:54:16Z", "comment_text": "\n \t\tSome errors need to be noticed, this error is from: <denchmark-link:https://github.com/PaddlePaddle/Paddle/blob/develop/paddle/fluid/operators/distributed/grpc_server.cc#L332>https://github.com/PaddlePaddle/Paddle/blob/develop/paddle/fluid/operators/distributed/grpc_server.cc#L332</denchmark-link>\n \n As explained here in : <denchmark-link:https://groups.google.com/forum/#!topic/grpc-io/xftlRy-IQwM>https://groups.google.com/forum/#!topic/grpc-io/xftlRy-IQwM</denchmark-link>\n , seems the client has timeouted or caceled the request, we may need to add retry to prevent this? <denchmark-link:https://github.com/Yancey1989>@Yancey1989</denchmark-link>\n  <denchmark-link:https://github.com/gongweibao>@gongweibao</denchmark-link>\n  what do you think?\n <denchmark-code>W0618 03:01:25.201833   403 grpc_server.cc:331] completion queue:RequestGet recv no regular event:argument name[batch_norm_0.b_0]\n I0618 03:01:25.201833   401 grpc_server.cc:339] queue id:RequestGet, req_id:71, status:1\n W0618 03:01:25.201840   402 grpc_server.cc:331] completion queue:RequestGet recv no regular event:argument name[fc_17.w_0.block0]\n I0618 03:01:25.201853   404 grpc_server.cc:315] HandleRequest RequestGet, req_id:13 get next\n W0618 03:01:25.201860   400 grpc_server.cc:331] completion queue:RequestGet recv no regular event:argument name[batch_norm_43.w_0]\n </denchmark-code>\n \n \t\t"}, "comments_3": {"comment_id": 4, "comment_author": "kolinwei", "commentT": "2018-06-22T06:32:45Z", "comment_text": "\n \t\tUpdate:\n \u5206\u6790\u73b0\u573a\u65e5\u5fd7\uff0c\u76ee\u524d\u53ef\u4ee5\u6000\u7591\u53ef\u80fd\u7684\u95ee\u9898\u5728\u4e8egrpc\u5728recv\u7684\u65f6\u5019\u8d85\u65f6\uff0c\u4e4b\u540e\u4ecd\u7136\u4f1a\u6267\u884cfetch_barrier\uff0c\u5bfc\u81f4pserver hung.\n <denchmark-h:hr></denchmark-h>\n \n \u8be5\u73af\u5883\u4e0b\u53d1\u73b0\u53e6\u4e00\u79cd\u590d\u73b0\u65b9\u6cd5\uff1a\n \n \u542f\u52a82\u4e2apserver\uff0c\n \u5148\u542f\u52a84\u4e2atrainer\u4e2d\u76842\u4e2a\n \u7b49\u5f85\u4e00\u6bb5\u65f6\u95f4\uff08\u5927\u7ea6\u51e0\u5206\u949f\uff09\n \u542f\u52a8\u53e6\u5916\u4e24\u4e2atrainer\uff0c\u5728\u7b2c\u4e8c\u4e2abatch\u5c31\u53ef\u4ee5\u590d\u73b0\u8be5\u95ee\u9898\uff0c\u5e76\u4ea7\u751f\u62a5\u9519\uff1a\n \n <denchmark-code>E0622 05:20:31.219917852    4720 chttp2_transport.cc:1148]   Received a GOAWAY with error code ENHANCE_YOUR_CALM and debug data equal to \"too_many_pings\"\n </denchmark-code>\n \n related: <denchmark-link:https://github.com/grpc/grpc-node/issues/138#issuecomment-389962329>grpc/grpc-node#138 (comment)</denchmark-link>\n \n \t\t"}, "comments_4": {"comment_id": 5, "comment_author": "kolinwei", "commentT": "2018-06-25T01:56:27Z", "comment_text": "\n \t\t\u4f7f\u7528 <denchmark-link:https://github.com/PaddlePaddle/Paddle/pull/11651>#11651</denchmark-link>\n  \u8fd0\u884c\u4e863\u5929\u76ee\u524d\u770b\u6ca1\u6709\u95ee\u9898\n \t\t"}}}, "commit": {"commit_id": "acfd177d0c185fcf39d7a8122894e21ca0955cf4", "commit_author": "Wu Yi", "commitT": "2018-06-25 11:45:19+08:00", "commit_complexity": {"commit_NLOC": "0.0", "commit_CCN": "1.0", "commit_Nprams": "1.0"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "cmake\\external\\grpc.cmake", "file_new_name": "cmake\\external\\grpc.cmake", "file_complexity": {"file_NLOC": "None", "file_CCN": "None", "file_NToken": "None"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "43,47,48", "deleted_lines": "43,47,48"}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "paddle\\fluid\\operators\\distributed\\grpc_client.cc", "file_new_name": "paddle\\fluid\\operators\\distributed\\grpc_client.cc", "file_complexity": {"file_NLOC": "220", "file_CCN": "20", "file_NToken": "1742"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "278,280", "deleted_lines": "272", "method_info": {"method_name": "paddle::operators::distributed::GRPCClient::GetChannel", "method_params": "ep", "method_startline": "271", "method_endline": "289", "method_complexity": {"method_NLOC": "16", "method_CCN": "2", "method_NToken": "134", "method_nesting_level": "3"}}}}}, "file_2": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "paddle\\fluid\\operators\\distributed\\grpc_client.h", "file_new_name": "paddle\\fluid\\operators\\distributed\\grpc_client.h", "file_complexity": {"file_NLOC": "164", "file_CCN": "20", "file_NToken": "994"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "89", "deleted_lines": null, "method_info": {"method_name": "paddle::operators::distributed::BaseProcessor::Prepare", "method_params": "time_out", "method_startline": "87", "method_endline": "95", "method_complexity": {"method_NLOC": "7", "method_CCN": "1", "method_NToken": "61", "method_nesting_level": "4"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "79", "deleted_lines": null, "method_info": {"method_name": "paddle::operators::distributed::BaseProcessor::Prepare", "method_params": "var_info,time_out", "method_startline": "76", "method_endline": "85", "method_complexity": {"method_NLOC": "8", "method_CCN": "1", "method_NToken": "70", "method_nesting_level": "4"}}}}}, "file_3": {"file_change_type": "MODIFY", "file_Nmethod": 8, "file_old_name": "paddle\\fluid\\operators\\distributed\\grpc_server.cc", "file_new_name": "paddle\\fluid\\operators\\distributed\\grpc_server.cc", "file_complexity": {"file_NLOC": "288", "file_CCN": "42", "file_NToken": "2187"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "204,207", "deleted_lines": "204,207", "method_info": {"method_name": "paddle::operators::distributed::AsyncGRPCServer::WaitServerReady", "method_params": "", "method_startline": "203", "method_endline": "208", "method_complexity": {"method_NLOC": "6", "method_CCN": "1", "method_NToken": "58", "method_nesting_level": "3"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "246,263", "deleted_lines": "246,263", "method_info": {"method_name": "paddle::operators::distributed::AsyncGRPCServer::StartServer", "method_params": "", "method_startline": "210", "method_endline": "266", "method_complexity": {"method_NLOC": "45", "method_CCN": "7", "method_NToken": "397", "method_nesting_level": "3"}}}, "hunk_2": {"Ismethod": 1, "added_lines": "280", "deleted_lines": "280", "method_info": {"method_name": "paddle::operators::distributed::AsyncGRPCServer::ShutDownImpl", "method_params": "", "method_startline": "275", "method_endline": "282", "method_complexity": {"method_NLOC": "7", "method_CCN": "1", "method_NToken": "42", "method_nesting_level": "3"}}}, "hunk_3": {"Ismethod": 1, "added_lines": "181", "deleted_lines": "181", "method_info": {"method_name": "paddle::operators::distributed::RequestPrefetch::Process", "method_params": "", "method_startline": "177", "method_endline": "194", "method_complexity": {"method_NLOC": "13", "method_CCN": "1", "method_NToken": "118", "method_nesting_level": "4"}}}, "hunk_4": {"Ismethod": 1, "added_lines": "100", "deleted_lines": "100", "method_info": {"method_name": "paddle::operators::distributed::RequestSend::Process", "method_params": "", "method_startline": "98", "method_endline": "108", "method_complexity": {"method_NLOC": "9", "method_CCN": "1", "method_NToken": "74", "method_nesting_level": "4"}}}, "hunk_5": {"Ismethod": 1, "added_lines": "271", "deleted_lines": "271", "method_info": {"method_name": "paddle::operators::distributed::AsyncGRPCServer::ShutdownQueue", "method_params": "", "method_startline": "268", "method_endline": "273", "method_complexity": {"method_NLOC": "6", "method_CCN": "2", "method_NToken": "38", "method_nesting_level": "3"}}}, "hunk_6": {"Ismethod": 1, "added_lines": "288", "deleted_lines": "288", "method_info": {"method_name": "paddle::operators::distributed::AsyncGRPCServer::TryToRegisterNewOne", "method_params": "rpc_name,req_id", "method_startline": "284", "method_endline": "313", "method_complexity": {"method_NLOC": "25", "method_CCN": "5", "method_NToken": "213", "method_nesting_level": "3"}}}, "hunk_7": {"Ismethod": 1, "added_lines": "135", "deleted_lines": "135", "method_info": {"method_name": "paddle::operators::distributed::RequestGet::Process", "method_params": "", "method_startline": "132", "method_endline": "148", "method_complexity": {"method_NLOC": "13", "method_CCN": "2", "method_NToken": "100", "method_nesting_level": "4"}}}}}, "file_4": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "paddle\\fluid\\operators\\distributed\\rpc_client.cc", "file_new_name": "paddle\\fluid\\operators\\distributed\\rpc_client.cc", "file_complexity": {"file_NLOC": "11", "file_CCN": "0", "file_NToken": "45"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "16,17,18,19", "deleted_lines": null}}}, "file_5": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "paddle\\fluid\\operators\\distributed\\rpc_client.h", "file_new_name": "paddle\\fluid\\operators\\distributed\\rpc_client.h", "file_complexity": {"file_NLOC": "56", "file_CCN": "6", "file_NToken": "327"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "18,24,25,38,44,51,53,54,56,57", "deleted_lines": "35,41,48,50,51,53,54,63,64"}}}, "file_6": {"file_change_type": "MODIFY", "file_Nmethod": 3, "file_old_name": "paddle\\fluid\\operators\\distributed\\rpc_server.cc", "file_new_name": "paddle\\fluid\\operators\\distributed\\rpc_server.cc", "file_complexity": {"file_NLOC": "87", "file_CCN": "13", "file_NToken": "574"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "55", "deleted_lines": "54", "method_info": {"method_name": "paddle::operators::distributed::RPCServer::IncreaseBatchBarrier", "method_params": "rpc_name", "method_startline": "54", "method_endline": "64", "method_complexity": {"method_NLOC": "11", "method_CCN": "2", "method_NToken": "75", "method_nesting_level": "3"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "104", "deleted_lines": "103", "method_info": {"method_name": "paddle::operators::distributed::RPCServer::WaitCond", "method_params": "rpc_name", "method_startline": "103", "method_endline": "114", "method_complexity": {"method_NLOC": "11", "method_CCN": "2", "method_NToken": "94", "method_nesting_level": "3"}}}, "hunk_2": {"Ismethod": 1, "added_lines": "50,51", "deleted_lines": "50", "method_info": {"method_name": "paddle::operators::distributed::RPCServer::WaitBarrier", "method_params": "rpc_name", "method_startline": "44", "method_endline": "52", "method_complexity": {"method_NLOC": "8", "method_CCN": "2", "method_NToken": "80", "method_nesting_level": "3"}}}}}, "file_7": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "paddle\\fluid\\operators\\listen_and_serv_op.cc", "file_new_name": "paddle\\fluid\\operators\\listen_and_serv_op.cc", "file_complexity": {"file_NLOC": "285", "file_CCN": "33", "file_NToken": "2229"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": null, "deleted_lines": "167,205", "method_info": {"method_name": "paddle::operators::ListenAndServOp::RunAsyncLoop", "method_params": "executor,program", "method_startline": "165", "method_endline": "214", "method_complexity": {"method_NLOC": "43", "method_CCN": "6", "method_NToken": "362", "method_nesting_level": "2"}}}}}}}}