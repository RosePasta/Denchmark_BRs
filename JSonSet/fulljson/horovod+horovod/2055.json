{"BR": {"BR_id": "2055", "BR_author": "tgaddair", "BRopenT": "2020-06-23T23:12:51Z", "BRcloseT": "2020-07-18T01:54:23Z", "BR_text": {"BRsummary": "PyTorch and MXNet unit tests are missing absolute values", "BRdescription": "\n Unit tests that compare \"actual\" and \"expected\" tensors use a pattern of subtracting one tensor from the other and taking the max values:\n <denchmark-code>max_difference = actual.data.sub(expected).max()\n </denchmark-code>\n \n This difference is then compared against a threshold (for floating point values):\n <denchmark-code>assert max_difference <= threshold, 'hvd.allreduce produces incorrect results'\n </denchmark-code>\n \n However, because this value does not take the absolute value, it is possible that all values are negative, and the \"max value\" reported is also negative, resulting in the test passing when it should fail.\n cc <denchmark-link:https://github.com/romerojosh>@romerojosh</denchmark-link>\n \n \t"}, "comments": {}}, "commit": {"commit_id": "ff48ad86ca20562cb9d5f53db8629ad8ba32e426", "commit_author": "Travis Addair", "commitT": "2020-07-17 18:54:22-07:00", "commit_complexity": {"commit_NLOC": "1.0", "commit_CCN": "1.0", "commit_Nprams": "0.0"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 3, "file_old_name": "test\\test_mxnet.py", "file_new_name": "test\\test_mxnet.py", "file_complexity": {"file_NLOC": "491", "file_CCN": "96", "file_NToken": "4107"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "114,115", "deleted_lines": "83,84,85,86,87,88,108", "method_info": {"method_name": "test_horovod_allreduce_average", "method_params": "self", "method_startline": "83", "method_endline": "115", "method_complexity": {"method_NLOC": "28", "method_CCN": "6", "method_NToken": "229", "method_nesting_level": "1"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "80,81", "deleted_lines": "67,81", "method_info": {"method_name": "test_horovod_allreduce", "method_params": "self", "method_startline": "48", "method_endline": "81", "method_complexity": {"method_NLOC": "27", "method_CCN": "6", "method_NToken": "226", "method_nesting_level": "1"}}}, "hunk_2": {"Ismethod": 1, "added_lines": "147,148", "deleted_lines": "122,123,124,125,126,127,146", "method_info": {"method_name": "test_horovod_allreduce_inplace", "method_params": "self", "method_startline": "117", "method_endline": "148", "method_complexity": {"method_NLOC": "27", "method_CCN": "6", "method_NToken": "224", "method_nesting_level": "1"}}}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 7, "file_old_name": "test\\test_torch.py", "file_new_name": "test\\test_torch.py", "file_complexity": {"file_NLOC": "1297", "file_CCN": "279", "file_NToken": "11415"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "323", "deleted_lines": "285,315", "method_info": {"method_name": "test_horovod_allreduce_multi_gpu", "method_params": "self", "method_startline": "283", "method_endline": "323", "method_complexity": {"method_NLOC": "30", "method_CCN": "8", "method_NToken": "256", "method_nesting_level": "1"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "202", "deleted_lines": "190", "method_info": {"method_name": "test_horovod_allreduce_average", "method_params": "self", "method_startline": "173", "method_endline": "202", "method_complexity": {"method_NLOC": "25", "method_CCN": "7", "method_NToken": "226", "method_nesting_level": "1"}}}, "hunk_2": {"Ismethod": 1, "added_lines": "1577,1578,1579,1580", "deleted_lines": "1572,1573", "method_info": {"method_name": "test_horovod_join_allreduce", "method_params": "self", "method_startline": "1514", "method_endline": "1580", "method_complexity": {"method_NLOC": "52", "method_CCN": "11", "method_NToken": "476", "method_nesting_level": "1"}}}, "hunk_3": {"Ismethod": 1, "added_lines": "1678,1679,1680,1685,1686,1687", "deleted_lines": "1683,1684,1685", "method_info": {"method_name": "test_horovod_sync_batch_norm", "method_params": "self", "method_startline": "1636", "method_endline": "1687", "method_complexity": {"method_NLOC": "42", "method_CCN": "5", "method_NToken": "434", "method_nesting_level": "1"}}}, "hunk_4": {"Ismethod": 1, "added_lines": "171", "deleted_lines": "158", "method_info": {"method_name": "test_horovod_allreduce", "method_params": "self", "method_startline": "140", "method_endline": "171", "method_complexity": {"method_NLOC": "27", "method_CCN": "7", "method_NToken": "247", "method_nesting_level": "1"}}}, "hunk_5": {"Ismethod": 1, "added_lines": "235", "deleted_lines": "204,224", "method_info": {"method_name": "test_horovod_allreduce_inplace", "method_params": "self", "method_startline": "204", "method_endline": "235", "method_complexity": {"method_NLOC": "27", "method_CCN": "7", "method_NToken": "252", "method_nesting_level": "1"}}}, "hunk_6": {"Ismethod": 1, "added_lines": "281", "deleted_lines": "238,271", "method_info": {"method_name": "test_horovod_allreduce_async_fused", "method_params": "self", "method_startline": "237", "method_endline": "281", "method_complexity": {"method_NLOC": "36", "method_CCN": "9", "method_NToken": "305", "method_nesting_level": "1"}}}}}}}}