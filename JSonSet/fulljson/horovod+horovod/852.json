{"BR": {"BR_id": "852", "BR_author": "WangXin93", "BRopenT": "2019-02-22T20:26:43Z", "BRcloseT": "2019-02-22T22:15:02Z", "BR_text": {"BRsummary": "'float' object has no attribute 'detach' in pytorch imagenet example.", "BRdescription": "\n I ran the <denchmark-link:https://github.com/horovod/horovod/blob/master/examples/pytorch_imagenet_resnet50.py>pytorch imagenet example</denchmark-link>\n  but got an error that  number don't have  method. It seems that  lead to the  number, but I don't know how to fix that in  framework.\n Can anyone help me? Thanks a lot!\n <denchmark-code>mpirun -np 4 \\\n   -H localhost:4 \\\n   -bind-to none -map-by slot \\\n   -x NCCL_DEBUG=INFO -x LD_LIBRARY_PATH -x PATH \\\n   -mca pml ob1 -mca btl ^openib \\\n   python main_hvd.py --train-dir /datasets/ILSVRC2012/images/train --val-dir /datasets/ILSVRC2012/images/val\n </denchmark-code>\n \n <denchmark-code>Train Epoch     #1:   0%|          | 0/10010 [00:00<?, ?it/s]Traceback (most recent call last):\n   File \"main_hvd.py\", line 272, in <module>\n     train(epoch)\n   File \"main_hvd.py\", line 179, in train\n     train_loss.update(loss.item())\n   File \"main_hvd.py\", line 263, in update\n     self.sum += hvd.allreduce(val.detach().cpu(), name=self.name)\n AttributeError: 'float' object has no attribute 'detach'\n </denchmark-code>\n \n My environment is:\n \n pytorch==0.4.1\n horovod==0.16.0\n \n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "WangXin93", "commentT": "2019-02-22T20:36:13Z", "comment_text": "\n \t\tSorry about that, it's a bug.  I've submitted <denchmark-link:https://github.com/horovod/horovod/pull/853>#853</denchmark-link>\n  with a fix, meanwhile, you can replace  with .\n \t\t"}}}, "commit": {"commit_id": "ca3c1e38798ddfad56d714eaef6ddcfd14fe6bdf", "commit_author": "Alex Sergeev", "commitT": "2019-02-22 14:15:01-08:00", "commit_complexity": {"commit_NLOC": "None", "commit_CCN": "None", "commit_Nprams": "None"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "examples\\pytorch_imagenet_resnet50.py", "file_new_name": "examples\\pytorch_imagenet_resnet50.py", "file_complexity": {"file_NLOC": "201", "file_CCN": "21", "file_NToken": "1777"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "179", "deleted_lines": "179", "method_info": {"method_name": "train", "method_params": "epoch", "method_startline": "157", "method_endline": "191", "method_complexity": {"method_NLOC": "29", "method_CCN": "5", "method_NToken": "269", "method_nesting_level": "0"}}}}}}}}