{"BR": {"BR_id": "418", "BR_author": "andresfvilla", "BRopenT": "2018-08-02T18:35:55Z", "BRcloseT": "2018-08-02T21:22:29Z", "BR_text": {"BRsummary": "Horovod image build failure", "BRdescription": "\n When attempting to build the horovod docker image following the steps in docker.md, the build fails due to the following error\n <denchmark-code>The following held packages will be changed:\n   libnccl2\n The following packages will be DOWNGRADED:\n   libnccl-dev libnccl2\n E: Packages were downgraded and -y was used without --allow-downgrades.\n 0 upgraded, 40 newly installed, 2 downgraded, 0 to remove and 13 not upgraded.\n The command '/bin/sh -c apt-get update && apt-get install -y --no-install-recommends         build-essential         cmake         git         curl         vim         wget         ca-certificates         libcudnn7=${CUDNN_VERSION}         libnccl2=${NCCL_VERSION}         libnccl-dev=${NCCL_VERSION}         libjpeg-dev         libpng-dev         python${PYTHON_VERSION}         python${PYTHON_VERSION}-dev' returned a non-zero code: 100\n </denchmark-code>\n \n When adding the --allow-downgrades it returns another error\n <denchmark-code>The following held packages will be changed:\n   libnccl2\n The following packages will be DOWNGRADED:\n   libnccl-dev libnccl2\n 0 upgraded, 40 newly installed, 2 downgraded, 0 to remove and 13 not upgraded.\n E: Held packages were changed and -y was used without --allow-change-held-packages.\n The command '/bin/sh -c apt-get update && apt-get install -y --no-install-recommends --allow-downgrades         build-essential \t        cmake \t\t        git \t\t\t        curl \t\t\t\t        vim \t\t\t\t\t        wget \t\t\t\t\t\t        ca-certificates \t\t\t\t\t\t        libcudnn7=${CUDNN_VERSION} \t\t\t\t\t\t\t\t        libnccl2=${NCCL_VERSION} \t\t\t\t\t\t\t\t\t        libnccl-dev=${NCCL_VERSION} \t\t\t\t\t\t\t\t\t\t        libjpeg-dev \t\t\t\t\t\t\t\t\t\t        libpng-dev \t\t\t\t\t\t\t\t\t\t\t\t        python${PYTHON_VERSION}\n </denchmark-code>\n \n it seems it requires --allow-change-held-packages as well but i am not sure if this flag is intended to be used. Is there a new NCCL version that should be used?\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "andresfvilla", "commentT": "2018-08-02T21:16:31Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/andresfvilla>@andresfvilla</denchmark-link>\n , thanks for raising this issue!  It's being addressed in <denchmark-link:https://github.com/horovod/horovod/pull/420>#420</denchmark-link>\n .\n \t\t"}}}, "commit": {"commit_id": "f736be3efddd44aa5e19f8d0b0252b3b1f7fb8da", "commit_author": "Alex Sergeev", "commitT": "2018-08-02 14:22:28-07:00", "commit_complexity": {"commit_NLOC": "None", "commit_CCN": "None", "commit_Nprams": "None"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "Dockerfile", "file_new_name": "Dockerfile", "file_complexity": {"file_NLOC": "None", "file_CCN": "None", "file_NToken": "None"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "7", "deleted_lines": "7"}}}}}}