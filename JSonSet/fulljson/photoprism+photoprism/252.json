{"BR": {"BR_id": "252", "BR_author": "scilaci", "BRopenT": "2020-02-16T22:36:27Z", "BRcloseT": "2020-04-27T12:07:08Z", "BR_text": {"BRsummary": "Indexation - Error 1366: incorrect utf8 value", "BRdescription": "\n Hello,\n I'm using this version\n PhotoPrism version 200207-5fba038-Linux-x86_64\n After indexing, I saw in the logs this type of error :\n index: Error 1366: incorrect utf8 value...\n time=\"2020-02-16T19:40:28Z\" level=warning msg=\"mediafile: no latitude and longitude in metadata\" time=\"2020-02-16T19:40:28Z\" level=info msg=\"index: changed empty photo title to \\\"Unknown / 2017\\\"\" time=\"2020-02-16T19:40:28Z\" level=error msg=\"index: Error 1366: incorrect utf8 value 4844320004000000000000000300000070d833c0c0417fc0(HD2\\x00\\x04\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x03\\x00\\x00\\x00p\\xd83\\xc0\\xc0A\\u007f\\xc0) for column camera_model\" time=\"2020-02-16T19:40:28Z\" level=info msg=\"index: failed main jpg file \\\"Photo/2017/Cambodia/DCIM/100GOPRO/GOPR7877.JPG\\\"\" time=\"2020-02-16T19:40:33Z\" level=error msg=\"camera: Error 1366: incorrect utf8 value 4844320004000000000000000300000070d833c0c0417fc0(HD2\\x00\\x04\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x03\\x00\\x00\\x00p\\xd83\\xc0\\xc0A\\u007f\\xc0) for column camera_model\" time=\"2020-02-16T19:40:33Z\" level=warning msg=\"mediafile: no latitude and longitude in metadata\" time=\"2020-02-16T19:40:33Z\" level=info msg=\"exif: taken at 2017-12-21 05:17:31 +0000 UTC\" time=\"2020-02-16T19:40:33Z\" level=info msg=\"index: changed empty photo title to \\\"Building / 2017\\\"\" time=\"2020-02-16T19:40:33Z\" level=error msg=\"index: Error 1366: incorrect utf8 value 4844320004000000000000000300000070d833c0c0417fc0(HD2\\x00\\x04\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x03\\x00\\x00\\x00p\\xd83\\xc0\\xc0A\\u007f\\xc0) for column camera_model\" time=\"2020-02-16T19:40:33Z\" level=info msg=\"index: failed main jpg file \\\"Photo/2017/Cambodia/DCIM/100GOPRO/GOPR7878.JPG\\\"\" time=\"2020-02-16T19:40:37Z\" level=error msg=\"camera: Error 1366: incorrect utf8 value 4844320004000000000000000300000070d833c0c0417fc0(HD2\\x00\\x04\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x03\\x00\\x00\\x00p\\xd83\\xc0\\xc0A\\u007f\\xc0) for column camera_model\" \n picture:\n <denchmark-link:https://user-images.githubusercontent.com/11696499/74613894-398d2000-5113-11ea-82e5-4587cccf0e6c.JPG></denchmark-link>\n \n What is it?\n How I can control if the picture is imported or not ?\n Or skipped by the error ?\n The database was erased before starting the container\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "scilaci", "commentT": "2020-02-18T22:49:22Z", "comment_text": "\n \t\tLooks like UCS-2 / UTF-16, typically used by Windows and other Microsoft products. Probably happens because I added support for XP* Exif tags. To fix this, we need to convert it to UTF-8. Thank you for the bug report!\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "scilaci", "commentT": "2020-02-18T23:40:09Z", "comment_text": "\n \t\tI sent the original picture in the hello@ photoprism mailbox to reproduce the error\n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "scilaci", "commentT": "2020-02-19T00:30:01Z", "comment_text": "\n \t\tAwesome! Thanks\n \t\t"}, "comments_3": {"comment_id": 4, "comment_author": "scilaci", "commentT": "2020-03-27T07:31:21Z", "comment_text": "\n \t\tIs this fixed?\n \t\t"}}}, "commit": {"commit_id": "4deca6b1ed75f2be73cf7e409f29b81997238c94", "commit_author": "Michael Mayer", "commitT": "2020-02-21 02:15:07+01:00", "commit_complexity": {"commit_NLOC": "0.037037037037037035", "commit_CCN": "0.8888888888888888", "commit_Nprams": "1.0"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "internal\\meta\\exif.go", "file_new_name": "internal\\meta\\exif.go", "file_complexity": {"file_NLOC": "216", "file_CCN": "69", "file_NToken": "1596"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "78,79,80,81,112", "deleted_lines": "108", "method_info": {"method_name": "Exif", "method_params": "string", "method_startline": "19", "method_endline": "293", "method_complexity": {"method_NLOC": "174", "method_CCN": "60", "method_NToken": "1406", "method_nesting_level": "0"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "112", "deleted_lines": "108", "method_info": {"method_name": "", "method_params": "", "method_startline": "84", "method_endline": "117", "method_complexity": {"method_NLOC": "24", "method_CCN": "7", "method_NToken": "144", "method_nesting_level": "0"}}}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "internal\\meta\\exif_test.go", "file_new_name": "internal\\meta\\exif_test.go", "file_complexity": {"file_NLOC": "97", "file_CCN": "10", "file_NToken": "1011"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93", "deleted_lines": null, "method_info": {"method_name": "", "method_params": "", "method_startline": "67", "method_endline": "93", "method_complexity": {"method_NLOC": "23", "method_CCN": "2", "method_NToken": "249", "method_nesting_level": "0"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94", "deleted_lines": null, "method_info": {"method_name": "TestExif", "method_params": "T", "method_startline": "9", "method_endline": "121", "method_complexity": {"method_NLOC": "7", "method_CCN": "1", "method_NToken": "51", "method_nesting_level": "0"}}}}}, "file_2": {"file_change_type": "ADD", "file_Nmethod": 0, "file_old_name": "internal\\meta\\testdata\\gopro_hd2.jpg", "file_new_name": "internal\\meta\\testdata\\gopro_hd2.jpg", "file_complexity": {"file_NLOC": "None", "file_CCN": "None", "file_NToken": "None"}}, "file_3": {"file_change_type": "ADD", "file_Nmethod": 0, "file_old_name": "None", "file_new_name": "internal\\meta\\testdata\\ladybug.xmp", "file_complexity": {"file_NLOC": "None", "file_CCN": "None", "file_NToken": "None"}}}}}