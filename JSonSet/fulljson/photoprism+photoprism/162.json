{"BR": {"BR_id": "162", "BR_author": "baembel08", "BRopenT": "2019-12-17T16:31:32Z", "BRcloseT": "2019-12-19T16:19:30Z", "BR_text": {"BRsummary": "Error while indexing photos with date before 1970", "BRdescription": "\n Hi,\n first of all I want to express big thanks to the work that was done during the last days. Good work!\n I get error messages while indexing pictures\n [35m(/go/src/github.com/photoprism/photoprism/internal/entity/photo_label.go:33)\ufffd[0m\n \ufffd[33m[2019-12-17 16:14:38]\ufffd[0m \ufffd[31;1m Error 1364: Field 'photo_id' doesn't have a default value \ufffd[0m\n \ufffd[35m(/go/src/github.com/photoprism/photoprism/internal/entity/photo_label.go:33)\ufffd[0m\n \ufffd[33m[2019-12-17 16:14:38]\ufffd[0m \ufffd[31;1m Error 1364: Field 'photo_id' doesn't have a default value \ufffd[0m\n \ufffd[35m(/go/src/github.com/photoprism/photoprism/internal/entity/photo_label.go:33)\ufffd[0m\n \ufffd[33m[2019-12-17 16:14:38]\ufffd[0m \ufffd[31;1m Error 1364: Field 'photo_id' doesn't have a default value \ufffd[0m\n \ufffd[35m(/go/src/github.com/photoprism/photoprism/internal/entity/photo_label.go:33)\ufffd[0m\n \ufffd[33m[2019-12-17 16:14:38]\ufffd[0m \ufffd[31;1m Error 1364: Field 'photo_id' doesn't have a default value \ufffd[0m\n \ufffd[35m(/go/src/github.com/photoprism/photoprism/internal/entity/photo_label.go:33)\ufffd[0m\n \ufffd[33m[2019-12-17 16:14:38]\ufffd[0m \ufffd[31;1m Error 1364: Field 'photo_id' doesn't have a default value \ufffd[0m\n Only 4 out of 12 photos were indexed, so the local path should be correctly mapped.\n I'm using  the latest docker image. If you need further information, please ask.\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "baembel08", "commentT": "2019-12-17T16:40:59Z", "comment_text": "\n \t\tDid you create a new database?\n See <denchmark-link:https://twitter.com/browseyourlife/status/1206833437514043393>https://twitter.com/browseyourlife/status/1206833437514043393</denchmark-link>\n \n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "baembel08", "commentT": "2019-12-18T13:13:44Z", "comment_text": "\n \t\tI've started from scratch: latest docker image from yesterday, new container and new import and indexing of photos, but error messages still remain.  When updating the image for existing containers: Can I recreate the database with photoprism migrate command ?\n Is indexing also depending on succcesfull reverse geocoding ?\n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "baembel08", "commentT": "2019-12-18T13:24:50Z", "comment_text": "\n \t\tYou can simply delete the files in the resources/database directory if you use the built-in server. Server should not run while doing this, not sure what happens if it keeps running. Probably panic or will create new files again.\n <denchmark-link:https://user-images.githubusercontent.com/301686/71089583-7d11ef00-21a1-11ea-885c-205398b9a89d.png></denchmark-link>\n \n Maybe an issue with our optimized indexer, but need some more time / information to figure this out.\n Certainly photo_id should not be empty if you want to add labels to a photo. Makes sense.\n \t\t"}, "comments_3": {"comment_id": 4, "comment_author": "baembel08", "commentT": "2019-12-18T13:26:47Z", "comment_text": "\n \t\tIf you think this is an issue specifically with your files, we would appreciate a sample (ideally upload it and send the download URL, either here or private via email to <denchmark-link:mailto:hello@photoprism.org>hello@photoprism.org</denchmark-link>\n ).\n \t\t"}, "comments_4": {"comment_id": 5, "comment_author": "baembel08", "commentT": "2019-12-18T16:05:14Z", "comment_text": "\n \t\tI guess, I've found a hint: Some of my (scanned  from original) photos are older than the date 01.01.1970., so for example: 25.08.1967 12:00:00. As I know the unix timestamp so far, it starts at the described date.\n One error message is:\n (/go/src/github.com/photoprism/photoprism/internal/photoprism/indexer_mediafile.go:174)\n [2019-12-18 15:54:38]  Error 1292: invalid time format: '{1967 8 25 11 0 0 0}'\n \t\t"}, "comments_5": {"comment_id": 6, "comment_author": "baembel08", "commentT": "2019-12-18T16:08:11Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/baembel08>@baembel08</denchmark-link>\n  Would you be able to provide us with an example file? Otherwise it will be a ping-pong with many test releases until we fixed it. Or you send a pull request with a fix :)\n \t\t"}, "comments_6": {"comment_id": 7, "comment_author": "baembel08", "commentT": "2019-12-18T16:23:40Z", "comment_text": "\n \t\tyep, I'll prepare.\n \t\t"}, "comments_7": {"comment_id": 8, "comment_author": "baembel08", "commentT": "2019-12-18T16:50:29Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/baembel08>@baembel08</denchmark-link>\n  Thank you very much! I'll take a look tomorrow :)\n \t\t"}, "comments_8": {"comment_id": 9, "comment_author": "baembel08", "commentT": "2019-12-19T16:19:29Z", "comment_text": "\n \t\tEverything is OK now, work is done!\n \t\t"}}}, "commit": {"commit_id": "fc5d32749442a2e9d1ebca4c55b9cf8f023d04af", "commit_author": "Michael Mayer", "commitT": "2019-12-19 09:37:10+01:00", "commit_complexity": {"commit_NLOC": "0.4857142857142857", "commit_CCN": "0.4857142857142857", "commit_Nprams": "1.0"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "assets\\config\\labels.yml", "file_new_name": "assets\\config\\labels.yml", "file_complexity": {"file_NLOC": "None", "file_CCN": "None", "file_NToken": "None"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "1905,3720,3721,3722,3723,3724", "deleted_lines": null}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "internal\\entity\\camera.go", "file_new_name": "internal\\entity\\camera.go", "file_complexity": {"file_NLOC": "51", "file_CCN": "10", "file_NToken": "259"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "50,51,52", "deleted_lines": "50", "method_info": {"method_name": "FirstOrCreate", "method_params": "DB", "method_startline": "49", "method_endline": "55", "method_complexity": {"method_NLOC": "6", "method_CCN": "2", "method_NToken": "55", "method_nesting_level": "0"}}}}}, "file_2": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "internal\\entity\\country.go", "file_new_name": "internal\\entity\\country.go", "file_complexity": {"file_NLOC": "44", "file_CCN": "6", "file_NToken": "216"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "47,48,49", "deleted_lines": "47", "method_info": {"method_name": "FirstOrCreate", "method_params": "DB", "method_startline": "46", "method_endline": "52", "method_complexity": {"method_NLOC": "6", "method_CCN": "2", "method_NToken": "51", "method_nesting_level": "0"}}}}}, "file_3": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "internal\\entity\\event.go", "file_new_name": "internal\\entity\\event.go", "file_complexity": {"file_NLOC": "28", "file_CCN": "2", "file_NToken": "124"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "18,19", "deleted_lines": "18,19"}}}, "file_4": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "internal\\entity\\keyword.go", "file_new_name": "internal\\entity\\keyword.go", "file_complexity": {"file_NLOC": "23", "file_CCN": "3", "file_NToken": "114"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "27,28,29", "deleted_lines": "27", "method_info": {"method_name": "FirstOrCreate", "method_params": "DB", "method_startline": "26", "method_endline": "32", "method_complexity": {"method_NLOC": "6", "method_CCN": "2", "method_NToken": "51", "method_nesting_level": "0"}}}}}, "file_5": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "internal\\entity\\label.go", "file_new_name": "internal\\entity\\label.go", "file_complexity": {"file_NLOC": "48", "file_CCN": "7", "file_NToken": "256"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "27", "deleted_lines": null, "method_info": {"method_name": "BeforeCreate", "method_params": "Scope", "method_startline": "25", "method_endline": "32", "method_complexity": {"method_NLOC": "7", "method_CCN": "2", "method_NToken": "50", "method_nesting_level": "0"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "53,54,55", "deleted_lines": "52", "method_info": {"method_name": "FirstOrCreate", "method_params": "DB", "method_startline": "52", "method_endline": "58", "method_complexity": {"method_NLOC": "6", "method_CCN": "2", "method_NToken": "51", "method_nesting_level": "0"}}}}}, "file_6": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "internal\\entity\\lens.go", "file_new_name": "internal\\entity\\lens.go", "file_complexity": {"file_NLOC": "36", "file_CCN": "5", "file_NToken": "156"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "41,42,43", "deleted_lines": "41", "method_info": {"method_name": "FirstOrCreate", "method_params": "DB", "method_startline": "40", "method_endline": "46", "method_complexity": {"method_NLOC": "6", "method_CCN": "2", "method_NToken": "55", "method_nesting_level": "0"}}}}}, "file_7": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "internal\\entity\\photo.go", "file_new_name": "internal\\entity\\photo.go", "file_complexity": {"file_NLOC": "119", "file_CCN": "13", "file_NToken": "745"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "46,47", "deleted_lines": "46,47"}}}, "file_8": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "internal\\entity\\photo_album.go", "file_new_name": "internal\\entity\\photo_album.go", "file_complexity": {"file_NLOC": "30", "file_CCN": "4", "file_NToken": "137"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "34,35,36", "deleted_lines": "34", "method_info": {"method_name": "FirstOrCreate", "method_params": "DB", "method_startline": "33", "method_endline": "39", "method_complexity": {"method_NLOC": "6", "method_CCN": "2", "method_NToken": "55", "method_nesting_level": "0"}}}}}, "file_9": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "internal\\entity\\photo_keyword.go", "file_new_name": "internal\\entity\\photo_keyword.go", "file_complexity": {"file_NLOC": "22", "file_CCN": "4", "file_NToken": "118"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "24,25,26", "deleted_lines": "24", "method_info": {"method_name": "FirstOrCreate", "method_params": "DB", "method_startline": "23", "method_endline": "29", "method_complexity": {"method_NLOC": "6", "method_CCN": "2", "method_NToken": "55", "method_nesting_level": "0"}}}}}, "file_10": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "internal\\entity\\photo_label.go", "file_new_name": "internal\\entity\\photo_label.go", "file_complexity": {"file_NLOC": "30", "file_CCN": "4", "file_NToken": "144"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "33,34,35", "deleted_lines": "33", "method_info": {"method_name": "FirstOrCreate", "method_params": "DB", "method_startline": "32", "method_endline": "38", "method_complexity": {"method_NLOC": "6", "method_CCN": "2", "method_NToken": "55", "method_nesting_level": "0"}}}}}, "file_11": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "internal\\photoprism\\indexer_mediafile.go", "file_new_name": "internal\\photoprism\\indexer_mediafile.go", "file_complexity": {"file_NLOC": "357", "file_CCN": "113", "file_NToken": "2906"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "167,168,169,170,178,179,180,181,227,228,229,230,231,232,238,239,240,241,242", "deleted_lines": "166,174,220,226", "method_info": {"method_name": "indexMediaFile", "method_params": "MediaFile,IndexerOptions", "method_startline": "26", "method_endline": "244", "method_complexity": {"method_NLOC": "177", "method_CCN": "62", "method_NToken": "1410", "method_nesting_level": "0"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "341,342,343,344,352,353,354,360,361,362", "deleted_lines": "333,339", "method_info": {"method_name": "addLabels", "method_params": "uint,Labels", "method_startline": "329", "method_endline": "365", "method_complexity": {"method_NLOC": "30", "method_CCN": "10", "method_NToken": "265", "method_nesting_level": "0"}}}}}}}}