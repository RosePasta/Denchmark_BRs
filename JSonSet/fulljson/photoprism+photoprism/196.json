{"BR": {"BR_id": "196", "BR_author": "casidiablo", "BRopenT": "2020-01-14T05:37:26Z", "BRcloseT": "2020-01-17T06:21:46Z", "BR_text": {"BRsummary": "Can't get indexing to work", "BRdescription": "\n Whether by adding manually the photos to the import folder or by using the Upload button in the UI, the photos don't make it to the gallery. This is the log:\n <denchmark-code>2020-01-14 05:32:32 INFO import completed in 7 s\n 2020-01-14 05:32:32 INFO import: deleted empty directory \"/assets/photos/import/upload/1578979942722\"\n 2020-01-14 05:32:32 INFO import: added main png file \"2020/01/20200114_053224_A11081B77B89.png\"\n 2020-01-14 05:32:31 INFO convert: \"/assets/photos/originals/2020/01/20200114_053224_A11081B77B89.png\" -> \"/assets/photos/originals/2020/01/20200114_053224_A11081B77B89.jpg\"\n 2020-01-14 05:32:31 INFO import: moving main png file \"2019-09-25-055743_1920x1080_scrot.png\" to \"/assets/photos/originals/2020/01/20200114_053224_A11081B77B89.png\"\n 2020-01-14 05:32:31 INFO file: taken at 2020-01-14 05:32:24.974578903 +0000 UTC\n 2020-01-14 05:32:31 INFO tensorflow: loading classification labels from labels.txt\n 2020-01-14 05:32:25 INFO tensorflow: loading image classification model from \"nasnet\"\n 2020-01-14 05:32:25 INFO importing photos from \"1578979942722\"\n 2020-01-14 05:32:24 INFO 1 files uploaded in 2.093806579s\n </denchmark-code>\n \n This is what the UI looks like right now:\n <denchmark-link:https://user-images.githubusercontent.com/144458/72317000-c2182c80-364c-11ea-96c3-51b8831069f8.png></denchmark-link>\n \n Notice how the the sidebar says Photos     2.\n I'm running this in Kubernetes using the 20200113 image.\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "casidiablo", "commentT": "2020-01-14T07:50:15Z", "comment_text": "\n \t\tJust tried with our public demo and only happens with PNGs... will look into this. Do JPEGs work for you?\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "casidiablo", "commentT": "2020-01-14T07:57:09Z", "comment_text": "\n \t\tLogs show that a JPEG for the PNG was created but not indexed for some reason (PNGs will not be displayed directly in the search results, we need a JPEG thumb for this):\n <denchmark-link:https://user-images.githubusercontent.com/301686/72324621-a8f29880-36ab-11ea-9738-1863bd843997.png></denchmark-link>\n \n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "casidiablo", "commentT": "2020-01-14T09:39:29Z", "comment_text": "\n \t\tShould become visible when you manually index (again)\n \t\t"}, "comments_3": {"comment_id": 4, "comment_author": "casidiablo", "commentT": "2020-01-14T09:39:53Z", "comment_text": "\n \t\tMaybe a timing issue... we work a lot with goroutines now to improve performance.\n \t\t"}, "comments_4": {"comment_id": 5, "comment_author": "casidiablo", "commentT": "2020-01-14T20:54:36Z", "comment_text": "\n \t\tI tried with a JPEG image and this time it worked. But the other images I had added are still not showing up. Also, one of the images I had tried with was in .CR2 format, and that didn't work either.\n \t\t"}, "comments_5": {"comment_id": 6, "comment_author": "casidiablo", "commentT": "2020-01-14T20:56:47Z", "comment_text": "\n \t\tDid you index? Not import.\n \t\t"}, "comments_6": {"comment_id": 7, "comment_author": "casidiablo", "commentT": "2020-01-14T21:00:08Z", "comment_text": "\n \t\tOhh, I see what you mean now. Indexing does work \ud83d\udc4d\n \t\t"}, "comments_7": {"comment_id": 8, "comment_author": "casidiablo", "commentT": "2020-01-15T22:32:51Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/casidiablo>@casidiablo</denchmark-link>\n  Is this fixed for you?\n \t\t"}, "comments_8": {"comment_id": 9, "comment_author": "casidiablo", "commentT": "2020-01-16T02:21:13Z", "comment_text": "\n \t\tYes. i.e. if you manually click indexing it works. I guess it would be nice to fix importing files other than JPEG so that one does not have to manually index them.\n \t\t"}, "comments_9": {"comment_id": 10, "comment_author": "casidiablo", "commentT": "2020-01-16T10:30:35Z", "comment_text": "\n \t\tYou saw that I changed the code and fixed it for you?\n \t\t"}, "comments_10": {"comment_id": 11, "comment_author": "casidiablo", "commentT": "2020-01-16T10:30:55Z", "comment_text": "\n \t\tNeed to pull an updated docker image...\n \t\t"}, "comments_11": {"comment_id": 12, "comment_author": "casidiablo", "commentT": "2020-01-17T06:21:46Z", "comment_text": "\n \t\tOh, yeah. It seems to be working fine.\n \t\t"}}}, "commit": {"commit_id": "624ade62c64dbee2dc7a1415a871236daaf8008e", "commit_author": "Michael Mayer", "commitT": "2020-01-15 05:05:47+01:00", "commit_complexity": {"commit_NLOC": "0.0", "commit_CCN": "0.0", "commit_Nprams": "1.0"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "internal\\photoprism\\import_worker.go", "file_new_name": "internal\\photoprism\\import_worker.go", "file_complexity": {"file_NLOC": "86", "file_CCN": "20", "file_NToken": "609"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "81,82,83,84,85,86,87,88", "deleted_lines": null, "method_info": {"method_name": "importWorker", "method_params": "ImportJob", "method_startline": "18", "method_endline": "108", "method_complexity": {"method_NLOC": "73", "method_CCN": "20", "method_NToken": "586", "method_nesting_level": "0"}}}}}}}}