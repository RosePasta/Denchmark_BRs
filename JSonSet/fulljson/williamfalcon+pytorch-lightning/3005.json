{"BR": {"BR_id": "3005", "BR_author": "szywise", "BRopenT": "2020-08-16T14:27:57Z", "BRcloseT": "2020-08-18T21:51:40Z", "BR_text": {"BRsummary": "`type_as` bug in the doc of LightningModule", "BRdescription": "\n <denchmark-h:h2>\ud83d\udc1b Bug</denchmark-h>\n \n When I run <denchmark-link:https://github.com/PyTorchLightning/pytorch-lightning/blame/master/docs/source/lightning-module.rst#L54>this line of code</denchmark-link>\n  in the doc, it complains that  shouldn't be given a .\n <denchmark-h:h3>To Reproduce</denchmark-h>\n \n <denchmark-h:h4>Code sample</denchmark-h>\n \n The last line of the following code\n x = torch.zeros(2, device='cpu')\n new_x = torch.zeros(3, device='cuda:0')\n new_x = new_x.type_as(x.type())\n gives this error:\n <denchmark-code>TypeError: type_as(): argument 'other' (position 1) must be Tensor, not str\n </denchmark-code>\n \n <denchmark-h:h3>Expected behavior</denchmark-h>\n \n Cast new_x to the same type as x.\n A potential fix:\n new_x = new_x.type_as(x)\n <denchmark-h:h3>Environment</denchmark-h>\n \n <denchmark-code>* CUDA:\n         - GPU:\n                 - GeForce RTX 2080\n                 - GeForce RTX 2080\n         - available:         True\n         - version:           10.2\n * Packages:\n         - numpy:             1.18.5\n         - pyTorch_debug:     False\n         - pyTorch_version:   1.5.1\n         - pytorch-lightning: 0.9.0rc5\n         - tensorboard:       2.2.2\n         - tqdm:              4.47.0\n * System:\n         - OS:                Linux\n         - architecture:\n                 - 64bit\n                 - ELF\n         - processor:         x86_64\n         - python:            3.8.3\n         - version:           #113-Ubuntu SMP Thu Jul 9 23:41:39 UTC 2020\n </denchmark-code>\n \n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "szywise", "commentT": "2020-08-16T14:28:39Z", "comment_text": "\n \t\tHi! thanks for your contribution!, great first issue!\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "szywise", "commentT": "2020-08-16T15:35:02Z", "comment_text": "\n \t\tIn the example you linked, it creates a new tensor.\n This way\n new_x = x.new_empty(2, 3)\n the tensor will have the same device and dtype and does not need to be copied to the new device.\n We should prevent this from getting into the docs by replacing the code block by\n .. testcode:: \n which will run the code and reveal such errors immediately.\n \t\t"}}}, "commit": {"commit_id": "9f6be96f845cabb114ef0df7a04498af6d5d8874", "commit_author": "Davian Yang", "commitT": "2020-08-18 21:51:38+00:00", "commit_complexity": {"commit_NLOC": "None", "commit_CCN": "None", "commit_Nprams": "None"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "docs\\source\\introduction_guide.rst", "file_new_name": "docs\\source\\introduction_guide.rst", "file_complexity": {"file_NLOC": "None", "file_CCN": "None", "file_NToken": "None"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "4,263,265", "deleted_lines": "262,264"}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "docs\\source\\lightning-module.rst", "file_new_name": "docs\\source\\lightning-module.rst", "file_complexity": {"file_NLOC": "None", "file_CCN": "None", "file_NToken": "None"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "54", "deleted_lines": "54"}}}, "file_2": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "docs\\source\\new-project.rst", "file_new_name": "docs\\source\\new-project.rst", "file_complexity": {"file_NLOC": "None", "file_CCN": "None", "file_NToken": "None"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "4,361,363,411,419,424,436,448", "deleted_lines": "360,362,410,418,423,435,447"}}}}}}