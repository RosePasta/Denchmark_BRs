{"BR": {"BR_id": "4540", "BR_author": "zippeurfou", "BRopenT": "2020-11-05T23:07:32Z", "BRcloseT": "2020-12-05T21:00:32Z", "BR_text": {"BRsummary": "Existing logger conflict with lr_finder", "BRdescription": "\n <denchmark-h:h2>\ud83d\udc1b Bug</denchmark-h>\n \n If you call specific logger function (ie.  on a tensorboard one). The tuner will fails because it overwrite it with a DummyLogger (<denchmark-link:https://github.com/PyTorchLightning/pytorch-lightning/blob/master/pytorch_lightning/tuner/lr_finder.py#L150>https://github.com/PyTorchLightning/pytorch-lightning/blob/master/pytorch_lightning/tuner/lr_finder.py#L150</denchmark-link>\n ).\n I would expect to not have to check if the logger I initiated in my trainer is being overwritten or not.\n Additionally, on a minor minor note. I wouldn't expect  to be overwritten as it is <denchmark-link:https://github.com/PyTorchLightning/pytorch-lightning/blob/master/pytorch_lightning/tuner/lr_finder.py#L147>here</denchmark-link>\n .\n <denchmark-h:h2>Please reproduce using the BoringModel and post here</denchmark-h>\n \n <denchmark-h:h3>Expected behavior</denchmark-h>\n \n Have a smooth way to ignore it.\n <denchmark-h:h3>Environment</denchmark-h>\n \n <denchmark-code>* CUDA:\n \t- GPU:\n \t\t- Tesla T4\n \t- available:         True\n \t- version:           10.1\n * Packages:\n \t- numpy:             1.18.5\n \t- pyTorch_debug:     True\n \t- pyTorch_version:   1.7.0+cu101\n \t- pytorch-lightning: 0.10.0\n \t- tqdm:              4.41.1\n * System:\n \t- OS:                Linux\n \t- architecture:\n \t\t- 64bit\n \t\t- \n \t- processor:         x86_64\n \t- python:            3.6.9\n \t- version:           #1 SMP Thu Jul 23 08:00:38 PDT 2020\n </denchmark-code>\n \n \n PyTorch Version (e.g., 1.0): 1.0\n OS (e.g., Linux): colab\n How you installed PyTorch (conda, pip, source): pip\n \n <denchmark-h:h3>Additional context</denchmark-h>\n \n I am putting this as a bug because it is a behavior that required me to check into the source code to figure out where this DummyLogger came from. If the solution is non-trivial, a resolution could just be some warnings in the doc.\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "zippeurfou", "commentT": "2020-11-05T23:08:13Z", "comment_text": "\n \t\tHi! thanks for your contribution!, great first issue!\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "zippeurfou", "commentT": "2020-11-06T13:58:45Z", "comment_text": "\n \t\tWe had this problem before (this issue <denchmark-link:https://github.com/PyTorchLightning/pytorch-lightning/issues/1919>#1919</denchmark-link>\n ) and it was solved, but after refactors it seems to only be correct if  is called.\n The solution is to rebind the logger after running the a tuner algorithm like here:\n \n \n <denchmark-link:https://github.com/zippeurfou>@zippeurfou</denchmark-link>\n  would you be up for sending a PR? basically the rebind statement just need to be more from  to  and .\n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "zippeurfou", "commentT": "2020-11-06T22:32:55Z", "comment_text": "\n \t\tThanks <denchmark-link:https://github.com/SkafteNicki>@SkafteNicki</denchmark-link>\n   I think the issue might be more tricky. It has to go with the fact that I am using an array to define my logger (I believe) and accessing  fails because the  just don't allow that since it is not an array. This example was straightforward forward but in production, I do have multiple loggers, hence the array. If you do remove the array I think it behave as expected.\n In the case of array  also fails. Here is an <denchmark-link:https://colab.research.google.com/drive/13RrnVaPJtoPy5nHaSPbJu7SedkPbpeud?usp=sharing>example</denchmark-link>\n \n I will read the issue and resolution to see if I can do something along the lines but it might just be some check if the dump logger is an array then create an array one (but that's pretty ugly :D).\n if you're ok with the ugly solution I can write a PR as follow with a one liner change:\n <denchmark-code>  trainer.logger = [DummyLogger()]*len(trainer.__dumped_params.logger.experiment) if isinstance(trainer.__dumped_params.logger.experiment,list) and len(trainer.__dumped_params.logger.experiment)>0 else DummyLogger()\n </denchmark-code>\n \n From <denchmark-link:https://github.com/PyTorchLightning/pytorch-lightning/blob/master/pytorch_lightning/tuner/lr_finder.py#L150>https://github.com/PyTorchLightning/pytorch-lightning/blob/master/pytorch_lightning/tuner/lr_finder.py#L150</denchmark-link>\n \n \t\t"}, "comments_3": {"comment_id": 4, "comment_author": "zippeurfou", "commentT": "2020-11-07T10:35:47Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/zippeurfou>@zippeurfou</denchmark-link>\n  what I think is a better solution is for both  and  to support indexing. It would simply be adding this class method to both:\n     def __getitem__(self, idx):\n         return self\n After adding this, if I run the line that gives problem in your example:\n <denchmark-code>self.logger.experiment[0].add_histogram(f'grad/{name}', param.grad.data, self.global_step)\n </denchmark-code>\n \n i get no error :]\n Would you be up for sending a PR?\n \t\t"}}}, "commit": {"commit_id": "849737e7ca033b109df00e43a775bb6c96b1873a", "commit_author": "Marc Ferradou", "commitT": "2020-12-05 21:00:31+00:00", "commit_complexity": {"commit_NLOC": "1.0", "commit_CCN": "1.0", "commit_Nprams": "1.0"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "pytorch_lightning\\loggers\\base.py", "file_new_name": "pytorch_lightning\\loggers\\base.py", "file_complexity": {"file_NLOC": "367", "file_CCN": "87", "file_NToken": "1871"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "412,413,414,415", "deleted_lines": null, "method_info": {"method_name": "__getitem__", "method_params": "self,idx", "method_startline": "412", "method_endline": "415", "method_complexity": {"method_NLOC": "2", "method_CCN": "1", "method_NToken": "9", "method_nesting_level": "1"}}}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "tests\\loggers\\test_base.py", "file_new_name": "tests\\loggers\\test_base.py", "file_complexity": {"file_NLOC": "193", "file_CCN": "28", "file_NToken": "1217"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "224,225,226", "deleted_lines": null, "method_info": {"method_name": "test_dummylogger_support_indexing", "method_params": "", "method_startline": "224", "method_endline": "226", "method_complexity": {"method_NLOC": "3", "method_CCN": "1", "method_NToken": "16", "method_nesting_level": "0"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "219,220,221", "deleted_lines": null, "method_info": {"method_name": "test_dummyexperiment_support_indexing", "method_params": "", "method_startline": "219", "method_endline": "221", "method_complexity": {"method_NLOC": "3", "method_CCN": "1", "method_NToken": "16", "method_nesting_level": "0"}}}}}}}}