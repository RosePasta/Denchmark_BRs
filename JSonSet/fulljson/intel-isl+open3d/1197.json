{"BR": {"BR_id": "1197", "BR_author": "RapIt", "BRopenT": "2019-09-20T17:22:03Z", "BRcloseT": "2019-09-26T09:39:08Z", "BR_text": {"BRsummary": "Change of Visualization Parameters between versions?", "BRdescription": "\n I did a version update from 0.7 to 0.8 today. I did absolutely no other changes than adjusting the API calls which changed between the versions, but my visualization broke anyway:\n left: 0.7 / right: 0.8\n <denchmark-link:https://user-images.githubusercontent.com/844913/65345210-041eed80-dbda-11e9-9fd5-5022a84a9938.png></denchmark-link>\n \n \n the color map changed\n the zoom-limit in the newer version is lower so that I cannot zoom far enough.\n the point cloud is smaller because the z-translation value in the extrinsic matrix changed (except of this single value both intrinsic, extrinsic and other ViewControl parameters are exactly the same. PCL values are also the same. )\n \n The old version is way better, but I would like to use some of the new features. A hint into the right direction in the changelog / code would be great. I have no clue what to change in order to restore the old behavior. I only use default parameters so far and add my geometries (PCLs and MeshSpheres) with add_geometry.\n Thanks!\n EDIT\n I made some further observations: The ViewTrajectory is\n <denchmark-code>\"boundingbox_max\" : [ 0.97073449050827609, 0.76746450924137721, 0.0 ],\n \"boundingbox_min\" : [ -1.1379995291273886, -0.7524822081574073, -2.4096000194549561 ],\n \"field_of_view\" : 59.999999999999993,\n \"front\" : [ 0.0, 0.0, 1.0 ],\n \"lookat\" : [ -0.08363251930955623, 0.0074911505419849589, -1.204800009727478 ],\n \"up\" : [ 0.0, 1.0, 0.0 ],\n \"zoom\" : 0.40847723131794877\n </denchmark-code>\n \n ,but when I manually print the bbox values before adding the pcl to the renderer its max values are [0.97073449  0.76746451 -1.1128], so the z value is falsely set to 0.0. That causes the lookat to be calculated wrong, too and the colormap is applied to a \"wrong\" range. That does not happen in the 0.7 version, the max bbox values are correct there. How can I fix that?\n EDIT 2\n I fixed it for me by building from source after setting the z value of max_bound_ in \n \n \n Open3D/src/Open3D/Geometry/BoundingVolume.h\n \n \n          Line 94\n       in\n       80915c2\n \n \n \n \n \n \n  max_bound_(0, 0, 0), \n \n \n \n \n  to a negative limit. The issue is caused by the combination of bounding boxes when adding 3d geometries, see \n \n \n Open3D/src/Open3D/Geometry/BoundingVolume.h\n \n \n          Line 118\n       in\n       80915c2\n \n \n \n \n \n \n  max_bound_ = max_bound_.array().max(other.max_bound_.array()).matrix(); \n \n \n \n \n . Since the z axis is negative, the initial value of 0.0 is always greater, so the BoundingVolume is not calculated correctly.\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "RapIt", "commentT": "2019-09-25T15:58:47Z", "comment_text": "\n \t\tDitto. Updated to 0.8, previously calling draw_geometries() would display a zoomed-in view of point clouds, regardless of there points where (useful for quick viewing results).\n Now point clouds are far away from the center and in a zoomed out view which is not optimal.\n There is no documentation of the changes either.\n Any ideas how to revert back to the older viewing functionality?\n Thanks!\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "RapIt", "commentT": "2019-09-25T17:44:01Z", "comment_text": "\n \t\tSee my EDIT 2 for a fix, which worked for me. It probably solves the issue, but I am not familiar enough with the code and potential side effects to make a PR. Maybe <denchmark-link:https://github.com/griegler>@griegler</denchmark-link>\n  can comment, he implemented the new bounding volume features.\n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "RapIt", "commentT": "2019-09-25T18:41:17Z", "comment_text": "\n \t\tThanks for pointing this out, I will need to look a bit deeper into this.\n \t\t"}, "comments_3": {"comment_id": 4, "comment_author": "RapIt", "commentT": "2019-09-25T18:56:18Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/RapIt>@RapIt</denchmark-link>\n  can you share the geometry/code to reproduce the visualization in your first post?\n \t\t"}, "comments_4": {"comment_id": 5, "comment_author": "RapIt", "commentT": "2019-09-26T08:58:43Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/RapIt>@RapIt</denchmark-link>\n  maybe you can test <denchmark-link:https://github.com/intel-isl/Open3D/pull/1205>#1205</denchmark-link>\n  if it fixes your problem?\n \t\t"}, "comments_5": {"comment_id": 6, "comment_author": "RapIt", "commentT": "2019-09-26T09:39:08Z", "comment_text": "\n \t\tI just tested the fix, it works perfectly now. No need for example code then? Thank you for the fast response, I will close this issue.\n \t\t"}, "comments_6": {"comment_id": 7, "comment_author": "RapIt", "commentT": "2019-09-26T09:40:06Z", "comment_text": "\n \t\tGreat! No need for the data/code then.\n \t\t"}}}, "commit": {"commit_id": "9ba9cecbef13576c73e0e8492e322c4e4a11d2a2", "commit_author": "Gernot", "commitT": "2019-09-26 19:54:50-07:00", "commit_complexity": {"commit_NLOC": "1.0", "commit_CCN": "1.0", "commit_Nprams": "1.0"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "src\\Open3D\\Geometry\\BoundingVolume.cpp", "file_new_name": "src\\Open3D\\Geometry\\BoundingVolume.cpp", "file_complexity": {"file_NLOC": "276", "file_CCN": "43", "file_NToken": "2215"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "292,293,294,295,296,297,298,299,300,301,302", "deleted_lines": null, "method_info": {"method_name": "open3d::geometry::AxisAlignedBoundingBox::operator +=", "method_params": "other", "method_startline": "292", "method_endline": "302", "method_complexity": {"method_NLOC": "11", "method_CCN": "3", "method_NToken": "94", "method_nesting_level": "2"}}}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "src\\Open3D\\Geometry\\BoundingVolume.h", "file_new_name": "src\\Open3D\\Geometry\\BoundingVolume.h", "file_complexity": {"file_NLOC": "97", "file_CCN": "10", "file_NToken": "711"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "118", "deleted_lines": "118,119,120,121,122", "method_info": {"method_name": "open3d::geometry::AxisAlignedBoundingBox::operator +=", "method_params": "other", "method_startline": "118", "method_endline": "122", "method_complexity": {"method_NLOC": "5", "method_CCN": "1", "method_NToken": "58", "method_nesting_level": "3"}}}}}}}}