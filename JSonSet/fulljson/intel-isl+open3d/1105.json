{"BR": {"BR_id": "1105", "BR_author": "XuChengHUST", "BRopenT": "2019-08-07T03:05:19Z", "BRcloseT": "2019-08-20T06:55:49Z", "BR_text": {"BRsummary": "RemoveStatisticalOutliers function bugs", "BRdescription": "\n IMPORTANT: Please use the following template to report the bug.\n <denchmark-h:hr></denchmark-h>\n \n Describe the bug\n RemoveStatisticalOutliers function (Open3D/src/Open3D/Geometry/DownSample.cpp) bugs makes it not working properly.\n line 454: kdtree.SearchKNN(points_[i], int(nb_neighbors), tmp_indices, dist);\n the dist here is the squared Euclidean dist, and should NOT be accumulated directly.\n but as in line 458: mean = std::accumulate(dist.begin(), dist.end(), 0.0) / dist.size();\n the squared_dists are directly averaged to get the mean_dist value. In fact, the squared_dist should be first \"sqrt()\" to get the correct mean_dist.\n A reference implement of this function is in pcl library is in line 113-116 of \"pcl/filters/include/pcl/filters/impl/statistical_outlier_removal.hpp\"\n // Calculate the mean distance to its neighbors\n double dist_sum = 0.0;\n for (int k = 1; k < mean_k_ + 1; ++k)  // k = 0 is the query point\n dist_sum += sqrt (nn_dists[k]);\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "XuChengHUST", "commentT": "2019-08-20T06:55:49Z", "comment_text": "\n \t\tAddressed in <denchmark-link:https://github.com/intel-isl/Open3D/pull/1126>#1126</denchmark-link>\n .\n \t\t"}}}, "commit": {"commit_id": "d7b23517bdf4a9ba9ec079b2b4cbcd05174bb7f3", "commit_author": "Gernot", "commitT": "2019-08-19 12:05:02-07:00", "commit_complexity": {"commit_NLOC": "0.0", "commit_CCN": "0.0", "commit_Nprams": "1.0"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "src\\Open3D\\Geometry\\DownSample.cpp", "file_new_name": "src\\Open3D\\Geometry\\DownSample.cpp", "file_complexity": {"file_NLOC": "437", "file_CCN": "110", "file_NToken": "3588"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "458,459", "deleted_lines": null, "method_info": {"method_name": "open3d::geometry::PointCloud::RemoveStatisticalOutliers", "method_params": "nb_neighbors,std_ratio", "method_startline": "429", "method_endline": "487", "method_complexity": {"method_NLOC": "55", "method_CCN": "13", "method_NToken": "551", "method_nesting_level": "2"}}}}}}}}