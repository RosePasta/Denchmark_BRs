{"BR": {"BR_id": "950", "BR_author": "lukasgee", "BRopenT": "2019-05-04T13:18:46Z", "BRcloseT": "2019-09-19T23:03:03Z", "BR_text": {"BRsummary": "Statement causing TypeError returning NoneType while reading rgbd_image", "BRdescription": "\n Description\n Code available at: examples/Python/ReconstructionSystem/make_fragments.py\n Following part of code:\n def read_rgbd_image(color_file, depth_file, convert_rgb_to_intensity, config):\n     color = read_image(color_file)\n     depth = read_image(depth_file)\n     if config[\"depth_map_type\"] == \"redwood\":\n         rgbd_image = create_rgbd_image_from_color_and_depth(color, depth,\n             depth_trunc = config[\"max_depth\"],\n             convert_rgb_to_intensity = convert_rgb_to_intensity)\n     return rgbd_image\n causes TypeError due to referencing rgbd_image while\n return rgbd_image\n which is not set if there is different then \"redwood\" depth_map_type given.\n I saw the different already solved Issue on necessity of the if statement implemented here to set\n convert_rgb_to_intensity=True\n for \"redwood\" depth_map_type\n Overall solution\n So if the condition is necessary, the most safe way is to solve this issue as following:\n def read_rgbd_image(color_file, depth_file, convert_rgb_to_intensity, config):\n     color = read_image(color_file)\n     depth = read_image(depth_file)\n     if config[\"depth_map_type\"] == \"redwood\":\n         convert_rgb_to_intensity = True\n     rgbd_image = create_rgbd_image_from_color_and_depth(color, depth,\n         depth_trunc = config[\"max_depth\"],\n         convert_rgb_to_intensity = convert_rgb_to_intensity)\n     return rgbd_image\n This makes sure of returning the image every time the function is asked for it and still takes care of \"redwood\" depth_map_type.\n \t"}, "comments": {}}, "commit": {"commit_id": "499d245d80fda050319727ea99e8ea33fecb57f4", "commit_author": "Gernot", "commitT": "2019-09-19 16:03:02-07:00", "commit_complexity": {"commit_NLOC": "0.0", "commit_CCN": "0.0", "commit_Nprams": "1.0"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "docs\\tutorial\\ReconstructionSystem\\make_fragments.rst", "file_new_name": "docs\\tutorial\\ReconstructionSystem\\make_fragments.rst", "file_complexity": {"file_NLOC": "None", "file_CCN": "None", "file_NToken": "None"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "20,21,34,35,57,58,68,69", "deleted_lines": "20,21,34,35,57,58,68,69"}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "examples\\Python\\ReconstructionSystem\\make_fragments.py", "file_new_name": "examples\\Python\\ReconstructionSystem\\make_fragments.py", "file_complexity": {"file_NLOC": "159", "file_CCN": "10", "file_NToken": "1183"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "26,27,28,29,30", "deleted_lines": "26,27,28,29,30,31", "method_info": {"method_name": "read_rgbd_image", "method_params": "color_file,depth_file,convert_rgb_to_intensity,config", "method_startline": "23", "method_endline": "31", "method_complexity": {"method_NLOC": "9", "method_CCN": "1", "method_NToken": "58", "method_nesting_level": "0"}}}}}}}}