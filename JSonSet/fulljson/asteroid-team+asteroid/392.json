{"BR": {"BR_id": "392", "BR_author": "Potomac", "BRopenT": "2020-12-13T00:08:11Z", "BRcloseT": "2021-01-05T20:31:32Z", "BR_text": {"BRsummary": "Wrong sample rate on Wham-ConvTasNet recipe when training a 16000 Hz model", "BRdescription": "\n I detected a bug in Wham/ConvTasNet recipe, located in the file train.py :\n when training a model with a sample rate of 16000 Hz then the model (best_model.pth file) generated (by run.sh)  is registered with a sample rate of 8000 Hz instead of 16000 Hz,\n it's because the sample rate value is not passed when ConvTasNet class is instancied at line 60 of train.py file :\n <denchmark-code>model = ConvTasNet(**conf[\"filterbank\"], **conf[\"masknet\"])\n </denchmark-code>\n \n a solution is to add the sample rate value (in order to avoid the default value 8000 Hz) :\n <denchmark-code> model = ConvTasNet(**conf[\"filterbank\"], **conf[\"masknet\"], sample_rate=conf[\"data\"][\"sample_rate\"])\n </denchmark-code>\n \n <denchmark-link:https://github.com/asteroid-team/asteroid/blob/master/egs/wham/ConvTasNet/train.py>https://github.com/asteroid-team/asteroid/blob/master/egs/wham/ConvTasNet/train.py</denchmark-link>\n \n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "Potomac", "commentT": "2020-12-13T08:16:31Z", "comment_text": "\n \t\tThis is correct, thanks for pointing it out! Could you submit a PR to fix\n this please?\n Thanks\n \t\t"}}}, "commit": {"commit_id": "79edc9e2bbb1be0cdccee17c5d4678d9f8359302", "commit_author": "Pariente Manuel", "commitT": "2021-01-05 21:31:31+01:00", "commit_complexity": {"commit_NLOC": "0.0", "commit_CCN": "0.0", "commit_Nprams": "1.0"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "egs\\dampvsep\\ConvTasNet\\train.py", "file_new_name": "egs\\dampvsep\\ConvTasNet\\train.py", "file_complexity": {"file_NLOC": "119", "file_CCN": "8", "file_NToken": "924"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "60,61,62", "deleted_lines": "60", "method_info": {"method_name": "main", "method_params": "conf", "method_startline": "28", "method_endline": "125", "method_complexity": {"method_NLOC": "77", "method_CCN": "6", "method_NToken": "602", "method_nesting_level": "0"}}}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "egs\\librimix\\ConvTasNet\\train.py", "file_new_name": "egs\\librimix\\ConvTasNet\\train.py", "file_complexity": {"file_NLOC": "106", "file_CCN": "6", "file_NToken": "797"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "61,62,63", "deleted_lines": "61", "method_info": {"method_name": "main", "method_params": "conf", "method_startline": "27", "method_endline": "123", "method_complexity": {"method_NLOC": "81", "method_CCN": "6", "method_NToken": "638", "method_nesting_level": "0"}}}}}, "file_2": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "egs\\wham\\ConvTasNet\\train.py", "file_new_name": "egs\\wham\\ConvTasNet\\train.py", "file_complexity": {"file_NLOC": "104", "file_CCN": "6", "file_NToken": "767"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "60,61,62", "deleted_lines": "60", "method_info": {"method_name": "main", "method_params": "conf", "method_startline": "28", "method_endline": "121", "method_complexity": {"method_NLOC": "79", "method_CCN": "6", "method_NToken": "606", "method_nesting_level": "0"}}}}}, "file_3": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "egs\\wham\\DPRNN\\train.py", "file_new_name": "egs\\wham\\DPRNN\\train.py", "file_complexity": {"file_NLOC": "104", "file_CCN": "6", "file_NToken": "773"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "59,60,61", "deleted_lines": "59", "method_info": {"method_name": "main", "method_params": "conf", "method_startline": "27", "method_endline": "119", "method_complexity": {"method_NLOC": "79", "method_CCN": "6", "method_NToken": "614", "method_nesting_level": "0"}}}}}, "file_4": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "egs\\wham\\DPTNet\\train.py", "file_new_name": "egs\\wham\\DPTNet\\train.py", "file_complexity": {"file_NLOC": "107", "file_CCN": "5", "file_NToken": "778"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "61", "deleted_lines": "61", "method_info": {"method_name": "main", "method_params": "conf", "method_startline": "29", "method_endline": "124", "method_complexity": {"method_NLOC": "81", "method_CCN": "5", "method_NToken": "613", "method_nesting_level": "0"}}}}}, "file_5": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "egs\\wham\\MixIT\\train.py", "file_new_name": "egs\\wham\\MixIT\\train.py", "file_complexity": {"file_NLOC": "132", "file_CCN": "8", "file_NToken": "1010"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "98,99,100", "deleted_lines": "98", "method_info": {"method_name": "main", "method_params": "conf", "method_startline": "63", "method_endline": "162", "method_complexity": {"method_NLOC": "84", "method_CCN": "6", "method_NToken": "607", "method_nesting_level": "0"}}}}}}}}