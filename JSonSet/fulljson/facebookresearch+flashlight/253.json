{"BR": {"BR_id": "253", "BR_author": "alealv", "BRopenT": "2020-11-12T17:47:16Z", "BRcloseT": "2020-11-21T10:10:55Z", "BR_text": {"BRsummary": "KENLM_ROOT_DIR doesn't work if it points to the installation directoy", "BRdescription": "\n <denchmark-h:h3>Bug Description</denchmark-h>\n \n If the env variable  points to the Kenlm installation directory instead of the git working copy it fails to find the required components. This is caused because when installing Kelnm the includes are located in  (check <denchmark-link:https://github.com/kpu/kenlm/blob/master/CMakeLists.txt#L107>here</denchmark-link>\n ).\n <denchmark-h:h4>Reproduction Steps</denchmark-h>\n \n # Install other required packages\n # Install Kelnm\n git clone --recursive --shallow\t-submodules --depth 1 https://github.com/kpu/kenlm.git\n cd kenlm\n cmake -B build -S . -Wno-dev -DCMAKE_BUILD_TYPE=\"Release\" -DCMAKE_INSTALL_PREFIX=\"/opt/kenlm\" -DCMAKE_POSITION_INDEPENDENT_CODE=ON\n cmake --build build -j`nproc`\n sudo make -C build install -j`nproc`\n cd ..\n export KENLM_ROOT_DIR=/opt/kenlm\n export MKLROOT=/opt/intel/mkl\n \n # Build flashlight\n git clone --recursive --shallow\t-submodules --depth 1 https://github.com/facebookresearch/flashlight.git\n cd flashlight\n cmake -B build -S . -Wno-dev -DCMAKE_BUILD_TYPE=\"Release\" -DCMAKE_INSTALL_PREFIX=\"/opt/flashlight\"\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "alealv", "commentT": "2020-11-21T07:07:35Z", "comment_text": "\n \t\tdoes this commit solve the problem <denchmark-link:https://github.com/facebookresearch/flashlight/pull/268>#268</denchmark-link>\n ?\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "alealv", "commentT": "2020-11-21T10:10:55Z", "comment_text": "\n \t\t\n does this commit solve the problem #268?\n \n Yes. It's worth to mention that now the variable is called KENLM_ROOT.\n \t\t"}}}, "commit": {"commit_id": "94480042ce95f49eb6067253caf39a7e6c2e4d20", "commit_author": "Alejandro Alvarez", "commitT": "2020-11-17 12:42:58-08:00", "commit_complexity": {"commit_NLOC": "None", "commit_CCN": "None", "commit_Nprams": "None"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "cmake\\Findkenlm.cmake", "file_new_name": "cmake\\Findkenlm.cmake", "file_complexity": {"file_NLOC": "None", "file_CCN": "None", "file_NToken": "None"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "4,17,18,19,23,28,29,30,39,43,45,51,52,53,54,56,57,61,63", "deleted_lines": "4,5,6,7,8,21,23,24,25,26,29,34,36,37,38,39,47,51,53,59,60,61,62,63,64,65,66,67,68,70,71,72,73,77,79"}}}}}}