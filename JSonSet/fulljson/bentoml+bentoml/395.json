{"BR": {"BR_id": "395", "BR_author": "kevin-hanselman", "BRopenT": "2019-11-25T17:54:54Z", "BRcloseT": "2019-11-26T18:32:26Z", "BR_text": {"BRsummary": "Python packaged model implicitly requires bentoml package", "BRdescription": "\n <denchmark-h:h2>Describe the bug</denchmark-h>\n \n A Python package built by BentoML requires the bentoml Python package implicitly.\n <denchmark-h:h2>To Reproduce</denchmark-h>\n \n <denchmark-code>$ pip install my_packaged_model\n </denchmark-code>\n \n Then:\n <denchmark-code>>>> import my_packaged_model\n ModuleNotFoundError: No module named 'bentoml'\n </denchmark-code>\n \n Not only do I need to install BentoML, I need to install the precise version used to create the Python package, else the package fails to import because of apparent BentoML API changes.\n <denchmark-h:h2>Expected behavior</denchmark-h>\n \n import my_packaged_model should Just Work.\n <denchmark-h:h2>Environment:</denchmark-h>\n \n \n OS: Arch Linux\n Python Version: Both Python 3.8.0 (Arch Linux) and Docker image python:3.7\n BentoML Version: Both 0.4.9 and 0.5.0\n \n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "kevin-hanselman", "commentT": "2019-11-25T17:58:50Z", "comment_text": "\n \t\t@Kevlar1818 Thanks for reporting this issue! The BentoML package should indeed be added to the install_requires list with fixed version, will follow up with a PR soon.\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "kevin-hanselman", "commentT": "2019-11-25T21:04:23Z", "comment_text": "\n \t\tThe fix has just been merged to master <denchmark-link:https://github.com/bentoml/BentoML/pull/396>#396</denchmark-link>\n  @kevlar1818 thanks again for reporting the issue.\n We will do some more testing before making a release, in the meanwhile, feel free to try it out by installing BentoML from master branch: pip install git+https://github.com/bentoml/BentoML.git\n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "kevin-hanselman", "commentT": "2019-11-26T18:32:26Z", "comment_text": "\n \t\tRelease 0.5.2 is out now including the fix. It should be able to use saved BentoService bundle as PyPI package with all the pip dependencies specified with the setup.py file.\n Closing this issue now, feel free to reopen if you are still seeing this/related issues with it.\n \t\t"}}}, "commit": {"commit_id": "94d9271a5eb5fc99ee7f00832b9250e36d7da85a", "commit_author": "Chaoyu", "commitT": "2019-11-25 13:00:38-08:00", "commit_complexity": {"commit_NLOC": "0.0", "commit_CCN": "1.0", "commit_Nprams": "1.0"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "bentoml\\bundler\\templates.py", "file_new_name": "bentoml\\bundler\\templates.py", "file_complexity": {"file_NLOC": "113", "file_CCN": "0", "file_NToken": "27"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "22,23,24,25,26,27,30,31", "deleted_lines": "21,22,23,24,26,27,28,29,30,31,32,33,34,35,38,40"}}}, "file_1": {"file_change_type": "ADD", "file_Nmethod": 0, "file_old_name": "None", "file_new_name": "pytest.ini", "file_complexity": {"file_NLOC": "None", "file_CCN": "None", "file_NToken": "None"}}, "file_2": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "tests\\test_pip_install_saved_bundle.py", "file_new_name": "tests\\test_pip_install_saved_bundle.py", "file_complexity": {"file_NLOC": "39", "file_CCN": "1", "file_NToken": "369"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "16,18,19,20,21,22,23,24,25,26,28,37,38", "deleted_lines": "14,16,17,19,28", "method_info": {"method_name": "test_pip_install_saved_bentoservice_bundle", "method_params": "bento_bundle_path,tmpdir", "method_startline": "10", "method_endline": "57", "method_complexity": {"method_NLOC": "34", "method_CCN": "1", "method_NToken": "352", "method_nesting_level": "0"}}}}}, "file_3": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "tox.ini", "file_new_name": "tox.ini", "file_complexity": {"file_NLOC": "None", "file_CCN": "None", "file_NToken": "None"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "13,14,15", "deleted_lines": null}}}}}}