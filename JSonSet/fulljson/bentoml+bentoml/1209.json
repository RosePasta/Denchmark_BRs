{"BR": {"BR_id": "1209", "BR_author": "timlod", "BRopenT": "2020-10-27T15:25:52Z", "BRcloseT": "2020-10-27T22:29:21Z", "BR_text": {"BRsummary": "Cannot delete bento that was created with same name:version as an older (deleted) bento", "BRdescription": "\n Describe the bug\n After deleting a bento, I cannot delete another bento that was created with that same name:version.\n To Reproduce\n \n Create a bento with name:1 through model_service.save(version='1').\n In a shell, bentoml delete name:1\n Create a new bento with the same name, again with  model_service.save(version='1').\n Try to bentoml delete name:1\n \n The error is the following:\n <denchmark-code>Are you sure about delete name:1? This will delete the BentoService saved bundle files permanently [y/N]: y                                                                                                                                            \n [2020-10-27 15:22:33,477] ERROR - RPC ERROR DangerouslyDeleteBento: Multiple rows were found for one()                                                                                                                                                    \n Error: bentoml-cli delete failed: INTERNAL:Multiple rows were found for one() \n </denchmark-code>\n \n Expected behavior\n I can endlessly delete and recreate bentos with the same name/version for testing.\n Environment:\n \n OS: Ubuntu 20.04\n Python 3.8.5\n BentoML Version 0.9.2\n \n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "timlod", "commentT": "2020-10-27T19:11:16Z", "comment_text": "\n \t\tThanks <denchmark-link:https://github.com/timlod>@timlod</denchmark-link>\n \n I found the issue and will submit a PR to fix this.\n \t\t"}}}, "commit": {"commit_id": "fa0c147ed29a21200f5a1abad2658054caafedfe", "commit_author": "Bozhao", "commitT": "2020-10-27 15:29:21-07:00", "commit_complexity": {"commit_NLOC": "1.0", "commit_CCN": "1.0", "commit_Nprams": "1.0"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "bentoml\\yatai\\repository\\metadata_store.py", "file_new_name": "bentoml\\yatai\\repository\\metadata_store.py", "file_complexity": {"file_NLOC": "214", "file_CCN": "23", "file_NToken": "1234"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "218", "deleted_lines": "218", "method_info": {"method_name": "dangerously_delete", "method_params": "self,bento_name,bento_version", "method_startline": "213", "method_endline": "231", "method_complexity": {"method_NLOC": "19", "method_CCN": "3", "method_NToken": "84", "method_nesting_level": "1"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "159", "deleted_lines": "159", "method_info": {"method_name": "get", "method_params": "self,bento_name,bento_version", "method_startline": "151", "method_endline": "168", "method_complexity": {"method_NLOC": "16", "method_CCN": "4", "method_NToken": "101", "method_nesting_level": "1"}}}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "tests\\yatai\\client\\test_bento_repository_api.py", "file_new_name": "tests\\yatai\\client\\test_bento_repository_api.py", "file_complexity": {"file_NLOC": "38", "file_CCN": "3", "file_NToken": "270"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "36,37,38,39,40,41,42,43,44,45,46,47", "deleted_lines": null, "method_info": {"method_name": "test_dangerously_delete", "method_params": "example_bento_service_class", "method_startline": "36", "method_endline": "47", "method_complexity": {"method_NLOC": "12", "method_CCN": "1", "method_NToken": "91", "method_nesting_level": "0"}}}}}}}}