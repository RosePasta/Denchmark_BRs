{"BR": {"BR_id": "663", "BR_author": "jesudasvf", "BRopenT": "2020-05-16T08:13:24Z", "BRcloseT": "2020-05-16T20:35:34Z", "BR_text": {"BRsummary": "Error in execution of \"bentoml get\" cli command", "BRdescription": "\n Describe the bug\n just started to use bentoml 0.7.6 / bentoml 0.7.5 on Windows 10, with Python 3.6.8, TensorFlow-GPU 1.14.0 and Keras 2.2.4. Facing issue in using bentoml cli commands.\n To Reproduce\n Steps to reproduce the behavior:\n \n Created a bentoml service with a working model which was trained with Keras and TensorFlow-GPU 1.14.0\n The created service was saved to the default location\n Wanted to get the details of the saved service using cli command \"bentoml get servicename\"\n On execution of the command the error occurs which indicates that a particular python package \"fnctl\" is not found\n \n Expected behavior\n The bentoml cli command get should have displayed the details of the saved service\n Screenshots/Logs\n (spemoenv) C:\\SL_Projects\\SpeechEmotionRecognition\\SpeechEmoReco_HireAi>bentoml get SpeechEmoClassificationService\n Traceback (most recent call last):\n File \"C:\\Python368\\lib\\runpy.py\", line 193, in run_module_as_main\n \"main\", mod_spec)\n File \"C:\\Python368\\lib\\runpy.py\", line 85, in run_code\n exec(code, run_globals)\n File \"C:\\SL_Projects\\SpeechEmotionRecognition\\spemoenv\\Scripts\\bentoml.exe_main.py\", line 4, in \n File \"c:\\sl_projects\\speechemotionrecognition\\spemoenv\\lib\\site-packages\\bentoml\\cli_init.py\", line 42, in \n from bentoml.server.marshal_server import MarshalService, GunicornMarshalServer\n File \"c:\\sl_projects\\speechemotionrecognition\\spemoenv\\lib\\site-packages\\bentoml\\server\\marshal_server.py\", line 20, in \n from gunicorn.app.base import Application\n File \"c:\\sl_projects\\speechemotionrecognition\\spemoenv\\lib\\site-packages\\gunicorn\\app\\base.py\", line 11, in \n from gunicorn import util\n File \"c:\\sl_projects\\speechemotionrecognition\\spemoenv\\lib\\site-packages\\gunicorn\\util.py\", line 9, in \n import fcntl\n ModuleNotFoundError: No module named 'fcntl'\n (spemoenv) C:\\SL_Projects\\SpeechEmotionRecognition\\SpeechEmoReco_HireAi>\n The same error occurs for bentoml version 0.7.6/ 0.7.5/ 0.7.4\n Is there any dependent package which needs to be version specific?\n <denchmark-link:https://github.com/bentoml/BentoML/files/4638014/bentoml_cli_issue_packages.txt>bentoml_cli_issue_packages.txt</denchmark-link>\n \n Environment:\n \n OS: Windows 10 Pro ver 1909\n Python 3.6.8. /BentoML Version 0.7.6 / 0.7.5 / 0.7.4\n \n Additional context\n The problem occurs with bentoml version 07.6 , 0.7.5 and 0.7.4\n The list of the python packages installed in the python project environment is attached for reference.\n Thanks !\n <denchmark-link:https://github.com/bentoml/BentoML/files/4638022/bentoml_cli_issue_packages.txt>bentoml_cli_issue_packages.txt</denchmark-link>\n \n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "jesudasvf", "commentT": "2020-05-16T20:39:02Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/jesudasvf>@jesudasvf</denchmark-link>\n  the fix has just been merged, it will be available in the coming releases soon.\n If you have the same issue with using bentoml get command on windows platform to get the saved path, here's a temporary workaround for version 0.7.3-0.7.5:\n \n The file path is actually the returned value of BentoService#save and the path will also be printed to the stdout, when creating the BentoML saved bundle.\n The saved bundle files can be found under ~/bentoml/repository which is the default location\n \n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "jesudasvf", "commentT": "2020-05-28T18:14:36Z", "comment_text": "\n \t\tThe new release of the bentoml 0.7.7 contains the resolution to this issue. The bentoml cli commands work well on windows.\n (spemoenv) C:\\SL_Projects\\bentoml_keras_textclassifier\\src>bentoml get KerasTextClassificationService\n BENTO_SERVICE                                         AGE                     APIS                  ARTIFACTS\n KerasTextClassificationService:20200528134039_19A4FF  2 hours and 43 minutes  predict  model, word_index\n KerasTextClassificationService:20200528133101_9EAC78  2 hours and 52 minutes  predict  model, word_index\n (spemoenv) C:\\SL_Projects\\bentoml_keras_textclassifier\\src>bentoml get SpeechEmpClassificationService\n BENTO_SERVICE    AGE    APIS    ARTIFACTS\n (spemoenv) C:\\SL_Projects\\bentoml_keras_textclassifier\\src>bentoml get SpeechEmoClassificationService\n BENTO_SERVICE                                             AGE                     APIS                  ARTIFACTS\n SpeechEmoClassificationService:1.4.20200528114740_628E70  4 hours and 37 minutes  predict  model\n SpeechEmoClassificationService:1.4.20200528114617_085CD8  4 hours and 38 minutes  predict  model\n SpeechEmoClassificationService:1.4.20200528104254_F946C0  5 hours and 37 minutes  predict  model\n SpeechEmoClassificationService:1.4.20200525201501_458BEB  2 days and 20 hours     predict  model\n SpeechEmoClassificationService:1.4.20200520190222_C124DE  1 week and 21 hours     predict  model\n SpeechEmoClassificationService:1.4.20200520185908_90DA1E  1 week and 21 hours     predict  model\n SpeechEmoClassificationService:1.4.20200520120635_354E8F  1 week and 1 day        predict  model\n SpeechEmoClassificationService:1.4.20200520115038_D770A2  1 week and 1 day        predict  model\n SpeechEmoClassificationService:1.4.20200520112932_BE93D9  1 week and 1 day        predict  model\n SpeechEmoClassificationService:1.4.20200519230110_46E79D  1 week and 1 day        predict  model\n SpeechEmoClassificationService:1.4.20200519225052_D07EAD  1 week and 1 day        predict  model\n SpeechEmoClassificationService:1.4.20200519223630_A5E4FF  1 week and 1 day        predict  model\n SpeechEmoClassificationService:1.4.20200518204038_1AEAEB  1 week and 2 days       predict  model\n SpeechEmoClassificationService:1.4.20200518203932_7A3293  1 week and 2 days       predict  model\n SpeechEmoClassificationService:1.4.20200517223217_7FE7D6  1 week and 3 days       predict  model\n SpeechEmoClassificationService:1.4.20200517223041_9DCBAF  1 week and 3 days       predict  model\n SpeechEmoClassificationService:1.4.20200517222706_A98E6F  1 week and 3 days       predict  model\n SpeechEmoClassificationService:1.4.20200517222515_B20E82  1 week and 3 days       predict  model\n SpeechEmoClassificationService:1.4.20200517221747_E16D49  1 week and 3 days       predict  model\n SpeechEmoClassificationService:1.4.20200517221648_78B654  1 week and 3 days       predict  model\n SpeechEmoClassificationService:1.4.20200517221620_03F2EC  1 week and 3 days       predict  model\n SpeechEmoClassificationService:1.4.20200517221533_8D705C  1 week and 3 days       predict  model\n SpeechEmoClassificationService:1.4.20200517221444_CEDD4D  1 week and 3 days       predict  model\n SpeechEmoClassificationService:1.4.20200517221412_949CF1  1 week and 3 days       predict  model\n SpeechEmoClassificationService:1.4.20200517221340_D372B1  1 week and 3 days       predict  model\n SpeechEmoClassificationService:1.4.20200517221309_F666EA  1 week and 3 days       predict  model\n SpeechEmoClassificationService:1.4.20200517221239_3AC055  1 week and 3 days       predict  model\n SpeechEmoClassificationService:1.4.20200517221211_40C8BA  1 week and 3 days       predict  model\n SpeechEmoClassificationService:1.4.20200517221140_0BC267  1 week and 3 days       predict  model\n SpeechEmoClassificationService:1.4.20200517221057_70C7BE  1 week and 3 days       predict  model\n SpeechEmoClassificationService:1.4.20200517220953_D03183  1 week and 3 days       predict  model\n SpeechEmoClassificationService:1.4.20200516224433_08D93B  1 week and 4 days       predict  model\n SpeechEmoClassificationService:1.4.20200516203752_2223E2  1 week and 4 days       predict  model\n SpeechEmoClassificationService:1.4.20200516125813_997B0B  1 week and 5 days       predict  model\n SpeechEmoClassificationService:1.4.20200516125522_132FCB  1 week and 5 days       predict  model\n \t\t"}}}, "commit": {"commit_id": "746b16899acbb36bbdfacac3fae16609ebd015ad", "commit_author": "hrmthw", "commitT": "2020-05-16 13:35:33-07:00", "commit_complexity": {"commit_NLOC": "0.14814814814814814", "commit_CCN": "0.0", "commit_Nprams": "1.0"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": ".travis.yml", "file_new_name": ".travis.yml", "file_complexity": {"file_NLOC": "None", "file_CCN": "None", "file_NToken": "None"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "5,6,13,14,18,19,20,21,22,23,24,25,26,27,28,34", "deleted_lines": "5,12"}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "bentoml\\bundler\\config.py", "file_new_name": "bentoml\\bundler\\config.py", "file_complexity": {"file_NLOC": "133", "file_CCN": "29", "file_NToken": "862"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "100,102,111", "deleted_lines": "101,110", "method_info": {"method_name": "load", "method_params": "cls,filepath", "method_startline": "95", "method_endline": "119", "method_complexity": {"method_NLOC": "20", "method_CCN": "4", "method_NToken": "125", "method_nesting_level": "1"}}}}}, "file_2": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "bentoml\\cli\\__init__.py", "file_new_name": "bentoml\\cli\\__init__.py", "file_complexity": {"file_NLOC": "361", "file_CCN": "27", "file_NToken": "1688"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "336,337,338,339,340,341,363,365", "deleted_lines": null, "method_info": {"method_name": "create_bento_service_cli", "method_params": "pip_installed_bundle_path", "method_startline": "102", "method_endline": "421", "method_complexity": {"method_NLOC": "171", "method_CCN": "6", "method_NToken": "720", "method_nesting_level": "0"}}}}}, "file_3": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "bentoml\\utils\\pip_pkg.py", "file_new_name": "bentoml\\utils\\pip_pkg.py", "file_complexity": {"file_NLOC": "159", "file_CCN": "56", "file_NToken": "1035"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "84,85,86", "deleted_lines": null, "method_info": {"method_name": "__init__", "method_params": "self", "method_startline": "65", "method_endline": "92", "method_complexity": {"method_NLOC": "27", "method_CCN": "7", "method_NToken": "204", "method_nesting_level": "1"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,179,180,181,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203", "deleted_lines": "148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,169,170,171,172,173,174,175,176,177,178,180,181,182,183,184,185,186,187,188,189", "method_info": {"method_name": "seek_in_file", "method_params": "self,file_path", "method_startline": "148", "method_endline": "203", "method_complexity": {"method_NLOC": "48", "method_CCN": "19", "method_NToken": "333", "method_nesting_level": "1"}}}}}, "file_4": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "tests\\cli\\test_cli.py", "file_new_name": "tests\\cli\\test_cli.py", "file_complexity": {"file_NLOC": "47", "file_CCN": "3", "file_NToken": "213"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "4,7,47", "deleted_lines": null}}}, "file_5": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "tests\\test_bundle_local_dependencies.py", "file_new_name": "tests\\test_bundle_local_dependencies.py", "file_complexity": {"file_NLOC": "39", "file_CCN": "3", "file_NToken": "202"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "42", "deleted_lines": "42", "method_info": {"method_name": "run_test_with_bento_service_class", "method_params": "bento_service_class", "method_startline": "10", "method_endline": "44", "method_complexity": {"method_NLOC": "25", "method_CCN": "1", "method_NToken": "143", "method_nesting_level": "0"}}}}}, "file_6": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "tests\\test_pip_install_saved_bundle.py", "file_new_name": "tests\\test_pip_install_saved_bundle.py", "file_complexity": {"file_NLOC": "54", "file_CCN": "5", "file_NToken": "467"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "29,30,31,36,37,38,39,40,52,53,54,55", "deleted_lines": "20,25,37", "method_info": {"method_name": "test_pip_install_saved_bentoservice_bundle", "method_params": "bento_bundle_path,tmpdir", "method_startline": "19", "method_endline": "75", "method_complexity": {"method_NLOC": "42", "method_CCN": "3", "method_NToken": "411", "method_nesting_level": "0"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "12,13,14,15", "deleted_lines": null, "method_info": {"method_name": "format_path", "method_params": "path_str", "method_startline": "12", "method_endline": "15", "method_complexity": {"method_NLOC": "4", "method_CCN": "2", "method_NToken": "25", "method_nesting_level": "0"}}}}}, "file_7": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "tests\\test_service_env.py", "file_new_name": "tests\\test_service_env.py", "file_complexity": {"file_NLOC": "86", "file_CCN": "11", "file_NToken": "649"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "3,4,5,71,96", "deleted_lines": null}}}}}}