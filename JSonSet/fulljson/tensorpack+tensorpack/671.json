{"BR": {"BR_id": "671", "BR_author": "anthony123", "BRopenT": "2018-02-25T07:02:46Z", "BRcloseT": "2018-02-26T04:32:34Z", "BR_text": {"BRsummary": "problem encountered when I conduct distributed training", "BRdescription": "\n I encountered a problem when  i run my distributed training code, the  error traces are as follows:\n <denchmark-link:https://user-images.githubusercontent.com/4050099/36638940-cee8895c-1a3b-11e8-801d-dafa56cb3390.png></denchmark-link>\n \n my code is <denchmark-link:https://github.com/anthony123/learnit/blob/master/cifar10-sparse-densenet-bc-exp.py>here</denchmark-link>\n \n I launch my code as:\n python cifar10-sparse-densenet-bc-exp.py --gpu=0,1,2,3 --job worker --task 0\n when I use trainer\n <denchmark-code>trainer = SyncMultiGPUTrainerParameterServer(len(args.gpu.split(',')))\n launch_train_with_config(config, trainer)\n </denchmark-code>\n \n there will be no problem\n Any suggestion is appreciated.\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "anthony123", "commentT": "2018-02-25T15:50:28Z", "comment_text": "\n \t\t\n You're using a very old tensorpack. Please upgrade and try again.\n Tensorflow does not have a native fast distributed trainer. Only horovod trainer can get a reasonable speedup.\n \n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "anthony123", "commentT": "2018-02-26T02:18:05Z", "comment_text": "\n \t\tWhen i upgrade tensorpack to 0.8.1, there is another error has appeared. the error traces are as follows:\n <denchmark-link:https://user-images.githubusercontent.com/4050099/36650334-d77a5c06-1add-11e8-9c74-6d3339ee5040.png></denchmark-link>\n \n Next i will try horovod trainer ,see if it can give me a reasonable speedup\n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "anthony123", "commentT": "2018-02-26T04:33:39Z", "comment_text": "\n \t\tThe above commit should fix the problem. Another way to fix the problem is to upgrade your tensorflow to 1.5\n \t\t"}}}, "commit": {"commit_id": "afa11399172a787ed6fb510e53eaf504aa4b84ab", "commit_author": "Yuxin Wu", "commitT": "2018-02-25 20:32:16-08:00", "commit_complexity": {"commit_NLOC": "None", "commit_CCN": "None", "commit_Nprams": "None"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "tensorpack\\callbacks\\monitor.py", "file_new_name": "tensorpack\\callbacks\\monitor.py", "file_complexity": {"file_NLOC": "289", "file_CCN": "87", "file_NToken": "1899"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "111", "deleted_lines": null, "method_info": {"method_name": "__init__", "method_params": "self,monitors", "method_startline": "110", "method_endline": "114", "method_complexity": {"method_NLOC": "5", "method_CCN": "2", "method_NToken": "46", "method_nesting_level": "1"}}}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "tensorpack\\graph_builder\\distributed.py", "file_new_name": "tensorpack\\graph_builder\\distributed.py", "file_complexity": {"file_NLOC": "248", "file_CCN": "36", "file_NToken": "1566"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "290,291", "deleted_lines": "282", "method_info": {"method_name": "build", "method_params": "self,get_grad_fn,get_opt_fn", "method_startline": "258", "method_endline": "312", "method_complexity": {"method_NLOC": "29", "method_CCN": "4", "method_NToken": "217", "method_nesting_level": "1"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "234,239,240,241,243,244,245,246,247,248,249,253", "deleted_lines": "237,238,239,241,245", "method_info": {"method_name": "_shadow_model_variables", "method_params": "shadow_vars", "method_startline": "227", "method_endline": "256", "method_complexity": {"method_NLOC": "23", "method_CCN": "5", "method_NToken": "153", "method_nesting_level": "1"}}}}}, "file_2": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "tensorpack\\graph_builder\\utils.py", "file_new_name": "tensorpack\\graph_builder\\utils.py", "file_complexity": {"file_NLOC": "142", "file_CCN": "37", "file_NToken": "954"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "59", "deleted_lines": "59", "method_info": {"method_name": "override_to_local_variable", "method_params": "enable", "method_startline": "38", "method_endline": "62", "method_complexity": {"method_NLOC": "21", "method_CCN": "5", "method_NToken": "104", "method_nesting_level": "0"}}}}}, "file_3": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "tensorpack\\train\\base.py", "file_new_name": "tensorpack\\train\\base.py", "file_complexity": {"file_NLOC": "212", "file_CCN": "42", "file_NToken": "1382"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "146,147,148,159,162", "deleted_lines": null, "method_info": {"method_name": "_register_callback", "method_params": "self,cb", "method_startline": "139", "method_endline": "162", "method_complexity": {"method_NLOC": "14", "method_CCN": "5", "method_NToken": "92", "method_nesting_level": "1"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "196,198,199,200", "deleted_lines": "192,193", "method_info": {"method_name": "setup_callbacks", "method_params": "self,callbacks,monitors", "method_startline": "181", "method_endline": "206", "method_complexity": {"method_NLOC": "16", "method_CCN": "5", "method_NToken": "117", "method_nesting_level": "1"}}}}}, "file_4": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "tensorpack\\train\\trainers.py", "file_new_name": "tensorpack\\train\\trainers.py", "file_complexity": {"file_NLOC": "243", "file_CCN": "36", "file_NToken": "1528"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "217", "deleted_lines": "217"}}}}}}