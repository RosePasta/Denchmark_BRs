{"BR": {"BR_id": "364", "BR_author": "chunfuchen", "BRopenT": "2017-08-07T16:09:54Z", "BRcloseT": "2017-08-07T16:26:56Z", "BR_text": {"BRsummary": "global_step number is incorrect after resume", "BRdescription": "\n After resuming a model trained at global_step=475000, the next global_step jumps to 955000 directly. Here is the log:\n <denchmark-code>[0807 10:55:08 @steps.py:71] Start training with global_step=475000\n [0807 10:55:11 @param.py:144] learning_rate at epoch 96 will change to 0.00001000\n [0807 10:55:12 @concurrency.py:36] Starting EnqueueThread ...\n [0807 10:55:12 @input_source.py:418] Pre-filling staging area ...\n [0807 10:55:12 @base.py:200] Start Epoch 96 ...\n 100%|############################################################################################|5000/5000[51:14<00:00, 0.66it/s]\n [0807 11:46:26 @base.py:210] Epoch 96 (global_step 955000) finished, time:3074.13 sec.\n </denchmark-code>\n \n It seems that the global_step is messed after resuming. (955000 = 475000 + 480000, in my training, 5000 iters = 1 epoch); but the learning rate scheduler still wokrs fine and the epoch num is correct.\n Do I need to maintain the global_step by myself?\n Here is the command of my execution:\n <denchmark-code>python3 examples/ResNet/imagenet-resnet.py -d 50 --gpu 0,1,2,3 --load $SOMEWHERE\n </denchmark-code>\n \n Thanks.\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "chunfuchen", "commentT": "2018-04-03T02:57:43Z", "comment_text": "\n \t\tActually, I think the number is correct here. Since you are resuming the interrupted training process, not retraining a pretrained model, the epoch number should follow previous process. As in your case, the model is stopped at No. 475000 iteration (475000/5000 = 95 epoch)\uff0c the resumed epoch number should be 96. <denchmark-link:https://github.com/chunfuchen>@chunfuchen</denchmark-link>\n \n \t\t"}}}, "commit": {"commit_id": "5b681a95f141c7e2d37114a577d05cc73c33b7c9", "commit_author": "Yuxin Wu", "commitT": "2017-08-07 09:26:35-07:00", "commit_complexity": {"commit_NLOC": "None", "commit_CCN": "None", "commit_Nprams": "None"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "tensorpack\\train\\base.py", "file_new_name": "tensorpack\\train\\base.py", "file_complexity": {"file_NLOC": "156", "file_CCN": "34", "file_NToken": "1016"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "182", "deleted_lines": "182", "method_info": {"method_name": "global_step", "method_params": "self", "method_startline": "176", "method_endline": "185", "method_complexity": {"method_NLOC": "7", "method_CCN": "2", "method_NToken": "45", "method_nesting_level": "1"}}}}}}}}