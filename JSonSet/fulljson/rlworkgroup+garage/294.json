{"BR": {"BR_id": "294", "BR_author": "ryanjulian", "BRopenT": "2018-08-17T05:13:54Z", "BRcloseT": "2018-10-09T05:16:37Z", "BR_text": {"BRsummary": "DmControlEnv is broken", "BRdescription": "\n Traceback (most recent call last):\n   File \"/home/rjulian/code/garage/scripts/run_experiment.py\", line 225, in <module>\n     run_experiment(sys.argv)\n   File \"/home/rjulian/code/garage/scripts/run_experiment.py\", line 205, in run_experiment\n     method_call(variant_data)\n   File \"trpo_dm_control_cartpole.py\", line 32, in run_task\n     algo.train()\n   File \"/home/rjulian/code/garage/garage/tf/algos/batch_polopt.py\", line 123, in train\n     paths = self.obtain_samples(itr)\n   File \"/home/rjulian/code/garage/garage/tf/algos/batch_polopt.py\", line 104, in obtain_samples\n     return self.sampler.obtain_samples(itr)\n   File \"/home/rjulian/code/garage/garage/tf/samplers/vectorized_sampler.py\", line 61, in obtain_samples\n     actions, agent_infos = policy.get_actions(obses)\n   File \"/home/rjulian/code/garage/sandbox/embed2learn/policies/gaussian_mlp_policy.py\", line 274, in get_actions\n     actions, means, log_stds = self.f_dist(flat_obs)\n   File \"/home/rjulian/code/garage/garage/tf/misc/tensor_utils.py\", line 11, in run\n     return sess.run(outputs, feed_dict=dict(list(zip(inputs, input_vals))))\n   File \"/home/rjulian/miniconda2/envs/garage/lib/python3.6/site-packages/tensorflow/python/client/session.py\", line 900, in run\n     run_metadata_ptr)\n   File \"/home/rjulian/miniconda2/envs/garage/lib/python3.6/site-packages/tensorflow/python/client/session.py\", line 1104, in _run\n     np_val = np.asarray(subfeed_val, dtype=subfeed_dtype)\n   File \"/home/rjulian/.local/lib/python3.6/site-packages/numpy/core/numeric.py\", line 492, in asarray\n     return array(a, dtype, copy=False, order=order)\n TypeError: float() argument must be a string or a number, not 'collections.OrderedDict'\n Launcher\n from garage.baselines import LinearFeatureBaseline\n from garage.envs.dm_control import DmControlEnv\n from garage.misc.instrument import run_experiment\n from garage.tf.algos import TRPO\n from garage.tf.envs import TfEnv\n from garage.tf.policies import GaussianMLPPolicy\n \n \n def run_task(*_):\n     env = TfEnv(DmControlEnv(domain_name='cartpole', task_name='balance'))\n \n     policy = GaussianMLPPolicy(\n         env_spec=env.spec,\n         hidden_sizes=(32, 32),\n     )\n \n     baseline = LinearFeatureBaseline(env_spec=env.spec)\n \n     algo = TRPO(\n         env=env,\n         policy=policy,\n         baseline=baseline,\n         batch_size=4000,\n         max_path_length=100,\n         n_itr=400,\n         discount=0.99,\n         step_size=0.01,\n         plot=True,\n     )\n     algo.train()\n \n \n run_experiment(\n     run_task,\n     n_parallel=1,\n     snapshot_mode=\"last\",\n     plot=True,\n )\n \t"}, "comments": {}}, "commit": {"commit_id": "f798f1eac543bd7716c3a5a1d03b7d95e88da65f", "commit_author": "Jonathon Shen", "commitT": "2018-10-08 22:06:01-07:00", "commit_complexity": {"commit_NLOC": "0.55", "commit_CCN": "1.0", "commit_Nprams": "0.925"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "garage\\envs\\dm_control\\dm_control_env.py", "file_new_name": "garage\\envs\\dm_control\\dm_control_env.py", "file_complexity": {"file_NLOC": "66", "file_CCN": "16", "file_NToken": "471"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "43,44,45", "deleted_lines": "43,44", "method_info": {"method_name": "step", "method_params": "self,action", "method_startline": "38", "method_endline": "45", "method_complexity": {"method_NLOC": "8", "method_CCN": "2", "method_NToken": "59", "method_nesting_level": "1"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "50", "deleted_lines": "49", "method_info": {"method_name": "reset", "method_params": "self", "method_startline": "47", "method_endline": "50", "method_complexity": {"method_NLOC": "4", "method_CCN": "1", "method_NToken": "29", "method_nesting_level": "1"}}}}}, "file_1": {"file_change_type": "RENAME", "file_Nmethod": 0, "file_old_name": "tests\\garage\\envs\\dm_control\\__init__.py", "file_new_name": "tests\\dm_control\\__init__.py", "file_complexity": {"file_NLOC": "None", "file_CCN": "None", "file_NToken": "None"}}, "file_2": {"file_change_type": "ADD", "file_Nmethod": 0, "file_old_name": "None", "file_new_name": "tests\\dm_control\\test_dm_control_envs.py", "file_complexity": {"file_NLOC": "7", "file_CCN": "0", "file_NToken": "56"}}, "file_3": {"file_change_type": "ADD", "file_Nmethod": 0, "file_old_name": "None", "file_new_name": "tests\\dm_control\\test_dm_control_tf_policy.py", "file_complexity": {"file_NLOC": "28", "file_CCN": "1", "file_NToken": "173"}}, "file_4": {"file_change_type": "ADD", "file_Nmethod": 0, "file_old_name": "None", "file_new_name": "tests\\dm_control\\test_dm_control_theano_policy.py", "file_complexity": {"file_NLOC": "27", "file_CCN": "1", "file_NToken": "162"}}, "file_5": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "tests\\fixtures\\__init__.py", "file_new_name": "tests\\fixtures\\__init__.py", "file_complexity": {"file_NLOC": "7", "file_CCN": "0", "file_NToken": "43"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "1,2,3,4,5,6,7,8", "deleted_lines": "1"}}}, "file_6": {"file_change_type": "MODIFY", "file_Nmethod": 6, "file_old_name": "tests\\fixtures\\fixtures.py", "file_new_name": "tests\\fixtures\\fixtures.py", "file_complexity": {"file_NLOC": "51", "file_CCN": "9", "file_NToken": "371"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "42,43,44", "deleted_lines": null, "method_info": {"method_name": "__init__", "method_params": "self,method_name,param", "method_startline": "42", "method_endline": "44", "method_complexity": {"method_NLOC": "3", "method_CCN": "1", "method_NToken": "44", "method_nesting_level": "1"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "66,67", "deleted_lines": null, "method_info": {"method_name": "test_pickling", "method_params": "self", "method_startline": "66", "method_endline": "67", "method_complexity": {"method_NLOC": "2", "method_CCN": "1", "method_NToken": "18", "method_nesting_level": "1"}}}, "hunk_2": {"Ismethod": 1, "added_lines": "47,48,49,50,51,52,53", "deleted_lines": null, "method_info": {"method_name": "parameterize", "method_params": "child_class,param", "method_startline": "47", "method_endline": "53", "method_complexity": {"method_NLOC": "7", "method_CCN": "2", "method_NToken": "51", "method_nesting_level": "1"}}}, "hunk_3": {"Ismethod": 1, "added_lines": "19,20,21,22", "deleted_lines": null, "method_info": {"method_name": "tearDown", "method_params": "self", "method_startline": "19", "method_endline": "22", "method_complexity": {"method_NLOC": "4", "method_CCN": "1", "method_NToken": "21", "method_nesting_level": "1"}}}, "hunk_4": {"Ismethod": 1, "added_lines": "57,58,59,60,61,62,63,64", "deleted_lines": null, "method_info": {"method_name": "test_can_step_and_render", "method_params": "self", "method_startline": "57", "method_endline": "64", "method_complexity": {"method_NLOC": "8", "method_CCN": "1", "method_NToken": "63", "method_nesting_level": "1"}}}, "hunk_5": {"Ismethod": 1, "added_lines": "16,17", "deleted_lines": null, "method_info": {"method_name": "setUp", "method_params": "self", "method_startline": "15", "method_endline": "17", "method_complexity": {"method_NLOC": "3", "method_CCN": "1", "method_NToken": "21", "method_nesting_level": "1"}}}}}, "file_7": {"file_change_type": "DELETE", "file_Nmethod": 0, "file_old_name": "tests\\garage\\envs\\dm_control\\test_dm_control.py", "file_new_name": "None", "file_complexity": {"file_NLOC": "None", "file_CCN": "None", "file_NToken": "None"}}, "file_8": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "tests\\garage\\tf\\algos\\test_ppo.py", "file_new_name": "tests\\garage\\tf\\algos\\test_ppo.py", "file_complexity": {"file_NLOC": "42", "file_CCN": "1", "file_NToken": "224"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "15,18", "deleted_lines": "15,18"}}}, "file_9": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "tests\\garage\\tf\\algos\\test_trpo.py", "file_new_name": "tests\\garage\\tf\\algos\\test_trpo.py", "file_complexity": {"file_NLOC": "42", "file_CCN": "1", "file_NToken": "224"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "15,18", "deleted_lines": "15,18"}}}, "file_10": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "tests\\garage\\tf\\baselines\\test_baselines.py", "file_new_name": "tests\\garage\\tf\\baselines\\test_baselines.py", "file_complexity": {"file_NLOC": "14", "file_CCN": "1", "file_NToken": "78"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "8,12", "deleted_lines": "8,12"}}}, "file_11": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "tests\\garage\\tf\\policies\\test_categorical_policies.py", "file_new_name": "tests\\garage\\tf\\policies\\test_categorical_policies.py", "file_complexity": {"file_NLOC": "38", "file_CCN": "1", "file_NToken": "225"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "17,22", "deleted_lines": "17,22"}}}, "file_12": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "tests\\garage\\tf\\policies\\test_gaussian_policies.py", "file_new_name": "tests\\garage\\tf\\policies\\test_gaussian_policies.py", "file_complexity": {"file_NLOC": "41", "file_CCN": "1", "file_NToken": "251"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "19,24", "deleted_lines": "19,24"}}}, "file_13": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "tests\\garage\\tf\\policies\\test_policies.py", "file_new_name": "tests\\garage\\tf\\policies\\test_policies.py", "file_complexity": {"file_NLOC": "34", "file_CCN": "1", "file_NToken": "228"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "14,18", "deleted_lines": "14,18"}}}, "file_14": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "tests\\garage\\tf\\spaces\\test_dict_space.py", "file_new_name": "tests\\garage\\tf\\spaces\\test_dict_space.py", "file_complexity": {"file_NLOC": "24", "file_CCN": "2", "file_NToken": "187"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "19", "deleted_lines": "19,23,24,25", "method_info": {"method_name": "test_dict_space", "method_params": "self", "method_startline": "10", "method_endline": "41", "method_complexity": {"method_NLOC": "18", "method_CCN": "2", "method_NToken": "151", "method_nesting_level": "1"}}}}}, "file_15": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "tests\\helpers.py", "file_new_name": "tests\\helpers.py", "file_complexity": {"file_NLOC": "42", "file_CCN": "5", "file_NToken": "257"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": null, "deleted_lines": "15,16,17", "method_info": {"method_name": "tearDown", "method_params": "self", "method_startline": "15", "method_endline": "17", "method_complexity": {"method_NLOC": "3", "method_CCN": "1", "method_NToken": "24", "method_nesting_level": "1"}}}, "hunk_1": {"Ismethod": 1, "added_lines": null, "deleted_lines": "11,12,13", "method_info": {"method_name": "setUp", "method_params": "self", "method_startline": "11", "method_endline": "13", "method_complexity": {"method_NLOC": "3", "method_CCN": "1", "method_NToken": "21", "method_nesting_level": "1"}}}}}}}}