{"BR": {"BR_id": "1455", "BR_author": "AiRuiChen", "BRopenT": "2020-05-29T04:18:52Z", "BRcloseT": "2020-05-30T06:55:10Z", "BR_text": {"BRsummary": "tar --auto-compress flag doesn't work on MacOS", "BRdescription": "\n I get a tar option not found error when running examples calling experiment.py on MacOS:\n python garage/examples/tf/trpo_cartpole.py\n tar: Option --auto-compress is not supported\n Found that linux has tar as gnu tar, whereas MacOS has tar as bsdtar, which by default doesn't support --auto-compress.\n Suggested fixes <denchmark-link:https://github.com/rlworkgroup/garage/blob/master/src/garage/experiment/experiment.py#L728>here</denchmark-link>\n :\n 1: Add MacOS  dependency to install  for Mac users, and change  to  if os is MacOS in code.\n 2: Remove  if os is MacOS. Caveat: this can result in files compressed in different ways across linux and MacOS.\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "AiRuiChen", "commentT": "2020-05-29T17:20:01Z", "comment_text": "\n \t\tRather than using --auto-compress, can we just force xz compression in all cases? I think this just chooses based on the file extension for convenience.\n Alternatively, calling subprocess is kind of hacky and exposes us to underlying OS deps (as this shows). Can we use zipfile or shutil? <denchmark-link:https://github.com/krzentner>@krzentner</denchmark-link>\n  is there a reason you didn't use the stdlib versions here?\n See:\n <denchmark-link:https://docs.python.org/3.5/library/shutil.html#shutil.make_archive>https://docs.python.org/3.5/library/shutil.html#shutil.make_archive</denchmark-link>\n \n <denchmark-link:https://docs.python.org/3.5/library/archiving.html>https://docs.python.org/3.5/library/archiving.html</denchmark-link>\n \n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "AiRuiChen", "commentT": "2020-05-29T22:49:57Z", "comment_text": "\n \t\t\n Rather than using --auto-compress, can we just force xz compression in all cases? I think this just chooses based on the file extension for convenience.\n Alternatively, calling subprocess is kind of hacky and exposes us to underlying OS deps (as this shows). Can we use zipfile or shutil? @krzentner is there a reason you didn't use the stdlib versions here?\n See:\n https://docs.python.org/3.5/library/shutil.html#shutil.make_archive\n https://docs.python.org/3.5/library/archiving.html\n \n I agree that avoiding subprocess call is a good practice. If we decide to switch I can take over and create a PR.\n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "AiRuiChen", "commentT": "2020-05-29T22:57:30Z", "comment_text": "\n \t\tDo what you think is best! The big risk of using stdlib is avoiding loading all the files into memory (they could be huge). Otherwise, it would be better not to be calling out to subprocess.\n \t\t"}}}, "commit": {"commit_id": "19f944dc3f62db7a0afbb67114668e1d75389b19", "commit_author": "Eric Yihan Chen", "commitT": "2020-05-29 23:55:09-07:00", "commit_complexity": {"commit_NLOC": "None", "commit_CCN": "None", "commit_Nprams": "None"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "src\\garage\\experiment\\experiment.py", "file_new_name": "src\\garage\\experiment\\experiment.py", "file_complexity": {"file_NLOC": "447", "file_CCN": "62", "file_NToken": "2492"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "728,729", "deleted_lines": "728,729", "method_info": {"method_name": "make_launcher_archive", "method_params": "git_root_path,log_dir", "method_startline": "701", "method_endline": "732", "method_complexity": {"method_NLOC": "25", "method_CCN": "5", "method_NToken": "160", "method_nesting_level": "0"}}}}}}}}