{"BR": {"BR_id": "213", "BR_author": "Maxfashko", "BRopenT": "2019-03-03T04:10:03Z", "BRcloseT": "2019-03-03T19:59:59Z", "BR_text": {"BRsummary": "GaussNoise does not work correctly on small images", "BRdescription": "\n <denchmark-h:h2>\ud83d\udc1b Bug</denchmark-h>\n \n Hi Vladimir!\n The error lies in the fact that the GaussNoise method does not work correctly on small pictures (i tested 128*64), since the argument var requires an integer value:  GaussNoise(var_limit=(1, 1), always_apply=False, p=1)\n <denchmark-link:https://files.slack.com/files-pri/T040HKJE3-FGMFW433R/image.png>https://files.slack.com/files-pri/T040HKJE3-FGMFW433R/image.png</denchmark-link>\n \n It helped for me:\n <denchmark-code>def add_gaussian_noise(image_in, noise_sigma):\n     temp_image = np.float64(np.copy(image_in))\n \n     h = temp_image.shape[0]\n     w = temp_image.shape[1]\n     noise = np.random.randn(h, w) * noise_sigma\n \n     noisy_image = np.zeros(temp_image.shape, np.float64)\n     if len(temp_image.shape) == 2:\n         noisy_image = temp_image + noise\n     else:\n         noisy_image[:,:,0] = temp_image[:,:,0] + noise\n         noisy_image[:,:,1] = temp_image[:,:,1] + noise\n         noisy_image[:,:,2] = temp_image[:,:,2] + noise\n \n     return noisy_image\n </denchmark-code>\n \n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "Maxfashko", "commentT": "2019-03-03T19:37:41Z", "comment_text": "\n \t\tlooks like it does not work for float32 but works correctly for uint8\n \t\t"}}}, "commit": {"commit_id": "b01e8a58ed3fb24e633f31264c1eb63ca7a1f5ad", "commit_author": "Alexander Buslaev", "commitT": "2019-03-03 11:59:59-08:00", "commit_complexity": {"commit_NLOC": "1.0", "commit_CCN": "1.0", "commit_Nprams": "1.0"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "albumentations\\augmentations\\functional.py", "file_new_name": "albumentations\\augmentations\\functional.py", "file_complexity": {"file_NLOC": "573", "file_CCN": "134", "file_NToken": "5552"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "593,594", "deleted_lines": "593,594", "method_info": {"method_name": "gauss_noise", "method_params": "image,gauss", "method_startline": "592", "method_endline": "594", "method_complexity": {"method_NLOC": "3", "method_CCN": "1", "method_NToken": "19", "method_nesting_level": "0"}}}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 3, "file_old_name": "albumentations\\augmentations\\transforms.py", "file_new_name": "albumentations\\augmentations\\transforms.py", "file_complexity": {"file_NLOC": "1054", "file_CCN": "136", "file_NToken": "6286"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "1102", "deleted_lines": "1102", "method_info": {"method_name": "__init__", "method_params": "self,var_limit,50", "method_startline": "1102", "method_endline": "1104", "method_complexity": {"method_NLOC": "3", "method_CCN": "1", "method_NToken": "44", "method_nesting_level": "1"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "1111,1116", "deleted_lines": "1111", "method_info": {"method_name": "get_params_dependent_on_targets", "method_params": "self,params", "method_startline": "1109", "method_endline": "1119", "method_complexity": {"method_NLOC": "11", "method_CCN": "1", "method_NToken": "94", "method_nesting_level": "1"}}}, "hunk_2": {"Ismethod": 1, "added_lines": "1102", "deleted_lines": "1102", "method_info": {"method_name": "__init__", "method_params": "self,var_limit", "method_startline": "1102", "method_endline": "1104", "method_complexity": {"method_NLOC": "3", "method_CCN": "1", "method_NToken": "46", "method_nesting_level": "1"}}}}}}}}