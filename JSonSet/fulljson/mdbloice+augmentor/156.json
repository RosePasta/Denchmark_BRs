{"BR": {"BR_id": "156", "BR_author": "maartenterpstra", "BRopenT": "2019-01-09T12:21:28Z", "BRcloseT": "2019-03-07T11:28:24Z", "BR_text": {"BRsummary": "Calling status on a pipeline without labels results in error", "BRdescription": "\n Hi, I try to use this library for transforming my first set of images with a known ground truth. These have no labels, I just want transformed images for use with my network. Therefore, I try to follow the DataPipeline example as follows:\n <denchmark-code>>> import glob\n >> import numpy\n >> from PIL import Image\n >> import Augmentor\n >> ref_imgs = glob.glob('./reference_images/**/*.jpg')\n >> imgs = glob.glob('./images/**/*.jpg')\n >> collated = list(zip(ref_imgs, imgs))\n >> len(collated)\n 130475\n >> images = [[np.asarray(Image.open(y)) for y in x] for x in collated]\n >> p = Augmentor.DataPipeline(images)\n >> p.rotate(1, max_left_rotation=5, max_right_rotation=5)\n >> p.flip_top_bottom(0.5)\n >> p.zoom_random(1, percentage_area=0.5)\n >> p.status()\n Operations: 3\n \t0: RotateRange (probability=1 max_left_rotation=-5 max_right_rotation=5 )\n \t1: Flip (probability=0.5 top_bottom_left_right=TOP_BOTTOM )\n \t2: ZoomRandom (probability=1 percentage_area=0.5 randomise=False )\n Images: 130475\n Traceback (most recent call last):\n   File \"<stdin>\", line 1, in <module>\n   File \"/local_scratch2/mterpst5/anaconda3/lib/python3.7/site-packages/Augmentor/Pipeline.py\", line 798, in status\n     label_pairs = sorted(set([x.label_pair for x in self.augmentor_images]))\n   File \"/local_scratch2/mterpst5/anaconda3/lib/python3.7/site-packages/Augmentor/Pipeline.py\", line 798, in <listcomp>\n     label_pairs = sorted(set([x.label_pair for x in self.augmentor_images]))\n AttributeError: 'list' object has no attribute 'label_pair'\n </denchmark-code>\n \n This should not happen because my data has no labels. I suppose a check should be in place to make sure labels are present.\n Thanks\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "maartenterpstra", "commentT": "2019-01-23T07:51:43Z", "comment_text": "\n \t\tI reproduce the same bug. For now you can comment out p.status() to avoid the error. The remaining of the pipeline works perfectly.\n P.S. also remember to use\n <denchmark-code>augmented_images = p.sample(10)\n </denchmark-code>\n \n rather than\n <denchmark-code>augmented_images, labels = p.sample(10)\n </denchmark-code>\n \n in following steps.\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "maartenterpstra", "commentT": "2019-03-07T10:44:46Z", "comment_text": "\n \t\tHi @mlterpstra-umc, <denchmark-link:https://github.com/Charles-Lu>@Charles-Lu</denchmark-link>\n  this is definitely a bug with the  function, thanks to both of you for rooting it out, I will fix ASAP.\n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "maartenterpstra", "commentT": "2019-03-07T11:35:21Z", "comment_text": "\n \t\tOk so I have made a quick bug fix, this fix won't appear in the pip installed version of Augmentor until I make a version update which will happen a little later.\n \t\t"}}}, "commit": {"commit_id": "e6ef7bc73d5790c864d3977f7cc4e2e9905c03f5", "commit_author": "Marcus Bloice", "commitT": "2019-03-07 12:28:02+01:00", "commit_complexity": {"commit_NLOC": "0.0", "commit_CCN": "0.0", "commit_Nprams": "1.0"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "Augmentor\\Pipeline.py", "file_new_name": "Augmentor\\Pipeline.py", "file_complexity": {"file_NLOC": "687", "file_CCN": "229", "file_NToken": "5225"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "803,804,805,806,807,808,809,811,812,814,815,816,817", "deleted_lines": "803,805,807,808", "method_info": {"method_name": "status", "method_params": "self", "method_startline": "772", "method_endline": "827", "method_complexity": {"method_NLOC": "28", "method_CCN": "12", "method_NToken": "246", "method_nesting_level": "1"}}}}}}}}