{"BR": {"BR_id": "740", "BR_author": "GuillaumeDSM", "BRopenT": "2019-03-18T23:10:35Z", "BRcloseT": "2019-12-30T16:02:50Z", "BR_text": {"BRsummary": "[RunInAsyncMainLoop] problem with exchange commands", "BRdescription": "\n Happens when auto opening web interface when starting the bot\n when using real trader\n 2019-03-18 22:50:14,829 ERROR    run_coroutine_in_asyncio_loop <coroutine object TradesManager.get_profitability at 0x7faa30127248> coroutine coroutine too long, cancelling the task.\n 2019-03-18 22:50:14,830 ERROR    flask.app            Exception on /dashboard/profitability [GET]\n Traceback (most recent call last):\n File \"site-packages/flask/app.py\", line 2292, in wsgi_app\n File \"site-packages/flask/app.py\", line 1815, in full_dispatch_request\n File \"site-packages/flask/app.py\", line 1718, in handle_user_exception\n File \"site-packages/flask/_compat.py\", line 35, in reraise\n File \"site-packages/flask/app.py\", line 1813, in full_dispatch_request\n File \"site-packages/flask/app.py\", line 1799, in dispatch_request\n File \"interfaces/web/controllers/dashboard.py\", line 56, in profitability\n File \"interfaces/trading_util.py\", line 223, in get_global_profitability\n File \"octobot.py\", line 363, in run_in_main_asyncio_loop\n File \"tools/asyncio_tools.py\", line 31, in run_coroutine_in_asyncio_loop\n File \"tools/asyncio_tools.py\", line 26, in run_coroutine_in_asyncio_loop\n File \"concurrent/futures/_base.py\", line 434, in result\n concurrent.futures._base.TimeoutError\n 2019-03-18 22:50:14,837 ERROR    TradesManager\n 2019-03-18 22:50:14,837 ERROR    TradesManager\n Traceback (most recent call last):\n File \"trading/trader/trades_manager.py\", line 133, in get_profitability\n File \"trading/trader/trades_manager.py\", line 208, in update_portfolio_and_currencies_current_value\n File \"asyncio/locks.py\", line 92, in aenter\n File \"asyncio/locks.py\", line 187, in acquire\n concurrent.futures._base.CancelledError\n other error:\n 2019-03-18 23:10:17,398 DEBUG    OrdersManager        Order added to open orders (currently 51 open order(s))\n 2019-03-18 23:10:28,514 ERROR    run_coroutine_in_asyncio_loop <coroutine object TradesManager.get_profitability at 0x7f1c5c3ff1c8> coroutine coroutine too long, cancelling the task.\n 2019-03-18 23:10:28,515 ERROR    flask.app            Exception on /dashboard/profitability [GET]\n Traceback (most recent call last):\n File \"site-packages/flask/app.py\", line 2292, in wsgi_app\n File \"site-packages/flask/app.py\", line 1815, in full_dispatch_request\n File \"site-packages/flask/app.py\", line 1718, in handle_user_exception\n File \"site-packages/flask/_compat.py\", line 35, in reraise\n File \"site-packages/flask/app.py\", line 1813, in full_dispatch_request\n File \"site-packages/flask/app.py\", line 1799, in dispatch_request\n File \"interfaces/web/controllers/dashboard.py\", line 56, in profitability\n File \"interfaces/trading_util.py\", line 223, in get_global_profitability\n File \"octobot.py\", line 363, in run_in_main_asyncio_loop\n File \"tools/asyncio_tools.py\", line 31, in run_coroutine_in_asyncio_loop\n File \"tools/asyncio_tools.py\", line 26, in run_coroutine_in_asyncio_loop\n File \"concurrent/futures/_base.py\", line 434, in result\n concurrent.futures._base.TimeoutError\n 2019-03-18 23:10:28,515 ERROR    TradesManager\n 2019-03-18 23:10:28,519 ERROR    TradesManager\n Traceback (most recent call last):\n File \"trading/trader/trades_manager.py\", line 133, in get_profitability\n File \"trading/trader/trades_manager.py\", line 211, in update_portfolio_and_currencies_current_value\n File \"trading/trader/trades_manager.py\", line 233, in _update_portfolio_current_value\n File \"trading/trader/trades_manager.py\", line 288, in _evaluate_portfolio_value\n File \"trading/trader/trades_manager.py\", line 288, in \n File \"trading/trader/trades_manager.py\", line 296, in _get_currency_value\n File \"trading/trader/trades_manager.py\", line 305, in _evaluate_value\n File \"trading/trader/trades_manager.py\", line 246, in _try_get_value_of_currency\n File \"trading/trader/trades_manager.py\", line 117, in _update_currencies_prices\n File \"trading/exchanges/exchange_dispatcher.py\", line 192, in get_price_ticker\n File \"trading/exchanges/rest_exchanges/rest_exchange.py\", line 152, in get_price_ticker\n File \"site-packages/ccxt/async_support/binance.py\", line 479, in fetch_ticker\n File \"site-packages/ccxt/async_support/binance.py\", line 1227, in request\n File \"site-packages/ccxt/async_support/base/exchange.py\", line 113, in fetch2\n concurrent.futures._base.CancelledError\n 2019-03-18 23:11:28,509 ERROR    run_coroutine_in_asyncio_loop <coroutine object TradesManager.get_profitability at 0x7f1c5e889cc8> coroutine coroutine too long, cancelling the task.\n 2019-03-18 23:11:28,510 ERROR    flask.app            Exception on /dashboard/profitability [GET]\n Traceback (most recent call last):\n File \"site-packages/flask/app.py\", line 2292, in wsgi_app\n File \"site-packages/flask/app.py\", line 1815, in full_dispatch_request\n File \"site-packages/flask/app.py\", line 1718, in handle_user_exception\n File \"site-packages/flask/_compat.py\", line 35, in reraise\n File \"site-packages/flask/app.py\", line 1813, in full_dispatch_request\n File \"site-packages/flask/app.py\", line 1799, in dispatch_request\n File \"interfaces/web/controllers/dashboard.py\", line 56, in profitability\n File \"interfaces/trading_util.py\", line 223, in get_global_profitability\n File \"octobot.py\", line 363, in run_in_main_asyncio_loop\n File \"tools/asyncio_tools.py\", line 31, in run_coroutine_in_asyncio_loop\n File \"tools/asyncio_tools.py\", line 26, in run_coroutine_in_asyncio_loop\n File \"concurrent/futures/_base.py\", line 434, in result\n concurrent.futures._base.TimeoutError\n 2019-03-18 23:11:28,511 ERROR    TradesManager\n 2019-03-18 23:11:28,514 ERROR    TradesManager\n Traceback (most recent call last):\n File \"trading/trader/trades_manager.py\", line 134, in get_profitability\n File \"trading/trader/trades_manager.py\", line 226, in _get_origin_portfolio_current_value\n File \"trading/trader/trades_manager.py\", line 233, in _update_portfolio_current_value\n File \"trading/trader/trades_manager.py\", line 288, in _evaluate_portfolio_value\n File \"trading/trader/trades_manager.py\", line 288, in \n File \"trading/trader/trades_manager.py\", line 296, in _get_currency_value\n File \"trading/trader/trades_manager.py\", line 305, in _evaluate_value\n File \"trading/trader/trades_manager.py\", line 246, in _try_get_value_of_currency\n File \"trading/trader/trades_manager.py\", line 117, in _update_currencies_prices\n File \"trading/exchanges/exchange_dispatcher.py\", line 192, in get_price_ticker\n File \"trading/exchanges/rest_exchanges/rest_exchange.py\", line 152, in get_price_ticker\n File \"site-packages/ccxt/async_support/binance.py\", line 479, in fetch_ticker\n File \"site-packages/ccxt/async_support/binance.py\", line 1227, in request\n File \"site-packages/ccxt/async_support/base/exchange.py\", line 113, in fetch2\n concurrent.futures._base.CancelledError\n 2019-03-18 23:11:43,547 ERROR    run_coroutine_in_asyncio_loop <coroutine object TradesManager.get_profitability at 0x7f1c5c3d8b48> coroutine coroutine too long, cancelling the task.\n 2019-03-18 23:11:43,548 ERROR    flask.app            Exception on /dashboard/profitability [GET]\n Traceback (most recent call last):\n File \"site-packages/flask/app.py\", line 2292, in wsgi_app\n File \"site-packages/flask/app.py\", line 1815, in full_dispatch_request\n File \"site-packages/flask/app.py\", line 1718, in handle_user_exception\n File \"site-packages/flask/_compat.py\", line 35, in reraise\n File \"site-packages/flask/app.py\", line 1813, in full_dispatch_request\n File \"site-packages/flask/app.py\", line 1799, in dispatch_request\n File \"interfaces/web/controllers/dashboard.py\", line 56, in profitability\n File \"interfaces/trading_util.py\", line 223, in get_global_profitability\n File \"octobot.py\", line 363, in run_in_main_asyncio_loop\n File \"tools/asyncio_tools.py\", line 31, in run_coroutine_in_asyncio_loop\n File \"tools/asyncio_tools.py\", line 26, in run_coroutine_in_asyncio_loop\n File \"concurrent/futures/_base.py\", line 434, in result\n concurrent.futures._base.TimeoutError\n 2019-03-18 23:11:43,549 ERROR    TradesManager\n 2019-03-18 23:11:43,552 ERROR    TradesManager\n Traceback (most recent call last):\n File \"trading/trader/trades_manager.py\", line 134, in get_profitability\n File \"trading/trader/trades_manager.py\", line 226, in _get_origin_portfolio_current_value\n File \"trading/trader/trades_manager.py\", line 233, in _update_portfolio_current_value\n File \"trading/trader/trades_manager.py\", line 288, in _evaluate_portfolio_value\n File \"trading/trader/trades_manager.py\", line 288, in \n File \"trading/trader/trades_manager.py\", line 296, in _get_currency_value\n File \"trading/trader/trades_manager.py\", line 305, in _evaluate_value\n File \"trading/trader/trades_manager.py\", line 246, in _try_get_value_of_currency\n File \"trading/trader/trades_manager.py\", line 117, in _update_currencies_prices\n File \"trading/exchanges/exchange_dispatcher.py\", line 192, in get_price_ticker\n File \"trading/exchanges/rest_exchanges/rest_exchange.py\", line 152, in get_price_ticker\n File \"site-packages/ccxt/async_support/binance.py\", line 479, in fetch_ticker\n File \"site-packages/ccxt/async_support/binance.py\", line 1227, in request\n File \"site-packages/ccxt/async_support/base/exchange.py\", line 113, in fetch2\n concurrent.futures._base.CancelledError\n 2019-03-18 23:11:58,510 ERROR    run_coroutine_in_asyncio_loop <coroutine object TradesManager.get_profitability at 0x7f1c5c3ffcc8> coroutine coroutine too long, cancelling the task.\n 2019-03-18 23:11:58,511 ERROR    flask.app            Exception on /dashboard/profitability [GET]\n Traceback (most recent call last):\n File \"site-packages/flask/app.py\", line 2292, in wsgi_app\n File \"site-packages/flask/app.py\", line 1815, in full_dispatch_request\n File \"site-packages/flask/app.py\", line 1718, in handle_user_exception\n File \"site-packages/flask/_compat.py\", line 35, in reraise\n File \"site-packages/flask/app.py\", line 1813, in full_dispatch_request\n File \"site-packages/flask/app.py\", line 1799, in dispatch_request\n File \"interfaces/web/controllers/dashboard.py\", line 56, in profitability\n File \"interfaces/trading_util.py\", line 223, in get_global_profitability\n File \"octobot.py\", line 363, in run_in_main_asyncio_loop\n File \"tools/asyncio_tools.py\", line 31, in run_coroutine_in_asyncio_loop\n File \"tools/asyncio_tools.py\", line 26, in run_coroutine_in_asyncio_loop\n File \"concurrent/futures/_base.py\", line 434, in result\n concurrent.futures._base.TimeoutError\n 2019-03-18 23:11:58,512 ERROR    TradesManager\n 2019-03-18 23:11:58,515 ERROR    TradesManager\n Traceback (most recent call last):\n File \"trading/trader/trades_manager.py\", line 134, in get_profitability\n File \"trading/trader/trades_manager.py\", line 226, in _get_origin_portfolio_current_value\n File \"trading/trader/trades_manager.py\", line 233, in _update_portfolio_current_value\n File \"trading/trader/trades_manager.py\", line 288, in _evaluate_portfolio_value\n File \"trading/trader/trades_manager.py\", line 288, in \n File \"trading/trader/trades_manager.py\", line 296, in _get_currency_value\n File \"trading/trader/trades_manager.py\", line 305, in _evaluate_value\n File \"trading/trader/trades_manager.py\", line 246, in _try_get_value_of_currency\n File \"trading/trader/trades_manager.py\", line 117, in _update_currencies_prices\n File \"trading/exchanges/exchange_dispatcher.py\", line 192, in get_price_ticker\n File \"trading/exchanges/rest_exchanges/rest_exchange.py\", line 152, in get_price_ticker\n File \"site-packages/ccxt/async_support/binance.py\", line 479, in fetch_ticker\n File \"site-packages/ccxt/async_support/binance.py\", line 1227, in request\n File \"site-packages/ccxt/async_support/base/exchange.py\", line 113, in fetch2\n concurrent.futures._base.CancelledError\n 2019-03-18 23:12:58,511 ERROR    run_coroutine_in_asyncio_loop <coroutine object TradesManager.get_profitability at 0x7f1c5e889cc8> coroutine coroutine too long, cancelling the task.\n 2019-03-18 23:12:58,512 ERROR    flask.app            Exception on /dashboard/profitability [GET]\n Traceback (most recent call last):\n File \"site-packages/flask/app.py\", line 2292, in wsgi_app\n File \"site-packages/flask/app.py\", line 1815, in full_dispatch_request\n File \"site-packages/flask/app.py\", line 1718, in handle_user_exception\n File \"site-packages/flask/_compat.py\", line 35, in reraise\n File \"site-packages/flask/app.py\", line 1813, in full_dispatch_request\n File \"site-packages/flask/app.py\", line 1799, in dispatch_request\n File \"interfaces/web/controllers/dashboard.py\", line 56, in profitability\n File \"interfaces/trading_util.py\", line 223, in get_global_profitability\n File \"octobot.py\", line 363, in run_in_main_asyncio_loop\n File \"tools/asyncio_tools.py\", line 31, in run_coroutine_in_asyncio_loop\n File \"tools/asyncio_tools.py\", line 26, in run_coroutine_in_asyncio_loop\n File \"concurrent/futures/_base.py\", line 434, in result\n concurrent.futures._base.TimeoutError\n 2019-03-18 23:12:58,513 ERROR    TradesManager\n 2019-03-18 23:12:58,516 ERROR    TradesManager\n Traceback (most recent call last):\n File \"trading/trader/trades_manager.py\", line 134, in get_profitability\n File \"trading/trader/trades_manager.py\", line 226, in _get_origin_portfolio_current_value\n File \"trading/trader/trades_manager.py\", line 233, in _update_portfolio_current_value\n File \"trading/trader/trades_manager.py\", line 288, in _evaluate_portfolio_value\n File \"trading/trader/trades_manager.py\", line 288, in \n File \"trading/trader/trades_manager.py\", line 296, in _get_currency_value\n File \"trading/trader/trades_manager.py\", line 305, in _evaluate_value\n File \"trading/trader/trades_manager.py\", line 246, in _try_get_value_of_currency\n File \"trading/trader/trades_manager.py\", line 117, in _update_currencies_prices\n File \"trading/exchanges/exchange_dispatcher.py\", line 192, in get_price_ticker\n File \"trading/exchanges/rest_exchanges/rest_exchange.py\", line 152, in get_price_ticker\n File \"site-packages/ccxt/async_support/binance.py\", line 479, in fetch_ticker\n File \"site-packages/ccxt/async_support/binance.py\", line 1227, in request\n File \"site-packages/ccxt/async_support/base/exchange.py\", line 113, in fetch2\n concurrent.futures._base.CancelledError\n 2019-03-18 23:13:13,515 ERROR    run_coroutine_in_asyncio_loop <coroutine object TradesManager.get_profitability at 0x7f1c5c3d8ac8> coroutine coroutine too long, cancelling the task.\n 2019-03-18 23:13:13,516 ERROR    flask.app            Exception on /dashboard/profitability [GET]\n Traceback (most recent call last):\n File \"site-packages/flask/app.py\", line 2292, in wsgi_app\n File \"site-packages/flask/app.py\", line 1815, in full_dispatch_request\n File \"site-packages/flask/app.py\", line 1718, in handle_user_exception\n File \"site-packages/flask/_compat.py\", line 35, in reraise\n File \"site-packages/flask/app.py\", line 1813, in full_dispatch_request\n File \"site-packages/flask/app.py\", line 1799, in dispatch_request\n File \"interfaces/web/controllers/dashboard.py\", line 56, in profitability\n File \"interfaces/trading_util.py\", line 223, in get_global_profitability\n File \"octobot.py\", line 363, in run_in_main_asyncio_loop\n File \"tools/asyncio_tools.py\", line 31, in run_coroutine_in_asyncio_loop\n File \"tools/asyncio_tools.py\", line 26, in run_coroutine_in_asyncio_loop\n File \"concurrent/futures/_base.py\", line 434, in result\n concurrent.futures._base.TimeoutError\n 2019-03-18 23:13:13,519 ERROR    TradesManager\n 2019-03-18 23:13:13,521 ERROR    TradesManager\n Traceback (most recent call last):\n File \"trading/trader/trades_manager.py\", line 134, in get_profitability\n File \"trading/trader/trades_manager.py\", line 226, in _get_origin_portfolio_current_value\n File \"trading/trader/trades_manager.py\", line 233, in _update_portfolio_current_value\n File \"trading/trader/trades_manager.py\", line 288, in _evaluate_portfolio_value\n File \"trading/trader/trades_manager.py\", line 288, in \n File \"trading/trader/trades_manager.py\", line 296, in _get_currency_value\n File \"trading/trader/trades_manager.py\", line 305, in _evaluate_value\n File \"trading/trader/trades_manager.py\", line 246, in _try_get_value_of_currency\n File \"trading/trader/trades_manager.py\", line 117, in _update_currencies_prices\n File \"trading/exchanges/exchange_dispatcher.py\", line 192, in get_price_ticker\n File \"trading/exchanges/rest_exchanges/rest_exchange.py\", line 152, in get_price_ticker\n File \"site-packages/ccxt/async_support/binance.py\", line 479, in fetch_ticker\n File \"site-packages/ccxt/async_support/binance.py\", line 1227, in request\n File \"site-packages/ccxt/async_support/base/exchange.py\", line 113, in fetch2\n concurrent.futures._base.CancelledError\n 2019-03-18 23:13:28,524 ERROR    run_coroutine_in_asyncio_loop <coroutine object TradesManager.get_profitability at 0x7f1c5c3d8b48> coroutine coroutine too long, cancelling the task.\n 2019-03-18 23:13:28,525 ERROR    flask.app            Exception on /dashboard/profitability [GET]\n Traceback (most recent call last):\n File \"site-packages/flask/app.py\", line 2292, in wsgi_app\n File \"site-packages/flask/app.py\", line 1815, in full_dispatch_request\n File \"site-packages/flask/app.py\", line 1718, in handle_user_exception\n File \"site-packages/flask/_compat.py\", line 35, in reraise\n File \"site-packages/flask/app.py\", line 1813, in full_dispatch_request\n File \"site-packages/flask/app.py\", line 1799, in dispatch_request\n File \"interfaces/web/controllers/dashboard.py\", line 56, in profitability\n File \"interfaces/trading_util.py\", line 223, in get_global_profitability\n File \"octobot.py\", line 363, in run_in_main_asyncio_loop\n File \"tools/asyncio_tools.py\", line 31, in run_coroutine_in_asyncio_loop\n File \"tools/asyncio_tools.py\", line 26, in run_coroutine_in_asyncio_loop\n File \"concurrent/futures/_base.py\", line 434, in result\n concurrent.futures._base.TimeoutError\n 2019-03-18 23:13:28,530 ERROR    TradesManager\n 2019-03-18 23:13:28,531 ERROR    TradesManager\n Traceback (most recent call last):\n File \"trading/trader/trades_manager.py\", line 134, in get_profitability\n File \"trading/trader/trades_manager.py\", line 226, in _get_origin_portfolio_current_value\n File \"trading/trader/trades_manager.py\", line 233, in _update_portfolio_current_value\n File \"trading/trader/trades_manager.py\", line 288, in _evaluate_portfolio_value\n File \"trading/trader/trades_manager.py\", line 288, in \n File \"trading/trader/trades_manager.py\", line 296, in _get_currency_value\n File \"trading/trader/trades_manager.py\", line 305, in _evaluate_value\n File \"trading/trader/trades_manager.py\", line 246, in _try_get_value_of_currency\n File \"trading/trader/trades_manager.py\", line 117, in _update_currencies_prices\n File \"trading/exchanges/exchange_dispatcher.py\", line 192, in get_price_ticker\n File \"trading/exchanges/rest_exchanges/rest_exchange.py\", line 152, in get_price_ticker\n File \"site-packages/ccxt/async_support/binance.py\", line 479, in fetch_ticker\n File \"site-packages/ccxt/async_support/binance.py\", line 1227, in request\n File \"site-packages/ccxt/async_support/base/exchange.py\", line 116, in fetch2\n File \"site-packages/ccxt/async_support/base/exchange.py\", line 138, in fetch\n File \"site-packages/aiohttp/client.py\", line 1005, in aenter\n File \"site-packages/aiohttp/client.py\", line 497, in _request\n File \"site-packages/aiohttp/client_reqrep.py\", line 844, in start\n File \"site-packages/aiohttp/streams.py\", line 588, in read\n concurrent.futures._base.CancelledError\n \t"}, "comments": {}}, "commit": {"commit_id": "63feb38c08a90f882e9a8c7489adf34eb75c76f5", "commit_author": "Guillaume De Saint Martin", "commitT": "2019-04-07 18:06:37+02:00", "commit_complexity": {"commit_NLOC": "None", "commit_CCN": "None", "commit_Nprams": "None"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "config\\__init__.py", "file_new_name": "config\\__init__.py", "file_complexity": {"file_NLOC": "461", "file_CCN": "1", "file_NToken": "1660"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "89", "deleted_lines": "89"}}}}}}