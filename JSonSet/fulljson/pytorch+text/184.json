{"BR": {"BR_id": "184", "BR_author": "kylegao91", "BRopenT": "2017-11-20T20:38:10Z", "BRcloseT": "2017-12-22T20:25:56Z", "BR_text": {"BRsummary": "Side effect in Vocab __init__", "BRdescription": "\n The constructor of Vocab accumulates input data in its specials argument/variable and pollute the input argument counter.  The constructed object is also wrong because of this side effect.  Please find reproducible example below:\n <denchmark-code>>>> c1 = Counter([1])\n >>> v1 = Vocab(c1)\n >>> print(c1)\n Counter({1: 1, u'<pad>': 0})\n >>> print(v1.stoi)\n defaultdict(<function _default_unk_index at 0x10b4aa758>, {1: 1, u'<pad>': 0})\n \n >>> c2 = Counter([2])\n >>> print(c2)\n Counter({2: 1})\n >>> v2 = Vocab(c2)\n >>> print(c2)\n Counter({2: 1, 1: 0, u'<pad>': 0}) # c2 is changed after passing as argument\n >>> print(v2.stoi)\n defaultdict(<function _default_unk_index at 0x10b4aa758>, {1: 1, u'<pad>': 0, 2: 2}) # resulting vocabulary is wrong\n </denchmark-code>\n \n \t"}, "comments": {}}, "commit": {"commit_id": "256ebcd6c516378dae2674998410dfd8dc7e4519", "commit_author": "jekbradbury", "commitT": "2017-12-22 15:25:55-05:00", "commit_complexity": {"commit_NLOC": "None", "commit_CCN": "None", "commit_Nprams": "None"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "torchtext\\vocab.py", "file_new_name": "torchtext\\vocab.py", "file_complexity": {"file_NLOC": "257", "file_CCN": "64", "file_NToken": "2212"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "48,49", "deleted_lines": "48"}}}}}}