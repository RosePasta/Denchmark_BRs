{"BR": {"BR_id": "171", "BR_author": "LMescheder", "BRopenT": "2017-11-09T15:58:21Z", "BRcloseT": "2017-12-22T23:39:28Z", "BR_text": {"BRsummary": "len of iterator incorrect for dynamic batching", "BRdescription": "\n The  method of  (defined <denchmark-link:https://github.com/pytorch/text/blob/master/torchtext/data/iterator.py#L157>here</denchmark-link>\n ) returns a wrong result for dynamic batching (i.e. if <denchmark-link:https://github.com/pytorch/text/blob/master/torchtext/data/iterator.py#L50>batch_size_fn</denchmark-link>\n  is not None).\n For example if we set batch_size_fn to\n <denchmark-code>lambda x, n, b: b + len(x.text)\n </denchmark-code>\n \n there might be more or fewer batches in the dataset than the __len__ outputs.\n \t"}, "comments": {}}, "commit": {"commit_id": "bd5aa7850b67a42933c33913ab417d7fd7649ae4", "commit_author": "jekbradbury", "commitT": "2017-12-22 18:39:27-05:00", "commit_complexity": {"commit_NLOC": "1.0", "commit_CCN": "0.0", "commit_Nprams": "0.3333333333333333"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 6, "file_old_name": "torchtext\\data\\iterator.py", "file_new_name": "torchtext\\data\\iterator.py", "file_complexity": {"file_NLOC": "238", "file_CCN": "47", "file_NToken": "1370"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "75", "deleted_lines": "75", "method_info": {"method_name": "__init__", "method_params": "self,dataset,batch_size,sort_key,device,batch_size_fn,train,repeat,shuffle,sort,sort_within_batch", "method_startline": "74", "method_endline": "77", "method_complexity": {"method_NLOC": "4", "method_CCN": "1", "method_NToken": "41", "method_nesting_level": "1"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "274,275", "deleted_lines": null, "method_info": {"method_name": "batch.batch_size_fn", "method_params": "new,count,sofar", "method_startline": "274", "method_endline": "275", "method_complexity": {"method_NLOC": "2", "method_CCN": "1", "method_NToken": "11", "method_nesting_level": "2"}}}, "hunk_2": {"Ismethod": 1, "added_lines": "271,273,274,275", "deleted_lines": "269", "method_info": {"method_name": "batch", "method_params": "data,batch_size,batch_size_fn,count,count", "method_startline": "269", "method_endline": "282", "method_complexity": {"method_NLOC": "13", "method_CCN": "5", "method_NToken": "102", "method_nesting_level": "0"}}}, "hunk_3": {"Ismethod": 1, "added_lines": "158,159", "deleted_lines": null, "method_info": {"method_name": "__len__", "method_params": "self", "method_startline": "157", "method_endline": "160", "method_complexity": {"method_NLOC": "4", "method_CCN": "2", "method_NToken": "31", "method_nesting_level": "1"}}}, "hunk_4": {"Ismethod": 1, "added_lines": "75", "deleted_lines": "75", "method_info": {"method_name": "__init__", "method_params": "self,dataset,batch_size,sort_key,device,batch_size_fn,count,count,train,repeat,shuffle,sort,sort_within_batch", "method_startline": "74", "method_endline": "77", "method_complexity": {"method_NLOC": "4", "method_CCN": "1", "method_NToken": "48", "method_nesting_level": "1"}}}, "hunk_5": {"Ismethod": 1, "added_lines": "271,273,274,275", "deleted_lines": null, "method_info": {"method_name": "batch", "method_params": "data,batch_size,batch_size_fn", "method_startline": "271", "method_endline": "287", "method_complexity": {"method_NLOC": "15", "method_CCN": "6", "method_NToken": "102", "method_nesting_level": "0"}}}}}}}}