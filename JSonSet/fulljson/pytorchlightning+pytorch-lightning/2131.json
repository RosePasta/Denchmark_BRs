{"BR": {"BR_id": "2131", "BR_author": "sshleifer", "BRopenT": "2020-06-09T15:01:43Z", "BRcloseT": "2020-06-30T22:09:17Z", "BR_text": {"BRsummary": "wandLogger().name is None in DDP mode", "BRdescription": "\n If you remove <denchmark-link:https://github.com/PyTorchLightning/pytorch-lightning/blob/8ca8336ce52ee7379f4d399520636143eb31018b/pytorch_lightning/trainer/callback_config.py#L54>line 54</denchmark-link>\n , everything works.\n When you're not in ddp mode, this is not an issue.\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "sshleifer", "commentT": "2020-06-09T16:35:41Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/vanpelt>@vanpelt</denchmark-link>\n  any thoughts on this?\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "sshleifer", "commentT": "2020-06-17T11:30:00Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/sshleifer>@sshleifer</denchmark-link>\n  it is caused by missing \n \n \n which comes from the wrong  init\n \n \n Do you have a minimal example which we can add among tests?\n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "sshleifer", "commentT": "2020-06-19T01:34:24Z", "comment_text": "\n \t\tUnfortunately I do not, the problem was encountered with\n Trainer(distributed_backend=\"ddp\",  logger=WandbLogger(name='hello'))\n So if you put that wherever you guys test ddp, it should suffice.\n \t\t"}, "comments_3": {"comment_id": 4, "comment_author": "sshleifer", "commentT": "2020-06-29T02:08:36Z", "comment_text": "\n \t\tI will try to write a test that (ideally for all loggers) makes sure the logger is only used in rank 0 process, therefore not creating any files on rank > 0 and then I can also make sure these NoneTypeErrors don't happen on rank > 0.\n \t\t"}}}, "commit": {"commit_id": "145670f893f43ff70866668cf087d82fe51a22a6", "commit_author": "Adrian W\u00e4lchli", "commitT": "2020-06-30 18:09:16-04:00", "commit_complexity": {"commit_NLOC": "0.5476190476190477", "commit_CCN": "0.9523809523809523", "commit_Nprams": "0.7142857142857143"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "pytorch_lightning\\callbacks\\model_checkpoint.py", "file_new_name": "pytorch_lightning\\callbacks\\model_checkpoint.py", "file_complexity": {"file_NLOC": "275", "file_CCN": "45", "file_NToken": "1360"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "319,320", "deleted_lines": null, "method_info": {"method_name": "on_validation_end", "method_params": "self,trainer,pl_module", "method_startline": "269", "method_endline": "321", "method_complexity": {"method_NLOC": "40", "method_CCN": "14", "method_NToken": "256", "method_nesting_level": "1"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "240,261,262,263", "deleted_lines": "239", "method_info": {"method_name": "on_train_start", "method_params": "self,trainer,pl_module", "method_startline": "230", "method_endline": "266", "method_complexity": {"method_NLOC": "26", "method_CCN": "7", "method_NToken": "173", "method_nesting_level": "1"}}}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 3, "file_old_name": "pytorch_lightning\\loggers\\base.py", "file_new_name": "pytorch_lightning\\loggers\\base.py", "file_complexity": {"file_NLOC": "291", "file_CCN": "67", "file_NToken": "1487"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "384,385,386,387,388,389,390,391,392", "deleted_lines": null, "method_info": {"method_name": "rank_zero_experiment", "method_params": "Callable", "method_startline": "384", "method_endline": "392", "method_complexity": {"method_NLOC": "5", "method_CCN": "1", "method_NToken": "19", "method_nesting_level": "0"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "389,390", "deleted_lines": null, "method_info": {"method_name": "rank_zero_experiment.rank_zero_experiment.experiment.get_experiment", "method_params": "", "method_startline": "389", "method_endline": "390", "method_complexity": {"method_NLOC": "2", "method_CCN": "1", "method_NToken": "9", "method_nesting_level": "2"}}}, "hunk_2": {"Ismethod": 1, "added_lines": "387,388,389,390,391", "deleted_lines": null, "method_info": {"method_name": "rank_zero_experiment.experiment", "method_params": "self", "method_startline": "387", "method_endline": "391", "method_complexity": {"method_NLOC": "4", "method_CCN": "2", "method_NToken": "17", "method_nesting_level": "1"}}}}}, "file_2": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "pytorch_lightning\\loggers\\comet.py", "file_new_name": "pytorch_lightning\\loggers\\comet.py", "file_complexity": {"file_NLOC": "200", "file_CCN": "12", "file_NToken": "727"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "34,143,196,197", "deleted_lines": "34"}}}, "file_3": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "pytorch_lightning\\loggers\\mlflow.py", "file_new_name": "pytorch_lightning\\loggers\\mlflow.py", "file_complexity": {"file_NLOC": "122", "file_CCN": "14", "file_NToken": "515"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "117,118", "deleted_lines": null, "method_info": {"method_name": "log_metrics", "method_params": "self,str,None", "method_startline": "116", "method_endline": "124", "method_complexity": {"method_NLOC": "8", "method_CCN": "3", "method_NToken": "88", "method_nesting_level": "1"}}}}}, "file_4": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "pytorch_lightning\\loggers\\neptune.py", "file_new_name": "pytorch_lightning\\loggers\\neptune.py", "file_complexity": {"file_NLOC": "355", "file_CCN": "24", "file_NToken": "991"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "23,214,253", "deleted_lines": "23"}}}, "file_5": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "pytorch_lightning\\loggers\\tensorboard.py", "file_new_name": "pytorch_lightning\\loggers\\tensorboard.py", "file_complexity": {"file_NLOC": "153", "file_CCN": "24", "file_NToken": "784"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "140,141", "deleted_lines": null, "method_info": {"method_name": "log_metrics", "method_params": "self,str,None", "method_startline": "139", "method_endline": "145", "method_complexity": {"method_NLOC": "6", "method_CCN": "3", "method_NToken": "73", "method_nesting_level": "1"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "100", "deleted_lines": null, "method_info": {"method_name": "experiment", "method_params": "self", "method_startline": "87", "method_endline": "103", "method_complexity": {"method_NLOC": "16", "method_CCN": "2", "method_NToken": "62", "method_nesting_level": "1"}}}}}, "file_6": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "pytorch_lightning\\loggers\\test_tube.py", "file_new_name": "pytorch_lightning\\loggers\\test_tube.py", "file_complexity": {"file_NLOC": "143", "file_CCN": "15", "file_NToken": "599"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "15,80", "deleted_lines": "15"}}}, "file_7": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "pytorch_lightning\\loggers\\wandb.py", "file_new_name": "pytorch_lightning\\loggers\\wandb.py", "file_complexity": {"file_NLOC": "125", "file_CCN": "15", "file_NToken": "606"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "132,133", "deleted_lines": null, "method_info": {"method_name": "log_metrics", "method_params": "self,str,None", "method_startline": "131", "method_endline": "134", "method_complexity": {"method_NLOC": "3", "method_CCN": "2", "method_NToken": "55", "method_nesting_level": "1"}}}}}, "file_8": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "pytorch_lightning\\trainer\\distrib_parts.py", "file_new_name": "pytorch_lightning\\trainer\\distrib_parts.py", "file_complexity": {"file_NLOC": "368", "file_CCN": "102", "file_NToken": "2169"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "110", "deleted_lines": null, "method_info": {"method_name": "copy_trainer_model_properties", "method_params": "self,model", "method_startline": "100", "method_endline": "119", "method_complexity": {"method_NLOC": "19", "method_CCN": "4", "method_NToken": "122", "method_nesting_level": "1"}}}}}, "file_9": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "pytorch_lightning\\trainer\\trainer.py", "file_new_name": "pytorch_lightning\\trainer\\trainer.py", "file_complexity": {"file_NLOC": "1014", "file_CCN": "103", "file_NToken": "4314"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "36,37,38,39,40,506", "deleted_lines": "362,363,505,846"}}}, "file_10": {"file_change_type": "MODIFY", "file_Nmethod": 3, "file_old_name": "tests\\loggers\\test_all.py", "file_new_name": "tests\\loggers\\test_all.py", "file_complexity": {"file_NLOC": "128", "file_CCN": "13", "file_NToken": "773"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "27,28", "deleted_lines": null, "method_info": {"method_name": "_get_logger_args", "method_params": "logger_class,save_dir", "method_startline": "21", "method_endline": "29", "method_complexity": {"method_NLOC": "9", "method_CCN": "4", "method_NToken": "76", "method_nesting_level": "0"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "156,157,158,159,160,161,162,163,164,165,166,167,168,169,170", "deleted_lines": null, "method_info": {"method_name": "test_logger_created_on_rank_zero_only", "method_params": "tmpdir,logger_class", "method_startline": "156", "method_endline": "170", "method_complexity": {"method_NLOC": "15", "method_CCN": "1", "method_NToken": "76", "method_nesting_level": "0"}}}, "hunk_2": {"Ismethod": 1, "added_lines": "138,139,140,141,142,143,144", "deleted_lines": null, "method_info": {"method_name": "on_batch_start", "method_params": "self,trainer,pl_module", "method_startline": "138", "method_endline": "144", "method_complexity": {"method_NLOC": "7", "method_CCN": "2", "method_NToken": "48", "method_nesting_level": "1"}}}}}, "file_11": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "tests\\models\\test_horovod.py", "file_new_name": "tests\\models\\test_horovod.py", "file_complexity": {"file_NLOC": "140", "file_CCN": "18", "file_NToken": "1067"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "56,74", "deleted_lines": null}}}}}}