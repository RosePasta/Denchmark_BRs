{"BR": {"BR_id": "529", "BR_author": "alumae", "BRopenT": "2019-11-20T19:38:00Z", "BRcloseT": "2019-11-21T18:27:40Z", "BR_text": {"BRsummary": "Training with DDP could fail at startup due to FileExistsError", "BRdescription": "\n In multi-GPU mode with DDP, starting the training can fail with the following error:\n <denchmark-code>Traceback (most recent call last):\n   File \"train.py\", line 109, in <module>\n     main(hyperparams)\n   File \"train.py\", line 62, in main\n     trainer.fit(model)\n   File \"/home/tanel/miniconda3/lib/python3.7/site-packages/pytorch_lightning/trainer/trainer.py\", line 343, in fit\n     mp.spawn(self.ddp_train, nprocs=self.num_gpus, args=(model,))\n   File \"/home/tanel/miniconda3/lib/python3.7/site-packages/torch/multiprocessing/spawn.py\", line 171, in spawn\n     while not spawn_context.join():\n   File \"/home/tanel/miniconda3/lib/python3.7/site-packages/torch/multiprocessing/spawn.py\", line 118, in join\n     raise Exception(msg)\n Exception: \n \n -- Process 1 terminated with the following error:\n Traceback (most recent call last):\n   File \"/home/tanel/miniconda3/lib/python3.7/site-packages/torch/multiprocessing/spawn.py\", line 19, in _wrap\n     fn(i, *args)\n   File \"/home/tanel/miniconda3/lib/python3.7/site-packages/pytorch_lightning/trainer/ddp_mixin.py\", line 181, in ddp_train\n     self.run_pretrain_routine(model)\n   File \"/home/tanel/miniconda3/lib/python3.7/site-packages/pytorch_lightning/trainer/trainer.py\", line 415, in run_pretrain_routine\n     self.configure_checkpoint_callback()\n   File \"/home/tanel/miniconda3/lib/python3.7/site-packages/pytorch_lightning/trainer/callback_config_mixin.py\", line 28, in configure_checkpoint_callback\n     filepath=ckpt_path\n   File \"/home/tanel/miniconda3/lib/python3.7/site-packages/pytorch_lightning/callbacks/pt_callbacks.py\", line 202, in __init__\n     os.makedirs(filepath)\n   File \"/home/tanel/miniconda3/lib/python3.7/os.py\", line 221, in makedirs\n     mkdir(name, mode)\n FileExistsError: [Errno 17] File exists: '/home/tanel/devel/torch-xvectors/lightning_logs/version_151/checkpoints'\n \n </denchmark-code>\n \n It happens quite rarely.\n Desktop (please complete the following information):\n \n OS: Linux\n Version 0.5.3.2 (git as of 2019-11-20)\n \n Fix is easy, I'll create a PR.\n \t"}, "comments": {}}, "commit": {"commit_id": "539d7bcb4476883771f0492b3a3774048de5163d", "commit_author": "Tanel Alum\u00e4e", "commitT": "2019-11-21 13:27:39-05:00", "commit_complexity": {"commit_NLOC": "None", "commit_CCN": "None", "commit_Nprams": "None"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "pytorch_lightning\\callbacks\\pt_callbacks.py", "file_new_name": "pytorch_lightning\\callbacks\\pt_callbacks.py", "file_complexity": {"file_NLOC": "301", "file_CCN": "51", "file_NToken": "1517"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "201", "deleted_lines": "201,202"}}}}}}