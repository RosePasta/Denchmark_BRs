{"BR": {"BR_id": "1143", "BR_author": "rmrao", "BRopenT": "2020-03-13T17:21:41Z", "BRcloseT": "2020-04-06T12:13:25Z", "BR_text": {"BRsummary": "`use_amp` is broken in 0.7.0", "BRdescription": "\n I see that use_amp is deprecated but since the Trainer still accepts it as an argument, I believe this is still a bug.\n The issue is that the <denchmark-link:https://github.com/PyTorchLightning/pytorch-lightning/blob/3c2fd560aa4d31b4f48ee225b83361deec53d9c7/pytorch_lightning/core/hooks.py#L136-L143>hook that deals with this</denchmark-link>\n  specifically checks if . However, the Trainer does not set  if .\n Proposed solution:\n if use_amp is passed in, set precision = 16 and raise a deprecation warning.\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "rmrao", "commentT": "2020-03-14T00:51:07Z", "comment_text": "\n \t\tthat s a good catch, thx! could send a fix PR? \ud83e\udd16\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "rmrao", "commentT": "2020-03-14T01:01:24Z", "comment_text": "\n \t\tSubmitted!\n \t\t"}}}, "commit": {"commit_id": "4ed3027309fe1882554e9b7ffe33f1aa92c88106", "commit_author": "Roshan Rao", "commitT": "2020-04-06 08:13:24-04:00", "commit_complexity": {"commit_NLOC": "1.0", "commit_CCN": "1.0", "commit_Nprams": "1.0"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "CHANGELOG.md", "file_new_name": "CHANGELOG.md", "file_complexity": {"file_NLOC": "None", "file_CCN": "None", "file_NToken": "None"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "84,85", "deleted_lines": null}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "pl_examples\\basic_examples\\gpu_template.py", "file_new_name": "pl_examples\\basic_examples\\gpu_template.py", "file_complexity": {"file_NLOC": "45", "file_CCN": "2", "file_NToken": "201"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "35", "deleted_lines": "35", "method_info": {"method_name": "main", "method_params": "hparams", "method_startline": "18", "method_endline": "41", "method_complexity": {"method_NLOC": "9", "method_CCN": "2", "method_NToken": "53", "method_nesting_level": "0"}}}}}, "file_2": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "pl_examples\\domain_templates\\imagenet.py", "file_new_name": "pl_examples\\domain_templates\\imagenet.py", "file_complexity": {"file_NLOC": "196", "file_CCN": "21", "file_NToken": "1419"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "229", "deleted_lines": "229", "method_info": {"method_name": "main", "method_params": "hparams", "method_startline": "218", "method_endline": "234", "method_complexity": {"method_NLOC": "17", "method_CCN": "4", "method_NToken": "99", "method_nesting_level": "0"}}}}}, "file_3": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "pytorch_lightning\\trainer\\auto_mix_precision.py", "file_new_name": "pytorch_lightning\\trainer\\auto_mix_precision.py", "file_complexity": {"file_NLOC": "24", "file_CCN": "6", "file_NToken": "84"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "21,27,28,29,30", "deleted_lines": "20,21,22,23,25", "method_info": {"method_name": "init_amp", "method_params": "self,use_amp", "method_startline": "19", "method_endline": "30", "method_complexity": {"method_NLOC": "11", "method_CCN": "4", "method_NToken": "29", "method_nesting_level": "1"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "33,34", "deleted_lines": null, "method_info": {"method_name": "use_amp", "method_params": "self", "method_startline": "33", "method_endline": "34", "method_complexity": {"method_NLOC": "2", "method_CCN": "2", "method_NToken": "15", "method_nesting_level": "1"}}}}}, "file_4": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "pytorch_lightning\\trainer\\distrib_data_parallel.py", "file_new_name": "pytorch_lightning\\trainer\\distrib_data_parallel.py", "file_complexity": {"file_NLOC": "270", "file_CCN": "46", "file_NToken": "969"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "155,156", "deleted_lines": null, "method_info": {"method_name": "use_amp", "method_params": "self", "method_startline": "155", "method_endline": "156", "method_complexity": {"method_NLOC": "2", "method_CCN": "1", "method_NToken": "8", "method_nesting_level": "1"}}}}}, "file_5": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "pytorch_lightning\\trainer\\distrib_parts.py", "file_new_name": "pytorch_lightning\\trainer\\distrib_parts.py", "file_complexity": {"file_NLOC": "515", "file_CCN": "54", "file_NToken": "1141"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "389,390", "deleted_lines": null, "method_info": {"method_name": "use_amp", "method_params": "self", "method_startline": "389", "method_endline": "390", "method_complexity": {"method_NLOC": "2", "method_CCN": "1", "method_NToken": "8", "method_nesting_level": "1"}}}}}, "file_6": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "pytorch_lightning\\trainer\\trainer.py", "file_new_name": "pytorch_lightning\\trainer\\trainer.py", "file_complexity": {"file_NLOC": "752", "file_CCN": "72", "file_NToken": "3129"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "123,124", "deleted_lines": "91,125", "method_info": {"method_name": "__init__", "method_params": "self,LightningLoggerBase,True,ModelCheckpoint,True,EarlyStopping,False,None,float,int,int,str,None,None,None,int,float,int,int,bool,int,int,1,int,int,None,None,float,float,float,float,int,int,add_row_log_interval,None,int,bool,None,str,int,None,None,None,bool,bool,gradient_clip,nb_gpu_nodes,max_nb_epochs,min_nb_epochs,use_amp,show_progress_bar,nb_sanity_val_steps,kwargs", "method_startline": "77", "method_endline": "126", "method_complexity": {"method_NLOC": "50", "method_CCN": "1", "method_NToken": "371", "method_nesting_level": "1"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "123,124", "deleted_lines": "91,125", "method_info": {"method_name": "__init__", "method_params": "self,LightningLoggerBase,True,ModelCheckpoint,True,EarlyStopping,False,None,float,int,int,str,None,None,None,show_progress_bar,int,float,int,int,bool,int,int,1,int,int,None,None,float,float,float,float,int,int,add_row_log_interval,None,int,bool,None,str,int,None,None,None,bool,bool,gradient_clip,nb_gpu_nodes,max_nb_epochs,min_nb_epochs,use_amp,nb_sanity_val_steps,kwargs", "method_startline": "78", "method_endline": "127", "method_complexity": {"method_NLOC": "50", "method_CCN": "1", "method_NToken": "371", "method_nesting_level": "1"}}}}}, "file_7": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "pytorch_lightning\\trainer\\training_loop.py", "file_new_name": "pytorch_lightning\\trainer\\training_loop.py", "file_complexity": {"file_NLOC": "542", "file_CCN": "128", "file_NToken": "2737"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": null, "deleted_lines": "203"}}}}}}