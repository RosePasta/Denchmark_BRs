{"BR": {"BR_id": "827", "BR_author": "srush", "BRopenT": "2020-02-12T17:33:30Z", "BRcloseT": "2020-03-30T16:05:24Z", "BR_text": {"BRsummary": "Support/Features for step-based models", "BRdescription": "\n <denchmark-h:h2>\ud83d\udc1b Bug+Feature</denchmark-h>\n \n For models like transformer, we utilize step-based learning rates and evaluation.\n It would be nice to have several features along this line.\n \n \n Support for step-based schedulers. Right now we use cannot give the scheduler to lightning, because it calls scheduler.step(epochs=epoch) internally which resets the scheduler.\n \n \n Fix docs for step based evaluation and checkpointing. It seems like it exists but it is hard to tell which is epochs / steps.\n \n \n Add a max_steps option for stopping training.\n \n \n Helper functions for converting between steps and epochs. For instance, from the number of epochs and parallelism, get the steps for configure_optimizers\n \n \n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "srush", "commentT": "2020-02-13T09:44:08Z", "comment_text": "\n \t\tHi <denchmark-link:https://github.com/srush>@srush</denchmark-link>\n \n For 1. I have opened issue <denchmark-link:https://github.com/PyTorchLightning/pytorch-lightning/issues/806>#806</denchmark-link>\n  to discuss about it and I will contribute this soon.\n For 3. I added PR <denchmark-link:https://github.com/PyTorchLightning/pytorch-lightning/pull/728>#728</denchmark-link>\n  that adds max/min steps for training such models.\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "srush", "commentT": "2020-02-20T13:11:15Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/srush>@srush</denchmark-link>\n  good suggestions, would you mind to send a PR for 2 and 4?\n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "srush", "commentT": "2020-02-20T13:14:24Z", "comment_text": "\n \t\twe just merged a pr <denchmark-link:https://github.com/PyTorchLightning/pytorch-lightning/pull/728>#728</denchmark-link>\n  about this\n \t\t"}, "comments_3": {"comment_id": 4, "comment_author": "srush", "commentT": "2020-03-30T16:05:24Z", "comment_text": "\n \t\tfeel free to reopen if needed \ud83e\udd16\n \t\t"}}}, "commit": {"commit_id": "969e929a482b3384c0c23777389db866bcc5c5ed", "commit_author": "William Falcon", "commitT": "2020-03-05 06:48:54-05:00", "commit_complexity": {"commit_NLOC": "0.13924050632911392", "commit_CCN": "0.5759493670886076", "commit_Nprams": "1.0"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "CHANGELOG.md", "file_new_name": "CHANGELOG.md", "file_complexity": {"file_NLOC": "None", "file_CCN": "None", "file_NToken": "None"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "27", "deleted_lines": null}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "pytorch_lightning\\core\\lightning.py", "file_new_name": "pytorch_lightning\\core\\lightning.py", "file_complexity": {"file_NLOC": "911", "file_CCN": "54", "file_NToken": "1367"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "761,762,763,764,765,766,767,768,769,785,786", "deleted_lines": null, "method_info": {"method_name": "configure_optimizers", "method_params": "self", "method_startline": "726", "method_endline": "789", "method_complexity": {"method_NLOC": "64", "method_CCN": "1", "method_NToken": "22", "method_nesting_level": "1"}}}}}, "file_2": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "pytorch_lightning\\trainer\\trainer.py", "file_new_name": "pytorch_lightning\\trainer\\trainer.py", "file_complexity": {"file_NLOC": "1095", "file_CCN": "81", "file_NToken": "3184"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "1105,1106,1107,1108,1109,1110,1111,1112,1113,1114,1115,1116,1117,1118,1119,1120,1121,1122,1123,1124,1125,1126,1127,1128,1129,1130", "deleted_lines": null, "method_info": {"method_name": "configure_schedulers", "method_params": "self,list", "method_startline": "1104", "method_endline": "1130", "method_complexity": {"method_NLOC": "23", "method_CCN": "6", "method_NToken": "152", "method_nesting_level": "1"}}}}}, "file_3": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "pytorch_lightning\\trainer\\training_io.py", "file_new_name": "pytorch_lightning\\trainer\\training_io.py", "file_complexity": {"file_NLOC": "305", "file_CCN": "67", "file_NToken": "1466"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "322,323", "deleted_lines": "323", "method_info": {"method_name": "dump_checkpoint", "method_params": "self", "method_startline": "300", "method_endline": "345", "method_complexity": {"method_NLOC": "31", "method_CCN": "10", "method_NToken": "226", "method_nesting_level": "1"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "414", "deleted_lines": null, "method_info": {"method_name": "restore_training_state", "method_params": "self,checkpoint", "method_startline": "370", "method_endline": "414", "method_complexity": {"method_NLOC": "27", "method_CCN": "14", "method_NToken": "235", "method_nesting_level": "1"}}}}}, "file_4": {"file_change_type": "MODIFY", "file_Nmethod": 3, "file_old_name": "pytorch_lightning\\trainer\\training_loop.py", "file_new_name": "pytorch_lightning\\trainer\\training_loop.py", "file_complexity": {"file_NLOC": "493", "file_CCN": "116", "file_NToken": "2418"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "712,713,714,715,716,717,718,719,720,721,722,723,724,725,726,727,728,729,730,731,732,733,734,735,736,737,738", "deleted_lines": null, "method_info": {"method_name": "update_learning_rates", "method_params": "self,interval", "method_startline": "712", "method_endline": "738", "method_complexity": {"method_NLOC": "19", "method_CCN": "8", "method_NToken": "132", "method_nesting_level": "1"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "437,438,439", "deleted_lines": null, "method_info": {"method_name": "run_training_epoch", "method_params": "self", "method_startline": "390", "method_endline": "496", "method_complexity": {"method_NLOC": "54", "method_CCN": "29", "method_NToken": "431", "method_nesting_level": "1"}}}, "hunk_2": {"Ismethod": 1, "added_lines": "364", "deleted_lines": "364,365,366,367,368,369,370,371,372,373,374", "method_info": {"method_name": "train", "method_params": "self", "method_startline": "296", "method_endline": "388", "method_complexity": {"method_NLOC": "55", "method_CCN": "23", "method_NToken": "387", "method_nesting_level": "1"}}}}}, "file_5": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "tests\\models\\__init__.py", "file_new_name": "tests\\models\\__init__.py", "file_complexity": {"file_NLOC": "40", "file_CCN": "3", "file_NToken": "141"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "22,23,24", "deleted_lines": null}}}, "file_6": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "tests\\models\\base.py", "file_new_name": "tests\\models\\base.py", "file_complexity": {"file_NLOC": "133", "file_CCN": "19", "file_NToken": "1175"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "133", "deleted_lines": "133", "method_info": {"method_name": "training_step", "method_params": "self,batch,batch_idx,optimizer_idx", "method_startline": "133", "method_endline": "162", "method_complexity": {"method_NLOC": "16", "method_CCN": "4", "method_NToken": "125", "method_nesting_level": "1"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "133", "deleted_lines": "133", "method_info": {"method_name": "training_step", "method_params": "self,batch,batch_idx", "method_startline": "133", "method_endline": "162", "method_complexity": {"method_NLOC": "16", "method_CCN": "4", "method_NToken": "121", "method_nesting_level": "1"}}}}}, "file_7": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "tests\\models\\mixins.py", "file_new_name": "tests\\models\\mixins.py", "file_complexity": {"file_NLOC": "414", "file_CCN": "87", "file_NToken": "2852"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "602,603,604,605,606,607,608", "deleted_lines": null, "method_info": {"method_name": "configure_optimizers", "method_params": "self", "method_startline": "602", "method_endline": "608", "method_complexity": {"method_NLOC": "7", "method_CCN": "2", "method_NToken": "82", "method_nesting_level": "1"}}}}}, "file_8": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "tests\\models\\utils.py", "file_new_name": "tests\\models\\utils.py", "file_complexity": {"file_NLOC": "153", "file_CCN": "36", "file_NToken": "1163"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "85", "deleted_lines": "85", "method_info": {"method_name": "run_model_test", "method_params": "trainer_options,model,on_gpu", "method_startline": "52", "method_endline": "89", "method_complexity": {"method_NLOC": "19", "method_CCN": "5", "method_NToken": "159", "method_nesting_level": "0"}}}}}, "file_9": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "tests\\test_gpu_models.py", "file_new_name": "tests\\test_gpu_models.py", "file_complexity": {"file_NLOC": "289", "file_CCN": "40", "file_NToken": "2297"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "119,120,123,124,125,126", "deleted_lines": "119,122", "method_info": {"method_name": "test_optimizer_return_options", "method_params": "", "method_startline": "94", "method_endline": "126", "method_complexity": {"method_NLOC": "24", "method_CCN": "8", "method_NToken": "280", "method_nesting_level": "0"}}}}}, "file_10": {"file_change_type": "ADD", "file_Nmethod": 0, "file_old_name": "None", "file_new_name": "tests\\trainer\\test_optimizers.py", "file_complexity": {"file_NLOC": "101", "file_CCN": "14", "file_NToken": "611"}}}}}