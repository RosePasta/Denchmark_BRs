{"BR": {"BR_id": "1131", "BR_author": "stathius", "BRopenT": "2020-03-12T23:01:45Z", "BRcloseT": "2020-03-30T22:43:54Z", "BR_text": {"BRsummary": "Better message when DataLoader is wrong", "BRdescription": "\n On the verge between bug and improvement.\n There was a bug in my Validation DataLoader and was returning irrelevant staff. Accidentally the length was 0.  Probably an edge case combination. The error I was getting during the validation sanity check was quite cryptic:\n <denchmark-code>Traceback (most recent call last):\n   File \"UNet_WaveProp.py\", line 174, in <module>\n     trainer.fit(model)\n   File \"/mnt/RDS/home/code/pytorch-lightning/pytorch_lightning/trainer/trainer.py\", line 629, in fit\n     self.run_pretrain_routine(model)\n   File \"/mnt/RDS/home/code/pytorch-lightning/pytorch_lightning/trainer/trainer.py\", line 809, in run_pretrain_routine\n     False)\n   File \"/mnt/RDS/home/code/pytorch-lightning/pytorch_lightning/trainer/evaluation_loop.py\", line 300, in evaluate\n     eval_results = model.validation_epoch_end(outputs)\n   File \"UNet_WaveProp.py\", line 138, in validation_epoch_end\n     avg_loss = torch.stack([x['val_loss'] for x in outputs]).mean()\n RuntimeError: stack expects a non-empty TensorList\n </denchmark-code>\n \n I had to go through the code of pytorch-lightning for few hours to understand what was happening.\n Maybe a more informative message would make more sense?\n One thing would be to check if the DataLoader's size is 0.\n What do you think? I could take a stab at a PR.\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "stathius", "commentT": "2020-03-12T23:02:29Z", "comment_text": "\n \t\tHi! thanks for your contribution!, great first issue!\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "stathius", "commentT": "2020-03-14T01:07:39Z", "comment_text": "\n \t\tyeah, better error messing always helps, thx and PR is welcome! :]\n \t\t"}}}, "commit": {"commit_id": "2ccc7456ca421afcdfba0c4482635c99e2593f70", "commit_author": "Nicki Skafte", "commitT": "2020-03-30 18:43:53-04:00", "commit_complexity": {"commit_NLOC": "0.36", "commit_CCN": "1.0", "commit_Nprams": "1.0"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "CHANGELOG.md", "file_new_name": "CHANGELOG.md", "file_complexity": {"file_NLOC": "None", "file_CCN": "None", "file_NToken": "None"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "21", "deleted_lines": null}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "pytorch_lightning\\trainer\\data_loading.py", "file_new_name": "pytorch_lightning\\trainer\\data_loading.py", "file_complexity": {"file_NLOC": "200", "file_CCN": "29", "file_NToken": "998"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "29,30,33,34,35", "deleted_lines": "31", "method_info": {"method_name": "_has_len", "method_params": "DataLoader", "method_startline": "28", "method_endline": "38", "method_complexity": {"method_NLOC": "10", "method_CCN": "3", "method_NToken": "33", "method_nesting_level": "0"}}}}}, "file_2": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "tests\\base\\__init__.py", "file_new_name": "tests\\base\\__init__.py", "file_complexity": {"file_NLOC": "45", "file_CCN": "3", "file_NToken": "157"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "28,29", "deleted_lines": "28"}}}, "file_3": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "tests\\base\\mixins.py", "file_new_name": "tests\\base\\mixins.py", "file_complexity": {"file_NLOC": "457", "file_CCN": "98", "file_NToken": "3119"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "258,259,260,261,262", "deleted_lines": null, "method_info": {"method_name": "train_dataloader", "method_params": "self", "method_startline": "258", "method_endline": "262", "method_complexity": {"method_NLOC": "5", "method_CCN": "1", "method_NToken": "47", "method_nesting_level": "1"}}}}}, "file_4": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "tests\\trainer\\test_dataloaders.py", "file_new_name": "tests\\trainer\\test_dataloaders.py", "file_complexity": {"file_NLOC": "325", "file_CCN": "14", "file_NToken": "1556"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "464,465,466,467,468,469,470,471,472,473,474,475,476,477,478,479,480,481,482,483,484", "deleted_lines": null, "method_info": {"method_name": "test_error_on_zero_len_dataloader", "method_params": "tmpdir", "method_startline": "464", "method_endline": "484", "method_complexity": {"method_NLOC": "16", "method_CCN": "1", "method_NToken": "65", "method_nesting_level": "0"}}}}}}}}