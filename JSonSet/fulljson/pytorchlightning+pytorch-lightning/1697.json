{"BR": {"BR_id": "1697", "BR_author": "MrinalJain17", "BRopenT": "2020-05-01T23:14:20Z", "BRcloseT": "2020-05-14T06:36:46Z", "BR_text": {"BRsummary": "[Examples] The UNet model has some bugs", "BRdescription": "\n <denchmark-h:h2>\ud83d\udc1b Bug</denchmark-h>\n \n The UNet model definition has some bugs pertaining to bilinear interpolation.\n <denchmark-h:h4>Code sample</denchmark-h>\n \n \n \n \n \n \n \n pytorch-lightning/pl_examples/models/unet.py\n \n \n         Lines 35 to 37\n       in\n       2950f66\n \n \n \n \n \n \n  for _ in range(num_layers - 1): \n \n \n \n  layers.append(Up(feats, feats // 2), bilinear) \n \n \n \n  feats //= 2 \n \n \n \n \n \n In the code above, there seems to be a typo. The bilinear flag should be passed to the function Up(). It has instead been passed to the .append() method of the list.\n \n \n \n \n \n \n pytorch-lightning/pl_examples/models/unet.py\n \n \n         Lines 101 to 104\n       in\n       2950f66\n \n \n \n \n \n \n  if bilinear: \n \n \n \n  self.upsample = nn.Upsample(scale_factor=2, mode='bilinear', align_corners=True) \n \n \n \n  else: \n \n \n \n  self.upsample = nn.ConvTranspose2d(in_ch, in_ch // 2, kernel_size=2, stride=2) \n \n \n \n \n \n The number of channels once the input passes through either one of these layers is different. For \"bilinear\", the number of channels remains the same, whereas they decrease to half if a ConvTranspose2d is used. This gives an error in the network's .forward() method.\n I wanted to directly use the model for some other application, but not sure how issue 2 should be solved. Maybe use a 1x1 convolution to reduce the channels to half?\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "MrinalJain17", "commentT": "2020-05-01T23:14:59Z", "comment_text": "\n \t\tHi! thanks for your contribution!, great first issue!\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "MrinalJain17", "commentT": "2020-05-03T21:42:31Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/MrinalJain17>@MrinalJain17</denchmark-link>\n  mind draft a PR?\n \t\t"}}}, "commit": {"commit_id": "cf2d32d0a6c757aad39c36b621a646ed3a24619a", "commit_author": "Nand Dalal", "commitT": "2020-05-14 02:36:45-04:00", "commit_complexity": {"commit_NLOC": "None", "commit_CCN": "None", "commit_Nprams": "None"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "pl_examples\\domain_templates\\semantic_segmentation.py", "file_new_name": "pl_examples\\domain_templates\\semantic_segmentation.py", "file_complexity": {"file_NLOC": "181", "file_CCN": "21", "file_NToken": "1407"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "168", "deleted_lines": "168", "method_info": {"method_name": "validation_epoch_end", "method_params": "self,outputs", "method_startline": "167", "method_endline": "170", "method_complexity": {"method_NLOC": "4", "method_CCN": "2", "method_NToken": "52", "method_nesting_level": "1"}}}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "pl_examples\\models\\unet.py", "file_new_name": "pl_examples\\models\\unet.py", "file_complexity": {"file_NLOC": "90", "file_CCN": "11", "file_NToken": "623"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "36", "deleted_lines": "36"}}}}}}