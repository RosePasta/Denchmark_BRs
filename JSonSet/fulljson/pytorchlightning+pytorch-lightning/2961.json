{"BR": {"BR_id": "2961", "BR_author": "lezwon", "BRopenT": "2020-08-13T19:24:40Z", "BRcloseT": "2020-10-01T10:57:27Z", "BR_text": {"BRsummary": "AttributeError: 'NoneType' object has no attribute 'best_model_path' when `checkpoint_callback` = False", "BRdescription": "\n <denchmark-h:h2>\ud83d\udc1b Bug</denchmark-h>\n \n Model does not complete training on TPU and error's out with error AttributeError: 'NoneType' object has no attribute 'best_model_path' when checkpoint_callback=False.\n <denchmark-h:h3>To Reproduce</denchmark-h>\n \n Steps to reproduce the behavior:\n trainer=Trainer(tpu_cores=8, max_epochs=5, checkpoint_callback=False, distributed_backend='tpu')\n trainer.fit(model)  \n <denchmark-code>---------------------------------------------------------------------------\n AttributeError                            Traceback (most recent call last)\n <ipython-input-6-6de8b6915beb> in <module>\n       1 trainer = Trainer(tpu_cores=8, precision=16, max_epochs=5, checkpoint_callback=False, distributed_backend='tpu')\n ----> 2 trainer.fit(model)\n \n /opt/conda/lib/python3.7/site-packages/pytorch_lightning/trainer/states.py in wrapped_fn(self, *args, **kwargs)\n      32             if entering is not None:\n      33                 self.state = entering\n ---> 34             result = fn(self, *args, **kwargs)\n      35 \n      36             # The INTERRUPTED state can be set inside the run function. To indicate that run was interrupted\n \n /opt/conda/lib/python3.7/site-packages/pytorch_lightning/trainer/trainer.py in fit(self, model, train_dataloader, val_dataloaders, datamodule)\n    1058             self.accelerator_backend.setup()\n    1059             self.accelerator_backend.train(model)\n -> 1060             self.accelerator_backend.teardown(model)\n    1061 \n    1062         else:\n \n /opt/conda/lib/python3.7/site-packages/pytorch_lightning/accelerators/tpu_backend.py in teardown(self, model)\n      60 \n      61         # transfer back the best path to the trainer\n ---> 62         self.trainer.checkpoint_callback.best_model_path = best_path\n      63         # todo, pass also bets score\n      64 \n \n AttributeError: 'NoneType' object has no attribute 'best_model_path'\n </denchmark-code>\n \n <denchmark-h:h3>Expected behavior</denchmark-h>\n \n Should complete training.\n <denchmark-h:h3>Additional context</denchmark-h>\n \n Seems similar to <denchmark-link:https://github.com/PyTorchLightning/pytorch-lightning/issues/2547>#2547</denchmark-link>\n \n \t"}, "comments": {}}, "commit": {"commit_id": "8be002ccc7c2e8371ab426ea07c953f72747269e", "commit_author": "Lezwon Castelino", "commitT": "2020-10-01 06:57:26-04:00", "commit_complexity": {"commit_NLOC": "1.0", "commit_CCN": "1.0", "commit_Nprams": "1.0"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "pytorch_lightning\\accelerators\\tpu_backend.py", "file_new_name": "pytorch_lightning\\accelerators\\tpu_backend.py", "file_complexity": {"file_NLOC": "178", "file_CCN": "44", "file_NToken": "1330"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "70,71", "deleted_lines": "70", "method_info": {"method_name": "teardown", "method_params": "self", "method_startline": "61", "method_endline": "83", "method_complexity": {"method_NLOC": "13", "method_CCN": "4", "method_NToken": "105", "method_nesting_level": "1"}}}}}}}}