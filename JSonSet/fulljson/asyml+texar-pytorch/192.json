{"BR": {"BR_id": "192", "BR_author": "gpengzhi", "BRopenT": "2019-09-06T00:07:06Z", "BRcloseT": "2019-09-06T14:03:01Z", "BR_text": {"BRsummary": "A potential bug in transformer example", "BRdescription": "\n When I run\n <denchmark-code>sh scripts/wmt14_en_de.sh\n </denchmark-code>\n \n An error is triggered:\n <denchmark-code>(venv) pgao@daoyuan:~/texar-pytorch/examples/transformer$ sh scripts/wmt14_en_de.sh\n Writing to data/en_de_temp//cache. To change this, set the OUTPUT_DIR_CACHE environment variable.\n Downloading Europarl v7. This may take a while...\n   % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                  Dload  Upload   Total   Spent    Left  Speed\n 100  188M  100  188M    0     0  1596k      0  0:02:00  0:02:00 --:--:-- 1613k\n Downloading Common Crawl corpus. This may take a while...\n   % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                  Dload  Upload   Total   Spent    Left  Speed\n 100  875M  100  875M    0     0  1428k      0  0:10:27  0:10:27 --:--:-- 2489k\n Downloading News Commentary v11. This may take a while...\n   % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                  Dload  Upload   Total   Spent    Left  Speed\n 100 71.6M  100 71.6M    0     0  5699k      0  0:00:12  0:00:12 --:--:-- 6432k\n Downloading dev/test sets\n   % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                  Dload  Upload   Total   Spent    Left  Speed\n 100 21.7M  100 21.7M    0     0  4879k      0  0:00:04  0:00:04 --:--:-- 5362k\n   % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                  Dload  Upload   Total   Spent    Left  Speed\n 100 3696k  100 3696k    0     0  2289k      0  0:00:01  0:00:01 --:--:-- 2290k\n Extracting all files...\n europarl-v7.de-en.de\n europarl-v7.de-en.en\n commoncrawl.cs-en.annotation\n commoncrawl.cs-en.cs\n commoncrawl.cs-en.en\n commoncrawl.de-en.annotation\n commoncrawl.de-en.de\n commoncrawl.de-en.en\n commoncrawl.es-en.annotation\n commoncrawl.es-en.en\n commoncrawl.es-en.es\n commoncrawl.fr-en.annotation\n commoncrawl.fr-en.en\n commoncrawl.fr-en.fr\n commoncrawl.ru-en.annotation\n commoncrawl.ru-en.en\n commoncrawl.ru-en.ru\n training-parallel-nc-v11/\n training-parallel-nc-v11/news-commentary-v11.ru-en.ru\n training-parallel-nc-v11/news-commentary-v11.cs-en.en\n training-parallel-nc-v11/news-commentary-v11.de-en.de\n training-parallel-nc-v11/news-commentary-v11.ru-en.en\n training-parallel-nc-v11/news-commentary-v11.cs-en.cs\n training-parallel-nc-v11/news-commentary-v11.de-en.en\n dev/\n dev/newstest2009-ref.fr.sgm\n dev/newstest2013.es\n dev/newstest2014-deen-src.de.sgm\n dev/newstest2015-ruen-src.ru.sgm\n dev/newstest2010-ref.de.sgm\n dev/newstest2012-src.fr.sgm\n dev/newstest2014-ruen-ref.ru.sgm\n dev/news-test2008.en\n dev/news-test2008.es\n dev/newstest2009-ref.hu.sgm\n dev/newstest2014-csen-ref.en.sgm\n dev/newsdiscussdev2015-enfr-src.en.sgm\n dev/newstest2010.cs\n dev/news-test2008-src.hu.sgm\n dev/.newsdev2014-ref.en.sgm.swp\n dev/newstest2011-ref.cs.sgm\n dev/newstest2011-ref.fr.sgm\n dev/newsdev2016-enro-ref.ro.sgm\n dev/newstest2011.cs\n dev/newstest2009.es\n dev/newstest2011.en\n dev/newsdev2015-enfi-src.en.sgm\n dev/newstest2013.cs\n dev/newstest2012-ref.es.sgm\n dev/newstest2014-csen-ref.cs.sgm\n dev/newsdev2014-src.hi.sgm\n dev/newstest2015-encs-src.en.sgm\n dev/newsdev2014-src.en.sgm\n dev/newsdev2015-enfi-ref.fi.sgm\n dev/newstest2011-ref.es.sgm\n dev/newstest2013-src.ru.sgm\n dev/newstest2012-src.de.sgm\n dev/newsdev2016-tren-ref.en.sgm\n dev/newstest2011-src.fr.sgm\n dev/newssyscomb2009-src.de.sgm\n dev/newstest2012-src.es.sgm\n dev/newstest2010-ref.cs.sgm\n dev/newstest2014-hien-ref.hi.sgm\n dev/newssyscomb2009.de\n dev/newstest2011-ref.en.sgm\n dev/news-test2008.cs\n dev/newstest2010.en\n dev/newssyscomb2009.fr\n dev/newstest2012-ref.en.sgm\n dev/news-test2008.de\n dev/newstest2011.de\n dev/newstest2012.es\n dev/newsdev2016-entr-ref.tr.sgm\n dev/newstest2011-ref.de.sgm\n dev/newsdev2014-ref.hi.sgm\n dev/newstest2013-src.de.sgm\n dev/newstest2012-ref.fr.sgm\n dev/newstest2009.de\n dev/newstest2012.en\n dev/news-test2008-ref.cs.sgm\n dev/newstest2013-ref.fr.sgm\n dev/newsdev2014.hi\n dev/newstest2011-src.cs.sgm\n dev/newssyscomb2009-src.fr.sgm\n dev/newstest2012.ru\n dev/newstest2010-ref.es.sgm\n dev/newstest2010-src.es.sgm\n dev/news-test2008.fr\n dev/newstest2009.en\n dev/newstest2014-ruen-src.ru.sgm\n dev/newssyscomb2009-ref.cs.sgm\n dev/newstest2010-src.fr.sgm\n dev/newssyscomb2009-src.en.sgm\n dev/newstest2015-enru-ref.ru.sgm\n dev/newstest2015-ende-ref.de.sgm\n dev/newstest2013-ref.ru.sgm\n dev/newssyscomb2009-src.it.sgm\n dev/newsdiscusstest2015-enfr-src.en.sgm\n dev/newstest2015-fien-ref.en.sgm\n dev/newstest2010-src.en.sgm\n dev/newstest2009.fr\n dev/newstest2015-ruen-ref.en.sgm\n dev/newstest2013-src.es.sgm\n dev/newstest2014-hien-ref.en.sgm\n dev/news-test2008-src.en.sgm\n dev/newstest2012-ref.cs.sgm\n dev/news-test2008-ref.es.sgm\n dev/news-test2008-ref.fr.sgm\n dev/newstest2014-ruen-ref.en.sgm\n dev/news-test2008-src.es.sgm\n dev/newstest2014-fren-src.en.sgm\n dev/newstest2012-ref.de.sgm\n dev/newstest2014-csen-src.cs.sgm\n dev/newstest2014-csen-src.en.sgm\n dev/newstest2011-src.de.sgm\n dev/newssyscomb2009-src.cs.sgm\n dev/newstest2015-enfi-ref.fi.sgm\n dev/newstest2009-src.it.sgm\n dev/newstest2010-src.de.sgm\n dev/newstest2009-ref.cs.sgm\n dev/newssyscomb2009-ref.es.sgm\n dev/newstest2014-deen-src.en.sgm\n dev/newsdiscusstest2015-fren-ref.en.sgm\n dev/newstest2012.fr\n dev/newsdiscusstest2015-enfr-ref.fr.sgm\n dev/newsdev2016-enro-src.en.sgm\n dev/newstest2009-src.es.sgm\n dev/newstest2013-src.fr.sgm\n dev/newstest2015-deen-src.de.sgm\n dev/newsdev2015-fien-src.fi.sgm\n dev/newsdiscusstest2015-fren-src.fr.sgm\n dev/newstest2014-ruen-src.en.sgm\n dev/newstest2012-src.en.sgm\n dev/newstest2013.fr\n dev/newstest2015-enru-src.en.sgm\n dev/newstest2009-ref.es.sgm\n dev/newstest2011.fr\n dev/newstest2009-ref.en.sgm\n dev/newstest2015-enfi-src.en.sgm\n dev/newstest2009-src.xx.sgm\n dev/newstest2015-encs-ref.cs.sgm\n dev/newstest2013.ru\n dev/newstest2009.cs\n dev/newsdev2014.en\n dev/newstest2014-fren-ref.fr.sgm\n dev/news-test2008-ref.en.sgm\n dev/newssyscomb2009.es\n dev/news-test2008-src.cs.sgm\n dev/newsdev2016-roen-src.ro.sgm\n dev/.newstest2013-ref.en.sgm.swp\n dev/newssyscomb2009-ref.hu.sgm\n dev/newstest2010.de\n dev/newstest2013-ref.cs.sgm\n dev/newstest2013-ref.de.sgm\n dev/newstest2009-src.cs.sgm\n dev/newssyscomb2009.en\n dev/newssyscomb2009-ref.it.sgm\n dev/newstest2009-ref.it.sgm\n dev/newstest2010-ref.fr.sgm\n dev/newstest2015-csen-src.cs.sgm\n dev/newsdev2016-entr-src.en.sgm\n dev/newstest2010.es\n dev/news-test2008-src.de.sgm\n dev/newstest2013.en\n dev/newsdev2016-roen-ref.en.sgm\n dev/newstest2009-src.de.sgm\n dev/newstest2010-ref.en.sgm\n dev/newstest2011-src.es.sgm\n dev/newssyscomb2009-ref.en.sgm\n dev/newstest2014-fren-ref.en.sgm\n dev/newstest2012.cs\n dev/newstest2009-src.hu.sgm\n dev/newstest2009-src.fr.sgm\n dev/newstest2015-ende-src.en.sgm\n dev/newstest2013-src.cs.sgm\n dev/newstest2014-hien-src.hi.sgm\n dev/news-test2008-ref.hu.sgm\n dev/newstest2015-csen-ref.en.sgm\n dev/newstest2013-ref.es.sgm\n dev/newstest2013-ref.en.sgm\n dev/newstest2010-src.cs.sgm\n dev/newstest2010.fr\n dev/newstest2015-deen-ref.en.sgm\n dev/newstest2011.es\n dev/newsdev2016-tren-src.tr.sgm\n dev/newstest2013.de\n dev/newstest2014-fren-src.fr.sgm\n dev/newsdiscussdev2015-fren-ref.en.sgm\n dev/newsdiscussdev2015-fren-src.fr.sgm\n dev/newstest2014-deen-ref.de.sgm\n dev/newstest2013-src.en.sgm\n dev/newssyscomb2009-ref.fr.sgm\n dev/newssyscomb2009-ref.de.sgm\n dev/newstest2009-src.en.sgm\n dev/newstest2009-ref.de.sgm\n dev/newsdiscussdev2015-enfr-ref.fr.sgm\n dev/newssyscomb2009.cs\n dev/newstest2012-ref.ru.sgm\n dev/newstest2014-hien-src.en.sgm\n dev/news-test2008-src.fr.sgm\n dev/newsdev2015-fien-ref.en.sgm\n dev/newsdev2014-ref.en.sgm\n dev/newstest2015-fien-src.fi.sgm\n dev/news-test2008-ref.de.sgm\n dev/newstest2012-src.ru.sgm\n dev/newssyscomb2009-src.es.sgm\n dev/newssyscomb2009-src.hu.sgm\n dev/newstest2014-deen-ref.en.sgm\n dev/newstest2012.de\n dev/newstest2011-src.en.sgm\n dev/newstest2012-src.cs.sgm\n test/newstest2016-csen-ref.en.sgm\n test/newstest2016-csen-src.cs.sgm\n test/newstest2016-deen-ref.en.sgm\n test/newstest2016-deen-src.de.sgm\n test/newstest2016-encs-ref.cs.sgm\n test/newstest2016-encs-src.en.sgm\n test/newstest2016-ende-ref.de.sgm\n test/newstest2016-ende-src.en.sgm\n test/newstest2016-enfi-ref.fi.sgm\n test/newstest2016-enfi-src.en.sgm\n test/newstest2016-enro-ref.ro.sgm\n test/newstest2016-enro-src.en.sgm\n test/newstest2016-enru-ref.ru.sgm\n test/newstest2016-enru-src.en.sgm\n test/newstest2016-entr-ref.tr.sgm\n test/newstest2016-entr-src.en.sgm\n test/newstest2016-fien-ref.en.sgm\n test/newstest2016-fien-src.fi.sgm\n test/newstest2016-roen-ref.en.sgm\n test/newstest2016-roen-src.ro.sgm\n test/newstest2016-ruen-ref.en.sgm\n test/newstest2016-ruen-src.ru.sgm\n test/newstest2016-tren-ref.en.sgm\n test/newstest2016-tren-src.tr.sgm\n test/newstestB2016-enfi-ref.fi.sgm\n test/newstestB2016-enfi-src.en.sgm\n 1920209 data/en_de_temp//europarl-v7-de-en/europarl-v7.de-en.en\n 2399123 data/en_de_temp//common-crawl/commoncrawl.de-en.en\n 242770 data/en_de_temp//nc-v11/training-parallel-nc-v11/news-commentary-v11.de-en.en\n scripts/wmt14_en_de.sh: 88: scripts/wmt14_en_de.sh: cannot create data/en_de_temp//cache/train.en: Directory nonexistent\n scripts/wmt14_en_de.sh: 94: scripts/wmt14_en_de.sh: cannot create data/en_de_temp//cache/train.de: Directory nonexistent\n Cloning moses for data processing\n Cloning into 'data/en_de_temp//cache/mosesdecoder'...\n remote: Enumerating objects: 24, done.\n remote: Counting objects: 100% (24/24), done.\n remote: Compressing objects: 100% (20/20), done.\n remote: Total 147319 (delta 10), reused 6 (delta 4), pack-reused 147295\n Receiving objects: 100% (147319/147319), 129.70 MiB | 16.75 MiB/s, done.\n Resolving deltas: 100% (113844/113844), done.\n Checking connectivity... done.\n Tokenizing data/en_de_temp//cache/newstest2009.de...\n Tokenizing data/en_de_temp//cache/newstest2010.de...\n Tokenizing data/en_de_temp//cache/newstest2011.de...\n Tokenizing data/en_de_temp//cache/newstest2012.de...\n Tokenizing data/en_de_temp//cache/newstest2013.de...\n Tokenizing data/en_de_temp//cache/newstest2014.de...\n Tokenizing data/en_de_temp//cache/newstest2009.en...\n Tokenizing data/en_de_temp//cache/newstest2010.en...\n Tokenizing data/en_de_temp//cache/newstest2011.en...\n Tokenizing data/en_de_temp//cache/newstest2012.en...\n Tokenizing data/en_de_temp//cache/newstest2013.en...\n Tokenizing data/en_de_temp//cache/newstest2014.en...\n Cleaning data/en_de_temp//cache/train.tok...\n clean-corpus.perl: processing data/en_de_temp//cache/train.tok.de & .en to data/en_de_temp//cache/train.tok.clean, cutoff 1-80, ratio 9\n Error: data/en_de_temp//cache/train.tok.de does not exist at data/en_de_temp//cache/mosesdecoder/scripts/training/clean-corpus-n.perl line 58.\n </denchmark-code>\n \n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "gpengzhi", "commentT": "2019-09-06T00:09:12Z", "comment_text": "\n \t\tHi <denchmark-link:https://github.com/haoransh>@haoransh</denchmark-link>\n  , it seems that you are the author of  example. Can you take a look at this issue and make sure that the entire pipeline of this example can work on  data? Thanks.\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "gpengzhi", "commentT": "2019-09-06T00:11:30Z", "comment_text": "\n \t\tYou may also want to check the transformer example in texar-tf. It might have a similar issue.\n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "gpengzhi", "commentT": "2019-09-06T02:58:41Z", "comment_text": "\n \t\tThis bug is fixed by adding mkdir -p ${OUTPUT_DIR_CACHE} at line 26.\n \t\t"}}}, "commit": {"commit_id": "b10fb1a1f9537400042cc3ba96dc5b55de65c1c7", "commit_author": "Pengzhi Gao", "commitT": "2019-09-06 10:03:00-04:00", "commit_complexity": {"commit_NLOC": "None", "commit_CCN": "None", "commit_Nprams": "None"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "examples\\transformer\\scripts\\wmt14_en_de.sh", "file_new_name": "examples\\transformer\\scripts\\wmt14_en_de.sh", "file_complexity": {"file_NLOC": "None", "file_CCN": "None", "file_NToken": "None"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "26", "deleted_lines": null}}}}}}