{"BR": {"BR_id": "322", "BR_author": "hunterhector", "BRopenT": "2020-09-15T20:13:24Z", "BRcloseT": "2020-09-17T03:17:28Z", "BR_text": {"BRsummary": "A logging bug in executor after close_files", "BRdescription": "\n <denchmark-h:h2>The Problem</denchmark-h>\n \n Executor will call <denchmark-link:https://github.com/asyml/texar-pytorch/blob/master/texar/torch/run/executor.py#L1766>close_files</denchmark-link>\n   in some cases, and it will see the  list to be empty.\n If we call <denchmark-link:https://github.com/asyml/texar-pytorch/blob/master/texar/torch/run/executor.py#L1733>_open_files</denchmark-link>\n  afterward, which assumes the  to be of the same length as . This will raise an .\n <denchmark-h:h2>Possible Fix</denchmark-h>\n \n Either change the close_file logic to make sure the list won't be zero or change the _open_files logic to make sure the we recreate the list to avoid IndexError\n \t"}, "comments": {}}, "commit": {"commit_id": "a9e79f8ffa2d4ec5d34aee48daf10f1fb6893be0", "commit_author": "Hector", "commitT": "2020-09-16 23:17:27-04:00", "commit_complexity": {"commit_NLOC": "0.0", "commit_CCN": "0.7777777777777778", "commit_Nprams": "1.0"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 3, "file_old_name": "tests\\run\\executor_test.py", "file_new_name": "tests\\run\\executor_test.py", "file_complexity": {"file_NLOC": "160", "file_CCN": "15", "file_NToken": "1533"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "106,133,147,148", "deleted_lines": null, "method_info": {"method_name": "test_train_loop", "method_params": "self", "method_startline": "103", "method_endline": "150", "method_complexity": {"method_NLOC": "45", "method_CCN": "2", "method_NToken": "450", "method_nesting_level": "1"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "153,179,189,190,191,192,193", "deleted_lines": null, "method_info": {"method_name": "test_tbx_logging", "method_params": "self", "method_startline": "152", "method_endline": "193", "method_complexity": {"method_NLOC": "37", "method_CCN": "1", "method_NToken": "365", "method_nesting_level": "1"}}}, "hunk_2": {"Ismethod": 1, "added_lines": "97", "deleted_lines": null, "method_info": {"method_name": "setUp", "method_params": "self", "method_startline": "85", "method_endline": "97", "method_complexity": {"method_NLOC": "12", "method_CCN": "2", "method_NToken": "105", "method_nesting_level": "1"}}}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 6, "file_old_name": "texar\\torch\\run\\executor.py", "file_new_name": "texar\\torch\\run\\executor.py", "file_complexity": {"file_NLOC": "1752", "file_CCN": "133", "file_NToken": "6307"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "1472,1473", "deleted_lines": null, "method_info": {"method_name": "_register_logging_actions._flush_log_hook", "method_params": "", "method_startline": "1471", "method_endline": "1473", "method_complexity": {"method_NLOC": "2", "method_CCN": "1", "method_NToken": "17", "method_nesting_level": "2"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "1350,1352", "deleted_lines": "1350", "method_info": {"method_name": "train._try_get_data_size", "method_params": "", "method_startline": "1347", "method_endline": "1355", "method_complexity": {"method_NLOC": "8", "method_CCN": "2", "method_NToken": "41", "method_nesting_level": "3"}}}, "hunk_2": {"Ismethod": 1, "added_lines": "1746,1754,1755", "deleted_lines": null, "method_info": {"method_name": "_open_files", "method_params": "self", "method_startline": "1736", "method_endline": "1770", "method_complexity": {"method_NLOC": "24", "method_CCN": "6", "method_NToken": "120", "method_nesting_level": "1"}}}, "hunk_3": {"Ismethod": 1, "added_lines": "1472,1473", "deleted_lines": "1470", "method_info": {"method_name": "_register_logging_actions", "method_params": "self", "method_startline": "1451", "method_endline": "1531", "method_complexity": {"method_NLOC": "42", "method_CCN": "4", "method_NToken": "260", "method_nesting_level": "1"}}}, "hunk_4": {"Ismethod": 1, "added_lines": null, "deleted_lines": "1773", "method_info": {"method_name": "_close_files", "method_params": "self", "method_startline": "1766", "method_endline": "1778", "method_complexity": {"method_NLOC": "10", "method_CCN": "4", "method_NToken": "56", "method_nesting_level": "1"}}}, "hunk_5": {"Ismethod": 1, "added_lines": "1350,1352", "deleted_lines": "1350", "method_info": {"method_name": "train", "method_params": "self", "method_startline": "1295", "method_endline": "1374", "method_complexity": {"method_NLOC": "49", "method_CCN": "12", "method_NToken": "302", "method_nesting_level": "1"}}}}}}}}