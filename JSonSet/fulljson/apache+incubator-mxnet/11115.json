{"BR": {"BR_id": "11115", "BR_author": "imgemp", "BRopenT": "2018-05-31T21:38:57Z", "BRcloseT": "2019-03-10T07:54:31Z", "BR_text": {"BRsummary": "ReLU Clips NaNs to Zero", "BRdescription": "\n <denchmark-h:h2>Description</denchmark-h>\n \n In tracking down a bug, I found that the relu in mxnet.ndarray clips NaN\u2019s to zero. Ideally, I would think the relu should propagate NaN\u2019s so that bugs are not \u201ccovered up\u201d for downstream operations.\n <denchmark-h:h2>Environment info (Required)</denchmark-h>\n \n mxnet version \u20181.2.0\u2019\n numpy version \u20181.14.3\u2019\n <denchmark-code>----------Python Info----------\n Version      : 3.6.5\n Compiler     : GCC 4.2.1 Compatible Clang 4.0.1 (tags/RELEASE_401/final)\n Build        : ('default', 'Apr 26 2018 08:42:37')\n Arch         : ('64bit', '')\n ------------Pip Info-----------\n Version      : 10.0.1\n Directory    : /anaconda3/envs/mxnet/lib/python3.6/site-packages/pip\n ----------MXNet Info-----------\n Version      : 1.2.0\n Directory    : /anaconda3/envs/mxnet/lib/python3.6/site-packages/mxnet\n Commit Hash   : b011eccd17d660b2f1ecf901e0db0007706df35c\n ----------System Info----------\n Platform     : Darwin-16.7.0-x86_64-i386-64bit\n system       : Darwin\n node         : 8c85904326b5.ant.amazon.com\n release      : 16.7.0\n version      : Darwin Kernel Version 16.7.0: Tue Jan 30 11:27:06 PST 2018; root:xnu-3789.73.11~1/RELEASE_X86_64\n ----------Hardware Info----------\n machine      : x86_64\n processor    : i386\n b'machdep.cpu.extfeatures: SYSCALL XD 1GBPAGE EM64T LAHF LZCNT PREFETCHW RDTSCP TSCI'\n b'machdep.cpu.leaf7_features: SMEP ERMS RDWRFSGS TSC_THREAD_OFFSET BMI1 HLE AVX2 BMI2 INVPCID RTM SMAP RDSEED ADX IPT SGX FPU_CSDS MPX CLFSOPT'\n b'machdep.cpu.features: FPU VME DE PSE TSC MSR PAE MCE CX8 APIC SEP MTRR PGE MCA CMOV PAT PSE36 CLFSH DS ACPI MMX FXSR SSE SSE2 SS HTT TM PBE SSE3 PCLMULQDQ DTES64 MON DSCPL VMX SMX EST TM2 SSSE3 FMA CX16 TPR PDCM SSE4.1 SSE4.2 x2APIC MOVBE POPCNT AES PCID XSAVE OSXSAVE SEGLIM64 TSCTMR AVX1.0 RDRAND F16C'\n b'machdep.cpu.brand_string: Intel(R) Core(TM) i7-7660U CPU @ 2.50GHz'\n ----------Network Test----------\n Setting timeout: 10\n Timing for MXNet: https://github.com/apache/incubator-mxnet, DNS: 0.0041 sec, LOAD: 0.4787 sec.\n Timing for Gluon Tutorial(en): http://gluon.mxnet.io, DNS: 0.0133 sec, LOAD: 1.7585 sec.\n Timing for Gluon Tutorial(cn): https://zh.gluon.ai, DNS: 0.9810 sec, LOAD: 0.6178 sec.\n Timing for FashionMNIST: https://apache-mxnet.s3-accelerate.dualstack.amazonaws.com/gluon/dataset/fashion-mnist/train-labels-idx1-ubyte.gz, DNS: 0.0148 sec, LOAD: 0.3849 sec.\n Timing for PYPI: https://pypi.python.org/pypi/pip, DNS: 0.0104 sec, LOAD: 0.2880 sec.\n Timing for Conda: https://repo.continuum.io/pkgs/free/, DNS: 0.0122 sec, LOAD: 0.1161 sec.\n </denchmark-code>\n \n Package used (Python/R/Scala/Julia):\n I'm using Python version 3.6.5\n Compiler (gcc/clang/mingw/visual studio):\n GCC 4.2.1 Compatible Clang 4.0.1\n <denchmark-h:h2>Minimum reproducible example</denchmark-h>\n \n import numpy as np\n from mxnet import nd\n nd.relu(np.NaN*nd.ones(1))\n \u2013> [0.] <NDArray 1 <denchmark-link:https://github.com/cpu>@cpu</denchmark-link>\n (0)>\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "imgemp", "commentT": "2018-06-04T07:42:41Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/reminisce>@reminisce</denchmark-link>\n  please label this - \"Bug\", \"Operator\"\n I see that this behavior is not found in other activation functions such as - nd.sigmoid(np.NaN*nd.ones(1)), nd.softmax(np.NaN*nd.ones(1)), nd.tanh(np.NaN*nd.ones(1))\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "imgemp", "commentT": "2018-10-09T18:36:24Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/mxnet-label-bot>@mxnet-label-bot</denchmark-link>\n  [Operator]\n \t\t"}}}, "commit": {"commit_id": "c645591788f484553bf3d346ca95c9ffe926a2de", "commit_author": "Anirudh", "commitT": "2019-03-09 23:54:30-08:00", "commit_complexity": {"commit_NLOC": "0.4772727272727273", "commit_CCN": "1.0", "commit_Nprams": "1.0"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 3, "file_old_name": "src\\operator\\mshadow_op.h", "file_new_name": "src\\operator\\mshadow_op.h", "file_complexity": {"file_NLOC": "676", "file_CCN": "135", "file_NToken": "5981"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "786,787,788,789,790,791,792", "deleted_lines": null, "method_info": {"method_name": "mxnet::op::mshadow_op::relu_grad::Map", "method_params": "a", "method_startline": "786", "method_endline": "792", "method_complexity": {"method_NLOC": "7", "method_CCN": "3", "method_NToken": "42", "method_nesting_level": "4"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "798,799,800,801,802,803,804", "deleted_lines": null, "method_info": {"method_name": "mxnet::op::mshadow_op::maximum::Map", "method_params": "a,b", "method_startline": "798", "method_endline": "804", "method_complexity": {"method_NLOC": "7", "method_CCN": "3", "method_NToken": "38", "method_nesting_level": "4"}}}, "hunk_2": {"Ismethod": 1, "added_lines": "810,811,812,813,814,815,816", "deleted_lines": null, "method_info": {"method_name": "mxnet::op::mshadow_op::minimum::Map", "method_params": "a,b", "method_startline": "810", "method_endline": "816", "method_complexity": {"method_NLOC": "7", "method_CCN": "3", "method_NToken": "39", "method_nesting_level": "4"}}}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "tests\\python\\unittest\\test_ndarray.py", "file_new_name": "tests\\python\\unittest\\test_ndarray.py", "file_complexity": {"file_NLOC": "1304", "file_CCN": "195", "file_NToken": "17742"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "1554,1555,1556,1557,1558,1559,1560,1561,1562,1563,1564,1565,1566,1567,1568,1569,1570,1571,1572,1573,1574,1575,1576,1577,1578,1579,1580", "deleted_lines": null, "method_info": {"method_name": "test_ndarray_nan_comparison", "method_params": "", "method_startline": "1554", "method_endline": "1580", "method_complexity": {"method_NLOC": "23", "method_CCN": "3", "method_NToken": "273", "method_nesting_level": "0"}}}}}}}}