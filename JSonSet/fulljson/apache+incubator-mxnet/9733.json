{"BR": {"BR_id": "9733", "BR_author": "daleydeng", "BRopenT": "2018-02-07T13:24:31Z", "BRcloseT": "2019-01-15T01:04:31Z", "BR_text": {"BRsummary": "BUG in MultiBoxTargetForward when there is single box label", "BRdescription": "\n There was a constraint on num_label in MultiBoxTargetForward function at multibox_target.cu:359 which will cause error when input label has only one box, is it safe to remove it?\n PS: cpu version multibox_target.cc has no such constraint.\n template\n inline void MultiBoxTargetForward(const Tensor<gpu, 2, DType> &loc_target,\n const Tensor<gpu, 2, DType> &loc_mask,\n const Tensor<gpu, 2, DType> &cls_target,\n const Tensor<gpu, 2, DType> &anchors,\n const Tensor<gpu, 3, DType> &labels,\n const Tensor<gpu, 3, DType> &cls_preds,\n const Tensor<gpu, 4, DType> &temp_space,\n const float overlap_threshold,\n const float background_label,\n const float negative_mining_ratio,\n const float negative_mining_thresh,\n const int minimum_negative_samples,\n const nnvm::Tuple &variances) {\n const int num_batches = labels.size(0);\n const int num_labels = labels.size(1);\n const int label_width = labels.size(2);\n const int num_anchors = anchors.size(0);\n const int num_classes = cls_preds.size(1);\n CHECK_GE(num_batches, 1);\n CHECK_GT(num_labels, 2); // here\n CHECK_GE(num_anchors, 1);\n CHECK_EQ(variances.ndim(), 4);\n error logged as follows:\n (1, 3318, 4)  # anchor\n [[[ 1.          0.1032258   0.01        0.88387096  0.41333333]]] #input box label\n <NDArray 1x1x5 <denchmark-link:https://github.com/gpu>@gpu</denchmark-link>\n (0)> (1, 6, 3318) # cls_pred\n [14:31:57] /home/vision/miniconda3/conda-bld/mxnet_1514016712864/work/dmlc-core/include/dmlc/./logging.h:308: [14:31:57] src/operator/contrib/multibox_target.cu:359: Check failed: num_labels > 2 (1 vs. 2)\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "daleydeng", "commentT": "2018-02-27T19:29:20Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/sandeep-krishnamurthy>@sandeep-krishnamurthy</denchmark-link>\n   Could you please tag it as\n \n Bug\n Question\n C++\n \n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "daleydeng", "commentT": "2018-04-02T18:44:08Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/zhreshold>@zhreshold</denchmark-link>\n  Thoughts?\n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "daleydeng", "commentT": "2018-07-13T23:51:14Z", "comment_text": "\n \t\tThis seems to be related to the functionality of MXNet backend itself and doesn't pertain to C++ API package. <denchmark-link:https://github.com/sandeep-krishnamurthy>@sandeep-krishnamurthy</denchmark-link>\n  , could you please update this issue and change its labels: remove \"C++\" and add \"Backend\"? Thank you!\n \t\t"}, "comments_3": {"comment_id": 4, "comment_author": "daleydeng", "commentT": "2018-10-22T23:53:20Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/sandeep-krishnamurthy>@sandeep-krishnamurthy</denchmark-link>\n  <denchmark-link:https://github.com/nswamy>@nswamy</denchmark-link>\n  This issue is fixed. Please close it. Thanks!\n \t\t"}, "comments_4": {"comment_id": 5, "comment_author": "daleydeng", "commentT": "2019-01-15T01:03:24Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/lanking520>@lanking520</denchmark-link>\n  Can you please close this issue, as suggested by <denchmark-link:https://github.com/apeforest>@apeforest</denchmark-link>\n  that the issue is now fixed and merged.\n <denchmark-link:https://github.com/daleydeng>@daleydeng</denchmark-link>\n  Please feel free to re-open if you still face the issue.\n Thanks!\n \t\t"}, "comments_5": {"comment_id": 6, "comment_author": "daleydeng", "commentT": "2019-01-15T01:04:31Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/daleydeng>@daleydeng</denchmark-link>\n  Close this issue for now. Please feel free to reopen it if the issue persist.\n \t\t"}, "comments_6": {"comment_id": 7, "comment_author": "daleydeng", "commentT": "2019-02-22T07:15:52Z", "comment_text": "\n \t\tnow, this bug appear in python mxnet-cu80==1.3.1, can you check it?\n \t\t"}, "comments_7": {"comment_id": 8, "comment_author": "daleydeng", "commentT": "2019-02-22T18:45:49Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/xiaoqihe>@xiaoqihe</denchmark-link>\n  1.3.1 was released before this fix, so please wait for the next release or try nightly build instead.\n \t\t"}}}, "commit": {"commit_id": "42e71104cab600f3443a3bdb916d52840fb6951c", "commit_author": "Lin Yuan", "commitT": "2018-10-18 23:17:52-07:00", "commit_complexity": {"commit_NLOC": "1.0", "commit_CCN": "1.0", "commit_Nprams": "1.0"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "src\\operator\\contrib\\multibox_target.cu", "file_new_name": "src\\operator\\contrib\\multibox_target.cu", "file_complexity": {"file_NLOC": "None", "file_CCN": "None", "file_NToken": "None"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": null, "deleted_lines": "359"}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "tests\\python\\gpu\\test_operator_gpu.py", "file_new_name": "tests\\python\\gpu\\test_operator_gpu.py", "file_complexity": {"file_NLOC": "1587", "file_CCN": "193", "file_NToken": "22948"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "45", "deleted_lines": null}}}, "file_2": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "tests\\python\\unittest\\test_contrib_operator.py", "file_new_name": "tests\\python\\unittest\\test_contrib_operator.py", "file_complexity": {"file_NLOC": "213", "file_CCN": "19", "file_NToken": "3805"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "247,248,249,250,251,252,253,254,255,256,257,258,259,260,261,262", "deleted_lines": null, "method_info": {"method_name": "test_multibox_target_op", "method_params": "", "method_startline": "247", "method_endline": "262", "method_complexity": {"method_NLOC": "15", "method_CCN": "1", "method_NToken": "305", "method_nesting_level": "0"}}}}}}}}