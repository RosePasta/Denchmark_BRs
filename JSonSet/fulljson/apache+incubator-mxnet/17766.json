{"BR": {"BR_id": "17766", "BR_author": "sxjscience", "BRopenT": "2020-03-04T23:59:18Z", "BRcloseT": "2020-03-06T22:17:34Z", "BR_text": {"BRsummary": "[Numpy] Symbolic basic indexing bug", "BRdescription": "\n Reproducible example:\n import mxnet as mx\n mx.npx.set_np()\n \n class IntegerIndexing(mx.gluon.HybridBlock):\n         def __init__(self, a, prefix=None, params=None):\n             super().__init__(prefix=prefix, params=params)\n             self._a = a\n         def hybrid_forward(self, F, x):\n             return x[self._a]\n \n net = IntegerIndexing(-1)\n net.hybridize()\n net(mx.np.ones(3,))\n Error:\n <denchmark-code>MXNetError: MXNetError: Error in operator integerindexing0_reshape0: [23:58:56] ../src/operator/numpy/np_matrix_op.cc:243: Check failed: src[src_inx] == 1 (0 vs. 1) : -3 index should only be used to skip dimension size 1\n </denchmark-code>\n \n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "sxjscience", "commentT": "2020-03-05T00:21:59Z", "comment_text": "\n \t\tImperative version works fine. Probably something wrong with the _Symbol.__getitem__.\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "sxjscience", "commentT": "2020-03-05T00:22:31Z", "comment_text": "\n \t\tYes, I'm about to fix it.\n \t\t"}}}, "commit": {"commit_id": "27c74ade48d646872867293481ddb186fdb670fa", "commit_author": "Xingjian Shi", "commitT": "2020-03-06 14:17:33-08:00", "commit_complexity": {"commit_NLOC": "0.15384615384615385", "commit_CCN": "0.15384615384615385", "commit_Nprams": "0.8461538461538461"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "python\\mxnet\\symbol\\numpy\\_symbol.py", "file_new_name": "python\\mxnet\\symbol\\numpy\\_symbol.py", "file_complexity": {"file_NLOC": "3332", "file_CCN": "498", "file_NToken": "13042"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "99,100,101,102", "deleted_lines": "99", "method_info": {"method_name": "__getitem__", "method_params": "self,key", "method_startline": "59", "method_endline": "144", "method_complexity": {"method_NLOC": "68", "method_CCN": "23", "method_NToken": "509", "method_nesting_level": "1"}}}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "tests\\python\\unittest\\test_numpy_gluon.py", "file_new_name": "tests\\python\\unittest\\test_numpy_gluon.py", "file_complexity": {"file_NLOC": "324", "file_CCN": "71", "file_NToken": "3355"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "375,376", "deleted_lines": null, "method_info": {"method_name": "test_symbolic_basic_slicing.hybrid_forward", "method_params": "self,F,x", "method_startline": "375", "method_endline": "376", "method_complexity": {"method_NLOC": "2", "method_CCN": "1", "method_NToken": "14", "method_nesting_level": "3"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "371,372,373,374,375,376,377,378,379", "deleted_lines": null, "method_info": {"method_name": "test_symbolic_basic_slicing", "method_params": "", "method_startline": "258", "method_endline": "379", "method_complexity": {"method_NLOC": "64", "method_CCN": "15", "method_NToken": "599", "method_nesting_level": "0"}}}}}}}}