{"BR": {"BR_id": "13752", "BR_author": "eric-haibin-lin", "BRopenT": "2019-01-01T22:14:19Z", "BRcloseT": "2019-03-17T06:48:31Z", "BR_text": {"BRsummary": "Adam, AdaMax and FTML cannot be used with Trainer(update_on_kv=False)", "BRdescription": "\n These optimizers adjust the learning rate by the number of optimization steps, which is problematic if  is set and multiple GPUs share the same optimizer object (leading to incorrect count of optimization steps). For example: <denchmark-link:https://github.com/apache/incubator-mxnet/blob/master/python/mxnet/optimizer/optimizer.py#L1093>https://github.com/apache/incubator-mxnet/blob/master/python/mxnet/optimizer/optimizer.py#L1093</denchmark-link>\n \n cc <denchmark-link:https://github.com/szha>@szha</denchmark-link>\n  <denchmark-link:https://github.com/sandeep-krishnamurthy>@sandeep-krishnamurthy</denchmark-link>\n \n \t"}, "comments": {}}, "commit": {"commit_id": "63ed258063137421e6d4def30435014ab57fb468", "commit_author": "Przemyslaw Tredak", "commitT": "2019-03-16 23:48:30-07:00", "commit_complexity": {"commit_NLOC": "0.0", "commit_CCN": "0.0", "commit_Nprams": "0.6"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "python\\mxnet\\gluon\\trainer.py", "file_new_name": "python\\mxnet\\gluon\\trainer.py", "file_complexity": {"file_NLOC": "303", "file_CCN": "92", "file_NToken": "1876"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": null, "deleted_lines": "244,245,246,247", "method_info": {"method_name": "_init_kvstore", "method_params": "self", "method_startline": "169", "method_endline": "252", "method_complexity": {"method_NLOC": "45", "method_CCN": "20", "method_NToken": "329", "method_nesting_level": "1"}}}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "python\\mxnet\\optimizer\\optimizer.py", "file_new_name": "python\\mxnet\\optimizer\\optimizer.py", "file_complexity": {"file_NLOC": "1282", "file_CCN": "215", "file_NToken": "7407"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "384,385,386,387,388,389,390,391,392,393,394", "deleted_lines": null, "method_info": {"method_name": "_set_current_context", "method_params": "self,device_id", "method_startline": "384", "method_endline": "394", "method_complexity": {"method_NLOC": "4", "method_CCN": "2", "method_NToken": "35", "method_nesting_level": "1"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "1639,1640", "deleted_lines": null, "method_info": {"method_name": "__call__", "method_params": "self,index,grad,weight", "method_startline": "1629", "method_endline": "1677", "method_complexity": {"method_NLOC": "46", "method_CCN": "14", "method_NToken": "414", "method_nesting_level": "1"}}}}}, "file_2": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "tests\\python\\unittest\\test_gluon_trainer.py", "file_new_name": "tests\\python\\unittest\\test_gluon_trainer.py", "file_complexity": {"file_NLOC": "241", "file_CCN": "40", "file_NToken": "2489"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "275,282,283,284,285,286,287,288,289,290,291,292", "deleted_lines": "275,276,283,284,285,286,287,288,289", "method_info": {"method_name": "test_trainer_lr_sched", "method_params": "", "method_startline": "256", "method_endline": "293", "method_complexity": {"method_NLOC": "36", "method_CCN": "7", "method_NToken": "344", "method_nesting_level": "0"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "282,283,284,285,286,287,288,289,290", "deleted_lines": "276,283,284,285,286,287,288,289", "method_info": {"method_name": "test_trainer_invalid_lr_sched", "method_params": "", "method_startline": "276", "method_endline": "290", "method_complexity": {"method_NLOC": "15", "method_CCN": "2", "method_NToken": "145", "method_nesting_level": "0"}}}}}}}}