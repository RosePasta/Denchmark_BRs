{"BR": {"BR_id": "17285", "BR_author": "guanxinq", "BRopenT": "2020-01-13T18:33:04Z", "BRcloseT": "2020-01-17T18:33:10Z", "BR_text": {"BRsummary": "Graph Partition API Test Error", "BRdescription": "\n <denchmark-h:h2>Description</denchmark-h>\n \n PR <denchmark-link:https://github.com/apache/incubator-mxnet/pull/15886/files#diff-962e4e83b570943c087e477058485e25>https://github.com/apache/incubator-mxnet/pull/15886/files#diff-962e4e83b570943c087e477058485e25</denchmark-link>\n  added 4 tests for graph partitioning given a backend. However, these tests cannot succeed if run them separately.\n <denchmark-h:h3>Error Message</denchmark-h>\n \n <denchmark-h:h2>======================================================================\n ERROR: test_subgraph_op.test_subgraph_exe</denchmark-h>\n \n Traceback (most recent call last):\n File \"/home/ubuntu/.local/lib/python3.6/site-packages/nose/case.py\", line 198, in runTest\n self.test(self.arg)\n File \"/home/ubuntu/fortest1.6/incubator-mxnet/tests/python/unittest/test_subgraph_op.py\", line 362, in test_subgraph_exe\n _test_subgraph_exe('default')\n File \"/home/ubuntu/fortest1.6/incubator-mxnet/tests/python/unittest/test_subgraph_op.py\", line 353, in _test_subgraph_exe\n test_network_structure_1(subgraph_backend)\n File \"/home/ubuntu/fortest1.6/incubator-mxnet/tests/python/unittest/test_subgraph_op.py\", line 287, in test_network_structure_1\n check_subgraph_exe(out, subgraph_backend, ['Convolution'])\n File \"/home/ubuntu/fortest1.6/incubator-mxnet/tests/python/unittest/test_subgraph_op.py\", line 276, in check_subgraph_exe\n _check_subgraph_exe5(sym, subgraph_backend, op_names)\n File \"/home/ubuntu/fortest1.6/incubator-mxnet/tests/python/unittest/test_subgraph_op.py\", line 179, in _check_subgraph_exe5\n part_sym = sym.optimize_for(subgraph_backend)\n File \"/home/ubuntu/fortest1.6/incubator-mxnet/python/mxnet/symbol/symbol.py\", line 1499, in optimize_for\n c_str_array(val_list)))\n File \"/home/ubuntu/fortest1.6/incubator-mxnet/python/mxnet/base.py\", line 255, in check_call\n raise MXNetError(py_str(LIB.MXGetLastError()))\n mxnet.base.MXNetError: [18:29:40] /home/ubuntu/fortest1.6/incubator-mxnet/src/operator/subgraph/./subgraph_property.h:374: Check failed: it != attrs.end(): Cannot find attribute op_names in SubgraphProperty\n Stack trace:\n [bt] (0) /home/ubuntu/fortest1.6/incubator-mxnet/python/mxnet/../../build/libmxnet.so(mxnet::op::DefaultSubgraphProperty::CreateSubgraphSelector() const+0x86d) [0x7fc66881361d]\n [bt] (1) /home/ubuntu/fortest1.6/incubator-mxnet/python/mxnet/../../build/libmxnet.so(mxnet::op::sg::FindSubgraphs(nnvm::Graph, mxnet::op::SubgraphProperty const&, std::vector<std::shared_ptrmxnet::op::BiDirectedNode, std::allocator<std::shared_ptrmxnet::op::BiDirectedNode > > const&, std::vector<std::vector<mxnet::op::BiDirectedNode*, std::allocatormxnet::op::BiDirectedNode* >, std::allocator<std::vector<mxnet::op::BiDirectedNode*, std::allocatormxnet::op::BiDirectedNode* > > >, std::vector<std::shared_ptrmxnet::op::SubgraphSelectorV2, std::allocator<std::shared_ptrmxnet::op::SubgraphSelectorV2 > >)+0x468) [0x7fc668808f78]\n [bt] (2) /home/ubuntu/fortest1.6/incubator-mxnet/python/mxnet/../../build/libmxnet.so(mxnet::op::BuildSubgraph(nnvm::Graph&&)+0x30b) [0x7fc66880ab7b]\n [bt] (3) /home/ubuntu/fortest1.6/incubator-mxnet/python/mxnet/../../build/libmxnet.so(std::_Function_handler<nnvm::Graph (nnvm::Graph), nnvm::Graph (*)(nnvm::Graph&&)>::_M_invoke(std::_Any_data const&, nnvm::Graph&&)+0x20) [0x7fc6671526f0]\n [bt] (4) /home/ubuntu/fortest1.6/incubator-mxnet/python/mxnet/../../build/libmxnet.so(nnvm::ApplyPasses(nnvm::Graph, std::vector<std::__cxx11::basic_string<char, std::char_traits, std::allocator >, std::allocator<std::__cxx11::basic_string<char, std::char_traits, std::allocator > > > const&)+0xee5) [0x7fc669813625]\n [bt] (5) /home/ubuntu/fortest1.6/incubator-mxnet/python/mxnet/../../build/libmxnet.so(nnvm::ApplyPass(nnvm::Graph, std::__cxx11::basic_string<char, std::char_traits, std::allocator > const&)+0x213) [0x7fc666e71063]\n [bt] (6) /home/ubuntu/fortest1.6/incubator-mxnet/python/mxnet/../../build/libmxnet.so(MXOptimizeForBackend+0x565) [0x7fc666e660a5]\n [bt] (7) /usr/lib/x86_64-linux-gnu/libffi.so.6(ffi_call_unix64+0x4c) [0x7fc6892fbdae]\n [bt] (8) /usr/lib/x86_64-linux-gnu/libffi.so.6(ffi_call+0x22f) [0x7fc6892fb71f]\n <denchmark-h:h2>To Reproduce</denchmark-h>\n \n \n Disable line 272-275 in /python/unittest/test_subgraph_op.py.\n Run nosetests --nocapture tests/python/unittest/test_subgraph_op.py\n \n \t"}, "comments": {}}, "commit": {"commit_id": "8487e940c571dba889f661c2a2e12d67a6df60bb", "commit_author": "guanxinq", "commitT": "2020-01-17 10:33:09-08:00", "commit_complexity": {"commit_NLOC": "0.38461538461538464", "commit_CCN": "1.0", "commit_Nprams": "0.38461538461538464"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "include\\mxnet\\c_api_test.h", "file_new_name": "include\\mxnet\\c_api_test.h", "file_complexity": {"file_NLOC": "16", "file_CCN": "0", "file_NToken": "90"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "56,57,58,59,60,61,62,63,64,65,71,72,73,74,75,76", "deleted_lines": null}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "src\\c_api\\c_api_test.cc", "file_new_name": "src\\c_api\\c_api_test.cc", "file_complexity": {"file_NLOC": "79", "file_CCN": "12", "file_NToken": "573"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91", "deleted_lines": null, "method_info": {"method_name": "MXSetSubgraphPropertyOpNamesV2", "method_params": "prop_name,num_ops,op_names", "method_startline": "76", "method_endline": "91", "method_complexity": {"method_NLOC": "16", "method_CCN": "3", "method_NToken": "111", "method_nesting_level": "0"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "99,100,101,102,103,104,105,106,107,108", "deleted_lines": null, "method_info": {"method_name": "MXRemoveSubgraphPropertyOpNamesV2", "method_params": "prop_name", "method_startline": "99", "method_endline": "108", "method_complexity": {"method_NLOC": "10", "method_CCN": "2", "method_NToken": "64", "method_nesting_level": "0"}}}}}, "file_2": {"file_change_type": "MODIFY", "file_Nmethod": 5, "file_old_name": "tests\\python\\unittest\\test_subgraph_op.py", "file_new_name": "tests\\python\\unittest\\test_subgraph_op.py", "file_complexity": {"file_NLOC": "277", "file_CCN": "59", "file_NToken": "3185"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "177,180,203,206,230,233,256,259", "deleted_lines": "177,180,203,206,230,233,256,259", "method_info": {"method_name": "_test_subgraph_exe", "method_params": "subgraph_backend", "method_startline": "27", "method_endline": "359", "method_complexity": {"method_NLOC": "26", "method_CCN": "1", "method_NToken": "69", "method_nesting_level": "0"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "203,206", "deleted_lines": "203,206", "method_info": {"method_name": "_test_subgraph_exe._check_subgraph_exe6", "method_params": "sym,subgraph_backend,op_names", "method_startline": "193", "method_endline": "217", "method_complexity": {"method_NLOC": "17", "method_CCN": "2", "method_NToken": "195", "method_nesting_level": "1"}}}, "hunk_2": {"Ismethod": 1, "added_lines": "256,259", "deleted_lines": "256,259", "method_info": {"method_name": "_test_subgraph_exe._check_subgraph_exe8", "method_params": "sym,subgraph_backend,op_names", "method_startline": "245", "method_endline": "269", "method_complexity": {"method_NLOC": "17", "method_CCN": "4", "method_NToken": "239", "method_nesting_level": "1"}}}, "hunk_3": {"Ismethod": 1, "added_lines": "177,180", "deleted_lines": "177,180", "method_info": {"method_name": "_test_subgraph_exe._check_subgraph_exe5", "method_params": "sym,subgraph_backend,op_names", "method_startline": "167", "method_endline": "191", "method_complexity": {"method_NLOC": "17", "method_CCN": "2", "method_NToken": "191", "method_nesting_level": "1"}}}, "hunk_4": {"Ismethod": 1, "added_lines": "230,233", "deleted_lines": "230,233", "method_info": {"method_name": "_test_subgraph_exe._check_subgraph_exe7", "method_params": "sym,subgraph_backend,op_names", "method_startline": "219", "method_endline": "243", "method_complexity": {"method_NLOC": "17", "method_CCN": "4", "method_NToken": "237", "method_nesting_level": "1"}}}}}}}}