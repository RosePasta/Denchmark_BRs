{"BR": {"BR_id": "18322", "BR_author": "leezu", "BRopenT": "2020-05-14T16:24:53Z", "BRcloseT": "2020-05-21T01:59:33Z", "BR_text": {"BRsummary": "test_recordimage_dataset", "BRdescription": "\n <denchmark-link:http://jenkins.mxnet-ci.amazon-ml.com/blue/rest/organizations/jenkins/pipelines/mxnet-validation/pipelines/windows-gpu/branches/PR-18312/runs/2/nodes/109/steps/155/log/?start=0>http://jenkins.mxnet-ci.amazon-ml.com/blue/rest/organizations/jenkins/pipelines/mxnet-validation/pipelines/windows-gpu/branches/PR-18312/runs/2/nodes/109/steps/155/log/?start=0</denchmark-link>\n \n <denchmark-code>\n [2020-05-14T09:13:07.293Z] __________________________ test_recordimage_dataset ___________________________\n [2020-05-14T09:13:07.293Z] [gw0] win32 -- Python 3.7.3 C:\\Python37\\python.exe\n [2020-05-14T09:13:07.293Z] \n [2020-05-14T09:13:07.293Z]     @with_seed()\n [2020-05-14T09:13:07.293Z]     def test_recordimage_dataset():\n [2020-05-14T09:13:07.293Z]         recfile = prepare_record()\n [2020-05-14T09:13:07.293Z]         fn = lambda x, y : (x, y)\n [2020-05-14T09:13:07.293Z]         dataset = gluon.data.vision.ImageRecordDataset(recfile).transform(fn)\n [2020-05-14T09:13:07.293Z]         loader = gluon.data.DataLoader(dataset, 1)\n [2020-05-14T09:13:07.293Z]     \n [2020-05-14T09:13:07.293Z] >       for i, (x, y) in enumerate(loader):\n [2020-05-14T09:13:07.293Z] \n [2020-05-14T09:13:07.293Z] tests\\python\\unittest\\test_gluon_data.py:75: \n [2020-05-14T09:13:07.293Z] _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n [2020-05-14T09:13:07.293Z] windows_package\\python\\mxnet\\gluon\\data\\dataloader.py:659: in same_process_iter\n [2020-05-14T09:13:07.293Z]     ret = self._batchify_fn([self._dataset[idx] for idx in batch])\n [2020-05-14T09:13:07.293Z] windows_package\\python\\mxnet\\gluon\\data\\dataloader.py:659: in <listcomp>\n [2020-05-14T09:13:07.293Z]     ret = self._batchify_fn([self._dataset[idx] for idx in batch])\n [2020-05-14T09:13:07.293Z] windows_package\\python\\mxnet\\gluon\\data\\dataset.py:232: in __getitem__\n [2020-05-14T09:13:07.293Z]     item = self._data[idx]\n [2020-05-14T09:13:07.293Z] windows_package\\python\\mxnet\\gluon\\data\\vision\\datasets.py:271: in __getitem__\n [2020-05-14T09:13:07.293Z]     return image.imdecode(img, self._flag), header.label\n [2020-05-14T09:13:07.293Z] windows_package\\python\\mxnet\\image\\image.py:211: in imdecode\n [2020-05-14T09:13:07.293Z]     return cvimdecode(buf, *args, **kwargs)\n [2020-05-14T09:13:07.293Z] <string>:38: in _cvimdecode\n [2020-05-14T09:13:07.293Z]     ???\n [2020-05-14T09:13:07.293Z] windows_package\\python\\mxnet\\_ctypes\\ndarray.py:91: in _imperative_invoke\n [2020-05-14T09:13:07.293Z]     ctypes.byref(out_stypes)))\n [2020-05-14T09:13:07.293Z] _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n [2020-05-14T09:13:07.293Z] \n [2020-05-14T09:13:07.293Z] ret = -1\n [2020-05-14T09:13:07.293Z] \n [2020-05-14T09:13:07.293Z]     def check_call(ret):\n [2020-05-14T09:13:07.293Z]         \"\"\"Check the return value of C API call.\n [2020-05-14T09:13:07.293Z]     \n [2020-05-14T09:13:07.293Z]         This function will raise an exception when an error occurs.\n [2020-05-14T09:13:07.293Z]         Wrap every API call with this function.\n [2020-05-14T09:13:07.293Z]     \n [2020-05-14T09:13:07.293Z]         Parameters\n [2020-05-14T09:13:07.293Z]         ----------\n [2020-05-14T09:13:07.293Z]         ret : int\n [2020-05-14T09:13:07.293Z]             return value from API calls.\n [2020-05-14T09:13:07.293Z]         \"\"\"\n [2020-05-14T09:13:07.293Z]         if ret != 0:\n [2020-05-14T09:13:07.293Z] >           raise get_last_ffi_error()\n [2020-05-14T09:13:07.293Z] E           mxnet.base.MXNetError: Traceback (most recent call last):\n [2020-05-14T09:13:07.293Z] E             File \"..\\src\\io\\image_io.cc\", line 190\n [2020-05-14T09:13:07.293Z] E           MXNetError: Check failed: len > 0: Input cannot be an empty buffer\n [2020-05-14T09:13:07.293Z] \n [2020-05-14T09:13:07.293Z] windows_package\\python\\mxnet\\base.py:246: MXNetError\n [2020-05-14T09:13:07.293Z] ---------------------------- Captured stderr setup ----------------------------\n </denchmark-code>\n \n <denchmark-link:https://github.com/zhreshold>@zhreshold</denchmark-link>\n \n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "leezu", "commentT": "2020-05-14T18:38:21Z", "comment_text": "\n \t\tThis is very likely caused by parallel test. See <denchmark-link:https://github.com/apache/incubator-mxnet/pull/18323>#18323</denchmark-link>\n \n \t\t"}}}, "commit": {"commit_id": "67b5d314a5a46bce4377668626a73f0481b60fea", "commit_author": "Joshua Z. Zhang", "commitT": "2020-05-20 18:59:32-07:00", "commit_complexity": {"commit_NLOC": "0.0", "commit_CCN": "1.0", "commit_Nprams": "0.0"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 20, "file_old_name": "tests\\python\\unittest\\test_gluon_data.py", "file_new_name": "tests\\python\\unittest\\test_gluon_data.py", "file_complexity": {"file_NLOC": "483", "file_CCN": "114", "file_NToken": "5749"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "172,173", "deleted_lines": "173,174,175", "method_info": {"method_name": "test_image_folder_dataset_handle", "method_params": "prepare_record", "method_startline": "172", "method_endline": "177", "method_complexity": {"method_NLOC": "6", "method_CCN": "1", "method_NToken": "80", "method_nesting_level": "0"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "79,80", "deleted_lines": "80,81", "method_info": {"method_name": "test_recordimage_dataset_handle", "method_params": "prepare_record", "method_startline": "79", "method_endline": "90", "method_complexity": {"method_NLOC": "10", "method_CCN": "3", "method_NToken": "98", "method_nesting_level": "0"}}}, "hunk_2": {"Ismethod": 1, "added_lines": "154,155,156,157,158,159,160,161,162,163", "deleted_lines": "154,155,156,157,158,159,160,161,162,163", "method_info": {"method_name": "test_datasets_handles", "method_params": "", "method_startline": "154", "method_endline": "163", "method_complexity": {"method_NLOC": "10", "method_CCN": "1", "method_NToken": "222", "method_nesting_level": "0"}}}, "hunk_3": {"Ismethod": 1, "added_lines": "153,154,155,156,157,158,159,160,161,162,163", "deleted_lines": "153,154,155,156,157,158,159,160,161,162,163", "method_info": {"method_name": "test_datasets_handles", "method_params": "tmpdir", "method_startline": "153", "method_endline": "163", "method_complexity": {"method_NLOC": "11", "method_CCN": "1", "method_NToken": "303", "method_nesting_level": "0"}}}, "hunk_4": {"Ismethod": 1, "added_lines": "166,167", "deleted_lines": "166,167,168", "method_info": {"method_name": "test_image_folder_dataset", "method_params": "prepare_record", "method_startline": "166", "method_endline": "169", "method_complexity": {"method_NLOC": "4", "method_CCN": "1", "method_NToken": "41", "method_nesting_level": "0"}}}, "hunk_5": {"Ismethod": 1, "added_lines": "52,53,54,55,56,57,58,59,60,61,64", "deleted_lines": "52,53,54,55,56,57,58,59,60,61,62", "method_info": {"method_name": "prepare_record", "method_params": "tmpdir_factory", "method_startline": "52", "method_endline": "64", "method_complexity": {"method_NLOC": "13", "method_CCN": "2", "method_NToken": "172", "method_nesting_level": "0"}}}, "hunk_6": {"Ismethod": 1, "added_lines": "173", "deleted_lines": "173,174,175", "method_info": {"method_name": "test_image_folder_dataset_handle", "method_params": "", "method_startline": "173", "method_endline": "179", "method_complexity": {"method_NLOC": "7", "method_CCN": "1", "method_NToken": "75", "method_nesting_level": "0"}}}, "hunk_7": {"Ismethod": 1, "added_lines": "140,141,142,143,144,145,146,147,148,149,150", "deleted_lines": "141,142,143,144,145,146,147,148,149,150", "method_info": {"method_name": "test_datasets", "method_params": "tmpdir", "method_startline": "140", "method_endline": "150", "method_complexity": {"method_NLOC": "11", "method_CCN": "1", "method_NToken": "267", "method_nesting_level": "0"}}}, "hunk_8": {"Ismethod": 1, "added_lines": "204,205,206,208,221", "deleted_lines": "206,207,208,210,223", "method_info": {"method_name": "test_image_list_dataset_handle", "method_params": "prepare_record", "method_startline": "204", "method_endline": "225", "method_complexity": {"method_NLOC": "19", "method_CCN": "4", "method_NToken": "217", "method_nesting_level": "0"}}}, "hunk_9": {"Ismethod": 1, "added_lines": "80", "deleted_lines": "80,81", "method_info": {"method_name": "test_recordimage_dataset_handle", "method_params": "", "method_startline": "80", "method_endline": "91", "method_complexity": {"method_NLOC": "10", "method_CCN": "3", "method_NToken": "99", "method_nesting_level": "0"}}}, "hunk_10": {"Ismethod": 1, "added_lines": "101,102", "deleted_lines": "102,103", "method_info": {"method_name": "test_recordimage_dataset_with_data_loader_multiworker", "method_params": "prepare_record", "method_startline": "101", "method_endline": "124", "method_complexity": {"method_NLOC": "17", "method_CCN": "7", "method_NToken": "234", "method_nesting_level": "0"}}}, "hunk_11": {"Ismethod": 1, "added_lines": "69", "deleted_lines": "69,70", "method_info": {"method_name": "test_recordimage_dataset", "method_params": "", "method_startline": "69", "method_endline": "77", "method_complexity": {"method_NLOC": "8", "method_CCN": "3", "method_NToken": "90", "method_nesting_level": "0"}}}, "hunk_12": {"Ismethod": 1, "added_lines": "52,53,54,55,56,57,58,59,60,61,64", "deleted_lines": "52,53,54,55,56,57,58,59,60,61,62,65", "method_info": {"method_name": "prepare_record", "method_params": "", "method_startline": "52", "method_endline": "65", "method_complexity": {"method_NLOC": "14", "method_CCN": "6", "method_NToken": "150", "method_nesting_level": "0"}}}, "hunk_13": {"Ismethod": 1, "added_lines": "102", "deleted_lines": "102,103", "method_info": {"method_name": "test_recordimage_dataset_with_data_loader_multiworker", "method_params": "", "method_startline": "102", "method_endline": "125", "method_complexity": {"method_NLOC": "17", "method_CCN": "7", "method_NToken": "235", "method_nesting_level": "0"}}}, "hunk_14": {"Ismethod": 1, "added_lines": "182,184,197", "deleted_lines": "182,183,184,186,199", "method_info": {"method_name": "test_image_list_dataset", "method_params": "", "method_startline": "182", "method_endline": "203", "method_complexity": {"method_NLOC": "19", "method_CCN": "4", "method_NToken": "197", "method_nesting_level": "0"}}}, "hunk_15": {"Ismethod": 1, "added_lines": "180,181,182,184,197", "deleted_lines": "182,183,184,186,199", "method_info": {"method_name": "test_image_list_dataset", "method_params": "prepare_record", "method_startline": "180", "method_endline": "201", "method_complexity": {"method_NLOC": "19", "method_CCN": "4", "method_NToken": "214", "method_nesting_level": "0"}}}, "hunk_16": {"Ismethod": 1, "added_lines": "166,167", "deleted_lines": "166,167,168", "method_info": {"method_name": "test_image_folder_dataset", "method_params": "", "method_startline": "166", "method_endline": "170", "method_complexity": {"method_NLOC": "5", "method_CCN": "1", "method_NToken": "36", "method_nesting_level": "0"}}}, "hunk_17": {"Ismethod": 1, "added_lines": "206,208,221", "deleted_lines": "206,207,208,210,223", "method_info": {"method_name": "test_image_list_dataset_handle", "method_params": "", "method_startline": "206", "method_endline": "227", "method_complexity": {"method_NLOC": "19", "method_CCN": "4", "method_NToken": "200", "method_nesting_level": "0"}}}, "hunk_18": {"Ismethod": 1, "added_lines": "68,69", "deleted_lines": "69,70", "method_info": {"method_name": "test_recordimage_dataset", "method_params": "prepare_record", "method_startline": "68", "method_endline": "76", "method_complexity": {"method_NLOC": "8", "method_CCN": "3", "method_NToken": "89", "method_nesting_level": "0"}}}, "hunk_19": {"Ismethod": 1, "added_lines": "141,142,143,144,145,146,147,148,149,150", "deleted_lines": "141,142,143,144,145,146,147,148,149,150", "method_info": {"method_name": "test_datasets", "method_params": "", "method_startline": "141", "method_endline": "150", "method_complexity": {"method_NLOC": "10", "method_CCN": "1", "method_NToken": "186", "method_nesting_level": "0"}}}}}}}}