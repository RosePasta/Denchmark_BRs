{"BR": {"BR_id": "13098", "BR_author": "anirudhacharya", "BRopenT": "2018-11-02T23:22:37Z", "BRcloseT": "2019-02-24T21:42:23Z", "BR_text": {"BRsummary": "size_array operator returns wrong results on MacOS", "BRdescription": "\n <denchmark-h:h2>Description</denchmark-h>\n \n size_array operator returns incorrect results on MacOS but works correctly on Linux systems\n Package used (Python/R/Scala/Julia):\n I'm using Python\n Compiler (gcc/clang/mingw/visual studio):\n clang\n MXNet commit hash:\n <denchmark-link:https://github.com/apache/incubator-mxnet/commit/50f43f05ab61fe9e19698bb18dc34858a240b263>50f43f0</denchmark-link>\n \n Build config:\n make -j $(nproc) USE_OPENCV=1 USE_BLAS=openblas\n <denchmark-h:h2>Minimum reproducible example</denchmark-h>\n \n import mxnet as mx\n a = mx.nd.array([1,2,3,4,5])\n print(mx.nd.size_array(a))\n <denchmark-h:h2>Steps to reproduce</denchmark-h>\n \n \n Run the above script in MacOS, the function will return a junk memory location.\n Run it on Linux and it will work fine.\n \n <denchmark-h:h2>What have you tried to solve it?</denchmark-h>\n \n \n Use the operator on a linux system.\n \n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "anirudhacharya", "commentT": "2018-11-02T23:22:57Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/mxnet-label-bot>@mxnet-label-bot</denchmark-link>\n  [Operator, Bug]\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "anirudhacharya", "commentT": "2018-11-03T00:52:35Z", "comment_text": "\n \t\tIn <denchmark-link:https://github.com/apache/incubator-mxnet/blob/master/src/operator/tensor/elemwise_unary_op_basic.cc#L546>src/operator/tensor/elemwise_unary_op_basic.cc#L546</denchmark-link>\n ,\n   const index_t size_var = in_data.Size();\n   memcpy(out_data.dptr_, &size_var, 1U * sizeof(int64_t));\n In 3rdparty/dmlc-core/include/dmlc/data.h,\n typedef unsigned index_t;  \n It's confusing that index_t may not the same as int64_t\n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "anirudhacharya", "commentT": "2018-12-15T22:02:05Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/mxnet-label-bot>@mxnet-label-bot</denchmark-link>\n  [Call for Contribution, Good First Issue]\n \t\t"}, "comments_3": {"comment_id": 4, "comment_author": "anirudhacharya", "commentT": "2019-02-24T21:42:22Z", "comment_text": "\n \t\tIssue has been fixed:\n <denchmark-code>>>> import mxnet as mx\n a = mx.nd.array([1,2,3,4,5])\n >>> a = mx.nd.array([1,2,3,4,5])\n >>> print(mx.nd.size_array(a))\n \n [5]\n <NDArray 1 @cpu(0)>\n >>> \n </denchmark-code>\n \n \t\t"}}}, "commit": {"commit_id": "636933d424d789661d9e954ebfb569e1a2945a78", "commit_author": "Vandana Kannan", "commitT": "2018-12-07 19:39:47-08:00", "commit_complexity": {"commit_NLOC": "1.0", "commit_CCN": "1.0", "commit_Nprams": "0.5"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "python\\mxnet\\contrib\\onnx\\mx2onnx\\_op_translations.py", "file_new_name": "python\\mxnet\\contrib\\onnx\\mx2onnx\\_op_translations.py", "file_complexity": {"file_NLOC": "1037", "file_CCN": "154", "file_NToken": "6594"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "1653,1654,1655,1656,1657", "deleted_lines": null, "method_info": {"method_name": "convert_size", "method_params": "node,kwargs", "method_startline": "1653", "method_endline": "1657", "method_complexity": {"method_NLOC": "2", "method_CCN": "1", "method_NToken": "18", "method_nesting_level": "0"}}}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "python\\mxnet\\contrib\\onnx\\onnx2mx\\_import_helper.py", "file_new_name": "python\\mxnet\\contrib\\onnx\\onnx2mx\\_import_helper.py", "file_complexity": {"file_NLOC": "116", "file_CCN": "0", "file_NToken": "614"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "24,142", "deleted_lines": "24"}}}, "file_2": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "python\\mxnet\\contrib\\onnx\\onnx2mx\\_op_translations.py", "file_new_name": "python\\mxnet\\contrib\\onnx\\onnx2mx\\_op_translations.py", "file_complexity": {"file_NLOC": "464", "file_CCN": "139", "file_NToken": "4138"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "645,646,647", "deleted_lines": null, "method_info": {"method_name": "size", "method_params": "attrs,inputs,proto_obj", "method_startline": "645", "method_endline": "647", "method_complexity": {"method_NLOC": "2", "method_CCN": "1", "method_NToken": "16", "method_nesting_level": "0"}}}}}, "file_3": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "tests\\python-pytest\\onnx\\export\\onnx_backend_test.py", "file_new_name": "tests\\python-pytest\\onnx\\export\\onnx_backend_test.py", "file_complexity": {"file_NLOC": "113", "file_CCN": "0", "file_NToken": "297"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "100,101", "deleted_lines": "100"}}}, "file_4": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "tests\\python-pytest\\onnx\\import\\test_cases.py", "file_new_name": "tests\\python-pytest\\onnx\\import\\test_cases.py", "file_complexity": {"file_NLOC": "95", "file_CCN": "0", "file_NToken": "184"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "88,89", "deleted_lines": "88"}}}}}}