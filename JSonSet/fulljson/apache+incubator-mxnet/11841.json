{"BR": {"BR_id": "11841", "BR_author": "apeforest", "BRopenT": "2018-07-20T21:38:49Z", "BRcloseT": "2018-10-23T13:26:54Z", "BR_text": {"BRsummary": "All the tests in tools/coreml package are failing", "BRdescription": "\n <denchmark-h:h2>Description</denchmark-h>\n \n Currently all the tests for mxnet-to-coreml converter under the tools/coreml package are failing due to lack of maintenance. We need to update them to keep up with the latest release\n <denchmark-h:h2>Environment info (Required)</denchmark-h>\n \n <denchmark-code>----------Python Info----------\n ('Version      :', '2.7.15')\n ('Compiler     :', 'GCC 4.2.1 Compatible Apple LLVM 9.0.0 (clang-900.0.39.2)')\n ('Build        :', ('default', 'May  1 2018 16:44:37'))\n ('Arch         :', ('64bit', ''))\n ------------Pip Info-----------\n ('Version      :', '10.0.1')\n ('Directory    :', '/Users/lnyuan/.virtualenvs/mxnet2/lib/python2.7/site-packages/pip')\n ----------MXNet Info-----------\n ('Version      :', '1.3.0')\n ('Directory    :', '/Users/lnyuan/work/incubator-mxnet/python/mxnet')\n Hashtag not found. Not installed from pre-built package.\n ----------System Info----------\n ('Platform     :', 'Darwin-16.7.0-x86_64-i386-64bit')\n ('system       :', 'Darwin')\n ('node         :', '88e9fe759c49.ant.amazon.com')\n ('release      :', '16.7.0')\n ('version      :', 'Darwin Kernel Version 16.7.0: Thu Jun 21 20:07:39 PDT 2018; root:xnu-3789.73.14~1/RELEASE_X86_64')\n ----------Hardware Info----------\n ('machine      :', 'x86_64')\n ('processor    :', 'i386')\n machdep.cpu.extfeatures: SYSCALL XD 1GBPAGE EM64T LAHF LZCNT PREFETCHW RDTSCP TSCI\n machdep.cpu.leaf7_features: SMEP ERMS RDWRFSGS TSC_THREAD_OFFSET BMI1 AVX2 BMI2 INVPCID SMAP RDSEED ADX IPT SGX FPU_CSDS MPX CLFSOPT\n machdep.cpu.features: FPU VME DE PSE TSC MSR PAE MCE CX8 APIC SEP MTRR PGE MCA CMOV PAT PSE36 CLFSH DS ACPI MMX FXSR SSE SSE2 SS HTT TM PBE SSE3 PCLMULQDQ DTES64 MON DSCPL VMX EST TM2 SSSE3 FMA CX16 TPR PDCM SSE4.1 SSE4.2 x2APIC MOVBE POPCNT AES PCID XSAVE OSXSAVE SEGLIM64 TSCTMR AVX1.0 RDRAND F16C\n machdep.cpu.brand_string: Intel(R) Core(TM) i7-7700HQ CPU @ 2.80GHz\n ----------Network Test----------\n Setting timeout: 10\n Timing for MXNet: https://github.com/apache/incubator-mxnet, DNS: 0.0121 sec, LOAD: 0.6747 sec.\n Timing for PYPI: https://pypi.python.org/pypi/pip, DNS: 0.0117 sec, LOAD: 0.4044 sec.\n Timing for FashionMNIST: https://apache-mxnet.s3-accelerate.dualstack.amazonaws.com/gluon/dataset/fashion-mnist/train-labels-idx1-ubyte.gz, DNS: 0.0217 sec, LOAD: 0.1044 sec.\n Timing for Conda: https://repo.continuum.io/pkgs/free/, DNS: 0.0195 sec, LOAD: 0.0761 sec.\n Timing for Gluon Tutorial(en): http://gluon.mxnet.io, DNS: 0.0173 sec, LOAD: 0.2269 sec.\n Timing for Gluon Tutorial(cn): https://zh.gluon.ai, DNS: 0.0216 sec, LOAD: 0.1687 sec.\n </denchmark-code>\n \n Package used (Python/R/Scala/Julia):\n Python\n <denchmark-h:h2>Build info (Required if built from source)</denchmark-h>\n \n Compiler (gcc/clang/mingw/visual studio):\n g++\n MXNet commit hash:\n <denchmark-link:https://github.com/apache/incubator-mxnet/commit/e4134c8270c1b944278b1e0331313074b1d97cc0>e4134c8</denchmark-link>\n \n <denchmark-h:h2>Error Message:</denchmark-h>\n \n <denchmark-h:h2>======================================================================\n ERROR: test_pred_vgg16 (test_mxnet_models.ModelsTest)</denchmark-h>\n \n Traceback (most recent call last):\n File \"/Users/lnyuan/work/mxnet-master/tools/coreml/test/test_mxnet_models.py\", line 141, in test_pred_vgg16\n \"<denchmark-link:http://data.mxnet.io/models/imagenet/vgg/vgg16-0000.params%22%5D>http://data.mxnet.io/models/imagenet/vgg/vgg16-0000.params\"]</denchmark-link>\n )\n File \"/Users/lnyuan/work/mxnet-master/tools/coreml/test/test_mxnet_models.py\", line 116, in _test_model\n coreml_pred = coreml_model.predict(_mxnet_remove_batch(input_data)).values()[0].flatten()\n File \"/Users/lnyuan/.virtualenvs/mxnet2/lib/python2.7/site-packages/coremltools/models/model.py\", line 267, in predict\n raise Exception('Model prediction is only supported on macOS version 10.13 or later.')\n Exception: Model prediction is only supported on macOS version 10.13 or later.\n <denchmark-h:h2>Minimum reproducible example</denchmark-h>\n \n All the tests under tools/coreml/test\n <denchmark-h:h2>Steps to reproduce</denchmark-h>\n \n \n cd tools/coreml/test\n nosetests -v .\n \n <denchmark-h:h2>What have you tried to solve it?</denchmark-h>\n \n \n \n \n \n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "apeforest", "commentT": "2018-07-20T21:40:55Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/sandeep-krishnamurthy>@sandeep-krishnamurthy</denchmark-link>\n  Please help to label this issue \n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "apeforest", "commentT": "2018-07-24T17:21:05Z", "comment_text": "\n \t\tCreated a <denchmark-link:https://issues.apache.org/jira/browse/MXNET-707>JIRA</denchmark-link>\n  ticket to track this issue. I will work on it.\n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "apeforest", "commentT": "2018-07-24T23:35:55Z", "comment_text": "\n \t\tAs displayed in the error message \"Exception: Model prediction is only supported on macOS version 10.13 or later.\", the tests convert MXNet models into CoreML models and use CoreML to predict. This prediction is not supported on Mac OS 10.12.\n I have disabled the prediction and tests will pass on Mac OS 10.12. Need to test the model inference on Mac OS 10.13\n \t\t"}, "comments_3": {"comment_id": 4, "comment_author": "apeforest", "commentT": "2018-08-07T02:36:39Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/apeforest>@apeforest</denchmark-link>\n  any update?\n \t\t"}, "comments_4": {"comment_id": 5, "comment_author": "apeforest", "commentT": "2018-08-07T03:39:25Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/lupesko>@lupesko</denchmark-link>\n  I have created a simple test that can run on Mac OS 10.12. The PR is <denchmark-link:https://github.com/apache/incubator-mxnet/pull/11952>#11952</denchmark-link>\n \n Since our CI does not include Mac OS platform, I am working with <denchmark-link:https://github.com/marcoabreu>@marcoabreu</denchmark-link>\n  to add this to the manual test suite.\n \t\t"}, "comments_5": {"comment_id": 6, "comment_author": "apeforest", "commentT": "2018-10-23T05:08:23Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/sandeep-krishnamurthy>@sandeep-krishnamurthy</denchmark-link>\n  <denchmark-link:https://github.com/nswamy>@nswamy</denchmark-link>\n  Please close this issue.\n \t\t"}}}, "commit": {"commit_id": "815f36ce8b4ed16fe27d500f5c8c930cd10cee5c", "commit_author": "Lin Yuan", "commitT": "2018-10-16 19:16:15+02:00", "commit_complexity": {"commit_NLOC": "1.0", "commit_CCN": "0.0", "commit_Nprams": "1.0"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": ".travis.yml", "file_new_name": ".travis.yml", "file_complexity": {"file_NLOC": "None", "file_CCN": "None", "file_NToken": "None"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "37,42", "deleted_lines": null}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "ci\\travis\\install.sh", "file_new_name": "ci\\travis\\install.sh", "file_complexity": {"file_NLOC": "None", "file_CCN": "None", "file_NToken": "None"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "25", "deleted_lines": "25"}}}, "file_2": {"file_change_type": "MODIFY", "file_Nmethod": 13, "file_old_name": "tools\\coreml\\test\\test_mxnet_converter.py", "file_new_name": "tools\\coreml\\test\\test_mxnet_converter.py", "file_complexity": {"file_NLOC": "798", "file_CCN": "55", "file_NToken": "5580"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "39,40", "deleted_lines": "42", "method_info": {"method_name": "_get_mxnet_module", "method_params": "net,data_shapes,mode,label_names,input_names", "method_startline": "33", "method_endline": "57", "method_complexity": {"method_NLOC": "19", "method_CCN": "4", "method_NToken": "120", "method_nesting_level": "0"}}}, "hunk_1": {"Ismethod": 1, "added_lines": null, "deleted_lines": "918", "method_info": {"method_name": "test_batch_norm_no_global_stats", "method_params": "self", "method_startline": "916", "method_endline": "938", "method_complexity": {"method_NLOC": "17", "method_CCN": "1", "method_NToken": "131", "method_nesting_level": "1"}}}, "hunk_2": {"Ismethod": 1, "added_lines": "144", "deleted_lines": "143", "method_info": {"method_name": "test_tiny_inner_product_ones_input", "method_params": "self", "method_startline": "139", "method_endline": "144", "method_complexity": {"method_NLOC": "6", "method_CCN": "1", "method_NToken": "70", "method_nesting_level": "1"}}}, "hunk_3": {"Ismethod": 1, "added_lines": "66,67", "deleted_lines": "67", "method_info": {"method_name": "_test_mxnet_model", "method_params": "self,net,input_shape,mode,class_labels,coreml_mode,label_names,delta,pre_processing_args,input_name", "method_startline": "66", "method_endline": "68", "method_complexity": {"method_NLOC": "3", "method_CCN": "1", "method_NToken": "37", "method_nesting_level": "1"}}}, "hunk_4": {"Ismethod": 1, "added_lines": "522,523,533,535,540,541", "deleted_lines": "519,520,521,522,532,534,539", "method_info": {"method_name": "test_tiny_synset_random_input", "method_params": "self", "method_startline": "516", "method_endline": "542", "method_complexity": {"method_NLOC": "21", "method_CCN": "1", "method_NToken": "203", "method_nesting_level": "1"}}}, "hunk_5": {"Ismethod": 1, "added_lines": "584", "deleted_lines": "582", "method_info": {"method_name": "test_tiny_deconv_ones_input", "method_params": "self", "method_startline": "565", "method_endline": "584", "method_complexity": {"method_NLOC": "17", "method_CCN": "1", "method_NToken": "110", "method_nesting_level": "1"}}}, "hunk_6": {"Ismethod": 1, "added_lines": "166,167", "deleted_lines": "165", "method_info": {"method_name": "test_tiny_softmax_random_input", "method_params": "self", "method_startline": "160", "method_endline": "167", "method_complexity": {"method_NLOC": "8", "method_CCN": "1", "method_NToken": "84", "method_nesting_level": "1"}}}, "hunk_7": {"Ismethod": 1, "added_lines": "486,487", "deleted_lines": "484", "method_info": {"method_name": "test_flatten", "method_params": "self", "method_startline": "465", "method_endline": "487", "method_complexity": {"method_NLOC": "21", "method_CCN": "1", "method_NToken": "160", "method_nesting_level": "1"}}}, "hunk_8": {"Ismethod": 1, "added_lines": "947,948,949,950,951,952", "deleted_lines": "946,947,951", "method_info": {"method_name": "test_pre_processing_args", "method_params": "self", "method_startline": "941", "method_endline": "952", "method_complexity": {"method_NLOC": "12", "method_CCN": "1", "method_NToken": "104", "method_nesting_level": "1"}}}, "hunk_9": {"Ismethod": 1, "added_lines": "233", "deleted_lines": "231", "method_info": {"method_name": "test_tiny_conv_ones_input", "method_params": "self", "method_startline": "215", "method_endline": "233", "method_complexity": {"method_NLOC": "17", "method_CCN": "1", "method_NToken": "110", "method_nesting_level": "1"}}}, "hunk_10": {"Ismethod": 1, "added_lines": "67", "deleted_lines": "67", "method_info": {"method_name": "_test_mxnet_model", "method_params": "self,net,input_shape,mode,class_labels,coreml_mode,label_names,delta,pre_processing_args,input_name", "method_startline": "67", "method_endline": "68", "method_complexity": {"method_NLOC": "2", "method_CCN": "1", "method_NToken": "37", "method_nesting_level": "1"}}}, "hunk_11": {"Ismethod": 1, "added_lines": "967,968,973", "deleted_lines": "966", "method_info": {"method_name": "test_really_tiny_conv_optional_params", "method_params": "self", "method_startline": "965", "method_endline": "983", "method_complexity": {"method_NLOC": "13", "method_CCN": "1", "method_NToken": "83", "method_nesting_level": "1"}}}, "hunk_12": {"Ismethod": 1, "added_lines": "956,957", "deleted_lines": "961", "method_info": {"method_name": "test_different_input_variables", "method_params": "self", "method_startline": "954", "method_endline": "963", "method_complexity": {"method_NLOC": "6", "method_CCN": "1", "method_NToken": "69", "method_nesting_level": "1"}}}}}, "file_3": {"file_change_type": "MODIFY", "file_Nmethod": 6, "file_old_name": "tools\\coreml\\test\\test_mxnet_image.py", "file_new_name": "tools\\coreml\\test\\test_mxnet_image.py", "file_complexity": {"file_NLOC": "100", "file_CCN": "13", "file_NToken": "696"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "131,132", "deleted_lines": "130", "method_info": {"method_name": "test_resnet18", "method_params": "self", "method_startline": "129", "method_endline": "132", "method_complexity": {"method_NLOC": "4", "method_CCN": "1", "method_NToken": "25", "method_nesting_level": "1"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "41", "deleted_lines": "47", "method_info": {"method_name": "read_image", "method_params": "data_val,label_name", "method_startline": "35", "method_endline": "47", "method_complexity": {"method_NLOC": "13", "method_CCN": "1", "method_NToken": "59", "method_nesting_level": "0"}}}, "hunk_2": {"Ismethod": 1, "added_lines": "77,81,101,102,104,105,107,108,115,116,117", "deleted_lines": "83,87,107,109,111", "method_info": {"method_name": "_test_image_prediction", "method_params": "self,model_name,epoch,label_name", "method_startline": "65", "method_endline": "117", "method_complexity": {"method_NLOC": "47", "method_CCN": "5", "method_NToken": "362", "method_nesting_level": "1"}}}, "hunk_3": {"Ismethod": 1, "added_lines": "136,137", "deleted_lines": "134", "method_info": {"method_name": "test_vgg16", "method_params": "self", "method_startline": "134", "method_endline": "137", "method_complexity": {"method_NLOC": "4", "method_CCN": "1", "method_NToken": "25", "method_nesting_level": "1"}}}, "hunk_4": {"Ismethod": 1, "added_lines": "121,122", "deleted_lines": "122", "method_info": {"method_name": "test_squeezenet", "method_params": "self", "method_startline": "119", "method_endline": "122", "method_complexity": {"method_NLOC": "4", "method_CCN": "1", "method_NToken": "25", "method_nesting_level": "1"}}}, "hunk_5": {"Ismethod": 1, "added_lines": "126,127", "deleted_lines": "126", "method_info": {"method_name": "test_inception_with_batch_normalization", "method_params": "self", "method_startline": "124", "method_endline": "127", "method_complexity": {"method_NLOC": "4", "method_CCN": "1", "method_NToken": "25", "method_nesting_level": "1"}}}}}, "file_4": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "tools\\coreml\\test\\test_mxnet_models.py", "file_new_name": "tools\\coreml\\test\\test_mxnet_models.py", "file_complexity": {"file_NLOC": "119", "file_CCN": "11", "file_NToken": "698"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "30,31", "deleted_lines": "28,29,30,31,32", "method_info": {"method_name": "_mxnet_remove_batch", "method_params": "input_data", "method_startline": "28", "method_endline": "32", "method_complexity": {"method_NLOC": "5", "method_CCN": "2", "method_NToken": "37", "method_nesting_level": "0"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "75,76", "deleted_lines": null, "method_info": {"method_name": "_test_model", "method_params": "self,model_name,epoch_num,input_shape,3,224,224", "method_startline": "75", "method_endline": "76", "method_complexity": {"method_NLOC": "2", "method_CCN": "1", "method_NToken": "25", "method_nesting_level": "1"}}}}}}}}