{"BR": {"BR_id": "638", "BR_author": "jchen42703", "BRopenT": "2020-02-06T04:54:27Z", "BRcloseT": "2020-02-29T21:40:56Z", "BR_text": {"BRsummary": "AttributeError: 'numpy.ndarray' object has no attribute 'items' when using `MulticlassDiceMetricCallback`", "BRdescription": "\n Describe the bug\n In the on_loader_end method for MulticlassDiceMetricCallback, batch_metrics is a numpy array instead of a dict. This is because batch_metrics = calculate_dice(...) and calculate_dice returns a np.ndarray of the dice coefficients for each class instead of a dict.\n To Reproduce\n Steps to reproduce the behavior:\n \n Train a segmentation pipeline with MulticlassDiceMetricCallback.\n Haven't explored edge cases where this bug may not be an issue.\n \n Expected behavior\n Should work properly and return the multi-class dice scores for each class.\n Screenshots\n If applicable, add screenshots to help explain your problem.\n Additional context\n Add any other context about the problem here.\n I'll look towards creating a PR for this bug soon.\n \t"}, "comments": {}}, "commit": {"commit_id": "38a503c8af040906e377b7485d7fe15a7bc1de19", "commit_author": "Joseph Chen", "commitT": "2020-02-28 08:25:57+03:00", "commit_complexity": {"commit_NLOC": "0.0", "commit_CCN": "0.0", "commit_Nprams": "1.0"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "catalyst\\dl\\callbacks\\__init__.py", "file_new_name": "catalyst\\dl\\callbacks\\__init__.py", "file_complexity": {"file_NLOC": "16", "file_CCN": "0", "file_NToken": "78"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "13,14", "deleted_lines": "13"}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 5, "file_old_name": "catalyst\\dl\\callbacks\\metrics\\dice.py", "file_new_name": "catalyst\\dl\\callbacks\\metrics\\dice.py", "file_complexity": {"file_NLOC": "75", "file_CCN": "12", "file_NToken": "421"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "51", "deleted_lines": "49,50", "method_info": {"method_name": "__init__", "method_params": "self,str,str,str,class_names", "method_startline": "47", "method_endline": "52", "method_complexity": {"method_NLOC": "6", "method_CCN": "1", "method_NToken": "26", "method_nesting_level": "1"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "81,82,83", "deleted_lines": "80,82,83,86,87,88,90,91,92", "method_info": {"method_name": "on_batch_end", "method_params": "self,State", "method_startline": "80", "method_endline": "94", "method_complexity": {"method_NLOC": "10", "method_CCN": "2", "method_NToken": "59", "method_nesting_level": "1"}}}, "hunk_2": {"Ismethod": 1, "added_lines": "43,44,45,46", "deleted_lines": "45,49,50", "method_info": {"method_name": "__init__", "method_params": "self,str,str,str,class_names,class_prefix,metric_params", "method_startline": "43", "method_endline": "50", "method_complexity": {"method_NLOC": "8", "method_CCN": "1", "method_NToken": "32", "method_nesting_level": "1"}}}, "hunk_3": {"Ismethod": 1, "added_lines": "99,100,102,103,104,105,107,108,109,111,113,114,115,116", "deleted_lines": null, "method_info": {"method_name": "on_loader_end", "method_params": "self,State", "method_startline": "96", "method_endline": "118", "method_complexity": {"method_NLOC": "16", "method_CCN": "7", "method_NToken": "148", "method_nesting_level": "1"}}}, "hunk_4": {"Ismethod": 1, "added_lines": "75,76,77", "deleted_lines": null, "method_info": {"method_name": "_reset_stats", "method_params": "self", "method_startline": "74", "method_endline": "78", "method_complexity": {"method_NLOC": "2", "method_CCN": "1", "method_NToken": "11", "method_nesting_level": "1"}}}}}}}}