{"BR": {"BR_id": "621", "BR_author": "hdemers", "BRopenT": "2020-02-11T21:55:21Z", "BRcloseT": "2020-02-14T08:24:11Z", "BR_text": {"BRsummary": "GluonTS sets the root logger log-level, it should not", "BRdescription": "\n <denchmark-h:h2>Description</denchmark-h>\n \n GluonTS is configuring loggers, specifically it is setting the log level of the root logger. This prevents the application from properly configuring its loggers.\n Generally speaking, configuring loggers should be avoided in libraries and left to the application. As per <denchmark-link:https://docs.python-guide.org/writing/logging/#logging-in-a-library>The Hitchhiker's Guide to Python</denchmark-link>\n :\n \n Because the user, not the library, should dictate what happens when a logging event occurs, one admonition bears repeating:\n It is strongly advised that you do not add any handlers other than NullHandler to your library\u2019s loggers.\n Best practice when instantiating loggers in a library is to only create them using the __name__ global variable: the logging module creates a hierarchy of loggers using dot notation, so using __name__ ensures no name collisions.\n \n In two places at least in the code, the root logger is configured:\n \n component.py, line 41\n log.py, line 22\n \n <denchmark-h:h2>To Reproduce</denchmark-h>\n \n import logging\n log = logging.getLogger()\n log.setLevel('DEBUG')\n \n print(logging.getLevelName(log.getEffectiveLevel()))\n \n from gluonts.model.deepar import DeepAREstimator\n \n print(logging.getLevelName(log.getEffectiveLevel()))\n This prints:\n <denchmark-code>DEBUG\n INFO\n </denchmark-code>\n \n The second print should output DEBUG since this is how it was configured on line 3.\n This prevents application using gluonts to properly configure their loggers.\n <denchmark-h:h2>Environment</denchmark-h>\n \n \n Operating system: Ubuntu\n Python version: 3.6\n GluonTS version: 0.4.2\n \n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "hdemers", "commentT": "2020-02-12T12:33:34Z", "comment_text": "\n \t\tGood point <denchmark-link:https://github.com/hdemers>@hdemers</denchmark-link>\n , thanks for pointing this out! Let me know in case you intend to open a PR for this, otherwise this will be addressed as soon as someone picks it up\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "hdemers", "commentT": "2020-02-13T14:47:46Z", "comment_text": "\n \t\tOf course, no problem <denchmark-link:https://github.com/lostella>@lostella</denchmark-link>\n . I don't have the time right now to open a PR, but I might in the not too distant future.\n \t\t"}}}, "commit": {"commit_id": "0886ce46d9d43eae24c682f231eee53a7a703b21", "commit_author": "Jasper Schulz", "commitT": "2020-02-14 09:24:10+01:00", "commit_complexity": {"commit_NLOC": "0.0", "commit_CCN": "0.0", "commit_Nprams": "0.0"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "src\\gluonts\\core\\component.py", "file_new_name": "src\\gluonts\\core\\component.py", "file_complexity": {"file_NLOC": "395", "file_CCN": "52", "file_NToken": "1370"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "516", "deleted_lines": null, "method_info": {"method_name": "check_gpu_support", "method_params": "", "method_startline": "509", "method_endline": "516", "method_complexity": {"method_NLOC": "8", "method_CCN": "1", "method_NToken": "23", "method_nesting_level": "0"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "501,502,504,505,506", "deleted_lines": "503,504,505,506", "method_info": {"method_name": "get_mxnet_context", "method_params": "gpu_number", "method_startline": "497", "method_endline": "506", "method_complexity": {"method_NLOC": "10", "method_CCN": "2", "method_NToken": "48", "method_nesting_level": "0"}}}}}, "file_1": {"file_change_type": "DELETE", "file_Nmethod": 0, "file_old_name": "src\\gluonts\\core\\log.py", "file_new_name": "None", "file_complexity": {"file_NLOC": "None", "file_CCN": "None", "file_NToken": "None"}}, "file_2": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "src\\gluonts\\nursery\\sagemaker_sdk\\entry_point_scripts\\run_entry_point.py", "file_new_name": "src\\gluonts\\nursery\\sagemaker_sdk\\entry_point_scripts\\run_entry_point.py", "file_complexity": {"file_NLOC": "29", "file_CCN": "1", "file_NToken": "151"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "21,22,23,24,25", "deleted_lines": "21"}}}, "file_3": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "src\\gluonts\\nursery\\sagemaker_sdk\\entry_point_scripts\\train_entry_point.py", "file_new_name": "src\\gluonts\\nursery\\sagemaker_sdk\\entry_point_scripts\\train_entry_point.py", "file_complexity": {"file_NLOC": "84", "file_CCN": "3", "file_NToken": "532"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "30,31,32,33,34", "deleted_lines": "30"}}}, "file_4": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "src\\gluonts\\nursery\\sagemaker_sdk\\estimator.py", "file_new_name": "src\\gluonts\\nursery\\sagemaker_sdk\\estimator.py", "file_complexity": {"file_NLOC": "671", "file_CCN": "16", "file_NToken": "1414"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "16,74,75,76", "deleted_lines": "50"}}}, "file_5": {"file_change_type": "DELETE", "file_Nmethod": 0, "file_old_name": "src\\gluonts\\nursery\\sagemaker_sdk\\log.py", "file_new_name": "None", "file_complexity": {"file_NLOC": "None", "file_CCN": "None", "file_NToken": "None"}}, "file_6": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "src\\gluonts\\nursery\\sagemaker_sdk\\model.py", "file_new_name": "src\\gluonts\\nursery\\sagemaker_sdk\\model.py", "file_complexity": {"file_NLOC": "101", "file_CCN": "3", "file_NToken": "316"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "16,33,34,35", "deleted_lines": "32"}}}, "file_7": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "src\\gluonts\\shell\\__main__.py", "file_new_name": "src\\gluonts\\shell\\__main__.py", "file_complexity": {"file_NLOC": "146", "file_CCN": "10", "file_NToken": "572"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "155", "deleted_lines": "153", "method_info": {"method_name": "train_command", "method_params": "str", "method_startline": "152", "method_endline": "177", "method_complexity": {"method_NLOC": "23", "method_CCN": "4", "method_NToken": "132", "method_nesting_level": "0"}}}}}, "file_8": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "src\\gluonts\\shell\\serve\\__init__.py", "file_new_name": "src\\gluonts\\shell\\serve\\__init__.py", "file_complexity": {"file_NLOC": "114", "file_CCN": "16", "file_NToken": "599"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "35,38,39,41", "deleted_lines": "37,38,41"}}}, "file_9": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "src\\gluonts\\shell\\train.py", "file_new_name": "src\\gluonts\\shell\\train.py", "file_complexity": {"file_NLOC": "92", "file_CCN": "4", "file_NToken": "459"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "38,39,40,41,42,43,44,45,46,47,48,49", "deleted_lines": "38,40", "method_info": {"method_name": "log_metric", "method_params": "str,Any", "method_startline": "38", "method_endline": "49", "method_complexity": {"method_NLOC": "12", "method_CCN": "1", "method_NToken": "21", "method_nesting_level": "0"}}}}}}}}