{"BR": {"BR_id": "758", "BR_author": "lostella", "BRopenT": "2020-04-15T17:26:26Z", "BRcloseT": "2020-04-16T07:10:49Z", "BR_text": {"BRsummary": "\"info\" field is broken", "BRdescription": "\n Seems to have been introduced in <denchmark-link:https://github.com/awslabs/gluon-ts/commit/cfe27298deb426bdb7d81d2b0905b8870a24fdab>cfe2729</denchmark-link>\n  (worked fine before that)\n <denchmark-h:h2>To Reproduce</denchmark-h>\n \n import numpy as np\n \n from gluonts.model.simple_feedforward import SimpleFeedForwardEstimator\n from gluonts.dataset.common import ListDataset\n from gluonts.trainer import Trainer\n \n dataset = ListDataset(\n     data_iter=[{\n         \"target\": np.random.normal(loc=100, scale=10, size=(10000)),\n         \"start\": \"2020-01-01 00:00:00\",\n         \"info\": {\"some_key\": [1, 2, 3]},\n     }],\n     freq=\"5min\",\n )\n \n estimator = SimpleFeedForwardEstimator(\n     freq=\"5min\",\n     prediction_length=4,\n     context_length=100,\n     trainer=Trainer(\n         epochs=2, num_batches_per_epoch=3, batch_size=16, hybridize=False\n     ),\n )\n \n predictor = estimator.train(dataset)\n <denchmark-h:h2>Error message or code output</denchmark-h>\n \n <denchmark-code>Traceback (most recent call last):\n   File \"/Users/stellalo/gluon-ts/issues/issue_info.py\", line 25, in <module>\n     predictor = estimator.train(dataset)\n   File \"/Users/stellalo/gluon-ts/src/gluonts/model/estimator.py\", line 240, in train\n     training_data, validation_data, num_workers, num_prefetch, **kwargs\n   File \"/Users/stellalo/gluon-ts/src/gluonts/model/estimator.py\", line 219, in train_model\n     validation_iter=validation_data_loader,\n   File \"/Users/stellalo/gluon-ts/src/gluonts/trainer/_base.py\", line 303, in __call__\n     epoch_loss = loop(epoch_no, train_iter)\n   File \"/Users/stellalo/gluon-ts/src/gluonts/trainer/_base.py\", line 231, in loop\n     for batch_no, data_entry in enumerate(it, start=1):\n   File \"/Users/stellalo/.virtualenvs/gluonts/lib/python3.7/site-packages/tqdm/std.py\", line 1127, in __iter__\n     for obj in iterable:\n   File \"/Users/stellalo/gluon-ts/src/gluonts/dataset/parallelized_loader.py\", line 570, in same_process_iter\n     single_process_ctx=self.ctx,\n   File \"/Users/stellalo/gluon-ts/src/gluonts/dataset/parallelized_loader.py\", line 152, in default_batchify_fn\n     for key in data[0].keys()\n   File \"/Users/stellalo/gluon-ts/src/gluonts/dataset/parallelized_loader.py\", line 152, in <dictcomp>\n     for key in data[0].keys()\n   File \"/Users/stellalo/gluon-ts/src/gluonts/dataset/parallelized_loader.py\", line 133, in stack\n     f\"Invalid type of data: {type(data[0])} for argument loss_function.\"\n TypeError: Invalid type of data: <class 'dict'> for argument loss_function.\n </denchmark-code>\n \n <denchmark-h:h2>Environment</denchmark-h>\n \n \n Operating system:\n Python version:\n GluonTS version:\n \n (Add as much information about your environment as possible, e.g. dependencies versions.)\n \t"}, "comments": {}}, "commit": {"commit_id": "78e5bc885375f2b9858ece0febdd976e2a7bc993", "commit_author": "Lorenzo Stella", "commitT": "2020-04-16 09:10:48+02:00", "commit_complexity": {"commit_NLOC": "1.0", "commit_CCN": "1.0", "commit_Nprams": "1.0"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "src\\gluonts\\dataset\\parallelized_loader.py", "file_new_name": "src\\gluonts\\dataset\\parallelized_loader.py", "file_complexity": {"file_NLOC": "454", "file_CCN": "45", "file_NToken": "2280"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "129,130", "deleted_lines": "129,130,131,132,133,134"}}}, "file_1": {"file_change_type": "ADD", "file_Nmethod": 0, "file_old_name": "None", "file_new_name": "test\\model\\test_item_id_info.py", "file_complexity": {"file_NLOC": "63", "file_CCN": "4", "file_NToken": "321"}}}}}