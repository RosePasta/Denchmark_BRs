{"BR": {"BR_id": "107", "BR_author": "kuperov", "BRopenT": "2019-06-14T04:47:18Z", "BRcloseT": "2019-06-14T11:25:35Z", "BR_text": {"BRsummary": "Error importing ComplexSeasonalTimeSeries on python 3.7", "BRdescription": "\n Hi Gluon TS maintainers\n What a great project. I found a little glitch under anaconda and windows 10, when trying to import the  class. The issue appears similar to <denchmark-link:https://github.com/awslabs/gluon-ts/issues/62>#62</denchmark-link>\n , <denchmark-link:https://github.com/awslabs/gluon-ts/issues/67>#67</denchmark-link>\n , and <denchmark-link:https://github.com/awslabs/gluon-ts/pull/68>#68</denchmark-link>\n  but those issues show as fixed, and this error occurs on HEAD.\n To reproduce, create a new anaconda environment for python 3.7, clone the repo and install from source. Then:\n <denchmark-code>C:\\path>python\n Python 3.7.3 (default, Apr 24 2019, 15:29:51) [MSC v.1915 64 bit (AMD64)] :: Anaconda, Inc. on win32\n Type \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n >>> from gluonts.dataset.artificial._base import ComplexSeasonalTimeSeries\n Traceback (most recent call last):\n   File \"<stdin>\", line 1, in <module>\n   File \"c:\\users\\alex\\src\\gluon-ts\\src\\gluonts\\dataset\\artificial\\__init__.py\", line 2, in <module>\n     from ._base import (\n   File \"c:\\users\\alex\\src\\gluon-ts\\src\\gluonts\\dataset\\artificial\\_base.py\", line 20, in <module>\n     from gluonts.dataset.artificial.recipe import (\n   File \"c:\\users\\alex\\src\\gluon-ts\\src\\gluonts\\dataset\\artificial\\recipe.py\", line 242, in <module>\n     class LinearTrend(Lifted):\n   File \"c:\\users\\alex\\src\\gluon-ts\\src\\gluonts\\dataset\\artificial\\recipe.py\", line 244, in LinearTrend\n     def __init__(self, slope_fun: Callable = Constant(1.0)) -> None:\n   File \"c:\\users\\alex\\src\\gluon-ts\\src\\gluonts\\core\\component.py\", line 352, in validator\n     **init_fields,\n   File \"C:\\Users\\Alex\\.conda\\envs\\gts\\lib\\site-packages\\pydantic\\main.py\", line 410, in create_model\n     config=config,\n   File \"C:\\Users\\Alex\\.conda\\envs\\gts\\lib\\site-packages\\pydantic\\fields.py\", line 107, in infer\n     schema=schema,\n   File \"C:\\Users\\Alex\\.conda\\envs\\gts\\lib\\site-packages\\pydantic\\fields.py\", line 87, in __init__\n     self.prepare()\n   File \"C:\\Users\\Alex\\.conda\\envs\\gts\\lib\\site-packages\\pydantic\\fields.py\", line 135, in prepare\n     self._populate_sub_fields()\n   File \"C:\\Users\\Alex\\.conda\\envs\\gts\\lib\\site-packages\\pydantic\\fields.py\", line 240, in _populate_sub_fields\n     assert issubclass(origin, Mapping)\n AssertionError\n >>>\n </denchmark-code>\n \n But in contrast, repeating the above with python 3.6, we get\n <denchmark-code>C:\\path>python\n Python 3.6.8 |Anaconda, Inc.| (default, Feb 21 2019, 18:30:04) [MSC v.1916 64 bit (AMD64)] on win32\n Type \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n >>> from gluonts.dataset.artificial._base import ComplexSeasonalTimeSeries\n >>>\n </denchmark-code>\n \n Cheers\n Alex\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "kuperov", "commentT": "2019-06-14T08:40:18Z", "comment_text": "\n \t\tThanks Alex!\n This error does not seem limited to windows: I'm also getting the same error on my OS X machine with Python 3.7\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "kuperov", "commentT": "2019-06-14T08:58:00Z", "comment_text": "\n \t\tFrom what I understand, updating the pydantic version fixes the issue. However, that requires some changes in the code base first.\n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "kuperov", "commentT": "2019-06-14T11:57:56Z", "comment_text": "\n \t\tThanks guys!\n \t\t"}}}, "commit": {"commit_id": "04c473504ca4c03780863dde60f5a91f2b0f107c", "commit_author": "Jasper Schulz", "commitT": "2019-06-14 13:25:34+02:00", "commit_complexity": {"commit_NLOC": "None", "commit_CCN": "None", "commit_Nprams": "None"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "requirements.txt", "file_new_name": "requirements.txt", "file_complexity": {"file_NLOC": "None", "file_CCN": "None", "file_NToken": "None"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "7", "deleted_lines": "7"}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 3, "file_old_name": "src\\gluonts\\core\\component.py", "file_new_name": "src\\gluonts\\core\\component.py", "file_complexity": {"file_NLOC": "345", "file_CCN": "40", "file_NToken": "1166"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "307", "deleted_lines": "307", "method_info": {"method_name": "validated", "method_params": "base_model", "method_startline": "274", "method_endline": "404", "method_complexity": {"method_NLOC": "3", "method_CCN": "1", "method_NToken": "12", "method_nesting_level": "0"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "430", "deleted_lines": "430", "method_info": {"method_name": "get_validators", "method_params": "cls", "method_startline": "430", "method_endline": "431", "method_complexity": {"method_NLOC": "2", "method_CCN": "1", "method_NToken": "13", "method_nesting_level": "1"}}}, "hunk_2": {"Ismethod": 1, "added_lines": "430", "deleted_lines": "430", "method_info": {"method_name": "__get_validators__", "method_params": "cls", "method_startline": "430", "method_endline": "431", "method_complexity": {"method_NLOC": "2", "method_CCN": "1", "method_NToken": "13", "method_nesting_level": "1"}}}}}, "file_2": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "src\\gluonts\\dataset\\common.py", "file_new_name": "src\\gluonts\\dataset\\common.py", "file_complexity": {"file_NLOC": "406", "file_CCN": "61", "file_NToken": "1928"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "55", "deleted_lines": "55", "method_info": {"method_name": "get_validators", "method_params": "cls", "method_startline": "55", "method_endline": "62", "method_complexity": {"method_NLOC": "3", "method_CCN": "1", "method_NToken": "9", "method_nesting_level": "1"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "55", "deleted_lines": "55", "method_info": {"method_name": "__get_validators__", "method_params": "cls", "method_startline": "55", "method_endline": "62", "method_complexity": {"method_NLOC": "3", "method_CCN": "1", "method_NToken": "9", "method_nesting_level": "1"}}}}}, "file_3": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "src\\gluonts\\model\\forecast.py", "file_new_name": "src\\gluonts\\model\\forecast.py", "file_complexity": {"file_NLOC": "396", "file_CCN": "42", "file_NToken": "1813"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "520", "deleted_lines": "520", "method_info": {"method_name": "get_validators", "method_params": "cls", "method_startline": "520", "method_endline": "521", "method_complexity": {"method_NLOC": "2", "method_CCN": "1", "method_NToken": "9", "method_nesting_level": "1"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "520", "deleted_lines": "520", "method_info": {"method_name": "__get_validators__", "method_params": "cls", "method_startline": "520", "method_endline": "521", "method_complexity": {"method_NLOC": "2", "method_CCN": "1", "method_NToken": "9", "method_nesting_level": "1"}}}}}, "file_4": {"file_change_type": "MODIFY", "file_Nmethod": 6, "file_old_name": "src\\gluonts\\transform.py", "file_new_name": "src\\gluonts\\transform.py", "file_complexity": {"file_NLOC": "1041", "file_CCN": "103", "file_NToken": "4519"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "1228,1229", "deleted_lines": "1228,1229", "method_info": {"method_name": "__init__", "method_params": "self", "method_startline": "1228", "method_endline": "1229", "method_complexity": {"method_NLOC": "2", "method_CCN": "1", "method_NToken": "19", "method_nesting_level": "1"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "1232", "deleted_lines": "1232", "method_info": {"method_name": "map_transform", "method_params": "self,DataEntry,bool", "method_startline": "1231", "method_endline": "1232", "method_complexity": {"method_NLOC": "2", "method_CCN": "2", "method_NToken": "30", "method_nesting_level": "1"}}}, "hunk_2": {"Ismethod": 1, "added_lines": "579,580", "deleted_lines": "579,580", "method_info": {"method_name": "__init__", "method_params": "self,int", "method_startline": "579", "method_endline": "581", "method_complexity": {"method_NLOC": "3", "method_CCN": "1", "method_NToken": "37", "method_nesting_level": "1"}}}, "hunk_3": {"Ismethod": 1, "added_lines": "1228,1229", "deleted_lines": "1228,1229", "method_info": {"method_name": "__init__", "method_params": "self", "method_startline": "1228", "method_endline": "1229", "method_complexity": {"method_NLOC": "2", "method_CCN": "1", "method_NToken": "19", "method_nesting_level": "1"}}}, "hunk_4": {"Ismethod": 1, "added_lines": "584", "deleted_lines": "584", "method_info": {"method_name": "transform", "method_params": "self,DataEntry", "method_startline": "583", "method_endline": "586", "method_complexity": {"method_NLOC": "4", "method_CCN": "2", "method_NToken": "34", "method_nesting_level": "1"}}}, "hunk_5": {"Ismethod": 1, "added_lines": "579,580", "deleted_lines": "579,580", "method_info": {"method_name": "__init__", "method_params": "self,int", "method_startline": "579", "method_endline": "581", "method_complexity": {"method_NLOC": "3", "method_CCN": "1", "method_NToken": "37", "method_nesting_level": "1"}}}}}, "file_5": {"file_change_type": "MODIFY", "file_Nmethod": 3, "file_old_name": "test\\core\\test_component.py", "file_new_name": "test\\core\\test_component.py", "file_complexity": {"file_NLOC": "128", "file_CCN": "19", "file_NToken": "963"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "55", "deleted_lines": "55", "method_info": {"method_name": "__init__", "method_params": "self,int", "method_startline": "54", "method_endline": "55", "method_complexity": {"method_NLOC": "2", "method_CCN": "1", "method_NToken": "26", "method_nesting_level": "1"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "55", "deleted_lines": "55", "method_info": {"method_name": "__init__", "method_params": "self,int", "method_startline": "54", "method_endline": "55", "method_complexity": {"method_NLOC": "2", "method_CCN": "1", "method_NToken": "26", "method_nesting_level": "1"}}}, "hunk_2": {"Ismethod": 1, "added_lines": "107,119,123,127", "deleted_lines": "107,119,123,127", "method_info": {"method_name": "test_component_ctor", "method_params": "", "method_startline": "73", "method_endline": "133", "method_complexity": {"method_NLOC": "49", "method_CCN": "4", "method_NToken": "480", "method_nesting_level": "0"}}}}}, "file_6": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "test\\distribution\\test_distribution_inference.py", "file_new_name": "test\\distribution\\test_distribution_inference.py", "file_complexity": {"file_NLOC": "471", "file_CCN": "15", "file_NToken": "3499"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "49", "deleted_lines": "49"}}}}}}