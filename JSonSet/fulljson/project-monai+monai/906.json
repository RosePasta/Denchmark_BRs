{"BR": {"BR_id": "906", "BR_author": "Can-Zhao", "BRopenT": "2020-08-18T01:42:08Z", "BRcloseT": "2020-08-18T15:21:26Z", "BR_text": {"BRsummary": "sliding_window_inference() in monai.inferers went wrong when roi_size=(M,N,1)", "BRdescription": "\n Describe the bug\n sliding_window_inference() gives NaN when roi_size=(M,N,1)\n To Reproduce\n Steps to reproduce the behavior:\n \n Go to sliding_window_inference() in monai.inferers\n Go to the line: run\n slices = dense_patch_slices( image_size=(450, 344, 450), roi_size=(96, 96, 1), scan_interval=(72,72,0))\n \n Expected behavior\n You will get len(slices)=30, which should be 30*450 instead.\n \n MONAI latest\n docker monai:latest\n \n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "Can-Zhao", "commentT": "2020-08-18T08:49:13Z", "comment_text": "\n \t\tHi <denchmark-link:https://github.com/Can-Zhao>@Can-Zhao</denchmark-link>\n  ,\n Thanks for your feedback, the root cause is that you used  but the ROI size of dim3 is , so the interval is smaller than even () and MONAI used  to convert to int number.\n I changed it to use  in PR <denchmark-link:https://github.com/Project-MONAI/MONAI/pull/907>#907</denchmark-link>\n  .\n Thanks.\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "Can-Zhao", "commentT": "2020-08-18T15:18:01Z", "comment_text": "\n \t\tThank you!\n \t\t"}}}, "commit": {"commit_id": "9f66bdd4424b902f5df60099b703853e1cec62b6", "commit_author": "Nic Ma", "commitT": "2020-08-18 16:21:25+01:00", "commit_complexity": {"commit_NLOC": "None", "commit_CCN": "None", "commit_Nprams": "None"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "monai\\inferers\\utils.py", "file_new_name": "monai\\inferers\\utils.py", "file_complexity": {"file_NLOC": "141", "file_CCN": "2", "file_NToken": "960"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "167,168,169,170,171,172,173,174,175,176,183,184", "deleted_lines": "167,168,175,176"}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "tests\\test_sliding_window_inference.py", "file_new_name": "tests\\test_sliding_window_inference.py", "file_complexity": {"file_NLOC": "49", "file_CCN": "4", "file_NToken": "568"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "74", "deleted_lines": null, "method_info": {"method_name": "test_sliding_window_default", "method_params": "self,image_shape,roi_shape,sw_batch_size,overlap,mode,device", "method_startline": "63", "method_endline": "74", "method_complexity": {"method_NLOC": "9", "method_CCN": "3", "method_NToken": "125", "method_nesting_level": "1"}}}}}}}}