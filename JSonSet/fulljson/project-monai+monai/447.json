{"BR": {"BR_id": "447", "BR_author": "wyli", "BRopenT": "2020-05-28T17:32:55Z", "BRcloseT": "2020-05-29T10:53:17Z", "BR_text": {"BRsummary": "rand zoom \"keep_size\" should default to True?", "BRdescription": "\n Describe the bug\n a few monai examples use RandZoom and Resize,\n but when RandZoom's keep_size option is False (the current default)\n the preprocessor generates outputs that are almost identical to the inputs.\n To Reproduce\n this script tries to to 2x zoom and resize to 768x1024:\n import matplotlib.pyplot as plt\n import scipy.misc\n \n from monai.transforms import RandZoom, Resize\n \n img = scipy.misc.face(gray=True)[None]\n zoom = RandZoom(prob=1.0, min_zoom=2, max_zoom=2)\n resize = Resize(spatial_size=(768, 1024))\n new_img = resize(zoom(img))\n \n plt.subplots(1, 2)\n plt.subplot(1, 2, 1)\n plt.imshow(img[0], cmap=\"gray\")\n plt.subplot(1, 2, 2)\n plt.imshow(new_img[0], cmap=\"gray\")\n plt.show()\n the output is:\n <denchmark-link:https://user-images.githubusercontent.com/831580/83173251-a780b480-a110-11ea-938e-bce626eb28ce.png></denchmark-link>\n \n \n setting  to True\n ()\n gives the expected output:\n <denchmark-link:https://user-images.githubusercontent.com/831580/83173377-d860e980-a110-11ea-8ada-75d9b9ed3e94.png></denchmark-link>\n \n Environment (please complete the following information):\n \n OS macos\n Python version 3.6\n MONAI version 3181e3e\n \n Additional context\n quit a few places use RandZoom(..., keep_size=False) and Resize together, they are probably wrong\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "wyli", "commentT": "2020-05-28T23:39:32Z", "comment_text": "\n \t\tHi <denchmark-link:https://github.com/wyli>@wyli</denchmark-link>\n  ,\n Yes, this is truly an bug as we discussed before v0.1 release.\n I am trying to fix it in PR: <denchmark-link:https://github.com/Project-MONAI/MONAI/pull/448>#448</denchmark-link>\n \n Will update all examples and notebooks soon.\n Could you please also update the  and  Colab example of MedNIST after v0.2 release?\n Thanks.\n \t\t"}}}, "commit": {"commit_id": "f37a43097ff878cb23fb5c4d21057ca0afb32e66", "commit_author": "Nic Ma", "commitT": "2020-05-29 11:53:16+01:00", "commit_complexity": {"commit_NLOC": "None", "commit_CCN": "None", "commit_Nprams": "None"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "examples\\notebooks\\mednist_tutorial.ipynb", "file_new_name": "examples\\notebooks\\mednist_tutorial.ipynb", "file_complexity": {"file_NLOC": "None", "file_CCN": "None", "file_NToken": "None"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "83,238", "deleted_lines": "83,238,241"}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 4, "file_old_name": "monai\\transforms\\spatial\\array.py", "file_new_name": "monai\\transforms\\spatial\\array.py", "file_complexity": {"file_NLOC": "829", "file_CCN": "149", "file_NToken": "5112"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "347", "deleted_lines": "347", "method_info": {"method_name": "__init__", "method_params": "self,zoom,interp_order,mode,cval,prefilter,use_gpu,keep_size", "method_startline": "339", "method_endline": "347", "method_complexity": {"method_NLOC": "9", "method_CCN": "1", "method_NToken": "32", "method_nesting_level": "1"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "347", "deleted_lines": "347", "method_info": {"method_name": "__init__", "method_params": "self,zoom,interp_order,mode,cval,prefilter,use_gpu,keep_size", "method_startline": "339", "method_endline": "347", "method_complexity": {"method_NLOC": "9", "method_CCN": "1", "method_NToken": "32", "method_nesting_level": "1"}}}, "hunk_2": {"Ismethod": 1, "added_lines": "601", "deleted_lines": "601", "method_info": {"method_name": "__init__", "method_params": "self,prob,min_zoom,max_zoom,interp_order,mode,cval,prefilter,use_gpu,keep_size", "method_startline": "591", "method_endline": "601", "method_complexity": {"method_NLOC": "11", "method_CCN": "1", "method_NToken": "48", "method_nesting_level": "1"}}}, "hunk_3": {"Ismethod": 1, "added_lines": "601", "deleted_lines": "601", "method_info": {"method_name": "__init__", "method_params": "self,prob,min_zoom,max_zoom,interp_order,mode,cval,prefilter,use_gpu,keep_size", "method_startline": "591", "method_endline": "601", "method_complexity": {"method_NLOC": "11", "method_CCN": "1", "method_NToken": "48", "method_nesting_level": "1"}}}}}, "file_2": {"file_change_type": "MODIFY", "file_Nmethod": 4, "file_old_name": "monai\\transforms\\spatial\\dictionary.py", "file_new_name": "monai\\transforms\\spatial\\dictionary.py", "file_complexity": {"file_NLOC": "645", "file_CCN": "61", "file_NToken": "3401"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "729", "deleted_lines": "729", "method_info": {"method_name": "__init__", "method_params": "self,keys,zoom,interp_order,mode,cval,prefilter,use_gpu,keep_size", "method_startline": "720", "method_endline": "729", "method_complexity": {"method_NLOC": "10", "method_CCN": "1", "method_NToken": "34", "method_nesting_level": "1"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "729", "deleted_lines": "729", "method_info": {"method_name": "__init__", "method_params": "self,keys,zoom,interp_order,mode,cval,prefilter,use_gpu,keep_size", "method_startline": "720", "method_endline": "729", "method_complexity": {"method_NLOC": "10", "method_CCN": "1", "method_NToken": "34", "method_nesting_level": "1"}}}, "hunk_2": {"Ismethod": 1, "added_lines": "785", "deleted_lines": "785", "method_info": {"method_name": "__init__", "method_params": "self,keys,prob,min_zoom,max_zoom,interp_order,mode,cval,prefilter,use_gpu,keep_size", "method_startline": "774", "method_endline": "785", "method_complexity": {"method_NLOC": "12", "method_CCN": "1", "method_NToken": "50", "method_nesting_level": "1"}}}, "hunk_3": {"Ismethod": 1, "added_lines": "785", "deleted_lines": "785", "method_info": {"method_name": "__init__", "method_params": "self,keys,prob,min_zoom,max_zoom,interp_order,mode,cval,prefilter,use_gpu,keep_size", "method_startline": "774", "method_endline": "785", "method_complexity": {"method_NLOC": "12", "method_CCN": "1", "method_NToken": "50", "method_nesting_level": "1"}}}}}, "file_3": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "tests\\test_integration_classification_2d.py", "file_new_name": "tests\\test_integration_classification_2d.py", "file_complexity": {"file_NLOC": "188", "file_CCN": "26", "file_NToken": "1727"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "64", "deleted_lines": "65,68", "method_info": {"method_name": "run_training_test", "method_params": "root_dir,train_x,train_y,val_x,val_y,device", "method_startline": "55", "method_endline": "134", "method_complexity": {"method_NLOC": "71", "method_CCN": "6", "method_NToken": "620", "method_nesting_level": "0"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "224,228,237", "deleted_lines": "226,230,239", "method_info": {"method_name": "test_training", "method_params": "self", "method_startline": "212", "method_endline": "240", "method_complexity": {"method_NLOC": "22", "method_CCN": "2", "method_NToken": "253", "method_nesting_level": "1"}}}}}}}}