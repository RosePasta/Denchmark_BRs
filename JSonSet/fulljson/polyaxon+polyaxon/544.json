{"BR": {"BR_id": "544", "BR_author": "lgeiger", "BRopenT": "2019-08-03T14:25:27Z", "BRcloseT": "2019-08-03T15:54:31Z", "BR_text": {"BRsummary": "Resumed experiments don't have correct authentication to access metrics and heartbeat", "BRdescription": "\n <denchmark-h:h3>Describe the bug</denchmark-h>\n \n When resuming an experiment that was stopped or crashed for some reason, the resumed experiment doesn't have access to the metrics and heartbeat API endpoints. When trying to write metrics using the Keras callback, it will keep logging the following errors:\n <denchmark-code>E0802 http_transport.py:248] Request to http://polyaxon-polyaxon-api:80/api/v1/username/project/experiments/0001/metrics/ failed with status code 401.\n Reason: {\"detail\":\"Authentication credentials were not provided.\"}\n E0802 http_transport.py:248] Request to http://polyaxon-polyaxon-api:80/api/v1/username/project/experiments/0001/_heartbeat/ failed with status code 401.\n Reason: {\"detail\":\"Authentication credentials were not provided.\"}\n </denchmark-code>\n \n <denchmark-h:h3>To Reproduce</denchmark-h>\n \n Resume an experiment and try to use the Keras callback to log metrics.\n <denchmark-h:h3>Expected behavior</denchmark-h>\n \n The resumed experiment should have the correct authentication and no error should be logged.\n <denchmark-h:h3>Environment</denchmark-h>\n \n Polyaxon 0.5.4\n GKE\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "lgeiger", "commentT": "2019-08-03T14:56:23Z", "comment_text": "\n \t\tWas this ever working before? I have the impression that auth on resumed xps did not work since v0.4.4?\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "lgeiger", "commentT": "2019-08-03T15:02:00Z", "comment_text": "\n \t\t\n Was this ever working before? I have the impression that auth on resumed xps did not work since v0.4.4?\n \n I think we haven't seen any issues in 0.4.4, but I am not sure since we only recently started interacting with the tracking API.\n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "lgeiger", "commentT": "2019-08-03T15:05:09Z", "comment_text": "\n \t\tI will cherry-pick the commit and add it as a patch to the v0.5.5 release, I think the auth issue here goes back to 0.3.9.\n \t\t"}, "comments_3": {"comment_id": 4, "comment_author": "lgeiger", "commentT": "2019-08-03T16:42:59Z", "comment_text": "\n \t\tThanks for the fast fix\n \t\t"}, "comments_4": {"comment_id": 5, "comment_author": "lgeiger", "commentT": "2019-08-14T15:10:21Z", "comment_text": "\n \t\t\n \n Was this ever working before? I have the impression that auth on resumed xps did not work since v0.4.4?\n \n I think we haven't seen any issues in 0.4.4, but I am not sure since we only recently started interacting with the tracking API.\n \n FYI: we are still experiencing this in v0.4.4 when resuming an experiment that was previously a member of a group. Metrics are therefore no longer printed. We will upgrade to v0.5.5 at the beginning of next week.\n \t\t"}, "comments_5": {"comment_id": 6, "comment_author": "lgeiger", "commentT": "2019-08-14T15:11:40Z", "comment_text": "\n \t\tA regression has been introduced while fixing the issue, see <denchmark-link:https://github.com/polyaxon/polyaxon/issues/553>#553</denchmark-link>\n . It's quite straightforward to fix, and it will be in the v0.5.6 version.\n Good news is that, the spawning part of Polyaxon is going through a lot of optimizations, and will have an extensive amount of testing in the v0.6.\n \t\t"}, "comments_6": {"comment_id": 7, "comment_author": "lgeiger", "commentT": "2019-08-14T15:15:00Z", "comment_text": "\n \t\tI saw <denchmark-link:https://github.com/polyaxon/polyaxon/issues/533>#533</denchmark-link>\n . Glad to hear it. Just wanted to inform all here.\n \t\t"}}}, "commit": {"commit_id": "67ed67a0c63560e3fa5103475509b38499e8b256", "commit_author": "mouradmourafiq", "commitT": "2019-08-03 17:28:43+02:00", "commit_complexity": {"commit_NLOC": "0.0", "commit_CCN": "1.0", "commit_Nprams": "1.0"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "polyaxon\\polypod\\templates\\experiment_jobs\\manager.py", "file_new_name": "polyaxon\\polypod\\templates\\experiment_jobs\\manager.py", "file_complexity": {"file_NLOC": "332", "file_CCN": "31", "file_NToken": "1843"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "214,215,216,217,218,219,220", "deleted_lines": "214,215,216", "method_info": {"method_name": "get_init_container", "method_params": "self,init_command,init_args,env_vars,context_mounts,persistence_outputs,persistence_data", "method_startline": "214", "method_endline": "220", "method_complexity": {"method_NLOC": "7", "method_CCN": "1", "method_NToken": "17", "method_nesting_level": "1"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "187,189,190,191,192,193,194,196,197,198,204,205,206,209,210,211,212", "deleted_lines": "187,188,189,190,191,192,193,194,195,197,198,207,208,209", "method_info": {"method_name": "get_init_path_args", "method_params": "self,persistence_outputs", "method_startline": "187", "method_endline": "212", "method_complexity": {"method_NLOC": "25", "method_CCN": "5", "method_NToken": "151", "method_nesting_level": "1"}}}}}}}}