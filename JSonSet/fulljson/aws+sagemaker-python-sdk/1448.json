{"BR": {"BR_id": "1448", "BR_author": "shunjd", "BRopenT": "2020-05-01T22:21:22Z", "BRcloseT": "2020-05-07T17:32:58Z", "BR_text": {"BRsummary": "training_config does not return MetricDefinitions", "BRdescription": "\n Describe the bug\n sagemaker.workflow.airflow.training_config does not return the MetricDefinitions when it is provided in the estimator. However, tuning_config does have it.\n Related: <denchmark-link:https://github.com/aws/aws-step-functions-data-science-sdk-python/issues/40>aws/aws-step-functions-data-science-sdk-python#40</denchmark-link>\n \n MetricDefinitions in tuning_config\n \n \n \n sagemaker-python-sdk/src/sagemaker/workflow/airflow.py\n \n \n          Line 372\n       in\n       aceb8e0\n \n \n \n \n \n \n  train_config[\"AlgorithmSpecification\"][\"MetricDefinitions\"] = tuner.metric_definitions \n \n \n \n \n \n To reproduce\n <denchmark-code>estimator = sagemaker.estimator.Estimator(\n         PCA_IMAGE,\n         role=EXECUTION_ROLE,\n         train_instance_count=1,\n         train_instance_type='ml.c4.xlarge',\n         output_path=s3_output_location,\n         metric_definitions=[{'Name': 'foo', 'Regex': 'bar=(.*?);'}]\n     )\n \n result = training_config(estimator)\n print(result)\n </denchmark-code>\n \n Expected behavior\n MetricDefinitions should be included in the result.\n Screenshots or logs\n N/A\n System information\n A description of your system. Please provide:\n \n SageMaker Python SDK version: latest\n Framework name (eg. PyTorch) or algorithm (eg. KMeans): Estimator/TensforFlow\n Framework version:\n Python version:\n CPU or GPU:\n Custom Docker image (Y/N): N\n \n Additional context\n N/A\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "shunjd", "commentT": "2020-05-04T19:29:58Z", "comment_text": "\n \t\tHi <denchmark-link:https://github.com/shunjd>@shunjd</denchmark-link>\n , thanks for bringing this to our attention. I've submitted a pull request to address this issue: <denchmark-link:https://github.com/aws/sagemaker-python-sdk/pull/1453>#1453</denchmark-link>\n \n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "shunjd", "commentT": "2020-05-07T17:32:58Z", "comment_text": "\n \t\tlooks like this was released in <denchmark-link:https://github.com/aws/sagemaker-python-sdk/releases/tag/v1.56.2>v1.56.2</denchmark-link>\n \n \t\t"}}}, "commit": {"commit_id": "53fe1dc2025a1ba6e7fe4f16f120dfcc245ed465", "commit_author": "Ajay Karpur", "commitT": "2020-05-04 13:20:06-07:00", "commit_complexity": {"commit_NLOC": "0.5", "commit_CCN": "1.0", "commit_Nprams": "0.5"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "src\\sagemaker\\workflow\\airflow.py", "file_new_name": "src\\sagemaker\\workflow\\airflow.py", "file_complexity": {"file_NLOC": "468", "file_CCN": "78", "file_NToken": "2833"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "239,240,241", "deleted_lines": null, "method_info": {"method_name": "training_config", "method_params": "estimator,inputs,job_name,mini_batch_size", "method_startline": "196", "method_endline": "242", "method_complexity": {"method_NLOC": "8", "method_CCN": "3", "method_NToken": "75", "method_nesting_level": "0"}}}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "tests\\unit\\test_airflow.py", "file_new_name": "tests\\unit\\test_airflow.py", "file_complexity": {"file_NLOC": "1440", "file_CCN": "23", "file_NToken": "5980"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "287,298", "deleted_lines": null, "method_info": {"method_name": "test_framework_training_config_all_args", "method_params": "ecr_prefix,sagemaker_session", "method_startline": "261", "method_endline": "355", "method_complexity": {"method_NLOC": "93", "method_CCN": "1", "method_NToken": "376", "method_nesting_level": "0"}}}}}}}}