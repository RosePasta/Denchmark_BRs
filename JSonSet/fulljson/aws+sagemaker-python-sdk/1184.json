{"BR": {"BR_id": "1184", "BR_author": "matthewfollegot", "BRopenT": "2019-12-18T15:17:18Z", "BRcloseT": "2020-02-14T00:40:40Z", "BR_text": {"BRsummary": "SageMaker Session not created by default upon Model Class Instantiation", "BRdescription": "\n <denchmark-h:h3>System Information</denchmark-h>\n \n \n Framework (e.g. TensorFlow) / Algorithm (e.g. KMeans): Sagemaker / sagemaker.model.Model\n Framework Version: stable\n Python Version: 3.6\n CPU or GPU: CPU\n Python SDK Version:\n Are you using a custom image: Yes\n \n <denchmark-h:h3>Describe the problem</denchmark-h>\n \n When creating a model, , if a sagemaker_session is not specified, an  is raised when invoking one of the model's functions. In the <denchmark-link:https://sagemaker.readthedocs.io/en/stable/model.html#sagemaker.model.Model>docs</denchmark-link>\n , also pasted below, it specifies that if the parameter is not specified, one is created. This did not work and I can confirm because when I passed in a valid , the code worked fine.\n <denchmark-code>sagemaker_session (sagemaker.session.Session) \u2013 A SageMaker Session object, used for SageMaker interactions (default: None). If not specified, one is created using the default AWS configuration chain.\n </denchmark-code>\n \n <denchmark-h:h4>Note: created a PR for this issue here</denchmark-h>\n \n <denchmark-h:h3>Minimal repro / logs</denchmark-h>\n \n <denchmark-code>AttributeError                            Traceback (most recent call last)\n <ipython-input-4-b38a2118e690> in <module>()\n       3     target_data_s3_location='s3://pd-ds-workbench-sagemaker-stg/projects/responder_recommendations/data/output',\n       4     instance_type='ml.m4.xlarge',\n ----> 5     instance_count=1\n       6 )\n ~/SageMaker/ds-python-utils/dsutils/ml/model.py in get_predictions_s3(self, input_data_s3_location, target_data_s3_location, instance_type, instance_count, wait)\n     136             instance_type=instance_type,\n     137             output_path=target_data_s3_location,\n --> 138             tags=self.aws_tags()\n     139         )\n     140 \n ~/anaconda3/envs/python3/lib/python3.6/site-packages/sagemaker/model.py in transformer(self, instance_count, instance_type, strategy, assemble_with, output_path, output_kms_key, accept, env, max_concurrent_transforms, max_payload, tags, volume_kms_key)\n     520                 attached to the ML compute instance (default: None).\n     521         \"\"\"\n --> 522         self._create_sagemaker_model(instance_type, tags=tags)\n     523         if self.enable_network_isolation():\n     524             env = None\n ~/anaconda3/envs/python3/lib/python3.6/site-packages/sagemaker/model.py in _create_sagemaker_model(self, instance_type, accelerator_type, tags)\n     186         self.name = self.name or utils.name_from_image(container_def[\"Image\"])\n     187         enable_network_isolation = self.enable_network_isolation()\n --> 188         self.sagemaker_session.create_model(\n     189             self.name,\n     190             self.role,\n AttributeError: 'NoneType' object has no attribute 'create_model'\n </denchmark-code>\n \n \n Exact command to reproduce: Call one of the sagemaker.model.Model class methods without specifying a sagemaker_session when instantiating the object (I called sagemaker.model.Model.transformer()).\n \n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "matthewfollegot", "commentT": "2019-12-19T19:31:22Z", "comment_text": "\n \t\tThank you for your contribution!\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "matthewfollegot", "commentT": "2020-02-14T00:40:40Z", "comment_text": "\n \t\tfix was released in <denchmark-link:https://github.com/aws/sagemaker-python-sdk/releases/tag/v1.50.11>v1.50.11</denchmark-link>\n \n \t\t"}}}, "commit": {"commit_id": "6dc99826fbb2f8555d57b43982bc96feaf9009bf", "commit_author": "Lauren Yu", "commitT": "2020-02-12 14:57:32-08:00", "commit_complexity": {"commit_NLOC": "1.0", "commit_CCN": "1.0", "commit_Nprams": "0.9655172413793104"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "src\\sagemaker\\model.py", "file_new_name": "src\\sagemaker\\model.py", "file_complexity": {"file_NLOC": "478", "file_CCN": "56", "file_NToken": "2422"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "118,119,120,121,122,123,124,125,126,127,128,129", "deleted_lines": null, "method_info": {"method_name": "_init_sagemaker_session_if_does_not_exist", "method_params": "self,instance_type", "method_startline": "118", "method_endline": "129", "method_complexity": {"method_NLOC": "7", "method_CCN": "3", "method_NToken": "43", "method_nesting_level": "1"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "180,181", "deleted_lines": null, "method_info": {"method_name": "_create_sagemaker_model", "method_params": "self,instance_type,accelerator_type,tags", "method_startline": "160", "method_endline": "189", "method_complexity": {"method_NLOC": "13", "method_CCN": "2", "method_NToken": "89", "method_nesting_level": "1"}}}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "tests\\unit\\test_model.py", "file_new_name": "tests\\unit\\test_model.py", "file_complexity": {"file_NLOC": "833", "file_CCN": "46", "file_NToken": "4438"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "581,582,583,584,585,586,587,588,589,590,591,592,593,594", "deleted_lines": null, "method_info": {"method_name": "test_compile_creates_session", "method_params": "session", "method_startline": "581", "method_endline": "594", "method_complexity": {"method_NLOC": "12", "method_CCN": "1", "method_NToken": "69", "method_nesting_level": "0"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "441,442,443,444,445,446,447,448,449,450", "deleted_lines": null, "method_info": {"method_name": "test_transformer_creates_correct_session", "method_params": "local_session,session", "method_startline": "441", "method_endline": "450", "method_complexity": {"method_NLOC": "9", "method_CCN": "1", "method_NToken": "83", "method_nesting_level": "0"}}}}}}}}