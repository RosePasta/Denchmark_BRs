{"BR": {"BR_id": "755", "BR_author": "eprochasson", "BRopenT": "2019-04-18T01:17:56Z", "BRcloseT": "2019-04-24T21:13:51Z", "BR_text": {"BRsummary": "Importing the sagemaker module change the logging setup", "BRdescription": "\n <denchmark-h:h3>System Information</denchmark-h>\n \n \n Framework (e.g. TensorFlow) / Algorithm (e.g. KMeans): NA\n Framework Version: NA\n Python Version: 3.6.3\n CPU or GPU: NA\n Python SDK Version:  sagemaker-1.18.14.post1 (current version served by pip install sagemaker)\n Are you using a custom image: no\n \n <denchmark-h:h3>Describe the problem</denchmark-h>\n \n Simply importing the sagemaker module alterates the logging module configuration.\n <denchmark-h:h3>Minimal repro / logs</denchmark-h>\n \n Consider the following code:\n import logging\n \n logging.basicConfig(level='DEBUG',\n                     format='%(asctime)s %(name)-12s %(levelname)-8s %(message)s',\n                     datefmt='%m-%d %H:%M')\n \n logging.debug(\"debug\")\n logging.info('info')\n logging.error('error')\n logging.warning(\"WARNING\")\n When ran, will output:\n <denchmark-code>04-18 09:15 root         DEBUG    debug\n 04-18 09:15 root         INFO     info\n 04-18 09:15 root         ERROR    error\n 04-18 09:15 root         WARNING  WARNING\n </denchmark-code>\n \n as expected. Now, the modified code, the only difference being the import of the sagemaker module:\n import logging\n import sagemaker\n \n logging.basicConfig(level='DEBUG',\n                     format='%(asctime)s %(name)-12s %(levelname)-8s %(message)s',\n                     datefmt='%m-%d %H:%M')\n \n logging.debug(\"debug\")\n logging.info('info')\n logging.error('error')\n logging.warning(\"WARNING\")\n will output:\n <denchmark-code>WARNING:root:pandas failed to import. Analytics features will be impaired or broken.\n ERROR:root:error\n WARNING:root:WARNING\n </denchmark-code>\n \n The logging level and formatting has been overwritten (the warning about pandas is not the problem I'm pointing at).\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "eprochasson", "commentT": "2019-04-18T02:23:52Z", "comment_text": "\n \t\tI think the problem arise because:\n \n I import sagemaker before first calling logging.basicConfig\n in multiple places in the sagemaker code, I see:\n \n logging.basicConfig()\n LOGGER = logging.getLogger('sagemaker')\n LOGGER.setLevel(logging.INFO)\n which does call . According to the <denchmark-link:https://docs.python.org/3/library/logging.html>python documentation about logging</denchmark-link>\n :\n \n This function does nothing if the root logger already has handlers configured for it.\n \n I don't think a module should configure any logging parameters (i.e.: only the line LOGGER = logging.getLogger('sagemaker') should remain).\n Workaround: do not import sagemaker before calling logging.basicConfig() at a higher level.\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "eprochasson", "commentT": "2019-04-18T16:26:18Z", "comment_text": "\n \t\thi <denchmark-link:https://github.com/eprochasson>@eprochasson</denchmark-link>\n , thanks for the detailed bug report! I've created a PR to address this bug: <denchmark-link:https://github.com/aws/sagemaker-python-sdk/pull/757>#757</denchmark-link>\n \n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "eprochasson", "commentT": "2019-04-24T21:13:51Z", "comment_text": "\n \t\tthe changes have now been released. closing this issue.\n \t\t"}}}, "commit": {"commit_id": "397fb90eda37daaede5593bbd43453e5893e22ac", "commit_author": "Lauren Yu", "commitT": "2019-04-18 21:07:46-07:00", "commit_complexity": {"commit_NLOC": "None", "commit_CCN": "None", "commit_Nprams": "None"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "src\\sagemaker\\chainer\\estimator.py", "file_new_name": "src\\sagemaker\\chainer\\estimator.py", "file_complexity": {"file_NLOC": "66", "file_CCN": "11", "file_NToken": "549"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "1", "deleted_lines": "1,23"}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "src\\sagemaker\\local\\entities.py", "file_new_name": "src\\sagemaker\\local\\entities.py", "file_complexity": {"file_NLOC": "280", "file_CCN": "62", "file_NToken": "1937"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "1", "deleted_lines": "1,29"}}}, "file_2": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "src\\sagemaker\\local\\image.py", "file_new_name": "src\\sagemaker\\local\\image.py", "file_complexity": {"file_NLOC": "430", "file_CCN": "94", "file_NToken": "3098"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "1", "deleted_lines": "1,52"}}}, "file_3": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "src\\sagemaker\\local\\local_session.py", "file_new_name": "src\\sagemaker\\local\\local_session.py", "file_complexity": {"file_NLOC": "146", "file_CCN": "35", "file_NToken": "1026"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "1", "deleted_lines": "1,29"}}}, "file_4": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "src\\sagemaker\\model.py", "file_new_name": "src\\sagemaker\\model.py", "file_complexity": {"file_NLOC": "278", "file_CCN": "40", "file_NToken": "2006"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "1", "deleted_lines": "1,22,24"}}}, "file_5": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "src\\sagemaker\\mxnet\\estimator.py", "file_new_name": "src\\sagemaker\\mxnet\\estimator.py", "file_complexity": {"file_NLOC": "53", "file_CCN": "11", "file_NToken": "461"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "1", "deleted_lines": "1,23"}}}, "file_6": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "src\\sagemaker\\pytorch\\estimator.py", "file_new_name": "src\\sagemaker\\pytorch\\estimator.py", "file_complexity": {"file_NLOC": "41", "file_CCN": "6", "file_NToken": "365"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "1", "deleted_lines": "1,23"}}}, "file_7": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "src\\sagemaker\\rl\\estimator.py", "file_new_name": "src\\sagemaker\\rl\\estimator.py", "file_complexity": {"file_NLOC": "226", "file_CCN": "39", "file_NToken": "1255"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "1", "deleted_lines": "1,25"}}}, "file_8": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "src\\sagemaker\\session.py", "file_new_name": "src\\sagemaker\\session.py", "file_complexity": {"file_NLOC": "746", "file_CCN": "133", "file_NToken": "5028"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "1", "deleted_lines": "1,34,36,37"}}}, "file_9": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "src\\sagemaker\\sklearn\\estimator.py", "file_new_name": "src\\sagemaker\\sklearn\\estimator.py", "file_complexity": {"file_NLOC": "64", "file_CCN": "8", "file_NToken": "465"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "1", "deleted_lines": "1,24"}}}, "file_10": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "src\\sagemaker\\tensorflow\\estimator.py", "file_new_name": "src\\sagemaker\\tensorflow\\estimator.py", "file_complexity": {"file_NLOC": "265", "file_CCN": "62", "file_NToken": "1882"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "1", "deleted_lines": "1,32"}}}}}}