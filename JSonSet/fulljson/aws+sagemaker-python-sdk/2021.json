{"BR": {"BR_id": "2021", "BR_author": "DyfanJones", "BRopenT": "2020-12-09T16:26:16Z", "BRcloseT": "2020-12-23T19:21:48Z", "BR_text": {"BRsummary": "[bug] incorrect sparkml-serving.json format", "BRdescription": "\n Describe the bug\n When trying to get spark-serving version 2.4,  image_uris.retrieve return the following message:\n <denchmark-code># Defaulting to the only supported framework/algorithm version: 2.2. Ignoring framework/algorithm version: 2.4.\n </denchmark-code>\n \n I believe this is because the json: <denchmark-link:https://github.com/aws/sagemaker-python-sdk/blob/master/src/sagemaker/image_uri_config/sparkml-serving.json>https://github.com/aws/sagemaker-python-sdk/blob/master/src/sagemaker/image_uri_config/sparkml-serving.json</denchmark-link>\n  is formatted incorrectly.  I believe this give the following json levels.\n Json levels:\n \n scope\n versions:\n \n 2.2\n \n \n 2.4\n \n To reproduce\n <denchmark-code>import sagemaker\n sagemaker.__version__\n #  '2.4.1'\n \n from sagemaker import image_uris\n image_uris.retrieve(\"sparkml-serving\", \"eu-west-1\", version=\"2.4\")\n \n # Defaulting to the only supported framework/algorithm version: 2.2. Ignoring framework/algorithm version: 2.4.\n # '141502667606.dkr.ecr.eu-west-1.amazonaws.com/sagemaker-sparkml-serving:2.2'\n </denchmark-code>\n \n The correct json format should be as follows:\n <denchmark-code>{\n     \"scope\": [\"inference\"],\n     \"versions\": {\n         \"2.2\": {\n             \"registries\": {\n                 \"af-south-1\": \"510948584623\",\n                 \"ap-east-1\": \"651117190479\",\n                 \"ap-northeast-1\": \"354813040037\",\n                 \"ap-northeast-2\": \"366743142698\",\n                 \"ap-south-1\": \"720646828776\",\n                 \"ap-southeast-1\": \"121021644041\",\n                 \"ap-southeast-2\": \"783357654285\",\n                 \"ca-central-1\": \"341280168497\",\n                 \"cn-north-1\": \"450853457545\",\n                 \"cn-northwest-1\": \"451049120500\",\n                 \"eu-central-1\": \"492215442770\",\n                 \"eu-north-1\": \"662702820516\",\n                 \"eu-west-1\": \"141502667606\",\n                 \"eu-west-2\": \"764974769150\",\n                 \"eu-west-3\": \"659782779980\",\n                 \"eu-south-1\": \"978288397137\",\n                 \"me-south-1\": \"801668240914\",\n                 \"sa-east-1\": \"737474898029\",\n                 \"us-east-1\": \"683313688378\",\n                 \"us-east-2\": \"257758044811\",\n                 \"us-gov-west-1\": \"414596584902\",\n                 \"us-iso-east-1\": \"833128469047\",\n                 \"us-west-1\": \"746614075791\",\n                 \"us-west-2\": \"246618743249\"\n             },\n             \"repository\": \"sagemaker-sparkml-serving\"\n         },\n         \"2.4\": {\n             \"registries\": {\n                 \"af-south-1\": \"510948584623\",\n                 \"ap-east-1\": \"651117190479\",\n                 \"ap-northeast-1\": \"354813040037\",\n                 \"ap-northeast-2\": \"366743142698\",\n                 \"ap-south-1\": \"720646828776\",\n                 \"ap-southeast-1\": \"121021644041\",\n                 \"ap-southeast-2\": \"783357654285\",\n                 \"ca-central-1\": \"341280168497\",\n                 \"cn-north-1\": \"450853457545\",\n                 \"cn-northwest-1\": \"451049120500\",\n                 \"eu-central-1\": \"492215442770\",\n                 \"eu-north-1\": \"662702820516\",\n                 \"eu-west-1\": \"141502667606\",\n                 \"eu-west-2\": \"764974769150\",\n                 \"eu-west-3\": \"659782779980\",\n                 \"eu-south-1\": \"978288397137\",\n                 \"me-south-1\": \"801668240914\",\n                 \"sa-east-1\": \"737474898029\",\n                 \"us-east-1\": \"683313688378\",\n                 \"us-east-2\": \"257758044811\",\n                 \"us-gov-west-1\": \"414596584902\",\n                 \"us-iso-east-1\": \"833128469047\",\n                 \"us-west-1\": \"746614075791\",\n                 \"us-west-2\": \"246618743249\"\n             },\n             \"repository\": \"sagemaker-sparkml-serving\"\n         }\n     }\n }\n </denchmark-code>\n \n This should return json levels:\n \n scope\n versions:\n \n 2.2\n 2.4\n \n \n \n \t"}, "comments": {}}, "commit": {"commit_id": "06c033f6d2c440e1329c1d44ec539d4904a3d4df", "commit_author": "Eric Johnson", "commitT": "2020-12-23 11:21:47-08:00", "commit_complexity": {"commit_NLOC": "0.0", "commit_CCN": "0.0", "commit_Nprams": "1.0"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "src\\sagemaker\\image_uri_config\\sparkml-serving.json", "file_new_name": "src\\sagemaker\\image_uri_config\\sparkml-serving.json", "file_complexity": {"file_NLOC": "None", "file_CCN": "None", "file_NToken": "None"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "32,62", "deleted_lines": "32,33"}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "src\\sagemaker\\sparkml\\model.py", "file_new_name": "src\\sagemaker\\sparkml\\model.py", "file_complexity": {"file_NLOC": "65", "file_CCN": "2", "file_NToken": "169"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "73,74", "deleted_lines": "73", "method_info": {"method_name": "__init__", "method_params": "self,model_data,role,spark_version,sagemaker_session,kwargs", "method_startline": "73", "method_endline": "74", "method_complexity": {"method_NLOC": "2", "method_CCN": "1", "method_NToken": "20", "method_nesting_level": "1"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "73,74,75", "deleted_lines": "73", "method_info": {"method_name": "__init__", "method_params": "self,model_data,role,spark_version,sagemaker_session,kwargs", "method_startline": "73", "method_endline": "112", "method_complexity": {"method_NLOC": "11", "method_CCN": "2", "method_NToken": "77", "method_nesting_level": "1"}}}}}, "file_2": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "tests\\unit\\sagemaker\\image_uris\\test_sparkml.py", "file_new_name": "tests\\unit\\sagemaker\\image_uris\\test_sparkml.py", "file_complexity": {"file_NLOC": "39", "file_CCN": "2", "file_NToken": "194"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "50,52,55", "deleted_lines": "52", "method_info": {"method_name": "test_sparkml", "method_params": "version", "method_startline": "50", "method_endline": "57", "method_complexity": {"method_NLOC": "7", "method_CCN": "2", "method_NToken": "53", "method_nesting_level": "0"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "49,50,52", "deleted_lines": "47,49,52", "method_info": {"method_name": "test_sparkml", "method_params": "", "method_startline": "47", "method_endline": "54", "method_complexity": {"method_NLOC": "7", "method_CCN": "2", "method_NToken": "52", "method_nesting_level": "0"}}}}}, "file_3": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "tests\\unit\\test_pipeline_model.py", "file_new_name": "tests\\unit\\test_pipeline_model.py", "file_complexity": {"file_NLOC": "300", "file_CCN": "12", "file_NToken": "1469"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "100", "deleted_lines": "100", "method_info": {"method_name": "test_prepare_container_def", "method_params": "tfo,time,sagemaker_session", "method_startline": "75", "method_endline": "103", "method_complexity": {"method_NLOC": "29", "method_CCN": "1", "method_NToken": "123", "method_nesting_level": "0"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "338", "deleted_lines": "338", "method_info": {"method_name": "test_network_isolation", "method_params": "tfo,time,sagemaker_session", "method_startline": "310", "method_endline": "345", "method_complexity": {"method_NLOC": "35", "method_CCN": "1", "method_NToken": "140", "method_nesting_level": "0"}}}}}}}}