{"BR": {"BR_id": "5074", "BR_author": "opencv-pushbot", "BRopenT": "2015-07-27T11:43:05Z", "BRcloseT": "2015-09-25T11:01:20Z", "BR_text": {"BRsummary": "CommandLineParser confused by strings containing equal signs", "BRdescription": "\n Transferred from <denchmark-link:http://code.opencv.org/issues/4487>http://code.opencv.org/issues/4487</denchmark-link>\n \n <denchmark-code>|| Alexander Nitsch on 2015-07-14 20:07\n || Priority: Normal\n || Affected: branch 'master' (3.0-dev)\n || Category: core\n || Tracker: Bug\n || Difficulty: \n || PR: \n || Platform: Any / Any\n </denchmark-code>\n \n <denchmark-h:h2>CommandLineParser confused by strings containing equal signs</denchmark-h>\n \n <denchmark-code>File paths (or other strings) that are passed as command line parameters are not handled properly if they contain an equal sign. The command line parser seems to treat them as name-value pairs even if they are surrounded by \"\". The resulting string is just empty.\n \n Here is a minimal working example demonstrating the issue, comparing against direct @argv@ access:\n \n <pre>\n #include <opencv2/core.hpp>\n #include <iostream>\n \n int main( int argc, char** argv )\n {\n     cv::String keys = { \"{ @filename | | Some filename }\" };\n     cv::CommandLineParser cmd( argc, argv, keys );\n \n     if( argc < 2 )\n     {\n         cmd.printMessage();\n         return 0;\n     }\n \n     std::cout << \"argv[ 1 ]:    \" << argv[ 1 ] << std::endl;\n     std::cout << \"cmd.get( 0 ): \" << cmd.get< cv::String >( 0 ) << std::endl;\n \n     return 0;\n }\n </pre>\n \n It generates the following output:\n <pre>\n $ ./test-parser some/path/to/a/file.png\n argv[ 1 ]:    some/path/to/a/file.png\n cmd.get( 0 ): some/path/to/a/file.png\n \n $ ./test-parser some/path/to/a/file_a=1.png\n argv[ 1 ]:    some/path/to/a/file_a=1.png\n cmd.get( 0 ): \n \n $ ./test-parser \"some/path/to/a/file_a=1.png\"\n argv[ 1 ]:    some/path/to/a/file_a=1.png\n cmd.get( 0 ): \n </pre>\n </denchmark-code>\n \n <denchmark-h:h2>History</denchmark-h>\n \n \t"}, "comments": {}}, "commit": {"commit_id": "46ada3886fa490e279274182aa8f5fc65740fc21", "commit_author": "Pavel Rojtberg", "commitT": "2015-09-24 17:27:07+02:00", "commit_complexity": {"commit_NLOC": "1.0", "commit_CCN": "1.0", "commit_Nprams": "1.0"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "modules\\core\\src\\command_line_parser.cpp", "file_new_name": "modules\\core\\src\\command_line_parser.cpp", "file_complexity": {"file_NLOC": "466", "file_CCN": "107", "file_NToken": "3008"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "237,238,240,242,243,244,245,246,247,248,249,251", "deleted_lines": "237,239,241,242,243,244,245,247,248,249,250,251,252,253,254,255", "method_info": {"method_name": "cv::CommandLineParser::CommandLineParser", "method_params": "argc,keys", "method_startline": "183", "method_endline": "261", "method_complexity": {"method_NLOC": "67", "method_CCN": "11", "method_NToken": "480", "method_nesting_level": "1"}}}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "modules\\core\\test\\test_utils.cpp", "file_new_name": "modules\\core\\test\\test_utils.cpp", "file_complexity": {"file_NLOC": "192", "file_CCN": "15", "file_NToken": "1614"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "206,207,208,209,210,211,212,213,214,215,216,217,218,219", "deleted_lines": null, "method_info": {"method_name": "TEST", "method_params": "CommandLineParser,positional_regression_5074_equal_sign", "method_startline": "206", "method_endline": "219", "method_complexity": {"method_NLOC": "13", "method_CCN": "1", "method_NToken": "105", "method_nesting_level": "1"}}}}}}}}