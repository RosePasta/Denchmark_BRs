{"BR": {"BR_id": "6450", "BR_author": "benjamincarp", "BRopenT": "2016-04-22T01:07:41Z", "BRcloseT": "2020-02-04T20:12:23Z", "BR_text": {"BRsummary": "videoCapture in iOS returns 1 for all properties", "BRdescription": "\n \n OpenCV version: 3.1\n Host OS: Mac OS X 10.11.4\n iOS\n In which part of the OpenCV library you got the issue?\n opening a file with videoCapture\n \n <denchmark-h:h3>Expected behaviour</denchmark-h>\n \n it would open the video, give me access to the video's properties and frames\n <denchmark-h:h3>Actual behaviour</denchmark-h>\n \n it claims to open the file but all properties return 1 and trying to get frames fails\n I found this stack overflow post from 2 years ago that describes the same problem <denchmark-link:http://stackoverflow.com/questions/22006052/opencv-on-ios-videocapture-properties-always-return-1>http://stackoverflow.com/questions/22006052/opencv-on-ios-videocapture-properties-always-return-1</denchmark-link>\n \n <denchmark-h:h3>Code example to reproduce the issue / Steps to reproduce the issue</denchmark-h>\n \n Please try to give a full example which will compile as is.\n <denchmark-code>#import <opencv2/opencv.hpp>\n \n using namespace cv;\n using namespace std;\n \n int Tracking::processFile(string fileIn)\n {  \n   VideoCapture cap(fileIn); // open the video file for reading\n \n   if ( !cap.isOpened() )  // if not success, exit program\n   {\n     cout << \"Cannot open the video file: \" << fileIn << endl;\n     return -1;\n   }\n   else{\n     cout << \"File Open \" << fileIn << endl;\n   }\n \n   double dFps = cap.get(CAP_PROP_FPS); //get the frames per seconds of the video\n   cout << \"Frames per second = \" << dFps << endl;\n \n   double dWidth = cap.get(CAP_PROP_FRAME_WIDTH); //get the width of frames of the video\n   double dHeight = cap.get(CAP_PROP_FRAME_HEIGHT); //get the height of frames of the video\n   cout << \"Frame Size = \" << dWidth << \"x\" << dHeight << endl;\n \n   Size frameSize(static_cast<int>(dWidth), static_cast<int>(dHeight));\n \n   double dFrameCount = cap.get(CAP_PROP_FRAME_COUNT);\n   cout << \"Frame count = \" << dFrameCount << endl;\n \n   return 0;\n }\n </denchmark-code>\n \n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "benjamincarp", "commentT": "2016-09-23T07:38:09Z", "comment_text": "\n \t\tI got the same problem in iOS, anybody had the easy way to solve it?\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "benjamincarp", "commentT": "2017-01-18T11:40:59Z", "comment_text": "\n \t\tThis problem is still unfixed\n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "benjamincarp", "commentT": "2017-06-30T09:22:00Z", "comment_text": "\n \t\tHi,\n I'm currently experiencing the same problem trying to do video stabilization.\n Is there any update regarding this bug?\n \t\t"}, "comments_3": {"comment_id": 4, "comment_author": "benjamincarp", "commentT": "2018-07-20T13:37:02Z", "comment_text": "\n \t\tHas anyone figured this out?\n \t\t"}, "comments_4": {"comment_id": 5, "comment_author": "benjamincarp", "commentT": "2018-07-30T22:05:20Z", "comment_text": "\n \t\tI am getting same issue. Anyone figured this out ?\n \t\t"}, "comments_5": {"comment_id": 6, "comment_author": "benjamincarp", "commentT": "2018-08-06T14:47:33Z", "comment_text": "\n \t\tThe same problem. Any plans to fix it?\n \t\t"}, "comments_6": {"comment_id": 7, "comment_author": "benjamincarp", "commentT": "2019-01-29T00:03:43Z", "comment_text": "\n \t\tIt returns 1 for this property CAP_PROP_FRAME_COUNT\n Please fix\n \t\t"}, "comments_7": {"comment_id": 8, "comment_author": "benjamincarp", "commentT": "2019-08-09T23:12:52Z", "comment_text": "\n \t\ti am getting the same issue\n \t\t"}, "comments_8": {"comment_id": 9, "comment_author": "benjamincarp", "commentT": "2019-09-25T14:36:43Z", "comment_text": "\n \t\tPlease check the fix from PR <denchmark-link:https://github.com/opencv/opencv/pull/15464>#15464</denchmark-link>\n \n \t\t"}}}, "commit": {"commit_id": "a13862e9246765fb5ce5062cceeae05b46bb6002", "commit_author": "Yuhel Tanaka", "commitT": "2019-09-06 11:56:04+09:00", "commit_complexity": {"commit_NLOC": "0.0182648401826484", "commit_CCN": "0.0091324200913242", "commit_Nprams": "1.0"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 11, "file_old_name": "modules\\videoio\\src\\cap_avfoundation.mm", "file_new_name": "modules\\videoio\\src\\cap_avfoundation.mm", "file_complexity": {"file_NLOC": "923", "file_CCN": "172", "file_NToken": "5553"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "1091,1092,1094,1096,1097,1098,1099,1100,1101,1102,1103,1104,1105,1106,1107,1108,1109,1110,1111,1112,1113,1114,1115,1116,1117,1118,1119,1120,1121", "deleted_lines": "1091,1092,1093,1094,1095,1099,1101,1102", "method_info": {"method_name": "CvCaptureFile::getProperty", "method_params": "property_id", "method_startline": "1091", "method_endline": "1122", "method_complexity": {"method_NLOC": "29", "method_CCN": "12", "method_NToken": "168", "method_nesting_level": "0"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "1015,1016,1018,1019,1020,1021,1022,1023,1024,1025,1026,1027,1028,1029,1030,1031,1032,1033,1034,1036,1037,1038,1039,1040,1041,1042,1043,1044,1045,1046,1047,1048,1049,1050,1051,1052,1053,1054", "deleted_lines": "1015,1017,1018,1019,1020,1021,1022,1023,1024,1025,1026,1027,1028,1029,1030,1031,1032,1033,1034,1035,1036,1037,1038,1039,1040,1041,1042,1043,1044,1045,1046,1047,1048,1049,1050,1051,1052,1053,1054", "method_info": {"method_name": "CvCaptureFile::getProperty", "method_params": "int", "method_startline": "1015", "method_endline": "1054", "method_complexity": {"method_NLOC": "3", "method_CCN": "1", "method_NToken": "14", "method_nesting_level": "0"}}}, "hunk_2": {"Ismethod": 1, "added_lines": "772,773,774,775,776,777,778,779,780,782,783,784,785,786,787,791,793,794,795,796,797,798,800,801,802,803,804,805,806,808,810,811,812,813,814,818,819", "deleted_lines": "771,772,773,774,775,776,778,779,780,781,782,783,784,788,789,790,792,793,794,795,796,797,798,799,800,802,803,805,806,808,809,810,811,812,813,814,815,816,817,818,819", "method_info": {"method_name": "CvCaptureFile::CvCaptureFile", "method_params": "filename", "method_startline": "771", "method_endline": "819", "method_complexity": {"method_NLOC": "41", "method_CCN": "4", "method_NToken": "222", "method_nesting_level": "0"}}}, "hunk_3": {"Ismethod": 1, "added_lines": "1056,1057,1058,1059,1060,1062,1063,1064,1065,1066,1067,1068,1069,1070,1071,1072,1073,1074,1075,1076,1079,1082,1083,1091,1092,1094,1096,1097,1098,1099,1100,1101,1102,1103", "deleted_lines": "1056,1058,1059,1060,1061,1062,1063,1064,1065,1066,1067,1068,1069,1070,1071,1072,1073,1074,1075,1076,1077,1078,1079,1080,1081,1082,1083,1084,1085,1086,1087,1088,1089,1090,1091,1092,1093,1094,1095,1099,1101,1102", "method_info": {"method_name": "CvCaptureFile::setProperty", "method_params": "int,double", "method_startline": "1056", "method_endline": "1103", "method_complexity": {"method_NLOC": "3", "method_CCN": "1", "method_NToken": "13", "method_nesting_level": "0"}}}, "hunk_4": {"Ismethod": 1, "added_lines": "919,920,921,923,925,926,927,929,931,932,933,934,935,936,937,938,939,940,943,944,945,946,947,948,949,951,952,953,954,955,956,957,958,959,960,961,962,963,964,966,967,968,969,970,972,973,974,975,976,977,978,979,980,981,982,983,984,985,986,987,988,989,990,991,992,993,994,995,996,997,998,999,1000,1002,1003,1004,1005,1006,1007,1008,1009,1010,1011,1012,1013,1014,1015,1016,1018,1019,1020,1021,1022,1023,1024,1025,1026,1027,1028,1029,1030,1031,1032,1033,1034,1036,1037,1038,1039,1040,1041,1042,1043,1044,1045,1046,1047,1048,1049,1050,1051,1052,1053,1054,1055,1056,1057,1058,1059,1060,1062,1063,1064,1065,1066,1067,1068,1069,1070,1071,1072,1073,1074,1075,1076,1079,1082,1083", "deleted_lines": "918,919,921,922,924,926,927,928,929,931,933,934,935,936,937,938,940,941,942,943,944,946,947,948,949,950,951,952,953,954,955,956,957,960,961,962,963,964,965,966,967,968,969,972,973,974,975,978,986,987,988,989,991,993,994,995,996,997,998,999,1000,1001,1002,1003,1004,1005,1006,1007,1008,1009,1010,1011,1012,1015,1017,1018,1019,1020,1021,1022,1023,1024,1025,1026,1027,1028,1029,1030,1031,1032,1033,1034,1035,1036,1037,1038,1039,1040,1041,1042,1043,1044,1045,1046,1047,1048,1049,1050,1051,1052,1053,1054,1056,1058,1059,1060,1061,1062,1063,1064,1065,1066,1067,1068,1069,1070,1071,1072,1073,1074,1075,1076,1077,1078,1079,1080,1081,1082,1083,1084", "method_info": {"method_name": "CvCaptureFile::retrieveFramePixelBuffer", "method_params": "", "method_startline": "918", "method_endline": "1084", "method_complexity": {"method_NLOC": "148", "method_CCN": "30", "method_NToken": "901", "method_nesting_level": "0"}}}, "hunk_5": {"Ismethod": 1, "added_lines": "1124,1125,1127,1129,1130,1132,1133,1134,1135,1136,1137,1138,1139,1140,1141,1142,1143,1144,1145,1146,1147,1148,1149,1150,1151,1152,1153,1154,1155,1156,1157,1158,1159,1160,1161,1162,1163,1164,1165,1166,1167,1168", "deleted_lines": null, "method_info": {"method_name": "CvCaptureFile::setProperty", "method_params": "property_id,value", "method_startline": "1124", "method_endline": "1173", "method_complexity": {"method_NLOC": "46", "method_CCN": "12", "method_NToken": "225", "method_nesting_level": "0"}}}, "hunk_6": {"Ismethod": 1, "added_lines": "986,987,988,989", "deleted_lines": "986,987,988,989", "method_info": {"method_name": "CvCaptureFile::queryFrame", "method_params": "", "method_startline": "986", "method_endline": "989", "method_complexity": {"method_NLOC": "4", "method_CCN": "1", "method_NToken": "17", "method_nesting_level": "0"}}}, "hunk_7": {"Ismethod": 1, "added_lines": "821,822,823,824,825,826,827,828,829,830,831,832,833,834,836", "deleted_lines": "821,824,825,826,827,828,829,830,831,832,833,834,835,836,837", "method_info": {"method_name": "CvCaptureFile::~CvCaptureFile", "method_params": "", "method_startline": "821", "method_endline": "837", "method_complexity": {"method_NLOC": "15", "method_CCN": "2", "method_NToken": "77", "method_nesting_level": "0"}}}, "hunk_8": {"Ismethod": 1, "added_lines": "901,903,904,905,906,907,908,909,910,911,913,914,915", "deleted_lines": "900,901,905,907,909,911,912,915,916", "method_info": {"method_name": "CvCaptureFile::grabFrame", "method_params": "", "method_startline": "900", "method_endline": "916", "method_complexity": {"method_NLOC": "15", "method_CCN": "2", "method_NToken": "83", "method_nesting_level": "0"}}}, "hunk_9": {"Ismethod": 1, "added_lines": "839,840,841,842,843,844,845,846,847,848,849,850,852,853,854,855,856,857,858,859,860,861,862,863,864,865,866,868,869,870,871,872,873,875,876,877,878,879,880,881,882,883,884,885,886,887,888,889,890,891,892,893", "deleted_lines": "839,840,841,842,845,846,847,848,849,850,851,852,853,855,856,857,858,860,862,863,865,866,868,870,871,872,873,874,875,876,885,886,887,888,889,890,891,892,893,894", "method_info": {"method_name": "CvCaptureFile::setupReadingAt", "method_params": "position", "method_startline": "839", "method_endline": "894", "method_complexity": {"method_NLOC": "50", "method_CCN": "10", "method_NToken": "273", "method_nesting_level": "0"}}}, "hunk_10": {"Ismethod": 1, "added_lines": "991,992,993,994,995,996,997,998,999,1000,1002,1003,1004,1005,1006,1007,1008,1009,1010,1011,1012,1013", "deleted_lines": "991,993,994,995,996,997,998,999,1000,1001,1002,1003,1004,1005,1006,1007,1008,1009,1010,1011,1012", "method_info": {"method_name": "CvCaptureFile::getFPS", "method_params": "", "method_startline": "991", "method_endline": "1013", "method_complexity": {"method_NLOC": "3", "method_CCN": "1", "method_NToken": "12", "method_nesting_level": "0"}}}}}}}}