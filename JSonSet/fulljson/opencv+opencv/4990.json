{"BR": {"BR_id": "4990", "BR_author": "opencv-pushbot", "BRopenT": "2015-07-27T11:23:27Z", "BRcloseT": "2018-12-28T10:48:35Z", "BR_text": {"BRsummary": "Mouse call back always give 0for x and y coordinates in Opengl window", "BRdescription": "\n Transferred from <denchmark-link:http://code.opencv.org/issues/4338>http://code.opencv.org/issues/4338</denchmark-link>\n \n <denchmark-code>|| Laurent Berger on 2015-05-14 14:58\n || Priority: Normal\n || Affected: branch 'master' (3.0-dev)\n || Category: highgui-gui\n || Tracker: Bug\n || Difficulty: Medium\n || PR: \n || Platform: x64 / Windows\n </denchmark-code>\n \n <denchmark-h:h2>Mouse call back always give 0for x and y coordinates in Opengl window</denchmark-h>\n \n <denchmark-code>in file window_w32.cpp at line 1617 \n window->on_mouse( event, pt.x*size.cx/MAX(rect.right - rect.left,1),\n                                  pt.y*size.cy/MAX(rect.bottom - rect.top,1), flags,\n                                  window->on_mouse_param );\n \n size seems always (0,0) in a window when window->flags &cv::WINDOW_OPENGL is not zero\n </denchmark-code>\n \n <denchmark-h:h2>History</denchmark-h>\n \n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "opencv-pushbot", "commentT": "2015-08-21T01:52:56Z", "comment_text": "\n \t\tnamedWindow(window_name, WINDOW_AUTOSIZE || WINDOW_OPENGL ); works without problem.\n namedWindow(window_name, WINDOW_OPENGL ); Mouse call back gives x and y coordinates wrong if window resized\n FYI <denchmark-link:https://github.com/LaurentBerger>@LaurentBerger</denchmark-link>\n .\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "opencv-pushbot", "commentT": "2015-08-21T06:25:57Z", "comment_text": "\n \t\tyes something has changed may be this commit solve this problem <denchmark-link:https://github.com/opencv/opencv/commit/7cd198623ee03b318b0b5a7e5e0b2c7550305a84>7cd1986</denchmark-link>\n  (9 may).\n May be this bug is closed now\n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "opencv-pushbot", "commentT": "2017-07-28T17:10:04Z", "comment_text": "\n \t\tIt isn't. Even almost two years later namedWindow(window_name, WINDOW_OPENGL ); gives wrong coordinates. It returns non-scaled coordinates, so mouse position is going to be wrong.\n \t\t"}, "comments_3": {"comment_id": 4, "comment_author": "opencv-pushbot", "commentT": "2018-04-25T07:17:48Z", "comment_text": "\n \t\tthis behavior is still current (3.4.1).\n highgui/src/window_w32.cpp, any call to window->on_mouse has to compute mouse coordinates, and that involves a call to icvGetBitmapData and GetClientRect.\n \t\t"}}}, "commit": {"commit_id": "deb8ba223752d7b4a9aa85c4c8e608d01b792455", "commit_author": "Christoph Rackwitz", "commitT": "2018-12-26 15:00:39+03:00", "commit_complexity": {"commit_NLOC": "0.0", "commit_CCN": "0.0", "commit_Nprams": "0.0"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "modules\\highgui\\src\\window_w32.cpp", "file_new_name": "modules\\highgui\\src\\window_w32.cpp", "file_complexity": {"file_NLOC": "1745", "file_CCN": "406", "file_NToken": "11659"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "1700,1701,1702,1703,1704,1705,1706,1707,1708,1709,1710,1711,1712,1714", "deleted_lines": null, "method_info": {"method_name": "HighGUIProc", "method_params": "hwnd,uMsg,wParam,lParam", "method_startline": "1554", "method_endline": "1808", "method_complexity": {"method_NLOC": "190", "method_CCN": "70", "method_NToken": "1261", "method_nesting_level": "0"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "1493,1494,1495,1496,1497,1498,1499,1500,1501,1502,1503,1504,1505,1506", "deleted_lines": "1492", "method_info": {"method_name": "MainWindowProc", "method_params": "hwnd,uMsg,wParam,lParam", "method_startline": "1376", "method_endline": "1551", "method_complexity": {"method_NLOC": "137", "method_CCN": "34", "method_NToken": "1079", "method_nesting_level": "0"}}}}}}}}