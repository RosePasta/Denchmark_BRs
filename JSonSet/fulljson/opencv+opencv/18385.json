{"BR": {"BR_id": "18385", "BR_author": "JulienMaille", "BRopenT": "2020-09-22T12:57:46Z", "BRcloseT": "2020-09-23T09:15:03Z", "BR_text": {"BRsummary": "Exception related to cuda when enumerating openvino compatible backends", "BRdescription": "\n Starting with commit <denchmark-link:https://github.com/opencv/opencv/commit/194905642384ade117591237ca2c497419550390>1949056</denchmark-link>\n \n i've been getting the following exception when calling \n \n exception: OpenCV(4.5.0-pre) D:\\Dev\\opencv\\modules\\dnn\\src\\cuda4dnn/init.hpp:54: error: (-217:Gpu API call) CUDA driver version is insufficient for CUDA runtime version in function 'cv::dnn::cuda4dnn::getDevice'\n \n I reverted the aforementioned commit and it works again\n This happens with OpenCV built with cudnn support but run on a computer without Nvidia graphic card.\n The reason why we enter int cv::dnn::cuda4dnn::getDevice() when enumerating targets for a non-cuda backend is because of isDeviceCompatible call here:\n \n \n \n opencv/modules/dnn/src/dnn.cpp\n \n \n          Line 232\n       in\n       45ee8e2\n \n \n \n \n \n \n  if (haveCUDA() && cuda4dnn::isDeviceCompatible()) \n \n \n \n \n \n \t"}, "comments": {}}, "commit": {"commit_id": "48ddb5333208231f932710766ebd10175656acda", "commit_author": "Julien", "commitT": "2020-09-23 09:15:02+00:00", "commit_complexity": {"commit_NLOC": "0.0", "commit_CCN": "0.0", "commit_Nprams": "1.0"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "modules\\dnn\\src\\cuda4dnn\\init.hpp", "file_new_name": "modules\\dnn\\src\\cuda4dnn\\init.hpp", "file_complexity": {"file_NLOC": "74", "file_CCN": "16", "file_NToken": "441"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "60,61,62", "deleted_lines": null, "method_info": {"method_name": "cv::dnn::cuda4dnn::isDeviceCompatible", "method_params": "", "method_startline": "58", "method_endline": "79", "method_complexity": {"method_NLOC": "17", "method_CCN": "6", "method_NToken": "120", "method_nesting_level": "3"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "83,84,85", "deleted_lines": null, "method_info": {"method_name": "cv::dnn::cuda4dnn::doesDeviceSupportFP16", "method_params": "", "method_startline": "81", "method_endline": "98", "method_complexity": {"method_NLOC": "15", "method_CCN": "4", "method_NToken": "88", "method_nesting_level": "3"}}}}}}}}