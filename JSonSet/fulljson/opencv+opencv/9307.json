{"BR": {"BR_id": "9307", "BR_author": "gadcam", "BRopenT": "2017-08-03T15:48:47Z", "BRcloseT": "2017-09-17T12:57:41Z", "BR_text": {"BRsummary": "Buggy winSigma check in HOGDescriptor", "BRdescription": "\n \n OpenCV => 3.2 & master\n \n If you try to create a HOGDescriptor with winSigma = 0 the current code will let you do and then it will provide features that will be constant for all dimensions.\n double HOGDescriptor::getWinSigma() const\n {\n     return winSigma >= 0 ? winSigma : (blockSize.width + blockSize.height)/8.;\n }\n If I am right <denchmark-link:https://github.com/opencv/opencv/blob/master/modules/objdetect/src/hog.cpp#L103>this check</denchmark-link>\n   should be changed from  to .\n The explanation is that it will make scale infite <denchmark-link:https://github.com/opencv/opencv/blob/master/modules/objdetect/src/hog.cpp#L659>in this code</denchmark-link>\n \n float scale = 1.f / (2.f * sigma * sigma);\n and as a consequence <denchmark-link:https://github.com/opencv/opencv/blob/master/modules/objdetect/src/hog.cpp#L728>this code</denchmark-link>\n \n weights(i,j) = std::exp(-(_di[i] + _dj[j])*scale);\n will misbehave.\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "gadcam", "commentT": "2017-08-08T13:00:02Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/gadcam>@gadcam</denchmark-link>\n  could you please make a PR with the proposed fix?\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "gadcam", "commentT": "2017-09-17T12:55:00Z", "comment_text": "\n \t\tfix is merged\n \t\t"}}}, "commit": {"commit_id": "d5e64f4eb2bf2ad40d55a8a7e658acd138c2a140", "commit_author": "Camille Barneaud", "commitT": "2017-08-19 15:03:16+02:00", "commit_complexity": {"commit_NLOC": "None", "commit_CCN": "None", "commit_Nprams": "None"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "modules\\objdetect\\src\\hog.cpp", "file_new_name": "modules\\objdetect\\src\\hog.cpp", "file_complexity": {"file_NLOC": "3328", "file_CCN": "335", "file_NToken": "47113"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "103", "deleted_lines": "103", "method_info": {"method_name": "cv::HOGDescriptor::getWinSigma", "method_params": "", "method_startline": "101", "method_endline": "104", "method_complexity": {"method_NLOC": "4", "method_CCN": "2", "method_NToken": "28", "method_nesting_level": "1"}}}}}}}}