{"BR": {"BR_id": "6125", "BR_author": "irinagit", "BRopenT": "2016-02-16T17:11:59Z", "BRcloseT": "2018-04-28T11:19:21Z", "BR_text": {"BRsummary": "Negative values in normalize", "BRdescription": "\n I'm using Ubuntu 13.10 64 Bit, OpenCV master branch.\n I get negative values in normalize() function for this example:\n     cv::Mat m = (cv::Mat_<float>(20,1)<<\n      1888,\n      1692,\n      369,\n      263,\n      199,\n      280,\n      326,\n      129,\n      143,\n      126,\n      233,\n      221,\n      130,\n      126,\n      150,\n      249,\n      575,\n      574,\n      63,\n      12);\n \n     cv::normalize(m, m, 0, 400, cv::NORM_MINMAX, CV_32F );\n     std::cout << m <<std::endl;\n The output is:\n [400;\n 358.20895;\n 76.119408;\n 53.518124;\n 39.872066;\n 57.142857;\n 66.950958;\n 24.946693;\n 27.931768;\n 24.307035;\n 47.121532;\n 44.562901;\n 25.159914;\n 24.307035;\n 29.424307;\n 50.533047;\n 120.04265;\n 119.82943;\n 10.8742;\n -2.3841858e-07]\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "irinagit", "commentT": "2016-02-17T14:22:39Z", "comment_text": "\n \t\tPossibly rounding problem, try to use double.\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "irinagit", "commentT": "2016-02-17T15:22:40Z", "comment_text": "\n \t\tUsing output format CV_64F also gives the correct/expected output.\n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "irinagit", "commentT": "2016-02-18T06:37:51Z", "comment_text": "\n \t\tI would like to work on this bug. please help me get started as this is my 1st bug!\n \t\t"}, "comments_3": {"comment_id": 4, "comment_author": "irinagit", "commentT": "2016-02-29T19:55:59Z", "comment_text": "\n \t\tI tried working on this bug. Let me know if it is correct.\n \t\t"}, "comments_4": {"comment_id": 5, "comment_author": "irinagit", "commentT": "2017-05-29T18:23:33Z", "comment_text": "\n \t\tit is still broken\n <denchmark-code>res.create(res_rows, res_cols, CV_64FC1);\n \n cv::matchTemplate(src, tmplResized, res, cfg_.matchingMethod);\n cv::normalize(res, res, 0, 1, cv::NORM_MINMAX, -1, cv::Mat());\n </denchmark-code>\n \n res contains negative values like -1.19209e-07\n \t\t"}}}, "commit": {"commit_id": "4934f7c5a409553d24074d5b05a91d1e3c635fd5", "commit_author": "yuki takehara", "commitT": "2018-04-28 14:14:10+03:00", "commit_complexity": {"commit_NLOC": "0.0", "commit_CCN": "0.7391304347826086", "commit_Nprams": "0.7391304347826086"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "modules\\core\\src\\convert_scale.cpp", "file_new_name": "modules\\core\\src\\convert_scale.cpp", "file_complexity": {"file_NLOC": "1659", "file_CCN": "249", "file_NToken": "12708"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "1888,1889,1890,1891,1892,1899,1900,1901,1902,1903,1904,1905", "deleted_lines": "1894,1905,1906,1907,1908", "method_info": {"method_name": "cv::normalize", "method_params": "_src,_dst,a,b,norm_type,rtype,_mask", "method_startline": "1882", "method_endline": "1928", "method_complexity": {"method_NLOC": "42", "method_CCN": "11", "method_NToken": "331", "method_nesting_level": "0"}}}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "modules\\core\\test\\test_arithm.cpp", "file_new_name": "modules\\core\\test\\test_arithm.cpp", "file_complexity": {"file_NLOC": "1874", "file_CCN": "406", "file_NToken": "17936"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "1921,1922,1923,1924,1925,1926,1927,1928,1929,1930,1931,1932,1933,1934,1935,1936,1937,1938", "deleted_lines": null, "method_info": {"method_name": "opencv_test::TEST", "method_params": "Normalize,regression_6125", "method_startline": "1921", "method_endline": "1938", "method_complexity": {"method_NLOC": "17", "method_CCN": "2", "method_NToken": "148", "method_nesting_level": "2"}}}}}}}}