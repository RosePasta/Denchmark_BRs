{"BR": {"BR_id": "11998", "BR_author": "dbyoung720", "BRopenT": "2018-07-18T05:18:38Z", "BRcloseT": "2018-09-08T20:20:30Z", "BR_text": {"BRsummary": "compile  modules\\core\\src\\parallel.cpp error", "BRdescription": "\n <denchmark-h:h5>System information (version)</denchmark-h>\n \n \n OpenCV => New\n Operating System / Platform => WIN7X64\n Compiler => VS2015 X64\n \n <denchmark-h:h5>Detailed description</denchmark-h>\n \n modules\\core\\src\\parallel.cpp, compile error.\n 515:\n pbody(Range(i, i + 1));\n Error Tip:\n parallel.cpp(515): error C2664: \u201cvoid `anonymous-namespace'::ProxyLoopBody::operator ()(int)\n const\u201d: can not param 1 from \u201ccv::Range\u201d to \u201cint\u201d\n <denchmark-h:h5>Steps to reproduce</denchmark-h>\n \n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "dbyoung720", "commentT": "2018-07-18T10:51:44Z", "comment_text": "\n \t\tCan't reproduce on Linux / Windows with enabled OpenMP.\n Code looks good too. Mentioned line calls <denchmark-link:https://github.com/opencv/opencv/blame/4560909a5e5cb284cdfd5619cdf4cf3622410388/modules/core/src/parallel.cpp#L293>this operator</denchmark-link>\n  on both systems:\n <denchmark-code>void operator()(const cv::Range& sr) const CV_OVERRIDE\n </denchmark-code>\n \n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "dbyoung720", "commentT": "2018-09-06T15:32:10Z", "comment_text": "\n \t\tProblem pbody class is <denchmark-link:https://github.com/opencv/opencv/blob/3.4.3/modules/core/src/parallel.cpp#L395-L407>defined</denchmark-link>\n  under \"defined WINRT || defined HAVE_CONCURRENCY\" condition.\n OpenMP definitely should not use that code.\n Need to add OpenMP code block before that with:\n <denchmark-code>elif defined HAVE_OPENMP\n typedef ParallelLoopBodyWrapper ProxyLoopBody;\n </denchmark-code>\n \n (like \"else\" contents)\n Keep conditions order consistent with <denchmark-link:https://github.com/opencv/opencv/blob/3.4.3/modules/core/src/parallel.cpp#L114-L128>this code</denchmark-link>\n .\n \n \t\t"}}}, "commit": {"commit_id": "80610ca054a78634a4f57e73741af21a116b8b82", "commit_author": "Sergey Nuzhny", "commitT": "2018-09-08 23:20:14+03:00", "commit_complexity": {"commit_NLOC": "None", "commit_CCN": "None", "commit_Nprams": "None"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "modules\\core\\src\\parallel.cpp", "file_new_name": "modules\\core\\src\\parallel.cpp", "file_complexity": {"file_NLOC": "471", "file_CCN": "149", "file_NToken": "2808"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "413,414", "deleted_lines": null}}}}}}