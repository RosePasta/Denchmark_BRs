{"BR": {"BR_id": "934", "BR_author": "seanpmorgan", "BRopenT": "2020-01-26T00:07:00Z", "BRcloseT": "2020-01-27T23:44:55Z", "BR_text": {"BRsummary": "TQDM tutorial fails", "BRdescription": "\n Per the email from TF-Docs team:\n <denchmark-link:https://groups.google.com/a/tensorflow.org/forum/#!topic/addons/F6MrrMfVVBA>https://groups.google.com/a/tensorflow.org/forum/#!topic/addons/F6MrrMfVVBA</denchmark-link>\n \n Our TQDM notebook is failing for:\n <denchmark-code>nbconvert.preprocessors.execute.CellExecutionError: An error occurred while executing the following cell:\n ------------------\n import tensorflow_addons as tfa\n \n import tensorflow.keras as keras\n from tensorflow.keras.datasets import mnist\n from tensorflow.keras.models import Sequential\n from tensorflow.keras.layers import Dense, Dropout, Flatten\n ------------------\n \n ---------------------------------------------------------------------------\n TypeError                                 Traceback (most recent call last)\n  in \n \n /tmpfs/src/tf_docs_env/lib/python3.6/site-packages/tensorflow_addons/__init__.py in \n      25 from tensorflow_addons import losses\n      26 from tensorflow_addons import metrics\n ---> 27 from tensorflow_addons import optimizers\n      28 from tensorflow_addons import rnn\n      29 from tensorflow_addons import seq2seq\n \n /tmpfs/src/tf_docs_env/lib/python3.6/site-packages/tensorflow_addons/optimizers/__init__.py in \n      19 from __future__ import print_function\n      20 \n ---> 21 from tensorflow_addons.optimizers.average_wrapper import AveragedOptimizerWrapper\n      22 from tensorflow_addons.optimizers.conditional_gradient import ConditionalGradient\n      23 from tensorflow_addons.optimizers.cyclical_learning_rate import (\n \n /tmpfs/src/tf_docs_env/lib/python3.6/site-packages/tensorflow_addons/optimizers/average_wrapper.py in \n      25 \n      26 @six.add_metaclass(abc.ABCMeta)\n ---> 27 class AveragedOptimizerWrapper(tf.keras.optimizers.Optimizer):\n      28     def __init__(self,\n      29                  optimizer,\n \n ~/.local/lib/python3.6/site-packages/six.py in wrapper(cls)\n     858         if hasattr(cls, '__qualname__'):\n     859             orig_vars['__qualname__'] = cls.__qualname__\n --> 860         return metaclass(cls.__name__, cls.__bases__, orig_vars)\n     861     return wrapper\n     862 \n \n /tmpfs/src/tf_docs_env/lib/python3.6/abc.py in __new__(mcls, name, bases, namespace, **kwargs)\n     131 \n     132     def __new__(mcls, name, bases, namespace, **kwargs):\n --> 133         cls = super().__new__(mcls, name, bases, namespace, **kwargs)\n     134         # Compute set of abstract method names\n     135         abstracts = {name\n \n TypeError: metaclass conflict: the metaclass of a derived class must be a (non-strict) subclass of the metaclasses of all its bases\n \n </denchmark-code>\n \n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "seanpmorgan", "commentT": "2020-01-26T00:07:06Z", "comment_text": "\n \t\tcc <denchmark-link:https://github.com/shun-lin>@shun-lin</denchmark-link>\n \n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "seanpmorgan", "commentT": "2020-01-26T06:35:55Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/seanpmorgan>@seanpmorgan</denchmark-link>\n  it looks like tqdm_progress_bar notebook failure occurs at importing tf_addons, somehow if we just move importing tf_addons before pip updating and deepreload  the error would not show up anymore and everything runs as intended. I will submit a quick PR for the fix, thanks!\n Fix (will made a PR to reflect the change):\n <denchmark-link:https://colab.research.google.com/drive/1ok0hSIhSLGf4MtGmgNtF_LnSXeSQor2O>https://colab.research.google.com/drive/1ok0hSIhSLGf4MtGmgNtF_LnSXeSQor2O</denchmark-link>\n \n \t\t"}}}, "commit": {"commit_id": "58fd6136f0744e11a23343f8c0bf08c7bd1412e0", "commit_author": "Shun Lin", "commitT": "2020-01-27 18:44:24-05:00", "commit_complexity": {"commit_NLOC": "None", "commit_CCN": "None", "commit_Nprams": "None"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "docs\\tutorials\\tqdm_progress_bar.ipynb", "file_new_name": "docs\\tutorials\\tqdm_progress_bar.ipynb", "file_complexity": {"file_NLOC": "None", "file_CCN": "None", "file_NToken": "None"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "33,34,42,44,46,48,61,66,67,76,77,99,100,110,111,119,121,123,125,132,136,138,140,142,144,145,146,147,148,149,150,151,152,153,157,159,161,163,177,182,183,191,193,195,197,203,208,209,217,219,221,223,235,240,241,249,251,253,254,256,270,275,276,284", "deleted_lines": "33,34,43,45,59,60,61,66,67,76,77,99,100,110,111,120,122,130,131,132,137,139,142,143,144,145,150,152,155,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,206,207,216,218,225,226,227,232,233,242,244,257,258,259,264,265,274,275,277,292,293,294,299,300,308"}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "tensorflow_addons\\callbacks\\tqdm_progress_bar.py", "file_new_name": "tensorflow_addons\\callbacks\\tqdm_progress_bar.py", "file_complexity": {"file_NLOC": "151", "file_CCN": "21", "file_NToken": "808"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "28,29,30,31,34,37,40,42,43,44,45", "deleted_lines": "28,29,30,31,34,37,40,42,43,44,45"}}}}}}