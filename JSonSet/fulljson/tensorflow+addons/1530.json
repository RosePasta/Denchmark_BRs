{"BR": {"BR_id": "1530", "BR_author": "jarednielsen", "BRopenT": "2020-04-01T21:39:36Z", "BRcloseT": "2020-04-03T16:05:39Z", "BR_text": {"BRsummary": "LAMB optimizer parses regex patterns improperly", "BRdescription": "\n The <denchmark-link:https://github.com/tensorflow/addons/blob/r0.8/tensorflow_addons/optimizers/lamb.py#L45>LAMB optimizer</denchmark-link>\n  declares that its  argument should take in a comma-separated string of regex patterns. However, <denchmark-link:https://github.com/tensorflow/addons/blob/r0.8/tensorflow_addons/optimizers/lamb.py#L234>the code expects a list of regex patterns</denchmark-link>\n  and instead iterates through each character in the string. Thus nearly every call to  returns False.\n I attempted to pass in a list to circumvent this bug, but this leads to a typeguard error. So there's no easy way around this in the meantime. A similar bug exists for exclude_from_layer_adaption.\n Two proposed fixes, and I'm happy to contribute either:\n \n Change the desired datatype from Optional[str] to List[str]. This would be preferred, and match the style of other implementations in the TensorFlow repo. See here for a list of examples. My PR is open at #1532.\n Add .split(',') to exclude_from_weight_decay and exclude_from_layer_adaption in the constructor.\n \n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "jarednielsen", "commentT": "2020-04-03T16:05:39Z", "comment_text": "\n \t\tThis has been fixed and ported to the 0.8.x branch.\n \t\t"}}}, "commit": {"commit_id": "ce16e6292ea25ad92e72ef54098f43a2c454fdb0", "commit_author": "Jared T Nielsen", "commitT": "2020-04-03 11:44:31+02:00", "commit_complexity": {"commit_NLOC": "1.0", "commit_CCN": "1.0", "commit_Nprams": "1.0"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "tensorflow_addons\\optimizers\\lamb.py", "file_new_name": "tensorflow_addons\\optimizers\\lamb.py", "file_complexity": {"file_NLOC": "165", "file_CCN": "26", "file_NToken": "1308"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "45,46", "deleted_lines": "45,46", "method_info": {"method_name": "__init__", "method_params": "self,FloatTensorLike,001,FloatTensorLike,FloatTensorLike,FloatTensorLike,FloatTensorLike,None,None,str,kwargs", "method_startline": "38", "method_endline": "48", "method_complexity": {"method_NLOC": "11", "method_CCN": "1", "method_NToken": "81", "method_nesting_level": "1"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "45,46", "deleted_lines": "45,46", "method_info": {"method_name": "__init__", "method_params": "self,FloatTensorLike,001,FloatTensorLike,FloatTensorLike,FloatTensorLike,FloatTensorLike,None,None,str,kwargs", "method_startline": "38", "method_endline": "48", "method_complexity": {"method_NLOC": "11", "method_CCN": "1", "method_NToken": "75", "method_nesting_level": "1"}}}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "tensorflow_addons\\optimizers\\lamb_test.py", "file_new_name": "tensorflow_addons\\optimizers\\lamb_test.py", "file_complexity": {"file_NLOC": "305", "file_CCN": "47", "file_NToken": "3369"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "405,406,407,408,409,410,411", "deleted_lines": null, "method_info": {"method_name": "test_exclude_weight_decay", "method_params": "self", "method_startline": "405", "method_endline": "411", "method_complexity": {"method_NLOC": "7", "method_CCN": "1", "method_NToken": "50", "method_nesting_level": "1"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "413,414,415,416,417", "deleted_lines": null, "method_info": {"method_name": "test_exclude_layer_adaptation", "method_params": "self", "method_startline": "413", "method_endline": "417", "method_complexity": {"method_NLOC": "5", "method_CCN": "1", "method_NToken": "44", "method_nesting_level": "1"}}}}}}}}