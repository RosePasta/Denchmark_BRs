{"BR": {"BR_id": "177", "BR_author": "seanpmorgan", "BRopenT": "2019-04-16T00:58:38Z", "BRcloseT": "2019-04-19T12:37:21Z", "BR_text": {"BRsummary": "Euclidean distance op doesn't compile on Mac OS X", "BRdescription": "\n It appears that the Euclidian distance op fails to compile on OSX using clang. Throwing this error:\n <denchmark-code>euclidean_distance_transform_op.cc:22:\n ./tensorflow_addons/custom_ops/image/cc/kernels/euclidean_distance_transform_op.h:55:11: error: no viable conversion from 'Eigen::half' to 'float'\n     float minDistance = std::numeric_limits<T>::max();\n </denchmark-code>\n \n The possible types are:\n <denchmark-code>struct std::numeric_limits<_Tp>\n struct std::numeric_limits<Eigen::half>\n struct std::numeric_limits<const Eigen::half>\n struct std::numeric_limits<volatile Eigen::half>\n struct std::numeric_limits<const volatile Eigen::half>\n class std::numeric_limits<tensorflow::qint8>\n class std::numeric_limits<tensorflow::quint8>\n class std::numeric_limits<tensorflow::qint16>\n class std::numeric_limits<tensorflow::quint16>\n class std::numeric_limits<tensorflow::qint32>\n class std::numeric_limits<absl::uint128>\n </denchmark-code>\n \n My hunch is that clang wants some explicit conversion, while gcc was okay to just ignore. This would have been caught by our CI, but we do not have it setup to run on OSX.\n <denchmark-link:https://github.com/Squadrick>@Squadrick</denchmark-link>\n  do you mind taking a look? I have a <denchmark-link:https://github.com/seanpmorgan/addons/commits/build-macos>branch setup</denchmark-link>\n  for debugging if it helps.\n \t"}, "comments": {}}, "commit": {"commit_id": "b1afc9205a3e210071ca37dcfb690551d222c9eb", "commit_author": "Sean Morgan", "commitT": "2019-04-19 08:37:20-04:00", "commit_complexity": {"commit_NLOC": "None", "commit_CCN": "None", "commit_Nprams": "None"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "tensorflow_addons\\custom_ops\\image\\cc\\kernels\\euclidean_distance_transform_op.h", "file_new_name": "tensorflow_addons\\custom_ops\\image\\cc\\kernels\\euclidean_distance_transform_op.h", "file_complexity": {"file_NLOC": "54", "file_CCN": "8", "file_NToken": "384"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "55", "deleted_lines": "55", "method_info": {"method_name": "tensorflow::generator::EuclideanDistanceTransformGenerator::operator ( )", "method_params": "coords", "method_startline": "49", "method_endline": "66", "method_complexity": {"method_NLOC": "15", "method_CCN": "5", "method_NToken": "182", "method_nesting_level": "3"}}}}}}}}