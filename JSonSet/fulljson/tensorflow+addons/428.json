{"BR": {"BR_id": "428", "BR_author": "seanpmorgan", "BRopenT": "2019-08-19T16:15:39Z", "BRcloseT": "2019-08-28T22:47:54Z", "BR_text": {"BRsummary": "WeightNormalization data init fails with Keras experimental_run_tf_function", "BRdescription": "\n Recent Keras change has made it so the data dependent initialization fails:\n <denchmark-code>_SymbolicException: Inputs to eager execution function cannot be Keras symbolic tensors, but found [<tf.Tensor 'sequential_1/weight_normalization/mul:0'\n </denchmark-code>\n \n I'm submitting a hotfix which flags the model compile with . Another issue I'm tracking is <denchmark-link:https://github.com/tensorflow/probability/issues/519>tensorflow/probability#519</denchmark-link>\n  to see how TFP resolves their issue.\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "seanpmorgan", "commentT": "2019-08-22T08:12:38Z", "comment_text": "\n \t\tThis is related to <denchmark-link:https://github.com/tensorflow/addons/pull/219>#219</denchmark-link>\n . If switching back to , then it works. However, it won't converge.\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "seanpmorgan", "commentT": "2019-08-27T03:24:16Z", "comment_text": "\n \t\tHi, is it still a problem? I think I have some time to look into it.\n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "seanpmorgan", "commentT": "2019-08-27T03:57:44Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/facaiy>@facaiy</denchmark-link>\n  Hi, it's still a problem. It would be great that you could take over it!\n \t\t"}, "comments_3": {"comment_id": 4, "comment_author": "seanpmorgan", "commentT": "2019-08-27T09:05:42Z", "comment_text": "\n \t\tOK, Tzu-Wei, I'll take a try\n \t\t"}}}, "commit": {"commit_id": "cc89403ae1de9438dd7ac2dd3205b1512a1a2660", "commit_author": "Yan Facai (\u989c\u53d1\u624d)", "commitT": "2019-08-28 18:47:53-04:00", "commit_complexity": {"commit_NLOC": "0.23076923076923078", "commit_CCN": "1.0", "commit_Nprams": "1.0"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 10, "file_old_name": "tensorflow_addons\\layers\\wrappers.py", "file_new_name": "tensorflow_addons\\layers\\wrappers.py", "file_complexity": {"file_NLOC": "117", "file_CCN": "15", "file_NToken": "728"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": null, "deleted_lines": "61", "method_info": {"method_name": "__init__", "method_params": "self,layer,data_init,kwargs", "method_startline": "58", "method_endline": "62", "method_complexity": {"method_NLOC": "5", "method_CCN": "1", "method_NToken": "48", "method_nesting_level": "1"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "106,107", "deleted_lines": "107", "method_info": {"method_name": "call._do_nothing", "method_params": "", "method_startline": "106", "method_endline": "107", "method_complexity": {"method_NLOC": "2", "method_CCN": "1", "method_NToken": "6", "method_nesting_level": "2"}}}, "hunk_2": {"Ismethod": 1, "added_lines": "71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,94,95,96,97,98,99,101", "deleted_lines": "72,73,74,76,77,78,79,80,81,82,83,84,85,86,87,89,93,94,96,97,98,100,101", "method_info": {"method_name": "build", "method_params": "self,input_shape", "method_startline": "63", "method_endline": "101", "method_complexity": {"method_NLOC": "30", "method_CCN": "4", "method_NToken": "252", "method_nesting_level": "1"}}}, "hunk_3": {"Ismethod": 1, "added_lines": "106,107,109,110,111,113,116,120", "deleted_lines": "104,105,107,108,109,120", "method_info": {"method_name": "call", "method_params": "self,inputs", "method_startline": "103", "method_endline": "120", "method_complexity": {"method_NLOC": "8", "method_CCN": "1", "method_NToken": "67", "method_nesting_level": "1"}}}, "hunk_4": {"Ismethod": 1, "added_lines": "109,110,111", "deleted_lines": "109", "method_info": {"method_name": "call._update_weights", "method_params": "", "method_startline": "109", "method_endline": "111", "method_complexity": {"method_NLOC": "3", "method_CCN": "1", "method_NToken": "12", "method_nesting_level": "2"}}}, "hunk_5": {"Ismethod": 1, "added_lines": "155,160,161,162,163", "deleted_lines": null, "method_info": {"method_name": "_data_dep_init", "method_params": "self,inputs", "method_startline": "151", "method_endline": "163", "method_complexity": {"method_NLOC": "9", "method_CCN": "2", "method_NToken": "105", "method_nesting_level": "1"}}}, "hunk_6": {"Ismethod": 1, "added_lines": "132,133,134,135,136,137,138,139,140,141,142", "deleted_lines": "129,130,131,133,136,139,140,141", "method_info": {"method_name": "_initialize_weights", "method_params": "self,inputs", "method_startline": "126", "method_endline": "142", "method_complexity": {"method_NLOC": "12", "method_CCN": "2", "method_NToken": "59", "method_nesting_level": "1"}}}, "hunk_7": {"Ismethod": 1, "added_lines": "147,148,149", "deleted_lines": "146,147,148,149", "method_info": {"method_name": "_init_norm", "method_params": "self", "method_startline": "144", "method_endline": "149", "method_complexity": {"method_NLOC": "5", "method_CCN": "1", "method_NToken": "67", "method_nesting_level": "1"}}}, "hunk_8": {"Ismethod": 1, "added_lines": "122,123,124", "deleted_lines": "122,123,124", "method_info": {"method_name": "compute_output_shape", "method_params": "self,input_shape", "method_startline": "122", "method_endline": "124", "method_complexity": {"method_NLOC": "3", "method_CCN": "1", "method_NToken": "25", "method_nesting_level": "1"}}}, "hunk_9": {"Ismethod": 1, "added_lines": "106,107,109,110,111", "deleted_lines": "104,105,107,108,109", "method_info": {"method_name": "_compute_weights", "method_params": "self", "method_startline": "104", "method_endline": "112", "method_complexity": {"method_NLOC": "4", "method_CCN": "1", "method_NToken": "40", "method_nesting_level": "1"}}}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 3, "file_old_name": "tensorflow_addons\\layers\\wrappers_test.py", "file_new_name": "tensorflow_addons\\layers\\wrappers_test.py", "file_complexity": {"file_NLOC": "78", "file_CCN": "7", "file_NToken": "693"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "36", "deleted_lines": "29,37,38", "method_info": {"method_name": "test_weightnorm_dense_train", "method_params": "self", "method_startline": "29", "method_endline": "42", "method_complexity": {"method_NLOC": "14", "method_CCN": "1", "method_NToken": "127", "method_nesting_level": "1"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "104", "deleted_lines": null, "method_info": {"method_name": "test_weightnorm_keras", "method_params": "self", "method_startline": "96", "method_endline": "104", "method_complexity": {"method_NLOC": "9", "method_CCN": "1", "method_NToken": "65", "method_nesting_level": "1"}}}, "hunk_2": {"Ismethod": 1, "added_lines": "70", "deleted_lines": "63,73,74", "method_info": {"method_name": "test_weightnorm_conv2d", "method_params": "self", "method_startline": "60", "method_endline": "77", "method_complexity": {"method_NLOC": "16", "method_CCN": "1", "method_NToken": "158", "method_nesting_level": "1"}}}}}}}}