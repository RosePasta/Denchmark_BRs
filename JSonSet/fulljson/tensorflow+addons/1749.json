{"BR": {"BR_id": "1749", "BR_author": "foxik", "BRopenT": "2020-04-27T23:01:30Z", "BRcloseT": "2020-05-05T18:48:58Z", "BR_text": {"BRsummary": "Incorrect type of maximum_iterations argument in tfa.seq2seq.decoder causes runtime error.", "BRdescription": "\n System information\n \n OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux Debian Stable\n TensorFlow version and how it was installed (source or binary): 2.1 binary\n TensorFlow-Addons version and how it was installed (source or binary): 0.8.1 binary\n Python version: 3.7\n Is GPU used? (yes/no): no\n \n Describe the bug\n Calling tfa.seq2seq.decoder.BaseDecoder with a tf.Tensor for maximum_iterations, which worked before, now results in\n <denchmark-code>TypeError: type of argument \"maximum_iterations\" must be one of (float, int, float16, float32, int8, int16, int32, int64, uint8, uint16, uint32, uint64, NoneType); got tensorflow.python.framework.ops.Tensor instead\n </denchmark-code>\n \n Other info / logs\n The problem is caused by a faulty type annotation\n   maximum_iterations: Optional[Number] = None,\n Note that this annotation is also used in tfa.seq2seq.decoder.dynamic_decode.\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "foxik", "commentT": "2020-04-27T23:14:15Z", "comment_text": "\n \t\tNote that while tfa.seq2seq.decoder.BaseDecoder.__init__ is marked with @typechecked, tfa.seq2seq.decoder.dynamic_decode is not.\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "foxik", "commentT": "2020-04-28T10:00:27Z", "comment_text": "\n \t\tThanks for reporting! The PR above should fix this one.\n \t\t"}}}, "commit": {"commit_id": "80830804ce63f078eca0dbcb7974fad7d1cafa10", "commit_author": "Guillaume Klein", "commitT": "2020-05-05 11:48:57-07:00", "commit_complexity": {"commit_NLOC": "None", "commit_CCN": "None", "commit_Nprams": "None"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 4, "file_old_name": "tensorflow_addons\\seq2seq\\decoder.py", "file_new_name": "tensorflow_addons\\seq2seq\\decoder.py", "file_complexity": {"file_NLOC": "325", "file_CCN": "40", "file_NToken": "1568"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "259,264", "deleted_lines": "263", "method_info": {"method_name": "dynamic_decode", "method_params": "Decoder,bool,bool,None,int,bool,None,None,kwargs", "method_startline": "259", "method_endline": "268", "method_complexity": {"method_NLOC": "10", "method_CCN": "1", "method_NToken": "64", "method_nesting_level": "0"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "264", "deleted_lines": "263", "method_info": {"method_name": "dynamic_decode", "method_params": "Decoder,bool,bool,None,int,bool,None,None,kwargs", "method_startline": "260", "method_endline": "269", "method_complexity": {"method_NLOC": "10", "method_CCN": "1", "method_NToken": "64", "method_nesting_level": "0"}}}, "hunk_2": {"Ismethod": 1, "added_lines": "147", "deleted_lines": "147", "method_info": {"method_name": "__init__", "method_params": "self,bool,bool,None,int,bool,kwargs", "method_startline": "143", "method_endline": "150", "method_complexity": {"method_NLOC": "8", "method_CCN": "1", "method_NToken": "39", "method_nesting_level": "1"}}}, "hunk_3": {"Ismethod": 1, "added_lines": "147", "deleted_lines": "147", "method_info": {"method_name": "__init__", "method_params": "self,bool,bool,None,int,bool,kwargs", "method_startline": "143", "method_endline": "150", "method_complexity": {"method_NLOC": "8", "method_CCN": "1", "method_NToken": "39", "method_nesting_level": "1"}}}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "tensorflow_addons\\seq2seq\\tests\\decoder_test.py", "file_new_name": "tensorflow_addons\\seq2seq\\tests\\decoder_test.py", "file_complexity": {"file_NLOC": "97", "file_CCN": "8", "file_NToken": "697"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "26,27,28", "deleted_lines": "26"}}}}}}