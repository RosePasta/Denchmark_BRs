{"BR": {"BR_id": "120", "BR_author": "LiweiPeng", "BRopenT": "2020-03-06T21:14:33Z", "BRcloseT": "2020-05-06T17:09:20Z", "BR_text": {"BRsummary": "deepspeed_light.py bug: 'global_step' should be 'global_steps' in _load_checkpoint()", "BRdescription": "\n In the following line, it seems to me that 'global_step' should be 'global_steps'. If so, can you fix it?\n <denchmark-link:https://github.com/microsoft/DeepSpeed/blob/master/deepspeed/pt/deepspeed_light.py#L983>https://github.com/microsoft/DeepSpeed/blob/master/deepspeed/pt/deepspeed_light.py#L983</denchmark-link>\n \n deepspeed_states = [\n 'module',\n 'optimizer',\n 'csr_tensor_module_names',\n 'skipped_steps',\n 'global_step'\n ]\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "LiweiPeng", "commentT": "2020-03-15T14:45:13Z", "comment_text": "\n \t\tThanks for the bug report! I just submitted a PR.\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "LiweiPeng", "commentT": "2020-04-13T18:48:24Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/ShadenSmith>@ShadenSmith</denchmark-link>\n  can we close this issue?\n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "LiweiPeng", "commentT": "2020-04-13T19:46:49Z", "comment_text": "\n \t\tAh sorry, not yet. There's a working PR that's missing unit tests. I'll get back to it ASAP.\n \t\t"}}}, "commit": {"commit_id": "b2c87edfb6b56e68e022cfb607c1073895d34318", "commit_author": "Shaden Smith", "commitT": "2020-05-06 10:09:19-07:00", "commit_complexity": {"commit_NLOC": "0.15384615384615385", "commit_CCN": "0.9743589743589743", "commit_Nprams": "0.8974358974358975"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "README.md", "file_new_name": "README.md", "file_complexity": {"file_NLOC": "None", "file_CCN": "None", "file_NToken": "None"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "11", "deleted_lines": "11"}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "deepspeed\\pt\\deepspeed_light.py", "file_new_name": "deepspeed\\pt\\deepspeed_light.py", "file_complexity": {"file_NLOC": "883", "file_CCN": "220", "file_NToken": "5913"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "1024", "deleted_lines": "1024", "method_info": {"method_name": "_load_checkpoint", "method_params": "self,load_dir,tag,load_optimizer_states", "method_startline": "995", "method_endline": "1032", "method_complexity": {"method_NLOC": "31", "method_CCN": "6", "method_NToken": "191", "method_nesting_level": "1"}}}}}, "file_2": {"file_change_type": "MODIFY", "file_Nmethod": 11, "file_old_name": "tests\\unit\\test_checkpointing.py", "file_new_name": "tests\\unit\\test_checkpointing.py", "file_complexity": {"file_NLOC": "209", "file_CCN": "26", "file_NToken": "1232"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "66,67", "deleted_lines": "68", "method_info": {"method_name": "compare_optimizer_states", "method_params": "saved_model,loaded_model,hidden_dim", "method_startline": "63", "method_endline": "74", "method_complexity": {"method_NLOC": "10", "method_CCN": "5", "method_NToken": "108", "method_nesting_level": "0"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "243,244", "deleted_lines": null, "method_info": {"method_name": "test_checkpoint_zero_optimizer._test_checkpoint_zero_optimizer", "method_params": "args,model,hidden_dim,load_optimizer_states", "method_startline": "242", "method_endline": "247", "method_complexity": {"method_NLOC": "6", "method_CCN": "1", "method_NToken": "25", "method_nesting_level": "1"}}}, "hunk_2": {"Ismethod": 1, "added_lines": "77,78", "deleted_lines": null, "method_info": {"method_name": "checkpoint_correctness_verification", "method_params": "save_folder,args,model,hidden_dim,load_optimizer_states", "method_startline": "77", "method_endline": "81", "method_complexity": {"method_NLOC": "5", "method_CCN": "1", "method_NToken": "15", "method_nesting_level": "0"}}}, "hunk_3": {"Ismethod": 1, "added_lines": null, "deleted_lines": "49", "method_info": {"method_name": "checkpoint_correctness_verification", "method_params": "args,model,hidden_dim,load_optimizer_states", "method_startline": "49", "method_endline": "52", "method_complexity": {"method_NLOC": "4", "method_CCN": "1", "method_NToken": "13", "method_nesting_level": "0"}}}, "hunk_4": {"Ismethod": 1, "added_lines": "201,202", "deleted_lines": "195", "method_info": {"method_name": "test_checkpoint_fused_optimizer", "method_params": "tmpdir", "method_startline": "175", "method_endline": "214", "method_complexity": {"method_NLOC": "31", "method_CCN": "1", "method_NToken": "134", "method_nesting_level": "0"}}}, "hunk_5": {"Ismethod": 1, "added_lines": "25,26,27,28,29,30,31,32,33,34,35,36,37", "deleted_lines": null, "method_info": {"method_name": "compare_lr_scheduler_states", "method_params": "saved_model,loaded_model", "method_startline": "25", "method_endline": "37", "method_complexity": {"method_NLOC": "12", "method_CCN": "4", "method_NToken": "106", "method_nesting_level": "0"}}}, "hunk_6": {"Ismethod": 1, "added_lines": "243,244", "deleted_lines": null, "method_info": {"method_name": "test_checkpoint_zero_optimizer", "method_params": "tmpdir", "method_startline": "217", "method_endline": "256", "method_complexity": {"method_NLOC": "32", "method_CCN": "1", "method_NToken": "138", "method_nesting_level": "0"}}}, "hunk_7": {"Ismethod": 1, "added_lines": "130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,159,160", "deleted_lines": "154", "method_info": {"method_name": "test_checkpoint_unfused_optimizer", "method_params": "tmpdir", "method_startline": "117", "method_endline": "172", "method_complexity": {"method_NLOC": "49", "method_CCN": "1", "method_NToken": "198", "method_nesting_level": "0"}}}, "hunk_8": {"Ismethod": 1, "added_lines": "201,202", "deleted_lines": null, "method_info": {"method_name": "test_checkpoint_fused_optimizer._test_checkpoint_fused_optimizer", "method_params": "args,model,hidden_dim,load_optimizer_states", "method_startline": "200", "method_endline": "205", "method_complexity": {"method_NLOC": "6", "method_CCN": "1", "method_NToken": "25", "method_nesting_level": "1"}}}, "hunk_9": {"Ismethod": 1, "added_lines": "41,42", "deleted_lines": "49", "method_info": {"method_name": "compare_model_states", "method_params": "saved_model,loaded_model", "method_startline": "40", "method_endline": "60", "method_complexity": {"method_NLOC": "16", "method_CCN": "9", "method_NToken": "217", "method_nesting_level": "0"}}}, "hunk_10": {"Ismethod": 1, "added_lines": "16,17,18,19,20,21,22", "deleted_lines": null, "method_info": {"method_name": "compare_deepspeed_states", "method_params": "saved_model,loaded_model", "method_startline": "16", "method_endline": "22", "method_complexity": {"method_NLOC": "5", "method_CCN": "1", "method_NToken": "38", "method_nesting_level": "0"}}}}}}}}