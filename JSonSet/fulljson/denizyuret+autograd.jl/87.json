{"BR": {"BR_id": "87", "BR_author": "rened", "BRopenT": "2018-08-18T14:47:09Z", "BRcloseT": "2018-08-19T13:53:11Z", "BR_text": {"BRsummary": "gradient of std(Array{Float32,N}) throws error", "BRdescription": "\n For example, when adding the following lines to test/statistics.jl, 6 of these tests fail:\n @test gradcheck(mean, randn(Float32,2,3))\n @test gradcheck(mean, randn(Float32,2,3), kwargs=[:dims=>1])\n @test gradcheck(mean, randn(Float32,2,3), kwargs=[:dims=>(1,2)])\n @test gradcheck(meanabs, randn(Float32,2,3))\n @test gradcheck(meanabs2, randn(Float32,2,3))\n @test gradcheck(var, randn(Float32,2,3))\n @test gradcheck(var, randn(Float32,2,3), kwargs=[:dims=>1])\n @test gradcheck(var, randn(Float32,2,3), kwargs=[:dims=>(1,2)])\n @test gradcheck(std, randn(Float32,2,3))\n @test gradcheck(std, randn(Float32,2,3), kwargs=[:dims=>1])\n @test gradcheck(std, randn(Float32,2,3), kwargs=[:dims=>(1,2)])\n It seems that the eltype of the input data is not taken into account when allocating the output:\n   Expression: gradcheck(var, randn(Float32, 2, 3), kwargs=[:dims => (1, 2)])\n   MethodError: no method matching sum_outgrads(::Array{Float32,2}, ::Array{Float64,2})\n   Closest candidates are:\n     sum_outgrads(!Matched::Nothing, ::Any) at /home/rene/.julia/dev/AutoGrad/src/core.jl:499\n     sum_outgrads(::AbstractArray{T,N} where N, !Matched::AbstractArray{T,N} where N) where T at /home/rene/.julia/dev/AutoGrad/src/core.jl:486\n     sum_outgrads(!Matched::Rec, ::Any) at /home/rene/.julia/dev/AutoGrad/src/core.jl:490\n     ...\n   Stacktrace:\n    [1] backward_pass(::Rec{Array{Float32,2}}, ::Rec{Float32}, ::Array{AutoGrad.Node,1}) at /home/rene/.julia/dev/AutoGrad/src/core.jl:252\n    [2] (::getfield(AutoGrad, Symbol(\"##gradfun#1#2\")){getfield(Main, Symbol(\"#g#54\")){getfield(Main, Symbol(\"##g#52#53\")){typeof(var)}},Int64})(::Base.Iterators.Pairs{Symbol,Tuple{Int64,Int64},Tuple{Symbol},NamedTuple{(:dims,),Tuple{Tuple{Int64,Int64}}}}, ::Function, ::\n Array{Float32,2}) at /home/rene/.julia/dev/AutoGrad/src/core.jl:41\n \n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "rened", "commentT": "2018-08-19T03:07:09Z", "comment_text": "\n \t\tFixed in <denchmark-link:https://github.com/denizyuret/AutoGrad.jl/pull/91>#91</denchmark-link>\n \n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "rened", "commentT": "2018-08-19T05:12:46Z", "comment_text": "\n \t\tIt fails if dims argument exists.\n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "rened", "commentT": "2018-08-19T10:46:40Z", "comment_text": "\n \t\tYes, with <denchmark-link:https://github.com/denizyuret/AutoGrad.jl/pull/91>#91</denchmark-link>\n \n @test gradcheck(std, randn(Float64,2,3))\n @test gradcheck(std, randn(Float32,2,3))\n works now, but std/var does not work with dims for neither Float32 nor Float64:\n @test gradcheck(std, randn(Float64,2,3), kwargs=[:dims=>1])  # fails\n @test gradcheck(std, randn(Float32,2,3), kwargs=[:dims=>1])  # fails\n \t\t"}, "comments_3": {"comment_id": 4, "comment_author": "rened", "commentT": "2018-08-19T11:04:48Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/ekinakyurek>@ekinakyurek</denchmark-link>\n  we should test with Float32 arrays in other files as well to\n check for type consistency.\n <denchmark-link:#>\u2026</denchmark-link>\n \n \n On Sun, Aug 19, 2018 at 6:46 AM Rene Donner ***@***.***> wrote:\n  Yes, with #91 <#91>\n \n  @test gradcheck(std, ***@***.*** gradcheck(std, randn(Float32,2,3))\n \n  works now, but std/var does not work with dims for neither Float32 nor\n  Float64:\n \n  @test gradcheck(std, randn(Float64,2,3), kwargs=[:dims=>1])  # ***@***.*** gradcheck(std, randn(Float32,2,3), kwargs=[:dims=>1])  # fails\n \n  \u2014\n  You are receiving this because you were assigned.\n \n \n  Reply to this email directly, view it on GitHub\n  <#87 (comment)>,\n  or mute the thread\n  <https://github.com/notifications/unsubscribe-auth/ABvNpg9jpdsOCg7u269Ln7AABi4eAvtCks5uSUIQgaJpZM4WCmLQ>\n  .\n \n \n \n \t\t"}, "comments_4": {"comment_id": 5, "comment_author": "rened", "commentT": "2018-08-19T13:43:53Z", "comment_text": "\n \t\tFixed this in latest master. Please check and if it is working add these tests to test/statistics.jl.\n \t\t"}, "comments_5": {"comment_id": 6, "comment_author": "rened", "commentT": "2018-08-19T13:53:11Z", "comment_text": "\n \t\tThanks, this works! Will add tests.\n \t\t"}, "comments_6": {"comment_id": 7, "comment_author": "rened", "commentT": "2018-08-19T14:32:59Z", "comment_text": "\n \t\tNo need, I am currently adding different type tests to all test files.\n <denchmark-link:#>\u2026</denchmark-link>\n \n \n  On 19 Aug 2018, at 09:53, Rene Donner ***@***.***> wrote:\n \n  Thanks, this works! Will add tests.\n \n  \u2014\n  You are receiving this because you were mentioned.\n  Reply to this email directly, view it on GitHub <#87 (comment)>, or mute the thread <https://github.com/notifications/unsubscribe-auth/AOpr8deNAx_mtAYvM5CJDMv9sF9wJXzLks5uSW3IgaJpZM4WCmLQ>.\n \n \n \n \t\t"}}}, "commit": {"commit_id": "b14b8f63aca17f1fb2f8933aa954764fc46f8a03", "commit_author": "Deniz Yuret", "commitT": "2018-08-19 16:42:57+03:00", "commit_complexity": {"commit_NLOC": "None", "commit_CCN": "None", "commit_Nprams": "None"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "README.md", "file_new_name": "README.md", "file_complexity": {"file_NLOC": "None", "file_CCN": "None", "file_NToken": "None"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "3,7", "deleted_lines": null}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "src\\statistics.jl", "file_new_name": "src\\statistics.jl", "file_complexity": {"file_NLOC": "None", "file_CCN": "None", "file_NToken": "None"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "20,21,22", "deleted_lines": "20,21,22"}}}, "file_2": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "test\\specialfunctions.jl", "file_new_name": "test\\specialfunctions.jl", "file_complexity": {"file_NLOC": "None", "file_CCN": "None", "file_NToken": "None"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "54", "deleted_lines": "54"}}}}}}