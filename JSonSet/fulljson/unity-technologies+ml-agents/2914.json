{"BR": {"BR_id": "2914", "BR_author": "mbaske", "BRopenT": "2019-11-15T11:21:39Z", "BRcloseT": "2019-11-18T17:53:10Z", "BR_text": {"BRsummary": "Visual sensor shape dimensions are swapped in v0.11", "BRdescription": "\n The shape dimensions of CameraSensor and RenderTextureSensor are swapped in v0.11.\n To reproduce, set non-quadratic shape size like 96x48 in sensor component.\n Python console log:\n ValueError: Cannot feed value of shape (1, 48, 96, 3) for Tensor 'visual_observation_0:0', which has shape '(?, 96, 48, 3)'\n The problem appears to be the line\n m_Shape = new[] { width, height, grayscale ? 1 : 3 };\n in CameraSensor  and RenderTextureSensor constructors.\n The error disappears after changing it to\n m_Shape = new[] { height, width, grayscale ? 1 : 3 };\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "mbaske", "commentT": "2019-11-15T18:35:33Z", "comment_text": "\n \t\tThanks for catching this. I'll update our examples to use non-square visuals to hopefully prevent anything like this from happening again.\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "mbaske", "commentT": "2019-11-16T00:15:16Z", "comment_text": "\n \t\tPR here: <denchmark-link:https://github.com/Unity-Technologies/ml-agents/pull/2919>#2919</denchmark-link>\n \n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "mbaske", "commentT": "2019-11-18T17:53:02Z", "comment_text": "\n \t\tThis is fixed on the develop branch now, and will be in the next release.\n \t\t"}}}, "commit": {"commit_id": "7ed6b3a0507e75ed11f01443da27064891e5b714", "commit_author": "Chris Elion", "commitT": "2019-11-18 09:47:43-08:00", "commit_complexity": {"commit_NLOC": "1.0", "commit_CCN": "0.0", "commit_Nprams": "1.0"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "UnitySDK\\Assets\\ML-Agents\\Examples\\GridWorld\\Prefabs\\Area.prefab", "file_new_name": "UnitySDK\\Assets\\ML-Agents\\Examples\\GridWorld\\Prefabs\\Area.prefab", "file_complexity": {"file_NLOC": "None", "file_CCN": "None", "file_NToken": "None"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": null, "deleted_lines": null}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "UnitySDK\\Assets\\ML-Agents\\Examples\\GridWorld\\Prefabs\\agentRenderTexture.renderTexture", "file_new_name": "UnitySDK\\Assets\\ML-Agents\\Examples\\GridWorld\\Prefabs\\agentRenderTexture.renderTexture", "file_complexity": {"file_NLOC": "None", "file_CCN": "None", "file_NToken": "None"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "15", "deleted_lines": "15"}}}, "file_2": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "UnitySDK\\Assets\\ML-Agents\\Examples\\GridWorld\\Scenes\\GridWorld.unity", "file_new_name": "UnitySDK\\Assets\\ML-Agents\\Examples\\GridWorld\\Scenes\\GridWorld.unity", "file_complexity": {"file_NLOC": "None", "file_CCN": "None", "file_NToken": "None"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": null, "deleted_lines": null}}}, "file_3": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "UnitySDK\\Assets\\ML-Agents\\Examples\\GridWorld\\TFModels\\GridWorld.nn", "file_new_name": "UnitySDK\\Assets\\ML-Agents\\Examples\\GridWorld\\TFModels\\GridWorld.nn", "file_complexity": {"file_NLOC": "None", "file_CCN": "None", "file_NToken": "None"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": null, "deleted_lines": null}}}, "file_4": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "UnitySDK\\Assets\\ML-Agents\\Scripts\\InferenceBrain\\BarracudaModelParamLoader.cs", "file_new_name": "UnitySDK\\Assets\\ML-Agents\\Scripts\\InferenceBrain\\BarracudaModelParamLoader.cs", "file_complexity": {"file_NLOC": "438", "file_CCN": "65", "file_NToken": "2182"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "372,373", "deleted_lines": "372,373", "method_info": {"method_name": "MLAgents.InferenceBrain::BarracudaModelParamLoader::CheckVisualObsShape", "method_params": "tensorProxy,sensorComponent", "method_startline": "368", "method_endline": "385", "method_complexity": {"method_NLOC": "18", "method_CCN": "4", "method_NToken": "108", "method_nesting_level": "2"}}}}}, "file_5": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "UnitySDK\\Assets\\ML-Agents\\Scripts\\Sensor\\CameraSensor.cs", "file_new_name": "UnitySDK\\Assets\\ML-Agents\\Scripts\\Sensor\\CameraSensor.cs", "file_complexity": {"file_NLOC": "78", "file_CCN": "9", "file_NToken": "430"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "22", "deleted_lines": "22", "method_info": {"method_name": "MLAgents.Sensor::CameraSensor::CameraSensor", "method_params": "camera,width,height,grayscale,name", "method_startline": "15", "method_endline": "23", "method_complexity": {"method_NLOC": "9", "method_CCN": "2", "method_NToken": "56", "method_nesting_level": "2"}}}}}, "file_6": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "UnitySDK\\Assets\\ML-Agents\\Scripts\\Sensor\\CameraSensorComponent.cs", "file_new_name": "UnitySDK\\Assets\\ML-Agents\\Scripts\\Sensor\\CameraSensorComponent.cs", "file_complexity": {"file_NLOC": "21", "file_CCN": "3", "file_NToken": "95"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "21", "deleted_lines": "21", "method_info": {"method_name": "MLAgents.Sensor::CameraSensorComponent::GetObservationShape", "method_params": "", "method_startline": "19", "method_endline": "22", "method_complexity": {"method_NLOC": "4", "method_CCN": "2", "method_NToken": "21", "method_nesting_level": "2"}}}}}, "file_7": {"file_change_type": "MODIFY", "file_Nmethod": 6, "file_old_name": "UnitySDK\\Assets\\ML-Agents\\Scripts\\Sensor\\RenderTextureSensor.cs", "file_new_name": "UnitySDK\\Assets\\ML-Agents\\Scripts\\Sensor\\RenderTextureSensor.cs", "file_complexity": {"file_NLOC": "66", "file_CCN": "11", "file_NToken": "344"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "69,71,72", "deleted_lines": "70,71,73,77,78,79,80,81,82", "method_info": {"method_name": "MLAgents.Sensor::RenderTextureSensor::ObservationToTexture", "method_params": "obsTexture", "method_startline": "69", "method_endline": "82", "method_complexity": {"method_NLOC": "12", "method_CCN": "1", "method_NToken": "91", "method_nesting_level": "2"}}}, "hunk_1": {"Ismethod": 1, "added_lines": null, "deleted_lines": "73,77,78,79,80,81,82,83,84,85,86,87,88", "method_info": {"method_name": "MLAgents.Sensor::RenderTextureSensor::ObservationToTexture", "method_params": "obsTexture,width,height", "method_startline": "73", "method_endline": "96", "method_complexity": {"method_NLOC": "20", "method_CCN": "5", "method_NToken": "152", "method_nesting_level": "2"}}}, "hunk_2": {"Ismethod": 1, "added_lines": "37", "deleted_lines": "39", "method_info": {"method_name": "MLAgents.Sensor::RenderTextureSensor::GetCompressedObservation", "method_params": "", "method_startline": "33", "method_endline": "43", "method_complexity": {"method_NLOC": "10", "method_CCN": "1", "method_NToken": "47", "method_nesting_level": "2"}}}, "hunk_3": {"Ismethod": 1, "added_lines": "49", "deleted_lines": "51", "method_info": {"method_name": "MLAgents.Sensor::RenderTextureSensor::Write", "method_params": "adapter", "method_startline": "45", "method_endline": "54", "method_complexity": {"method_NLOC": "10", "method_CCN": "1", "method_NToken": "54", "method_nesting_level": "2"}}}, "hunk_4": {"Ismethod": 1, "added_lines": "16,17,20", "deleted_lines": "15,18,19,22", "method_info": {"method_name": "MLAgents.Sensor::RenderTextureSensor::RenderTextureSensor", "method_params": "renderTexture,width,height,grayscale,name", "method_startline": "15", "method_endline": "23", "method_complexity": {"method_NLOC": "9", "method_CCN": "2", "method_NToken": "56", "method_nesting_level": "2"}}}, "hunk_5": {"Ismethod": 1, "added_lines": "13,16,17,20", "deleted_lines": "15,18,19", "method_info": {"method_name": "MLAgents.Sensor::RenderTextureSensor::RenderTextureSensor", "method_params": "renderTexture,grayscale,name", "method_startline": "13", "method_endline": "21", "method_complexity": {"method_NLOC": "9", "method_CCN": "4", "method_NToken": "68", "method_nesting_level": "2"}}}}}, "file_8": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "UnitySDK\\Assets\\ML-Agents\\Scripts\\Sensor\\RenderTextureSensorComponent.cs", "file_new_name": "UnitySDK\\Assets\\ML-Agents\\Scripts\\Sensor\\RenderTextureSensorComponent.cs", "file_complexity": {"file_NLOC": "21", "file_CCN": "5", "file_NToken": "104"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "19,20,21,22", "deleted_lines": "21", "method_info": {"method_name": "MLAgents.Sensor::RenderTextureSensorComponent::GetObservationShape", "method_params": "", "method_startline": "17", "method_endline": "23", "method_complexity": {"method_NLOC": "6", "method_CCN": "4", "method_NToken": "47", "method_nesting_level": "2"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "14", "deleted_lines": null, "method_info": {"method_name": "MLAgents.Sensor::RenderTextureSensorComponent::CreateSensor", "method_params": "", "method_startline": "12", "method_endline": "15", "method_complexity": {"method_NLOC": "4", "method_CCN": "1", "method_NToken": "16", "method_nesting_level": "2"}}}}}}}}