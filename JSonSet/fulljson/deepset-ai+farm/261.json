{"BR": {"BR_id": "261", "BR_author": "ftesser", "BRopenT": "2020-02-21T14:26:04Z", "BRcloseT": "2020-02-21T16:43:16Z", "BR_text": {"BRsummary": "farm.modeling.language_model.load does not make use of 'language' **kargs if present", "BRdescription": "\n Describe the bug\n As suggested from the WARNING below if the  'language' **kargs is present in farm.modeling.language_model.load method that should be used to setup the language. This is not realized now.\n The referred method is:\n \n \n \n FARM/farm/modeling/language_model.py\n \n \n          Line 70\n       in\n       d200a73\n \n \n \n \n \n \n  def load(cls, pretrained_model_name_or_path, n_added_tokens=0, **kwargs): \n \n \n \n \n \n Error message\n I obtained the following after executing the code  listed in the To Reproduce section below:\n <denchmark-code>02/21/2020 15:05:25 - INFO - transformers.file_utils -   PyTorch version 1.4.0 available.\n 02/21/2020 15:05:33 - INFO - transformers.modeling_utils -   loading weights file https://s3.amazonaws.com/models.huggingface.co/bert/dbmdz/bert-base-italian-cased/pytorch_model.bin from cache at /home/fabio/.cache/torch/transformers/0dfce644f7b32078740bac235987e578d0d382d92aca41523ac6ca8b7cbedffd.80750f31a4b5680a47b8eca76074e68d18a2b39563db9d3648e9c30433e3fdef\n 02/21/2020 15:05:35 - WARNING - farm.modeling.language_model -   Could not automatically detect from language model name what language it is. \n \t We guess it's an *ENGLISH* model ... \n \t If not: Init the language model by supplying the 'language' param.\n </denchmark-code>\n \n Expected behavior\n Set language as the kargs passed.\n Additional context\n Add any other context about the problem here, like type of downstream task, part of  etc..\n To Reproduce\n from farm.modeling.language_model import LanguageModel\n \n language_model = LanguageModel.load('dbmdz/bert-base-italian-cased', language='italian')\n System:\n \n OS: Ubuntu 19.10\n GPU/CPU: both\n FARM version: 0.4.1\n \n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "ftesser", "commentT": "2020-02-21T16:58:07Z", "comment_text": "\n \t\tYou are totally right, <denchmark-link:https://github.com/ftesser>@ftesser</denchmark-link>\n . The warning message had a good intention, but totally missed the implementation behind it. Thanks for spotting & fixing!\n \t\t"}}}, "commit": {"commit_id": "58f67cc07b5d9cc22f307295d45d905ca940776e", "commit_author": "ftesser", "commitT": "2020-02-21 17:43:15+01:00", "commit_complexity": {"commit_NLOC": "1.0", "commit_CCN": "1.0", "commit_Nprams": "0.0"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 3, "file_old_name": "farm\\modeling\\language_model.py", "file_new_name": "farm\\modeling\\language_model.py", "file_complexity": {"file_NLOC": "504", "file_CCN": "78", "file_NToken": "3040"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "335", "deleted_lines": "328", "method_info": {"method_name": "load", "method_params": "cls,pretrained_model_name_or_path,language,kwargs", "method_startline": "306", "method_endline": "336", "method_complexity": {"method_NLOC": "16", "method_CCN": "3", "method_NToken": "134", "method_nesting_level": "1"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "838", "deleted_lines": null, "method_info": {"method_name": "disable_hidden_states_output", "method_params": "self", "method_startline": "837", "method_endline": "838", "method_complexity": {"method_NLOC": "2", "method_CCN": "1", "method_NToken": "12", "method_nesting_level": "1"}}}, "hunk_2": {"Ismethod": 1, "added_lines": "190,191,192,193,194", "deleted_lines": null, "method_info": {"method_name": "_get_or_infer_language_from_name", "method_params": "cls,language,name", "method_startline": "190", "method_endline": "194", "method_complexity": {"method_NLOC": "5", "method_CCN": "2", "method_NToken": "26", "method_nesting_level": "1"}}}}}}}}