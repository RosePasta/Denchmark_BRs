{"BR": {"BR_id": "1421", "BR_author": "BarclayII", "BRopenT": "2020-04-06T03:24:23Z", "BRcloseT": "2020-04-06T04:33:44Z", "BR_text": {"BRsummary": "[BUG] Neighbor sampling with replacement returns node ID -1 for 0 degree nodes", "BRdescription": "\n <denchmark-h:h2>\ud83d\udc1b Bug</denchmark-h>\n \n See below\n <denchmark-h:h2>To Reproduce</denchmark-h>\n \n <denchmark-code>g = dgl.graph([], num_nodes=5)\n sg = dgl.sampling.sample_neighbors(g, torch.tensor([1, 2], dtype=torch.int64), 2, replace=True)\n sg.all_edges()\n # returns (tensor([-1, -1, -1, -1]), tensor([-1, -1, -1, -1]))\n </denchmark-code>\n \n <denchmark-h:h2>Expected behavior</denchmark-h>\n \n Should return 0 edges instead.\n \t"}, "comments": {}}, "commit": {"commit_id": "91f7ff8e5284dadaa6d463a03c600fe5ed329980", "commit_author": "Quan (Andy) Gan", "commitT": "2020-04-06 12:33:43+08:00", "commit_complexity": {"commit_NLOC": "1.0", "commit_CCN": "1.0", "commit_Nprams": "1.0"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "src\\array\\cpu\\rowwise_pick.h", "file_new_name": "src\\array\\cpu\\rowwise_pick.h", "file_complexity": {"file_NLOC": "89", "file_CCN": "15", "file_NToken": "910"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "77,78,79,80,81,82", "deleted_lines": "76,77,78,80,81,82,83,84", "method_info": {"method_name": "dgl::aten::impl::CSRRowWisePick", "method_params": "mat,rows,num_picks,replace,pick_fn", "method_startline": "43", "method_endline": "132", "method_complexity": {"method_NLOC": "63", "method_CCN": "14", "method_NToken": "726", "method_nesting_level": "3"}}}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "tests\\compute\\test_sampling.py", "file_new_name": "tests\\compute\\test_sampling.py", "file_complexity": {"file_NLOC": "424", "file_CCN": "61", "file_NToken": "6822"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "463,464,465,466,467,468,469,470", "deleted_lines": "463,464,465,466", "method_info": {"method_name": "test_sample_neighbors_with_0deg", "method_params": "", "method_startline": "461", "method_endline": "470", "method_complexity": {"method_NLOC": "10", "method_CCN": "1", "method_NToken": "197", "method_nesting_level": "0"}}}}}}}}