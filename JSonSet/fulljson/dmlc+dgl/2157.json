{"BR": {"BR_id": "2157", "BR_author": "yankai-chen", "BRopenT": "2020-09-08T07:24:56Z", "BRcloseT": "2020-09-09T06:19:44Z", "BR_text": {"BRsummary": "edge_softmax function", "BRdescription": "\n <denchmark-h:h2>\ud83d\udc1b Bug</denchmark-h>\n \n <denchmark-h:h2>To Reproduce</denchmark-h>\n \n Steps to reproduce the behavior:\n \n Just run the demo codes in dgl.ops.edge_softmax\n run the demo: \"edge_softmax(g, edata[:4], th.Tensor([0,1,2,3]))\"\n Got the error: \"gidx = gidx.edge_subgraph(eids.type(gidx.dtype), True)\n ValueError: invalid type: 'int64'\"\n \n <denchmark-h:h2>Expected behavior</denchmark-h>\n \n eids.type may not accept the type from gidx.dtype, where gidx.dtype is a string and eids.type() can only accept objects like torch.int32. So in order to correctly create the subgraph here, edge_subgraph may accept the tensor-typed index? Look forward to your reply. Thx!\n <denchmark-h:h2>Environment</denchmark-h>\n \n \n DGL Version: latest\n PyTorch: 1.6.0\n OS (e.g., Linux): windows\n How you installed DGL (conda, pip, source): conda\n Build command you used (if compiling from source):\n Python version:3.8.5\n \n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "yankai-chen", "commentT": "2020-09-08T17:57:07Z", "comment_text": "\n \t\t@yankaiii , thanks for reporting this bug, will fix it soon.\n \t\t"}}}, "commit": {"commit_id": "45b610c49aef5dfdce41d63cabe096aee75f95cf", "commit_author": "Zihao Ye", "commitT": "2020-09-09 14:19:43+08:00", "commit_complexity": {"commit_NLOC": "0.0", "commit_CCN": "1.0", "commit_Nprams": "0.0"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "python\\dgl\\backend\\mxnet\\sparse.py", "file_new_name": "python\\dgl\\backend\\mxnet\\sparse.py", "file_complexity": {"file_NLOC": "236", "file_CCN": "65", "file_NToken": "2209"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "272", "deleted_lines": "272", "method_info": {"method_name": "__init__", "method_params": "self,gidx,eids,norm_by", "method_startline": "269", "method_endline": "275", "method_complexity": {"method_NLOC": "7", "method_CCN": "3", "method_NToken": "59", "method_nesting_level": "1"}}}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "python\\dgl\\backend\\pytorch\\sparse.py", "file_new_name": "python\\dgl\\backend\\pytorch\\sparse.py", "file_complexity": {"file_NLOC": "167", "file_CCN": "59", "file_NToken": "1649"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "199", "deleted_lines": "199", "method_info": {"method_name": "forward", "method_params": "ctx,gidx,score,eids,norm_by", "method_startline": "182", "method_endline": "208", "method_complexity": {"method_NLOC": "12", "method_CCN": "3", "method_NToken": "131", "method_nesting_level": "1"}}}}}, "file_2": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "python\\dgl\\backend\\tensorflow\\sparse.py", "file_new_name": "python\\dgl\\backend\\tensorflow\\sparse.py", "file_complexity": {"file_NLOC": "199", "file_CCN": "65", "file_NToken": "1948"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "228", "deleted_lines": "228", "method_info": {"method_name": "edge_softmax_real", "method_params": "gidx,score,eids,norm_by", "method_startline": "226", "method_endline": "242", "method_complexity": {"method_NLOC": "11", "method_CCN": "3", "method_NToken": "127", "method_nesting_level": "0"}}}}}, "file_3": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "python\\dgl\\ops\\edge_softmax.py", "file_new_name": "python\\dgl\\ops\\edge_softmax.py", "file_complexity": {"file_NLOC": "107", "file_CCN": "2", "file_NToken": "80"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "107,108", "deleted_lines": null, "method_info": {"method_name": "edge_softmax", "method_params": "graph,logits,eids,norm_by", "method_startline": "9", "method_endline": "110", "method_complexity": {"method_NLOC": "102", "method_CCN": "2", "method_NToken": "51", "method_nesting_level": "0"}}}}}}}}