{"BR": {"BR_id": "416", "BR_author": "atebbifakhr", "BRopenT": "2019-04-25T18:00:24Z", "BRcloseT": "2019-04-29T10:50:08Z", "BR_text": {"BRsummary": "Problem in sharing embeddings", "BRdescription": "\n I noticed that when I use DualTransformer with sharing parameters between Encoders and also setting sharing level to 'ALL', two sets of embeddings are created with these prefixes:\n \n transformer//w_embs\n transformer/shared_embeddings/w_embs\n \n However, it should be one for everything.\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "atebbifakhr", "commentT": "2019-04-25T21:45:50Z", "comment_text": "\n \t\tI tried to change\n def _get_shared_name(self): return \"\"\n to:\n def _get_shared_name(self): return \"shared_embeddings\"\n in ParallelInputter but I'm getting Duplicate Node error.\n Do you know a quick fix for it?\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "atebbifakhr", "commentT": "2019-04-26T22:53:47Z", "comment_text": "\n \t\tThe best way I found is reimplementing build() function in ExampleInputter.\n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "atebbifakhr", "commentT": "2019-04-28T21:00:43Z", "comment_text": "\n \t\tThanks for reporting. Do you have a working fix that you can share?\n \t\t"}, "comments_3": {"comment_id": 4, "comment_author": "atebbifakhr", "commentT": "2019-04-29T09:46:01Z", "comment_text": "\n \t\tI sent a pull request.\n It works for DualTransformer, but I'm not sure for other use cases.\n \t\t"}, "comments_4": {"comment_id": 5, "comment_author": "atebbifakhr", "commentT": "2019-04-29T10:30:07Z", "comment_text": "\n \t\tThanks. This indeed needs a more general fix: the issue is that the built flag is not properly set for MultiInputter classes and weights are recreated when the layer is first called. I will push an appropriate fix to that.\n \t\t"}}}, "commit": {"commit_id": "fd0a7f6ffb9d58603a65d48fd4e1d6cbf3a9f7bd", "commit_author": "Guillaume Klein", "commitT": "2019-04-29 12:50:07+02:00", "commit_complexity": {"commit_NLOC": "1.0", "commit_CCN": "1.0", "commit_Nprams": "1.0"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "CHANGELOG.md", "file_new_name": "CHANGELOG.md", "file_complexity": {"file_NLOC": "None", "file_CCN": "None", "file_NToken": "None"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "20", "deleted_lines": null}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "opennmt\\inputters\\inputter.py", "file_new_name": "opennmt\\inputters\\inputter.py", "file_complexity": {"file_NLOC": "399", "file_CCN": "115", "file_NToken": "2783"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "305,306,307,308,309", "deleted_lines": null, "method_info": {"method_name": "__getattribute__", "method_params": "self,name", "method_startline": "305", "method_endline": "309", "method_complexity": {"method_NLOC": "5", "method_CCN": "3", "method_NToken": "39", "method_nesting_level": "1"}}}}}}}}