{"BR": {"BR_id": "329", "BR_author": "arahusky", "BRopenT": "2019-02-12T18:10:47Z", "BRcloseT": "2019-05-30T09:19:06Z", "BR_text": {"BRsummary": "Receiving a \u201cValueError: best_eval_result cannot be empty or no loss is found in it.\u201d while training the transformer model", "BRdescription": "\n Hello I have an issue similar to <denchmark-link:http://forum.opennmt.net/t/receiving-a-valueerror-best-eval-result-cannot-be-empty-or-no-loss-is-found-in-it-while-training-the-transformer-model/2309>http://forum.opennmt.net/t/receiving-a-valueerror-best-eval-result-cannot-be-empty-or-no-loss-is-found-in-it-while-training-the-transformer-model/2309</denchmark-link>\n .\n In detail, I am training a Transformer for translation task with this script (actually almost as in WMT example <denchmark-link:https://github.com/OpenNMT/OpenNMT-tf/tree/master/scripts/wmt>https://github.com/OpenNMT/OpenNMT-tf/tree/master/scripts/wmt</denchmark-link>\n ):\n <denchmark-code>onmt-main train_and_eval \\\n           --model_type Transformer \\\n           --config transformer.config --auto_config \\\n           --num_gpus 4\n </denchmark-code>\n \n while my config file looks like:\n <denchmark-code>model_dir: base_transformer\n \n data:\n   train_features_file: train_input.sp\n   train_labels_file: train_target.sp\n   eval_features_file: dev_input.sp\n   eval_labels_file: dev_target.sp\n   source_words_vocabulary: base.vocab\n   target_words_vocabulary: base.vocab\n \n train:\n   save_checkpoints_steps: 1000\n \n eval:\n   eval_delay: 3600  # Every 1 hour\n   external_evaluators: BLEU\n \n infer:\n   batch_size: 32\n </denchmark-code>\n \n *.sp files contain lines tokenized using spm_train and spm_encode programs and vocab file is from spm_train.\n And the full log:\n <denchmark-code>INFO:tensorflow:Using parameters:\n data:\n   eval_features_file: /home/naplava/experiments/dev_input.sp\n   eval_labels_file: /home/naplava/experiments/dev_target.sp\n   source_words_vocabulary: /home/naplava/experiments/base.vocab\n   target_words_vocabulary: /home/naplava/experiments/base.vocab\n   train_features_file: /home/naplava/experiments/train_input.sp\n   train_labels_file: /home/naplava/experiments/train_target.sp\n eval:\n   batch_size: 32\n   eval_delay: 3600\n   exporters: best\n   external_evaluators: BLEU\n infer:\n   batch_size: 32\n   bucket_width: 5\n model_dir: base_transformer\n params:\n   average_loss_in_time: true\n   beam_width: 4\n   decay_params:\n     model_dim: 512\n     warmup_steps: 8000\n   decay_type: noam_decay_v2\n   label_smoothing: 0.1\n   learning_rate: 2.0\n   length_penalty: 0.6\n   optimizer: LazyAdamOptimizer\n   optimizer_params:\n     beta1: 0.9\n     beta2: 0.998\n score:\n   batch_size: 64\n train:\n   average_last_checkpoints: 8\n   batch_size: 3072\n   batch_type: tokens\n   bucket_width: 1\n   effective_batch_size: 25000\n   keep_checkpoint_max: 8\n   maximum_features_length: 100\n   maximum_labels_length: 100\n   sample_buffer_size: -1\n   save_checkpoints_steps: 1000\n   save_summary_steps: 100\n   train_steps: 500000\n \n INFO:tensorflow:Accumulate gradients of 3 iterations to reach effective batch size of 25000\n 2019-02-12 18:15:41.373034: I tensorflow/core/platform/cpu_feature_guard.cc:141] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2 FMA\n 2019-02-12 18:15:41.975291: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1432] Found device 0 with properties: \n name: Quadro P5000 major: 6 minor: 1 memoryClockRate(GHz): 1.7335\n pciBusID: 0000:09:00.0\n totalMemory: 15.90GiB freeMemory: 15.78GiB\n 2019-02-12 18:15:42.217610: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1432] Found device 1 with properties: \n name: Quadro P5000 major: 6 minor: 1 memoryClockRate(GHz): 1.7335\n pciBusID: 0000:83:00.0\n totalMemory: 15.90GiB freeMemory: 15.78GiB\n 2019-02-12 18:15:42.451703: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1432] Found device 2 with properties: \n name: Quadro P5000 major: 6 minor: 1 memoryClockRate(GHz): 1.7335\n pciBusID: 0000:84:00.0\n totalMemory: 15.90GiB freeMemory: 15.78GiB\n 2019-02-12 18:15:42.677550: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1432] Found device 3 with properties: \n name: Quadro P5000 major: 6 minor: 1 memoryClockRate(GHz): 1.7335\n pciBusID: 0000:87:00.0\n totalMemory: 15.90GiB freeMemory: 15.78GiB\n 2019-02-12 18:15:42.686989: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1511] Adding visible gpu devices: 0, 1, 2, 3\n 2019-02-12 18:15:46.010084: I tensorflow/core/common_runtime/gpu/gpu_device.cc:982] Device interconnect StreamExecutor with strength 1 edge matrix:\n 2019-02-12 18:15:46.010220: I tensorflow/core/common_runtime/gpu/gpu_device.cc:988]      0 1 2 3 \n 2019-02-12 18:15:46.010250: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1001] 0:   N N N N \n 2019-02-12 18:15:46.010272: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1001] 1:   N N Y Y \n 2019-02-12 18:15:46.010292: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1001] 2:   N Y N Y \n 2019-02-12 18:15:46.010312: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1001] 3:   N Y Y N \n 2019-02-12 18:15:46.011855: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1115] Created TensorFlow device (/device:GPU:0 with 15288 MB memory) -> physical GPU (device: 0, name: Quadro P5000, pci bus id: 0000:09:00.0, compute capability: 6.1)\n 2019-02-12 18:15:46.014814: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1115] Created TensorFlow device (/device:GPU:1 with 15288 MB memory) -> physical GPU (device: 1, name: Quadro P5000, pci bus id: 0000:83:00.0, compute capability: 6.1)\n 2019-02-12 18:15:46.015489: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1115] Created TensorFlow device (/device:GPU:2 with 15288 MB memory) -> physical GPU (device: 2, name: Quadro P5000, pci bus id: 0000:84:00.0, compute capability: 6.1)\n 2019-02-12 18:15:46.015823: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1115] Created TensorFlow device (/device:GPU:3 with 15288 MB memory) -> physical GPU (device: 3, name: Quadro P5000, pci bus id: 0000:87:00.0, compute capability: 6.1)\n INFO:tensorflow:Using config: {'_model_dir': 'base_transformer', '_tf_random_seed': None, '_save_summary_steps': 100, '_save_checkpoints_steps': 1000, '_save_checkpoints_secs': None, '_session_config': gpu_options {\n }\n allow_soft_placement: true\n graph_options {\n   rewrite_options {\n     layout_optimizer: OFF\n   }\n }\n , '_keep_checkpoint_max': 8, '_keep_checkpoint_every_n_hours': 10000, '_log_step_count_steps': 300, '_train_distribute': None, '_device_fn': None, '_protocol': None, '_eval_distribute': None, '_experimental_distribute': None, '_service': None, '_cluster_spec': <tensorflow.python.training.server_lib.ClusterSpec object at 0x14efa3847a20>, '_task_type': 'worker', '_task_id': 0, '_global_id_in_cluster': 0, '_master': '', '_evaluation_master': '', '_is_chief': True, '_num_ps_replicas': 0, '_num_worker_replicas': 1}\n INFO:tensorflow:Not using Distribute Coordinator.\n INFO:tensorflow:Running training and evaluation locally (non-distributed).\n INFO:tensorflow:Start train and evaluate loop. The evaluate will happen after every checkpoint. Checkpoint frequency is determined based on RunConfig arguments: save_checkpoints_steps 1000 or save_checkpoints_secs None.\n INFO:tensorflow:Training on 1157339 examples\n INFO:tensorflow:Calling model_fn.\n INFO:tensorflow:Done calling model_fn.\n INFO:tensorflow:Create CheckpointSaverHook.\n INFO:tensorflow:Number of trainable parameters: 93326081\n INFO:tensorflow:Graph was finalized.\n 2019-02-12 18:16:50.504395: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1511] Adding visible gpu devices: 0, 1, 2, 3\n 2019-02-12 18:16:50.504698: I tensorflow/core/common_runtime/gpu/gpu_device.cc:982] Device interconnect StreamExecutor with strength 1 edge matrix:\n 2019-02-12 18:16:50.504733: I tensorflow/core/common_runtime/gpu/gpu_device.cc:988]      0 1 2 3 \n 2019-02-12 18:16:50.504756: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1001] 0:   N N N N \n 2019-02-12 18:16:50.504776: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1001] 1:   N N Y Y \n 2019-02-12 18:16:50.504795: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1001] 2:   N Y N Y \n 2019-02-12 18:16:50.504814: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1001] 3:   N Y Y N \n 2019-02-12 18:16:50.506508: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1115] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:0 with 15288 MB memory) -> physical GPU (device: 0, name: Quadro P5000, pci bus id: 0000:09:00.0, compute capability: 6.1)\n 2019-02-12 18:16:50.506842: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1115] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:1 with 15288 MB memory) -> physical GPU (device: 1, name: Quadro P5000, pci bus id: 0000:83:00.0, compute capability: 6.1)\n 2019-02-12 18:16:50.507181: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1115] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:2 with 15288 MB memory) -> physical GPU (device: 2, name: Quadro P5000, pci bus id: 0000:84:00.0, compute capability: 6.1)\n 2019-02-12 18:16:50.507447: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1115] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:3 with 15288 MB memory) -> physical GPU (device: 3, name: Quadro P5000, pci bus id: 0000:87:00.0, compute capability: 6.1)\n INFO:tensorflow:Running local_init_op.\n 2019-02-12 18:16:57.836436: I tensorflow/core/kernels/lookup_util.cc:376] Table trying to initialize from file /home/naplava/experiments/base.vocab is already initialized.\n INFO:tensorflow:Done running local_init_op.\n INFO:tensorflow:Saving checkpoints for 0 into base_transformer/model.ckpt.\n INFO:tensorflow:loss = 10.396471, step = 0\n INFO:tensorflow:loss = 9.543553, step = 100 (182.627 sec)\n INFO:tensorflow:loss = 8.319929, step = 200 (147.124 sec)\n INFO:tensorflow:source_words/sec: 22859\n INFO:tensorflow:target_words/sec: 24948\n INFO:tensorflow:global_step/sec: 0.629292\n INFO:tensorflow:loss = 7.550838, step = 300 (147.459 sec)\n INFO:tensorflow:source_words/sec: 22801\n INFO:tensorflow:target_words/sec: 24889\n INFO:tensorflow:loss = 6.224883, step = 400 (147.491 sec)\n INFO:tensorflow:source_words/sec: 22779\n INFO:tensorflow:target_words/sec: 24886\n INFO:tensorflow:loss = 6.6132474, step = 500 (147.308 sec)\n INFO:tensorflow:source_words/sec: 21945\n INFO:tensorflow:target_words/sec: 23952\n INFO:tensorflow:global_step/sec: 0.678376\n INFO:tensorflow:loss = 5.8994384, step = 600 (147.432 sec)\n INFO:tensorflow:source_words/sec: 22786\n INFO:tensorflow:target_words/sec: 24895\n INFO:tensorflow:loss = 4.9993877, step = 700 (147.753 sec)\n INFO:tensorflow:source_words/sec: 22746\n INFO:tensorflow:target_words/sec: 24839\n INFO:tensorflow:loss = 4.5198164, step = 800 (147.632 sec)\n INFO:tensorflow:source_words/sec: 22827\n INFO:tensorflow:target_words/sec: 24861\n INFO:tensorflow:global_step/sec: 0.677785\n INFO:tensorflow:loss = 3.671426, step = 900 (147.247 sec)\n INFO:tensorflow:source_words/sec: 21928\n INFO:tensorflow:target_words/sec: 23965\n INFO:tensorflow:Saving checkpoints for 1000 into base_transformer/model.ckpt.\n INFO:tensorflow:Calling model_fn.\n INFO:tensorflow:Done calling model_fn.\n INFO:tensorflow:Starting evaluation at 2019-02-12-17:43:49\n INFO:tensorflow:Graph was finalized.\n 2019-02-12 18:43:49.638650: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1511] Adding visible gpu devices: 0, 1, 2, 3\n 2019-02-12 18:43:49.638908: I tensorflow/core/common_runtime/gpu/gpu_device.cc:982] Device interconnect StreamExecutor with strength 1 edge matrix:\n 2019-02-12 18:43:49.638939: I tensorflow/core/common_runtime/gpu/gpu_device.cc:988]      0 1 2 3 \n 2019-02-12 18:43:49.638960: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1001] 0:   N N N N \n 2019-02-12 18:43:49.638978: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1001] 1:   N N Y Y \n 2019-02-12 18:43:49.638996: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1001] 2:   N Y N Y \n 2019-02-12 18:43:49.639014: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1001] 3:   N Y Y N \n 2019-02-12 18:43:49.639593: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1115] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:0 with 15288 MB memory) -> physical GPU (device: 0, name: Quadro P5000, pci bus id: 0000:09:00.0, compute capability: 6.1)\n 2019-02-12 18:43:49.639769: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1115] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:1 with 15288 MB memory) -> physical GPU (device: 1, name: Quadro P5000, pci bus id: 0000:83:00.0, compute capability: 6.1)\n 2019-02-12 18:43:49.640067: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1115] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:2 with 15288 MB memory) -> physical GPU (device: 2, name: Quadro P5000, pci bus id: 0000:84:00.0, compute capability: 6.1)\n 2019-02-12 18:43:49.640265: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1115] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:3 with 15288 MB memory) -> physical GPU (device: 3, name: Quadro P5000, pci bus id: 0000:87:00.0, compute capability: 6.1)\n INFO:tensorflow:Restoring parameters from base_transformer/model.ckpt-1000\n INFO:tensorflow:Running local_init_op.\n 2019-02-12 18:43:50.472196: I tensorflow/core/kernels/lookup_util.cc:376] Table trying to initialize from file /home/naplava/experiments/base.vocab is already initialized.\n INFO:tensorflow:Done running local_init_op.\n INFO:tensorflow:Evaluation predictions saved to base_transformer/eval/predictions.txt.1000\n INFO:tensorflow:BLEU evaluation score: 41.470000\n INFO:tensorflow:Finished evaluation at 2019-02-12-17:45:48\n INFO:tensorflow:Saving dict for global step 1000: global_step = 1000, loss = 2.5220914\n INFO:tensorflow:Saving 'checkpoint_path' summary for global step 1000: base_transformer/model.ckpt-1000\n INFO:tensorflow:Loading best metric from event files.\n Traceback (most recent call last):\n   File \"/home/naplava/venv/bin/onmt-main\", line 11, in <module>\n     sys.exit(main())\n   File \"/home/naplava/venv/lib/python3.6/site-packages/opennmt/bin/main.py\", line 172, in main\n     runner.train_and_evaluate(checkpoint_path=args.checkpoint_path)\n   File \"/home/naplava/venv/lib/python3.6/site-packages/opennmt/runner.py\", line 283, in train_and_evaluate\n     tf.estimator.train_and_evaluate(estimator, train_spec, eval_spec)\n   File \"/home/naplava/venv/lib/python3.6/site-packages/tensorflow/python/estimator/training.py\", line 471, in train_and_evaluate\n     return executor.run()\n   File \"/home/naplava/venv/lib/python3.6/site-packages/tensorflow/python/estimator/training.py\", line 610, in run\n     return self.run_local()\n   File \"/home/naplava/venv/lib/python3.6/site-packages/tensorflow/python/estimator/training.py\", line 711, in run_local\n     saving_listeners=saving_listeners)\n   File \"/home/naplava/venv/lib/python3.6/site-packages/tensorflow/python/estimator/estimator.py\", line 354, in train\n     loss = self._train_model(input_fn, hooks, saving_listeners)\n   File \"/home/naplava/venv/lib/python3.6/site-packages/tensorflow/python/estimator/estimator.py\", line 1207, in _train_model\n     return self._train_model_default(input_fn, hooks, saving_listeners)\n   File \"/home/naplava/venv/lib/python3.6/site-packages/tensorflow/python/estimator/estimator.py\", line 1241, in _train_model_default\n     saving_listeners)\n   File \"/home/naplava/venv/lib/python3.6/site-packages/tensorflow/python/estimator/estimator.py\", line 1471, in _train_with_estimator_spec\n     _, loss = mon_sess.run([estimator_spec.train_op, estimator_spec.loss])\n   File \"/home/naplava/venv/lib/python3.6/site-packages/tensorflow/python/training/monitored_session.py\", line 671, in run\n     run_metadata=run_metadata)\n   File \"/home/naplava/venv/lib/python3.6/site-packages/tensorflow/python/training/monitored_session.py\", line 1156, in run\n     run_metadata=run_metadata)\n   File \"/home/naplava/venv/lib/python3.6/site-packages/tensorflow/python/training/monitored_session.py\", line 1255, in run\n     raise six.reraise(*original_exc_info)\n   File \"/home/naplava/venv/lib/python3.6/site-packages/six.py\", line 693, in reraise\n     raise value\n   File \"/home/naplava/venv/lib/python3.6/site-packages/tensorflow/python/training/monitored_session.py\", line 1240, in run\n     return self._sess.run(*args, **kwargs)\n   File \"/home/naplava/venv/lib/python3.6/site-packages/tensorflow/python/training/monitored_session.py\", line 1320, in run\n     run_metadata=run_metadata))\n   File \"/home/naplava/venv/lib/python3.6/site-packages/tensorflow/python/training/basic_session_run_hooks.py\", line 582, in after_run\n     if self._save(run_context.session, global_step):\n   File \"/home/naplava/venv/lib/python3.6/site-packages/tensorflow/python/training/basic_session_run_hooks.py\", line 607, in _save\n     if l.after_save(session, step):\n   File \"/home/naplava/venv/lib/python3.6/site-packages/tensorflow/python/estimator/training.py\", line 517, in after_save\n     self._evaluate(global_step_value)  # updates self.eval_result\n   File \"/home/naplava/venv/lib/python3.6/site-packages/tensorflow/python/estimator/training.py\", line 537, in _evaluate\n     self._evaluator.evaluate_and_export())\n   File \"/home/naplava/venv/lib/python3.6/site-packages/tensorflow/python/estimator/training.py\", line 924, in evaluate_and_export\n     is_the_final_export)\n   File \"/home/naplava/venv/lib/python3.6/site-packages/tensorflow/python/estimator/training.py\", line 957, in _export_eval_result\n     is_the_final_export=is_the_final_export))\n   File \"/home/naplava/venv/lib/python3.6/site-packages/tensorflow/python/estimator/exporter.py\", line 298, in export\n     full_event_file_pattern)\n   File \"/home/naplava/venv/lib/python3.6/site-packages/tensorflow/python/estimator/exporter.py\", line 365, in _get_best_eval_result\n     best_eval_result, event_eval_result):\n   File \"/home/naplava/venv/lib/python3.6/site-packages/tensorflow/python/estimator/exporter.py\", line 150, in _loss_smaller\n     'best_eval_result cannot be empty or no loss is found in it.')\n ValueError: best_eval_result cannot be empty or no loss is found in it.\n </denchmark-code>\n \n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "arahusky", "commentT": "2019-02-13T08:02:04Z", "comment_text": "\n \t\tHi,\n This appears to be a recurrent TensorFlow bug. The workaround is the change or disable the model exporter:\n eval:\n   exporters: last\n or:\n eval:\n   exporters: null\n I will push a fix to change the default value which seems to cause issues for some users.\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "arahusky", "commentT": "2019-02-13T08:37:35Z", "comment_text": "\n \t\tI pushed the change in version 1.19.1.\n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "arahusky", "commentT": "2019-05-29T12:17:45Z", "comment_text": "\n \t\t\n I pushed the change in version 1.19.1.\n \n I also wonder how to deal with this problem. I think OpenNMT can save the best top N model rather than the last models.\n \t\t"}, "comments_3": {"comment_id": 4, "comment_author": "arahusky", "commentT": "2019-05-29T12:42:45Z", "comment_text": "\n \t\tDid you try a newer TensorFlow version?\n \t\t"}, "comments_4": {"comment_id": 5, "comment_author": "arahusky", "commentT": "2019-05-29T14:08:47Z", "comment_text": "\n \t\t\n Did you try a newer TensorFlow version?\n \n My tensorflow is 1.13.1\n \t\t"}, "comments_5": {"comment_id": 6, "comment_author": "arahusky", "commentT": "2019-05-29T15:16:44Z", "comment_text": "\n \t\tIt seems to be interfering with external_evaluators: BLEU. Will try to find a workaround.\n \t\t"}, "comments_6": {"comment_id": 7, "comment_author": "arahusky", "commentT": "2019-05-30T03:10:40Z", "comment_text": "\n \t\t\n It seems to be interfering with external_evaluators: BLEU. Will try to find a workaround.\n \n Thanks for you reply.\n \t\t"}, "comments_7": {"comment_id": 8, "comment_author": "arahusky", "commentT": "2019-05-30T10:02:04Z", "comment_text": "\n \t\tI think <denchmark-link:https://github.com/OpenNMT/OpenNMT-tf/pull/446>#446</denchmark-link>\n  should do it for new trainings.\n \t\t"}}}, "commit": {"commit_id": "0e0f2c8087f72df7cd04b80039e56bc5823830f5", "commit_author": "Guillaume Klein", "commitT": "2019-05-30 11:19:05+02:00", "commit_complexity": {"commit_NLOC": "None", "commit_CCN": "None", "commit_Nprams": "None"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "CHANGELOG.md", "file_new_name": "CHANGELOG.md", "file_complexity": {"file_NLOC": "None", "file_CCN": "None", "file_NToken": "None"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "24", "deleted_lines": null}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "opennmt\\runner.py", "file_new_name": "opennmt\\runner.py", "file_complexity": {"file_NLOC": "476", "file_CCN": "76", "file_NToken": "3487"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "188", "deleted_lines": "188", "method_info": {"method_name": "_make_eval_prediction_hooks_fn", "method_params": "self", "method_startline": "176", "method_endline": "197", "method_complexity": {"method_NLOC": "22", "method_CCN": "6", "method_NToken": "177", "method_nesting_level": "1"}}}}}}}}