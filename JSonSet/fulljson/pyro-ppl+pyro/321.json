{"BR": {"BR_id": "321", "BR_author": "null-a", "BRopenT": "2017-10-23T15:17:14Z", "BRcloseT": "2017-10-27T02:22:06Z", "BR_text": {"BRsummary": "Incorrect result from Delta's batch_log_pdf", "BRdescription": "\n It looks like there may be a bug in Delta's batch_log_pdf method. When the value we're computing the log prob of doesn't match the parameter I expect batch_log_pdf to return -inf but it doesn't. For example:\n <denchmark-code>x = Variable(torch.Tensor([[1.0]]))\n y = Variable(torch.Tensor([[2.0]]))\n \n # This is OK, it returns zero as expected:\n print(Delta(x).batch_log_pdf(x))\n \n # Here I expect -inf, but get 2.5500e+08\n print(Delta(x).batch_log_pdf(y))\n </denchmark-code>\n \n log_pdf works as expected.\n (This isn't high priority for me.)\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "null-a", "commentT": "2017-10-23T17:21:53Z", "comment_text": "\n \t\tThanks for pointing it out. Added to <denchmark-link:https://github.com/pyro-ppl/pyro/issues/177>#177</denchmark-link>\n .\n \t\t"}}}, "commit": {"commit_id": "8f3c817f8a822ed5974d921da2a516c97bbbc2de", "commit_author": "Neeraj Pradhan", "commitT": "2017-10-26 19:22:06-07:00", "commit_complexity": {"commit_NLOC": "0.0", "commit_CCN": "0.0", "commit_Nprams": "1.0"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "pyro\\distributions\\__init__.py", "file_new_name": "pyro\\distributions\\__init__.py", "file_complexity": {"file_NLOC": "30", "file_CCN": "0", "file_NToken": "210"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "26", "deleted_lines": "26"}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 12, "file_old_name": "pyro\\distributions\\delta.py", "file_new_name": "pyro\\distributions\\delta.py", "file_complexity": {"file_NLOC": "39", "file_CCN": "13", "file_NToken": "308"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "36,37,38", "deleted_lines": "38", "method_info": {"method_name": "event_shape", "method_params": "self", "method_startline": "36", "method_endline": "38", "method_complexity": {"method_NLOC": "3", "method_CCN": "1", "method_NToken": "21", "method_nesting_level": "1"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "29,30,31,32,33,34,35,36", "deleted_lines": "27,33,34,35", "method_info": {"method_name": "__init__", "method_params": "self,v,batch_size,args,kwargs", "method_startline": "27", "method_endline": "36", "method_complexity": {"method_NLOC": "6", "method_CCN": "4", "method_NToken": "76", "method_nesting_level": "1"}}}, "hunk_2": {"Ismethod": 1, "added_lines": "29,30,31,32,33,34", "deleted_lines": "33,34", "method_info": {"method_name": "batch_shape", "method_params": "self,x", "method_startline": "29", "method_endline": "34", "method_complexity": {"method_NLOC": "6", "method_CCN": "3", "method_NToken": "56", "method_nesting_level": "1"}}}, "hunk_3": {"Ismethod": 1, "added_lines": "61", "deleted_lines": "52,53,54", "method_info": {"method_name": "support", "method_params": "self,v", "method_startline": "52", "method_endline": "61", "method_complexity": {"method_NLOC": "2", "method_CCN": "1", "method_NToken": "19", "method_nesting_level": "1"}}}, "hunk_4": {"Ismethod": 1, "added_lines": "17,23,24,25,26", "deleted_lines": "17,18,19,20,21,22,23,24,25,26,27", "method_info": {"method_name": "__init__", "method_params": "self,v,batch_size,args,kwargs", "method_startline": "17", "method_endline": "27", "method_complexity": {"method_NLOC": "7", "method_CCN": "4", "method_NToken": "90", "method_nesting_level": "1"}}}, "hunk_5": {"Ismethod": 1, "added_lines": "38,39,40,41", "deleted_lines": "38,39,40,41,42", "method_info": {"method_name": "sample", "method_params": "self,v", "method_startline": "38", "method_endline": "42", "method_complexity": {"method_NLOC": "5", "method_CCN": "2", "method_NToken": "32", "method_nesting_level": "1"}}}, "hunk_6": {"Ismethod": 1, "added_lines": "50", "deleted_lines": "50,51,52,53,54", "method_info": {"method_name": "log_pdf", "method_params": "self,x,v,args,kwargs", "method_startline": "50", "method_endline": "54", "method_complexity": {"method_NLOC": "5", "method_CCN": "2", "method_NToken": "86", "method_nesting_level": "1"}}}, "hunk_7": {"Ismethod": 1, "added_lines": "44,46,47,48", "deleted_lines": "44,45,46,47,48", "method_info": {"method_name": "batch_log_pdf", "method_params": "self,x,v,batch_size", "method_startline": "44", "method_endline": "48", "method_complexity": {"method_NLOC": "5", "method_CCN": "2", "method_NToken": "69", "method_nesting_level": "1"}}}, "hunk_8": {"Ismethod": 1, "added_lines": "46,47,48,49,50", "deleted_lines": "46,47,48,50", "method_info": {"method_name": "batch_log_pdf", "method_params": "self,x", "method_startline": "46", "method_endline": "50", "method_complexity": {"method_NLOC": "5", "method_CCN": "2", "method_NToken": "58", "method_nesting_level": "1"}}}, "hunk_9": {"Ismethod": 1, "added_lines": "43,44", "deleted_lines": "44", "method_info": {"method_name": "sample", "method_params": "self", "method_startline": "43", "method_endline": "44", "method_complexity": {"method_NLOC": "2", "method_CCN": "1", "method_NToken": "9", "method_nesting_level": "1"}}}, "hunk_10": {"Ismethod": 1, "added_lines": "17,23,24,25", "deleted_lines": "17,18,19,20,21,22,23,24,25", "method_info": {"method_name": "_sanitize_input", "method_params": "self,v", "method_startline": "17", "method_endline": "25", "method_complexity": {"method_NLOC": "7", "method_CCN": "3", "method_NToken": "34", "method_nesting_level": "1"}}}, "hunk_11": {"Ismethod": 1, "added_lines": "40,41", "deleted_lines": "40,41", "method_info": {"method_name": "shape", "method_params": "self,x", "method_startline": "40", "method_endline": "41", "method_complexity": {"method_NLOC": "2", "method_CCN": "1", "method_NToken": "22", "method_nesting_level": "1"}}}}}, "file_2": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "tests\\distributions\\test_delta.py", "file_new_name": "tests\\distributions\\test_delta.py", "file_complexity": {"file_NLOC": "37", "file_CCN": "6", "file_NToken": "439"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "27,29,30", "deleted_lines": "26", "method_info": {"method_name": "test_batch_log_pdf", "method_params": "self", "method_startline": "26", "method_endline": "30", "method_complexity": {"method_NLOC": "5", "method_CCN": "1", "method_NToken": "70", "method_nesting_level": "1"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "14,15", "deleted_lines": "14", "method_info": {"method_name": "setUp", "method_params": "self", "method_startline": "10", "method_endline": "20", "method_complexity": {"method_NLOC": "11", "method_CCN": "1", "method_NToken": "165", "method_nesting_level": "1"}}}}}}}}