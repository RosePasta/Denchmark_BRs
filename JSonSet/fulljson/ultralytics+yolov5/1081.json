{"BR": {"BR_id": "1081", "BR_author": "Nigysty", "BRopenT": "2020-10-04T06:34:36Z", "BRcloseT": "2020-11-16T15:34:08Z", "BR_text": {"BRsummary": "Training errors on ECS", "BRdescription": "\n Hi! sir, Sorry to waste your time\u3002 I got a problem.\n <denchmark-h:h1>Environment</denchmark-h>\n \n \n OS: [e.g. Ubuntu]\n GPU [e.g. 2080 Ti]\n \n When i training my datasets on ECS,\n my training cimmond:\n python train.py --img 640 --batch 16 --epochs 300 --data ../mask/data.yaml --cfg models/yolov5s.yaml --weights ''\n i got errors:\n Traceback (most recent call last):\n File \"train.py\", line 456, in \n train(hyp, opt, device, tb_writer)\n File \"train.py\", line 186, in train\n plot_labels(labels, save_dir=log_dir)\n File \"/home/yolov5/utils/general.py\", line 1179, in plot_labels\n fig, ax = plt.subplots(2, 2, figsize=(8, 8), tight_layout=True)\n File \"/root/miniconda3/envs/myconda/lib/python3.7/site-packages/matplotlib/pyplot.py\", line 1177, in subplots\n fig = figure(**fig_kw)\n File \"/root/miniconda3/envs/myconda/lib/python3.7/site-packages/matplotlib/pyplot.py\", line 546, in figure\n **kwargs)\n File \"/root/miniconda3/envs/myconda/lib/python3.7/site-packages/matplotlib/backend_bases.py\", line 3358, in new_figure_manager\n return cls.new_figure_manager_given_figure(num, fig)\n File \"/root/miniconda3/envs/myconda/lib/python3.7/site-packages/matplotlib/backends/_backend_tk.py\", line 888, in new_figure_manager_given_figure\n window = tk.Tk(className=\"matplotlib\")\n File \"/root/miniconda3/envs/myconda/lib/python3.7/tkinter/init.py\", line 2023, in init\n self.tk = _tkinter.create(screenName, baseName, className, interactive, wantobjects, useTk, sync, use)\n _tkinter.TclError: couldn't connect to display \":1\"\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "Nigysty", "commentT": "2020-10-04T06:35:14Z", "comment_text": "\n \t\tHello <denchmark-link:https://github.com/Nigysty>@Nigysty</denchmark-link>\n , thank you for your interest in our work! Please visit our <denchmark-link:https://github.com/ultralytics/yolov5/wiki/Train-Custom-Data>Custom Training Tutorial</denchmark-link>\n  to get started, and see our <denchmark-link:https://github.com/ultralytics/yolov5/blob/master/tutorial.ipynb>Jupyter Notebook</denchmark-link>\n  <denchmark-link:https://colab.research.google.com/github/ultralytics/yolov5/blob/master/tutorial.ipynb></denchmark-link>\n , <denchmark-link:https://hub.docker.com/r/ultralytics/yolov5>Docker Image</denchmark-link>\n , and <denchmark-link:https://github.com/ultralytics/yolov5/wiki/GCP-Quickstart>Google Cloud Quickstart Guide</denchmark-link>\n  for example environments.\n If this is a bug report, please provide screenshots and minimum viable code to reproduce your issue, otherwise we can not help you.\n If this is a custom model or data training question, please note Ultralytics does not provide free personal support. As a leader in vision ML and AI, we do offer professional consulting, from simple expert advice up to delivery of fully customized, end-to-end production solutions for our clients, such as:\n \n Cloud-based AI systems operating on hundreds of HD video streams in realtime.\n Edge AI integrated into custom iOS and Android apps for realtime 30 FPS video inference.\n Custom data training, hyperparameter evolution, and model exportation to any destination.\n \n For more information please visit <denchmark-link:https://www.ultralytics.com>https://www.ultralytics.com</denchmark-link>\n .\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "Nigysty", "commentT": "2020-10-04T23:40:48Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/Nigysty>@Nigysty</denchmark-link>\n  it appears you may have environment problems. Please ensure you meet all dependency requirements if you are attempting to run YOLOv5 locally.  If in doubt, create a new virtual Python 3.8 environment, clone the latest repo (), and  again. We also highly recommend using one of our verified environments below.\n <denchmark-h:h2>Requirements</denchmark-h>\n \n  or later with all <denchmark-link:https://github.com/ultralytics/yolov5/blob/master/requirements.txt>requirements.txt</denchmark-link>\n  dependencies installed, including . To install run:\n $ pip install -r requirements.txt\n <denchmark-h:h2>Environments</denchmark-h>\n \n YOLOv5 may be run in any of the following up-to-date verified environments (with all dependencies including <denchmark-link:https://developer.nvidia.com/cuda>CUDA</denchmark-link>\n /<denchmark-link:https://developer.nvidia.com/cudnn>CUDNN</denchmark-link>\n , <denchmark-link:https://www.python.org/>Python</denchmark-link>\n  and <denchmark-link:https://pytorch.org/>PyTorch</denchmark-link>\n  preinstalled):\n \n Google Colab Notebook with free GPU: \n Kaggle Notebook with free GPU: https://www.kaggle.com/ultralytics/yolov5\n Google Cloud Deep Learning VM. See GCP Quickstart Guide\n Docker Image https://hub.docker.com/r/ultralytics/yolov5. See Docker Quickstart Guide \n \n <denchmark-h:h2>Status</denchmark-h>\n \n <denchmark-link:https://github.com/ultralytics/yolov5/workflows/CI%20CPU%20testing/badge.svg></denchmark-link>\n \n If this badge is green, all <denchmark-link:https://github.com/ultralytics/yolov5/actions>YOLOv5 GitHub Actions</denchmark-link>\n  Continuous Integration (CI) tests are passing. These tests evaluate proper operation of basic YOLOv5 functionality, including training (<denchmark-link:https://github.com/ultralytics/yolov5/blob/master/train.py>train.py</denchmark-link>\n ), testing (<denchmark-link:https://github.com/ultralytics/yolov5/blob/master/test.py>test.py</denchmark-link>\n ), inference (<denchmark-link:https://github.com/ultralytics/yolov5/blob/master/detect.py>detect.py</denchmark-link>\n ) and export (<denchmark-link:https://github.com/ultralytics/yolov5/blob/master/models/export.py>export.py</denchmark-link>\n ) on MacOS, Windows, and Ubuntu.\n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "Nigysty", "commentT": "2020-10-31T14:47:48Z", "comment_text": "\n \t\tYou can solve this problem by adding 'matplotlib.use('Agg')' to general.py\n import matplotlib\n matplotlib.use('Agg')\n import matplotlib.pyplot as plt\n \t\t"}, "comments_3": {"comment_id": 4, "comment_author": "Nigysty", "commentT": "2020-10-31T15:11:28Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/AaronMaYue>@AaronMaYue</denchmark-link>\n  is this something that should be considered for general use, i.e. suitable for a PR?\n \t\t"}, "comments_4": {"comment_id": 5, "comment_author": "Nigysty", "commentT": "2020-11-01T16:46:15Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/glenn-jocher>@glenn-jocher</denchmark-link>\n \n I run a service on Linux that doesn't require display, and I've had the same error, which I think is a matplotlib backend problem.\n Setting matplotlib.use('agg') forces you not to interactively view the displayed images, but to save them to disk for later viewing.\n \t\t"}, "comments_5": {"comment_id": 6, "comment_author": "Nigysty", "commentT": "2020-11-01T18:32:53Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/AaronMaYue>@AaronMaYue</denchmark-link>\n  ah I see. For the most part the intention is always to save them to disk for later viewing rather than for realtime matplotlib views.\n Would there be any other negative impacts to setting matplotlib.use('agg') as default?\n \t\t"}, "comments_6": {"comment_id": 7, "comment_author": "Nigysty", "commentT": "2020-11-16T15:30:49Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/AaronMaYue>@AaronMaYue</denchmark-link>\n  <denchmark-link:https://github.com/Nigysty>@Nigysty</denchmark-link>\n  I believe PR <denchmark-link:https://github.com/ultralytics/yolov5/pull/1413>#1413</denchmark-link>\n  should resolve this issue. Let me know if this works and if you have any other issues. Thanks again for the feedback!\n \t\t"}}}, "commit": {"commit_id": "92c9b72832a878438f37f4cad223f63de0b55786", "commit_author": "Glenn Jocher", "commitT": "2020-11-16 16:34:07+01:00", "commit_complexity": {"commit_NLOC": "None", "commit_CCN": "None", "commit_Nprams": "None"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "utils\\plots.py", "file_new_name": "utils\\plots.py", "file_complexity": {"file_NLOC": "284", "file_CCN": "66", "file_NToken": "3746"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "22,23,24", "deleted_lines": null}}}}}}