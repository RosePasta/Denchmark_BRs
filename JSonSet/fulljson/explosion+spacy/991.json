{"BR": {"BR_id": "991", "BR_author": "Tpt", "BRopenT": "2017-04-19T09:43:05Z", "BRcloseT": "2017-04-19T09:50:42Z", "BR_text": {"BRsummary": "\"write() argument 1 must be unicode, not str\" with spacy convert on Python2", "BRdescription": "\n When trying to convert UD French conllu file with Spacy 1.8 using Python 2.7 I get the following error:\n <denchmark-code>% python -m spacy convert UD_French/fr-ud-dev.conllu UD_French/fr-ud-morph-dev --morphology\n Traceback (most recent call last):\n   File \"/usr/lib/python2.7/runpy.py\", line 174, in _run_module_as_main\n     \"__main__\", fname, loader, pkg_name)\n   File \"/usr/lib/python2.7/runpy.py\", line 72, in _run_code\n     exec code in run_globals\n   File \"lib/python2.7/site-packages/spacy/__main__.py\", line 133, in <module>\n     plac.Interpreter.call(CLI)\n   File \"lib/python2.7/site-packages/plac_ext.py\", line 1142, in call\n     print(out)\n   File \"lib/python2.7/site-packages/plac_ext.py\", line 914, in __exit__\n     self.close(exctype, exc, tb)\n   File \"lib/python2.7/site-packages/plac_ext.py\", line 952, in close\n     self._interpreter.throw(exctype, exc, tb)\n   File \"lib/python2.7/site-packages/plac_ext.py\", line 964, in _make_interpreter\n     arglist = yield task\n   File \"lib/python2.7/site-packages/plac_ext.py\", line 1139, in call\n     raise_(task.etype, task.exc, task.tb)\n   File \"lib/python2.7/site-packages/plac_ext.py\", line 380, in _wrap\n     for value in genobj:\n   File \"lib/python2.7/site-packages/plac_ext.py\", line 95, in gen_exc\n     raise_(etype, exc, tb)\n   File \"lib/python2.7/site-packages/plac_ext.py\", line 966, in _make_interpreter\n     cmd, result = self.parser.consume(arglist)\n   File \"lib/python2.7/site-packages/plac_core.py\", line 207, in consume\n     return cmd, self.func(*(args + varargs + extraopts), **kwargs)\n   File \"lib/python2.7/site-packages/spacy/__main__.py\", line 121, in convert\n     cli_convert(input_file, output_dir, n_sents, morphology)\n   File \"lib/python2.7/site-packages/spacy/cli/convert.py\", line 25, in convert\n     CONVERTERS[file_ext](input_path, output_path, *args)\n   File \"lib/python2.7/site-packages/spacy/cli/converters/conllu2json.py\", line 32, in conllu2json\n     json.dump(docs, output_file.open('w', encoding='utf-8'), indent=2)\n   File \"/usr/lib/python2.7/json/__init__.py\", line 190, in dump\n     fp.write(chunk)\n TypeError: write() argument 1 must be unicode, not str\n \n </denchmark-code>\n \n <denchmark-h:h2>Your Environment</denchmark-h>\n \n \n Python version: 2.7.12\n Platform: Linux-4.4.0-36-generic-x86_64-with-Ubuntu-16.04-xenial\n spaCy version: 1.8.0\n Installed models:\n \n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "Tpt", "commentT": "2017-04-19T09:48:39Z", "comment_text": "\n \t\tThanks for the report \u2013 I think the converter is still mising use the new json_dumps replacement from spacy.compat for Python 2/3 compatibility.\n Fixing!\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "Tpt", "commentT": "2018-05-08T23:38:45Z", "comment_text": "\n \t\tThis thread has been automatically locked since there has not been any recent activity after it was closed. Please open a new issue for related bugs.\n \t\t"}}}, "commit": {"commit_id": "48da244058eac217aed80d59583fb77cc276bd96", "commit_author": "ines", "commitT": "2017-04-19 11:50:36+02:00", "commit_complexity": {"commit_NLOC": "0.0", "commit_CCN": "1.0", "commit_Nprams": "0.0"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "spacy\\cli\\converters\\conllu2json.py", "file_new_name": "spacy\\cli\\converters\\conllu2json.py", "file_complexity": {"file_NLOC": "70", "file_CCN": "20", "file_NToken": "557"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "33,34", "deleted_lines": "32", "method_info": {"method_name": "conllu2json", "method_params": "input_path,output_path,n_sents,use_morphology", "method_startline": "9", "method_endline": "36", "method_complexity": {"method_NLOC": "17", "method_CCN": "3", "method_NToken": "162", "method_nesting_level": "0"}}}}}}}}