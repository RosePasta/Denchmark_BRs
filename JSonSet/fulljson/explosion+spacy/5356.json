{"BR": {"BR_id": "5356", "BR_author": "wizzwizz4", "BRopenT": "2020-04-26T21:15:49Z", "BRcloseT": "2020-04-27T14:51:28Z", "BR_text": {"BRsummary": "Span.similarity(Token) triggers TypeError", "BRdescription": "\n <denchmark-h:h2>How to reproduce the behaviour</denchmark-h>\n \n >>> import spacy\n >>> nlp = spacy.load(\"en_core_web_md\")\n >>> a = nlp(\"hi\")[0]\n >>> b = nlp(\"hello you there\")[1:]\n >>> a.similarity(b)\n 0.38044035\n >>> b.similarity(a)\n Traceback (most recent call last):\n   File \"<stdin>\", line 1, in <module>\n   File \"span.pyx\", line 329, in spacy.tokens.span.Span.similarity\n TypeError: 'spacy.tokens.token.Token' object is not subscriptable\n <denchmark-h:h2>Info about spaCy</denchmark-h>\n \n \n spaCy version: 2.2.4\n Platform: Linux-5.2.0-3-amd64-x86_64-with-debian-10.3\n Python version: 3.7.3\n \n <denchmark-h:h2>Notes</denchmark-h>\n \n There are 16 different possibilities here; it's possible some of them might've slipped through the test suite. I recommend adding some more sanity checks.\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "wizzwizz4", "commentT": "2020-04-27T09:40:58Z", "comment_text": "\n \t\tAh, we'd fixed this on develop and just need to backport it. Thanks for the report!\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "wizzwizz4", "commentT": "2020-04-27T14:52:03Z", "comment_text": "\n \t\tWill be fixed from 2.3 onwards !\n \t\t"}}}, "commit": {"commit_id": "f8ac5b9f563050472aedc719950b4888c65ca4cc", "commit_author": "adrianeboyd", "commitT": "2020-04-27 16:51:27+02:00", "commit_complexity": {"commit_NLOC": "1.0", "commit_CCN": "1.0", "commit_Nprams": "1.0"}, "changed_files": {"file_0": {"file_change_type": "ADD", "file_Nmethod": 0, "file_old_name": "None", "file_new_name": "spacy\\tests\\regression\\test_issue5152.py", "file_complexity": {"file_NLOC": "13", "file_CCN": "1", "file_NToken": "99"}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "spacy\\tokens\\doc.pyx", "file_new_name": "spacy\\tokens\\doc.pyx", "file_complexity": {"file_NLOC": "None", "file_CCN": "None", "file_NToken": "None"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "390,391,392,393,394,395,396,397", "deleted_lines": "390,391,392,393,394,395,396"}}}, "file_2": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "spacy\\tokens\\span.pyx", "file_new_name": "spacy\\tokens\\span.pyx", "file_complexity": {"file_NLOC": "None", "file_CCN": "None", "file_NToken": "None"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "327,328,331,333", "deleted_lines": "327,331"}}}}}}