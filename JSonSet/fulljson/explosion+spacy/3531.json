{"BR": {"BR_id": "3531", "BR_author": "paulrinckens", "BRopenT": "2019-04-02T13:21:24Z", "BRcloseT": "2019-04-03T08:13:24Z", "BR_text": {"BRsummary": "Displacy producing KeyError: 'settings'", "BRdescription": "\n <denchmark-h:h2>How to reproduce the behaviour</denchmark-h>\n \n Running the example from the docs for manual entity visualization:\n from spacy import displacy\n \n ex = [{\"text\": \"But Google is starting from behind.\",\n        \"ents\": [{\"start\": 4, \"end\": 10, \"label\": \"ORG\"}],\n        \"title\": None}]\n html = displacy.render(ex, style=\"ent\", manual=True)\n <denchmark-h:h2>Error</denchmark-h>\n \n <denchmark-code>line 52, in render\n     _html[\"parsed\"] = renderer.render(parsed, page=page, minify=minify).strip()\n \n line 257, in render\n     self.direction = p[\"settings\"].get(\"direction\", DEFAULT_DIR)\n KeyError: 'settings'\n </denchmark-code>\n \n <denchmark-h:h2>Info about spaCy</denchmark-h>\n \n \n spaCy version: 2.1.3\n Platform: Darwin-18.2.0-x86_64-i386-64bit\n Python version: 3.7.1\n \n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "paulrinckens", "commentT": "2019-04-02T13:51:26Z", "comment_text": "\n \t\tThanks for the report! The \"settings\" were added in v2.1 to allow passing through additional config (like the writing direction for RTL languages) \u2013 but it seems like the rendering logic expects that \"settings\" always exists, which it probably shouldn't.\n Edit: As a workaround, you can just add \"settings\": {} to the dict for now.\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "paulrinckens", "commentT": "2019-05-03T09:11:05Z", "comment_text": "\n \t\tThis thread has been automatically locked since there has not been any recent activity after it was closed. Please open a new issue for related bugs.\n \t\t"}}}, "commit": {"commit_id": "6a4575a56c5e02b62be55fd39fd24b371821aea9", "commit_author": "Ines Montani", "commitT": "2019-04-03 10:13:16+02:00", "commit_complexity": {"commit_NLOC": "0.0", "commit_CCN": "0.9285714285714286", "commit_Nprams": "0.9285714285714286"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "spacy\\displacy\\render.py", "file_new_name": "spacy\\displacy\\render.py", "file_complexity": {"file_NLOC": "206", "file_CCN": "43", "file_NToken": "1667"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "53,54,55", "deleted_lines": "53,54", "method_info": {"method_name": "render", "method_params": "self,parsed,page,minify", "method_startline": "39", "method_endline": "68", "method_complexity": {"method_NLOC": "21", "method_CCN": "6", "method_NToken": "179", "method_nesting_level": "1"}}}}}, "file_1": {"file_change_type": "ADD", "file_Nmethod": 0, "file_old_name": "None", "file_new_name": "spacy\\tests\\regression\\test_issue3531.py", "file_complexity": {"file_NLOC": "28", "file_CCN": "1", "file_NToken": "240"}}}}}