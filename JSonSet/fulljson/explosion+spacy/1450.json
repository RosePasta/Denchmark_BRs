{"BR": {"BR_id": "1450", "BR_author": "jofatmofn", "BRopenT": "2017-10-23T06:42:21Z", "BRcloseT": "2017-10-24T12:31:38Z", "BR_text": {"BRsummary": "One-off error with end index, when OP \"*\" ends the pattern", "BRdescription": "\n <denchmark-link:https://github.com/explosion/spaCy/issues/1148>#1148</denchmark-link>\n \n \n Python version: 2.7.12\n Platform: Linux-4.4.0-91-generic-x86_64-with-Ubuntu-16.04-xenial\n spaCy version: 2.0.0a17\n Models: en_core_web_sm-2.0.0a7\n \n Tried the following code\n <denchmark-code>import spacy\n from spacy.matcher import Matcher\n from spacy.attrs import *\n \n def on_match_1(matcher, doc, id, matches):\n         label, start, end = matches[id]\n         print(label, start, end, doc[start:end])\n \n nlp = spacy.load('en_core_web_sm')\n matcher = Matcher(nlp.vocab)\n matcher.add(\n         \"TSTEND\",\n         on_match_1,\n         [\n                 {TAG: \"JJ\", LOWER: \"new\"},\n                 {TAG: \"NN\", 'OP': \"*\"}\n         ]\n )\n document = nlp(u'Could you create a new ticket for me?')\n matches = matcher(document)\n \n </denchmark-code>\n \n and got the following output\n (8454456681159448349L, 4, 7, new ticket for)\n Expected value of end is 6.\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "jofatmofn", "commentT": "2017-10-24T12:31:31Z", "comment_text": "\n \t\tSorry for closing the previous ticket prematurely, and thanks for following up.\n The patch includes better tests. I doubt we've hit the last matcher bug, but it's definitely getting better. Please keep reporting :)\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "jofatmofn", "commentT": "2018-05-08T13:27:17Z", "comment_text": "\n \t\tThis thread has been automatically locked since there has not been any recent activity after it was closed. Please open a new issue for related bugs.\n \t\t"}}}, "commit": {"commit_id": "4bea65a1a8426bb551854b0a6175b5df1403e27d", "commit_author": "Matthew Honnibal", "commitT": "2017-10-24 14:26:27+02:00", "commit_complexity": {"commit_NLOC": "0.0", "commit_CCN": "1.0", "commit_Nprams": "0.5294117647058824"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "spacy\\matcher.pyx", "file_new_name": "spacy\\matcher.pyx", "file_complexity": {"file_NLOC": "None", "file_CCN": "None", "file_NToken": "None"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "72,124,130,132,137,138,140,144,352,353,354,366,370,374,394,396", "deleted_lines": "128,130,136,140,359,363,386,388"}}}, "file_1": {"file_change_type": "ADD", "file_Nmethod": 0, "file_old_name": "None", "file_new_name": "spacy\\tests\\regression\\test_issue1450.py", "file_complexity": {"file_NLOC": "32", "file_CCN": "3", "file_NToken": "182"}}, "file_2": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "spacy\\tests\\test_matcher.py", "file_new_name": "spacy\\tests\\test_matcher.py", "file_complexity": {"file_NLOC": "193", "file_CCN": "26", "file_NToken": "1713"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236", "deleted_lines": null, "method_info": {"method_name": "test_matcher_end_zero_plus", "method_params": "matcher", "method_startline": "218", "method_endline": "236", "method_complexity": {"method_NLOC": "18", "method_CCN": "1", "method_NToken": "157", "method_nesting_level": "0"}}}}}}}}