{"BR": {"BR_id": "672", "BR_author": "ELind77", "BRopenT": "2016-12-08T22:26:21Z", "BRcloseT": "2016-12-18T21:53:49Z", "BR_text": {"BRsummary": "BUG: token.ent_iob_ is str not unicode", "BRdescription": "\n Spacy version: 1.3.0\n System: Ubuntu 14.04\n Issue:\n The value returned on token.ent_iob_ is a string, not unicode.\n Code:\n The above issue is reproducible with the following:\n import spacy\n nlp = spacy.load('en')\n \n txt = u'''Lorem Ipsum is simply dummy text of the printing and typesetting industry.'''\n \n doc = nlp(txt)\n for tok in doc[:5]:\n     print type(tok.ent_iob_)\n Results in:\n <type 'str'>\n <type 'str'>\n <type 'str'>\n <type 'str'>\n <type 'str'>\n \n Pretty sure this is caused by <denchmark-link:https://github.com/explosion/spaCy/blob/master/spacy/tokens/token.pyx#L474>this line</denchmark-link>\n  in token.pyx.\n Possible solutions are to change that line or import  in that file.  I'm not sure how the project handles strings internally but having all modules use  might not be a terrible idea.\n Just fixing the single line would be easy though.  If I want to submit a PR as small as this do I need to run a bunch of tests or can I just put u in front of each of those letters?  That said, adding some kind of automated test builder to ensure that all properties and return values respect the contracts in the documentation might not be a bad idea.  Alternatively, from what little I know about cython, maybe the properties could get type declarations that would be enforced by the compiler?\n Followup question, is there a page with instructions for contributing?\n -- Eric\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "ELind77", "commentT": "2016-12-10T01:43:24Z", "comment_text": "\n \t\tThanks for the report!\n All modules should definitely have unicode_literals. Good suggestions re the testing, which currently needs to be refactored and improved. I don't know how to add a type declaration to a property in Cython, though. You can only specify return types for cdef and cpdef functions, I believe.\n You can find the contribution guidelines <denchmark-link:https://github.com/explosion/spaCy/blob/master/CONTRIBUTING.md>here</denchmark-link>\n . Thanks again!\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "ELind77", "commentT": "2016-12-18T21:53:49Z", "comment_text": "\n \t\tShould be fixed now.\n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "ELind77", "commentT": "2018-05-09T05:38:53Z", "comment_text": "\n \t\tThis thread has been automatically locked since there has not been any recent activity after it was closed. Please open a new issue for related bugs.\n \t\t"}}}, "commit": {"commit_id": "404019ad2f55d24fdfa8a83980c06d2051e31ac7", "commit_author": "Matthew Honnibal", "commitT": "2016-12-18 22:33:53+01:00", "commit_complexity": {"commit_NLOC": "None", "commit_CCN": "None", "commit_Nprams": "None"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "spacy\\tokens\\token.pyx", "file_new_name": "spacy\\tokens\\token.pyx", "file_complexity": {"file_NLOC": "None", "file_CCN": "None", "file_NToken": "None"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "1,2,3,4", "deleted_lines": null}}}}}}