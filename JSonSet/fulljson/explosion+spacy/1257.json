{"BR": {"BR_id": "1257", "BR_author": "ank-26", "BRopenT": "2017-08-14T14:23:26Z", "BRcloseT": "2017-09-16T09:40:15Z", "BR_text": {"BRsummary": "Compare operator (==) behaves unexpectedly on spacy tokens", "BRdescription": "\n <denchmark-code>nlp = spacy.load(\"en\")\n doc1 = nlp(u\"I am here\")\n doc2 = nlp(u\"Hello\")\n \n doc1[0] == doc2[0]\n True\n </denchmark-code>\n \n In the above snippet, spacy is treating 1st token of both the docs as equal. So, in the below source code the richcmp method it is using index to compare.\n <denchmark-code>def __richcmp__(self, Token other, int op):\n         # http://cython.readthedocs.io/en/latest/src/userguide/special_methods.html\n         my = self.idx\n         their = other.idx if other is not None else None\n </denchmark-code>\n \n <denchmark-h:h2>Environment</denchmark-h>\n \n \n Python version: 2.7.10\n Platform: Darwin-16.0.0-x86_64-i386-64bit\n spaCy version: 1.9.0\n Installed models: en\n \n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "ank-26", "commentT": "2017-08-14T17:19:23Z", "comment_text": "\n \t\tThanks, this must've been in there a long time. If you want to submit a patch for this, the best solution would be to check that other.doc is self\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "ank-26", "commentT": "2017-09-16T09:40:15Z", "comment_text": "\n \t\tFixed :)\n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "ank-26", "commentT": "2018-05-08T16:28:09Z", "comment_text": "\n \t\tThis thread has been automatically locked since there has not been any recent activity after it was closed. Please open a new issue for related bugs.\n \t\t"}}}, "commit": {"commit_id": "d55d6e1cfab6d0380255f7ffb3d7b6791f536054", "commit_author": "Matthew Honnibal", "commitT": "2017-08-19 16:39:32+02:00", "commit_complexity": {"commit_NLOC": "1.0", "commit_CCN": "1.0", "commit_Nprams": "1.0"}, "changed_files": {"file_0": {"file_change_type": "ADD", "file_Nmethod": 0, "file_old_name": "None", "file_new_name": "spacy\\tests\\regression\\test_issue1257.py", "file_complexity": {"file_NLOC": "9", "file_CCN": "1", "file_NToken": "74"}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "spacy\\tokens\\token.pyx", "file_new_name": "spacy\\tokens\\token.pyx", "file_complexity": {"file_NLOC": "None", "file_CCN": "None", "file_NToken": "None"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "65,66,72,73,74,75,81,82,83,84", "deleted_lines": "70,76"}}}}}}