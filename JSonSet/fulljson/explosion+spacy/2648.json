{"BR": {"BR_id": "2648", "BR_author": "neurotroph", "BRopenT": "2018-08-09T09:01:37Z", "BRcloseT": "2018-12-10T15:19:48Z", "BR_text": {"BRsummary": "most_similar() not working as expected (KeyError)", "BRdescription": "\n <denchmark-h:h2>How to reproduce the behaviour</denchmark-h>\n \n Using the en_core_web_lg model, I try to find the most similar word(s) for a given word or word vector:\n <denchmark-code>import spacy\n import numpy as np\n \n nlp = spacy.load(\"en_core_web_lg\")\n tvec = nlp(u\"dog\").vector\n # According to documentation in the source code (https://github.com/explosion/spaCy/blob/3141e04822a8c40e0d64e51a040305ade3f66d8c/spacy/vectors.pyx#L269), an array with one or more vectors should be supplied\n nlp.vocab.vectors.most_similar(np.array([tvec]))\n </denchmark-code>\n \n This yields a KeyError:\n <denchmark-code>Traceback (most recent call last):\n   File \"<stdin>\", line 1, in <module>\n   File \"vectors.pyx\", line 302, in spacy.vectors.Vectors.most_similar\n KeyError: 0\n </denchmark-code>\n \n <denchmark-h:h2>Your Environment</denchmark-h>\n \n \n spaCy version: 2.0.11\n Platform: Windows-10-10.0.16299-SP0\n Python version: 3.6.6\n \n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "neurotroph", "commentT": "2018-08-12T06:59:10Z", "comment_text": "\n \t\tSame problem here :(\n spacy 2.0.11, macOS 10.13.6, python 3.6.6\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "neurotroph", "commentT": "2018-08-24T11:38:21Z", "comment_text": "\n \t\tSame issue \ud83d\ude2d\n spacy 2.0.12, Ubuntu 16.04, python 3.6\n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "neurotroph", "commentT": "2018-12-01T16:35:56Z", "comment_text": "\n \t\tAlso having this issue...\n <denchmark-code>spaCy version      2.0.12         \n Location           /usr/lib/python3.7/site-packages/spacy\n Platform           Linux-4.19.4-arch1-1-ARCH-x86_64-with-arch-18.9-Minimal-ISO-Rolling\n Python version     3.7.1          \n Models             en_core_web_lg \n </denchmark-code>\n \n Tried passing the vector in several ways, and all end up giving an error.\n \t\t"}, "comments_3": {"comment_id": 4, "comment_author": "neurotroph", "commentT": "2018-12-06T15:15:31Z", "comment_text": "\n \t\tThanks for the report, and sorry for the delay getting to this. Would you mind making a pull request with an xfail-ed test? The test should go in spacy/tests/regression.\n \t\t"}, "comments_4": {"comment_id": 5, "comment_author": "neurotroph", "commentT": "2019-01-09T16:12:42Z", "comment_text": "\n \t\tThis thread has been automatically locked since there has not been any recent activity after it was closed. Please open a new issue for related bugs.\n \t\t"}}}, "commit": {"commit_id": "449b889454a17947aa9d93e4c2538aedaef37c4f", "commit_author": "Matthew Honnibal", "commitT": "2018-12-10 16:19:18+01:00", "commit_complexity": {"commit_NLOC": "None", "commit_CCN": "None", "commit_Nprams": "None"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "spacy\\vectors.pyx", "file_new_name": "spacy\\vectors.pyx", "file_complexity": {"file_NLOC": "None", "file_CCN": "None", "file_NToken": "None"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "298,299", "deleted_lines": "298"}}}}}}