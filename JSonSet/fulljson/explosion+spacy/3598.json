{"BR": {"BR_id": "3598", "BR_author": "fizban99", "BRopenT": "2019-04-16T13:57:48Z", "BRcloseT": "2019-04-22T12:18:38Z", "BR_text": {"BRsummary": "Cannot force displacy.render to return html when in IPython/Spyder", "BRdescription": "\n I am using Spyder, which uses IPython by default, with the limitation that it is not able to render HTML inline. Instead it just displays <IPython.core.display.HTML object> on the console.\n When using displacy.render and even when passing jupyter=False, I just get the above message and I cannot capture the html markup and use it offline.\n <denchmark-link:https://github.com/explosion/spaCy/blob/master/spacy/displacy/__init__.py>Looking at the code </denchmark-link>\n it seems that the render function overrides the value of the parameter if it runs on IPython:\n \n Which means that the example code to generate svg at\n <denchmark-link:https://spacy.io/usage/visualizers?#jupyter>https://spacy.io/usage/visualizers?#jupyter</denchmark-link>\n  does not work for me as is set to  and\n I get \n <denchmark-code>import spacy\n from spacy import displacy\n from pathlib import Path\n \n \n nlp = spacy.load(\"en_core_web_sm\")\n sentences = [u\"This is an example.\", u\"This is another one.\"]\n for sent in sentences:\n     doc = nlp(sent)\n     svg = displacy.render(doc, style=\"dep\")\n     file_name = '-'.join([w.text for w in doc if not w.is_punct]) + \".svg\"\n     output_path = Path(\"/images/\" + file_name)\n     output_path.open(\"w\", encoding=\"utf-8\").write(svg)\n </denchmark-code>\n \n \n spaCy version: 2.1.3\n Platform: Windows-10-10.0.16299-SP0\n Python version: 3.7.1\n \n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "fizban99", "commentT": "2019-04-17T09:10:04Z", "comment_text": "\n \t\tme too. Have you solved this problem ?\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "fizban99", "commentT": "2019-04-17T09:15:09Z", "comment_text": "\n \t\tThanks for the report and analysis, this makes sense!\n We should probably set jupyter=None by default, and then check something like:\n if jupyter or jupyter is None and is_in_jupyter():\n If you want to test this and submit a PR, that'd be great. Otherwise, I can also take care of this in the next round of bugfixing.\n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "fizban99", "commentT": "2019-05-22T12:33:40Z", "comment_text": "\n \t\tThis thread has been automatically locked since there has not been any recent activity after it was closed. Please open a new issue for related bugs.\n \t\t"}}}, "commit": {"commit_id": "52658c80d5dcc35469d2006317190009e7f43763", "commit_author": "Ines Montani", "commitT": "2019-04-22 14:18:32+02:00", "commit_complexity": {"commit_NLOC": "None", "commit_CCN": "None", "commit_Nprams": "None"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "spacy\\displacy\\__init__.py", "file_new_name": "spacy\\displacy\\__init__.py", "file_complexity": {"file_NLOC": "135", "file_CCN": "27", "file_NToken": "1065"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "22", "deleted_lines": "22", "method_info": {"method_name": "render", "method_params": "docs,style,page,minify,jupyter,options,manual", "method_startline": "21", "method_endline": "22", "method_complexity": {"method_NLOC": "2", "method_CCN": "1", "method_NToken": "28", "method_nesting_level": "0"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "22", "deleted_lines": "22", "method_info": {"method_name": "render", "method_params": "docs,style,page,minify,jupyter,options,manual", "method_startline": "21", "method_endline": "22", "method_complexity": {"method_NLOC": "2", "method_CCN": "1", "method_NToken": "28", "method_nesting_level": "0"}}}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "website\\docs\\api\\top-level.md", "file_new_name": "website\\docs\\api\\top-level.md", "file_complexity": {"file_NLOC": "None", "file_CCN": "None", "file_NToken": "None"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "214,215,216,217,218,219,220,221,222,223", "deleted_lines": "214,215,216,217,218,219,220,221,222,223"}}}}}}