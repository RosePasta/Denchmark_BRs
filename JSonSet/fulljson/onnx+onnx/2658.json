{"BR": {"BR_id": "2658", "BR_author": "DuZzzs", "BRopenT": "2020-03-13T10:32:05Z", "BRcloseT": "2021-01-15T18:47:56Z", "BR_text": {"BRsummary": "Error when building onnx in Ubuntu", "BRdescription": "\n environment\uff1a\n <denchmark-code>Ubuntu 16.04.5 LTS\n python 3.7\n GPU\uff1aGTX 2060\n </denchmark-code>\n \n command:\n <denchmark-code>conda install -c conda-forge protobuf numpy\n conda install pybind11 -c conda-forge\n \n git clone https://github.com/onnx/onnx.git\n cd onnx\n git submodule update --init --recursive\n python setup.py install\n </denchmark-code>\n \n commits : <denchmark-link:https://github.com/onnx/onnx/commit/c2fefcbfa052dd3b602ec825456184d275e91876>c2fefcb</denchmark-link>\n \n Error:\n <denchmark-code>[  8%] Built target onnxifi_loader\n [  8%] Built target onnxifi_dummy\n [  8%] Running C++ protocol buffer compiler on /home/dzws/tensorrt/mxnet/3rdparty/onnx-tensorrt/third_party/onnx/.setuptools-cmake-build/onnx/onnx-ml.proto\n /usr/bin/env: \"python\\r\": No such file or directory\n --mypy_out: protoc-gen-mypy: Plugin failed with status code 127.\n CMakeFiles/gen_onnx_proto.dir/build.make:61: recipe for target 'onnx/onnx-ml.pb.cc' failed\n make[2]: *** [onnx/onnx-ml.pb.cc] Error 1\n CMakeFiles/Makefile2:178: recipe for target 'CMakeFiles/gen_onnx_proto.dir/all' failed\n make[1]: *** [CMakeFiles/gen_onnx_proto.dir/all] Error 2\n make[1]: *** Waiting for unfinished tasks....\n [ 11%] Built target onnxifi_wrapper\n Makefile:129: recipe for target 'all' failed\n make: *** [all] Error 2\n Traceback (most recent call last):\n   File \"setup.py\", line 336, in <module>\n     'backend-test-tools = onnx.backend.test.cmd_tools:main',\n   File \"/home/miniconda3/envs/mxnet_tensorrt/lib/python3.7/site-packages/setuptools/__init__.py\", line 145, in setup\n     return distutils.core.setup(**attrs)\n   File \"/home/miniconda3/envs/mxnet_tensorrt/lib/python3.7/distutils/core.py\", line 148, in setup\n     dist.run_commands()\n   File \"/home/miniconda3/envs/mxnet_tensorrt/lib/python3.7/distutils/dist.py\", line 966, in run_commands\n     self.run_command(cmd)\n   File \"/home/miniconda3/envs/mxnet_tensorrt/lib/python3.7/distutils/dist.py\", line 985, in run_command\n     cmd_obj.run()\n   File \"/home/miniconda3/envs/mxnet_tensorrt/lib/python3.7/site-packages/setuptools/command/install.py\", line 67, in run\n     self.do_egg_install()\n   File \"/home/miniconda3/envs/mxnet_tensorrt/lib/python3.7/site-packages/setuptools/command/install.py\", line 109, in do_egg_install\n     self.run_command('bdist_egg')\n   File \"/home/miniconda3/envs/mxnet_tensorrt/lib/python3.7/distutils/cmd.py\", line 313, in run_command\n     self.distribution.run_command(command)\n   File \"/home/miniconda3/envs/mxnet_tensorrt/lib/python3.7/distutils/dist.py\", line 985, in run_command\n     cmd_obj.run()\n   File \"/home/miniconda3/envs/mxnet_tensorrt/lib/python3.7/site-packages/setuptools/command/bdist_egg.py\", line 172, in run\n     cmd = self.call_command('install_lib', warn_dir=0)\n   File \"/home/miniconda3/envs/mxnet_tensorrt/lib/python3.7/site-packages/setuptools/command/bdist_egg.py\", line 158, in call_command\n     self.run_command(cmdname)\n   File \"/home/miniconda3/envs/mxnet_tensorrt/lib/python3.7/distutils/cmd.py\", line 313, in run_command\n     self.distribution.run_command(command)\n   File \"/home/miniconda3/envs/mxnet_tensorrt/lib/python3.7/distutils/dist.py\", line 985, in run_command\n     cmd_obj.run()\n   File \"/home/miniconda3/envs/mxnet_tensorrt/lib/python3.7/site-packages/setuptools/command/install_lib.py\", line 11, in run\n     self.build()\n   File \"/home/miniconda3/envs/mxnet_tensorrt/lib/python3.7/distutils/command/install_lib.py\", line 105, in build\n     self.run_command('build_py')\n   File \"/home/miniconda3/envs/mxnet_tensorrt/lib/python3.7/distutils/cmd.py\", line 313, in run_command\n     self.distribution.run_command(command)\n   File \"/home/miniconda3/envs/mxnet_tensorrt/lib/python3.7/distutils/dist.py\", line 985, in run_command\n     cmd_obj.run()\n   File \"setup.py\", line 213, in run\n     self.run_command('cmake_build')\n   File \"/home/miniconda3/envs/mxnet_tensorrt/lib/python3.7/distutils/cmd.py\", line 313, in run_command\n     self.distribution.run_command(command)\n   File \"/home/miniconda3/envs/mxnet_tensorrt/lib/python3.7/distutils/dist.py\", line 985, in run_command\n     cmd_obj.run()\n   File \"setup.py\", line 207, in run\n     subprocess.check_call(build_args)\n   File \"/home/miniconda3/envs/mxnet_tensorrt/lib/python3.7/subprocess.py\", line 347, in check_call\n     raise CalledProcessError(retcode, cmd)\n subprocess.CalledProcessError: Command '['/home/visi/miniconda3/envs/mxnet_tensorrt/bin/cmake', '--build', '.', '--', '-j', '4']' returned non-zero exit status 2.\n </denchmark-code>\n \n Also tried:\n <denchmark-code>git clone -b rel-1.7.0 https://github.com/onnx/onnx.git\n </denchmark-code>\n \n Anyone helps\uff1f Thanks.\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "DuZzzs", "commentT": "2020-08-11T20:03:58Z", "comment_text": "\n \t\tsimilar to <denchmark-link:https://github.com/onnx/onnx/issues/1314>#1314</denchmark-link>\n \n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "DuZzzs", "commentT": "2021-01-15T18:47:55Z", "comment_text": "\n \t\tIt should be solved by <denchmark-link:https://github.com/onnx/onnx/pull/2961>#2961</denchmark-link>\n . Please reopen it if you still encounter this issue. Thank you!\n \t\t"}}}, "commit": {"commit_id": "f8a613acd77f63ff558f451ef85bf81454070010", "commit_author": "Chun-Wei Chen", "commitT": "2021-01-13 12:15:18-08:00", "commit_complexity": {"commit_NLOC": "None", "commit_CCN": "None", "commit_Nprams": "None"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "CMakeLists.txt", "file_new_name": "CMakeLists.txt", "file_complexity": {"file_NLOC": "None", "file_CCN": "None", "file_NToken": "None"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "80,81,82,83,84,85,225,243,244,245,246,247,248,249,250", "deleted_lines": "198,199,200,201,202,224,242,243,244,245,246,450,451"}}}, "file_1": {"file_change_type": "ADD", "file_Nmethod": 0, "file_old_name": "None", "file_new_name": "tools\\protoc-gen-mypy.sh.in", "file_complexity": {"file_NLOC": "None", "file_CCN": "None", "file_NToken": "None"}}}}}