{"BR": {"BR_id": "2647", "BR_author": "linkerzhang", "BRopenT": "2020-03-10T02:25:25Z", "BRcloseT": "2020-08-14T18:41:55Z", "BR_text": {"BRsummary": "ONNX InferenceContext implementation triggers segfault failures", "BRdescription": "\n <denchmark-link:https://github.com/onnx/onnx/blob/master/onnx/shape_inference/implementation.h#L91>https://github.com/onnx/onnx/blob/master/onnx/shape_inference/implementation.h#L91</denchmark-link>\n \n ONNX type and shape InferenceContext implementation sets all types as nullptr by default if not manually set, and, current shape inference functions implemented do not check \"nullptr\" accordingly, with these two, using ONNX package to run inference (type and shape) will sometimes have segfault failures (nullptr exception).\n This needs to be fixed by either updating the implementation to make it never have nullptr, or fix all shape inference functions to check that, for example, <denchmark-link:https://github.com/onnx/onnx/blob/master/onnx/defs/generator/defs.cc#L234>https://github.com/onnx/onnx/blob/master/onnx/defs/generator/defs.cc#L234</denchmark-link>\n  needs checking the input type to ensure it's not nullptr.\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "linkerzhang", "commentT": "2020-03-23T23:49:44Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/linkerzhang>@linkerzhang</denchmark-link>\n  are you working on or planning a PR for this?\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "linkerzhang", "commentT": "2020-08-06T22:06:44Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/onnx/onnx/pull/2946>#2946</denchmark-link>\n \n gets rid of a possible segfault issue in\n <denchmark-link:https://github.com/onnx/onnx/blob/master/onnx/defs/generator/defs.cc#L234>https://github.com/onnx/onnx/blob/master/onnx/defs/generator/defs.cc#L234</denchmark-link>\n \n \t\t"}}}, "commit": {"commit_id": "2409b349220e4f824eb8c098666305d5d16c02b2", "commit_author": "Ashwini Khade", "commitT": "2020-08-14 11:39:06-07:00", "commit_complexity": {"commit_NLOC": "0.0", "commit_CCN": "1.0", "commit_Nprams": "1.0"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "onnx\\defs\\math\\defs.cc", "file_new_name": "onnx\\defs\\math\\defs.cc", "file_complexity": {"file_NLOC": "2342", "file_CCN": "70", "file_NToken": "10170"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "1373,2205,2234", "deleted_lines": "1373,2205,2234"}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "onnx\\defs\\math\\old.cc", "file_new_name": "onnx\\defs\\math\\old.cc", "file_complexity": {"file_NLOC": "2475", "file_CCN": "38", "file_NToken": "10458"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "823", "deleted_lines": "823"}}}, "file_2": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "onnx\\defs\\sequence\\defs.cc", "file_new_name": "onnx\\defs\\sequence\\defs.cc", "file_complexity": {"file_NLOC": "571", "file_CCN": "0", "file_NToken": "2607"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "91,92,93,94,95,175,176,177,178,179,180,182,184,200,205,207,254,255,256,257,258,303,304,305,306,307,401,402,403,404,409,411,415,420,442,475,574,575,576,577,578", "deleted_lines": "91,172,174,190,195,197,244,289,383,388,390,394,399,421,454,553,554"}}}, "file_3": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "onnx\\defs\\tensor\\defs.cc", "file_new_name": "onnx\\defs\\tensor\\defs.cc", "file_complexity": {"file_NLOC": "3022", "file_CCN": "4", "file_NToken": "12169"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "2891,2892,2893,2894,2899,2901", "deleted_lines": "2899,2904,2906", "method_info": {"method_name": "ONNX_NAMESPACE::input_x", "method_params": "", "method_startline": "2741", "method_endline": "3274", "method_complexity": {"method_NLOC": "467", "method_CCN": "3", "method_NToken": "2350", "method_nesting_level": "1"}}}}}}}}