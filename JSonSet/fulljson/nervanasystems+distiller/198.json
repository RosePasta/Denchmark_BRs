{"BR": {"BR_id": "198", "BR_author": "tacker-oh", "BRopenT": "2019-03-25T04:28:06Z", "BRcloseT": "2019-04-08T11:46:27Z", "BR_text": {"BRsummary": "Binarization with DoReFa-Net", "BRdescription": "\n This issue is about <denchmark-link:https://github.com/NervanaSystems/distiller/blob/master/distiller/quantization/clipped_linear.py#L139>DorefaParamsBinarizationSTE</denchmark-link>\n .\n <denchmark-link:https://pytorch.org/docs/stable/torch.html#torch.sign>torch.sign()</denchmark-link>\n  returns one of three possible values: {-1, 0, 1} .   I think this isn't binarization.\n <denchmark-link:https://github.com/NervanaSystems/distiller/blob/b8fc508528bd3f3d73da7bd62bafa4a5afc9001a/distiller/quantization/clipped_linear.py#L145>https://github.com/NervanaSystems/distiller/blob/b8fc508528bd3f3d73da7bd62bafa4a5afc9001a/distiller/quantization/clipped_linear.py#L145</denchmark-link>\n \n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "tacker-oh", "commentT": "2019-03-25T08:42:47Z", "comment_text": "\n \t\tYou're correct, this is a bug indeed. When the input is 0 the output should be 1.\n So, could be something like:\n output = torch.where(input == 0, torch.ones_like(input), torch.sign(input)) * E\n If you'd like to try and test this and submit a quick PR that'll be great. Otherwise I'll try to get to it soon.\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "tacker-oh", "commentT": "2019-03-25T09:02:55Z", "comment_text": "\n \t\tAnother option would be:\n output = input.sign() * E\n output[output == 0] = 1\n Not sure if there would be a performance difference between the two.\n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "tacker-oh", "commentT": "2019-03-25T09:49:45Z", "comment_text": "\n \t\tThank you for your quick response.\n Could you wait for a couple of days ?\n \t\t"}}}, "commit": {"commit_id": "87d7c6cea158a5585ea23c254f6f5cfad4c84b5b", "commit_author": "tacker-oh", "commitT": "2019-04-08 14:46:24+03:00", "commit_complexity": {"commit_NLOC": "None", "commit_CCN": "None", "commit_Nprams": "None"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "distiller\\quantization\\clipped_linear.py", "file_new_name": "distiller\\quantization\\clipped_linear.py", "file_complexity": {"file_NLOC": "162", "file_CCN": "33", "file_NToken": "1237"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "146", "deleted_lines": "146", "method_info": {"method_name": "forward", "method_params": "ctx,input,inplace", "method_startline": "142", "method_endline": "147", "method_complexity": {"method_NLOC": "6", "method_CCN": "2", "method_NToken": "59", "method_nesting_level": "1"}}}}}}}}