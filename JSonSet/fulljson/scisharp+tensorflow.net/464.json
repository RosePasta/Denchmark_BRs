{"BR": {"BR_id": "464", "BR_author": "dsyme", "BRopenT": "2019-12-13T17:24:10Z", "BRcloseT": "2019-12-22T14:32:46Z", "BR_text": {"BRsummary": "Calling RegisterGradientFunction too early results in no other gradients being registered", "BRdescription": "\n If you call RegisterGradientFunction before any initialization has happened in TF.NET then the gradient registrations are not scraped from existing assemblies.\n The relevant code is here - the initialization of the gradients table should be forced by RegisterGradientFunction too\n \n \n \n TensorFlow.NET/src/TensorFlowNET.Core/Gradients/ops.gradient_function_mapping.cs\n \n \n          Line 56\n       in\n       75ae2e9\n \n \n \n \n \n \n  gradientFunctions = new Dictionary<string, Func<Operation, Tensor[], Tensor[]>>(); \n \n \n \n \n \n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "dsyme", "commentT": "2019-12-13T17:31:01Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/dsyme>@dsyme</denchmark-link>\n  It's already there: \n \n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "dsyme", "commentT": "2019-12-13T17:48:48Z", "comment_text": "\n \t\tYes but if that line gets executed first then this code doesn't get run :) \n \n \n TensorFlow.NET/src/TensorFlowNET.Core/Gradients/ops.gradient_function_mapping.cs\n \n \n          Line 58\n       in\n       75ae2e9\n \n \n \n \n \n \n  var gradGroups = Assembly.GetExecutingAssembly() \n \n \n \n \n \n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "dsyme", "commentT": "2019-12-13T18:53:49Z", "comment_text": "\n \t\tOh, right. Seems like a serious bug there. Will fix it at weekend.\n \t\t"}, "comments_3": {"comment_id": 4, "comment_author": "dsyme", "commentT": "2019-12-16T12:34:46Z", "comment_text": "\n \t\tThanks!\n \t\t"}}}, "commit": {"commit_id": "991b8702c305555dc8457ed4d6b1f8b3c3d18f74", "commit_author": "Oceania2018", "commitT": "2019-12-22 08:27:12-06:00", "commit_complexity": {"commit_NLOC": "1.0", "commit_CCN": "1.0", "commit_Nprams": "1.0"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 4, "file_old_name": "src\\TensorFlowNET.Core\\Gradients\\ops.gradient_function_mapping.cs", "file_new_name": "src\\TensorFlowNET.Core\\Gradients\\ops.gradient_function_mapping.cs", "file_complexity": {"file_NLOC": "64", "file_CCN": "7", "file_NToken": "399"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "74,75,76,77,78,79", "deleted_lines": null, "method_info": {"method_name": "Tensorflow::ops::RegisterGradientFunction", "method_params": "name,func", "method_startline": "74", "method_endline": "79", "method_complexity": {"method_NLOC": "5", "method_CCN": "1", "method_NToken": "32", "method_nesting_level": "2"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "81,82,83,84,85,86", "deleted_lines": "81", "method_info": {"method_name": "Tensorflow::ops::RegisterNoGradientFunction", "method_params": "name", "method_startline": "81", "method_endline": "86", "method_complexity": {"method_NLOC": "5", "method_CCN": "1", "method_NToken": "18", "method_nesting_level": "2"}}}, "hunk_2": {"Ismethod": 1, "added_lines": "29,42,43,59,60,67", "deleted_lines": "29,30,31,32,33,34,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,65", "method_info": {"method_name": "Tensorflow::ops::RegisterFromAssembly", "method_params": "", "method_startline": "29", "method_endline": "67", "method_complexity": {"method_NLOC": "33", "method_CCN": "2", "method_NToken": "218", "method_nesting_level": "2"}}}, "hunk_3": {"Ismethod": 1, "added_lines": "88,89,90,91,92", "deleted_lines": null, "method_info": {"method_name": "Tensorflow::ops::get_gradient_function", "method_params": "op", "method_startline": "88", "method_endline": "98", "method_complexity": {"method_NLOC": "8", "method_CCN": "3", "method_NToken": "50", "method_nesting_level": "2"}}}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "src\\TensorFlowNET.Core\\TensorFlow.Binding.csproj", "file_new_name": "src\\TensorFlowNET.Core\\TensorFlow.Binding.csproj", "file_complexity": {"file_NLOC": "None", "file_CCN": "None", "file_NToken": "None"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "68", "deleted_lines": "68"}}}}}}