{"BR": {"BR_id": "453", "BR_author": "pepure", "BRopenT": "2019-11-26T14:27:17Z", "BRcloseT": "2019-11-28T16:02:48Z", "BR_text": {"BRsummary": "Save meta to local file have an error when import_meta_graph", "BRdescription": "\n When I freeze ckpt and meta to PB model\uff0cI meet this error \uff0cso I test tf.NET Examples to debug problem\u3002\n Test code as follows\uff1a  <denchmark-link:https://github.com/SciSharp/TensorFlow.NET-Examples/blob/master/src/TensorFlowNET.Examples/ImageProcessing/DigitRecognitionCNN.cs>https://github.com/SciSharp/TensorFlow.NET-Examples/blob/master/src/TensorFlowNET.Examples/ImageProcessing/DigitRecognitionCNN.cs</denchmark-link>\n \n after train finish,  I add some code to save graph and constant into local \"ckpt\" \"meta\" files,like this:\n <denchmark-link:https://user-images.githubusercontent.com/53322892/69641203-bbccf180-109a-11ea-9a50-9ec3165f92e9.png></denchmark-link>\n \n <denchmark-link:https://user-images.githubusercontent.com/53322892/69641230-cc7d6780-109a-11ea-9027-cf11c2758a3b.png></denchmark-link>\n \n then I get these files in debug folder\uff1a\n <denchmark-link:https://user-images.githubusercontent.com/53322892/69641393-18301100-109b-11ea-9c7d-00fd0923cff4.png></denchmark-link>\n \n Then I use \"tf.train.import_meta_graph(\"\\MNIST.meta\");\"  to load meta,some error occurs ,like this:\n <denchmark-link:https://user-images.githubusercontent.com/53322892/69641864-dd7aa880-109b-11ea-971e-4603feb3d3ad.png></denchmark-link>\n \n I test other people's meta files ,all is load OK . So I think maybe \"saver.save(sess,  \"MNIST\");\" code has some bugs . Please help me ,Thank you very much ~\n \t"}, "comments": {}}, "commit": {"commit_id": "b680700dae396dae7600ad2d3ccfcc1cf959a7ca", "commit_author": "Oceania2018", "commitT": "2019-11-28 09:09:50-06:00", "commit_complexity": {"commit_NLOC": "0.5714285714285714", "commit_CCN": "0.0", "commit_Nprams": "0.0"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "src\\TensorFlowNET.Core\\Framework\\meta_graph.cs", "file_new_name": "src\\TensorFlowNET.Core\\Framework\\meta_graph.cs", "file_complexity": {"file_NLOC": "261", "file_CCN": "35", "file_NToken": "1498"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "271,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286", "deleted_lines": null, "method_info": {"method_name": "Tensorflow::meta_graph::add_collection_def", "method_params": "meta_graph_def,key,graph,export_scope", "method_startline": "260", "method_endline": "305", "method_complexity": {"method_NLOC": "43", "method_CCN": "8", "method_NToken": "256", "method_nesting_level": "2"}}}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "src\\TensorFlowNET.Core\\Operations\\Operation.Control.cs", "file_new_name": "src\\TensorFlowNET.Core\\Operations\\Operation.Control.cs", "file_complexity": {"file_NLOC": "38", "file_CCN": "7", "file_NToken": "142"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": null, "deleted_lines": "55,56,57,58", "method_info": {"method_name": "Tensorflow::Operation::_set_control_flow_context", "method_params": "ctx", "method_startline": "53", "method_endline": "60", "method_complexity": {"method_NLOC": "7", "method_CCN": "2", "method_NToken": "22", "method_nesting_level": "2"}}}}}, "file_2": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "src\\TensorFlowNET.Core\\Training\\Saving\\Saver.cs", "file_new_name": "src\\TensorFlowNET.Core\\Training\\Saving\\Saver.cs", "file_complexity": {"file_NLOC": "255", "file_CCN": "39", "file_NToken": "1316"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "174,187,191,194", "deleted_lines": "173,186,187,191,194", "method_info": {"method_name": "Tensorflow::Saver::save", "method_params": "sess,save_path,global_step,latest_filename,meta_graph_suffix,write_meta_graph,write_state,strip_default_attrs,save_debug_info", "method_startline": "162", "method_endline": "209", "method_complexity": {"method_NLOC": "42", "method_CCN": "7", "method_NToken": "239", "method_nesting_level": "2"}}}}}, "file_3": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "src\\TensorFlowNET.Core\\Training\\Saving\\checkpoint_management.py.cs", "file_new_name": "src\\TensorFlowNET.Core\\Training\\Saving\\checkpoint_management.py.cs", "file_complexity": {"file_NLOC": "147", "file_CCN": "27", "file_NToken": "906"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "47,67,68,69,70,71,72", "deleted_lines": "47,48,68", "method_info": {"method_name": "Tensorflow::checkpoint_management::update_checkpoint_state_internal", "method_params": "save_dir,model_checkpoint_path,all_model_checkpoint_paths,latest_filename,save_relative_paths,all_model_checkpoint_timestamps,last_preserved_timestamp", "method_startline": "38", "method_endline": "73", "method_complexity": {"method_NLOC": "32", "method_CCN": "3", "method_NToken": "125", "method_nesting_level": "2"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "105,106,107,108,109,110,111,112", "deleted_lines": "101", "method_info": {"method_name": "Tensorflow::checkpoint_management::generate_checkpoint_state_proto", "method_params": "save_dir,model_checkpoint_path,all_model_checkpoint_paths,all_model_checkpoint_timestamps,last_preserved_timestamp", "method_startline": "92", "method_endline": "127", "method_complexity": {"method_NLOC": "28", "method_CCN": "6", "method_NToken": "177", "method_nesting_level": "2"}}}}}, "file_4": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "src\\TensorFlowNET.Core\\Training\\Saving\\saver.py.cs", "file_new_name": "src\\TensorFlowNET.Core\\Training\\Saving\\saver.py.cs", "file_complexity": {"file_NLOC": "55", "file_CCN": "5", "file_NToken": "260"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "32", "deleted_lines": "32,38,39", "method_info": {"method_name": "Tensorflow::saver::_import_meta_graph_with_return_elements", "method_params": "meta_graph_or_file,clear_devices,import_scope,return_elements", "method_startline": "25", "method_endline": "42", "method_complexity": {"method_NLOC": "15", "method_CCN": "1", "method_NToken": "78", "method_nesting_level": "2"}}}}}}}}