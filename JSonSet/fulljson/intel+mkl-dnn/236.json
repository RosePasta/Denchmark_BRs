{"BR": {"BR_id": "236", "BR_author": "luotao1", "BRopenT": "2018-05-11T10:40:56Z", "BRcloseT": "2018-05-16T07:49:21Z", "BR_text": {"BRsummary": "-Werror=unused-result in GCC48 compiler", "BRdescription": "\n When use GCC48 to compile mkldnn, there are a lot of -Werror=unused-result errors. But when use GCC53, there is no error.\n \n configuration:\n \n <denchmark-code>[14:59:21] :\t [Step 1/4] -- Found Paddle host system: centos, version: 6.9\n [14:59:21] :\t [Step 1/4] -- Found Paddle host system's CPU: 12 cores\n [14:59:22] :\t [Step 1/4] -- The CXX compiler identification is GNU 4.8.2\n [14:59:22] :\t [Step 1/4] -- The C compiler identification is GNU 4.8.2\n </denchmark-code>\n \n \n error log:\n \n <denchmark-code>In file included from /home/luotao02/Paddle/build/third_party/mkldnn/src/extern_mkldnn/src/cpu/cpu_barrier.hpp:22:0,\n                  from /home/luotao02/Paddle/build/third_party/mkldnn/src/extern_mkldnn/src/cpu/cpu_barrier.cpp:19:\n /home/luotao02/Paddle/build/third_party/mkldnn/src/extern_mkldnn/src/cpu/jit_generator.hpp: In member function \u2018void mkldnn::impl::cpu::jit_generator::dump_code(const uint8*) const\u2019:\n /home/luotao02/Paddle/build/third_party/mkldnn/src/extern_mkldnn/src/cpu/jit_generator.hpp:719:47: error: ignoring return value of \u2018size_t fwrite(const void*, size_t, size_t, FILE*)\u2019, declared with attribute warn_unused_result [-Werror=unused-result]\n                  fwrite(code, getSize(), 1, fp);\n                                                ^\n cc1plus: all warnings being treated as errors\n make[5]: *** [src/CMakeFiles/mkldnn.dir/cpu/cpu_barrier.cpp.o] Error 1\n make[5]: *** Waiting for unfinished jobs....\n In file included from /home/luotao02/Paddle/build/third_party/mkldnn/src/extern_mkldnn/src/cpu/jit_uni_dw_conv_kernel_f32.hpp:21:0,\n                  from /home/luotao02/Paddle/build/third_party/mkldnn/src/extern_mkldnn/src/cpu/jit_uni_dw_conv_kernel_f32.cpp:23:\n /home/luotao02/Paddle/build/third_party/mkldnn/src/extern_mkldnn/src/cpu/jit_generator.hpp: In member function \u2018void mkldnn::impl::cpu::jit_generator::dump_code(const uint8*) const\u2019:\n /home/luotao02/Paddle/build/third_party/mkldnn/src/extern_mkldnn/src/cpu/jit_generator.hpp:719:47: error: ignoring return value of \u2018size_t fwrite(const void*, size_t, size_t, FILE*)\u2019, declared with attribute warn_unused_result [-Werror=unused-result]\n                  fwrite(code, getSize(), 1, fp);\n                                                ^\n In file included from /home/luotao02/Paddle/build/third_party/mkldnn/src/extern_mkldnn/src/cpu/jit_transpose_src_utils.cpp:21:0:\n /home/luotao02/Paddle/build/third_party/mkldnn/src/extern_mkldnn/src/cpu/jit_generator.hpp: In member function \u2018void mkldnn::impl::cpu::jit_generator::dump_code(const uint8*) const\u2019:\n /home/luotao02/Paddle/build/third_party/mkldnn/src/extern_mkldnn/src/cpu/jit_generator.hpp:719:47: error: ignoring return value of \u2018size_t fwrite(const void*, size_t, size_t, FILE*)\u2019, declared with attribute warn_unused_result [-Werror=unused-result]\n                  fwrite(code, getSize(), 1, fp);\n                                                ^\n In file included from /home/luotao02/Paddle/build/third_party/mkldnn/src/extern_mkldnn/src/cpu/jit_uni_reorder.cpp:29:0:\n /home/luotao02/Paddle/build/third_party/mkldnn/src/extern_mkldnn/src/cpu/jit_generator.hpp: In member function \u2018void mkldnn::impl::cpu::jit_generator::dump_code(const uint8*) const\u2019:\n /home/luotao02/Paddle/build/third_party/mkldnn/src/extern_mkldnn/src/cpu/jit_generator.hpp:719:47: error: ignoring return value of \u2018size_t fwrite(const void*, size_t, size_t, FILE*)\u2019, declared with attribute warn_unused_result [-Werror=unused-result]\n                  fwrite(code, getSize(), 1, fp);\n                                                ^\n cc1plus: all warnings being treated as errors\n make[5]: *** [src/CMakeFiles/mkldnn.dir/cpu/jit_transpose_src_utils.cpp.o] Error 1\n cc1plus: all warnings being treated as errors\n make[5]: *** [src/CMakeFiles/mkldnn.dir/cpu/jit_uni_reorder.cpp.o] Error 1\n In file included from /home/luotao02/Paddle/build/third_party/mkldnn/src/extern_mkldnn/src/cpu/cpu_barrier.hpp:22:0,\n                  from /home/luotao02/Paddle/build/third_party/mkldnn/src/extern_mkldnn/src/cpu/cpu_reducer.hpp:28,\n                  from /home/luotao02/Paddle/build/third_party/mkldnn/src/extern_mkldnn/src/cpu/jit_avx2_convolution.hpp:23,\n                  from /home/luotao02/Paddle/build/third_party/mkldnn/src/extern_mkldnn/src/cpu/jit_avx2_convolution.cpp:20:\n /home/luotao02/Paddle/build/third_party/mkldnn/src/extern_mkldnn/src/cpu/jit_generator.hpp: In member function \u2018void mkldnn::impl::cpu::jit_generator::dump_code(const uint8*) const\u2019:\n /home/luotao02/Paddle/build/third_party/mkldnn/src/extern_mkldnn/src/cpu/jit_generator.hpp:719:47: error: ignoring return value of \u2018size_t fwrite(const void*, size_t, size_t, FILE*)\u2019, declared with attribute warn_unused_result [-Werror=unused-result]\n                  fwrite(code, getSize(), 1, fp);\n                                                ^\n cc1plus: all warnings being treated as errors\n In file included from /home/luotao02/Paddle/build/third_party/mkldnn/src/extern_mkldnn/src/cpu/cpu_barrier.hpp:22:0,\n                  from /home/luotao02/Paddle/build/third_party/mkldnn/src/extern_mkldnn/src/cpu/cpu_reducer.hpp:28,\n                  from /home/luotao02/Paddle/build/third_party/mkldnn/src/extern_mkldnn/src/cpu/jit_avx512_common_1x1_convolution.hpp:23,\n                  from /home/luotao02/Paddle/build/third_party/mkldnn/src/extern_mkldnn/src/cpu/jit_avx512_common_1x1_convolution.cpp:20:\n /home/luotao02/Paddle/build/third_party/mkldnn/src/extern_mkldnn/src/cpu/jit_generator.hpp: In member function \u2018void mkldnn::impl::cpu::jit_generator::dump_code(const uint8*) const\u2019:\n /home/luotao02/Paddle/build/third_party/mkldnn/src/extern_mkldnn/src/cpu/jit_generator.hpp:719:47: error: ignoring return value of \u2018size_t fwrite(const void*, size_t, size_t, FILE*)\u2019, declared with attribute warn_unused_result [-Werror=unused-result]\n                  fwrite(code, getSize(), 1, fp);\n                                                ^\n make[5]: *** [src/CMakeFiles/mkldnn.dir/cpu/jit_uni_dw_conv_kernel_f32.cpp.o] Error 1\n In file included from /home/luotao02/Paddle/build/third_party/mkldnn/src/extern_mkldnn/src/cpu/jit_avx512_common_conv_winograd_kernel_f32.hpp:23:0,\n                  from /home/luotao02/Paddle/build/third_party/mkldnn/src/extern_mkldnn/src/cpu/jit_avx512_common_convolution_winograd.hpp:25,\n                  from /home/luotao02/Paddle/build/third_party/mkldnn/src/extern_mkldnn/src/cpu/jit_avx512_core_convolution_winograd.cpp:28:\n /home/luotao02/Paddle/build/third_party/mkldnn/src/extern_mkldnn/src/cpu/jit_generator.hpp: In member function \u2018void mkldnn::impl::cpu::jit_generator::dump_code(const uint8*) const\u2019:\n /home/luotao02/Paddle/build/third_party/mkldnn/src/extern_mkldnn/src/cpu/jit_generator.hpp:719:47: error: ignoring return value of \u2018size_t fwrite(const void*, size_t, size_t, FILE*)\u2019, declared with attribute warn_unused_result [-Werror=unused-result]\n                  fwrite(code, getSize(), 1, fp);\n                                                ^\n In file included from /home/luotao02/Paddle/build/third_party/mkldnn/src/extern_mkldnn/src/cpu/cpu_barrier.hpp:22:0,\n                  from /home/luotao02/Paddle/build/third_party/mkldnn/src/extern_mkldnn/src/cpu/cpu_reducer.hpp:28,\n                  from /home/luotao02/Paddle/build/third_party/mkldnn/src/extern_mkldnn/src/cpu/jit_avx2_1x1_convolution.hpp:23,\n                  from /home/luotao02/Paddle/build/third_party/mkldnn/src/extern_mkldnn/src/cpu/jit_avx2_1x1_convolution.cpp:20:\n /home/luotao02/Paddle/build/third_party/mkldnn/src/extern_mkldnn/src/cpu/jit_generator.hpp: In member function \u2018void mkldnn::impl::cpu::jit_generator::dump_code(const uint8*) const\u2019:\n /home/luotao02/Paddle/build/third_party/mkldnn/src/extern_mkldnn/src/cpu/jit_generator.hpp:719:47: error: ignoring return value of \u2018size_t fwrite(const void*, size_t, size_t, FILE*)\u2019, declared with attribute warn_unused_result [-Werror=unused-result]\n                  fwrite(code, getSize(), 1, fp);\n                                                ^\n cc1plus: all warnings being treated as errors\n make[5]: *** [src/CMakeFiles/mkldnn.dir/cpu/jit_avx2_convolution.cpp.o] Error 1\n cc1plus: all warnings being treated as errors\n cc1plus: all warnings being treated as errors\n make[5]: *** [src/CMakeFiles/mkldnn.dir/cpu/jit_avx512_core_convolution_winograd.cpp.o] Error 1\n make[5]: *** [src/CMakeFiles/mkldnn.dir/cpu/jit_avx512_common_1x1_convolution.cpp.o] Error 1\n In file included from /home/luotao02/Paddle/build/third_party/mkldnn/src/extern_mkldnn/src/cpu/jit_uni_batch_normalization.cpp:26:0:\n /home/luotao02/Paddle/build/third_party/mkldnn/src/extern_mkldnn/src/cpu/jit_generator.hpp: In member function \u2018void mkldnn::impl::cpu::jit_generator::dump_code(const uint8*) const\u2019:\n /home/luotao02/Paddle/build/third_party/mkldnn/src/extern_mkldnn/src/cpu/jit_generator.hpp:719:47: error: ignoring return value of \u2018size_t fwrite(const void*, size_t, size_t, FILE*)\u2019, declared with attribute warn_unused_result [-Werror=unused-result]\n                  fwrite(code, getSize(), 1, fp);\n                                                ^\n cc1plus: all warnings being treated as errors\n In file included from /home/luotao02/Paddle/build/third_party/mkldnn/src/extern_mkldnn/src/cpu/jit_avx512_core_u8s8s32x_1x1_convolution.cpp:23:0:\n /home/luotao02/Paddle/build/third_party/mkldnn/src/extern_mkldnn/src/cpu/jit_generator.hpp: In member function \u2018void mkldnn::impl::cpu::jit_generator::dump_code(const uint8*) const\u2019:\n /home/luotao02/Paddle/build/third_party/mkldnn/src/extern_mkldnn/src/cpu/jit_generator.hpp:719:47: error: ignoring return value of \u2018size_t fwrite(const void*, size_t, size_t, FILE*)\u2019, declared with attribute warn_unused_result [-Werror=unused-result]\n                  fwrite(code, getSize(), 1, fp);\n                                                ^\n make[5]: *** [src/CMakeFiles/mkldnn.dir/cpu/jit_avx2_1x1_convolution.cpp.o] Error 1\n cc1plus: all warnings being treated as errors\n make[5]: *** [src/CMakeFiles/mkldnn.dir/cpu/jit_uni_batch_normalization.cpp.o] Error 1\n cc1plus: all warnings being treated as errors\n make[5]: *** [src/CMakeFiles/mkldnn.dir/cpu/jit_avx512_core_u8s8s32x_1x1_convolution.cpp.o] Error 1\n In file included from /home/luotao02/Paddle/build/third_party/mkldnn/src/extern_mkldnn/src/cpu/jit_uni_eltwise.cpp:22:0:\n /home/luotao02/Paddle/build/third_party/mkldnn/src/extern_mkldnn/src/cpu/jit_generator.hpp: In member function \u2018void mkldnn::impl::cpu::jit_generator::dump_code(const uint8*) const\u2019:\n /home/luotao02/Paddle/build/third_party/mkldnn/src/extern_mkldnn/src/cpu/jit_generator.hpp:719:47: error: ignoring return value of \u2018size_t fwrite(const void*, size_t, size_t, FILE*)\u2019, declared with attribute warn_unused_result [-Werror=unused-result]\n                  fwrite(code, getSize(), 1, fp);\n                                                ^\n In file included from /home/luotao02/Paddle/build/third_party/mkldnn/src/extern_mkldnn/src/cpu/jit_avx2_gemm_f32.hpp:21:0,\n                  from /home/luotao02/Paddle/build/third_party/mkldnn/src/extern_mkldnn/src/cpu/jit_avx2_gemm_f32.cpp:22:\n /home/luotao02/Paddle/build/third_party/mkldnn/src/extern_mkldnn/src/cpu/jit_generator.hpp: In member function \u2018void mkldnn::impl::cpu::jit_generator::dump_code(const uint8*) const\u2019:\n /home/luotao02/Paddle/build/third_party/mkldnn/src/extern_mkldnn/src/cpu/jit_generator.hpp:719:47: error: ignoring return value of \u2018size_t fwrite(const void*, size_t, size_t, FILE*)\u2019, declared with attribute warn_unused_result [-Werror=unused-result]\n                  fwrite(code, getSize(), 1, fp);\n                                                ^\n cc1plus: all warnings being treated as errors\n make[5]: *** [src/CMakeFiles/mkldnn.dir/cpu/jit_avx2_gemm_f32.cpp.o] Error 1\n cc1plus: all warnings being treated as errors\n make[5]: *** [src/CMakeFiles/mkldnn.dir/cpu/jit_uni_eltwise.cpp.o] Error 1\n make[4]: *** [src/CMakeFiles/mkldnn.dir/all] Error 2\n make[3]: *** [all] Error 2\n make[2]: *** [third_party/mkldnn/src/extern_mkldnn-stamp/extern_mkldnn-build] Error 2\n make[1]: *** [CMakeFiles/extern_mkldnn.dir/all] Error 2\n make: *** [all] Error 2\n </denchmark-code>\n \n \n whole log: https://paddleci.ngrok.io/viewLog.html?buildId=35590&buildTypeId=Manylinux1_Cuda80cudnn5cp27cp27mu&tab=buildLog&_focus=3589\n related issue: PaddlePaddle/Paddle#10584\n \n Now we use  to skip this error in <denchmark-link:https://github.com/PaddlePaddle/Paddle/pull/10571>PaddlePaddle/Paddle#10571</denchmark-link>\n . But could you help fix it at all? Thanks very much!\n \t"}, "comments": {}}, "commit": {"commit_id": "98913b4c1e12f2452988831a4b13bdbee1cf526c", "commit_author": "Fomenko, Evarist M", "commitT": "2018-05-16 01:30:09+00:00", "commit_complexity": {"commit_NLOC": "None", "commit_CCN": "None", "commit_Nprams": "None"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "src\\cpu\\jit_generator.hpp", "file_new_name": "src\\cpu\\jit_generator.hpp", "file_complexity": {"file_NLOC": "574", "file_CCN": "144", "file_NToken": "4420"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "722,723", "deleted_lines": "722", "method_info": {"method_name": "mkldnn::impl::cpu::jit_generator::dump_code", "method_params": "code", "method_startline": "710", "method_endline": "728", "method_complexity": {"method_NLOC": "15", "method_CCN": "3", "method_NToken": "93", "method_nesting_level": "4"}}}}}}}}