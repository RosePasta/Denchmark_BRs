{"BR": {"BR_id": "577", "BR_author": "brechtsanders", "BRopenT": "2019-10-23T19:25:08Z", "BRcloseT": "2019-11-24T20:53:20Z", "BR_text": {"BRsummary": "Versions 1.1 and 1.1.1 not building properly in MSYS/MinGW-w64", "BRdescription": "\n In my MSYS/MinGW-w64 on Windows versions 1.1 and 1.1.1 failed to build due to a .lib file that was not found. The following fixes the issue:\n <denchmark-code>patch -ulbf src/CMakeLists.txt << EOF\n @@ -135,8 +135,19 @@\n  if (WIN32)\n +    if (MSVC)\n +        set(myprefix \"\")\n +        set(mysuffix \".lib\")\n +    else ()\n +        set(myprefix \"lib\")\n +        if(DNNL_LIBRARY_TYPE STREQUAL \"SHARED\")\n +            set(mysuffix \".dll.a\")\n +        else()\n +            set(mysuffix \".a\")\n +        endif()\n +    endif ()\n      add_custom_target(compat_libs ALL\n          \\${CMAKE_COMMAND} -E copy\n -        \\$<TARGET_FILE_DIR:\\${LIB_NAME}>/dnnl.lib\n -        \\$<TARGET_FILE_DIR:\\${LIB_NAME}>/mkldnn.lib\n +        \\$<TARGET_FILE_DIR:\\${LIB_NAME}>/\\${myprefix}dnnl\\${mysuffix}\n +        \\$<TARGET_FILE_DIR:\\${LIB_NAME}>/\\${myprefix}mkldnn\\${mysuffix}\n          DEPENDS \\${LIB_NAME})\n -    install(FILES \\$<TARGET_FILE_DIR:\\${LIB_NAME}>/mkldnn.lib\n +    install(FILES \\$<TARGET_FILE_DIR:\\${LIB_NAME}>/\\${myprefix}mkldnn\\${mysuffix}\n          DESTINATION \\${CMAKE_INSTALL_PREFIX}/\\${CMAKE_INSTALL_LIBDIR})\n EOF\n </denchmark-code>\n \n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "brechtsanders", "commentT": "2019-10-23T19:36:31Z", "comment_text": "\n \t\tThanks <denchmark-link:https://github.com/brechtsanders>@brechtsanders</denchmark-link>\n  for the report and the patch! I will take a look.\n \t\t"}}}, "commit": {"commit_id": "1c2e8e90c944b5db97bc66afa11e620e433f9ef9", "commit_author": "Fomenko, Evarist M", "commitT": "2019-11-22 13:17:24-08:00", "commit_complexity": {"commit_NLOC": "None", "commit_CCN": "None", "commit_Nprams": "None"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "src\\CMakeLists.txt", "file_new_name": "src\\CMakeLists.txt", "file_complexity": {"file_NLOC": "None", "file_CCN": "None", "file_NToken": "None"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "136,137,138,139,140,141,142,143,144,145,146,149,150,152", "deleted_lines": "138,139,141"}}}}}}