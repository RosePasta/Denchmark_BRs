{"BR": {"BR_id": "1087", "BR_author": "vasanthhr", "BRopenT": "2019-02-14T01:12:05Z", "BRcloseT": "2019-02-19T22:11:49Z", "BR_text": {"BRsummary": "nvcc fatal : Unsupported gpu architecture 'compute_71' CMake Error at openpose_generated_renderHand.cu.o.Release.cmake:219", "BRdescription": "\n Hello All,\n I followed installation instructions and Generated successfully and executed below make command inside build folder. But getting the following at last stage. (Ubuntu18.04 mahine/laptop, with CUDA9 and cuDNN v7.2 )\n Please guide me to resolve this issue, I am struggling here since long.\n cd build/\n make -jnproc\n <denchmark-code>/build/caffe/bin/classification\" to \"/home/vasanthahr/code/python/modaka/handLandMark_openPose/handML_openpose/openpose/build/caffe/lib:/usr/lib/x86_64-linux-gnu/hdf5/serial:/usr/local/cuda-9.0/lib64\"\n -- Installing: /home/vasanthahr/code/python/modaka/handLandMark_openPose/handML_openpose/openpose/build/caffe/bin/convert_mnist_data\n -- Set runtime path of \"/home/vasanthahr/code/python/modaka/handLandMark_openPose/handML_openpose/openpose/build/caffe/bin/convert_mnist_data\" to \"/home/vasanthahr/code/python/modaka/handLandMark_openPose/handML_openpose/openpose/build/caffe/lib:/usr/lib/x86_64-linux-gnu/hdf5/serial:/usr/local/cuda-9.0/lib64\"\n -- Installing: /home/vasanthahr/code/python/modaka/handLandMark_openPose/handML_openpose/openpose/build/caffe/bin/convert_mnist_siamese_data\n -- Set runtime path of \"/home/vasanthahr/code/python/modaka/handLandMark_openPose/handML_openpose/openpose/build/caffe/bin/convert_mnist_siamese_data\" to \"/home/vasanthahr/code/python/modaka/handLandMark_openPose/handML_openpose/openpose/build/caffe/lib:/usr/lib/x86_64-linux-gnu/hdf5/serial:/usr/local/cuda-9.0/lib64\"\n [100%] Completed 'openpose_lib'\n Rerunning cmake after building Caffe submodule\n -- GCC detected, adding compile flags\n -- Building with CUDA.\n -- CUDA detected: 9.0\n -- Found cuDNN: ver. 7.2.1 found (include: /usr/local/cuda-9.0/include, library: /usr/local/cuda-9.0/lib64/libcudnn.so)\n -- Automatic GPU detection failed. Building for all known architectures.\n -- Added CUDA NVCC flags for: sm_30 sm_35 sm_37 sm_50 sm_52 sm_53 sm_60 sm_61 sm_62 sm_70 sm_71 sm_72 sm_75\n -- Found cuDNN: ver. 7.2.1 found (include: /usr/local/cuda-9.0/include, library: /usr/local/cuda-9.0/lib64/libcudnn.so)\n -- Found gflags  (include: /usr/include, library: /usr/lib/x86_64-linux-gnu/libgflags.so)\n -- Found glog    (include: /usr/include, library: /usr/lib/x86_64-linux-gnu/libglog.so)\n -- Caffe will be downloaded from source now. NOTE: This process might take several minutes depending\n         on your internet connection.\n -- Caffe has already been downloaded.\n HEAD is now at b5ede488 Added TX2 JetPack3.3 support\n -- Caffe will be built from source now.\n -- Adding Example calibration.bin\n -- Adding Example openpose.bin\n -- Adding Example 1_custom_post_processing.bin\n -- Adding Example 01_body_from_image_default.bin\n -- Adding Example 02_whole_body_from_image_default.bin\n -- Adding Example 03_keypoints_from_image.bin\n -- Adding Example 04_keypoints_from_images.bin\n -- Adding Example 05_keypoints_from_images_multi_gpu.bin\n -- Adding Example 06_face_from_image.bin\n -- Adding Example 07_hand_from_image.bin\n -- Adding Example 08_heatmaps_from_image.bin\n -- Adding Example 09_keypoints_from_heatmaps.bin\n -- Adding Example 10_asynchronous_custom_input.bin\n -- Adding Example 11_asynchronous_custom_output.bin\n -- Adding Example 12_asynchronous_custom_input_output_and_datum.bin\n -- Adding Example 13_synchronous_custom_input.bin\n -- Adding Example 14_synchronous_custom_preprocessing.bin\n -- Adding Example 15_synchronous_custom_postprocessing.bin\n -- Adding Example 16_synchronous_custom_output.bin\n -- Adding Example 17_synchronous_custom_all_and_datum.bin\n -- Adding Example 1_thread_user_processing_function.bin\n -- Adding Example 2_thread_user_input_processing_output_and_datum.bin\n -- Adding Example handFromJsonTest.bin\n -- Adding Example resizeTest.bin\n -- Download the models.\n -- Downloading BODY_25 model...\n -- Model already exists.\n -- Not downloading body (COCO) model\n -- Not downloading body (MPI) model\n -- Downloading face model...\n -- Model already exists.\n -- Downloading hand model...\n -- Model already exists.\n -- Models Downloaded.\n Submodule '3rdparty/pybind11' (https://github.com/pybind/pybind11.git) registered for path '../3rdparty/pybind11'\n Cloning into '/home/vasanthahr/code/python/modaka/handLandMark_openPose/handML_openpose/openpose/3rdparty/pybind11'...\n Submodule path '../3rdparty/pybind11': checked out '085a29436a8c472caaaf7157aa644b571079bcaa'\n -- Found PythonInterp: /usr/bin/python3.6 (found version \"3.6.7\") \n -- Found PythonLibs: /usr/lib/x86_64-linux-gnu/libpython3.6m.so\n -- Performing Test HAS_CPP14_FLAG\n -- Performing Test HAS_CPP14_FLAG - Success\n -- pybind11 v2.3.dev0\n -- Performing Test HAS_FLTO\n -- Performing Test HAS_FLTO - Success\n -- LTO enabled\n -- Configuring done\n -- Generating done\n -- Build files have been written to: /home/vasanthahr/code/python/modaka/handLandMark_openPose/handML_openpose/openpose/build\n [  0%] Building NVCC (Device) object src/openpose/CMakeFiles/openpose.dir/tracking/openpose_generated_pyramidalLK.cu.o\n [  0%] Building NVCC (Device) object src/openpose/CMakeFiles/openpose.dir/hand/openpose_generated_renderHand.cu.o\n [  1%] Building NVCC (Device) object src/openpose/CMakeFiles/openpose.dir/face/openpose_generated_renderFace.cu.o\n [  3%] Built target openpose_lib\n [  3%] Building NVCC (Device) object src/openpose/CMakeFiles/openpose.dir/net/openpose_generated_bodyPartConnectorBase.cu.o\n nvcc fatal   : Unsupported gpu architecture 'compute_71'\n CMake Error at openpose_generated_renderHand.cu.o.Release.cmake:219 (message):\n   Error generating\n   /home/vasanthahr/code/python/modaka/handLandMark_openPose/handML_openpose/openpose/build/src/openpose/CMakeFiles/openpose.dir/hand/./openpose_generated_renderHand.cu.o\n \n \n nvcc fatal   : Unsupported gpu architecture 'compute_71'\n src/openpose/CMakeFiles/openpose.dir/build.make:70: recipe for target 'src/openpose/CMakeFiles/openpose.dir/hand/openpose_generated_renderHand.cu.o' failed\n CMake Error at openpose_generated_pyramidalLK.cu.o.Release.cmake:219 (message):\n   Error generating\n   /home/vasanthahr/code/python/modaka/handLandMark_openPose/handML_openpose/openpose/build/src/openpose/CMakeFiles/openpose.dir/tracking/./openpose_generated_pyramidalLK.cu.o\n \n \n make[5]: *** [src/openpose/CMakeFiles/openpose.dir/hand/openpose_generated_renderHand.cu.o] Error 1\n make[5]: *** Waiting for unfinished jobs....\n nvcc fatal   : Unsupported gpu architecture 'compute_71'\n CMake Error at openpose_generated_renderFace.cu.o.Release.cmake:219 (message):\n   Error generating\n   /home/vasanthahr/code/python/modaka/handLandMark_openPose/handML_openpose/openpose/build/src/openpose/CMakeFiles/openpose.dir/face/./openpose_generated_renderFace.cu.o\n \n \n src/openpose/CMakeFiles/openpose.dir/build.make:112: recipe for target 'src/openpose/CMakeFiles/openpose.dir/tracking/openpose_generated_pyramidalLK.cu.o' failed\n make[5]: *** [src/openpose/CMakeFiles/openpose.dir/tracking/openpose_generated_pyramidalLK.cu.o] Error 1\n src/openpose/CMakeFiles/openpose.dir/build.make:63: recipe for target 'src/openpose/CMakeFiles/openpose.dir/face/openpose_generated_renderFace.cu.o' failed\n make[5]: *** [src/openpose/CMakeFiles/openpose.dir/face/openpose_generated_renderFace.cu.o] Error 1\n nvcc fatal   : Unsupported gpu architecture 'compute_71'\n CMake Error at openpose_generated_bodyPartConnectorBase.cu.o.Release.cmake:219 (message):\n   Error generating\n   /home/vasanthahr/code/python/modaka/handLandMark_openPose/handML_openpose/openpose/build/src/openpose/CMakeFiles/openpose.dir/net/./openpose_generated_bodyPartConnectorBase.cu.o\n \n \n src/openpose/CMakeFiles/openpose.dir/build.make:77: recipe for target 'src/openpose/CMakeFiles/openpose.dir/net/openpose_generated_bodyPartConnectorBase.cu.o' failed\n make[5]: *** [src/openpose/CMakeFiles/openpose.dir/net/openpose_generated_bodyPartConnectorBase.cu.o] Error 1\n CMakeFiles/Makefile2:219: recipe for target 'src/openpose/CMakeFiles/openpose.dir/all' failed\n make[4]: *** [src/openpose/CMakeFiles/openpose.dir/all] Error 2\n Makefile:129: recipe for target 'all' failed\n make[3]: *** [all] Error 2\n CMakeFiles/openpose_lib.dir/build.make:124: recipe for target 'openpose_lib' failed\n make[2]: *** [openpose_lib] Error 2\n CMakeFiles/Makefile2:67: recipe for target 'CMakeFiles/openpose_lib.dir/all' failed\n make[1]: *** [CMakeFiles/openpose_lib.dir/all] Error 2\n Makefile:83: recipe for target 'all' failed\n make: *** [all] Error 2\n \n </denchmark-code>\n \n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "vasanthhr", "commentT": "2019-02-16T03:15:56Z", "comment_text": "\n \t\tPlease follow the issue guidelines\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "vasanthhr", "commentT": "2019-02-17T02:38:49Z", "comment_text": "\n \t\tI have a similar issue\n <denchmark-code>[  3%] Built target openpose_lib\n [  3%] Building NVCC (Device) object src/openpose/CMakeFiles/openpose.dir/tracking/openpose_generated_pyramidalLK.cu.o\n nvcc fatal   : Unsupported gpu architecture 'compute_71'\n CMake Error at openpose_generated_pyramidalLK.cu.o.Release.cmake:219 (message):\n   Error generating\n   /home/ls/openpose/build/src/openpose/CMakeFiles/openpose.dir/tracking/./openpose_generated_pyramidalLK.cu.o\n \n \n src/openpose/CMakeFiles/openpose.dir/build.make:112: recipe for target 'src/openpose/CMakeFiles/openpose.dir/tracking/openpose_generated_pyramidalLK.cu.o' failed\n make[2]: *** [src/openpose/CMakeFiles/openpose.dir/tracking/openpose_generated_pyramidalLK.cu.o] Error 1\n CMakeFiles/Makefile2:219: recipe for target 'src/openpose/CMakeFiles/openpose.dir/all' failed\n make[1]: *** [src/openpose/CMakeFiles/openpose.dir/all] Error 2\n Makefile:129: recipe for target 'all' failed\n make: *** [all] Error 2\n \n </denchmark-code>\n \n I tried to edit Makefile to get rid of compute_71 (and above) but it didn't help.\n Ubuntu18.04\n CUDA10.0\n cuDNN v7.4.2\n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "vasanthhr", "commentT": "2019-02-17T02:56:19Z", "comment_text": "\n \t\tWhat GPU are you all using.\n \t\t"}, "comments_3": {"comment_id": 4, "comment_author": "vasanthhr", "commentT": "2019-02-17T03:57:08Z", "comment_text": "\n \t\t\n What GPU are you all using.\n \n GTX 1070 Mobile\n \t\t"}, "comments_4": {"comment_id": 5, "comment_author": "vasanthhr", "commentT": "2019-02-19T04:58:35Z", "comment_text": "\n \t\tIts likely you dont have the right version of cuda set/installed:\n Can you try\n ls -alh /usr/local | grep cuda\n And tell me what you get\n \t\t"}, "comments_5": {"comment_id": 6, "comment_author": "vasanthhr", "commentT": "2019-02-19T13:43:54Z", "comment_text": "\n \t\tlrwxrwxrwx  1 root root    9 \u0444\u0435\u0432 16 23:32 cuda -> cuda-10.0\n I can try to find and install cuda 9 instead of 10, but as I have Ubuntu 18, I'm not sure if it's going to work with it.\n \t\t"}, "comments_6": {"comment_id": 7, "comment_author": "vasanthhr", "commentT": "2019-02-19T22:11:49Z", "comment_text": "\n \t\tHi, it has been fixed in the latest version. Please, try that one. Best\n \t\t"}, "comments_7": {"comment_id": 8, "comment_author": "vasanthhr", "commentT": "2019-03-06T19:54:57Z", "comment_text": "\n \t\tI encountered the same issue and updating the nvidia-drivers and reinstalling cuda - cudnn resolved the problem.\n \t\t"}, "comments_8": {"comment_id": 9, "comment_author": "vasanthhr", "commentT": "2019-08-04T09:47:13Z", "comment_text": "\n \t\tIf your cuda does not support your gpu, change your cuda version.\n Otherwise, if your device is not  compute_71 (e.g. it is a GTX 10XX series).\n You can remove the nvcc compute_71 flags in the cmake files with the following command.\n This worked for me:\n First configure the cmake but before generating the makefile run:\n (change accordingly for compute_71, this is for compute_75)\n To remove the flag from .cmake files:\n find . -name \"**.cmake\" -exec sed -i \"s/-gencode;arch=compute_75,code=sm_75;//g\" {} \\;\n To remove the flag from .pre-gen files (I don't know if this is necessary):\n find . -name \"**.pre-gen\" -exec sed -i \"s/-gencode;arch=compute_75,code=sm_75;//g\" {} \\; \n Finally run the following command to see if any flag is remaining,\n  grep -r \"compute_75\"\n Manually remove those flags (for me there were one example file which was not .cmake and .pre-gen)\n After this generate the makefile using cmake-gui and build openpose.\n \t\t"}, "comments_9": {"comment_id": 10, "comment_author": "vasanthhr", "commentT": "2019-10-16T01:45:49Z", "comment_text": "\n \t\tI had the same problem, and then it was caused by a mismatch between cuda and the libcublas version.\n My cuda is 10.0, but apt installs 9.1 (queried by the command: ).\n Then I downloaded the appropriate version in (<denchmark-link:https://ubuntu.pkgs.org/19.04/ubuntu-multiverse-amd64/libcublas10_10.1.105-0ubuntu1_amd64.deb.html>https://ubuntu.pkgs.org/19.04/ubuntu-multiverse-amd64/libcublas10_10.1.105-0ubuntu1_amd64.deb.html</denchmark-link>\n ) and executed\n \n \t\t"}}}, "commit": {"commit_id": "0d57f78906fe7020df12d0fb0425c60d2eb75fd0", "commit_author": "Gines Hidalgo", "commitT": "2019-02-19 17:11:18-05:00", "commit_complexity": {"commit_NLOC": "None", "commit_CCN": "None", "commit_Nprams": "None"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "cmake\\Cuda.cmake", "file_new_name": "cmake\\Cuda.cmake", "file_complexity": {"file_NLOC": "None", "file_CCN": "None", "file_NToken": "None"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "32", "deleted_lines": "32"}}}}}}