{"BR": {"BR_id": "35765", "BR_author": "emailweixu", "BRopenT": "2020-01-11T06:54:34Z", "BRcloseT": "2020-01-20T13:54:24Z", "BR_text": {"BRsummary": "Autograph failure with `\\`", "BRdescription": "\n Please make sure that this is a bug. As per our GitHub Policy, we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template\n System information\n \n Have I written custom code (as opposed to using a stock example script provided in TensorFlow):\n OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Ubuntu 18.04\n Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\n TensorFlow installed from (source or binary): binary\n TensorFlow version (use command below): v2.1.0-rc2-17-ge5bf8de 2.1.0\n Python version: 3.6\n Bazel version (if compiling from source):\n GCC/Compiler version (if compiling from source):\n CUDA/cuDNN version:\n GPU model and memory: Nvidia RTX 2080\n \n Describe the current behavior\n Tensorflow shows warning about  failure of autograph\n <denchmark-code>WARNING:tensorflow:AutoGraph could not transform <bound method C.f of <__main__.C object at 0x7f4a83904668>> and will run it as-is.\n Please report this to the TensorFlow team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output.\n Cause: expected exactly one node node, found [<gast.gast.FunctionDef object at 0x7f4a47e0d5c0>, <gast.gast.Return object at 0x7f4a47e0df28>]\n </denchmark-code>\n \n The warning seems to be caused by the backslash \"\\\".\n Describe the expected behavior\n There should be no such warning\n Code to reproduce the issue\n import tensorflow as tf\n \n class C(object):\n     def f(self):\n         # error disappear if \\ in the following line is removed\n         a = \\\n             1\n         return a\n \n obj = C()\n \n @tf.function\n def func():\n     mem =  obj.f()\n     return mem\n \n def main():\n     print(func())\n \n if __name__ == \"__main__\":\n     main()\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "emailweixu", "commentT": "2020-01-13T20:53:00Z", "comment_text": "\n \t\tJust ran into this as well, removing the slash fixed it.\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "emailweixu", "commentT": "2020-01-13T21:57:07Z", "comment_text": "\n \t\tI am closing this as the related PR fix merged. Thanks!\n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "emailweixu", "commentT": "2020-01-14T19:47:42Z", "comment_text": "\n \t\tAre you satisfied with the resolution of your issue?\n <denchmark-link:https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=Yes&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/35765>Yes</denchmark-link>\n \n <denchmark-link:https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=No&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/35765>No</denchmark-link>\n \n \t\t"}, "comments_3": {"comment_id": 4, "comment_author": "emailweixu", "commentT": "2020-01-14T22:39:14Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/jvishnuvardhan>@jvishnuvardhan</denchmark-link>\n  which PR fixed this bug?\n \t\t"}, "comments_4": {"comment_id": 5, "comment_author": "emailweixu", "commentT": "2020-01-14T23:44:19Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/emailweixu>@emailweixu</denchmark-link>\n  Sorry. I thought it was merged into  branch in . It was my mistake. I am reopening it. Thanks!\n \t\t"}, "comments_5": {"comment_id": 6, "comment_author": "emailweixu", "commentT": "2020-01-15T23:59:26Z", "comment_text": "\n \t\tLooks like a bug in the parser. dedent_block seems to be confused by the backslash continuation:\n <denchmark-code>s = r'''\n     def f():\n         a = \\\n             1\n         return a\n '''\n \n print(dedent_block(s))\n </denchmark-code>\n \n <denchmark-code>def f():\n     a = \\\n     1\n return a\n </denchmark-code>\n \n \t\t"}, "comments_6": {"comment_id": 7, "comment_author": "emailweixu", "commentT": "2020-01-17T21:40:01Z", "comment_text": "\n \t\tFor a workaround until this is fixed, note that you can use parentheses to break expressions on multiple lines:\n <denchmark-code>a = (\n     1)\n </denchmark-code>\n \n \t\t"}, "comments_7": {"comment_id": 8, "comment_author": "emailweixu", "commentT": "2020-01-20T13:54:25Z", "comment_text": "\n \t\tAre you satisfied with the resolution of your issue?\n <denchmark-link:https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=Yes&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/35765>Yes</denchmark-link>\n \n <denchmark-link:https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=No&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/35765>No</denchmark-link>\n \n \t\t"}}}, "commit": {"commit_id": "8e3adf77b2a148fb2c6fea8fea2d0217bca3339f", "commit_author": "Dan Moldovan", "commitT": "2020-01-20 05:47:15-08:00", "commit_complexity": {"commit_NLOC": "0.9523809523809523", "commit_CCN": "0.9523809523809523", "commit_Nprams": "1.0"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "tensorflow\\python\\autograph\\pyct\\parser.py", "file_new_name": "tensorflow\\python\\autograph\\pyct\\parser.py", "file_complexity": {"file_NLOC": "143", "file_CCN": "36", "file_NToken": "898"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "46,47,48", "deleted_lines": null, "method_info": {"method_name": "_unfold_continuations", "method_params": "code_string", "method_startline": "46", "method_endline": "48", "method_complexity": {"method_NLOC": "2", "method_CCN": "1", "method_NToken": "15", "method_nesting_level": "0"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "54,55", "deleted_lines": null, "method_info": {"method_name": "dedent_block", "method_params": "code_string", "method_startline": "51", "method_endline": "116", "method_complexity": {"method_NLOC": "46", "method_CCN": "16", "method_NToken": "318", "method_nesting_level": "0"}}}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "tensorflow\\python\\autograph\\pyct\\parser_test.py", "file_new_name": "tensorflow\\python\\autograph\\pyct\\parser_test.py", "file_complexity": {"file_NLOC": "143", "file_CCN": "17", "file_NToken": "695"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "132,133,134,135,136,137,138,139,140,141,142", "deleted_lines": null, "method_info": {"method_name": "test_dedent_block_continuation", "method_params": "self", "method_startline": "132", "method_endline": "142", "method_complexity": {"method_NLOC": "9", "method_CCN": "1", "method_NToken": "34", "method_nesting_level": "1"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "144,145,146,147,148,149,150,151,152,153,154", "deleted_lines": null, "method_info": {"method_name": "test_dedent_block_continuation_in_string", "method_params": "self", "method_startline": "144", "method_endline": "154", "method_complexity": {"method_NLOC": "9", "method_CCN": "1", "method_NToken": "34", "method_nesting_level": "1"}}}}}}}}