{"BR": {"BR_id": "36394", "BR_author": "prashastk", "BRopenT": "2020-02-01T01:57:51Z", "BRcloseT": "2020-05-21T22:10:24Z", "BR_text": {"BRsummary": "file_io.get_matching_files indefinitely hangs", "BRdescription": "\n System information\n \n Have I written custom code (as opposed to using a stock example script provided in TensorFlow): No\n OS Platform and Distribution (e.g., Linux Ubuntu 16.04): GCP cloud shell\n Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: N/A\n TensorFlow installed from (source or binary): Comes pre-installed in  GCP cloud shell\n TensorFlow version (use command below): TF 2.1\n Python version: 3.7.3\n Bazel version (if compiling from source): N/A\n GCC/Compiler version (if compiling from source): N/A\n CUDA/cuDNN version: N/A\n GPU model and memory: N/A\n \n Describe the current behavior\n file_io.get_matching_files indefinitely hangs\n Describe the expected behavior\n file_io.get_matching_files should not hang!\n Code to reproduce the issue\n Note the // in the first command\n <denchmark-code>gsutil cp README-cloudshell.txt gs://<some_bucket>/test//bug.txt\n gsutil cp README-cloudshell.txt gs://<some_bucket>/test/bug.txt\n </denchmark-code>\n \n This creates a weird / folder under the test folder\n Now open python\n <denchmark-code>from tensorflow.python.lib.io import file_io\n file_io.get_matching_files('gs://<some_bucket>/test/bug.txt')\n </denchmark-code>\n \n This will hang.\n Delete the / folder and this would work fine.\n One of our training jobs hung because TF somehow created a / folder in model output directory!\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "prashastk", "commentT": "2020-05-21T22:10:25Z", "comment_text": "\n \t\tAre you satisfied with the resolution of your issue?\n <denchmark-link:https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=Yes&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/36394>Yes</denchmark-link>\n \n <denchmark-link:https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=No&entry.2137816233=https://github.com/tensorflow/tensorflow/issues/36394>No</denchmark-link>\n \n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "prashastk", "commentT": "2020-05-21T22:11:41Z", "comment_text": "\n \t\tApologies for the long delay. This should be fixed in the next nightly and the next release.\n \t\t"}}}, "commit": {"commit_id": "7bfbd3f7be0725ee9c220047fe85032cf126d92b", "commit_author": "Mihai Maruseac", "commitT": "2020-05-21 15:08:45-07:00", "commit_complexity": {"commit_NLOC": "0.0", "commit_CCN": "1.0", "commit_Nprams": "1.0"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "tensorflow\\core\\platform\\cloud\\gcs_file_system.cc", "file_new_name": "tensorflow\\core\\platform\\cloud\\gcs_file_system.cc", "file_complexity": {"file_NLOC": "1426", "file_CCN": "237", "file_NToken": "9844"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "1357,1358,1359,1360,1363,1364,1365,1366,1367,1368,1369", "deleted_lines": "1354", "method_info": {"method_name": "tensorflow::GcsFileSystem::GetMatchingPaths", "method_params": "pattern,results", "method_startline": "1337", "method_endline": "1379", "method_complexity": {"method_NLOC": "30", "method_CCN": "4", "method_NToken": "225", "method_nesting_level": "1"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "168,169,170,171", "deleted_lines": "166", "method_info": {"method_name": "tensorflow::AddAllSubpaths", "method_params": "paths", "method_startline": "163", "method_endline": "177", "method_complexity": {"method_NLOC": "12", "method_CCN": "4", "method_NToken": "99", "method_nesting_level": "2"}}}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "tensorflow\\core\\platform\\cloud\\gcs_file_system_test.cc", "file_new_name": "tensorflow\\core\\platform\\cloud\\gcs_file_system_test.cc", "file_complexity": {"file_NLOC": "3253", "file_CCN": "107", "file_NToken": "16916"}, "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995", "deleted_lines": null, "method_info": {"method_name": "tensorflow::TEST", "method_params": "GcsFileSystemTest,GetMatchingPaths_SlashInObjectName", "method_startline": "1972", "method_endline": "1995", "method_complexity": {"method_NLOC": "23", "method_CCN": "1", "method_NToken": "134", "method_nesting_level": "2"}}}, "hunk_1": {"Ismethod": 1, "added_lines": "1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020", "deleted_lines": null, "method_info": {"method_name": "tensorflow::TEST", "method_params": "GcsFileSystemTest,GetMatchingPaths_SlashInObjectNameEscaped", "method_startline": "1997", "method_endline": "2020", "method_complexity": {"method_NLOC": "23", "method_CCN": "1", "method_NToken": "137", "method_nesting_level": "2"}}}}}}}}