{"BR": {"BR_id": "3824", "BR_author": "ylongqi", "BRopenT": "2016-08-15T18:34:24Z", "BRcloseT": "2017-05-01T16:22:27Z", "BR_text": {"BRsummary": "Unclear documentation and behavior for sampler in Tensorflow", "BRdescription": "\n For the samplers implemented in tensorflow, e.g. tf.nn.fixed_unigram_candidate_sampler. The behavior is not well-defined in the document. For instance, I would expect the labels specified in true_classes will be excluded from the sampling pool, and the sampling will be conducted for each batch. But according to my experiments, neither of above is true.\n Consider the following code:\n `import tensorflow as tf\n labels_matrix = tf.reshape(tf.constant([1, 2, 3, 4], dtype=tf.int64), [-1, 1])\n sampled_ids, _, _ = tf.nn.fixed_unigram_candidate_sampler(\n true_classes = labels_matrix,\n num_true = 1,\n num_sampled = 1,\n unique = True,\n range_max = 5,\n distortion = 0.0,\n unigrams = range(5)\n )\n init = tf.initialize_all_variables()\n with tf.Session() as sess:\n sess.run(init)\n print sess.run([sampled_ids])\n `\n The output can be 3, which actually belongs to the set of true classes. - Also, the output has the dimension [1], which basically means that the sampling is only conducted once, not for each batch.\n Can someone help to clarify this?\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "ylongqi", "commentT": "2017-01-24T22:00:13Z", "comment_text": "\n \t\tIs this still current?\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "ylongqi", "commentT": "2017-01-25T17:30:29Z", "comment_text": "\n \t\tYes, this is probably still a problem in the docs, and it will be useful for the TF writer to keep the issue for reference.\n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "ylongqi", "commentT": "2017-08-07T13:17:51Z", "comment_text": "\n \t\tany solutions for this issue? I also find this problem in version1.2\n \t\t"}}}, "commit": {"commit_id": "71319c58a3436fbd7081e49c52878dd1ba1772b5", "commit_author": "A. Unique TensorFlower", "commitT": "2017-04-28 15:33:58-07:00", "commit_complexity": {"commit_NLOC": "None", "commit_CCN": "None", "commit_Nprams": "None"}, "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "tensorflow\\core\\ops\\candidate_sampling_ops.cc", "file_new_name": "tensorflow\\core\\ops\\candidate_sampling_ops.cc", "file_complexity": {"file_NLOC": "388", "file_CCN": "1", "file_NToken": "772"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "84,134,183,232,292,363", "deleted_lines": "84,134,183,232,292,363"}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "tensorflow\\python\\ops\\candidate_sampling_ops.py", "file_new_name": "tensorflow\\python\\ops\\candidate_sampling_ops.py", "file_complexity": {"file_NLOC": "127", "file_CCN": "6", "file_NToken": "444"}, "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "56,57,58,66,67,68,69,118,173,237", "deleted_lines": "56,64,65,114,169,233"}}}}}}