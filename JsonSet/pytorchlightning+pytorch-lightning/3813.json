{"BR": {"BR_id": "3813", "BR_author": "ananthsub", "BRopenT": "2020-10-03T05:59:48Z", "BRcloseT": "2020-11-11T17:05:25Z", "BR_text": {"BRsummary": "Calling module.log(...) within a callback fails", "BRdescription": "\n <denchmark-h:h2>\ud83d\udc1b Bug</denchmark-h>\n \n Calling pl_module.log(...) within a Callback fails, even though this is recommended by the documentation here: <denchmark-link:https://pytorch-lightning.readthedocs.io/en/latest/loggers.html#logging-from-a-callback>https://pytorch-lightning.readthedocs.io/en/latest/loggers.html#logging-from-a-callback</denchmark-link>\n \n <denchmark-h:h3>Error</denchmark-h>\n \n <denchmark-code>  File \"my_callback_file.py\", line XX, in on_validation_epoch_end\n     pl_module.log_dict(my_metrics_dict)\n   File \"/home/local/USHERBROOKE/pain5474/opt/miniconda3/envs/cav/lib/python3.8/site-packages/pytorch_lightning/core/lightning.py\", line 287, in log_dict\n     self.log(\n   File \"/home/local/USHERBROOKE/pain5474/opt/miniconda3/envs/cav/lib/python3.8/site-packages/pytorch_lightning/core/lightning.py\", line 233, in log\n     self._results.log(\n   File \"/home/local/USHERBROOKE/pain5474/opt/miniconda3/envs/cav/lib/python3.8/site-packages/pytorch_lightning/core/step_result.py\", line 171, in log\n     self.__set_meta(\n   File \"/home/local/USHERBROOKE/pain5474/opt/miniconda3/envs/cav/lib/python3.8/site-packages/pytorch_lightning/core/step_result.py\", line 217, in __set_meta\n     _internal = self['meta']['_internal']\n KeyError: '_internal'\n python-BaseException\n </denchmark-code>\n \n cc <denchmark-link:https://github.com/nathanpainchaud>@nathanpainchaud</denchmark-link>\n \n This is happening on master\n <denchmark-h:h3>Expected behavior</denchmark-h>\n \n We can log from callbacks using the lightning module\n <denchmark-h:h3>Environment</denchmark-h>\n \n Happening on PyTorch Lightning master\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "ananthsub", "commentT": "2020-10-07T09:14:54Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/ananthsub>@ananthsub</denchmark-link>\n  I just tried on master and cannot reproduce (I think it was solved yesterday, as I could reproduce 2 days ago).\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "ananthsub", "commentT": "2020-10-07T16:12:50Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/SkafteNicki>@SkafteNicki</denchmark-link>\n  The issue was created by <denchmark-link:https://github.com/ananthsub>@ananthsub</denchmark-link>\n  based on a question/issue I initially raised in the slack. I'll try to see if the bug is now resolved on master for me (it was still present as of yesterday afternoon) and I'll update you here as soon as I can.\n Edit: <denchmark-link:https://github.com/SkafteNicki>@SkafteNicki</denchmark-link>\n  The issue persists on my end, after having just pulled the master. I'll try to write a test today that can reliably reproduce this behavior, and I'll open a draft PR and link it here once I do.\n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "ananthsub", "commentT": "2020-10-14T11:48:46Z", "comment_text": "\n \t\tHey <denchmark-link:https://github.com/nathanpainchaud>@nathanpainchaud</denchmark-link>\n ,\n Did you manage to reliably reproduce this behaviour? And if yes, could share the draft PR associated with this issue ?\n I will try to try it out too.\n Best regards,\n Thomas Chaton.\n \t\t"}, "comments_3": {"comment_id": 4, "comment_author": "ananthsub", "commentT": "2020-10-14T13:37:16Z", "comment_text": "\n \t\tHey <denchmark-link:https://github.com/tchaton>@tchaton</denchmark-link>\n ,\n Thanks for the follow up! I opened the <denchmark-link:https://github.com/PyTorchLightning/pytorch-lightning/pull/4144>draft PR</denchmark-link>\n  where I added a test that reproduces the behavior I'm getting.\n If I can help in any other way to get this sorted, just let me know!\n \t\t"}, "comments_4": {"comment_id": 5, "comment_author": "ananthsub", "commentT": "2020-10-30T19:47:48Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/tchaton>@tchaton</denchmark-link>\n  Any updates on whether this is a feature that's planned to be supported, or on the contrary it's been abandoned? I'm only asking this question because the issue has been labelled priority for a while, but every PR referring to it have been closed without getting merged \n \t\t"}, "comments_5": {"comment_id": 6, "comment_author": "ananthsub", "commentT": "2020-10-30T21:49:33Z", "comment_text": "\n \t\tYes! thats been worked on these weeks. Starting to be merged now (<denchmark-link:https://github.com/PyTorchLightning/pytorch-lightning/pull/4439>#4439</denchmark-link>\n )\n \t\t"}}}, "commit": {"commit_id": "3d202f9ecc4137b08cb5b1ac15af276456fcfaaf", "commit_author": "chaton", "commitT": "2020-11-11 17:05:24+00:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "CHANGELOG.md", "file_new_name": "CHANGELOG.md", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "36,37,38,39,40,42", "deleted_lines": "36"}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "pytorch_lightning\\trainer\\connectors\\logger_connector\\epoch_result_store.py", "file_new_name": "pytorch_lightning\\trainer\\connectors\\logger_connector\\epoch_result_store.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "423,430,448,449,450,459,460,461", "deleted_lines": "428", "method_info": {"method_name": "update_logger_connector", "method_params": "self,str", "method_startline": "411", "method_endline": "464"}}}}, "file_2": {"file_change_type": "MODIFY", "file_Nmethod": 14, "file_old_name": "pytorch_lightning\\trainer\\connectors\\logger_connector\\logger_connector.py", "file_new_name": "pytorch_lightning\\trainer\\connectors\\logger_connector\\logger_connector.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "229", "deleted_lines": "229,231", "method_info": {"method_name": "track_metrics_deprecated", "method_params": "self,deprecated_eval_results,using_eval_result,test_mode", "method_startline": "229", "method_endline": "231"}}, "hunk_1": {"Ismethod": 1, "added_lines": "254,255,256,257,258", "deleted_lines": "256,257,258", "method_info": {"method_name": "prepare_eval_loop_results", "method_params": "self", "method_startline": "254", "method_endline": "258"}}, "hunk_2": {"Ismethod": 1, "added_lines": "64", "deleted_lines": "62,65", "method_info": {"method_name": "on_evaluation_batch_start", "method_params": "self,testing,batch,dataloader_idx,num_dataloaders", "method_startline": "62", "method_endline": "67"}}, "hunk_3": {"Ismethod": 1, "added_lines": "39", "deleted_lines": null, "method_info": {"method_name": "__init__", "method_params": "self,trainer", "method_startline": "36", "method_endline": "46"}}, "hunk_4": {"Ismethod": 1, "added_lines": "260,261,262", "deleted_lines": "260,261,262,263,264,265,266,267,268,269,270,271,272,273,274,275,276", "method_info": {"method_name": "get_evaluate_epoch_results", "method_params": "self,test_mode", "method_startline": "260", "method_endline": "276"}}, "hunk_5": {"Ismethod": 1, "added_lines": "256,257,258,259,260,261,262,289,292,308,321", "deleted_lines": "256,257,258,259,260,261,262,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,287,288,289,290,291,292,293,294,295,296,297,298,299,300,301,302,303,304,305,306,307,308,309,310,311,312,313,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,329,330,331", "method_info": {"method_name": "_log_on_evaluation_epoch_end_metrics", "method_params": "self,epoch_logs", "method_startline": "256", "method_endline": "331"}}, "hunk_6": {"Ismethod": 1, "added_lines": null, "deleted_lines": "349,350,351,352,353,354", "method_info": {"method_name": "__rename_keys_by_dataloader_idx", "method_params": "self,metrics,dataloader_idx,num_loaders", "method_startline": "349", "method_endline": "354"}}, "hunk_7": {"Ismethod": 1, "added_lines": "242,243,244,245,246,247,248,249,250,251,252", "deleted_lines": null, "method_info": {"method_name": "add_to_eval_loop_results", "method_params": "self,dl_idx,has_been_initialized", "method_startline": "242", "method_endline": "252"}}, "hunk_8": {"Ismethod": 1, "added_lines": "289,292,308,321", "deleted_lines": "278,279,280,281,282,283,284,285,286,287,288,289,290,291,292,293,294,295,296,297,298,299,300,301,302,303,304,305,306,307,308,309,310,311,312,313,314,315,316,317,318,319,320,321", "method_info": {"method_name": "_track_callback_metrics", "method_params": "self,eval_results,using_eval_result", "method_startline": "278", "method_endline": "321"}}, "hunk_9": {"Ismethod": 1, "added_lines": "335,336,338", "deleted_lines": "323,324,325,326,327,328,329,330,331,332,333,334,335,336,337,338,339,340,341", "method_info": {"method_name": "__process_eval_epoch_end_results_and_log_legacy_update", "method_params": "self,prog_bar_metrics,log_metrics,callback_metrics", "method_startline": "323", "method_endline": "341"}}, "hunk_10": {"Ismethod": 1, "added_lines": "241,242,243,244,245,246,247,248,249,250,251,252,254", "deleted_lines": "241", "method_info": {"method_name": "_get_evaluate_epoch_results", "method_params": "self,test_mode", "method_startline": "241", "method_endline": "254"}}, "hunk_11": {"Ismethod": 1, "added_lines": "229,233,234,235,236,237,238,239", "deleted_lines": "229,231,232,235,237,238,239", "method_info": {"method_name": "on_evaluation_epoch_end", "method_params": "self,deprecated_eval_results,epoch_logs,using_eval_result,test_mode", "method_startline": "229", "method_endline": "239"}}, "hunk_12": {"Ismethod": 1, "added_lines": "233,234,235,236,237,238,239,240", "deleted_lines": "235,237,238,239", "method_info": {"method_name": "evaluation_epoch_end", "method_params": "self,testing", "method_startline": "233", "method_endline": "240"}}, "hunk_13": {"Ismethod": 1, "added_lines": "335,336,338", "deleted_lines": "333,334,335,336,337,338,339,340,341,342,343,344,345,346,347", "method_info": {"method_name": "add_to_eval_loop_results", "method_params": "self,dl_idx,num_loaders", "method_startline": "333", "method_endline": "347"}}}}, "file_3": {"file_change_type": "MODIFY", "file_Nmethod": 17, "file_old_name": "pytorch_lightning\\trainer\\evaluation_loop.py", "file_new_name": "pytorch_lightning\\trainer\\evaluation_loop.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "169,172,175,178,179", "deleted_lines": null, "method_info": {"method_name": "evaluation_step", "method_params": "self,test_mode,batch,batch_idx,dataloader_idx", "method_startline": "165", "method_endline": "190"}}, "hunk_1": {"Ismethod": 1, "added_lines": "299", "deleted_lines": "302,303,304,305,306", "method_info": {"method_name": "on_evaluation_batch_start", "method_params": "self,batch,batch_idx,dataloader_idx", "method_startline": "298", "method_endline": "306"}}, "hunk_2": {"Ismethod": 1, "added_lines": "235,243,247,248,263,264,265", "deleted_lines": "220,226,227,228,239,242,248,251", "method_info": {"method_name": "__run_eval_epoch_end", "method_params": "self,num_dataloaders,using_eval_result", "method_startline": "220", "method_endline": "266"}}, "hunk_3": {"Ismethod": 1, "added_lines": "350,351,352,353", "deleted_lines": "350,355", "method_info": {"method_name": "log_evaluation_step_metrics_legacy", "method_params": "self,output,batch_idx", "method_startline": "350", "method_endline": "355"}}, "hunk_4": {"Ismethod": 1, "added_lines": "316,317", "deleted_lines": "316,318,320", "method_info": {"method_name": "on_evaluation_batch_end", "method_params": "self,args,kwargs", "method_startline": "316", "method_endline": "320"}}, "hunk_5": {"Ismethod": 1, "added_lines": "215,216,217", "deleted_lines": "215,216,217,218", "method_info": {"method_name": "log_epoch_metrics_on_evaluation_end", "method_params": "self", "method_startline": "215", "method_endline": "218"}}, "hunk_6": {"Ismethod": 1, "added_lines": null, "deleted_lines": "357,358,359", "method_info": {"method_name": "__log_result_step_metrics", "method_params": "self,output,batch_idx", "method_startline": "357", "method_endline": "373"}}, "hunk_7": {"Ismethod": 1, "added_lines": "213,215,216,217", "deleted_lines": "213,214,215,216,217,218,219,220", "method_info": {"method_name": "log_epoch_metrics", "method_params": "self,deprecated_eval_results,epoch_logs,test_mode", "method_startline": "213", "method_endline": "221"}}, "hunk_8": {"Ismethod": 1, "added_lines": "199,200,201,202,206", "deleted_lines": "197,201,202,203,204,211", "method_info": {"method_name": "evaluation_epoch_end", "method_params": "self,num_dataloaders", "method_startline": "197", "method_endline": "211"}}, "hunk_9": {"Ismethod": 1, "added_lines": null, "deleted_lines": "322", "method_info": {"method_name": "evaluation_batch_end_cleanup", "method_params": "self,output,batch_idx,dataloader_idx", "method_startline": "322", "method_endline": "330"}}, "hunk_10": {"Ismethod": 1, "added_lines": null, "deleted_lines": "112,113", "method_info": {"method_name": "on_evaluation_end", "method_params": "self,args,kwargs", "method_startline": "106", "method_endline": "113"}}, "hunk_11": {"Ismethod": 1, "added_lines": "346,349,350,351,352,353", "deleted_lines": "346,347,348,349,350,355,357,358,359", "method_info": {"method_name": "__log_result_step_metrics", "method_params": "self,step_log_metrics,step_pbar_metrics,batch_idx", "method_startline": "346", "method_endline": "364"}}, "hunk_12": {"Ismethod": 1, "added_lines": "339,341,342,344,346", "deleted_lines": "339,340,341,342,343,344,345,346,347", "method_info": {"method_name": "log_evaluation_step_metrics", "method_params": "self,batch,batch_idx", "method_startline": "339", "method_endline": "347"}}, "hunk_13": {"Ismethod": 1, "added_lines": "199,200,201,202,206,213", "deleted_lines": "201,202,203,204,211,213", "method_info": {"method_name": "evaluation_epoch_end", "method_params": "self", "method_startline": "199", "method_endline": "213"}}, "hunk_14": {"Ismethod": 1, "added_lines": "334,338,339,341,342,344", "deleted_lines": "339,340,341,342,343,344", "method_info": {"method_name": "log_evaluation_step_metrics", "method_params": "self,output,batch_idx", "method_startline": "334", "method_endline": "344"}}, "hunk_15": {"Ismethod": 1, "added_lines": "308,310,312,314,315", "deleted_lines": null, "method_info": {"method_name": "on_evaluation_batch_end", "method_params": "self,output,batch,batch_idx,dataloader_idx", "method_startline": "308", "method_endline": "315"}}, "hunk_16": {"Ismethod": 1, "added_lines": "317", "deleted_lines": "318,320,322", "method_info": {"method_name": "store_predictions", "method_params": "self,output,batch_idx,dataloader_idx", "method_startline": "317", "method_endline": "325"}}}}, "file_4": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "pytorch_lightning\\trainer\\trainer.py", "file_new_name": "pytorch_lightning\\trainer\\trainer.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "604,607,608,613,617,622,623,624,625,626,627,628,629,630", "deleted_lines": "578,585,604,607,608,609,610,611,612,613,614,615,616,617,623,626,627,628,629,630,631,632", "method_info": {"method_name": "run_evaluation", "method_params": "self,bool,max_batches", "method_startline": "550", "method_endline": "635"}}, "hunk_1": {"Ismethod": 1, "added_lines": "868,869,892,893", "deleted_lines": "877,878,879,880", "method_info": {"method_name": "call_hook", "method_params": "self,hook_name,args,kwargs", "method_startline": "867", "method_endline": "894"}}}}, "file_5": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "tests\\models\\test_hooks.py", "file_new_name": "tests\\models\\test_hooks.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "337", "deleted_lines": "336", "method_info": {"method_name": "test_trainer_model_hook_system", "method_params": "tmpdir", "method_startline": "148", "method_endline": "362"}}}}, "file_6": {"file_change_type": "MODIFY", "file_Nmethod": 3, "file_old_name": "tests\\trainer\\legacy_deprecate_flow_log_tests\\test_eval_loop_dict_return.py", "file_new_name": "tests\\trainer\\legacy_deprecate_flow_log_tests\\test_eval_loop_dict_return.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "193", "deleted_lines": "193", "method_info": {"method_name": "test_val_step_step_end_no_return", "method_params": "tmpdir", "method_startline": "169", "method_endline": "199"}}, "hunk_1": {"Ismethod": 1, "added_lines": "47", "deleted_lines": "47", "method_info": {"method_name": "test_validation_step_no_return", "method_params": "tmpdir", "method_startline": "23", "method_endline": "53"}}, "hunk_2": {"Ismethod": 1, "added_lines": "78", "deleted_lines": "78", "method_info": {"method_name": "test_validation_step_scalar_return", "method_params": "tmpdir", "method_startline": "56", "method_endline": "85"}}}}, "file_7": {"file_change_type": "MODIFY", "file_Nmethod": 3, "file_old_name": "tests\\trainer\\logging\\test_logger_connector.py", "file_new_name": "tests\\trainer\\logging\\test_logger_connector.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "247,248,249", "deleted_lines": null, "method_info": {"method_name": "test__logger_connector__epoch_result_store__test_multi_dataloaders.on_test_epoch_end", "method_params": "self", "method_startline": "247", "method_endline": "249"}}, "hunk_1": {"Ismethod": 1, "added_lines": "243,244,245", "deleted_lines": null, "method_info": {"method_name": "test__logger_connector__epoch_result_store__test_multi_dataloaders.on_test_batch_end", "method_params": "self,args,kwargs", "method_startline": "243", "method_endline": "245"}}, "hunk_2": {"Ismethod": 1, "added_lines": "243,244,245,246,247,248,249,250,271,280", "deleted_lines": "263,272", "method_info": {"method_name": "test__logger_connector__epoch_result_store__test_multi_dataloaders", "method_params": "tmpdir,num_dataloaders", "method_startline": "218", "method_endline": "285"}}}}, "file_8": {"file_change_type": "MODIFY", "file_Nmethod": 28, "file_old_name": "tests\\trainer\\logging_tests\\test_eval_loop_logging_1_0.py", "file_new_name": "tests\\trainer\\logging_tests\\test_eval_loop_logging_1_0.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "487,488,489", "deleted_lines": null, "method_info": {"method_name": "test_log_works_in_val_callback.on_validation_batch_start", "method_params": "self,trainer,pl_module,batch,batch_idx,dataloader_idx", "method_startline": "487", "method_endline": "489"}}, "hunk_1": {"Ismethod": 1, "added_lines": "655,656,657", "deleted_lines": null, "method_info": {"method_name": "test_log_works_in_test_callback.on_test_start", "method_params": "self,trainer,pl_module", "method_startline": "655", "method_endline": "657"}}, "hunk_2": {"Ismethod": 1, "added_lines": "503,504,505", "deleted_lines": null, "method_info": {"method_name": "test_log_works_in_val_callback.on_epoch_end", "method_params": "self,trainer,pl_module", "method_startline": "503", "method_endline": "505"}}, "hunk_3": {"Ismethod": 1, "added_lines": "556,557,558,559,560,561,562,563,564", "deleted_lines": null, "method_info": {"method_name": "test_log_works_in_val_callback.get_expected_output", "method_params": "func_attr,original_values", "method_startline": "556", "method_endline": "564"}}, "hunk_4": {"Ismethod": 1, "added_lines": "659,660,661", "deleted_lines": null, "method_info": {"method_name": "test_log_works_in_test_callback.on_epoch_start", "method_params": "self,trainer,pl_module", "method_startline": "659", "method_endline": "661"}}, "hunk_5": {"Ismethod": 1, "added_lines": "671,672,673,674,675,676,677,678", "deleted_lines": null, "method_info": {"method_name": "test_log_works_in_test_callback.on_test_batch_end", "method_params": "self,trainer,pl_module,outputs,batch,batch_idx,dataloader_idx", "method_startline": "671", "method_endline": "678"}}, "hunk_6": {"Ismethod": 1, "added_lines": "479,480,481", "deleted_lines": null, "method_info": {"method_name": "test_log_works_in_val_callback.on_validation_epoch_start", "method_params": "self,trainer,pl_module", "method_startline": "479", "method_endline": "481"}}, "hunk_7": {"Ismethod": 1, "added_lines": "667,668,669", "deleted_lines": null, "method_info": {"method_name": "test_log_works_in_test_callback.on_test_batch_start", "method_params": "self,trainer,pl_module,batch,batch_idx,dataloader_idx", "method_startline": "667", "method_endline": "669"}}, "hunk_8": {"Ismethod": 1, "added_lines": "740,741,742,743,744,745,746", "deleted_lines": null, "method_info": {"method_name": "test_log_works_in_test_callback.get_expected_output", "method_params": "func_attr,original_values", "method_startline": "740", "method_endline": "746"}}, "hunk_9": {"Ismethod": 1, "added_lines": "663,664,665", "deleted_lines": null, "method_info": {"method_name": "test_log_works_in_test_callback.on_test_epoch_start", "method_params": "self,trainer,pl_module", "method_startline": "663", "method_endline": "665"}}, "hunk_10": {"Ismethod": 1, "added_lines": "438,439", "deleted_lines": null, "method_info": {"method_name": "test_log_works_in_val_callback.make_logging", "method_params": "self,pl_module,func_name,func_idx,on_steps,on_epochs,prob_bars", "method_startline": "438", "method_endline": "439"}}, "hunk_11": {"Ismethod": 1, "added_lines": null, "deleted_lines": "389", "method_info": {"method_name": "test_multi_dataloaders_add_suffix_properly", "method_params": "tmpdir", "method_startline": "363", "method_endline": "391"}}, "hunk_12": {"Ismethod": 1, "added_lines": "306,307,308,311,314", "deleted_lines": "302,303,304,305,307,308,309,312", "method_info": {"method_name": "test_eval_logging_auto_reduce", "method_params": "tmpdir", "method_startline": "252", "method_endline": "314"}}, "hunk_13": {"Ismethod": 1, "added_lines": "507,508,509", "deleted_lines": null, "method_info": {"method_name": "test_log_works_in_val_callback.on_validation_epoch_end", "method_params": "self,trainer,pl_module", "method_startline": "507", "method_endline": "509"}}, "hunk_14": {"Ismethod": 1, "added_lines": "680,681,682", "deleted_lines": null, "method_info": {"method_name": "test_log_works_in_test_callback.on_epoch_end", "method_params": "self,trainer,pl_module", "method_startline": "680", "method_endline": "682"}}, "hunk_15": {"Ismethod": 1, "added_lines": "595,596,597,598,599,600,601,602,603,604,605,606,607,608,609,610,611,612,613,614,615,616,617,618,619,620,621,622,623,624,625,626,627,628,629,630,631,632,633,634,635,636,637,638,639,640,641,642,643,644,645,646,647,648,649,650,651,652,653,654,655,656,657,658,659,660,661,662,663,664,665,666,667,668,669,670,671,672,673,674,675,676,677,678,679,680,681,682,683,684,685,686,687,688,689,690,691,692,693,694,695,696,697,698,699,700,701,702,703,704,705,706,707,708,709,710,711,712,713,714,715,716,717,718,719,720,721,722,723,724,725,726,727,728,729,730,731,732,733,734,735,736,737,738,739,740,741,742,743,744,745,746,747,748,749,750,751,752,753,754,755,756,757,758,759,760,761,762,763,764,765,766,767,768,769,770,771,772,773,774,775,776,777,778,779,780,781,782", "deleted_lines": null, "method_info": {"method_name": "test_log_works_in_test_callback", "method_params": "tmpdir", "method_startline": "595", "method_endline": "782"}}, "hunk_16": {"Ismethod": 1, "added_lines": "684,685,686", "deleted_lines": null, "method_info": {"method_name": "test_log_works_in_test_callback.on_test_epoch_end", "method_params": "self,trainer,pl_module", "method_startline": "684", "method_endline": "686"}}, "hunk_17": {"Ismethod": 1, "added_lines": "695,696,697,698,699", "deleted_lines": null, "method_info": {"method_name": "test_log_works_in_test_callback.test_step", "method_params": "self,batch,batch_idx,dataloader_idx", "method_startline": "695", "method_endline": "699"}}, "hunk_18": {"Ismethod": 1, "added_lines": "701,702", "deleted_lines": null, "method_info": {"method_name": "test_log_works_in_test_callback.test_dataloader", "method_params": "self", "method_startline": "701", "method_endline": "702"}}, "hunk_19": {"Ismethod": 1, "added_lines": "483,484,485", "deleted_lines": null, "method_info": {"method_name": "test_log_works_in_val_callback.on_batch_start", "method_params": "self,trainer,pl_module", "method_startline": "483", "method_endline": "485"}}, "hunk_20": {"Ismethod": 1, "added_lines": "471,472,473", "deleted_lines": null, "method_info": {"method_name": "test_log_works_in_val_callback.on_validation_start", "method_params": "self,trainer,pl_module", "method_startline": "471", "method_endline": "473"}}, "hunk_21": {"Ismethod": 1, "added_lines": "475,476,477", "deleted_lines": null, "method_info": {"method_name": "test_log_works_in_val_callback.on_epoch_start", "method_params": "self,trainer,pl_module", "method_startline": "475", "method_endline": "477"}}, "hunk_22": {"Ismethod": 1, "added_lines": "422,423,424,425,426,427,428,429,430,431,432,433,434,435,436,437,438,439,440,441,442,443,444,445,446,447,448,449,450,451,452,453,454,455,456,457,458,459,460,461,462,463,464,465,466,467,468,469,470,471,472,473,474,475,476,477,478,479,480,481,482,483,484,485,486,487,488,489,490,491,492,493,494,495,496,497,498,499,500,501,502,503,504,505,506,507,508,509,510,511,512,513,514,515,516,517,518,519,520,521,522,523,524,525,526,527,528,529,530,531,532,533,534,535,536,537,538,539,540,541,542,543,544,545,546,547,548,549,550,551,552,553,554,555,556,557,558,559,560,561,562,563,564,565,566,567,568,569,570,571,572,573,574,575,576,577,578,579,580,581,582,583,584,585,586,587,588,589,590,591,592", "deleted_lines": null, "method_info": {"method_name": "test_log_works_in_val_callback", "method_params": "tmpdir", "method_startline": "422", "method_endline": "592"}}, "hunk_23": {"Ismethod": 1, "added_lines": "513,514,515,516", "deleted_lines": null, "method_info": {"method_name": "test_log_works_in_val_callback.validation_step", "method_params": "self,batch,batch_idx", "method_startline": "513", "method_endline": "516"}}, "hunk_24": {"Ismethod": 1, "added_lines": "491,492,493", "deleted_lines": null, "method_info": {"method_name": "test_log_works_in_val_callback.on_batch_end", "method_params": "self,trainer,pl_module", "method_startline": "491", "method_endline": "493"}}, "hunk_25": {"Ismethod": 1, "added_lines": "612,613", "deleted_lines": null, "method_info": {"method_name": "test_log_works_in_test_callback.make_logging", "method_params": "self,pl_module,func_name,func_idx,on_steps,on_epochs,prob_bars", "method_startline": "612", "method_endline": "613"}}, "hunk_26": {"Ismethod": 1, "added_lines": "322", "deleted_lines": "323", "method_info": {"method_name": "test_eval_epoch_only_logging", "method_params": "tmpdir,batches,log_interval,max_epochs", "method_startline": "318", "method_endline": "347"}}, "hunk_27": {"Ismethod": 1, "added_lines": "495,496,497,498,499,500,501", "deleted_lines": null, "method_info": {"method_name": "test_log_works_in_val_callback.on_validation_batch_end", "method_params": "self,trainer,pl_module,outputs,batch,batch_idx,dataloader_idx", "method_startline": "495", "method_endline": "501"}}}}}}}