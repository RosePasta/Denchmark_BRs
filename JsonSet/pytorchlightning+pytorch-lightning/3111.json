{"BR": {"BR_id": "3111", "BR_author": "mutasem-mattar", "BRopenT": "2020-08-23T10:38:33Z", "BRcloseT": "2020-09-09T00:30:59Z", "BR_text": {"BRsummary": "Horovod with native 16 precision not working", "BRdescription": "\n <denchmark-h:h2>\ud83d\udc1b Bug</denchmark-h>\n \n <denchmark-h:h3>To Reproduce</denchmark-h>\n \n Steps to reproduce the behavior:\n \n using precision=16 with distributed_backend=horovod\n \n <denchmark-code>Traceback (most recent call last):\n   File \"/workspace/main_lightning.py\", line 500, in <module>\n     main(hyperparams)\n   File \"/workspace/main_lightning.py\", line 492, in main\n     trainer.fit(model)\n   File \"/usr/local/lib/python3.6/dist-packages/pytorch_lightning/trainer/states.py\", line 48, in wrapped_fn\n     result = fn(self, *args, **kwargs)\n   File \"/usr/local/lib/python3.6/dist-packages/pytorch_lightning/trainer/trainer.py\", line 1068, in fit\n     results = self.horovod_train(model)\n   File \"/usr/local/lib/python3.6/dist-packages/pytorch_lightning/trainer/distrib_parts.py\", line 213, in horovod_train\n     model, optimizers = model.configure_apex(amp, model, self.optimizers, self.amp_level)\n   File \"/usr/local/lib/python3.6/dist-packages/pytorch_lightning/core/lightning.py\", line 954, in configure_apex\n     model, optimizers = amp.initialize(model, optimizers, opt_level=amp_level)\n </denchmark-code>\n \n <denchmark-h:h4>Code sample</denchmark-h>\n \n <denchmark-code>trainer = Trainer(\n         precision=16,\n         gpus=1,\n         distributed_backend=\"horovod\")\n </denchmark-code>\n \n <denchmark-h:h3>Environment</denchmark-h>\n \n \n PyTorch Version: 1.6.0+cu101\n How you installed PyTorch: pip\n \n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "mutasem-mattar", "commentT": "2020-08-25T08:14:43Z", "comment_text": "\n \t\tmind have look <denchmark-link:https://github.com/tgaddair>@tgaddair</denchmark-link>\n  \n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "mutasem-mattar", "commentT": "2020-08-25T13:07:31Z", "comment_text": "\n \t\tAbsolutely, let me take a look today and get back to you, <denchmark-link:https://github.com/mutasem-mattar>@mutasem-mattar</denchmark-link>\n .\n \t\t"}}}, "commit": {"commit_id": "091d37f968b593e7e3b212d53bec6395a8c546de", "commit_author": "Travis Addair", "commitT": "2020-09-08 20:30:57-04:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "CHANGELOG.md", "file_new_name": "CHANGELOG.md", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "42,43", "deleted_lines": null}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "pytorch_lightning\\accelerators\\horovod_backend.py", "file_new_name": "pytorch_lightning\\accelerators\\horovod_backend.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "90,91,92,93,94", "deleted_lines": "75,76,77,78,79", "method_info": {"method_name": "setup", "method_params": "self,model", "method_startline": "42", "method_endline": "100"}}}}, "file_2": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "tests\\models\\test_horovod.py", "file_new_name": "tests\\models\\test_horovod.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "45,46", "deleted_lines": "45,46", "method_info": {"method_name": "_run_horovod", "method_params": "trainer_options,on_gpu", "method_startline": "42", "method_endline": "57"}}, "hunk_1": {"Ismethod": 1, "added_lines": "116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131", "deleted_lines": null, "method_info": {"method_name": "test_horovod_amp", "method_params": "tmpdir", "method_startline": "116", "method_endline": "131"}}}}}}}