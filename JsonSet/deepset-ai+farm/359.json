{"BR": {"BR_id": "359", "BR_author": "aloizel", "BRopenT": "2020-05-12T09:04:28Z", "BRcloseT": "2020-05-12T13:43:39Z", "BR_text": {"BRsummary": "N_added_tokens on XLMRoBERTa", "BRdescription": "\n Hi guys,\n I'm trying to use a further train XLMRoBERTa and I got the following error :\n <denchmark-code>AssertionError: Vocab size of tokenizer 250002 doesn't match with model 250005. If you added a custom vocabulary to the tokenizer, make sure to supply 'n_added_tokens' to LanguageModel.load() and BertStyleLM.load()\n </denchmark-code>\n \n So I looked to <denchmark-link:https://github.com/deepset-ai/FARM/blob/master/farm/modeling/language_model.py>language_model.py</denchmark-link>\n  and you have\n <denchmark-code>if language_model_class == 'XLMRoberta':\n TODO: for some reason, the pretrained XLMRoberta has different vocab size in the tokenizer compared to the model this is a hack to resolve that\n                 n_added_tokens = 3\n </denchmark-code>\n \n On line 155, that is unecesary now.\n If you try to load a classic XLMRoBERTa on Farm it's not working anymore because of this line, a fix have been made from transformers. Can you update this please ? Thanks a lot\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "aloizel", "commentT": "2020-05-12T10:26:04Z", "comment_text": "\n \t\tThanks <denchmark-link:https://github.com/aloizel>@aloizel</denchmark-link>\n . I can confirm that. Removing these lines will solve the issue (and the nasty hack we implemented in the first place).\n Do you want to create a PR? You were the one who spotted the issue + found the solution. If not I can gladly merge it into master myself.\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "aloizel", "commentT": "2020-05-12T10:27:57Z", "comment_text": "\n \t\tNo it's ok you can do it, thanks !\n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "aloizel", "commentT": "2020-05-12T13:43:39Z", "comment_text": "\n \t\tK - thanks, solved with <denchmark-link:https://github.com/deepset-ai/FARM/pull/360>#360</denchmark-link>\n \n \t\t"}}}, "commit": {"commit_id": "37591d198813c999afe3766be2fa281af26a25e5", "commit_author": "Timo Moeller", "commitT": "2020-05-12 15:42:50+02:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "farm\\modeling\\language_model.py", "file_new_name": "farm\\modeling\\language_model.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": null, "deleted_lines": "155,156,157,158", "method_info": {"method_name": "load", "method_params": "cls,pretrained_model_name_or_path,n_added_tokens,language_model_class,kwargs", "method_startline": "82", "method_endline": "180"}}}}}}}