{"BR": {"BR_id": "608", "BR_author": "ahtsan", "BRopenT": "2019-03-29T01:12:17Z", "BRcloseT": "2019-04-27T04:21:38Z", "BR_text": {"BRsummary": "Model class unit test flaw", "BRdescription": "\n The tests for pickling models, e.g. GaussianMLPModel, do not test the weights pickling correctly. If pickle.dumps is called in another session, rather than the session the model is built, it will not be able to get the weights.\n TODO: Fix the test and state clearly in the documentation.\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "ahtsan", "commentT": "2019-03-29T01:21:09Z", "comment_text": "\n \t\tI don't think it would ever be possible (under TF<2.0) to dump from outside the session the model was built in.\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "ahtsan", "commentT": "2019-03-29T01:23:41Z", "comment_text": "\n \t\tHow about a nested session? The tf.get_default_session() will still get the wrong session and hence it cannot get the variables from the correct scope.\n \t\t"}}}, "commit": {"commit_id": "3a3bdf17ca08052309016bdfa481a58c70112abd", "commit_author": "Anson Wong", "commitT": "2019-04-26 21:21:37-07:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "tests\\fixtures\\models\\simple_gaussian_mlp_model.py", "file_new_name": "tests\\fixtures\\models\\simple_gaussian_mlp_model.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "18,19,20", "deleted_lines": "18", "method_info": {"method_name": "_build", "method_params": "self,obs_input,name", "method_startline": "17", "method_endline": "25"}}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "tests\\garage\\tf\\models\\test_cnn_model.py", "file_new_name": "tests\\garage\\tf\\models\\test_cnn_model.py", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "84", "deleted_lines": "84"}}}, "file_2": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "tests\\garage\\tf\\models\\test_gaussian_mlp_model.py", "file_new_name": "tests\\garage\\tf\\models\\test_gaussian_mlp_model.py", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "198,232,269", "deleted_lines": "198,232,269"}}}, "file_3": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "tests\\garage\\tf\\models\\test_mlp_model.py", "file_new_name": "tests\\garage\\tf\\models\\test_mlp_model.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "42,43,44,45,46,47,48,49,50,51,52,55,57,59", "deleted_lines": "42,46,47,48,49,51", "method_info": {"method_name": "test_is_pickleable", "method_params": "self,output_dim,hidden_sizes", "method_startline": "35", "method_endline": "59"}}}}, "file_4": {"file_change_type": "MODIFY", "file_Nmethod": 3, "file_old_name": "tests\\garage\\tf\\models\\test_model.py", "file_new_name": "tests\\garage\\tf\\models\\test_model.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "199,200,201,202,203,204", "deleted_lines": null, "method_info": {"method_name": "test_complicated_model_is_pickleable", "method_params": "self", "method_startline": "190", "method_endline": "218"}}, "hunk_1": {"Ismethod": 1, "added_lines": "230,231,232,233,234,235", "deleted_lines": null, "method_info": {"method_name": "test_complicated_model2_is_pickleable", "method_params": "self", "method_startline": "220", "method_endline": "249"}}, "hunk_2": {"Ismethod": 1, "added_lines": "164,165,166,167,168", "deleted_lines": null, "method_info": {"method_name": "test_model_is_pickleable", "method_params": "self", "method_startline": "156", "method_endline": "181"}}}}, "file_5": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "tests\\garage\\tf\\policies\\test_categorical_conv_policy_with_model.py", "file_new_name": "tests\\garage\\tf\\policies\\test_categorical_conv_policy_with_model.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "190", "deleted_lines": "190", "method_info": {"method_name": "test_is_pickleable", "method_params": "self,obs_dim,action_dim,mock_rand", "method_startline": "167", "method_endline": "200"}}}}, "file_6": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "tests\\garage\\tf\\policies\\test_categorical_mlp_policy_with_model.py", "file_new_name": "tests\\garage\\tf\\policies\\test_categorical_mlp_policy_with_model.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "112,113,114,115,116,117,118,122,124,125,126,127", "deleted_lines": "112,116,118,119,120,121,122,123,124,125,126", "method_info": {"method_name": "test_is_pickleable", "method_params": "self,obs_dim,action_dim,mock_rand", "method_startline": "101", "method_endline": "127"}}, "hunk_1": {"Ismethod": 1, "added_lines": "88", "deleted_lines": "88", "method_info": {"method_name": "test_dist_info_sym", "method_params": "self,obs_dim,action_dim", "method_startline": "74", "method_endline": "92"}}}}, "file_7": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "tests\\garage\\tf\\policies\\test_deterministic_mlp_policy_with_model.py", "file_new_name": "tests\\garage\\tf\\policies\\test_deterministic_mlp_policy_with_model.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "66", "deleted_lines": "66", "method_info": {"method_name": "test_get_action_sym", "method_params": "self,obs_dim,action_dim", "method_startline": "54", "method_endline": "73"}}, "hunk_1": {"Ismethod": 1, "added_lines": "93,94,95,96,97,98,99,102,104,105,106,107", "deleted_lines": "93,96,98,99,100", "method_info": {"method_name": "test_is_pickleable", "method_params": "self,obs_dim,action_dim", "method_startline": "83", "method_endline": "107"}}}}, "file_8": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "tests\\garage\\tf\\policies\\test_gaussian_mlp_policy_with_model.py", "file_new_name": "tests\\garage\\tf\\policies\\test_gaussian_mlp_policy_with_model.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "104,105,106,107,108,109,110,111,114,116,117,118,119", "deleted_lines": "104,107,109,110,111,112,113,114", "method_info": {"method_name": "test_is_pickleable", "method_params": "self,obs_dim,action_dim", "method_startline": "93", "method_endline": "119"}}}}, "file_9": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "tests\\garage\\tf\\q_functions\\test_discrete_mlp_q_function.py", "file_new_name": "tests\\garage\\tf\\q_functions\\test_discrete_mlp_q_function.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "77", "deleted_lines": "77", "method_info": {"method_name": "test_get_qval_sym", "method_params": "self,obs_dim,action_dim", "method_startline": "65", "method_endline": "83"}}, "hunk_1": {"Ismethod": 1, "added_lines": "100,101,102,103,104,105,113", "deleted_lines": "107", "method_info": {"method_name": "test_is_pickleable", "method_params": "self,obs_dim,action_dim", "method_startline": "91", "method_endline": "116"}}}}}}}