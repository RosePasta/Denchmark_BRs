{"BR": {"BR_id": "10174", "BR_author": "alalek", "BRopenT": "2017-11-27T14:32:19Z", "BRcloseT": "2017-12-15T18:48:49Z", "BR_text": {"BRsummary": "samples/cpp/kmeans.cpp: Invalid layout of \"center\"", "BRdescription": "\n Sample code expects CV_32FC2 type, but it is CV_32FC1 with 2 cols.\n Reproduced in Debug build only (catched by CV_DbgAssert()).\n <denchmark-code>        for (i = 0; i < centers.rows; ++i)\n         {\n             Point2f c = centers.at<Point2f>(i);     // <=== problem is here\n             circle( img, c, 40, colorTab[i], 1, LINE_AA );\n         }\n </denchmark-code>\n \n Changing declaration of centers:\n -Mat centers;\n +std::vector<Point2f> centers;\n doesn't work (exception during kmeans() call).\n Perhaps we should support this implicit conversion (via reshape).\n \t"}, "comments": {}}, "commit": {"commit_id": "bab86d65cb0f366ec64d04668a53cc175a4ebe19", "commit_author": "Rostislav Vasilikhin", "commitT": "2017-12-15 21:48:48+03:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "modules\\core\\src\\kmeans.cpp", "file_new_name": "modules\\core\\src\\kmeans.cpp", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "461,462,463,464,465,466", "deleted_lines": "461", "method_info": {"method_name": "cv::kmeans", "method_params": "_data,K,_bestLabels,criteria,attempts,flags,_centers", "method_startline": "228", "method_endline": "472"}}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "samples\\cpp\\kmeans.cpp", "file_new_name": "samples\\cpp\\kmeans.cpp", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "40,68,70", "deleted_lines": "40,68,70", "method_info": {"method_name": "main", "method_params": "int", "method_startline": "18", "method_endline": "83"}}}}}}}