{"BR": {"BR_id": "16051", "BR_author": "mcellis33", "BRopenT": "2019-12-03T15:54:06Z", "BRcloseT": "2019-12-19T14:38:20Z", "BR_text": {"BRsummary": "minEnclosingCircle returns NaN", "BRdescription": "\n <denchmark-h:h5>System information (version)</denchmark-h>\n \n \n OpenCV => 3.4\n Operating System / Platform => Linux 64 Bit\n Compiler => x86_64-linux-gnu-g++-8\n \n <denchmark-h:h5>Detailed description</denchmark-h>\n \n For particular contours, minEnclosingCircle sets center.x, center.y, and radius to NaN.\n This is because for particular contours, findCircle3pts is called such that the det of v1 and v2 is 0, yielding a division by zero. I have included an example set of points in the repro steps.\n <denchmark-h:h5>Steps to reproduce</denchmark-h>\n \n Here is a fairly minimal repro. You may need to tweak the headers/namespaces.\n <denchmark-code>#include <iostream.h>\n #include \"include/opencv2/imgproc/imgproc.hpp\"\n int main(int argc, char **argv) {\n   std::vector<cv::Point> contour(\n       {cv::Point(2085, 1415), cv::Point(2087, 1415), cv::Point(2089, 1414),\n        cv::Point(2089, 1414), cv::Point(2087, 1412)});\n   std::vector<cv::Point> approx_quad;\n   cv::Point2f center;\n   float radius;\n   cv::minEnclosingCircle(contour, center, radius);\n   printf(\"center [%f, %f], radius %f\\n\", center.x, center.y, radius);\n }\n </denchmark-code>\n \n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "mcellis33", "commentT": "2019-12-08T08:21:08Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/mcellis33>@mcellis33</denchmark-link>\n  do you suggest any specific solution for this issue? I think we can show a warning if the det becomes 0.\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "mcellis33", "commentT": "2019-12-11T18:59:44Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/heisenbuug>@heisenbuug</denchmark-link>\n  see <denchmark-link:https://github.com/opencv/opencv/pull/16136>#16136</denchmark-link>\n \n \t\t"}}}, "commit": {"commit_id": "5d15c65e48eb13509dd8425dc7c4ed3181f818b8", "commit_author": "mcellis33", "commitT": "2019-12-18 17:25:59+03:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 4, "file_old_name": "modules\\imgproc\\src\\shapedescr.cpp", "file_new_name": "modules\\imgproc\\src\\shapedescr.cpp", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "181,182,183,184,185,186,187", "deleted_lines": null, "method_info": {"method_name": "cv::findMinEnclosingCircle", "method_params": "pts,count,center,radius", "method_startline": "162", "method_endline": "190"}}, "hunk_1": {"Ismethod": 1, "added_lines": "149,150,151,152,153,154,155", "deleted_lines": "146", "method_info": {"method_name": "cv::findSecondPoint", "method_params": "pts,i,center,radius", "method_startline": "131", "method_endline": "158"}}, "hunk_2": {"Ismethod": 1, "added_lines": "63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85", "deleted_lines": null, "method_info": {"method_name": "cv::findCircle3pts", "method_params": "pts,center,radius", "method_startline": "49", "method_endline": "93"}}, "hunk_3": {"Ismethod": 1, "added_lines": "118,119,120,121,122,123,124", "deleted_lines": "120", "method_info": {"method_name": "cv::findThirdPoint", "method_params": "pts,i,j,center,radius", "method_startline": "96", "method_endline": "127"}}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "modules\\imgproc\\test\\test_convhull.cpp", "file_new_name": "modules\\imgproc\\test\\test_convhull.cpp", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "1153,1154,1155,1156,1157,1158,1159,1160,1161,1162,1163,1164,1165,1166", "deleted_lines": null, "method_info": {"method_name": "opencv_test::TEST", "method_params": "Imgproc_minEnclosingCircle,regression_16051", "method_startline": "1153", "method_endline": "1166"}}, "hunk_1": {"Ismethod": 1, "added_lines": "1091,1092,1093,1094,1095,1096,1097,1098,1099,1100,1101,1102,1103,1104,1105,1106,1107,1108,1109,1110,1111,1112,1113,1114,1115,1116,1117,1118,1119,1120,1121,1122,1123,1124,1125,1126,1127,1128,1129,1130,1131,1132,1133,1134,1135,1136,1137,1138,1139,1140,1141,1142,1143,1144,1145,1146,1147,1148,1149,1150,1151", "deleted_lines": null, "method_info": {"method_name": "opencv_test::TEST", "method_params": "Imgproc_minEnclosingCircle,basic_test", "method_startline": "1091", "method_endline": "1151"}}}}}}}