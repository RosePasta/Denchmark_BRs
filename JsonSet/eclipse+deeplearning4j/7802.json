{"BR": {"BR_id": "7802", "BR_author": "AlexDBlack", "BRopenT": "2019-05-29T04:56:37Z", "BRcloseT": "2019-06-03T01:13:17Z", "BR_text": {"BRsummary": "ND4J: Evaluation class reporting macro-averaged precision etc for binary case", "BRdescription": "\n Macro-averaged metrics should be reported for N>2 classes cases only.\n <denchmark-link:https://github.com/deeplearning4j/deeplearning4j/blob/8044f89b0e77e87ed522fecc0519e517e4ba1189/nd4j/nd4j-backends/nd4j-api-parent/nd4j-api/src/main/java/org/nd4j/evaluation/classification/Evaluation.java#L650-L652>https://github.com/deeplearning4j/deeplearning4j/blob/8044f89b0e77e87ed522fecc0519e517e4ba1189/nd4j/nd4j-backends/nd4j-api-parent/nd4j-api/src/main/java/org/nd4j/evaluation/classification/Evaluation.java#L650-L652</denchmark-link>\n \n <denchmark-link:https://github.com/deeplearning4j/deeplearning4j/blob/8044f89b0e77e87ed522fecc0519e517e4ba1189/nd4j/nd4j-backends/nd4j-api-parent/nd4j-api/src/main/java/org/nd4j/evaluation/classification/Evaluation.java#L684-L686>https://github.com/deeplearning4j/deeplearning4j/blob/8044f89b0e77e87ed522fecc0519e517e4ba1189/nd4j/nd4j-backends/nd4j-api-parent/nd4j-api/src/main/java/org/nd4j/evaluation/classification/Evaluation.java#L684-L686</denchmark-link>\n \n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "AlexDBlack", "commentT": "2019-05-29T12:52:35Z", "comment_text": "\n \t\tFixed here, will be merged to master soon: <denchmark-link:https://github.com/deeplearning4j/deeplearning4j/pull/7807>https://github.com/deeplearning4j/deeplearning4j/pull/7807</denchmark-link>\n \n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "AlexDBlack", "commentT": "2019-06-03T01:13:17Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/deeplearning4j/deeplearning4j/pull/7792>https://github.com/deeplearning4j/deeplearning4j/pull/7792</denchmark-link>\n \n \t\t"}}}, "commit": {"commit_id": "1e2bcc1026cc9c6b8117a4eb78ad12a82367ef04", "commit_author": "Alex Black", "commitT": "2019-05-29 22:52:12+10:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "arbiter\\arbiter-deeplearning4j\\src\\main\\java\\org\\deeplearning4j\\arbiter\\scoring\\impl\\EvaluationScoreFunction.java", "file_new_name": "arbiter\\arbiter-deeplearning4j\\src\\main\\java\\org\\deeplearning4j\\arbiter\\scoring\\impl\\EvaluationScoreFunction.java", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "43,44,45", "deleted_lines": null, "method_info": {"method_name": "EvaluationScoreFunction::EvaluationScoreFunction", "method_params": "metric", "method_startline": "43", "method_endline": "45"}}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "arbiter\\arbiter-deeplearning4j\\src\\main\\java\\org\\deeplearning4j\\arbiter\\scoring\\impl\\ROCScoreFunction.java", "file_new_name": "arbiter\\arbiter-deeplearning4j\\src\\main\\java\\org\\deeplearning4j\\arbiter\\scoring\\impl\\ROCScoreFunction.java", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "24,25,26", "deleted_lines": "22,23,24,25"}}}, "file_2": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "arbiter\\arbiter-deeplearning4j\\src\\main\\java\\org\\deeplearning4j\\arbiter\\scoring\\impl\\RegressionScoreFunction.java", "file_new_name": "arbiter\\arbiter-deeplearning4j\\src\\main\\java\\org\\deeplearning4j\\arbiter\\scoring\\impl\\RegressionScoreFunction.java", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "40,41,42", "deleted_lines": null, "method_info": {"method_name": "RegressionScoreFunction::RegressionScoreFunction", "method_params": "metric", "method_startline": "40", "method_endline": "42"}}}}, "file_3": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "nd4j\\nd4j-backends\\nd4j-api-parent\\nd4j-api\\src\\main\\java\\org\\nd4j\\autodiff\\functions\\DifferentialFunction.java", "file_new_name": "nd4j\\nd4j-backends\\nd4j-api-parent\\nd4j-api\\src\\main\\java\\org\\nd4j\\autodiff\\functions\\DifferentialFunction.java", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "647,648,649,650,651,652,654", "deleted_lines": "647,649", "method_info": {"method_name": "DifferentialFunction::setInstanceId", "method_params": "", "method_startline": "641", "method_endline": "664"}}}}, "file_4": {"file_change_type": "ADD", "file_Nmethod": 0, "file_old_name": "None", "file_new_name": "nd4j\\nd4j-backends\\nd4j-api-parent\\nd4j-api\\src\\main\\java\\org\\nd4j\\autodiff\\listeners\\checkpoint\\Checkpoint.java"}, "file_5": {"file_change_type": "ADD", "file_Nmethod": 0, "file_old_name": "None", "file_new_name": "nd4j\\nd4j-backends\\nd4j-api-parent\\nd4j-api\\src\\main\\java\\org\\nd4j\\autodiff\\listeners\\checkpoint\\CheckpointListener.java"}, "file_6": {"file_change_type": "ADD", "file_Nmethod": 0, "file_old_name": "None", "file_new_name": "nd4j\\nd4j-backends\\nd4j-api-parent\\nd4j-api\\src\\main\\java\\org\\nd4j\\autodiff\\samediff\\NameScope.java"}, "file_7": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "nd4j\\nd4j-backends\\nd4j-api-parent\\nd4j-api\\src\\main\\java\\org\\nd4j\\autodiff\\samediff\\SDVariable.java", "file_new_name": "nd4j\\nd4j-backends\\nd4j-api-parent\\nd4j-api\\src\\main\\java\\org\\nd4j\\autodiff\\samediff\\SDVariable.java", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "93,94,95,96,97", "deleted_lines": null, "method_info": {"method_name": "SDVariable::SDVariable", "method_params": "varName,varType,sameDiff,shape,dataType,weightInitScheme", "method_startline": "87", "method_endline": "103"}}}}, "file_8": {"file_change_type": "MODIFY", "file_Nmethod": 16, "file_old_name": "nd4j\\nd4j-backends\\nd4j-api-parent\\nd4j-api\\src\\main\\java\\org\\nd4j\\autodiff\\samediff\\SameDiff.java", "file_new_name": "nd4j\\nd4j-backends\\nd4j-api-parent\\nd4j-api\\src\\main\\java\\org\\nd4j\\autodiff\\samediff\\SameDiff.java", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "1836,1837,1838,1839,1840,1841,1843", "deleted_lines": null, "method_info": {"method_name": "SameDiff::calcRegularizationScore", "method_params": "", "method_startline": "1826", "method_endline": "1848"}}, "hunk_1": {"Ismethod": 1, "added_lines": "463,464,465,466,467,468,469", "deleted_lines": null, "method_info": {"method_name": "SameDiff::nameWithScope", "method_params": "name", "method_startline": "463", "method_endline": "469"}}, "hunk_2": {"Ismethod": 1, "added_lines": "522,523,524,525,526", "deleted_lines": null, "method_info": {"method_name": "SameDiff::withNameScope", "method_params": "nameScope", "method_startline": "522", "method_endline": "526"}}, "hunk_3": {"Ismethod": 1, "added_lines": "4030,4031", "deleted_lines": "4027", "method_info": {"method_name": "SameDiff::resolveVariablesWith", "method_params": "arrays", "method_startline": "4026", "method_endline": "4064"}}, "hunk_4": {"Ismethod": 1, "added_lines": "4519,4522,4524,4525,4526,4527,4528", "deleted_lines": "4507,4511,4513,4606", "method_info": {"method_name": "SameDiff::asFlatBuffers", "method_params": "graphId,configuration", "method_startline": "4472", "method_endline": "4622"}}, "hunk_5": {"Ismethod": 1, "added_lines": "1860,1861,1862,1863,1864,1865,1868,1869,1870,1871,1872,1874,1876,1877", "deleted_lines": null, "method_info": {"method_name": "SameDiff::initializeTraining", "method_params": "", "method_startline": "1855", "method_endline": "1882"}}, "hunk_6": {"Ismethod": 1, "added_lines": "2267,2268,2269,2270,2271,2272,2273,2274,2275", "deleted_lines": null, "method_info": {"method_name": "SameDiff::var", "method_params": "name,variableType,weightInitScheme,dataType,shape", "method_startline": "2265", "method_endline": "2289"}}, "hunk_7": {"Ismethod": 1, "added_lines": "1696,1697,1698,1699,1700,1701,1702,1703,1704,1730,1731,1735,1736,1757,1812,1813,1814,1815", "deleted_lines": "1632,1633,1637,1638,1659,1706,1707,1708,1709,1736,1737,1738,1741,1743,1760,1761,1762,1763,1764,1765,1766,1767,1768,1769,1770,1771,1772,1773,1774,1775,1776,1779,1780,1781,1782,1783,1784,1785,1786,1787,1788,1789,1790,1791,1792,1793,1794,1795,1796,1797,1798,1799,1800,1801,1803,1805,1806,1807,1808,1809,1810,1811,1812,1813,1814,1815", "method_info": {"method_name": "SameDiff::fitHelper", "method_params": "iter,numEpochs,incrementEpochCount", "method_startline": "1618", "method_endline": "1817"}}, "hunk_8": {"Ismethod": 1, "added_lines": "472,473,474", "deleted_lines": null, "method_info": {"method_name": "SameDiff::addNameScope", "method_params": "nameScope", "method_startline": "472", "method_endline": "474"}}, "hunk_9": {"Ismethod": 1, "added_lines": "477,478,479,480,481,482,483,484", "deleted_lines": null, "method_info": {"method_name": "SameDiff::closeNameScope", "method_params": "nameScope", "method_startline": "477", "method_endline": "484"}}, "hunk_10": {"Ismethod": 1, "added_lines": "2654,2656,2657,2658,2659,2660,2661,2662,2663,2664,2665,2666,2667,2668", "deleted_lines": "2623,2624,2625,2626,2627,2628,2629,2630,2631,2632,2634,2635,2636,2637,2638,2639,2640,2641,2642,2643,2644,2645,2646,2647,2648,2649,2650,2651,2652,2653,2654,2655,2656,2657", "method_info": {"method_name": "SameDiff::convertToVariables", "method_params": "constants", "method_startline": "2616", "method_endline": "2673"}}, "hunk_11": {"Ismethod": 1, "added_lines": "954,955,956,957,958,959,960", "deleted_lines": null, "method_info": {"method_name": "SameDiff::associateArrayWithVariable", "method_params": "arr,variable", "method_startline": "903", "method_endline": "983"}}, "hunk_12": {"Ismethod": 1, "added_lines": "4094,4095,4096,4097,4098,4099,4100", "deleted_lines": null, "method_info": {"method_name": "SameDiff::updateVariableNameAndReference", "method_params": "varToUpdate,newVarName", "method_startline": "4075", "method_endline": "4105"}}, "hunk_13": {"Ismethod": 1, "added_lines": "443,444,445,446,447,448,449,450,451,452,453,454,455,456,457,458", "deleted_lines": null, "method_info": {"method_name": "SameDiff::currentNameScope", "method_params": "", "method_startline": "443", "method_endline": "458"}}, "hunk_14": {"Ismethod": 1, "added_lines": "2583,2584,2585,2586,2587,2588,2590", "deleted_lines": "2546,2547,2548,2549,2550,2551,2552,2553,2554,2555,2556,2557,2558", "method_info": {"method_name": "SameDiff::convertToConstants", "method_params": "variables", "method_startline": "2546", "method_endline": "2593"}}, "hunk_15": {"Ismethod": 1, "added_lines": null, "deleted_lines": "2766,2767,2768,2769,2770,2771,2772,2773", "method_info": {"method_name": "SameDiff::renameVariable", "method_params": "from,to", "method_startline": "2670", "method_endline": "2788"}}}}, "file_9": {"file_change_type": "MODIFY", "file_Nmethod": 6, "file_old_name": "nd4j\\nd4j-backends\\nd4j-api-parent\\nd4j-api\\src\\main\\java\\org\\nd4j\\autodiff\\samediff\\TrainingConfig.java", "file_new_name": "nd4j\\nd4j-backends\\nd4j-api-parent\\nd4j-api\\src\\main\\java\\org\\nd4j\\autodiff\\samediff\\TrainingConfig.java", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "80", "deleted_lines": null, "method_info": {"method_name": "TrainingConfig::TrainingConfig", "method_params": "updater,regularization,dataSetFeatureMapping,dataSetLabelMapping", "method_startline": "78", "method_endline": "81"}}, "hunk_1": {"Ismethod": 1, "added_lines": null, "deleted_lines": "105,113", "method_info": {"method_name": "TrainingConfig::TrainingConfig", "method_params": "updater,regularization,minimize,dataSetFeatureMapping,dataSetLabelMapping,dataSetFeatureMaskMapping,dataSetLabelMaskMapping,trainableParams,lossVariables", "method_startline": "104", "method_endline": "115"}}, "hunk_2": {"Ismethod": 1, "added_lines": null, "deleted_lines": "386,387,388,389", "method_info": {"method_name": "TrainingConfig::Builder::trainableParams", "method_params": "trainableParams", "method_startline": "386", "method_endline": "389"}}, "hunk_3": {"Ismethod": 1, "added_lines": "381", "deleted_lines": "370,371,372,373,374,375,376,377,378,379,380,381,382", "method_info": {"method_name": "TrainingConfig::Builder::build", "method_params": "", "method_startline": "370", "method_endline": "382"}}, "hunk_4": {"Ismethod": 1, "added_lines": "99", "deleted_lines": "101,102,105", "method_info": {"method_name": "TrainingConfig::TrainingConfig", "method_params": "updater,regularization,minimize,dataSetFeatureMapping,dataSetLabelMapping,dataSetFeatureMaskMapping,dataSetLabelMaskMapping,lossVariables", "method_startline": "98", "method_endline": "108"}}, "hunk_5": {"Ismethod": 1, "added_lines": null, "deleted_lines": "375,376,377", "method_info": {"method_name": "TrainingConfig::Builder::trainableParams", "method_params": "trainableParams", "method_startline": "375", "method_endline": "377"}}}}, "file_10": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "nd4j\\nd4j-backends\\nd4j-api-parent\\nd4j-api\\src\\main\\java\\org\\nd4j\\autodiff\\samediff\\internal\\Variable.java", "file_new_name": "nd4j\\nd4j-backends\\nd4j-api-parent\\nd4j-api\\src\\main\\java\\org\\nd4j\\autodiff\\samediff\\internal\\Variable.java", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": null, "deleted_lines": "34"}}}, "file_11": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "nd4j\\nd4j-backends\\nd4j-api-parent\\nd4j-api\\src\\main\\java\\org\\nd4j\\evaluation\\classification\\Evaluation.java", "file_new_name": "nd4j\\nd4j-backends\\nd4j-api-parent\\nd4j-api\\src\\main\\java\\org\\nd4j\\evaluation\\classification\\Evaluation.java", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "650,651,652,660,668,676", "deleted_lines": "650,651,652,660,668,676", "method_info": {"method_name": "Evaluation::stats", "method_params": "suppressWarnings,includeConfusion,logConfusionSizeWarning", "method_startline": "616", "method_endline": "719"}}}}, "file_12": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "nd4j\\nd4j-backends\\nd4j-api-parent\\nd4j-api\\src\\main\\java\\org\\nd4j\\linalg\\api\\shape\\Shape.java", "file_new_name": "nd4j\\nd4j-backends\\nd4j-api-parent\\nd4j-api\\src\\main\\java\\org\\nd4j\\linalg\\api\\shape\\Shape.java", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "3775,3776,3777,3778,3779,3780,3781,3782,3783,3784,3785,3786,3787,3788,3790,3791", "deleted_lines": null, "method_info": {"method_name": "Shape::shapeMatchesPlaceholder", "method_params": "phShape,arrShape", "method_startline": "3775", "method_endline": "3791"}}}}, "file_13": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "nd4j\\nd4j-backends\\nd4j-api-parent\\nd4j-api\\src\\main\\java\\org\\nd4j\\linalg\\memory\\abstracts\\Nd4jWorkspace.java", "file_new_name": "nd4j\\nd4j-backends\\nd4j-api-parent\\nd4j-api\\src\\main\\java\\org\\nd4j\\linalg\\memory\\abstracts\\Nd4jWorkspace.java", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "160", "deleted_lines": "160", "method_info": {"method_name": "Nd4jWorkspace::Nd4jWorkspace", "method_params": "configuration,workspaceId", "method_startline": "137", "method_endline": "201"}}}}, "file_14": {"file_change_type": "ADD", "file_Nmethod": 0, "file_old_name": "None", "file_new_name": "nd4j\\nd4j-backends\\nd4j-tests\\src\\test\\java\\org\\nd4j\\autodiff\\samediff\\NameScopeTests.java"}, "file_15": {"file_change_type": "MODIFY", "file_Nmethod": 4, "file_old_name": "nd4j\\nd4j-backends\\nd4j-tests\\src\\test\\java\\org\\nd4j\\autodiff\\samediff\\SameDiffTests.java", "file_new_name": "nd4j\\nd4j-backends\\nd4j-tests\\src\\test\\java\\org\\nd4j\\autodiff\\samediff\\SameDiffTests.java", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "3151,3152,3153,3154,3155,3156,3157,3158,3159,3160,3161,3162,3163,3164,3165,3166,3167,3168,3169,3170,3171,3172,3173,3174,3175,3176,3177,3178,3179,3180,3181,3182,3183,3184,3185,3186,3187,3188,3189,3190,3191,3192,3193,3194,3195,3196,3197,3198,3199,3200,3201,3202,3203,3204,3205,3206,3207,3208", "deleted_lines": null, "method_info": {"method_name": "SameDiffTests::testPlaceholderShapeValidation", "method_params": "", "method_startline": "3151", "method_endline": "3208"}}, "hunk_1": {"Ismethod": 1, "added_lines": "215,221", "deleted_lines": "214,220", "method_info": {"method_name": "SameDiffTests::testSaveWriteWithTrainingConfig", "method_params": "", "method_startline": "196", "method_endline": "223"}}, "hunk_2": {"Ismethod": 1, "added_lines": null, "deleted_lines": "2748,2749,2750,2751,2752", "method_info": {"method_name": "SameDiffTests::testConvertToConstant", "method_params": "", "method_startline": "2720", "method_endline": "2765"}}, "hunk_3": {"Ismethod": 1, "added_lines": null, "deleted_lines": "2793,2794,2795,2796,2797", "method_info": {"method_name": "SameDiffTests::testConvertToVariable", "method_params": "", "method_startline": "2768", "method_endline": "2810"}}}}, "file_16": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "nd4j\\nd4j-backends\\nd4j-tests\\src\\test\\java\\org\\nd4j\\autodiff\\samediff\\SameDiffTrainingTest.java", "file_new_name": "nd4j\\nd4j-backends\\nd4j-tests\\src\\test\\java\\org\\nd4j\\autodiff\\samediff\\SameDiffTrainingTest.java", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189", "deleted_lines": null, "method_info": {"method_name": "SameDiffTrainingTest::testTrainingMixedDtypes", "method_params": "", "method_startline": "130", "method_endline": "189"}}}}, "file_17": {"file_change_type": "ADD", "file_Nmethod": 0, "file_old_name": "None", "file_new_name": "nd4j\\nd4j-backends\\nd4j-tests\\src\\test\\java\\org\\nd4j\\autodiff\\samediff\\listeners\\CheckpointListenerTest.java"}, "file_18": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "nd4j\\nd4j-backends\\nd4j-tests\\src\\test\\java\\org\\nd4j\\evaluation\\EvalTest.java", "file_new_name": "nd4j\\nd4j-backends\\nd4j-tests\\src\\test\\java\\org\\nd4j\\evaluation\\EvalTest.java", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "1051,1052,1053,1054,1055,1056,1057,1058,1059,1060,1061,1062,1063,1064,1065,1066,1067,1068,1069,1070,1071,1072,1073,1074,1075,1076,1077,1078,1079,1080,1081,1082,1083,1084,1085,1086,1087,1089,1090,1091", "deleted_lines": null, "method_info": {"method_name": "EvalTest::testEvalStatsBinaryCase", "method_params": "", "method_startline": "1051", "method_endline": "1092"}}, "hunk_1": {"Ismethod": 1, "added_lines": "1048", "deleted_lines": null, "method_info": {"method_name": "EvalTest::testLabelReset", "method_params": "", "method_startline": "1018", "method_endline": "1048"}}}}, "file_19": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "nd4j\\nd4j-buffer\\src\\main\\java\\org\\nd4j\\linalg\\api\\buffer\\BaseDataBuffer.java", "file_new_name": "nd4j\\nd4j-buffer\\src\\main\\java\\org\\nd4j\\linalg\\api\\buffer\\BaseDataBuffer.java", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "1352,1353,1354,1355,1356,1357,1358,1359,1360", "deleted_lines": null, "method_info": {"method_name": "BaseDataBuffer::asBytes", "method_params": "", "method_startline": "1204", "method_endline": "1365"}}}}}}}