{"BR": {"BR_id": "1041", "BR_author": "phoenixSK", "BRopenT": "2018-07-31T08:19:03Z", "BRcloseT": "2018-09-12T22:26:17Z", "BR_text": {"BRsummary": "Problem with firsts steps in training with curriculum learning", "BRdescription": "\n Hello everyone!\n I'm \"playing\" a little bit with curriculum learning and just discovered what could be a bug in the toolkit (could be also mine) that has been introduced in the last releases (in v0.3 it worked). The resetParameters is not updated until the Academy.Done() is called, what means that the first steps of training will have the default values for these parameters and can't be changed from curriculum JSON file. Hope you understand it and it's not my mistake. Thank you in advance.\n Cheers!\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "phoenixSK", "commentT": "2018-07-31T18:37:45Z", "comment_text": "\n \t\tThis could indeed be a bug as the first lesson of curriculum should kick in at the beginning. By the way, there is a new way to do curriculum on the current develop branch.\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "phoenixSK", "commentT": "2018-07-31T21:12:07Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/phoenixSK>@phoenixSK</denchmark-link>\n  <denchmark-link:https://github.com/Unity-Technologies/ml-agents/pull/1043>#1043</denchmark-link>\n  should fix this bug. It would be great if you try it!\n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "phoenixSK", "commentT": "2018-08-02T10:08:18Z", "comment_text": "\n \t\tThanks for your fast answer & fix, but unfortunately I'm getting an error whenever I try to execute it, even if I don't specify the curriculum option. Below I put the error message, any idea what could be happening? (Maybe the problem is that I merged the current develop branch, not only <denchmark-link:https://github.com/Unity-Technologies/ml-agents/pull/1043>#1043</denchmark-link>\n )\n \n Traceback (most recent call last):\n File \"<string>\", line 1, in <module>\n File \"C:\\Users\\phoenix\\Anaconda3\\envs\\ml-agents\\lib\\multiprocessing\\spawn.py\", line 105, in spawn_main exitcode = _main(fd)\n File \"C:\\Users\\phoenix\\Anaconda3\\envs\\ml-agents\\lib\\multiprocessing\\spawn.py\", line 115, in _main self = reduction.pickle.load(from_parent)\n AttributeError: Can't get attribute 'run_training' on <module '__mp_main__' from 'C:\\\\Users\\\\phoenix\\\\Documents\\\\ml-agents\\\\python\\\\learn.py'>\n \n \t\t"}, "comments_3": {"comment_id": 4, "comment_author": "phoenixSK", "commentT": "2018-08-02T16:23:39Z", "comment_text": "\n \t\tCan you try a couple of things:\n \n Cherry pick 36c4d56 and see if that works.\n If that doesn't work, try syncing with develop again and make sure to do a pip install . after checking out the branch.\n \n Unfortunately I did not see that error in my testing. Is there a default environment where you see this error?\n \t\t"}, "comments_4": {"comment_id": 5, "comment_author": "phoenixSK", "commentT": "2018-08-03T12:16:38Z", "comment_text": "\n \t\tI tried solution 1 and it worked as expected, so congrats and thanks! But, just FYI, tried solution 2 and still got the same error.\n The environment I'm using is a personal one, created when version 0.2 was launched and updated with every release, and it's the first time I'm getting an error like this one.\n \t\t"}, "comments_5": {"comment_id": 6, "comment_author": "phoenixSK", "commentT": "2018-08-03T16:31:21Z", "comment_text": "\n \t\tYou're welcome! Glad it worked for you.\n Could you provide more details about the errors you're getting? We're planning on shipping this update to curriculums in the next release so it would help us a ton if you found a bug.\n Just a note, the way you pass a curriculum to learn has been changed on . TLDR, you now specify a \"curriculum folder\" that contains a JSON file that has the same name as the brain you want that curriculum associated to. This allows for multiple curriculums for multiple brains in the same environment. Check out the updated docs here: <denchmark-link:https://github.com/Unity-Technologies/ml-agents/blob/develop/docs/Training-Curriculum-Learning.md>https://github.com/Unity-Technologies/ml-agents/blob/develop/docs/Training-Curriculum-Learning.md</denchmark-link>\n .\n Thanks!\n \t\t"}, "comments_6": {"comment_id": 7, "comment_author": "phoenixSK", "commentT": "2018-08-10T17:43:50Z", "comment_text": "\n \t\tI recently synced to the Develop Branch, and I am also getting the same error as soon as I launch the python trainer. (However in my case, I am not trying to use curriculum learning. )\n I have done a \"pip install .\" on my newly installed develop branch.\n The aforementioned fix  \"36c4d56\" is already merged in the develop code base.\n \n Traceback (most recent call last):\n File \"\", line 1, in \n File \"C:\\Users\\MY_USER\\Anaconda3\\envs\\ml-agents\\lib\\multiprocessing\\spawn.py\", line 105, in spawn_main exitcode = _main(fd)\n File \"C:\\Users\\MY_USER\\Anaconda3\\envs\\ml-agents\\lib\\multiprocessing\\spawn.py\", line 115, in _main self = reduction.pickle.load(from_parent)\n AttributeError: Can't get attribute 'run_training' on <module 'mp_main' from 'C:\\Users\\MY_USER\\Documents\\ml-agents\\python\\learn.py'>\n \n \t\t"}, "comments_7": {"comment_id": 8, "comment_author": "phoenixSK", "commentT": "2018-08-10T17:58:25Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/EstonianGiant>@EstonianGiant</denchmark-link>\n  Thanks for reporting this error. We are having trouble replicating this error on our machines so any additional information about your development environment will help. We will try replicating this on a Windows machine ASAP.\n Could you confirm a couple of things?\n \n You are on Python 3.6\n You get this error in the Docker container as well\n \n Thanks!\n \t\t"}, "comments_8": {"comment_id": 9, "comment_author": "phoenixSK", "commentT": "2018-08-10T18:14:56Z", "comment_text": "\n \t\tHi <denchmark-link:https://github.com/dericp>@dericp</denchmark-link>\n ,\n Yes I'm on Python 3.6.\n I will check about the Docker Container and reply shortly.\n Here's my anaconda info:\n \n active environment : ml-agents\n active env location : C:\\Users\\MY_USER\\Anaconda3\\envs\\ml-agents\n shell level : 2\n user config file : C:\\Users\\MY_USER\\.condarc\n populated config files : C:\\Users\\MY_USER\\.condarc\n conda version : 4.5.4\n conda-build version : 3.10.5\n python version : 3.6.5.final.0\n base environment : C:\\Users\\MY_USER\\Anaconda3  (writable)\n channel URLs : https://repo.anaconda.com/pkgs/main/win-64\n                       https://repo.anaconda.com/pkgs/main/noarch\n                       https://repo.anaconda.com/pkgs/free/win-64\n                       https://repo.anaconda.com/pkgs/free/noarch\n                       https://repo.anaconda.com/pkgs/r/win-64\n                       https://repo.anaconda.com/pkgs/r/noarch\n                       https://repo.anaconda.com/pkgs/pro/win-64\n                       https://repo.anaconda.com/pkgs/pro/noarch\n                       https://repo.anaconda.com/pkgs/msys2/win-64\n                       https://repo.anaconda.com/pkgs/msys2/noarch\n package cache : C:\\Users\\MY_USER\\Anaconda3\\pkgs\n                       C:\\Users\\MY_USER\\AppData\\Local\\conda\\conda\\pkgs\n envs directories : C:\\Users\\MY_USER\\Anaconda3\\envs\n                       C:\\Users\\MY_USER\\AppData\\Local\\conda\\conda\\envs\n                       C:\\Users\\MY_USER\\.conda\\envs\n platform : win-64\n user-agent : conda/4.5.4 requests/2.18.4 CPython/3.6.5 Windows/10 Windows/10.0.17134\n administrator : False\n netrc file : None\n offline mode : False\n \n \n \t\t"}, "comments_9": {"comment_id": 10, "comment_author": "phoenixSK", "commentT": "2018-08-10T19:10:16Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/dericp>@dericp</denchmark-link>\n ,\n I can't test the docker installation as it requires Windows 10 Pro or Enterprise.  (I have Home Edition.)\n \t\t"}, "comments_10": {"comment_id": 11, "comment_author": "phoenixSK", "commentT": "2018-08-12T19:55:12Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/EstonianGiant>@EstonianGiant</denchmark-link>\n  Thank you, this is really helpful. We will try to get to the bottom of it next week.\n \t\t"}, "comments_11": {"comment_id": 12, "comment_author": "phoenixSK", "commentT": "2018-08-12T20:09:53Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/dericp>@dericp</denchmark-link>\n \n Okay, cool.  FYI in my local code base I've temporarily disabled using the multiprocessing training (as I don't need that feature right now), and everything else seems to work correctly.\n i.e. in learn.py:\n <denchmark-code> #    jobs = []\n  #   for i in range(num_runs):\n      if seed == -1:\n          use_seed = np.random.randint(0,9999)\n      else:\n          use_seed = seed\n  #       p = multiprocessing.Process(target=run_training, args=(i, use_seed))\n  #       jobs.append(p)\n  #       p.start()\n  run_training(0,use_seed)\n \n </denchmark-code>\n \n \t\t"}, "comments_12": {"comment_id": 13, "comment_author": "phoenixSK", "commentT": "2018-08-17T01:59:54Z", "comment_text": "\n \t\tI had the same problem today after updating a project to develop - I'm using Python 3.6.2 :: Anaconda custom (64-bit)\n disabling multiprocessing following  <denchmark-link:https://github.com/EstonianGiant>@EstonianGiant</denchmark-link>\n  's sets worked for me\n \t\t"}, "comments_13": {"comment_id": 14, "comment_author": "phoenixSK", "commentT": "2018-08-18T06:06:31Z", "comment_text": "\n \t\tI found some info about this online and have a fix\n see - <denchmark-link:https://stackoverflow.com/questions/41385708/multiprocessing-example-giving-attributeerror/42383397>https://stackoverflow.com/questions/41385708/multiprocessing-example-giving-attributeerror/42383397</denchmark-link>\n \n \n This problem seems to be a design feature of multiprocessing.Pool. See https://bugs.python.org/issue25053. For some reason Pool does not always work with objects not defined in an imported module. So you have to write your function into a different file and import the module.\n \n They recommend moving the multiprocessing function to another .py file - however, I found that putting it before  fixed it for me. I'll create a PR - see <denchmark-link:https://github.com/Unity-Technologies/ml-agents/pull/1102>#1102</denchmark-link>\n \n \t\t"}, "comments_14": {"comment_id": 15, "comment_author": "phoenixSK", "commentT": "2018-08-20T02:48:51Z", "comment_text": "\n \t\tNice fix <denchmark-link:https://github.com/Sohojoe>@Sohojoe</denchmark-link>\n  !\n \t\t"}, "comments_15": {"comment_id": 16, "comment_author": "phoenixSK", "commentT": "2018-08-20T15:43:10Z", "comment_text": "\n \t\tThanks for making this fix, <denchmark-link:https://github.com/Sohojoe>@Sohojoe</denchmark-link>\n !\n \t\t"}, "comments_16": {"comment_id": 17, "comment_author": "phoenixSK", "commentT": "2020-01-03T02:58:06Z", "comment_text": "\n \t\tThis thread has been automatically locked since there has not been any recent activity after it was closed. Please open a new issue for related bugs.\n \t\t"}}}, "commit": {"commit_id": "21dbbca2400e948abc643bb86b6f9490f483fa59", "commit_author": "Joe Booth", "commitT": "2018-08-21 14:20:02-04:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "python\\learn.py", "file_new_name": "python\\learn.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54", "deleted_lines": null, "method_info": {"method_name": "run_training", "method_params": "sub_id,use_seed,options", "method_startline": "15", "method_endline": "54"}}, "hunk_1": {"Ismethod": 1, "added_lines": null, "deleted_lines": "87,88,89,90,91", "method_info": {"method_name": "run_training", "method_params": "sub_id,use_seed", "method_startline": "87", "method_endline": "91"}}}}}}}