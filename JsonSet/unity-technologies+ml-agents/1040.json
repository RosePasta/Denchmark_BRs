{"BR": {"BR_id": "1040", "BR_author": "shrirammoni", "BRopenT": "2018-07-31T07:20:17Z", "BRcloseT": "2018-08-06T16:28:12Z", "BR_text": {"BRsummary": "Getting IndexError: index 8 is out of bounds for axis 0 with size 8", "BRdescription": "\n I am getting this error \"IndexError: index 8 is out of bounds for axis 0 with size 8\" when training with visual observation. Any help ?\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "shrirammoni", "commentT": "2018-07-31T18:34:14Z", "comment_text": "\n \t\tHi,\n What line are you getting this error ? It seems you are trying to access index 8 of an array of size 8 (I suppose the vectorActions array. You cannot do this as an array of size 0 has indices between 0 and 7.\n I hope this helps.\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "shrirammoni", "commentT": "2018-08-01T04:46:43Z", "comment_text": "\n \t\tTraceback (most recent call last):\n File \"learn.py\", line 84, in \n tc.start_learning()\n File \"\\ml-agents-master\\python\\unitytrainers\\trainer_controller.py\", line 260, in start_learning\n trainer.add_experiences(curr_info, new_info, take_action_outputs[brain_name])\n File \"\\ml-agents-master\\python\\unitytrainers\\ppo\\trainer.py\", line 283, in add_experiences\n next_info.visual_observations[i][idx])\n IndexError: index 8 is out of bounds for axis 0 with size 8\n This is the  error i got when i try to train 4 different scenarios in same scene.\n Every scenario has three different agents and two camera attached to each agent for visual observation.\n References:\n Below is the Brain Script and its Parameter\n <denchmark-link:https://user-images.githubusercontent.com/28861120/43501588-d8dc9d6e-9573-11e8-90ef-6631e98a0582.JPG></denchmark-link>\n \n Hope this helps!\n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "shrirammoni", "commentT": "2018-08-01T18:09:35Z", "comment_text": "\n \t\tI think you found a bug. Can you try to replace line 283 of ml-agents-master\\python\\unitytrainers\\ppo\\trainer.py: replace next_info.visual_observations[i][idx] with next_info.visual_observations[i][next_idx] and see if it helps.\n I will investigate more. Thank you.\n \t\t"}, "comments_3": {"comment_id": 4, "comment_author": "shrirammoni", "commentT": "2018-08-06T05:51:42Z", "comment_text": "\n \t\tHey, <denchmark-link:https://github.com/vincentpierre>@vincentpierre</denchmark-link>\n   I replaced the  with and it worked perfectly. I didn't get any error after that. Thanks for the help.\n \t\t"}, "comments_4": {"comment_id": 5, "comment_author": "shrirammoni", "commentT": "2018-08-06T16:28:12Z", "comment_text": "\n \t\tFix pushed to develop in this <denchmark-link:https://github.com/Unity-Technologies/ml-agents/commit/40365ded71c5bf94c79c7b94e75fe52623935261>commit</denchmark-link>\n \n \t\t"}, "comments_5": {"comment_id": 6, "comment_author": "shrirammoni", "commentT": "2019-05-27T01:07:21Z", "comment_text": "\n \t\t<denchmark-h:h1>Tensorflow DeepLab \u5b9e\u73b0\u7684\u53ef\u89c6\u5316</denchmark-h>\n \n import matplotlib.pyplot as plt\n from matplotlib import gridspec\n import numpy as np\n import cv2\n def create_pascal_label_colormap():\n \"\"\"\n PASCAL VOC \u5206\u5272\u6570\u636e\u96c6\u7684\u7c7b\u522b\u6807\u7b7e\u989c\u8272\u6620\u5c04label colormap\n <denchmark-code>\u8fd4\u56de:\n     \u53ef\u89c6\u5316\u5206\u5272\u7ed3\u679c\u7684\u989c\u8272\u6620\u5c04Colormap\n \"\"\"\n colormap = np.zeros((256, 3), dtype=int)\n ind = np.arange(256, dtype=int)\n \n for shift in reversed(range(8)):\n     for channel in range(3):\n         colormap[:, channel] |= ((ind >> channel) & 1) << shift\n     ind >>= 3\n \n return colormap\n </denchmark-code>\n \n #label = np.asarray(['background', 'person'])\n def label_to_color_image(label):\n \"\"\"\n \u6dfb\u52a0\u989c\u8272\u5230\u56fe\u7247\uff0c\u6839\u636e\u6570\u636e\u96c6\u6807\u7b7e\u7684\u989c\u8272\u6620\u5c04 label colormap\n <denchmark-code>\u53c2\u6570:\n     label: \u6574\u6570\u7c7b\u578b\u7684 2D \u6570\u7ec4array, \u4fdd\u5b58\u4e86\u5206\u5272\u7684\u7c7b\u522b\u6807\u7b7e label\n \n \u8fd4\u56de:\n     result: A 2D array with floating type. The element of the array\n     is the color indexed by the corresponding element in the input label\n     to the PASCAL color map.\n \n Raises:\n     ValueError: If label is not of rank 2 or its value is larger than color\n     map maximum entry.\n \"\"\"\n \n if label.ndim != 2:       # \u539flabel.ndim != 2:\n     raise ValueError('Expect 2-D input label')\n \n colormap = create_pascal_label_colormap()\n \n if np.max(label) >= len(colormap):\n     raise ValueError('label value too large.')\n \n return colormap[label]\n </denchmark-code>\n \n def vis_segmentation(image, seg_map):\n \"\"\"\n \u8f93\u5165\u56fe\u7247\u548c\u5206\u5272 mask \u7684\u53ef\u89c6\u5316.\n \"\"\"\n plt.figure(figsize=(10, 6.67))\n grid_spec = gridspec.GridSpec(1, 4, width_ratios=[6, 6, 6, 1], height_ratios=[0.1])  # \u7f51\u683c\u89c4\u683c,\u5373\u6b64\u5904\u53ea\u662f\u8bbe\u7f6e\u5c3a\u5bf8\uff01\uff01 ,\u539f\u8bed\u53e5\u4e3a\uff1a grid_spec = gridspec.GridSpec(1, 4, width_ratios=[6, 6, 6,1])\n <denchmark-code>plt.subplot(grid_spec[0])\n plt.imshow(image)\n plt.axis('off')\n plt.title('input image')\n \n plt.subplot(grid_spec[1])\n seg_image = label_to_color_image(seg_map).astype(np.uint8)\n plt.imshow(seg_image)\n plt.axis('off')\n plt.title('segmentation map')\n \n plt.subplot(grid_spec[2])\n plt.imshow(image)\n plt.imshow(seg_image, alpha=0.7)\n plt.axis('off')\n plt.title('segmentation overlay')\n \n unique_labels = np.unique(seg_map)  # \u539f\u53e5\u4e3a\uff1aunique_labels = np.unique(seg_map)\n ax = plt.subplot(grid_spec[3])\n \n # \u539f\u53e5\u4e3a\uff1aplt.imshow(FULL_COLOR_MAP[unique_labels].astype(np.uint8), interpolation='nearest')\n \n plt.imshow(FULL_COLOR_MAP[unique_labels].astype(np.uint8), interpolation='nearest')\n \n ax.yaxis.tick_right()\n plt.yticks(range(len(unique_labels)), LABEL_NAMES[unique_labels])\n plt.xticks([], [])\n ax.tick_params(width=0.0)\n plt.grid('off')\n plt.show()\n </denchmark-code>\n \n def vis_segmentation2(image, seg_map):\n \"\"\"\n \u8f93\u5165\u56fe\u7247\u548c\u5206\u5272 mask \u7684\u7edf\u4e00\u53ef\u89c6\u5316.\n \"\"\"\n seg_image = label_to_color_image(seg_map).astype(np.uint8)\n plt.figure()\n plt.imshow(image)\n plt.imshow(seg_image, alpha=0.7)\n plt.axis('off')\n plt.show()\n LABEL_NAMES = np.asarray(['background', 'person']) # \u5047\u8bbe\u53ea\u6709\u4e24\u7c7b\n FULL_LABEL_MAP = np.arange(len(LABEL_NAMES)).reshape(len(LABEL_NAMES), 1)\n FULL_COLOR_MAP = label_to_color_image(FULL_LABEL_MAP)\n imgfile = 'image.jpg'\n pngfile = 'mask.jpg'\n image = cv2.imread(imgfile, 1)\n image = image[:, :, ::-1]\n seg_map = cv2.imread(pngfile, 0)\n vis_segmentation(image, seg_map)\n print('Done.')\n Traceback (most recent call last):\n File \"F:/Users/nana/PycharmProjects/yuyitry/yuyitrying.py\", line 112, in \n vis_segmentation(image, seg_map)\n File \"F:/Users/nana/PycharmProjects/yuyitry/yuyitrying.py\", line 83, in vis_segmentation\n plt.imshow(FULL_COLOR_MAP[unique_labels].astype(np.uint8), interpolation='nearest')\n IndexError: index 37 is out of bounds for axis 0 with size 2\n Why?Can you help me?\n \t\t"}}}, "commit": {"commit_id": "40365ded71c5bf94c79c7b94e75fe52623935261", "commit_author": "vincentpierre", "commitT": "2018-08-03 17:28:30-07:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "python\\unitytrainers\\ppo\\trainer.py", "file_new_name": "python\\unitytrainers\\ppo\\trainer.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "320", "deleted_lines": "320", "method_info": {"method_name": "add_experiences", "method_params": "self,AllBrainInfo,AllBrainInfo,take_action_outputs", "method_startline": "292", "method_endline": "356"}}}}}}}