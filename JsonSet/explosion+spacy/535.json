{"BR": {"BR_id": "535", "BR_author": "bdewilde", "BRopenT": "2016-10-19T16:08:25Z", "BRcloseT": "2016-10-19T17:55:55Z", "BR_text": {"BRsummary": "latest spaCy tagger and parser returning unexpected results", "BRdescription": "\n After downloading the latest version of spaCy and updating the models, I no longer get reasonable POS tagging or dependency parsing. Here's an example in Python 3.5 on macOS Sierra:\n <denchmark-code>>>> import spacy\n >>> en_nlp = spacy.load('en')\n >>> en_doc = en_nlp('Hello, world. Here are two sentences.')\n >>> [tok.text for tok in en_doc]\n ['Hello', ',', 'world', '.', 'Here', 'are', 'two', 'sentences', '.']\n >>> [tok.pos_ for tok in en_doc]\n ['PUNCT', 'PUNCT', 'PUNCT', 'PUNCT', 'PUNCT', 'PUNCT', 'PUNCT', 'PUNCT', 'PUNCT']\n >>> [tok.tag_ for tok in en_doc]\n ['\"\"', '\"\"', '\"\"', '\"\"', '\"\"', '\"\"', '\"\"', '\"\"', '\"\"']\n >>> [tok.dep_ for tok in en_doc]\n ['ROOT', 'ROOT', 'ROOT', 'ROOT', 'ROOT', 'ROOT', 'ROOT', 'ROOT', 'ROOT']\n </denchmark-code>\n \n Is this no longer correct code for v1.0.1? If it is, do you have any ideas what's going wrong?\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "bdewilde", "commentT": "2016-10-19T16:14:39Z", "comment_text": "\n \t\tCode's correct; I must've broken something --- thanks!\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "bdewilde", "commentT": "2016-10-19T17:45:16Z", "comment_text": "\n \t\tHm, correct on my Linux server in both 2.7 and 3.5. Trying on OSX \u2014 but, very curious. I don't yet see what could be wrong.\n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "bdewilde", "commentT": "2016-10-19T17:48:46Z", "comment_text": "\n \t\tAh.\n One nice change in 1.0.1 is that the tokenizer is bundled by default. Are you sure you're executing a version of spaCy that has the data installed?\n There's a bug here though...It's loaded the parser and tagger, even though their models are empty!\n \t\t"}, "comments_3": {"comment_id": 4, "comment_author": "bdewilde", "commentT": "2016-10-19T17:55:55Z", "comment_text": "\n \t\tHow strange. :( I did a full un- then re-install of spacy, downloaded the models, and checked that it loads as specified in the docs; that process gave the results originally posted. Repeating this process, however, appears to have done the trick. (See below.) I have no idea what went wrong the first time, since I confirmed in my terminal history that nothing was done differently.\n Technology! \u00af_(\u30c4)_/\u00af\n <denchmark-code>$ pip uninstall spacy\n $ pip install spacy\n ...\n Successfully installed spacy-1.0.1\n $ python -m spacy.en.download\n Downloading parsing model\n Downloading...\n Downloaded 532.28MB 100.00% 6.22MB/s eta 0s\n archive.gz checksum/md5 OK\n Model successfully installed.\n Downloading GloVe vectors\n Downloading...\n Downloaded 708.08MB 100.00% 9.44MB/s eta 0s\n archive.gz checksum/md5 OK\n Model successfully installed.\n $ python -c \"import spacy; spacy.load('en'); print('OK')\"\n OK\n $ python\n Python 3.5.2 (default, Aug 15 2016, 12:43:16)\n [GCC 4.2.1 Compatible Apple LLVM 7.3.0 (clang-703.0.31)] on darwin\n Type \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n >>> import spacy\n >>> en_nlp = spacy.load('en')\n >>> en_doc = en_nlp('Hello, world. Here are two sentences.')\n >>> [tok.text for tok in en_doc]\n ['Hello', ',', 'world', '.', 'Here', 'are', 'two', 'sentences', '.']\n >>> [tok.pos_ for tok in en_doc]\n ['INTJ', 'PUNCT', 'NOUN', 'PUNCT', 'ADV', 'VERB', 'NUM', 'NOUN', 'PUNCT']\n >>> [tok.dep_ for tok in en_doc]\n ['ROOT', 'punct', 'npadvmod', 'punct', 'advmod', 'ROOT', 'nummod', 'nsubj', 'punct']\n </denchmark-code>\n \n Think we can assign blame to the gremlins in my machine, and close the issue.\n \t\t"}, "comments_4": {"comment_id": 5, "comment_author": "bdewilde", "commentT": "2016-10-19T18:04:19Z", "comment_text": "\n \t\tThat's creepy. Hope I didn't mess something weird up.\n The loading stuff is all new code, so I expect there might be new bugs.\n \t\t"}, "comments_5": {"comment_id": 6, "comment_author": "bdewilde", "commentT": "2016-10-19T18:14:34Z", "comment_text": "\n \t\tI am facing the exact same issue when using the latest model (macOSx). I did complete uninstall and re-install, and now I find that all pos_ are 'PUNCT'. Definitely weird.\n \t\t"}, "comments_6": {"comment_id": 7, "comment_author": "bdewilde", "commentT": "2018-05-09T10:12:25Z", "comment_text": "\n \t\tThis thread has been automatically locked since there has not been any recent activity after it was closed. Please open a new issue for related bugs.\n \t\t"}}}, "commit": {"commit_id": "d4aaf2752cbe44521278f71946351eb192b8f1b3", "commit_author": "Matthew Honnibal", "commitT": "2016-10-19 19:55:19+02:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 4, "file_old_name": "spacy\\language.py", "file_new_name": "spacy\\language.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "73,75,76", "deleted_lines": "73", "method_info": {"method_name": "create_tagger", "method_params": "cls,nlp", "method_startline": "70", "method_endline": "78"}}, "hunk_1": {"Ismethod": 1, "added_lines": "106,108,109", "deleted_lines": null, "method_info": {"method_name": "create_matcher", "method_params": "cls,nlp", "method_startline": "103", "method_endline": "111"}}, "hunk_2": {"Ismethod": 1, "added_lines": "84,86,87", "deleted_lines": "82", "method_info": {"method_name": "create_parser", "method_params": "cls,nlp", "method_startline": "81", "method_endline": "89"}}, "hunk_3": {"Ismethod": 1, "added_lines": "95,97,98", "deleted_lines": "100", "method_info": {"method_name": "create_entity", "method_params": "cls,nlp", "method_startline": "92", "method_endline": "100"}}}}}}}