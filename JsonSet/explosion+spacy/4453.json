{"BR": {"BR_id": "4453", "BR_author": "danielkingai2", "BRopenT": "2019-10-16T00:18:32Z", "BRcloseT": "2019-10-16T11:34:59Z", "BR_text": {"BRsummary": "Matcher remove not working on master", "BRdescription": "\n <denchmark-h:h2>How to reproduce the behaviour</denchmark-h>\n \n Having cloned master and building from source, it seems that the matcher remove functionality is not working properly. It does remove the pattern from _patterns but it is still matching on the pattern. I confirmed that this bug does not exist in the released version (2.2.1). I would also suggest that the test found here: \n \n \n spaCy/spacy/tests/matcher/test_matcher_logic.py\n \n \n          Line 148\n       in\n       2d249a9\n \n \n \n \n \n \n  def test_matcher_remove(en_vocab): \n \n \n \n \n  be modified to make sure that no matches are found once the pattern has been removed.\n Repro steps (on master)\n <denchmark-code>>>> import spacy\n >>> nlp = spacy.load('en_core_web_sm')\n >>> from spacy.matcher import Matcher\n >>> text = \"This is some text.\"\n >>> doc = nlp(text)\n >>> matcher = Matcher(nlp.vocab)\n >>> matcher(doc)\n []\n >>> matcher.add(\"pattern\", None, [{\"ORTH\": \"some\"}])\n >>> matcher(doc)\n [(15329811787164753587, 2, 3)]\n >>> matcher.remove(\"pattern\")\n >>> matcher(doc)\n [(15329811787164753587, 2, 3)]\n >>> matcher._patterns\n {}\n </denchmark-code>\n \n <denchmark-h:h2>Info about spaCy</denchmark-h>\n \n \n spaCy version: 2.2.1 (I have actually compiled from source on master branch)\n Platform: Linux-4.4.0-112-generic-x86_64-with-debian-stretch-sid\n Python version: 3.6.7\n \n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "danielkingai2", "commentT": "2019-10-16T07:25:43Z", "comment_text": "\n \t\tThanks for the report! I'll have a look.\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "danielkingai2", "commentT": "2019-11-15T11:54:39Z", "comment_text": "\n \t\tThis thread has been automatically locked since there has not been any recent activity after it was closed. Please open a new issue for related bugs.\n \t\t"}}}, "commit": {"commit_id": "7d1efac4ebe35faa2dee264d502c38bfc58cee7d", "commit_author": "Sofie Van Landeghem", "commitT": "2019-10-16 13:34:58+02:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "spacy\\matcher\\matcher.pyx", "file_new_name": "spacy\\matcher\\matcher.pyx", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "144", "deleted_lines": "144"}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "spacy\\tests\\matcher\\test_matcher_logic.py", "file_new_name": "spacy\\tests\\matcher\\test_matcher_logic.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "150,151,152,153,154,160", "deleted_lines": "148,149", "method_info": {"method_name": "test_matcher_remove", "method_params": "en_vocab", "method_startline": "148", "method_endline": "160"}}, "hunk_1": {"Ismethod": 1, "added_lines": "150,151,152,153,154,160,161,162,163,167,168,169,170", "deleted_lines": null, "method_info": {"method_name": "test_matcher_remove", "method_params": "", "method_startline": "150", "method_endline": "173"}}}}}}}