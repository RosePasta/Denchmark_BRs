{"BR": {"BR_id": "4707", "BR_author": "oliviercwa", "BRopenT": "2019-11-25T09:23:31Z", "BRcloseT": "2019-11-25T15:01:23Z", "BR_text": {"BRsummary": "load_model_from_path does not pass through the list of Exclude", "BRdescription": "\n <denchmark-h:h2>How to reproduce the behaviour</denchmark-h>\n \n 1- Create a simple pipeline with a Tokenizer and one element\n 2- Save the pipeline and exclude the tokenizer:\n nlp.to_disk(output_name, exclude = ['vocab', 'tokenizer'])\n 3- Load the pipeline again\n nlp.from_disk(output_name, exclude = ['vocab', 'tokenizer'], disable = ['vocab', 'tokenizer'])\n Result:\n <denchmark-code>  File \"\\external\\spacy\\spacy\\__init__.py\", line 27, in load\n     return util.load_model(name, **overrides)\n   File \"\\external\\spacy\\spacy\\util.py\", line 136, in load_model\n     return load_model_from_path(Path(name), **overrides)\n   File \"\\external\\spacy\\spacy\\util.py\", line 179, in load_model_from_path\n     return nlp.from_disk(model_path)\n   File \"\\external\\spacy\\spacy\\language.py\", line 836, in from_disk\n     util.from_disk(path, deserializers, exclude)\n   File \"\\external\\spacy\\spacy\\util.py\", line 636, in from_disk\n     reader(path / key)\n   File \"\\external\\spacy\\spacy\\language.py\", line 823, in <lambda>\n     p, exclude=[\"vocab\"]\n   File \"tokenizer.pyx\", line 389, in spacy.tokenizer.Tokenizer.from_disk\n   File \"\\AppData\\Local\\Programs\\Python\\Python37\\lib\\pathlib.py\", line 1193, in open\n     opener=self._opener)\n   File \\AppData\\Local\\Programs\\Python\\Python37\\lib\\pathlib.py\", line 1046, in _opener\n     return self._accessor.open(self, flags, mode)\n FileNotFoundError: [Errno 2] No such file or directory: '\\train\\\\resources\\\\repository\\\\models\\\\test\\\\tokenizer'\n </denchmark-code>\n \n Reason\n the exclude list is not carried through from util.load_model_from_path to nlp.from_disk\n Possible fix\n inside util.py, pass the **overrides to nlp.from_disk\n <denchmark-code>def load_model_from_path(model_path, meta=False, **overrides):\n    . ...\n     return nlp.from_disk(model_path, **overrides)\n </denchmark-code>\n \n <denchmark-h:h2>Your Environment</denchmark-h>\n \n \n Operating System:\n Windows 10\n Python Version Used:\n Python 3.7.4\n spaCy Version Used:\n Spacy 2.1.9\n Environment Information:\n \n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "oliviercwa", "commentT": "2019-12-26T04:32:52Z", "comment_text": "\n \t\tThis thread has been automatically locked since there has not been any recent activity after it was closed. Please open a new issue for related bugs.\n \t\t"}}}, "commit": {"commit_id": "5b36dec7eb505b31bbbfa4bb448fdc35eb738cd7", "commit_author": "Ines Montani", "commitT": "2019-11-25 16:01:22+01:00", "changed_files": {"file_0": {"file_change_type": "ADD", "file_Nmethod": 0, "file_old_name": "None", "file_new_name": "spacy\\tests\\regression\\test_issue4707.py"}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "spacy\\util.py", "file_new_name": "spacy\\util.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "211", "deleted_lines": "211", "method_info": {"method_name": "load_model_from_path", "method_params": "model_path,meta,overrides", "method_startline": "188", "method_endline": "211"}}}}}}}