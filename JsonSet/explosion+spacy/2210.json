{"BR": {"BR_id": "2210", "BR_author": "arequejo", "BRopenT": "2018-04-12T06:59:17Z", "BRcloseT": "2018-04-18T22:44:11Z", "BR_text": {"BRsummary": "doc.noun_chunks not working as expected for spanish models", "BRdescription": "\n This issue is occurring with both spanish models, the following error happens when trying to iterate over the the noun_chunks of a doc:\n Traceback (most recent call last): File \"playground.py\", line 10, in <module> for nc in doc.noun_chunks: File \"doc.pyx\", line 503, in __get__ File \"/usr/local/lib/python2.7/site-packages/spacy/lang/es/syntax_iterators.py\", line 19, in noun_chunks left, right = noun_bounds(token) File \"/usr/local/lib/python2.7/site-packages/spacy/lang/es/syntax_iterators.py\", line 39, in noun_bounds if token.dep in np_left_deps: NameError: global name 'np_left_deps' is not defined\n The same code works by using an english model and sentence instead of a spanish one.\n <denchmark-h:h2>Your Environment</denchmark-h>\n \n \n Python version: 2.7.14\n Platform: Darwin-17.5.0-x86_64-i386-64bit\n spaCy version: 2.0.11\n Models: es_core_news_md, en_core_web_sm, es_core_news_sm\n \n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "arequejo", "commentT": "2018-04-12T20:38:58Z", "comment_text": "\n \t\tThanks for the report \u2013 looks like this might be a bug/typo in lang/es/syntax_iterators.py. Will look into this!\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "arequejo", "commentT": "2018-04-16T16:44:31Z", "comment_text": "\n \t\tsame issue here.\n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "arequejo", "commentT": "2018-05-06T20:37:48Z", "comment_text": "\n \t\tI have the same issue. What should I do to solve it?\n I've manually replaced syntax_iterators.py with the corrected file by Ines, and it works now.\n But how to do the replacement correctly, via pip or whatever?\n Thanks\n \t\t"}, "comments_3": {"comment_id": 4, "comment_author": "arequejo", "commentT": "2018-06-06T13:30:37Z", "comment_text": "\n \t\tThis thread has been automatically locked since there has not been any recent activity after it was closed. Please open a new issue for related bugs.\n \t\t"}}}, "commit": {"commit_id": "686225eaddd56fac86cb18a3e172d84371ea8be1", "commit_author": "ines", "commitT": "2018-04-18 18:44:01-04:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 3, "file_old_name": "spacy\\lang\\es\\syntax_iterators.py", "file_new_name": "spacy\\lang\\es\\syntax_iterators.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": null, "deleted_lines": "36,37,38,39,40,41,42,43,44,45,46,47,48,49,50", "method_info": {"method_name": "noun_bounds", "method_params": "root", "method_startline": "36", "method_endline": "50"}}, "hunk_1": {"Ismethod": 1, "added_lines": "9,10,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32", "deleted_lines": "9,10,36,37,38,39", "method_info": {"method_name": "noun_chunks", "method_params": "obj", "method_startline": "7", "method_endline": "39"}}, "hunk_2": {"Ismethod": 1, "added_lines": "17,18,19,20,21,22,23,24,25,26,27,28,29,30,31", "deleted_lines": null, "method_info": {"method_name": "noun_chunks.noun_bounds", "method_params": "root", "method_startline": "17", "method_endline": "31"}}}}}}}