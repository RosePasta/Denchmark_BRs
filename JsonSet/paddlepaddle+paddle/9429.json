{"BR": {"BR_id": "9429", "BR_author": "typhoonzero", "BRopenT": "2018-03-28T05:58:31Z", "BRcloseT": "2018-03-30T04:00:19Z", "BR_text": {"BRsummary": "using learning rate decay in optimizer in dist train cause run sub program error enforce  framework::product(lr_dims) == 1 failed, 0 != 1", "BRdescription": "\n <denchmark-code>E0328 03:54:46.540556  3693 listen_and_serv_op.cc:152] run sub program error enforce framework::product(lr_dims) == 1 failed, 0 != 1\n Learning rate should have 1 element at [/paddle/paddle/fluid/operators/sgd_op.cc:36]\n PaddlePaddle Call Stacks:\n 0       0x7f6a2a6ddf1cp paddle::platform::EnforceNotMet::EnforceNotMet(std::__exception_ptr::exception_ptr, char const*, int) + 572\n 1       0x7f6a2ae144eap paddle::operators::SGDOp::InferShape(paddle::framework::InferShapeContext*) const + 970\n 2       0x7f6a2aed7358p paddle::framework::OperatorWithKernel::RunImpl(paddle::framework::Scope const&, boost::variant<paddle::platform::CUDAPlace, paddle::platform::CPUPlace, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_> const&) const + 104\n 3       0x7f6a2aed4cd8p paddle::framework::OperatorBase::Run(paddle::framework::Scope const&, boost::variant<paddle::platform::CUDAPlace, paddle::platform::CPUPlace, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_> const&) + 72\n 4       0x7f6a2a78ff66p paddle::framework::Executor::RunPreparedContext(paddle::framework::ExecutorPrepareContext*, paddle::framework::Scope*, bool, bool) + 1750\n 5       0x7f6a2a790e77p paddle::framework::Executor::Run(paddle::framework::ProgramDesc const&, paddle::framework::Scope*, int, bool, bool) + 103\n </denchmark-code>\n \n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "typhoonzero", "commentT": "2018-03-28T12:04:58Z", "comment_text": "\n \t\tI'm checking it!\n <denchmark-code>15 E0328 09:39:58.410671 10820 listen_and_serv_op.cc:152] run sub program error enforce param_dims == ctx->GetInputDim(\"Grad\") failed, 64 != 0\n     16 Param and Grad input of AdamOp should have same dimension at [/paddle/paddle/fluid/operators/adam_op.cc:60]\n     17 PaddlePaddle Call Stacks:\n     18 0       0x7fc658bf56dcp paddle::platform::EnforceNotMet::EnforceNotMet(std::__exception_ptr::exception_ptr, char const*, int) + 572\n     19 1       0x7fc65945af8ep paddle::operators::AdamOp::InferShape(paddle::framework::InferShapeContext*) const + 3214\n     20 2       0x7fc65995e385p paddle::framework::OperatorWithKernel::RunImpl(paddle::framework::Scope const&, boost::variant<paddle::platform::CUDAPlace, paddle::platform::       CPUPlace, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, b       oost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detai       l::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant::void_, boost::detail::variant:       :void_, boost::detail::variant::void_, boost::detail::variant::void_> const&) const + 2213\n </denchmark-code>\n \n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "typhoonzero", "commentT": "2018-03-28T12:35:18Z", "comment_text": "\n \t\tThank you <denchmark-link:https://github.com/gongweibao>@gongweibao</denchmark-link>\n  ,I'm on this work : )\n \t\t"}}}, "commit": {"commit_id": "374f1ca3b76f5ed6d6f5a7e5367840663913014c", "commit_author": "Yancey", "commitT": "2018-03-30 12:00:18+08:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "paddle\\fluid\\operators\\listen_and_serv_op.cc", "file_new_name": "paddle\\fluid\\operators\\listen_and_serv_op.cc", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "159,160,161,162,163,165,166,167,168,169,170,171,173,175,176", "deleted_lines": "138,139,143,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,181,182,183,184", "method_info": {"method_name": "paddle::operators::ListenAndServOp::RunImpl", "method_params": "scope,dev_place", "method_startline": "95", "method_endline": "192"}}, "hunk_1": {"Ismethod": 1, "added_lines": "57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73", "deleted_lines": null, "method_info": {"method_name": "paddle::operators::ParallelExecuteBlocks", "method_params": "parallel_blkids,executor,program,scope", "method_startline": "57", "method_endline": "73"}}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "python\\paddle\\fluid\\distribute_transpiler.py", "file_new_name": "python\\paddle\\fluid\\distribute_transpiler.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "799,800,801,802,803,804,805,806,807,808,809,810,811,812,813,814,815,816,817,818,819,820,821,822,823,824,825,826,827", "deleted_lines": null, "method_info": {"method_name": "_get_lr_ops", "method_params": "self", "method_startline": "799", "method_endline": "827"}}, "hunk_1": {"Ismethod": 1, "added_lines": "341,342,343,344,345,346,347,348,349,351,358", "deleted_lines": "342,349", "method_info": {"method_name": "get_pserver_program", "method_params": "self,endpoint", "method_startline": "258", "method_endline": "383"}}}}}}}