{"BR": {"BR_id": "1522", "BR_author": "randyzwitch", "BRopenT": "2020-06-02T16:38:49Z", "BRcloseT": "2020-06-10T22:40:12Z", "BR_text": {"BRsummary": "st.file_uploader returns 400 error for files above 100MB", "BRdescription": "\n <denchmark-h:h1>Summary</denchmark-h>\n \n When uploading a video file larger than 100MB or so, the st.file_uploader widget throws a 400 error. This is unrelated to using server.maxUploadSize.\n <denchmark-h:h1>Steps to reproduce</denchmark-h>\n \n What are the steps we should take to reproduce the bug:\n import streamlit as st\n \n uploaded_files = st.file_uploader('Choose your video', type=\"MP4\")\n \n if uploaded_files is not None:\n     video_bytes = uploaded_files.read()\n     st.video(video_bytes)\n When uploading a file of 150MB, a 400 error is thrown:\n <denchmark-link:https://user-images.githubusercontent.com/2762787/83545199-e033db80-a4cc-11ea-8152-e36a6b198d02.png></denchmark-link>\n \n <denchmark-h:h2>Expected behavior:</denchmark-h>\n \n I would expect this to work up to the limit of server.maxUploadSize or other reasonable, documented max size (if browser limitations are present)\n <denchmark-h:h2>Actual behavior:</denchmark-h>\n \n This behavior is unrelated to using server.maxUploadSize, as shown by this test matrix:\n Streamlit 0.60, no arguments passed on streamlit run file.py\n 50MB: ok\n 100MB: ok\n 150MB: \"Error: Request failed with status code 400\"\n 250MB: \"Max allowed in 200MB\"\n Streamlit 0.60,  streamlit run test.py --server.maxUploadSize=500\n 250MB:  \"Error: Request failed with status code 400\"\n 750MB: \"Max allowed in 500MB\"\n <denchmark-h:h2>Is this a regression?</denchmark-h>\n \n That is, did this use to work the way you expected in the past?\n Yes\n <denchmark-h:h1>Debug info</denchmark-h>\n \n \n Streamlit version: (get it with $ streamlit version)  0.60\n Python version: (get it with $ python --version)  3.83\n Using Conda? PipEnv? PyEnv? Pex?  conda\n OS version:  Ubuntu 18.04 LTS\n Browser version: Version 83.0.4103.61 (Official Build) (64-bit)\n \n <denchmark-h:h1>Additional information</denchmark-h>\n \n <denchmark-link:https://discuss.streamlit.io/t/network-error-when-uploading-files-larger-than-100mb/2646/>https://discuss.streamlit.io/t/network-error-when-uploading-files-larger-than-100mb/2646/</denchmark-link>\n \n Streamlit folks, I can provide the files I tested with, send me a Slack message\n \t"}, "comments": {}}, "commit": {"commit_id": "e2bd126a42a595fd0297b464486fe34239d38679", "commit_author": "karrie", "commitT": "2020-06-10 18:40:10-04:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "lib\\streamlit\\server\\Server.py", "file_new_name": "lib\\streamlit\\server\\Server.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "125,126,127,128,135", "deleted_lines": "131", "method_info": {"method_name": "start_listening", "method_params": "app", "method_startline": "116", "method_endline": "166"}}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 3, "file_old_name": "lib\\tests\\streamlit\\Server_test.py", "file_new_name": "lib\\tests\\streamlit\\Server_test.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "453,454,456,457,459", "deleted_lines": "453,454,456,457,459", "method_info": {"method_name": "get_httpserver", "method_params": "self", "method_startline": "453", "method_endline": "459"}}, "hunk_1": {"Ismethod": 1, "added_lines": "462,463,466,467,468,469,470,471,472", "deleted_lines": "462,465,466,467,468", "method_info": {"method_name": "test_rotates_a_hundred_ports", "method_params": "self", "method_startline": "461", "method_endline": "472"}}, "hunk_2": {"Ismethod": 1, "added_lines": "453,454,456,457,459", "deleted_lines": "453,454,456,457,459", "method_info": {"method_name": "get_app", "method_params": "self", "method_startline": "453", "method_endline": "459"}}}}}}}