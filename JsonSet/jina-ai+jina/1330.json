{"BR": {"BR_id": "1330", "BR_author": "bhavsarpratik", "BRopenT": "2020-11-23T12:44:34Z", "BRcloseT": "2020-12-20T16:14:55Z", "BR_text": {"BRsummary": "top_k not working from Python client", "BRdescription": "\n \n top_k set via python client is failing in current southpark <denchmark-link:https://github.com/jina-ai/examples/pull/289/checks?check_run_id=1441373067>test</denchmark-link>\n \n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "bhavsarpratik", "commentT": "2020-11-23T13:57:00Z", "comment_text": "\n \t\tI think it may be related to the new jina primitive types\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "bhavsarpratik", "commentT": "2020-11-23T14:27:13Z", "comment_text": "\n \t\tHan has made new QueryLang changes in the queryset in flow.search. Our test are also passing.\n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "bhavsarpratik", "commentT": "2020-11-23T15:35:53Z", "comment_text": "\n \t\tduplicate to <denchmark-link:https://github.com/jina-ai/jina/issues/1316>#1316</denchmark-link>\n \n \t\t"}, "comments_3": {"comment_id": 4, "comment_author": "bhavsarpratik", "commentT": "2020-12-20T14:35:19Z", "comment_text": "\n \t\tthis issue is not solved.\n \t\t"}}}, "commit": {"commit_id": "1645a190b4d1ed5c11547d95af0ac25b075a4f43", "commit_author": "Han Xiao", "commitT": "2020-12-20 17:14:54+01:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": ".github\\workflows\\ci.yml", "file_new_name": ".github\\workflows\\ci.yml", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": null, "deleted_lines": "14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53"}}}, "file_1": {"file_change_type": "ADD", "file_Nmethod": 0, "file_old_name": "None", "file_new_name": ".github\\workflows\\commit-lint.yml"}, "file_2": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": ".github\\workflows\\issue-ref.yml", "file_new_name": ".github\\workflows\\issue-ref.yml", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "6,7", "deleted_lines": null}}}, "file_3": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": ".github\\workflows\\label-pr.yml", "file_new_name": ".github\\workflows\\label-pr.yml", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "4,5", "deleted_lines": "4"}}}, "file_4": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": ".github\\workflows\\latency-tracking.yml", "file_new_name": ".github\\workflows\\latency-tracking.yml", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "5", "deleted_lines": null}}}, "file_5": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "Dockerfiles\\alpinex.Dockerfile", "file_new_name": "Dockerfiles\\alpinex.Dockerfile", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "1", "deleted_lines": "1"}}}, "file_6": {"file_change_type": "ADD", "file_Nmethod": 0, "file_old_name": "None", "file_new_name": "Dockerfiles\\debianx-py39.Dockerfile"}, "file_7": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "Dockerfiles\\debianx.Dockerfile", "file_new_name": "Dockerfiles\\debianx.Dockerfile", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "1,2,3,22,29", "deleted_lines": "1,20,27"}}}, "file_8": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "Dockerfiles\\pip.Dockerfile", "file_new_name": "Dockerfiles\\pip.Dockerfile", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "1,2,3", "deleted_lines": "1"}}}, "file_9": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "Dockerfiles\\protogen.Dockerfile", "file_new_name": "Dockerfiles\\protogen.Dockerfile", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "1", "deleted_lines": "1"}}}, "file_10": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "cli\\autocomplete.py", "file_new_name": "cli\\autocomplete.py", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "38,39,40", "deleted_lines": "38,39"}}}, "file_11": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "jina\\clients\\request.py", "file_new_name": "jina\\clients\\request.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "104,105", "deleted_lines": "104,105", "method_info": {"method_name": "search", "method_params": "args,kwargs", "method_startline": "101", "method_endline": "110"}}}}, "file_12": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "jina\\drivers\\evaluate.py", "file_new_name": "jina\\drivers\\evaluate.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "92,93,94", "deleted_lines": null, "method_info": {"method_name": "extract", "method_params": "self", "method_startline": "91", "method_endline": "94"}}, "hunk_1": {"Ismethod": 1, "added_lines": null, "deleted_lines": "26,27,28,29,30", "method_info": {"method_name": "metric", "method_params": "self", "method_startline": "26", "method_endline": "30"}}}}, "file_13": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "jina\\executors\\evaluators\\__init__.py", "file_new_name": "jina\\executors\\evaluators\\__init__.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": null, "deleted_lines": "20,21,22", "method_info": {"method_name": "metric", "method_params": "self", "method_startline": "20", "method_endline": "22"}}}}, "file_14": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "jina\\executors\\evaluators\\embedding\\cosine.py", "file_new_name": "jina\\executors\\evaluators\\embedding\\cosine.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": null, "deleted_lines": "17,18", "method_info": {"method_name": "metric", "method_params": "self", "method_startline": "17", "method_endline": "18"}}}}, "file_15": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "jina\\executors\\evaluators\\embedding\\euclidean.py", "file_new_name": "jina\\executors\\evaluators\\embedding\\euclidean.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": null, "deleted_lines": "12,13", "method_info": {"method_name": "metric", "method_params": "self", "method_startline": "12", "method_endline": "13"}}}}, "file_16": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "jina\\executors\\evaluators\\rank\\__init__.py", "file_new_name": "jina\\executors\\evaluators\\rank\\__init__.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": null, "deleted_lines": "14,15,16,17,18,19", "method_info": {"method_name": "__init__", "method_params": "self,int,args,kwargs", "method_startline": "14", "method_endline": "19"}}}}, "file_17": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "jina\\executors\\evaluators\\rank\\precision.py", "file_new_name": "jina\\executors\\evaluators\\rank\\precision.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "19,20,21", "deleted_lines": "13,21", "method_info": {"method_name": "evaluate", "method_params": "self,args,kwargs", "method_startline": "13", "method_endline": "21"}}, "hunk_1": {"Ismethod": 1, "added_lines": null, "deleted_lines": "12,13", "method_info": {"method_name": "metric", "method_params": "self", "method_startline": "12", "method_endline": "13"}}}}, "file_18": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "jina\\executors\\evaluators\\rank\\recall.py", "file_new_name": "jina\\executors\\evaluators\\rank\\recall.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "19", "deleted_lines": "13", "method_info": {"method_name": "evaluate", "method_params": "self,args,kwargs", "method_startline": "13", "method_endline": "20"}}, "hunk_1": {"Ismethod": 1, "added_lines": null, "deleted_lines": "12,13", "method_info": {"method_name": "metric", "method_params": "self", "method_startline": "12", "method_endline": "13"}}}}, "file_19": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "jina\\executors\\evaluators\\text\\length.py", "file_new_name": "jina\\executors\\evaluators\\text\\length.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": null, "deleted_lines": "12,13", "method_info": {"method_name": "metric", "method_params": "self", "method_startline": "12", "method_endline": "13"}}}}, "file_20": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "jina\\helloworld\\__init__.py", "file_new_name": "jina\\helloworld\\__init__.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "65,76,77", "deleted_lines": "48,66,77,82,83", "method_info": {"method_name": "hello_world", "method_params": "args", "method_startline": "16", "method_endline": "83"}}}}, "file_21": {"file_change_type": "MODIFY", "file_Nmethod": 9, "file_old_name": "jina\\helloworld\\helper.py", "file_new_name": "jina\\helloworld\\helper.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "50", "deleted_lines": "50,51,52,53,54", "method_info": {"method_name": "_compute_mean_evaluation", "method_params": "resp", "method_startline": "50", "method_endline": "56"}}, "hunk_1": {"Ismethod": 1, "added_lines": "24,25,26,27,28,29,30", "deleted_lines": "24", "method_info": {"method_name": "compute_mean_evaluation", "method_params": "resp", "method_startline": "24", "method_endline": "30"}}, "hunk_2": {"Ismethod": 1, "added_lines": "41,42,43,44,45,46,47,50", "deleted_lines": "41,42,43,44,45,46,47,48,49,50,51,52", "method_info": {"method_name": "evaluate_generator", "method_params": "int,dict,dict", "method_startline": "41", "method_endline": "52"}}, "hunk_3": {"Ismethod": 1, "added_lines": "92,93,94,99,100,103", "deleted_lines": null, "method_info": {"method_name": "write_html", "method_params": "html_path", "method_startline": "91", "method_endline": "119"}}, "hunk_4": {"Ismethod": 1, "added_lines": "33,34,35,36,37,38", "deleted_lines": "33,34,35,36,37,38", "method_info": {"method_name": "group_index_docs_by_label", "method_params": "dict", "method_startline": "33", "method_endline": "38"}}, "hunk_5": {"Ismethod": 1, "added_lines": "79,80,84", "deleted_lines": "85,86", "method_info": {"method_name": "print_result", "method_params": "resp", "method_startline": "78", "method_endline": "88"}}, "hunk_6": {"Ismethod": 1, "added_lines": "25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47", "deleted_lines": "33,34,35,36,37,38,39,40,41,42,43,44,45,46,47", "method_info": {"method_name": "_get_groundtruths", "method_params": "target,pseudo_match", "method_startline": "25", "method_endline": "47"}}, "hunk_7": {"Ismethod": 1, "added_lines": "66,67", "deleted_lines": "62,63,65,66,67", "method_info": {"method_name": "query_generator", "method_params": "int,dict", "method_startline": "62", "method_endline": "67"}}, "hunk_8": {"Ismethod": 1, "added_lines": "66,67,68,70,71,72,73,74,75", "deleted_lines": "66,67", "method_info": {"method_name": "query_generator", "method_params": "int,dict,bool", "method_startline": "66", "method_endline": "75"}}}}, "file_22": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "jina\\parser.py", "file_new_name": "jina\\parser.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": null, "deleted_lines": "231,232,233,234", "method_info": {"method_name": "set_hw_parser", "method_params": "parser", "method_startline": "176", "method_endline": "235"}}}}, "file_23": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "jina\\resources\\helloworld.evaluator.yml", "file_new_name": "jina\\resources\\helloworld.evaluator.yml", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": null, "deleted_lines": "4,5,9,10"}}}, "file_24": {"file_change_type": "DELETE", "file_Nmethod": 0, "file_old_name": "jina\\resources\\helloworld.flow.evaluate.yml", "file_new_name": "None"}, "file_25": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "jina\\resources\\helloworld.flow.query.yml", "file_new_name": "jina\\resources\\helloworld.flow.query.yml", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "18,19", "deleted_lines": null}}}, "file_26": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "jina\\resources\\helloworld.html", "file_new_name": "jina\\resources\\helloworld.html", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "26,27", "deleted_lines": "26,27"}}}, "file_27": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "tests\\integration\\issues\\github_976\\test_topk_rest_api.py", "file_new_name": "tests\\integration\\issues\\github_976\\test_topk_rest_api.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "27,28", "deleted_lines": "27,28", "method_info": {"method_name": "test_top_k_with_rest_api", "method_params": "query_dict", "method_startline": "18", "method_endline": "29"}}}}, "file_28": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "tests\\unit\\drivers\\test_craftevaluation_driver.py", "file_new_name": "tests\\unit\\drivers\\test_craftevaluation_driver.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "104", "deleted_lines": "104", "method_info": {"method_name": "test_crafter_evaluate_driver", "method_params": "mock_diff_evaluator,simple_evaluate_driver,ground_truth_pairs", "method_startline": "98", "method_endline": "105"}}}}, "file_29": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "tests\\unit\\drivers\\test_encodingevaluation_driver.py", "file_new_name": "tests\\unit\\drivers\\test_encodingevaluation_driver.py", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "63,126", "deleted_lines": "63,126"}}}, "file_30": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "tests\\unit\\drivers\\test_rankingevaluation_driver.py", "file_new_name": "tests\\unit\\drivers\\test_rankingevaluation_driver.py", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "56,124", "deleted_lines": "56,124"}}}, "file_31": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "tests\\unit\\executors\\evaluators\\rank\\test_precision.py", "file_new_name": "tests\\unit\\executors\\evaluators\\rank\\test_precision.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "23", "deleted_lines": "23", "method_info": {"method_name": "test_precision_evaluator", "method_params": "eval_at,expected", "method_startline": "17", "method_endline": "24"}}, "hunk_1": {"Ismethod": 1, "added_lines": "43,44,45", "deleted_lines": "43,44,45", "method_info": {"method_name": "test_precision_evaluator_average", "method_params": "eval_at,expected_first", "method_startline": "37", "method_endline": "47"}}}}, "file_32": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "tests\\unit\\executors\\evaluators\\rank\\test_recall.py", "file_new_name": "tests\\unit\\executors\\evaluators\\rank\\test_recall.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "24", "deleted_lines": "24", "method_info": {"method_name": "test_recall_evaluator", "method_params": "eval_at,expected", "method_startline": "18", "method_endline": "26"}}, "hunk_1": {"Ismethod": 1, "added_lines": "46,47,48", "deleted_lines": "46,47,48", "method_info": {"method_name": "test_recall_evaluator_average", "method_params": "eval_at,expected_first", "method_startline": "40", "method_endline": "50"}}}}}}}