{"BR": {"BR_id": "10303", "BR_author": "blake-varden", "BRopenT": "2017-05-30T21:37:53Z", "BRcloseT": "2017-06-14T03:56:30Z", "BR_text": {"BRsummary": "TensorflowDebugger does not dump Stack/Pack/Concat nodes", "BRdescription": "\n <denchmark-h:h3>System information</denchmark-h>\n \n \n Have I written custom code (as opposed to using a stock example script provided in TensorFlow):\n yes\n OS Platform and Distribution (e.g., Linux Ubuntu 16.04):\n Linux Ubuntu 14.04\n TensorFlow installed from (source or binary):\n Binary\n TensorFlow version (use command below):\n 1.1\n Bazel version (if compiling from source):\n CUDA/cuDNN version:\n 8.0/5.1.5\n GPU model and memory:\n Titan X Pascal\n Exact command to reproduce:\n \n <denchmark-code>import sys\n import tensorflow as tf\n from tensorflow.python import debug as tf_debug\n \n base = tf.ones([10], dtype=tf.float32, name='base')\n stacked = tf.stack([base, base], name='stacked')\n concat = tf.concat([[base], [base]], axis=0, name='concat')\n \n session = tf.Session()\n session = tf_debug.LocalCLIDebugWrapperSession(session)\n \n with session.as_default():\n     res = session.run([ stacked, concat])\n print res\n </denchmark-code>\n \n <denchmark-h:h3>Describe the problem</denchmark-h>\n \n When using the TensorflowDebugger with stacked/concated, the stacked/concated nodes do not appear in the set of dumped nodes once a run has completed.  In addition nodes that fed into these nodes are not dumped.\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "blake-varden", "commentT": "2017-05-31T00:00:38Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/caisq>@caisq</denchmark-link>\n  : Mind taking a look?\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "blake-varden", "commentT": "2017-05-31T00:36:46Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/blake-varden>@blake-varden</denchmark-link>\n  This is not a bug. The reason why you see no data dumped is because every node is constant folded in the graph set up by your code.  defines a TF constant. So all the downstream tensors like  and  are effectively constant. TF's graph optimization knows that and folds all nodes into one for each fetched tensor.\n If you replace tf.ones with a tf.Variable, you'll see the data dumped:\n import numpy as np\n import tensorflow as tf\n from tensorflow.python import debug as tf_debug\n \n base = tf.Variable(np.ones([10]), dtype=tf.float32, name=\"base\")\n stacked = tf.stack([base, base], name='stacked')\n concat = tf.concat([[base], [base]], axis=0, name='concat')\n \n session = tf.Session()\n session.run(tf.global_variables_initializer())\n \n session = tf_debug.LocalCLIDebugWrapperSession(session)\n res = session.run([ stacked, concat])\n This behavior is documented in a relatively obscure place:\n <denchmark-link:https://www.tensorflow.org/api_docs/python/tfdbg/watch_graph>https://www.tensorflow.org/api_docs/python/tfdbg/watch_graph</denchmark-link>\n \n \n N.B.: 1. Under certain circumstances, the Tensor may not get actually watched (e.g., if the node of the Tensor is constant-folded during runtime).\n \n For more on constant folding in TF, see:\n <denchmark-link:https://github.com/tensorflow/tensorflow/blob/master/tensorflow/core/protobuf/config.proto#L83>https://github.com/tensorflow/tensorflow/blob/master/tensorflow/core/protobuf/config.proto#L83</denchmark-link>\n \n and\n <denchmark-link:https://www.tensorflow.org/api_docs/python/tf/OptimizerOptions>https://www.tensorflow.org/api_docs/python/tf/OptimizerOptions</denchmark-link>\n \n TFDBG is working as intended as I just checked in the tensorflow/tensorflow:nightly docker image.\n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "blake-varden", "commentT": "2017-05-31T00:42:32Z", "comment_text": "\n \t\tRe-opening the issue as a doc bug. I plan to add a Q&A item for this behavior.\n \t\t"}}}, "commit": {"commit_id": "6f36e6b27106fb4de065db18b9333a3c6c2fbb89", "commit_author": "Shanqing Cai", "commitT": "2017-06-13 09:11:50-07:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "tensorflow\\docs_src\\programmers_guide\\debugger.md", "file_new_name": "tensorflow\\docs_src\\programmers_guide\\debugger.md", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "1,3,5,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,34,35,36,38,39,40,41,42,44,45,46,47,51,52,53,54,55,68,71,72,73,76,79,80,81,84,92,93,105,110,111,112,113,114,116,117,121,122,123,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,213,214,224,225,226,227,228,287,302,303,305,306,318,319,323,324,325,326,327,328,329,330,331,337,343,344,345,346,347,348,349,350,351,352,353,354,355,356,357,358,359,360,361,362,363,364,365,366,367,368,369,370,371,372,373,374,375,376,377,378,379,380,381,382,383,384,385,386,387,388,389,390,391,392,393,394,395,396,397,398,399,400,401,403,404,405,406,407,408,410,411,412,413,414,415,416,417,418,419,420,421,422,423,424,425,426,427,428,429,430,431,432,433,434,435,436,437,438,439,440,441,442,448,449,450,451,452,453,454,471,476,477,478,479,487,488,489,502,507,508,515,517,518,520,521,522,523,524,525,526,527,528,529,530,531,532,533,534,535,536,537,538,539,540,541,542,572,597,598,611,612,613,614,615,619,620,621,622,632,633,634,651,653,654,655,656,657,658,659,660,661,662,663,664,665,666,667,668,669,670,671,672,673,674,675,676,677,678,679,680", "deleted_lines": "1,3,5,8,9,10,11,12,13,14,15,16,17,23,24,25,27,29,30,31,32,33,34,38,39,40,53,56,57,58,59,62,65,68,69,70,71,72,73,81,82,94,99,100,101,102,103,105,106,107,108,109,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,155,165,166,167,168,169,179,180,181,182,183,233,248,249,251,252,264,268,269,275,281,282,283,285,287,288,289,290,296,297,314,319,320,321,329,330,343,354,356,357,358,359,360,361,362,364,365,366,396,421,422,435,436,437,441,442,443,453,454,455,472,474,475,476,477"}}}, "file_1": {"file_change_type": "DELETE", "file_Nmethod": 0, "file_old_name": "tensorflow\\docs_src\\programmers_guide\\tfdbg-tflearn.md", "file_new_name": "None"}}}}