{"BR": {"BR_id": "2006", "BR_author": "ConnorBarnhill", "BRopenT": "2020-07-16T01:49:18Z", "BRcloseT": "2020-07-19T15:08:05Z", "BR_text": {"BRsummary": "Keras model save using WeightedKappaLoss errors, not json serializable", "BRdescription": "\n Describe the bug\n Keras model compiled with WeightedKappaLoss errors when saving, \"TypeError: ('Not JSON Serializable:', tf.float32)\"\n Code to reproduce the issue\n <denchmark-code>model = Sequential()\n \n model._set_inputs(tf.keras.Input((256,256,3)))\n model.add(layers.Dense(6, activation='softmax'))\n \n model.compile(Adam(lr=1e-3), tfa.losses.WeightedKappaLoss(num_classes=6, weightage='quadratic'))\n model.save('test')\n </denchmark-code>\n \n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "ConnorBarnhill", "commentT": "2020-07-16T06:03:54Z", "comment_text": "\n \t\tThanks for reporting this! It's because tf.dtypes.DType cannot be serializable. IMO, we should not set this as attribute. I'll submit a PR for this. Thank you again for the input.\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "ConnorBarnhill", "commentT": "2020-07-20T04:26:54Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/WindQAQ>@WindQAQ</denchmark-link>\n  Thanks for fixing this! What is the release cycle like for this repo? I can use from master from now but would be useful to know when the next release would likely get tagged\n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "ConnorBarnhill", "commentT": "2020-07-20T05:55:14Z", "comment_text": "\n \t\t\n @WindQAQ Thanks for fixing this! What is the release cycle like for this repo? I can use from master from now but would be useful to know when the next release would likely get tagged\n \n Hi <denchmark-link:https://github.com/ConnorBarnhill>@ConnorBarnhill</denchmark-link>\n , we might pin tensorflow-addons 0.11 to tensorFlow 2.3. If you want to try the new stuff on master branch, you can use our daily build via . Thank you again for reporting the issue. We really appreciate it!\n \t\t"}}}, "commit": {"commit_id": "f03f26f8c16097cfbc36739135ea3a38b6287896", "commit_author": "Tzu-Wei Sung", "commitT": "2020-07-19 08:08:04-07:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "tensorflow_addons\\losses\\kappa_loss.py", "file_new_name": "tensorflow_addons\\losses\\kappa_loss.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "130", "deleted_lines": "129", "method_info": {"method_name": "get_config", "method_params": "self", "method_startline": "124", "method_endline": "132"}}, "hunk_1": {"Ismethod": 1, "added_lines": "115,116,130", "deleted_lines": "120,129", "method_info": {"method_name": "call", "method_params": "self,y_true,y_pred", "method_startline": "114", "method_endline": "132"}}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 3, "file_old_name": "tensorflow_addons\\losses\\tests\\kappa_loss_test.py", "file_new_name": "tensorflow_addons\\losses\\tests\\kappa_loss_test.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "64", "deleted_lines": "64", "method_info": {"method_name": "test_linear_weighted_kappa_loss", "method_params": "np_seed", "method_startline": "61", "method_endline": "67"}}, "hunk_1": {"Ismethod": 1, "added_lines": "95,96,97,98,99,100,101,102,103", "deleted_lines": null, "method_info": {"method_name": "test_save_model", "method_params": "tmpdir", "method_startline": "95", "method_endline": "103"}}, "hunk_2": {"Ismethod": 1, "added_lines": "74", "deleted_lines": "74", "method_info": {"method_name": "test_quadratic_weighted_kappa_loss", "method_params": "np_seed", "method_startline": "71", "method_endline": "77"}}}}}}}