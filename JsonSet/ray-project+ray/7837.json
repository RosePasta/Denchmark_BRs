{"BR": {"BR_id": "7837", "BR_author": "ijrsvt", "BRopenT": "2020-03-31T19:18:42Z", "BRcloseT": "2020-04-16T06:58:20Z", "BR_text": {"BRsummary": "GCS Resolves to Wrong Address", "BRdescription": "\n <denchmark-h:h3>What is the problem?</denchmark-h>\n \n GCS Resolves Hostname to incorrect address on MacOS. This causes a variety of problems with actors and ray functionality.\n Ray version and other system information (Python version, TensorFlow version, OS):\n Ray: 0.84\n OS: MacOS Catalina\n <denchmark-h:h3>Reproduction (REQUIRED)</denchmark-h>\n \n Please provide a script that can be run to reproduce the issue. The script should have no external library dependencies (i.e., use fake or mock data / environments):\n <denchmark-code>import ray\n ray.init()\n @ray.remote\n class Actor:\n     def G(self):\n         return 30\n act = Actor.remote()\n ray.get(act.G.remote())\n </denchmark-code>\n \n If we cannot run your script, we cannot fix your issue.\n \n  I have verified my script runs in a clean environment and reproduces the issue.\n  I have verified the issue also occurs with the latest wheels.\n \n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "ijrsvt", "commentT": "2020-03-31T19:29:56Z", "comment_text": "\n \t\tDoes 't this resolve the issue?\n <denchmark-link:https://github.com/ray-project/ray/pull/7822>#7822</denchmark-link>\n \n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "ijrsvt", "commentT": "2020-03-31T19:31:13Z", "comment_text": "\n \t\tNo, it's more of a MacOS configuration problem.\n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "ijrsvt", "commentT": "2020-03-31T19:35:40Z", "comment_text": "\n \t\tSolution:\n Get the current LocalHostName by running:\n sudo scutil --get LocalHostName\n Set the HostName to the result above with .local appended to it.\n sudo scutil --set HostName <name_from_above>.local\n \t\t"}, "comments_3": {"comment_id": 4, "comment_author": "ijrsvt", "commentT": "2020-03-31T20:03:14Z", "comment_text": "\n \t\tJust let you know I could use Ray on Mac without the setup you commented (I also don't have .local appended to my host name).\n \t\t"}, "comments_4": {"comment_id": 5, "comment_author": "ijrsvt", "commentT": "2020-03-31T20:04:43Z", "comment_text": "\n \t\tYes this only happen to some Mac machines for weird reasons\n \t\t"}, "comments_5": {"comment_id": 6, "comment_author": "ijrsvt", "commentT": "2020-03-31T20:56:54Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/rkooo567>@rkooo567</denchmark-link>\n   and <denchmark-link:https://github.com/simon-mo>@simon-mo</denchmark-link>\n  . What IP Address does it resolve to?\n It should be in , on this line:\n \n \t\t"}, "comments_6": {"comment_id": 7, "comment_author": "ijrsvt", "commentT": "2020-04-01T00:16:50Z", "comment_text": "\n \t\tI0331 17:14:34.556454 470506944 gcs_server.cc:181] Finished setting gcs server address: 192.168.1.82:54262\n <denchmark-code>$sudo scutil --get LocalHostName\n SangBins-MacBook-Pro\n </denchmark-code>\n \n \t\t"}, "comments_7": {"comment_id": 8, "comment_author": "ijrsvt", "commentT": "2020-04-04T18:29:21Z", "comment_text": "\n \t\tBTW, the fix that still consistently works for me is RAY_GCS_SERVICE_ENABLED=0. Right now without it on the latest master, I get the following on my mac:\n <denchmark-code>print(ray.cluster_resources())\n # {}\n </denchmark-code>\n \n cc <denchmark-link:https://github.com/raulchen>@raulchen</denchmark-link>\n  <denchmark-link:https://github.com/micafan>@micafan</denchmark-link>\n \n \t\t"}, "comments_8": {"comment_id": 9, "comment_author": "ijrsvt", "commentT": "2020-04-04T18:30:10Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/ijrsvt>@ijrsvt</denchmark-link>\n  is it ok to reopen this issue? I think it's better to have a Ray that works out of the box (then for the user to need to run sudo commands).\n \t\t"}, "comments_9": {"comment_id": 10, "comment_author": "ijrsvt", "commentT": "2020-04-04T19:05:38Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/richardliaw>@richardliaw</denchmark-link>\n  I'm reopening this. PR (<denchmark-link:https://github.com/ray-project/ray/pull/7842>#7842</denchmark-link>\n ) should fix this (within ray).\n \t\t"}}}, "commit": {"commit_id": "5a7882bb44faecb91f93eedfedc853903373d580", "commit_author": "fangfengbin", "commitT": "2020-04-16 14:58:19+08:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "src\\ray\\common\\constants.h", "file_new_name": "src\\ray\\common\\constants.h", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "46,47,48,49", "deleted_lines": null}}}, "file_1": {"file_change_type": "ADD", "file_Nmethod": 0, "file_old_name": "None", "file_new_name": "src\\ray\\common\\network_util.h"}, "file_2": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "src\\ray\\gcs\\gcs_server\\gcs_server.cc", "file_new_name": "src\\ray\\gcs\\gcs_server\\gcs_server.cc", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "160,161,162,163,164", "deleted_lines": "159,160,161,162,163,164,165,166,167,168,169,170", "method_info": {"method_name": "ray::gcs::GcsServer::StoreGcsServerAddressInRedis", "method_params": "", "method_startline": "159", "method_endline": "170"}}}}}}}