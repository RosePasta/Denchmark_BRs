{"BR": {"BR_id": "4099", "BR_author": "robertnishihara", "BRopenT": "2019-02-20T06:46:44Z", "BRcloseT": "2019-02-28T23:15:04Z", "BR_text": {"BRsummary": "Interaction between multiple calls to signal.receive from the same worker.", "BRdescription": "\n There is some interaction between multiple calls to signal.receive from tasks that land on the same worker.\n import ray\n import ray.experimental.signal as signal\n \n ray.init(num_cpus=1)\n \n # Define an application level signal.\n class UserSignal(signal.Signal):\n     def __init__(self, value):\n           self.value = value\n \n     def get_value(self):\n           return self.value\n \n # Define a remote function that sends a user-defined signal.\n @ray.remote\n def send_signal(value):\n     signal.send(UserSignal(value))\n \n a = send_signal.remote(0)\n \n @ray.remote\n def f(sources):\n     return ray.experimental.signal.receive(sources, timeout=1)\n \n print(ray.get(f.remote([a])))\n print(ray.get(f.remote([a])))\n print(ray.get(f.remote([a])))\n This script prints\n <denchmark-code>[(ObjectID(010000005e3ef54a0e3c01021fa08b9a78e3e90c), <__main__.UserSignal object at 0x126ee6550>)]\n []\n []\n </denchmark-code>\n \n However, the three lists should all be identical.\n cc <denchmark-link:https://github.com/istoica>@istoica</denchmark-link>\n \n \t"}, "comments": {}}, "commit": {"commit_id": "88e14feb531bdc7906c065d4eaafb16a5f900a07", "commit_author": "Ion", "commitT": "2019-02-28 15:15:03-08:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "python\\ray\\experimental\\signal.py", "file_new_name": "python\\ray\\experimental\\signal.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "173,174", "deleted_lines": "173", "method_info": {"method_name": "reset", "method_params": "", "method_startline": "165", "method_endline": "174"}}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 3, "file_old_name": "python\\ray\\tests\\test_signal.py", "file_new_name": "python\\ray\\tests\\test_signal.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "329,330", "deleted_lines": null, "method_info": {"method_name": "test_serial_tasks_reading_same_signal.f", "method_params": "sources", "method_startline": "329", "method_endline": "330"}}, "hunk_1": {"Ismethod": 1, "added_lines": "323,324", "deleted_lines": null, "method_info": {"method_name": "test_serial_tasks_reading_same_signal.send_signal", "method_params": "value", "method_startline": "323", "method_endline": "324"}}, "hunk_2": {"Ismethod": 1, "added_lines": "321,322,323,324,325,326,327,328,329,330,331,332,333,334,335,336,337", "deleted_lines": null, "method_info": {"method_name": "test_serial_tasks_reading_same_signal", "method_params": "ray_start", "method_startline": "321", "method_endline": "337"}}}}, "file_2": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "python\\ray\\worker.py", "file_new_name": "python\\ray\\worker.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "968,969,970", "deleted_lines": null, "method_info": {"method_name": "_wait_for_and_process_task", "method_params": "self,task", "method_startline": "903", "method_endline": "980"}}}}}}}