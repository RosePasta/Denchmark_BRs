{"BR": {"BR_id": "1534", "BR_author": "robertnishihara", "BRopenT": "2018-02-13T07:57:57Z", "BRcloseT": "2018-02-19T00:37:47Z", "BR_text": {"BRsummary": "Monitor dies when there is no internet connection.", "BRdescription": "\n <denchmark-h:h3>System information</denchmark-h>\n \n \n Ray installed from (source or binary): source\n Ray version: 0.3.1\n Exact command to reproduce:\n \n \n \n Turn off your internet.\n \n \n Run the following in a Python interpreter.\n import ray\n ray.init()\n \n \n The following will be printed in the background.\n <denchmark-code>Traceback (most recent call last):\n   File \"/Users/rkn/Workspace/ray/python/ray/monitor.py\", line 676, in <module>\n     monitor = Monitor(redis_ip_address, redis_port, autoscaling_config)\n   File \"/Users/rkn/Workspace/ray/python/ray/monitor.py\", line 99, in __init__\n     self.load_metrics = LoadMetrics()\n   File \"/Users/rkn/Workspace/ray/python/ray/autoscaler/autoscaler.py\", line 101, in __init__\n     self.local_ip = services.get_node_ip_address()\n   File \"/Users/rkn/Workspace/ray/python/ray/services.py\", line 203, in get_node_ip_address\n     s.connect((ip_address, int(port)))\n OSError: [Errno 51] Network is unreachable\n </denchmark-code>\n \n This is related to <denchmark-link:https://github.com/ray-project/ray/issues/351>#351</denchmark-link>\n .\n <denchmark-link:https://github.com/ericl>@ericl</denchmark-link>\n  do you think that  should just return  if there is no internet connection?\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "robertnishihara", "commentT": "2018-02-14T06:54:29Z", "comment_text": "\n \t\tSeems reasonable, the node probably isn't part of a cluster if the network is down.\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "robertnishihara", "commentT": "2018-02-14T07:03:29Z", "comment_text": "\n \t\tIt could be part of a cluster that is not connected to the internet. This just means that it can't connect to google I think.\n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "robertnishihara", "commentT": "2018-02-14T07:17:25Z", "comment_text": "\n \t\tIc, in that case the head node needs to know it's private ip to get workers connected to it. So 127.0.0.1 won't work. Is it possible to resolve the private ip even without internet access?\n \t\t"}, "comments_3": {"comment_id": 4, "comment_author": "robertnishihara", "commentT": "2018-02-19T00:37:46Z", "comment_text": "\n \t\tFixed by <denchmark-link:https://github.com/ray-project/ray/pull/1556>#1556</denchmark-link>\n .\n \t\t"}}}, "commit": {"commit_id": "ab37d0cd1964581e55122ac13bbdf950fad77fce", "commit_author": "Eric Liang", "commitT": "2018-02-18 16:36:58-08:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "python\\ray\\services.py", "file_new_name": "python\\ray\\services.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "206,207,208,209,210,211,212,213,214", "deleted_lines": "203,204", "method_info": {"method_name": "get_node_ip_address", "method_params": "address", "method_startline": "194", "method_endline": "214"}}, "hunk_1": {"Ismethod": 1, "added_lines": "188,189,190", "deleted_lines": null, "method_info": {"method_name": "address_to_ip", "method_params": "address", "method_startline": "172", "method_endline": "191"}}}}}}}