{"BR": {"BR_id": "7517", "BR_author": "janblumenkamp", "BRopenT": "2020-03-09T14:46:17Z", "BRcloseT": "2020-05-09T03:20:36Z", "BR_text": {"BRsummary": "[rllib] Trial name hash is always 0", "BRdescription": "\n <denchmark-h:h3>What is the problem?</denchmark-h>\n \n This is only a minor cosmetic issue, but when running RLLib with tune, the checkpoints and parameters are stored in the ray_result directory with a different hash for each new trial to identify it. Since a few days, this hash is always 0, which makes identifying the trial difficult.\n \n Ray version 0.9.0.dev0 (latest wheel)\n TensorFlow version 2.1.0 (GPU)\n Python version 3.6.9\n Linux 5.3.0-28-generic 30~18.04.1-Ubuntu SMP x86_64 x86_64 x86_64 GNU/Linux\n \n <denchmark-h:h3>Reproduction (REQUIRED)</denchmark-h>\n \n <denchmark-code>rllib train --run=PPO --env=CartPole-v0\n </denchmark-code>\n \n Output:\n <denchmark-code>[...]\n == Status ==\n Memory usage on this node: 10.2/62.8 GiB\n Using FIFO scheduling algorithm.\n Resources requested: 3/32 CPUs, 0/1 GPUs, 0.0/32.52 GiB heap, 0.0/11.23 GiB objects\n Result logdir: /home/jb2270/ray_results/default\n Number of trials: 1 (1 RUNNING)\n +-----------------------+----------+-------+\n | Trial name            | status   | loc   |\n |-----------------------+----------+-------|\n | PPO_CartPole-v0_00000 | RUNNING  |       |\n +-----------------------+----------+-------+\n \n </denchmark-code>\n \n If we cannot run your script, we cannot fix your issue.\n \n  I have verified my script runs in a clean environment and reproduces the issue.\n  I have verified the issue also occurs with the latest wheels.\n \n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "janblumenkamp", "commentT": "2020-03-11T15:30:48Z", "comment_text": "\n \t\tThis was introduced in <denchmark-link:https://github.com/ray-project/ray/commit/1ea05a2c088419d9adf84dd14ed11a7cffc97499>1ea05a2</denchmark-link>\n  through <denchmark-link:https://github.com/ray-project/ray/commit/1ea05a2c088419d9adf84dd14ed11a7cffc97499#diff-926f38437c1a69a0942c4a01ab280706R76>this line</denchmark-link>\n .\n <denchmark-link:https://github.com/ericl>@ericl</denchmark-link>\n    I see why you did it after looking at the commit in more detail. Why is it advantageous to have a counter instead of the hash? Would a combination of both perhaps make sense?\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "janblumenkamp", "commentT": "2020-03-11T17:06:38Z", "comment_text": "\n \t\tHey <denchmark-link:https://github.com/janblumenkamp>@janblumenkamp</denchmark-link>\n , sorry for the late followup. Can you provide a screenshot for where this is annoying/nuisance? Is it on tensorboard or in your shell or somewhere else?\n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "janblumenkamp", "commentT": "2020-03-11T17:12:49Z", "comment_text": "\n \t\tNo problem, this is not urgent at all! :)\n Currently, my workflow consists of plenty of trial and error. I start a trial, change something in my environment and if it actually runs without any problems I let it run for some time to get back to it later. Now for each time I started a trial, I will have a new directory containing the results of the trial in ray_results, right? How do I now quickly identify a certain trial? Previously I just copied the random trial hash from my shell (as seen in the initial message in this issue) in a text file for my own reference to get back to it later, but I can not do this anymore as each newly started trial id is identical (i.e. PPO_CartPole-v0_00000).\n \t\t"}, "comments_3": {"comment_id": 4, "comment_author": "janblumenkamp", "commentT": "2020-03-11T18:35:56Z", "comment_text": "\n \t\tI agree this is an annoying problem. We could probably revert it to the random hash without too much effort--- it was changed to a deterministic counter for the sake of easier testing.\n I've assigned the issue to myself.\n \t\t"}, "comments_4": {"comment_id": 5, "comment_author": "janblumenkamp", "commentT": "2020-05-23T19:45:49Z", "comment_text": "\n \t\tThanks for fixing this! What I originally hoped to be able to do though is knowing what is the corresponding directory from the id shown in the terminal (and correspondingly also corresponding experiment id in tensorboard). It looks like the random string shown in the trial name in the terminal has nothing to do with the actual folder name created.\n For example, I start an experiment and in the terminal it is shown to me as <algorithm>_<environment>_<random-string-a>_<experiment-index> while the corresponding folder created is names <algorithm>_<environment>_<experiment-index>_<date-time><random-string-b>. I would like random-string-a and random-string-b to be identical, which is currently not the case.\n \t\t"}}}, "commit": {"commit_id": "1126fe4d2388822735d9a4fce925083514454a1f", "commit_author": "Eric Liang", "commitT": "2020-05-08 20:20:36-07:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "python\\ray\\tune\\suggest\\basic_variant.py", "file_new_name": "python\\ray\\tune\\suggest\\basic_variant.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "55,56,57,58,59,60,61", "deleted_lines": null, "method_info": {"method_name": "__init__", "method_params": "self,shuffle", "method_startline": "45", "method_endline": "61"}}, "hunk_1": {"Ismethod": 1, "added_lines": "105", "deleted_lines": "95", "method_info": {"method_name": "_generate_trials", "method_params": "self,num_samples,unresolved_spec,output_path", "method_startline": "89", "method_endline": "116"}}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "python\\ray\\tune\\tests\\test_progress_reporter.py", "file_new_name": "python\\ray\\tune\\tests\\test_progress_reporter.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233", "deleted_lines": "216,217,218,219,220,221,222,223,224,225,226,227,228", "method_info": {"method_name": "testEndToEndReporting", "method_params": "self", "method_startline": "216", "method_endline": "233"}}}}}}}