{"BR": {"BR_id": "1695", "BR_author": "hoytak", "BRopenT": "2019-04-03T00:02:36Z", "BRcloseT": "2019-04-17T17:13:26Z", "BR_text": {"BRsummary": "In JSON, explicitly quoted \"false\", \"true\" turn to integer 0, 1", "BRdescription": "\n Consider:\n <denchmark-code>In [37]: z = tc.SFrame.read_json(\"/Users/hoytak/workspace/turicreate-3/test.json\")\n Parsing JSON records from /Users/hoytak/workspace/turicreate-3/test.json\n Successfully parsed 2 elements from the JSON file /Users/hoytak/workspace/turicreate-3/test.json\n \n In [38]: z\n Out[38]:\n Columns:\n \ta\tlist\n \tb\tlist\n \n Rows: 2\n \n Data:\n +-----------+-----------+\n |     a     |     b     |\n +-----------+-----------+\n | [a, b, c] | [d, 0, e] |\n | [a, b, c] | [d, e, f] |\n +-----------+-----------+\n [2 rows x 2 columns]\n \n \n In [40]: !cat \"/Users/hoytak/workspace/turicreate-3/test.json\"\n [{\"a\" : [\"a\", \"b\", \"c\"],\n   \"b\" : [\"d\", \"false\", \"e\"]},\n  {\"a\" : [\"a\", \"b\", \"c\"],\n   \"b\" : [\"d\", \"e\", \"f\"]}]\n </denchmark-code>\n \n Note that the behavior in CSV files seems to be more correct:\n <denchmark-code>In [41]: z2 = tc.SFrame.read_csv(\"/Users/hoytak/workspace/turicreate-3/test.csv\")\n Finished parsing file /Users/hoytak/workspace/turicreate-3/test.csv\n Parsing completed. Parsed 3 lines in 0.037746 secs.\n ------------------------------------------------------\n Inferred types from first 100 line(s) of file as\n column_type_hints=[int,list]\n If parsing fails due to incorrect types, you can correct\n the inferred type list above and pass it to read_csv in\n the column_type_hints argument\n ------------------------------------------------------\n Finished parsing file /Users/hoytak/workspace/turicreate-3/test.csv\n Parsing completed. Parsed 3 lines in 0.01061 secs.\n \n In [42]: z2\n Out[42]:\n Columns:\n \tid\tint\n \tlist\tlist\n \n Rows: 3\n \n Data:\n +----+------------+\n | id |    list    |\n +----+------------+\n | 0  |   [a, b]   |\n | 1  | [false, c] |\n | 2  | [false, d] |\n +----+------------+\n [3 rows x 2 columns]\n \n In [43]: !cat /Users/hoytak/workspace/turicreate-3/test.csv\n id, list\n 0, [\"a\", \"b\"]\n 1, [false, \"c\"]\n 2, [\"false\", d]\n </denchmark-code>\n \n \t"}, "comments": {}}, "commit": {"commit_id": "f0186d0801bafa5de6b60546dda2861657a3800a", "commit_author": "Yucheng Low", "commitT": "2019-04-17 10:13:24-07:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 4, "file_old_name": "src\\flexible_type\\flexible_type_spirit_parser.cpp", "file_new_name": "src\\flexible_type\\flexible_type_spirit_parser.cpp", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "213,214", "deleted_lines": "209,211,213", "method_info": {"method_name": "turi::flexible_type_parser::flexible_type_parser", "method_params": "separator,use_escape_char,escape_char,na_val,true_val,false_val", "method_startline": "204", "method_endline": "215"}}, "hunk_1": {"Ismethod": 1, "added_lines": "42,43,68,69,83,96", "deleted_lines": "42,67", "method_info": {"method_name": "turi::flexible_type_parser_impl", "method_params": "delimiter,use_escape_char,escape_char,na_val,true_val,false_val,only_raw_string_substitutions", "method_startline": "37", "method_endline": "180"}}, "hunk_2": {"Ismethod": 1, "added_lines": "213,214,216,218", "deleted_lines": "209,211,213", "method_info": {"method_name": "turi::flexible_type_parser::flexible_type_parser", "method_params": "separator,use_escape_char,escape_char,na_val,true_val,false_val,only_raw_string_substitutions", "method_startline": "208", "method_endline": "220"}}, "hunk_3": {"Ismethod": 1, "added_lines": "42,43,68,69,83,96", "deleted_lines": "42,67", "method_info": {"method_name": "turi::flexible_type_parser_impl", "method_params": "delimiter,use_escape_char,escape_char,na_val,true_val,false_val", "method_startline": "37", "method_endline": "176"}}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "src\\flexible_type\\flexible_type_spirit_parser.hpp", "file_new_name": "src\\flexible_type\\flexible_type_spirit_parser.hpp", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "42,43", "deleted_lines": "42"}}}, "file_2": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "src\\flexible_type\\string_parser.hpp", "file_new_name": "src\\flexible_type\\string_parser.hpp", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "181,214,255,256,257,258,259,260,261,262,263,264,265,274,275,276,277,278,279,280,282,283", "deleted_lines": "252,253,254,255,256,258", "method_info": {"method_name": "parser_impl::string_parser::parse", "method_params": "first,last,skipper,attr", "method_startline": "170", "method_endline": "286"}}, "hunk_1": {"Ismethod": 1, "added_lines": "146", "deleted_lines": null, "method_info": {"method_name": "parser_impl::string_parser::string_parser", "method_params": "config", "method_startline": "133", "method_endline": "147"}}}}, "file_3": {"file_change_type": "MODIFY", "file_Nmethod": 8, "file_old_name": "src\\sframe\\csv_line_tokenizer.cpp", "file_new_name": "src\\sframe\\csv_line_tokenizer.cpp", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "259,260,261,265,267,273,274,283,284,293,294", "deleted_lines": "259,260,264,266,272,273,282,283", "method_info": {"method_name": "turi::csv_line_tokenizer::check_substitutions", "method_params": "buf,len,out", "method_startline": "259", "method_endline": "294"}}, "hunk_1": {"Ismethod": 1, "added_lines": "61", "deleted_lines": "61", "method_info": {"method_name": "turi::csv_line_tokenizer::tokenize_line", "method_params": "str,len,output", "method_startline": "57", "method_endline": "98"}}, "hunk_2": {"Ismethod": 1, "added_lines": "111,166,210,211", "deleted_lines": "111,166,210", "method_info": {"method_name": "turi::csv_line_tokenizer::tokenize_line", "method_params": "str,len,output,permit_undefined,output_order", "method_startline": "100", "method_endline": "256"}}, "hunk_3": {"Ismethod": 1, "added_lines": "31", "deleted_lines": "31", "method_info": {"method_name": "turi::csv_line_tokenizer::tokenize_line", "method_params": "str,len,fn", "method_startline": "28", "method_endline": "55"}}, "hunk_4": {"Ismethod": 1, "added_lines": "469,483,505,625,631", "deleted_lines": "466,607,613,629", "method_info": {"method_name": "turi::csv_line_tokenizer::tokenize_line_impl", "method_params": "str,len,add_token,lookahead,canceltoken", "method_startline": "461", "method_endline": "638"}}, "hunk_5": {"Ismethod": 1, "added_lines": "647", "deleted_lines": null, "method_info": {"method_name": "turi::csv_line_tokenizer::init", "method_params": "", "method_startline": "644", "method_endline": "671"}}, "hunk_6": {"Ismethod": 1, "added_lines": "259,260,261,265,267,273,274,283,284,293,294,295,296,297,298,299,300,301,302,303,304,320", "deleted_lines": "258,259,260,264,266,272,273,282,283,307", "method_info": {"method_name": "turi::csv_line_tokenizer::parse_as", "method_params": "buf,len,out,recursive_parse", "method_startline": "258", "method_endline": "401"}}, "hunk_7": {"Ismethod": 1, "added_lines": "296,297,298,299,300,301,302,303,304,320", "deleted_lines": "307,406,414", "method_info": {"method_name": "turi::csv_line_tokenizer::parse_as", "method_params": "buf,len,raw,rawlen,out,recursive_parse", "method_startline": "296", "method_endline": "414"}}}}, "file_4": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "src\\sframe\\csv_line_tokenizer.hpp", "file_new_name": "src\\sframe\\csv_line_tokenizer.hpp", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "136,137,138,139,140,141,142,296,359,360,361,362,363,364,365", "deleted_lines": null}}}, "file_5": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "src\\unity\\lib\\unity_sarray.cpp", "file_new_name": "src\\unity\\lib\\unity_sarray.cpp", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "223,224,225,226,227", "deleted_lines": "223", "method_info": {"method_name": "turi::unity_sarray::construct_from_json_record_files", "method_params": "url", "method_startline": "216", "method_endline": "312"}}}}, "file_6": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "src\\unity\\lib\\unity_sframe.cpp", "file_new_name": "src\\unity\\lib\\unity_sframe.cpp", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "219,220,221", "deleted_lines": null, "method_info": {"method_name": "turi::unity_sframe::construct_from_csvs", "method_params": "url,csv_parsing_config,column_type_hints", "method_startline": "142", "method_endline": "291"}}}}, "file_7": {"file_change_type": "MODIFY", "file_Nmethod": 3, "file_old_name": "src\\unity\\python\\turicreate\\data_structures\\sframe.py", "file_new_name": "src\\unity\\python\\turicreate\\data_structures\\sframe.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "1085", "deleted_lines": null, "method_info": {"method_name": "read_csv_with_errors", "method_params": "cls,url,delimiter,header,comment_char,escape_char,double_quote,quote_char,skip_initial_space,column_type_hints,na_values,line_terminator,usecols,nrows,skiprows,verbose,nrows_to_infer,true_values,false_values,_only_raw_string_substitutions,kwargs", "method_startline": "1066", "method_endline": "1086"}}, "hunk_1": {"Ismethod": 1, "added_lines": "1250", "deleted_lines": null, "method_info": {"method_name": "read_csv", "method_params": "cls,url,delimiter,header,error_bad_lines,comment_char,escape_char,double_quote,quote_char,skip_initial_space,column_type_hints,na_values,line_terminator,usecols,nrows,skiprows,verbose,nrows_to_infer,true_values,false_values,_only_raw_string_substitutions,kwargs", "method_startline": "1230", "method_endline": "1251"}}, "hunk_2": {"Ismethod": 1, "added_lines": "887", "deleted_lines": null, "method_info": {"method_name": "_read_csv_impl", "method_params": "cls,url,delimiter,header,error_bad_lines,comment_char,escape_char,double_quote,quote_char,skip_initial_space,column_type_hints,na_values,line_terminator,usecols,nrows,skiprows,verbose,store_errors,nrows_to_infer,true_values,false_values,_only_raw_string_substitutions,kwargs", "method_startline": "866", "method_endline": "888"}}}}, "file_8": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "src\\unity\\python\\turicreate\\test\\test_json.py", "file_new_name": "src\\unity\\python\\turicreate\\test\\test_json.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "395", "deleted_lines": "395", "method_info": {"method_name": "test_arbitrary_json", "method_params": "self,json_obj", "method_startline": "359", "method_endline": "395"}}, "hunk_1": {"Ismethod": 1, "added_lines": "398,399,400,401,402,403,404,405,406,407,408,409,410,411,412,413,414,415,416,417,418,419,420,421,422,423,424,425,426,427", "deleted_lines": null, "method_info": {"method_name": "test_true_false_substitutions", "method_params": "self", "method_startline": "398", "method_endline": "427"}}}}, "file_9": {"file_change_type": "MODIFY", "file_Nmethod": 8, "file_old_name": "test\\sframe\\sframe_csv_test.cxx", "file_new_name": "test\\sframe\\sframe_csv_test.cxx", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "408,409,410,411,412,413,414,415,416,417,418,419,420,421,422,423,424,425,426,427", "deleted_lines": null, "method_info": {"method_name": "test_substitutions_raw_string_matches1", "method_params": "", "method_startline": "408", "method_endline": "427"}}, "hunk_1": {"Ismethod": 1, "added_lines": "361,362,363,364,365,366,367,368,369,370,371,372,373,374,375,376,377,378,379,380,381,382", "deleted_lines": null, "method_info": {"method_name": "test_true_values", "method_params": "", "method_startline": "361", "method_endline": "382"}}, "hunk_2": {"Ismethod": 1, "added_lines": "385,386,387,388,389,390,391,392,393,394,395,396,397,398,399,400,401,402,403,404,405,406", "deleted_lines": null, "method_info": {"method_name": "test_false_values", "method_params": "", "method_startline": "385", "method_endline": "406"}}, "hunk_3": {"Ismethod": 1, "added_lines": "935,938,939,940,941", "deleted_lines": "937,938", "method_info": {"method_name": "sframe_test::test_substitutions", "method_params": "", "method_startline": "935", "method_endline": "942"}}, "hunk_4": {"Ismethod": 1, "added_lines": null, "deleted_lines": "845", "method_info": {"method_name": "sframe_test::test_na", "method_params": "", "method_startline": "845", "method_endline": "848"}}, "hunk_5": {"Ismethod": 1, "added_lines": "938,939", "deleted_lines": "937,938", "method_info": {"method_name": "BOOST_AUTO_TEST_CASE", "method_params": "test_na", "method_startline": "937", "method_endline": "939"}}, "hunk_6": {"Ismethod": 1, "added_lines": "429,430,431,432,433,434,435,436,437,438,439,440,441,442,443,444,445,446,447,448", "deleted_lines": null, "method_info": {"method_name": "test_substitutions_raw_string_matches2", "method_params": "", "method_startline": "429", "method_endline": "448"}}, "hunk_7": {"Ismethod": 1, "added_lines": "1031,1032", "deleted_lines": null, "method_info": {"method_name": "BOOST_AUTO_TEST_CASE", "method_params": "test_substitutions", "method_startline": "1031", "method_endline": "1033"}}}}}}}