{"BR": {"BR_id": "355", "BR_author": "gustavla", "BRopenT": "2018-03-09T17:38:28Z", "BRcloseT": "2018-03-21T23:16:58Z", "BR_text": {"BRsummary": "NDArray: Problem creating SFrame when OWNDATA is False", "BRdescription": "\n I can't seem to put an ndarray into an SFrame where the OWNDATA flag is False:\n <denchmark-code>In [58]: x = np.array([1, 2, 3])\n \n In [59]: x.flags\n Out[59]: \n   C_CONTIGUOUS : True\n   F_CONTIGUOUS : True\n   OWNDATA : True\n   WRITEABLE : True\n   ALIGNED : True\n   WRITEBACKIFCOPY : False\n   UPDATEIFCOPY : False\n \n In [60]: tc.SFrame({'x': [x]})\n Out[60]: \n Columns:\n \tx\tndarray\n \n Rows: 1\n \n Data:\n +------------+\n |     x      |\n +------------+\n | [1. 2. 3.] |\n +------------+\n [1 rows x 1 columns]\n \n In [61]: y = x[:]\n \n In [62]: y.flags\n Out[62]: \n   C_CONTIGUOUS : True\n   F_CONTIGUOUS : True\n   OWNDATA : False\n   WRITEABLE : True\n   ALIGNED : True\n   WRITEBACKIFCOPY : False\n   UPDATEIFCOPY : False\n \n In [63]: tc.SFrame({'y': [y]})\n [...]\n TypeError: Could not convert python object with type ndarray('int64') to flexible_type.\n </denchmark-code>\n \n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "gustavla", "commentT": "2018-03-09T18:08:58Z", "comment_text": "\n \t\tI think this issue is with type interpretation inconsistencies when OWNDATA is false. The following works:\n <denchmark-code>x = np.array([1, 2, 3],dtype='d')\n y = x[:]\n tc.SFrame({'y': [y]})\n </denchmark-code>\n \n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "gustavla", "commentT": "2018-03-09T18:45:22Z", "comment_text": "\n \t\tActually, that example also fails, but I realized now it only happens on Python 3.\n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "gustavla", "commentT": "2018-03-21T21:25:33Z", "comment_text": "\n \t\tActually, <denchmark-link:https://github.com/apple/turicreate/pull/385>#385</denchmark-link>\n  fixes this issue.\n \t\t"}}}, "commit": {"commit_id": "bc3ce5545cc40b52e93817f3f87985d177b2848d", "commit_author": "Gustav Larsson", "commitT": "2018-03-21 16:16:57-07:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "src\\unity\\python\\turicreate\\cython\\cy_flexible_type.pyx", "file_new_name": "src\\unity\\python\\turicreate\\cython\\cy_flexible_type.pyx", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "1457,1462", "deleted_lines": "1457,1462"}}}}}}