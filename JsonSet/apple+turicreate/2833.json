{"BR": {"BR_id": "2833", "BR_author": "guihao-liang", "BRopenT": "2019-12-10T18:50:29Z", "BRcloseT": "2019-12-18T19:53:21Z", "BR_text": {"BRsummary": "OD: invalid coordinate value gets no error and make it through", "BRdescription": "\n <denchmark-link:https://github.com/apple/turicreate/issues/2830>#2830</denchmark-link>\n \n same repro, except change the func into:\n <denchmark-code> 39 def func(x):\n  40     for y in x:\n  41         # y[\"coordinates\"]['x'] = None # y[\"coordinates\"]['y'] = None\n  42         y[\"coordinates\"]['width'] = None\n  43         y[\"coordinates\"]['height'] = None\n  44     return x\n </denchmark-code>\n \n feel free to play with it.\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "guihao-liang", "commentT": "2019-12-10T18:50:58Z", "comment_text": "\n \t\thmmmm cool ;)\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "guihao-liang", "commentT": "2019-12-10T20:28:18Z", "comment_text": "\n \t\t<denchmark-code>+--------------+--------------+--------------+\n | Iteration    | Loss         | Elapsed Time |\n +--------------+--------------+--------------+\n | 1            | 4.39937      | 2.92s        |\n | 2            | 4.5508       | 3.53s        |\n | 3            | 4.50975      | 4.63s        |\n | 4            | 4.43646      | 5.56s        |\n | 5            | 4.30856      | 6.29s        |\n | 6            | 4.39513      | 7.02s        |\n | 11           | 4.18712      | 10.68s       |\n | 16           | 4.43339      | 14.34s       |\n | 21           | 4.43974      | 18.50s       |\n | 26           | 3.96112      | 22.16s       |\n | 31           | 3.98385      | 25.81s       |\n | 36           | 3.64385      | 29.48s       |\n | 41           | 3.83445      | 34.50s       |\n | 46           | 4.22252      | 38.24s       |\n | 51           | 3.56531      | 43.04s       |\n | 56           | 4.0538       | 46.69s       |\n | 61           | 3.85165      | 51.21s       |\n | 66           | 3.63041      | 54.87s       |\n | 71           | 3.45167      | 58.53s       |\n | 76           | 3.37094      | 1m 2s        |\n | 81           | 3.50457      | 1m 6s        |\n | 86           | 3.10482      | 1m 10s       |\n | 91           | 3.43324      | 1m 13s       |\n | 96           | 3.18027      | 1m 17s       |\n | 100          | 3.40443      | 1m 20s       |\n +--------------+--------------+--------------+\n </denchmark-code>\n \n haha interesting ;)\n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "guihao-liang", "commentT": "2019-12-10T22:11:18Z", "comment_text": "\n \t\tI bet the missing value is skipped. Check the log while you run this code snippet. If there's a log associated with it, it should be better we can surface it to users.\n what you need to do is to get the log file location of current running python process\n <denchmark-code>tc.config.get_server_log_location()\n </denchmark-code>\n \n don't close the process. At the same time,\n <denchmark-code>tail -f <log>\n </denchmark-code>\n \n and run the repro code. In this way, you can check whether the missing value is logged or not.\n \t\t"}, "comments_3": {"comment_id": 4, "comment_author": "guihao-liang", "commentT": "2019-12-10T22:12:22Z", "comment_text": "\n \t\tNone is converted to 0 in data iterator. nvm it is a easy fix.\n \t\t"}, "comments_4": {"comment_id": 5, "comment_author": "guihao-liang", "commentT": "2019-12-10T22:16:06Z", "comment_text": "\n \t\t\n None is converted to 0 in the data iterator. nvm, it is an easy fix.\n \n Okay, it should be an easy fix in the documentation to mention how None is treated under a certain context. It's reasonable to set None as 0 for width and height but not for x and y. You can surface it to the user to let them know None is treated as zero during runtime so they can choose to stop the training process and call dropna first.\n \t\t"}, "comments_5": {"comment_id": 6, "comment_author": "guihao-liang", "commentT": "2019-12-10T22:18:11Z", "comment_text": "\n \t\t\n \n None is converted to 0 in the data iterator. nvm, it is an easy fix.\n \n Okay, it should be an easy fix in the documentation to mention how None is treated under a certain context. It's reasonable to set None as 0 for width and height but not for x and y. You can surface it to the user to let them know None is treated as zero during runtime so they can choose to stop the training process and call dropna first.\n \n hmmmm I don't think either this 4 number should be None,\n if width and height is 0 that means the bounding box is invalid.\n \t\t"}, "comments_6": {"comment_id": 7, "comment_author": "guihao-liang", "commentT": "2019-12-10T22:19:11Z", "comment_text": "\n \t\t\n \n \n None is converted to 0 in the data iterator. nvm, it is an easy fix.\n \n Okay, it should be an easy fix in the documentation to mention how None is treated under a certain context. It's reasonable to set None as 0 for width and height but not for x and y. You can surface it to the user to let them know None is treated as zero during runtime so they can choose to stop the training process and call dropna first.\n \n hmmmm I don't think either this 4 number should be None,\n if width and height is 0 that means the bounding box is invalid.\n \n it could mean there's no bounding box?\n \t\t"}}}, "commit": {"commit_id": "b6d90beb55a209b24ecc5900d765d9eb7b6b2c9c", "commit_author": "Henry Tao", "commitT": "2019-12-18 11:53:05-08:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 3, "file_old_name": "src\\python\\turicreate\\test\\test_object_detector.py", "file_new_name": "src\\python\\turicreate\\test\\test_object_detector.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205", "deleted_lines": "189,190,191,192,193,194,195,196,197,198", "method_info": {"method_name": "test_create_with_invalid_annotations_coordinate", "method_params": "self", "method_startline": "182", "method_endline": "205"}}, "hunk_1": {"Ismethod": 1, "added_lines": "369,370,371,372,373", "deleted_lines": null, "method_info": {"method_name": "test_evaluate_with_missing_annotations_label", "method_params": "self", "method_startline": "361", "method_endline": "373"}}, "hunk_2": {"Ismethod": 1, "added_lines": "215,216,217,218,219", "deleted_lines": null, "method_info": {"method_name": "test_create_with_missing_annotations_label", "method_params": "self", "method_startline": "208", "method_endline": "219"}}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "src\\toolkits\\object_detection\\od_data_iterator.cpp", "file_new_name": "src\\toolkits\\object_detection\\od_data_iterator.cpp", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "128,129,130,131,132,133,134,135", "deleted_lines": null, "method_info": {"method_name": "turi::object_detection::parse_annotations", "method_params": "flex_annotations,image_width,image_height,class_to_index_map,annotation_origin,annotation_scale,annotation_position", "method_startline": "83", "method_endline": "255"}}}}}}}