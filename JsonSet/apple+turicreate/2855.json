{"BR": {"BR_id": "2855", "BR_author": "jakesabathia2", "BRopenT": "2019-12-13T22:34:31Z", "BRcloseT": "2019-12-23T22:15:27Z", "BR_text": {"BRsummary": "[6.1] AC: Strange behavior when k &lt;= 0 for predict_topk. Should check for the input.", "BRdescription": "\n When k < 0, in the C++ it produces overflow for size_t type,\n which cause k to be something like 18446744073709551615.\n So the predict_topk function perform like k=num_class.\n For 5.8 it also performs the same way.\n However, when k = 0,\n 5.8 :\n <denchmark-code>+--------+---------------------+-----------------+\n | row_id |        class        |   probability   |\n +--------+---------------------+-----------------+\n |   0    |       standing      |  0.641275942326 |\n |   0    |       sitting       |  0.230049073696 |\n |   0    |       walking       | 0.0515022464097 |\n |   0    | climbing_downstairs | 0.0410682857037 |\n |   0    |  climbing_upstairs  | 0.0238569062203 |\n |   0    |        laying       |  0.012247575447 |\n |   1    |       standing      |  0.641275942326 |\n |   1    |       sitting       |  0.230049073696 |\n |   1    |       walking       | 0.0515022464097 |\n |   1    | climbing_downstairs | 0.0410682857037 |\n +--------+---------------------+-----------------+\n </denchmark-code>\n \n 6.0:\n <denchmark-code>+--------+-------+-------------+\n | row_id | class | probability |\n +--------+-------+-------------+\n |   0    |  None |     None    |\n |   1    |  None |     None    |\n |   2    |  None |     None    |\n |   3    |  None |     None    |\n |   4    |  None |     None    |\n |   5    |  None |     None    |\n |   6    |  None |     None    |\n |   7    |  None |     None    |\n |   8    |  None |     None    |\n |   9    |  None |     None    |\n +--------+-------+-------------+\n </denchmark-code>\n \n which is strange.\n \t"}, "comments": {}}, "commit": {"commit_id": "4d6786018f91609d8123924882de82112790b286", "commit_author": "Henry Tao", "commitT": "2019-12-23 14:15:09-08:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "src\\python\\turicreate\\test\\test_activity_classifier.py", "file_new_name": "src\\python\\turicreate\\test\\test_activity_classifier.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "442,443,444,445,446,447,448,449,450,451", "deleted_lines": null, "method_info": {"method_name": "test_predict_topk_invalid_k", "method_params": "self", "method_startline": "442", "method_endline": "451"}}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "src\\python\\turicreate\\toolkits\\activity_classifier\\_activity_classifier.py", "file_new_name": "src\\python\\turicreate\\toolkits\\activity_classifier\\_activity_classifier.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "614,615,616", "deleted_lines": null, "method_info": {"method_name": "predict_topk", "method_params": "self,dataset,output_type,k,output_frequency", "method_startline": "555", "method_endline": "617"}}}}}}}