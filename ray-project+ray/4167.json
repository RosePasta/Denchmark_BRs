{"BR": {"BR_id": "4167", "BR_author": "bjg2", "BRopenT": "2019-02-26T16:12:00Z", "BRcloseT": "2019-03-06T18:21:06Z", "BR_text": {"BRsummary": "[rllib] Batch prev_action field is always numpy array of zeros", "BRdescription": "\n Batch prev_action field is filled with  in <denchmark-link:https://github.com/ray-project/ray/blob/master/python/ray/rllib/evaluation/sampler.py#L389>sampler.py line 389</denchmark-link>\n , which boils down to  in <denchmark-link:https://github.com/ray-project/ray/blob/master/python/ray/rllib/evaluation/episode.py>episode.py</denchmark-link>\n , which is never assigned to.  will always return numpy array of zeros.\n Not sure if any algorithm uses prev_actions, but if it does it is getting wrong values. If neither algorithm uses it then it should be deleted.\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "bjg2", "commentT": "2019-03-02T07:22:15Z", "comment_text": "\n \t\tIronically, we already had a unit test for this, but the test data was also all zeros so it passed.\n \t\t"}}}, "commit": {"commit_id": "6d705036f3d2e1554f93ded9220d5a3eaead3822", "commit_author": "Eric Liang", "commitT": "2019-03-06 10:21:05-08:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 3, "file_old_name": "python\\ray\\rllib\\evaluation\\episode.py", "file_new_name": "python\\ray\\rllib\\evaluation\\episode.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "166,167,168", "deleted_lines": null, "method_info": {"method_name": "_set_last_action", "method_params": "self,agent_id,action", "method_startline": "165", "method_endline": "169"}}, "hunk_1": {"Ismethod": 1, "added_lines": "87,88,89,90", "deleted_lines": null, "method_info": {"method_name": "last_raw_obs_for", "method_params": "self,agent_id", "method_startline": "87", "method_endline": "90"}}, "hunk_2": {"Ismethod": 1, "added_lines": "159,160", "deleted_lines": null, "method_info": {"method_name": "_set_last_raw_obs", "method_params": "self,agent_id,obs", "method_startline": "159", "method_endline": "160"}}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "python\\ray\\rllib\\evaluation\\sampler.py", "file_new_name": "python\\ray\\rllib\\evaluation\\sampler.py", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "375", "deleted_lines": null}}}, "file_2": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "python\\ray\\rllib\\examples\\custom_metrics_and_callbacks.py", "file_new_name": "python\\ray\\rllib\\examples\\custom_metrics_and_callbacks.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "23,24", "deleted_lines": null, "method_info": {"method_name": "on_episode_step", "method_params": "info", "method_startline": "20", "method_endline": "25"}}}}, "file_3": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "python\\ray\\rllib\\tests\\test_policy_evaluator.py", "file_new_name": "python\\ray\\rllib\\tests\\test_policy_evaluator.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "142", "deleted_lines": null, "method_info": {"method_name": "testBasic", "method_params": "self", "method_startline": "132", "method_endline": "155"}}}}}}}