{"BR": {"BR_id": "3780", "BR_author": "jovany-wang", "BRopenT": "2019-01-15T07:14:42Z", "BRcloseT": "2019-02-19T04:46:08Z", "BR_text": {"BRsummary": "Failed to execute `state.task_table()` when running a Java App", "BRdescription": "\n <denchmark-h:h3>System information</denchmark-h>\n \n \n OS Platform and Distribution (e.g., Linux Ubuntu 16.04): MBP 10.11.6\n Ray installed from (source or binary): from source/current master\n Ray version:\n Python version:python3.6.5\n Exact command to reproduce:\n \n <denchmark-h:h3>Describe the problem</denchmark-h>\n \n \n Run a Java actor example\n \n     RayActor<Counter> actor = Ray.createActor(ActorTest::factory, 1);\n     Assert.assertNotEquals(actor.getId(), UniqueId.NIL);\n     // Test calling an actor\n     Assert.assertEquals(Integer.valueOf(1), Ray.call(Counter::getValue, actor).get());\n \n     TimeUnit.SECONDS.sleep(100000);\n \n run this scirpt to get task list from GCS:\n \n from ray.experimental import state\n \n gs = state.GlobalState()\n gs._initialize_global_state(\"127.0.0.1\", 6379)\n \n print(gs.task_table())\n them we got this error:\n _pickle.UnpicklingError: invalid load key, '\\xf7'.\n \n The above exception was the direct cause of the following exception:\n \n Traceback (most recent call last):\n   File \"demo.py\", line 6, in <module>\n     print(gs.task_table())\n   File \"/Users/wangqing/Workspace/ray/python/ray/experimental/state.py\", line 367, in task_table\n     ray.ObjectID(task_id_binary))\n   File \"/Users/wangqing/Workspace/ray/python/ray/experimental/state.py\", line 320, in _task_table\n     \"Args\": task_spec.arguments(),\n SystemError: <built-in method arguments of task.Task object at 0x117f22690> returned a result with an error set\n I added some logs to trace it, and found that\uff1a\n function  at <denchmark-link:https://github.com/ray-project/ray/blob/master/src/ray/raylet/lib/python/common_extension.cc#L597>this line</denchmark-link>\n  returns a NULL.\n That means  the arg failed.\n PS:\n If I run a python actor example, then run the script, I will get correct result.\n \t"}, "comments": {}}, "commit": {"commit_id": "7574757391da35030938e10296505bb0d55ef972", "commit_author": "Wang Qing", "commitT": "2019-02-19 12:46:07+08:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "python\\ray\\experimental\\state.py", "file_new_name": "python\\ray\\experimental\\state.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "314", "deleted_lines": null, "method_info": {"method_name": "_task_table", "method_params": "self,task_id", "method_startline": "285", "method_endline": "345"}}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "python\\ray\\includes\\task.pxi", "file_new_name": "python\\ray\\includes\\task.pxi", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "142,145,146,147,148,149,150,151,152,153,154,155,156,157,158,186,187,188,189", "deleted_lines": "15,145,146,147,148,149,150,151,152,153"}}}, "file_2": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "python\\ray\\services.py", "file_new_name": "python\\ray\\services.py", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "1137", "deleted_lines": "1137"}}}}}}