{"BR": {"BR_id": "10319", "BR_author": "mfitton", "BRopenT": "2020-08-25T17:18:56Z", "BRcloseT": "2020-08-30T06:18:24Z", "BR_text": {"BRsummary": "[dashboard] When autoscaler adds/removes worker, dashboard crashes", "BRdescription": "\n <denchmark-h:h3>What is the problem?</denchmark-h>\n \n This is originally reported by Pieterjan for 0.8.7 but also appears to be in issue in the latest nightly. The issue would appear to occur across\n <denchmark-h:h3>Reproduction (REQUIRED)</denchmark-h>\n \n This is not a script, but given I will author the fix, I think this is sufficient:\n \n \n Start a cluster with autoscaling enabled\n \n \n Increase workload so that an additional worker or workers are spawned\n \n \n When one of those workers is removed, their log entries still exist on the backend\n \n \n The following stack trace occurs and crashes the dashboard: /ray/dashboard/node_stats.py\", line 63, in _insert_log_counts self._node_stats[hostname][\"log_count\"] = logs_by_pid\n \n \n  I have verified my script runs in a clean environment and reproduces the issue.\n \n \n  I have verified the issue also occurs with the latest wheels.\n \n \n \t"}, "comments": {}}, "commit": {"commit_id": "63ad2e3340cc7512b41163506d420ba433d4e77c", "commit_author": "Max Fitton", "commitT": "2020-08-29 23:18:23-07:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "python\\ray\\dashboard\\node_stats.py", "file_new_name": "python\\ray\\dashboard\\node_stats.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "73,74,75,76,77,78", "deleted_lines": "70", "method_info": {"method_name": "_insert_error_counts", "method_params": "self", "method_startline": "70", "method_endline": "78"}}, "hunk_1": {"Ismethod": 1, "added_lines": "63,64,65,66,67,68", "deleted_lines": "63,64", "method_info": {"method_name": "_insert_log_counts", "method_params": "self", "method_startline": "60", "method_endline": "68"}}}}}}}