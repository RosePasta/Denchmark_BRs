{"BR": {"BR_id": "791", "BR_author": "robertnishihara", "BRopenT": "2017-08-01T03:29:35Z", "BRcloseT": "2017-09-06T03:59:50Z", "BR_text": {"BRsummary": "Test failure in valgrind plasma test.", "BRdescription": "\n I've seen the error below several times. For the full log, see <denchmark-link:https://s3.amazonaws.com/archive.travis-ci.org/jobs/259596374/log.txt?X-Amz-Expires=30&X-Amz-Date=20170801T032248Z&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAJRYRXRSVGNKPKO5A/20170801/us-east-1/s3/aws4_request&X-Amz-SignedHeaders=host&X-Amz-Signature=dd9b45af382358c2c0fec0704aa0b5d91bafa1d4474111c7487b6599d90304ee>https://s3.amazonaws.com/archive.travis-ci.org/jobs/259596374/log.txt?X-Amz-Expires=30&X-Amz-Date=20170801T032248Z&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAJRYRXRSVGNKPKO5A/20170801/us-east-1/s3/aws4_request&X-Amz-SignedHeaders=host&X-Amz-Signature=dd9b45af382358c2c0fec0704aa0b5d91bafa1d4474111c7487b6599d90304ee</denchmark-link>\n .\n It's possibly related to the line [ERROR] (/home/travis/build/ray-project/ray/src/common/io.cc:47: errno: Address already in use) Bind failed for port 48658 that appears in the log, though I'm not sure.\n <denchmark-code>test_wait (__main__.TestPlasmaManager) ... ==18333== Memcheck, a memory error detector\n ==18333== Copyright (C) 2002-2013, and GNU GPL'd, by Julian Seward et al.\n ==18333== Using Valgrind-3.10.1 and LibVEX; rerun with -h for copyright info\n ==18333== Command: /home/travis/.local/lib/python2.7/site-packages/ray-0.1.2-py2.7-linux-x86_64.egg/ray/plasma/../core/src/plasma/plasma_store -s /tmp/plasma_store52887138 -m 1000000000\n ==18333== \n Allowing the Plasma store to use up to 1GB of memory.\n ==18334== Memcheck, a memory error detector\n ==18334== Copyright (C) 2002-2013, and GNU GPL'd, by Julian Seward et al.\n ==18334== Using Valgrind-3.10.1 and LibVEX; rerun with -h for copyright info\n ==18334== Command: /home/travis/.local/lib/python2.7/site-packages/ray-0.1.2-py2.7-linux-x86_64.egg/ray/plasma/../core/src/plasma/plasma_store -s /tmp/plasma_store39614874 -m 1000000000\n ==18334== \n Allowing the Plasma store to use up to 1GB of memory.\n 18335:M 01 Aug 02:34:34.521 # WARNING: The TCP backlog setting of 511 cannot be enforced because /proc/sys/net/core/somaxconn is set to the lower value of 128.\n 18335:M 01 Aug 02:34:34.521 # Server started, Redis version 3.9.102\n 18335:M 01 Aug 02:34:34.521 # WARNING overcommit_memory is set to 0! Background save may fail under low memory condition. To fix this issue add 'vm.overcommit_memory = 1' to /etc/sysctl.conf and then reboot or run the command 'sysctl vm.overcommit_memory=1' for this to take effect.\n 18335:M 01 Aug 02:34:34.521 # WARNING you have Transparent Huge Pages (THP) support enabled in your kernel. This will create latency and memory usage issues with Redis. To fix this issue run the command 'echo never > /sys/kernel/mm/transparent_hugepage/enabled' as root, and add it to your /etc/rc.local in order to retain the setting after a reboot. Redis must be restarted after THP is disabled.\n Waiting for redis server at 127.0.0.1:37342 to respond...\n 18339:M 01 Aug 02:34:34.627 # WARNING: The TCP backlog setting of 511 cannot be enforced because /proc/sys/net/core/somaxconn is set to the lower value of 128.\n 18339:M 01 Aug 02:34:34.627 # Server started, Redis version 3.9.102\n 18339:M 01 Aug 02:34:34.627 # WARNING overcommit_memory is set to 0! Background save may fail under low memory condition. To fix this issue add 'vm.overcommit_memory = 1' to /etc/sysctl.conf and then reboot or run the command 'sysctl vm.overcommit_memory=1' for this to take effect.\n 18339:M 01 Aug 02:34:34.627 # WARNING you have Transparent Huge Pages (THP) support enabled in your kernel. This will create latency and memory usage issues with Redis. To fix this issue run the command 'echo never > /sys/kernel/mm/transparent_hugepage/enabled' as root, and add it to your /etc/rc.local in order to retain the setting after a reboot. Redis must be restarted after THP is disabled.\n Waiting for redis server at 127.0.0.1:14258 to respond...\n ==18343== Memcheck, a memory error detector\n ==18343== Copyright (C) 2002-2013, and GNU GPL'd, by Julian Seward et al.\n ==18343== Using Valgrind-3.10.1 and LibVEX; rerun with -h for copyright info\n ==18343== Command: /home/travis/.local/lib/python2.7/site-packages/ray-0.1.2-py2.7-linux-x86_64.egg/ray/plasma/../core/src/plasma/plasma_manager -s /tmp/plasma_store52887138 -m /tmp/plasma_manager38983391 -h 127.0.0.1 -p 30906 -r 127.0.0.1:37342\n ==18343== \n ==18344== Memcheck, a memory error detector\n ==18344== Copyright (C) 2002-2013, and GNU GPL'd, by Julian Seward et al.\n ==18344== Using Valgrind-3.10.1 and LibVEX; rerun with -h for copyright info\n ==18344== Command: /home/travis/.local/lib/python2.7/site-packages/ray-0.1.2-py2.7-linux-x86_64.egg/ray/plasma/../core/src/plasma/plasma_manager -s /tmp/plasma_store39614874 -m /tmp/plasma_manager39307211 -h 127.0.0.1 -p 48658 -r 127.0.0.1:37342\n ==18344== \n Connection to socket failed for pathname /tmp/plasma_manager38983391\n [ERROR] (/home/travis/build/ray-project/ray/src/common/io.cc:47: errno: Address already in use) Bind failed for port 48658\n ==18344== \n ==18344== HEAP SUMMARY:\n ==18344==     in use at exit: 0 bytes in 0 blocks\n ==18344==   total heap usage: 1 allocs, 1 frees, 64 bytes allocated\n ==18344== \n ==18344== All heap blocks were freed -- no leaks are possible\n ==18344== \n ==18344== For counts of detected and suppressed errors, rerun with: -v\n ==18344== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)\n Connection to socket failed for pathname /tmp/plasma_manager39307211\n Could not connect to socket /tmp/plasma_manager39307211\n Disconnecting client on fd 52Disconnecting client on fd \n 52\n [INFO] (/home/travis/build/ray-project/ray/src/plasma/plasma_manager.cc:1592) Disconnecting client on fd 60\n \n travis_time:end:055440ed:start=1501554586399553853,finish=1501554881389288441,duration=294989734588\n \ufffd[0K\n \ufffd[31;1mThe command \"python ./python/ray/plasma/test/test.py valgrind\" exited with 1.\ufffd[0m\n </denchmark-code>\n \n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "robertnishihara", "commentT": "2017-09-06T03:59:50Z", "comment_text": "\n \t\tShould be fixed by <denchmark-link:https://github.com/ray-project/ray/pull/934>#934</denchmark-link>\n .\n \t\t"}}}, "commit": {"commit_id": "853969225b81ace054c38a078cba8ede69ba9e77", "commit_author": "Robert Nishihara", "commitT": "2017-09-05 20:58:12-07:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "python\\ray\\plasma\\plasma.py", "file_new_name": "python\\ray\\plasma\\plasma.py", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "139,140,141,142", "deleted_lines": "139"}}}}}}