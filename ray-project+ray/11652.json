{"BR": {"BR_id": "11652", "BR_author": "richardliaw", "BRopenT": "2020-10-27T17:30:44Z", "BRcloseT": "2020-10-27T22:24:09Z", "BR_text": {"BRsummary": "[k8s] command runner error handling", "BRdescription": "\n <denchmark-h:h3>What is the problem?</denchmark-h>\n \n <denchmark-code>Traceback (most recent call last):\n   File \"XXX/lib/python3.7/site-packages/ray/autoscaler/command_runner.py\", line 248, in run\n     self.process_runner.check_call(final_cmd, shell=True)\n   File \"/Users/mkoh/.pyenv/versions/3.7.7/lib/python3.7/subprocess.py\", line 363, in check_call\n     raise CalledProcessError(retcode, cmd)\n subprocess.CalledProcessError: Command 'kubectl -n nlp exec -it ray-head-22r7w -- bash --login -c -i 'true && source ~/.bashrc && export OMP_NUM_THREADS=1 PYTHONWARNINGS=ignore && (tmux kill-session -t flambe)'' returned non-zero exit status 1.\n \n During handling of the above exception, another exception occurred:\n \n Traceback (most recent call last):\n   File \"/Users/mkoh/projects/flambe-internal/flambe/runner/run.py\", line 86, in main\n     save_to_db=args.save,\n   File \"/Users/mkoh/projects/flambe-internal/flambe/workflow/workflow.py\", line 124, in run_remote_experiment\n     save_to_db=save_to_db,\n   File \"/Users/mkoh/projects/flambe-internal/flambe/cluster/ray/ray_util/ray_cluster.py\", line 263, in run\n     self.kill(\"flambe\")\n   File \"/Users/mkoh/projects/flambe-internal/flambe/cluster/ray/ray_util/ray_cluster.py\", line 163, in kill\n     self.exec_cluster(cmd=cmd)\n   File \"/Users/mkoh/projects/flambe-internal/flambe/cluster/ray/ray_util/ray_cluster.py\", line 60, in exec_cluster\n     with_output=with_output,\n   File \"XXX/lib/python3.7/site-packages/ray/autoscaler/commands.py\", line 868, in exec_cluster\n     shutdown_after_run=shutdown_after_run)\n   File \"XXX/lib/python3.7/site-packages/ray/autoscaler/commands.py\", line 919, in _exec\n     shutdown_after_run=shutdown_after_run)\n   File \"XXX/lib/python3.7/site-packages/ray/autoscaler/command_runner.py\", line 252, in run\n     [quote(final_cmd[-1])])\n TypeError: can only concatenate str (not \"list\") to str\n </denchmark-code>\n \n There is a typo? Basically final_cmd can't be indexed properly?\n \t"}, "comments": {}}, "commit": {"commit_id": "293483ed0bf35751cb3103294b134808caa0103d", "commit_author": "Richard Liaw", "commitT": "2020-10-27 15:24:07-07:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "python\\ray\\autoscaler\\_private\\command_runner.py", "file_new_name": "python\\ray\\autoscaler\\_private\\command_runner.py", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "403,409,413", "deleted_lines": "403,409,413"}}}}}}