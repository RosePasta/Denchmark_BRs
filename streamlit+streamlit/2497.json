{"BR": {"BR_id": "2497", "BR_author": "nthmost", "BRopenT": "2020-12-21T17:53:02Z", "BRcloseT": "2020-12-22T22:16:25Z", "BR_text": {"BRsummary": "Possible memory leak: passing int(None) to st.slider step value will crash streamlit", "BRdescription": "\n <denchmark-h:h1>Summary</denchmark-h>\n \n Cells in the forum writes:\n \n Can anybody else replicate this error I\u2019m seeing?  Streamlit version 0.73.0 and 0.72.0\n \n <denchmark-code>input_step = st.number_input(\"Step\")\n my_range = st.slider(\"Range\", 20, 120, step=int(input_step))\n </denchmark-code>\n \n The preceeding code results in my chrome returning an Out of Memory error code.\n <denchmark-code>Out of Memory\n 743\u00d7280 4.83 KB\n </denchmark-code>\n \n No console error is logged. However, if I change the st.number_input to provide a default value for the input_step, like so:\n <denchmark-code>input_step = st.number_input(\"Step\", value=5)\n my_range = st.slider(\"Range\", 20, 120, step=int(input_step))\n </denchmark-code>\n \n This code produces the desired result. Digging into the slider.py file, it seems like st.slider should be able to handle a None value with the following code, line 192:\n <denchmark-code>step = DEFAULTS[data_type][\"step\"]\n </denchmark-code>\n \n Doing a little more digging, I found that\n <denchmark-code>input_step = int(st.number_input(\"Step\"))\n my_range = st.slider(\"Range\", 20, 120, step=input_step)\n </denchmark-code>\n \n will also lead to a crash but only in the st.slider line. input_step = int(st.number_input(\"Step\")) alone isn\u2019t enough to crash streamlit, but passing the value into a subsequent widget is. So it seems that the mistake might be mine: that I can\u2019t pass in int(None) as a step value to the st.slider, which makes sense as it\u2019s a type error. Perhaps catching this as a TypeError would be a good thing to add?\n Title of this post has been changed accordingly (from Possible memory leak: passing input of st.number_input without a default value to a subsequent st.slider will crash streamlit)\n (also, is there a forum tag for bugs? I couldn\u2019t find one in the dropdown menu here)\n <denchmark-h:h1>Steps to reproduce</denchmark-h>\n \n Code snippet:\n <denchmark-code>input_step = st.number_input(\"Step\")\n my_range = st.slider(\"Range\", 20, 120, step=int(input_step))\n </denchmark-code>\n \n <denchmark-h:h2>Expected behavior:</denchmark-h>\n \n st.slider displays as normal\n <denchmark-h:h2>Actual behavior:</denchmark-h>\n \n Streamlit crashes!\n <denchmark-h:h2>Is this a regression?</denchmark-h>\n \n probably not\n <denchmark-h:h1>Debug info</denchmark-h>\n \n \n Streamlit version: 0.72 and 0.73\n Python version: (get it with $ python --version)\n Using Conda? PipEnv? PyEnv? Pex?\n OS version:\n Browser version:\n \n <denchmark-h:h1>Additional information</denchmark-h>\n \n Original forum discussion: <denchmark-link:https://discuss.streamlit.io/t/possible-memory-leak-passing-int-none-to-st-slider-step-value-will-crash-streamlit/8171>https://discuss.streamlit.io/t/possible-memory-leak-passing-int-none-to-st-slider-step-value-will-crash-streamlit/8171</denchmark-link>\n \n \t"}, "comments": {}}, "commit": {"commit_id": "fa554c73dc15f972b41c11a2ba5746253ef282ba", "commit_author": "bh-streamlit", "commitT": "2020-12-22 14:16:24-08:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "lib\\streamlit\\elements\\slider.py", "file_new_name": "lib\\streamlit\\elements\\slider.py", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "221,222,223,224,225", "deleted_lines": null}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "lib\\tests\\streamlit\\slider_test.py", "file_new_name": "lib\\tests\\streamlit\\slider_test.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "180,181,182,183,184,185", "deleted_lines": null, "method_info": {"method_name": "test_step_zero", "method_params": "self", "method_startline": "180", "method_endline": "185"}}}}}}}