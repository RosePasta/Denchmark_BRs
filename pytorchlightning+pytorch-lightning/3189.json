{"BR": {"BR_id": "3189", "BR_author": "dedeswim", "BRopenT": "2020-08-26T08:25:32Z", "BRcloseT": "2020-10-07T21:55:25Z", "BR_text": {"BRsummary": "Broken [Source] links in docs", "BRdescription": "\n <denchmark-h:h2>\ud83d\udcda Documentation</denchmark-h>\n \n Hello, I was browsing the docs, and out of curiosity, I wanted to check the source for , and so I clicked on the [Source] link of the  method. The link, however, sends to <denchmark-link:https://github.com/PyTorchLightning/PyTorch-Lightning/blob/pytorch_lightning/core/lightning/LightningModule.py>https://github.com/PyTorchLightning/PyTorch-Lightning/blob/pytorch_lightning/core/lightning/LightningModule.py</denchmark-link>\n , which is not right, as the repo name is \"pytorch-lightning\".\n I am not familiar with Sphinx, but I checked the docs and the conf file, and I think that the reason can be found here:\n \n \n \n pytorch-lightning/docs/source/conf.py\n \n \n         Lines 59 to 71\n       in\n       ee4eae8\n \n \n \n \n \n \n  project = 'PyTorch-Lightning' \n \n \n \n  copyright = pytorch_lightning.__copyright__ \n \n \n \n  author = pytorch_lightning.__author__ \n \n \n \n  \n \n \n \n  # The short X.Y version \n \n \n \n  version = pytorch_lightning.__version__ \n \n \n \n  # The full version, including alpha/beta/rc tags \n \n \n \n  release = pytorch_lightning.__version__ \n \n \n \n  \n \n \n \n  # Options for the linkcode extension \n \n \n \n  # ---------------------------------- \n \n \n \n  github_user = 'PyTorchLightning' \n \n \n \n  github_repo = project \n \n \n \n \n \n Since github-repo is set to project, which is, indeed, PyTorch-Lightning, as in the broken link.\n If someone more familiar with Sphinx can confirm this, I'd be glad to submit a PR to fix this.\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "dedeswim", "commentT": "2020-08-26T08:26:10Z", "comment_text": "\n \t\tHi! thanks for your contribution!, great first issue!\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "dedeswim", "commentT": "2020-08-26T16:12:02Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/awaelchli>@awaelchli</denchmark-link>\n  mind have look? \n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "dedeswim", "commentT": "2020-08-26T16:20:24Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/dedeswim>@dedeswim</denchmark-link>\n  so the reason you pointed out is not exactly why a wrong link is being generated for LightningModule.\n <denchmark-link:https://github.com/PyTorchLightning/pytorch-lightning/blob/master/docs/source/conf.py#L347>https://github.com/PyTorchLightning/pytorch-lightning/blob/master/docs/source/conf.py#L347</denchmark-link>\n \n The function linkcode_resolve generates the 'source' links in the doc and that is giving out the wrong link for LightningModule. If you see the link generated for say TrainResult class, it links to the master branch and the exact line number for the methods, which is not the case here.\n \t\t"}, "comments_3": {"comment_id": 4, "comment_author": "dedeswim", "commentT": "2020-08-26T16:22:34Z", "comment_text": "\n \t\tbtw, need to keep compatibility with tagged releases as well as with master...\n \t\t"}, "comments_4": {"comment_id": 5, "comment_author": "dedeswim", "commentT": "2020-08-26T19:55:24Z", "comment_text": "\n \t\tHi, thank you <denchmark-link:https://github.com/ananyahjha93>@ananyahjha93</denchmark-link>\n  for the explanation!\n I indeed realized that the link should go to \"pytorch_lightning/core/lightning.py\", instead of \"pytorch_lightning/core/lightning/LightningModule.py\".\n Interestingly, the 0.8.5 version of the docs redirects to the right link (the one above), whereas the \"0.9.0\", \"latest\" and \"stable\" versions (which are the same version, right?) don't work.\n \t\t"}, "comments_5": {"comment_id": 6, "comment_author": "dedeswim", "commentT": "2020-08-27T07:01:42Z", "comment_text": "\n \t\tok, then we may have the wrong path in docs, is it only this case or all docs have wrong links?\n \t\t"}, "comments_6": {"comment_id": 7, "comment_author": "dedeswim", "commentT": "2020-08-27T07:07:09Z", "comment_text": "\n \t\tI tried with all the other classes under the \"Python API\" section of the bar on the right in the docs and it looks like this is the only one broken\n \t\t"}, "comments_7": {"comment_id": 8, "comment_author": "dedeswim", "commentT": "2020-08-27T07:23:33Z", "comment_text": "\n \t\tok, then it is nothing with linkcode_resolve but just wrong link in docs, mind send a PR fix\n \n \n \n pytorch-lightning/pytorch_lightning/core/lightning.py\n \n \n          Line 136\n       in\n       4d98419\n \n \n \n \n \n \n  def forward(self, *args, **kwargs): \n \n \n \n \n \n \t\t"}, "comments_8": {"comment_id": 9, "comment_author": "dedeswim", "commentT": "2020-08-27T08:04:38Z", "comment_text": "\n \t\tI'd be happy to, but I am not sure about how to fix this. Where is the path to the source defined? Isn't it generated by linkcode_resolve?\n \t\t"}, "comments_9": {"comment_id": 10, "comment_author": "dedeswim", "commentT": "2020-08-27T15:27:44Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/Borda>@Borda</denchmark-link>\n  others are correct, LightningModule is the only one that seems broken.\n \t\t"}, "comments_10": {"comment_id": 11, "comment_author": "dedeswim", "commentT": "2020-09-01T18:50:12Z", "comment_text": "\n \t\tit looks like this is because in the .rst docs we refer to the methods with autofunction instead of automethod. changing to automethod solves the link issue, but breaks formatting of docs, need to figure out how to  properly use it.\n \t\t"}, "comments_11": {"comment_id": 12, "comment_author": "dedeswim", "commentT": "2020-09-14T16:39:40Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/Borda>@Borda</denchmark-link>\n  or <denchmark-link:https://github.com/awaelchli>@awaelchli</denchmark-link>\n  is there a specific reason using  extension?\n if not, shall we use this extension <denchmark-link:https://www.sphinx-doc.org/en/master/usage/extensions/viewcode.html>https://www.sphinx-doc.org/en/master/usage/extensions/viewcode.html</denchmark-link>\n ?\n this creates  folder for source code and link to that folder. PyTorch is using this also.\n It also solves this issue using ,  won't work just like <denchmark-link:https://github.com/awaelchli>@awaelchli</denchmark-link>\n  comment.\n I discovered that PyTorch docs doesn't refer to source code for , so we need to add some css to the forked theme.\n Here's the tried output:\n It doesn't show self which is pretty normal I think, just like methods of other classes.\n <denchmark-link:https://user-images.githubusercontent.com/32727188/93113155-d7af8b80-f6de-11ea-9840-7026948f0250.png></denchmark-link>\n \n \t\t"}, "comments_12": {"comment_id": 13, "comment_author": "dedeswim", "commentT": "2020-09-14T16:54:57Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/ydcjeff>@ydcjeff</denchmark-link>\n  nice, could you make a draft PR so we can try it out?\n \t\t"}, "comments_13": {"comment_id": 14, "comment_author": "dedeswim", "commentT": "2020-09-14T16:58:04Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/awaelchli>@awaelchli</denchmark-link>\n  with  extension?\n sure, I can\n \t\t"}, "comments_14": {"comment_id": 15, "comment_author": "dedeswim", "commentT": "2020-09-14T17:05:36Z", "comment_text": "\n \t\tso you say it's a two step fix.\n \n replace linkcode with viewcode, which solves the problem with linked source code, but we lose methods source code\n add the custom css to the theme so we have methods properly linked\n \n if it can consistently link all modules, classes, methods and functions, I think this is what we want.\n \t\t"}, "comments_15": {"comment_id": 16, "comment_author": "dedeswim", "commentT": "2020-09-14T17:09:43Z", "comment_text": "\n \t\tYes, pytorch sphinx theme doesn't include css for directly linking methods.\n So, we need to add it. I think viewcode works with all modules, classes, methods and functions.\n But i will try with all to make sure it works and i will draft a PR\n \t\t"}, "comments_16": {"comment_id": 17, "comment_author": "dedeswim", "commentT": "2020-09-15T22:38:50Z", "comment_text": "\n \t\tjust testing and sure if it is a better way as before it linked to GitHub source and you simply create a perm link...\n \t\t"}}}, "commit": {"commit_id": "9be26d0c1b3aa2923475cd83098850d1e438a24e", "commit_author": "Jeff Yang", "commitT": "2020-10-07 23:55:24+02:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "docs\\source\\_templates\\theme_variables.jinja", "file_new_name": "docs\\source\\_templates\\theme_variables.jinja", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "2,3,4,5", "deleted_lines": "2,3,4,5"}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "docs\\source\\conf.py", "file_new_name": "docs\\source\\conf.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": null, "deleted_lines": "329,330,331,332,333,334,335,336,337,338,339,340,341,342,343,344,345,346,347,348,349,350,351,352,353,354,355,356,357,358,359,360,361,362,363", "method_info": {"method_name": "linkcode_resolve", "method_params": "domain,info", "method_startline": "329", "method_endline": "363"}}, "hunk_1": {"Ismethod": 1, "added_lines": null, "deleted_lines": "330,331,332,333,334,335,336,337,338,339,340,341,342,343,344,345,346,347", "method_info": {"method_name": "linkcode_resolve.find_source", "method_params": "", "method_startline": "330", "method_endline": "347"}}}}, "file_2": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "docs\\source\\lightning_module.rst", "file_new_name": "docs\\source\\lightning_module.rst", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "211,658,664,669,680,686,692,703,709,715,723,735,741,771,777,783,789,795,1031,1037,1047,1053,1067,1073,1079,1085,1097,1103,1108,1114,1120,1130,1136,1142,1148,1154,1160,1166,1172,1178,1184,1190,1196,1202,1208,1214,1220,1226,1232,1238", "deleted_lines": "211,658,664,669,680,686,692,703,709,715,723,735,741,771,777,783,789,795,1031,1037,1047,1053,1067,1073,1079,1085,1097,1103,1108,1114,1120,1130,1136,1142,1148,1154,1160,1166,1172,1178,1184,1190,1196,1202,1208,1214,1220,1226,1232,1238"}}}}}}