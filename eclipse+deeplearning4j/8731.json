{"BR": {"BR_id": "8731", "BR_author": "treo", "BRopenT": "2020-02-24T11:17:09Z", "BRcloseT": "2020-03-02T05:15:50Z", "BR_text": {"BRsummary": "ImagePreProcessingScaler can not be configured to preprocess labels", "BRdescription": "\n <denchmark-h:h4>Issue Description</denchmark-h>\n \n When using ImagePreProcessingScaler for segmentation tasks, both features and labels have to be processed.\n <denchmark-link:https://github.com/eclipse/deeplearning4j/issues/8135>#8135</denchmark-link>\n  has added support for  and , but setting  is a no-op and  still processes only the features.\n When the scaler is used as a normalizer for a DataSetIterator this results in labels not being processed correctly when used for segmentation.\n <denchmark-h:h4>Version Information</denchmark-h>\n \n \n Deeplearning4j version: 1.0.0-beta6\n \n \t"}, "comments": {}}, "commit": {"commit_id": "483c3d7b8cb69d1d7e436b450e2c7b4218f5f2cb", "commit_author": "Alex Black", "commitT": "2020-03-02 16:15:49+11:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "deeplearning4j\\deeplearning4j-core\\src\\test\\java\\org\\deeplearning4j\\nn\\layers\\feedforward\\embedding\\EmbeddingLayerTest.java", "file_new_name": "deeplearning4j\\deeplearning4j-core\\src\\test\\java\\org\\deeplearning4j\\nn\\layers\\feedforward\\embedding\\EmbeddingLayerTest.java", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "730,731,732,733,734,735,736,737,738,739,740,741,742,743,744,745,746,747,748,749,750,751,752,753,754,755,756,757,758,759,760,761,762,763,764,765,766,767,768,769,770,771,772,773,774,775,776,777,778,779,780,781,782,783,784,785,786,787,788,789,790,791,792", "deleted_lines": null, "method_info": {"method_name": "EmbeddingLayerTest::testEmbeddingWeightInit", "method_params": "", "method_startline": "730", "method_endline": "792"}}, "hunk_1": {"Ismethod": 1, "added_lines": "794,795,796,797,798", "deleted_lines": null, "method_info": {"method_name": "EmbeddingLayerTest::relErr", "method_params": "d1,d2", "method_startline": "794", "method_endline": "798"}}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "deeplearning4j\\deeplearning4j-core\\src\\test\\java\\org\\deeplearning4j\\nn\\layers\\samediff\\SameDiffCustomLayerTests.java", "file_new_name": "deeplearning4j\\deeplearning4j-core\\src\\test\\java\\org\\deeplearning4j\\nn\\layers\\samediff\\SameDiffCustomLayerTests.java", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "141,142,143", "deleted_lines": null, "method_info": {"method_name": "SameDiffCustomLayerTests::ValidatingSameDiffVertex::clone", "method_params": "", "method_startline": "141", "method_endline": "143"}}}}, "file_2": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "deeplearning4j\\deeplearning4j-core\\src\\test\\java\\org\\deeplearning4j\\nn\\layers\\samediff\\testlayers\\SameDiffDenseVertex.java", "file_new_name": "deeplearning4j\\deeplearning4j-core\\src\\test\\java\\org\\deeplearning4j\\nn\\layers\\samediff\\testlayers\\SameDiffDenseVertex.java", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "80,81,82", "deleted_lines": null, "method_info": {"method_name": "SameDiffDenseVertex::clone", "method_params": "", "method_startline": "80", "method_endline": "82"}}}}, "file_3": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "deeplearning4j\\deeplearning4j-core\\src\\test\\java\\org\\deeplearning4j\\nn\\layers\\samediff\\testlayers\\SameDiffSimpleLambdaVertex.java", "file_new_name": "deeplearning4j\\deeplearning4j-core\\src\\test\\java\\org\\deeplearning4j\\nn\\layers\\samediff\\testlayers\\SameDiffSimpleLambdaVertex.java", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "19", "deleted_lines": null}}}, "file_4": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "deeplearning4j\\deeplearning4j-core\\src\\test\\java\\org\\deeplearning4j\\nn\\transferlearning\\TransferLearningCompGraphTest.java", "file_new_name": "deeplearning4j\\deeplearning4j-core\\src\\test\\java\\org\\deeplearning4j\\nn\\transferlearning\\TransferLearningCompGraphTest.java", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "624,625,626,627,628,629,630,631,632,633,634,635,636,637,638,639,640,641,642,643,644,645,646,647,648,649,650,651,652,653,654,655,656,657,658,659,660,661,662,663,664,665,666,667", "deleted_lines": null, "method_info": {"method_name": "TransferLearningCompGraphTest::testTransferLearningSameDiffLayersGraphVertex", "method_params": "", "method_startline": "624", "method_endline": "667"}}, "hunk_1": {"Ismethod": 1, "added_lines": "578,579,580,581,582,583,584,585,586,587,588,589,590,591,592,593,594,595,596,597,598,599,600,601,602,603,604,605,606,607,608,609,610,611,612,613,614,615,616,617,618,619,620,621", "deleted_lines": null, "method_info": {"method_name": "TransferLearningCompGraphTest::testTransferLearningSameDiffLayersGraph", "method_params": "", "method_startline": "578", "method_endline": "621"}}}}, "file_5": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "deeplearning4j\\deeplearning4j-core\\src\\test\\java\\org\\deeplearning4j\\nn\\transferlearning\\TransferLearningMLNTest.java", "file_new_name": "deeplearning4j\\deeplearning4j-core\\src\\test\\java\\org\\deeplearning4j\\nn\\transferlearning\\TransferLearningMLNTest.java", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "698,699,700,701,702,703,704,705,706,707,708,709,710,711,712,713,714,715,716,717,718,719,720,721,722,723,724,725,726,727,728,729,730,731,732,733,734,735,736,737,738,739,740,741", "deleted_lines": null, "method_info": {"method_name": "TransferLearningMLNTest::testTransferLearningSameDiffLayers", "method_params": "", "method_startline": "698", "method_endline": "741"}}}}, "file_6": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "deeplearning4j\\deeplearning4j-nn\\src\\main\\java\\org\\deeplearning4j\\nn\\conf\\ComputationGraphConfiguration.java", "file_new_name": "deeplearning4j\\deeplearning4j-nn\\src\\main\\java\\org\\deeplearning4j\\nn\\conf\\ComputationGraphConfiguration.java", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "430,431", "deleted_lines": "430", "method_info": {"method_name": "ComputationGraphConfiguration::validate", "method_params": "allowDisconnected,allowNoOutput", "method_startline": "368", "method_endline": "437"}}}}, "file_7": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "deeplearning4j\\deeplearning4j-nn\\src\\main\\java\\org\\deeplearning4j\\nn\\conf\\graph\\AttentionVertex.java", "file_new_name": "deeplearning4j\\deeplearning4j-nn\\src\\main\\java\\org\\deeplearning4j\\nn\\conf\\graph\\AttentionVertex.java", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "76,77,78,79,80,81,82,83,84,85,86,87", "deleted_lines": null, "method_info": {"method_name": "AttentionVertex::clone", "method_params": "", "method_startline": "76", "method_endline": "87"}}}}, "file_8": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "deeplearning4j\\deeplearning4j-nn\\src\\main\\java\\org\\deeplearning4j\\nn\\conf\\layers\\EmbeddingLayer.java", "file_new_name": "deeplearning4j\\deeplearning4j-nn\\src\\main\\java\\org\\deeplearning4j\\nn\\conf\\layers\\EmbeddingLayer.java", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "83", "deleted_lines": "82", "method_info": {"method_name": "EmbeddingLayer::initializer", "method_params": "", "method_startline": "82", "method_endline": "84"}}}}, "file_9": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "deeplearning4j\\deeplearning4j-nn\\src\\main\\java\\org\\deeplearning4j\\nn\\conf\\layers\\EmbeddingSequenceLayer.java", "file_new_name": "deeplearning4j\\deeplearning4j-nn\\src\\main\\java\\org\\deeplearning4j\\nn\\conf\\layers\\EmbeddingSequenceLayer.java", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "95", "deleted_lines": "95", "method_info": {"method_name": "EmbeddingSequenceLayer::initializer", "method_params": "", "method_startline": "94", "method_endline": "96"}}}}, "file_10": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "deeplearning4j\\deeplearning4j-nn\\src\\main\\java\\org\\deeplearning4j\\nn\\conf\\layers\\samediff\\SameDiffLambdaVertex.java", "file_new_name": "deeplearning4j\\deeplearning4j-nn\\src\\main\\java\\org\\deeplearning4j\\nn\\conf\\layers\\samediff\\SameDiffLambdaVertex.java", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "81,82,83,84,85,86,87", "deleted_lines": null, "method_info": {"method_name": "SameDiffLambdaVertex::clone", "method_params": "", "method_startline": "81", "method_endline": "87"}}}}, "file_11": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "deeplearning4j\\deeplearning4j-nn\\src\\main\\java\\org\\deeplearning4j\\nn\\conf\\layers\\samediff\\SameDiffVertex.java", "file_new_name": "deeplearning4j\\deeplearning4j-nn\\src\\main\\java\\org\\deeplearning4j\\nn\\conf\\layers\\samediff\\SameDiffVertex.java", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": null, "deleted_lines": "103,104,105", "method_info": {"method_name": "SameDiffVertex::clone", "method_params": "", "method_startline": "103", "method_endline": "105"}}}}, "file_12": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "deeplearning4j\\deeplearning4j-nn\\src\\main\\java\\org\\deeplearning4j\\nn\\graph\\ComputationGraph.java", "file_new_name": "deeplearning4j\\deeplearning4j-nn\\src\\main\\java\\org\\deeplearning4j\\nn\\graph\\ComputationGraph.java", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "3397,3398", "deleted_lines": "3397", "method_info": {"method_name": "ComputationGraph::setParamTable", "method_params": "paramTable", "method_startline": "3396", "method_endline": "3415"}}}}, "file_13": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "deeplearning4j\\deeplearning4j-nn\\src\\main\\java\\org\\deeplearning4j\\nn\\layers\\samediff\\SameDiffLayer.java", "file_new_name": "deeplearning4j\\deeplearning4j-nn\\src\\main\\java\\org\\deeplearning4j\\nn\\layers\\samediff\\SameDiffLayer.java", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "240,241,242,243,244,245,246,247,248,249", "deleted_lines": "240,241,242", "method_info": {"method_name": "SameDiffLayer::setParams", "method_params": "params", "method_startline": "239", "method_endline": "250"}}}}, "file_14": {"file_change_type": "ADD", "file_Nmethod": 0, "file_old_name": "None", "file_new_name": "deeplearning4j\\deeplearning4j-nn\\src\\main\\java\\org\\deeplearning4j\\nn\\params\\EmbeddingLayerParamInitializer.java"}, "file_15": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "nd4j\\nd4j-backends\\nd4j-api-parent\\nd4j-api\\src\\main\\java\\org\\nd4j\\linalg\\dataset\\api\\preprocessor\\AbstractMultiDataSetNormalizer.java", "file_new_name": "nd4j\\nd4j-backends\\nd4j-api-parent\\nd4j-api\\src\\main\\java\\org\\nd4j\\linalg\\dataset\\api\\preprocessor\\AbstractMultiDataSetNormalizer.java", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": null, "deleted_lines": "82", "method_info": {"method_name": "AbstractMultiDataSetNormalizer<S::getFeatureStats", "method_params": "", "method_startline": "81", "method_endline": "84"}}, "hunk_1": {"Ismethod": 1, "added_lines": null, "deleted_lines": "91", "method_info": {"method_name": "AbstractMultiDataSetNormalizer<S::getLabelStats", "method_params": "", "method_startline": "90", "method_endline": "93"}}}}, "file_16": {"file_change_type": "MODIFY", "file_Nmethod": 4, "file_old_name": "nd4j\\nd4j-backends\\nd4j-api-parent\\nd4j-api\\src\\main\\java\\org\\nd4j\\linalg\\dataset\\api\\preprocessor\\ImagePreProcessingScaler.java", "file_new_name": "nd4j\\nd4j-backends\\nd4j-api-parent\\nd4j-api\\src\\main\\java\\org\\nd4j\\linalg\\dataset\\api\\preprocessor\\ImagePreProcessingScaler.java", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "146", "deleted_lines": null, "method_info": {"method_name": "ImagePreProcessingScaler::revert", "method_params": "toRevert", "method_startline": "144", "method_endline": "147"}}, "hunk_1": {"Ismethod": 1, "added_lines": "190", "deleted_lines": null, "method_info": {"method_name": "ImagePreProcessingScaler::isFitLabel", "method_params": "", "method_startline": "189", "method_endline": "191"}}, "hunk_2": {"Ismethod": 1, "added_lines": "98,99,100,101", "deleted_lines": "97", "method_info": {"method_name": "ImagePreProcessingScaler::preProcess", "method_params": "toPreProcess", "method_startline": "96", "method_endline": "102"}}, "hunk_3": {"Ismethod": 1, "added_lines": "185", "deleted_lines": "184", "method_info": {"method_name": "ImagePreProcessingScaler::fitLabel", "method_params": "fitLabels", "method_startline": "183", "method_endline": "186"}}}}, "file_17": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "nd4j\\nd4j-backends\\nd4j-tests\\src\\test\\java\\org\\nd4j\\linalg\\dataset\\ImagePreProcessortTest.java", "file_new_name": "nd4j\\nd4j-backends\\nd4j-tests\\src\\test\\java\\org\\nd4j\\linalg\\dataset\\ImagePreProcessortTest.java", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194", "deleted_lines": null, "method_info": {"method_name": "ImagePreProcessortTest::testSegmentation", "method_params": "", "method_startline": "162", "method_endline": "194"}}}}, "file_18": {"file_change_type": "MODIFY", "file_Nmethod": 5, "file_old_name": "nd4j\\nd4j-backends\\nd4j-tests\\src\\test\\java\\org\\nd4j\\linalg\\dataset\\NormalizerTests.java", "file_new_name": "nd4j\\nd4j-backends\\nd4j-tests\\src\\test\\java\\org\\nd4j\\linalg\\dataset\\NormalizerTests.java", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "272,273,274,275,276,277,278,279,280", "deleted_lines": null, "method_info": {"method_name": "NormalizerTests::testMultiNormalizer", "method_params": "n", "method_startline": "272", "method_endline": "280"}}, "hunk_1": {"Ismethod": 1, "added_lines": "191,192,193,194,195", "deleted_lines": "192,193,194,195,196", "method_info": {"method_name": "NormalizerTests::testMasking", "method_params": "", "method_startline": "105", "method_endline": "218"}}, "hunk_2": {"Ismethod": 1, "added_lines": "221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243", "deleted_lines": null, "method_info": {"method_name": "NormalizerTests::testNormalizerToStringHashCode", "method_params": "", "method_startline": "221", "method_endline": "243"}}, "hunk_3": {"Ismethod": 1, "added_lines": "245,246,247,248,249,250,251,252,253", "deleted_lines": null, "method_info": {"method_name": "NormalizerTests::testNormalizer", "method_params": "n", "method_startline": "245", "method_endline": "253"}}, "hunk_4": {"Ismethod": 1, "added_lines": "256,257,258,259,260,261,262,263,264,265,266,267,268,269,270", "deleted_lines": null, "method_info": {"method_name": "NormalizerTests::testMultiNormalizerToStringHashCode", "method_params": "", "method_startline": "256", "method_endline": "270"}}}}}}}