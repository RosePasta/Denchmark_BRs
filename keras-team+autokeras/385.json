{"BR": {"BR_id": "385", "BR_author": "boyuangong", "BRopenT": "2018-12-17T21:05:55Z", "BRcloseT": "2019-01-15T16:15:23Z", "BR_text": {"BRsummary": "DataTransformerMlp doesn't work for batch iteration", "BRdescription": "\n <denchmark-h:h3>Bug Description</denchmark-h>\n \n DataTransformerMlp doesn't work for batch iteration\n <denchmark-code>Using TensorFlow backend.\n Saving Directory: /tmp/autokeras_ASE3DJ\n \n Initializing search.\n Initialization finished.\n \n \n +----------------------------------------------+\n |               Training model 0               |\n +----------------------------------------------+\n Using TensorFlow backend.\n Epoch-1, Current Metric - 0:   0%|                                      | 0/469 [00:00<?, ? batch/s]Process SpawnProcess-1:\n Traceback (most recent call last):\n   File \"/home/boyuan/anaconda3/lib/python3.6/multiprocessing/process.py\", line 258, in _bootstrap\n     self.run()\n   File \"/home/boyuan/anaconda3/lib/python3.6/multiprocessing/process.py\", line 93, in run\n     self._target(*self._args, **self._kwargs)\n   File \"/home/boyuan/workspace/lab/autokeras/autokeras/search.py\", line 276, in train\n     verbose=verbose).train_model(**trainer_args)\n   File \"/home/boyuan/workspace/lab/autokeras/autokeras/nn/model_trainer.py\", line 126, in train_model\n     self._train()\n   File \"/home/boyuan/workspace/lab/autokeras/autokeras/nn/model_trainer.py\", line 157, in _train\n     for batch_idx, (inputs, targets) in enumerate(deepcopy(loader)):\n   File \"/home/boyuan/anaconda3/lib/python3.6/site-packages/torch/utils/data/dataloader.py\", line 314, in __next__\n     batch = self.collate_fn([self.dataset[i] for i in indices])\n   File \"/home/boyuan/anaconda3/lib/python3.6/site-packages/torch/utils/data/dataloader.py\", line 314, in <listcomp>\n     batch = self.collate_fn([self.dataset[i] for i in indices])\n   File \"/home/boyuan/workspace/lab/autokeras/autokeras/preprocessor.py\", line 302, in __getitem__\n     return self.compose(feature), self.target[index]\n   File \"/home/boyuan/anaconda3/lib/python3.6/site-packages/torchvision/transforms/transforms.py\", line 49, in __call__\n     img = t(img)\n   File \"/home/boyuan/anaconda3/lib/python3.6/site-packages/torchvision/transforms/transforms.py\", line 143, in __call__\n     return F.normalize(tensor, self.mean, self.std)\n   File \"/home/boyuan/anaconda3/lib/python3.6/site-packages/torchvision/transforms/functional.py\", line 165, in normalize\n     raise TypeError('tensor is not a torch image.')\n TypeError: tensor is not a torch image.\n \n </denchmark-code>\n \n <denchmark-h:h3>Reproducing Steps</denchmark-h>\n \n Steps to reproduce the behavior:\n Use\n for batch_idx, (inputs, targets) in enumerate(deepcopy(loader)):\n and the loader is DataTransformerMlp.transform_train\n <denchmark-h:h3>Setup Details</denchmark-h>\n \n \n same as the requirements.txt\n Linux\n GPU\n \n \t"}, "comments": {}}, "commit": {"commit_id": "ac35486fa10c29c24afdfd272b4b950900c21a46", "commit_author": "Yashwanth Reddy", "commitT": "2019-01-15 10:15:22-06:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 3, "file_old_name": "autokeras\\preprocessor.py", "file_new_name": "autokeras\\preprocessor.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "270,271,272", "deleted_lines": "269,272", "method_info": {"method_name": "transform_train", "method_params": "self,data,targets,batch_size", "method_startline": "269", "method_endline": "278"}}, "hunk_1": {"Ismethod": 1, "added_lines": null, "deleted_lines": "284", "method_info": {"method_name": "_transform", "method_params": "self,compose_list,data,targets", "method_startline": "283", "method_endline": "288"}}, "hunk_2": {"Ismethod": 1, "added_lines": "266,267", "deleted_lines": "266,267", "method_info": {"method_name": "__init__", "method_params": "self,data", "method_startline": "264", "method_endline": "267"}}}}}}}