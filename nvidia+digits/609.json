{"BR": {"BR_id": "609", "BR_author": "gheinrich", "BRopenT": "2016-02-29T15:01:24Z", "BRcloseT": "2016-03-04T17:05:01Z", "BR_text": {"BRsummary": "Caffe output ordering", "BRdescription": "\n Issue reported on <denchmark-link:https://github.com/NVIDIA/DIGITS/pull/603#issue-136531137>#603 (comment)</denchmark-link>\n :\n \n Output ordering - the wrong network output is displayed (e.g. for GoogLeNet)\n \n and <denchmark-link:https://github.com/NVIDIA/DIGITS/pull/603#issuecomment-189362864>#603 (comment)</denchmark-link>\n :\n \n even before inference jobs were introduced Googlenet was working out of \"luck\"... on 5efec65 (just before #573) if you change the name of loss1/classifier into z1 (any string greater than \"prob\" should do) then you get wrong results like:\n \n \n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "gheinrich", "commentT": "2016-02-29T15:25:31Z", "comment_text": "\n \t\tWe can't rely on the order of outputs in <denchmark-link:https://github.com/NVIDIA/caffe/blob/master/python/caffe/pycaffe.py#L62>_Net_forward</denchmark-link>\n  because a standard dictionary is used to return results. Similarly,  sorts results by name, not by creation order. In my understanding, this comes from these <denchmark-link:https://github.com/NVIDIA/caffe/blob/master/src/caffe/net.cpp#L271-L277>lines</denchmark-link>\n  and the fact that a  is used, which sorts items by name.\n The only fields which seem to be sorted in prototxt order and accessible using the Python bindings are _blobs, _blob_names, _layer_names.\n \t\t"}}}, "commit": {"commit_id": "0052c5c00e56b4d42d5759df9abcba0d643686f2", "commit_author": "Greg Heinrich", "commitT": "2016-02-29 17:40:35+01:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "digits\\inference\\tasks\\inference.py", "file_new_name": "digits\\inference\\tasks\\inference.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "111,123,126,127,128,129,130,131", "deleted_lines": "110,124", "method_info": {"method_name": "after_run", "method_params": "self", "method_startline": "105", "method_endline": "167"}}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "digits\\model\\tasks\\caffe_train.py", "file_new_name": "digits\\model\\tasks\\caffe_train.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "1075,1101,1102,1103,1104,1105,1106,1107", "deleted_lines": "1074,1100", "method_info": {"method_name": "infer_one_image", "method_params": "self,image,snapshot_epoch,layers,gpu", "method_startline": "1071", "method_endline": "1110"}}, "hunk_1": {"Ismethod": 1, "added_lines": "1234,1268,1269,1270,1271,1272,1273,1274,1276,1278", "deleted_lines": "1262,1264", "method_info": {"method_name": "infer_many_images", "method_params": "self,images,snapshot_epoch,gpu", "method_startline": "1232", "method_endline": "1282"}}}}, "file_2": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "tools\\inference.py", "file_new_name": "tools\\inference.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "122,123,125,126,127,128", "deleted_lines": "122,124", "method_info": {"method_name": "infer", "method_params": "input_list,output_dir,jobs_dir,model_id,epoch,batch_size,layers,gpu", "method_startline": "33", "method_endline": "149"}}}}}}}