{"BR": {"BR_id": "9976", "BR_author": "wkcn", "BRopenT": "2018-03-03T02:34:43Z", "BRcloseT": "2018-03-06T19:13:16Z", "BR_text": {"BRsummary": "The assignment problem about NDArray", "BRdescription": "\n <denchmark-h:h2>Description</denchmark-h>\n \n If a is a multi-dims array, it is not available to use a[0] = a[1] to assign a row.\n However, it's available to use a[0, :] = a[1] or a[0]=a[1].asnumpy()\n <denchmark-h:h2>Environment info (Required)</denchmark-h>\n \n The latest pre-built MXNet has the same problem.\n <denchmark-code>----------Python Info----------\n Version      : 3.6.4\n Compiler     : GCC 7.2.1 20171224\n Build        : ('default', 'Jan  5 2018 02:35:40')\n Arch         : ('64bit', '')\n ------------Pip Info-----------\n Version      : 9.0.1\n Directory    : /usr/lib/python3.6/site-packages/pip\n ----------MXNet Info-----------\n Version      : 1.2.0\n Directory    : /home/wkcn/proj/mxnet/python/mxnet\n Hashtag not found. Not installed from pre-built package.\n ----------System Info----------\n Platform     : Linux-4.15.5-1-ARCH-x86_64-with-arch\n system       : Linux\n node         : MiraiM\n release      : 4.15.5-1-ARCH\n version      : #1 SMP PREEMPT Thu Feb 22 22:15:20 UTC 2018\n </denchmark-code>\n \n Package used (Python/R/Scala/Julia):\n Python\n <denchmark-h:h2>Build info (Required if built from source)</denchmark-h>\n \n Compiler (gcc/clang/mingw/visual studio): gcc 7.2.1\n MXNet commit hash:\n <denchmark-link:https://github.com/apache/incubator-mxnet/commit/17a9c6ad440139d3f87924a8e989d4da252504be>17a9c6a</denchmark-link>\n \n Build config:\n make -j4 USE_OPENCV=1 USE_BLAS=openblas \n <denchmark-h:h2>Minimum reproducible example</denchmark-h>\n \n >>> import mxnet as mx\n >>> import numpy as np\n \n >>> a = mx.nd.array(np.arange(12).reshape((3,4)))\n >>> a\n \n [[ 0.  1.  2.  3.]\n  [ 4.  5.  6.  7.]\n  [ 8.  9. 10. 11.]]\n <NDArray 3x4 @cpu(0)>\n >>> a[0]=a[1]     #   HERE\n >>> a\n \n [[ 0.  1.  2.  3.]\n  [ 4.  5.  6.  7.]\n  [ 8.  9. 10. 11.]]\n <NDArray 3x4 @cpu(0)>\n >>> a[0]=[10,11,12,13]\n >>> a\n \n [[10. 11. 12. 13.]\n  [ 4.  5.  6.  7.]\n  [ 8.  9. 10. 11.]]\n <NDArray 3x4 @cpu(0)>\n >>> a[0]=a[1].asnumpy()\n >>> a\n \n [[ 4.  5.  6.  7.]\n  [ 4.  5.  6.  7.]\n  [ 8.  9. 10. 11.]]\n <NDArray 3x4 @cpu(0)>\n >>> a[1,:]=a[2]\n >>> a\n \n [[ 4.  5.  6.  7.]\n  [ 8.  9. 10. 11.]\n  [ 8.  9. 10. 11.]]\n <NDArray 3x4 @cpu(0)>\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "wkcn", "commentT": "2018-03-03T07:12:24Z", "comment_text": "\n \t\tThis is a bug of  function.  and  share the same  and thus the copy is skipped.\n <denchmark-link:https://github.com/apache/incubator-mxnet/blob/master/src/ndarray/ndarray.cc#L1131>https://github.com/apache/incubator-mxnet/blob/master/src/ndarray/ndarray.cc#L1131</denchmark-link>\n \n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "wkcn", "commentT": "2018-03-03T07:40:33Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/reminisce>@reminisce</denchmark-link>\n  Thank you! I will try to fix it.\n \t\t"}}}, "commit": {"commit_id": "e2b1a563e3a46ec54420c887d3c36e04c11af311", "commit_author": "JackieWu", "commitT": "2018-03-06 11:13:15-08:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "include\\mxnet\\ndarray.h", "file_new_name": "include\\mxnet\\ndarray.h", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "329,330,331", "deleted_lines": null, "method_info": {"method_name": "mxnet::NDArray::byte_offset", "method_params": "", "method_startline": "329", "method_endline": "331"}}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "src\\ndarray\\ndarray.cc", "file_new_name": "src\\ndarray\\ndarray.cc", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "1131", "deleted_lines": "1131", "method_info": {"method_name": "mxnet::CopyFromTo", "method_params": "from,to,priority", "method_startline": "1130", "method_endline": "1218"}}}}, "file_2": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "tests\\python\\unittest\\test_ndarray.py", "file_new_name": "tests\\python\\unittest\\test_ndarray.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "1103,1104,1105,1106,1107,1108,1109,1110,1111,1112,1113,1114,1115,1116,1117,1118,1119,1120,1121,1122,1123,1124,1125,1126,1127,1128,1129,1130", "deleted_lines": null, "method_info": {"method_name": "test_assign_a_row_to_ndarray", "method_params": "", "method_startline": "1103", "method_endline": "1130"}}}}}}}