{"BR": {"BR_id": "2761", "BR_author": "davidepatrucco", "BRopenT": "2020-10-20T16:07:12Z", "BRcloseT": "2020-10-20T20:44:52Z", "BR_text": {"BRsummary": "\"unrecognized arguments: --bpe-codes\" after a clean install", "BRdescription": "\n <denchmark-h:h2>\ud83d\udc1b Bug</denchmark-h>\n \n I just followed the instruction in <denchmark-link:https://fairseq.readthedocs.io/en/latest/getting_started.html>https://fairseq.readthedocs.io/en/latest/getting_started.html</denchmark-link>\n \n \n \n downloaded the wmt14 model\n curl https://dl.fbaipublicfiles.com/fairseq/models/wmt14.v2.en-fr.fconv-py.tar.bz2 | tar xvjf -\n \n \n launched fairseq-interactive\n \n \n MODEL_DIR=wmt14.en-fr.fconv-py\n fairseq-interactive \n --path $MODEL_DIR/model.pt $MODEL_DIR \n --beam 5 --source-lang en --target-lang fr \n --tokenizer moses \n --bpe subword_nmt --bpe-codes $MODEL_DIR/bpecodes\n result:\n fairseq-interactive: error: unrecognized arguments: --bpe-codes wmt14.en-fr.fconv-py/bpecodes\n <denchmark-h:h3>To Reproduce</denchmark-h>\n \n \n As above. Just followed the tutorial, this is the outcome:\n \n MODEL_DIR=wmt14.en-fr.fconv-py\n fairseq-interactive \n --path $MODEL_DIR/model.pt $MODEL_DIR \n --beam 5 --source-lang en --target-lang fr \n --tokenizer moses \n --bpe subword_nmt --bpe-codes $MODEL_DIR/bpecodes\n usage: fairseq-interactive [-h] [--no-progress-bar]\n [--log-interval LOG_INTERVAL]\n [--log-format {json,none,simple,tqdm}]\n [--tensorboard-logdir TENSORBOARD_LOGDIR]\n [--seed SEED] [--cpu] [--tpu] [--bf16]\n [--memory-efficient-bf16] [--fp16]\n [--memory-efficient-fp16] [--fp16-no-flatten-grads]\n [--fp16-init-scale FP16_INIT_SCALE]\n [--fp16-scale-window FP16_SCALE_WINDOW]\n [--fp16-scale-tolerance FP16_SCALE_TOLERANCE]\n [--min-loss-scale MIN_LOSS_SCALE]\n [--threshold-loss-scale THRESHOLD_LOSS_SCALE]\n [--user-dir USER_DIR]\n [--empty-cache-freq EMPTY_CACHE_FREQ]\n [--all-gather-list-size ALL_GATHER_LIST_SIZE]\n [--model-parallel-size MODEL_PARALLEL_SIZE]\n [--quantization-config-path QUANTIZATION_CONFIG_PATH]\n [--profile]\n [--criterion {cross_entropy,ctc,adaptive_loss,wav2vec,legacy_masked_lm_loss,nat_loss,label_smoothed_cross_entropy,composite_loss,sentence_prediction,label_smoothed_cross_entropy_with_alignment,masked_lm,sentence_ranking,vocab_parallel_cross_entropy}]\n [--tokenizer {nltk,space,moses}]\n [--bpe {sentencepiece,fastbpe,gpt2,subword_nmt,hf_byte_bpe,bert,byte_bpe,characters,bytes}]\n [--optimizer {nag,adafactor,sgd,adamax,adagrad,adam,lamb,adadelta}]\n [--lr-scheduler {fixed,reduce_lr_on_plateau,polynomial_decay,inverse_sqrt,tri_stage,cosine,triangular}]\n [--scoring {sacrebleu,bleu,wer,chrf}] [--task TASK]\n [--num-workers NUM_WORKERS]\n [--skip-invalid-size-inputs-valid-test]\n [--max-tokens MAX_TOKENS] [--batch-size BATCH_SIZE]\n [--required-batch-size-multiple REQUIRED_BATCH_SIZE_MULTIPLE]\n [--required-seq-len-multiple REQUIRED_SEQ_LEN_MULTIPLE]\n [--dataset-impl {raw,lazy,cached,mmap,fasta}]\n [--data-buffer-size DATA_BUFFER_SIZE]\n [--train-subset TRAIN_SUBSET]\n [--valid-subset VALID_SUBSET]\n [--validate-interval VALIDATE_INTERVAL]\n [--validate-interval-updates VALIDATE_INTERVAL_UPDATES]\n [--validate-after-updates VALIDATE_AFTER_UPDATES]\n [--fixed-validation-seed FIXED_VALIDATION_SEED]\n [--disable-validation]\n [--max-tokens-valid MAX_TOKENS_VALID]\n [--batch-size-valid BATCH_SIZE_VALID]\n [--curriculum CURRICULUM] [--gen-subset GEN_SUBSET]\n [--num-shards NUM_SHARDS] [--shard-id SHARD_ID]\n [--distributed-world-size DISTRIBUTED_WORLD_SIZE]\n [--distributed-rank DISTRIBUTED_RANK]\n [--distributed-backend DISTRIBUTED_BACKEND]\n [--distributed-init-method DISTRIBUTED_INIT_METHOD]\n [--distributed-port DISTRIBUTED_PORT]\n [--device-id DEVICE_ID] [--local-rank LOCAL_RANK]\n [--distributed-no-spawn]\n [--ddp-backend {c10d,no_c10d}]\n [--bucket-cap-mb BUCKET_CAP_MB]\n [--fix-batches-to-gpus] [--find-unused-parameters]\n [--fast-stat-sync] [--broadcast-buffers]\n [--distributed-wrapper {DDP,SlowMo}]\n [--slowmo-momentum SLOWMO_MOMENTUM]\n [--slowmo-algorithm SLOWMO_ALGORITHM]\n [--localsgd-frequency LOCALSGD_FREQUENCY]\n [--nprocs-per-node NPROCS_PER_NODE]\n [--pipeline-model-parallel]\n [--pipeline-balance PIPELINE_BALANCE]\n [--pipeline-devices PIPELINE_DEVICES]\n [--pipeline-chunks PIPELINE_CHUNKS]\n [--pipeline-encoder-balance PIPELINE_ENCODER_BALANCE]\n [--pipeline-encoder-devices PIPELINE_ENCODER_DEVICES]\n [--pipeline-decoder-balance PIPELINE_DECODER_BALANCE]\n [--pipeline-decoder-devices PIPELINE_DECODER_DEVICES]\n [--pipeline-checkpoint {always,never,except_last}]\n [--zero-sharding {none,os}] [--path PATH]\n [--remove-bpe [REMOVE_BPE]] [--quiet]\n [--model-overrides MODEL_OVERRIDES]\n [--results-path RESULTS_PATH] [--beam BEAM]\n [--nbest NBEST] [--max-len-a MAX_LEN_A]\n [--max-len-b MAX_LEN_B] [--min-len MIN_LEN]\n [--match-source-len] [--unnormalized]\n [--no-early-stop] [--no-beamable-mm]\n [--lenpen LENPEN] [--unkpen UNKPEN]\n [--replace-unk [REPLACE_UNK]] [--sacrebleu]\n [--score-reference] [--prefix-size PREFIX_SIZE]\n [--no-repeat-ngram-size NO_REPEAT_NGRAM_SIZE]\n [--sampling] [--sampling-topk SAMPLING_TOPK]\n [--sampling-topp SAMPLING_TOPP]\n [--constraints [{ordered,unordered}]]\n [--temperature TEMPERATURE]\n [--diverse-beam-groups DIVERSE_BEAM_GROUPS]\n [--diverse-beam-strength DIVERSE_BEAM_STRENGTH]\n [--diversity-rate DIVERSITY_RATE]\n [--print-alignment] [--print-step]\n [--lm-path LM_PATH] [--lm-weight LM_WEIGHT]\n [--iter-decode-eos-penalty ITER_DECODE_EOS_PENALTY]\n [--iter-decode-max-iter ITER_DECODE_MAX_ITER]\n [--iter-decode-force-max-iter]\n [--iter-decode-with-beam ITER_DECODE_WITH_BEAM]\n [--iter-decode-with-external-reranker]\n [--retain-iter-history] [--retain-dropout]\n [--retain-dropout-modules RETAIN_DROPOUT_MODULES]\n [--decoding-format {unigram,ensemble,vote,dp,bs}]\n [--no-seed-provided] [--save-dir SAVE_DIR]\n [--restore-file RESTORE_FILE]\n [--finetune-from-model FINETUNE_FROM_MODEL]\n [--reset-dataloader] [--reset-lr-scheduler]\n [--reset-meters] [--reset-optimizer]\n [--optimizer-overrides OPTIMIZER_OVERRIDES]\n [--save-interval SAVE_INTERVAL]\n [--save-interval-updates SAVE_INTERVAL_UPDATES]\n [--keep-interval-updates KEEP_INTERVAL_UPDATES]\n [--keep-last-epochs KEEP_LAST_EPOCHS]\n [--keep-best-checkpoints KEEP_BEST_CHECKPOINTS]\n [--no-save] [--no-epoch-checkpoints]\n [--no-last-checkpoints] [--no-save-optimizer-state]\n [--best-checkpoint-metric BEST_CHECKPOINT_METRIC]\n [--maximize-best-checkpoint-metric]\n [--patience PATIENCE]\n [--checkpoint-suffix CHECKPOINT_SUFFIX]\n [--checkpoint-shard-count CHECKPOINT_SHARD_COUNT]\n [--buffer-size BUFFER_SIZE] [--input INPUT]\n [--force-anneal N] [--lr-shrink LS]\n [--warmup-updates N] [-s SRC] [-t TARGET]\n [--load-alignments] [--left-pad-source BOOL]\n [--left-pad-target BOOL] [--max-source-positions N]\n [--max-target-positions N]\n [--upsample-primary UPSAMPLE_PRIMARY]\n [--truncate-source] [--num-batch-buckets N]\n [--eval-bleu] [--eval-bleu-detok EVAL_BLEU_DETOK]\n [--eval-bleu-detok-args JSON]\n [--eval-tokenized-bleu]\n [--eval-bleu-remove-bpe [EVAL_BLEU_REMOVE_BPE]]\n [--eval-bleu-args JSON] [--eval-bleu-print-samples]\n data\n fairseq-interactive: error: unrecognized arguments: --bpe-codes wmt14.en-fr.fconv-py/bpecodes\n <denchmark-h:h4>Code sample</denchmark-h>\n \n <denchmark-h:h3>Expected behavior</denchmark-h>\n \n <denchmark-h:h3>Environment</denchmark-h>\n \n \n fairseq Version (e.g., 1.0 or master): obtained by git clone https://github.com/pytorch/fairseq\n PyTorch Version (e.g., 1.0: 1.6.0\n OS (e.g., Linux):Mac OS\n How you installed fairseq (pip, source): see below\n Build command you used (if compiling from source):\n git clone https://github.com/pytorch/fairseq\n cd fairseq\n CFLAGS=\"-stdlib=libc++\" pip install --editable .\n Python version: 3.7.9\n CUDA/cuDNN version: no\n GPU models and configuration: no\n Any other relevant information:\n \n <denchmark-h:h3>Additional context</denchmark-h>\n \n \t"}, "comments": {}}, "commit": {"commit_id": "f6677b675524d22a4df9f2304f63ee382594c9e3", "commit_author": "Alexei Baevski", "commitT": "2020-10-20 13:44:42-07:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "fairseq\\dataclass\\utils.py", "file_new_name": "fairseq\\dataclass\\utils.py", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "7,207,208,209,210", "deleted_lines": "7,207"}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "fairseq\\options.py", "file_new_name": "fairseq\\options.py", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "153,154,155", "deleted_lines": null}}}}}}