{"BR": {"BR_id": "1277", "BR_author": "lavystord", "BRopenT": "2019-11-28T11:49:51Z", "BRcloseT": "2019-12-04T03:31:54Z", "BR_text": {"BRsummary": "train successfully, but no data in hive table", "BRdescription": "\n Description\n train successfully, but no data in hive table\n Reproduction Steps\n #!/usr/bin/env bash\n \n INPUT_SQL=\"select * from pre.sqlflow_test_data to TRAIN sqlflow_models.DNNClassifier WITH model.n_classes = 3,model.hidden_units = [10,20] COLUMN sepal_length,sepal_width,petal_length,petal_width LABEL class INTO pre.iris_dnn_model22;\"\n HADOOP_USER_NAME=\"xxx\"\n HADOOP_USER_PASSWORD=\"xxxx\"\n MR_QUEUE_NAME=\"xxxx\"\n DEFAULT_DATABASE=\"pre\"\n #hive server\n DATA_STUDIO_HIVESERVER2_IP=\"xxxx\"\n DATA_STUDIO_HIVESERVER2_PORT=\"xxxx\"\n SQL_FILE=\"/tmp/flow.sql\"\n \n DATASOURCE=\"hive://${HADOOP_USER_NAME}:${HADOOP_USER_PASSWORD}@${DATA_STUDIO_HIVESERVER2_IP}:${DATA_STUDIO_HIVESERVER2_PORT}/${DEFAULT_DATABASE}?auth=PLAIN&session.mapreduce.job.queuename=${MR_QUEUE_NAME}&session.hive.exec.compress.intermediate=true&session.hive.auto.convert.join=true&session.hive.exec.parallel=true\"\n echo \"datasource is ${DATASOURCE}\"\n \n echo \"${INPUT_SQL}\" > ${SQL_FILE}\n \n ~/go/bin/repl -f \"${SQL_FILE}\" --datasource=\"${DATASOURCE}\"\n \n <denchmark-link:https://user-images.githubusercontent.com/16117095/69803770-fd36db80-1217-11ea-80fe-1e3277b8925a.png></denchmark-link>\n \n <denchmark-link:https://user-images.githubusercontent.com/16117095/69803786-0627ad00-1218-11ea-81b3-b9b0070d2d15.png></denchmark-link>\n \n Environment (Please complete the following information):\n DiDi SQLFlow_snapshot_20191128_v0.5\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "lavystord", "commentT": "2019-11-28T16:01:07Z", "comment_text": "\n \t\tHi <denchmark-link:https://github.com/lavystord>@lavystord</denchmark-link>\n  , thanks for the issue, I have reproduced your case, and I believe this is a bug, I will fix it ASAP.\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "lavystord", "commentT": "2019-12-02T07:05:59Z", "comment_text": "\n \t\tHi <denchmark-link:https://github.com/lavystord>@lavystord</denchmark-link>\n  , Can you show the result of , and does the path  is the default hive table location?\n \t\t"}}}, "commit": {"commit_id": "fd638707a3f6d9d3d3cfe7a9935a70a2c35a49bd", "commit_author": "Yan Xu", "commitT": "2019-12-03 19:31:53-08:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 5, "file_old_name": "cmd\\repl\\repl.go", "file_new_name": "cmd\\repl\\repl.go", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "84,87,89,90,91", "deleted_lines": "84,85,86,89", "method_info": {"method_name": "render", "method_params": "Table", "method_startline": "67", "method_endline": "94"}}, "hunk_1": {"Ismethod": 1, "added_lines": "170", "deleted_lines": "157,158,159,160,161,162,163", "method_info": {"method_name": "parseSQLFromStdin", "method_params": "Reader", "method_startline": "157", "method_endline": "176"}}, "hunk_2": {"Ismethod": 1, "added_lines": "144,145,146,147,148,149,150,151,152,153,154", "deleted_lines": "153,154,155", "method_info": {"method_name": "makeSessionFromEnv", "method_params": "", "method_startline": "144", "method_endline": "155"}}, "hunk_3": {"Ismethod": 1, "added_lines": "108,114,116,128", "deleted_lines": "114", "method_info": {"method_name": "runStmt", "method_params": "string,bool,string,DB,string", "method_startline": "108", "method_endline": "129"}}, "hunk_4": {"Ismethod": 1, "added_lines": "138,139,140,142", "deleted_lines": "135", "method_info": {"method_name": "repl", "method_params": "Scanner,string,DB,string", "method_startline": "131", "method_endline": "142"}}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "pkg\\sql\\model.go", "file_new_name": "pkg\\sql\\model.go", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "123,124,125,126", "deleted_lines": null, "method_info": {"method_name": "saveDB", "method_params": "DB,string,Session", "method_startline": "99", "method_endline": "128"}}}}, "file_2": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "pkg\\sqlfs\\hive_writer.go", "file_new_name": "pkg\\sqlfs\\hive_writer.go", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "35,36,37,38,39,40,41,42,43,44,45,46,47,48,49", "deleted_lines": null, "method_info": {"method_name": "NewHiveWriter", "method_params": "DB,string,Session", "method_startline": "35", "method_endline": "49"}}, "hunk_1": {"Ismethod": 1, "added_lines": "73,74,75", "deleted_lines": null, "method_info": {"method_name": "Close", "method_params": "", "method_startline": "72", "method_endline": "110"}}}}, "file_3": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "pkg\\sqlfs\\writer.go", "file_new_name": "pkg\\sqlfs\\writer.go", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "47,48,49,51", "deleted_lines": "48,49,50,51,53,54,55", "method_info": {"method_name": "Create", "method_params": "DB,driver,string,Session", "method_startline": "38", "method_endline": "55"}}}}}}}