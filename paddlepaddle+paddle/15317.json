{"BR": {"BR_id": "15317", "BR_author": "zhengya01", "BRopenT": "2019-01-14T08:06:05Z", "BRcloseT": "2019-01-23T03:48:42Z", "BR_text": {"BRsummary": "faster_rcnn\u8fd0\u884c\u5931\u8d25ValueError: Shape not match. What is defined in data layer is (-1L, 3L, 1333L, 1333L), but receive (1, 3, 800, 1205)", "BRdescription": "\n \n \n \u6807\u9898\uff1afaster_rcnn\u8bad\u7ec3\u8fc7\u7a0b\u5931\u8d25\n ValueError: Shape not match. What is defined in data layer is (-1L, 3L, 1333L, 1333L), but receive (1, 3, 800, 1205)\n \n \n \u7248\u672c\u3001\u73af\u5883\u4fe1\u606f\uff1a\n \u00a0 \u00a01\uff09PaddlePaddle\u7248\u672c\uff1aa92860a3b1dce1ddd25885e06514dfe02839aabc\n \u00a0 \u00a03\uff09GPU\uff1aGPU\u578b\u53f7V100\u3001CUDA9\u3001CUDNN7\n \u00a0 \u00a03\uff09\u7cfb\u7edf\u73af\u5883\uff1a\u8bf7\u60a8\u63cf\u8ff0\u7cfb\u7edf\u7c7b\u578b\u3001\u7248\u672c\uff0c\u4f8b\u5982Mac OS 10.14\uff0cPython\u7248\u672c\n \n \n \u8bad\u7ec3\u4fe1\u606f\n \u00a0 \u00a01\uff09\u5355\u673a\uff0c\u5355\u5361/\u591a\u5361\n \n \n \u590d\u73b0\u4fe1\u606f\uff1a\n FLAGS_benchmark=true  python train.py --model_save_dir=output/ --data_dir=dataset/coco/ --max_iter=10 --enable_ce --pretrained_model=./imagenet_resnet50_fusebn\n \n \n \u95ee\u9898\u63cf\u8ff0\uff1a\n \n \n <denchmark-code>W0114 15:51:07.217496 116714 device_context.cc:262] Please NOTE: device: 0, CUDA Capability: 70, Driver API Version: 9.0, Runtime API Version: 9.0\n W0114 15:51:07.217563 116714 device_context.cc:270] device: 0, cuDNN Version: 7.0.\n W0114 15:51:07.217572 116714 device_context.cc:294] WARNING: device: 0. The installed Paddle is compiled with CUDNN 7.1, but CUDNN version in your machine is 7.0, which may cause serious incompatible bug. Please recompile or reinstall Paddle with compatible CUDNN version.\n Exception in thread Thread-1:\n Traceback (most recent call last):\n   File \"/home/paddle/anaconda2/lib/python2.7/threading.py\", line 801, in __bootstrap_inner\n     self.run()\n   File \"/home/paddle/anaconda2/lib/python2.7/threading.py\", line 754, in run\n     self.__target(*self.__args, **self.__kwargs)\n   File \"/home/paddle/anaconda2/lib/python2.7/site-packages/paddle/fluid/layers/io.py\", line 563, in __provider_thread__\n     for tensors in func():\n   File \"/home/paddle/anaconda2/lib/python2.7/site-packages/paddle/fluid/layers/io.py\", line 610, in __tensor_provider__\n     for slots in paddle_reader():\n   File \"/home/paddle/anaconda2/lib/python2.7/site-packages/paddle/fluid/data_feeder.py\", line 287, in __reader_creator__\n     yield self.feed(item)\n   File \"/home/paddle/anaconda2/lib/python2.7/site-packages/paddle/fluid/data_feeder.py\", line 206, in feed\n     ret_dict[each_name] = each_converter.done()\n   File \"/home/paddle/anaconda2/lib/python2.7/site-packages/paddle/fluid/data_feeder.py\", line 92, in done\n     self._check_shape(arr.shape)\n   File \"/home/paddle/anaconda2/lib/python2.7/site-packages/paddle/fluid/data_feeder.py\", line 79, in _check_shape\n     format(self.shape, shape))\n ValueError: Shape not match. What is defined in data layer is (-1L, 3L, 1333L, 1333L), but receive (1, 3, 800, 1205)\n </denchmark-code>\n \n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "zhengya01", "commentT": "2019-01-14T08:26:27Z", "comment_text": "\n \t\t\u5c31\u5982error\u4fe1\u606f\u6240\u793a\uff0cfaster-rcnn\u8981\u6c42\u8f93\u5165\u6570\u636e\u7684shape\u4e3a(-1L, 3L, 1333L, 1333L)\uff0c\u5982\u679cbatch_size\u662f1\uff0c\u90a3\u5c31\u662f(1, 3, 1333, 1333)\uff0c\u4f60\u7ed9\u7684\u8f93\u5165\u6570\u636e\u7684shape\u662f(1, 3, 800, 1205)\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "zhengya01", "commentT": "2019-01-14T08:43:16Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/PaddlePaddle/Paddle/commit/3e8408429d4b7fbb402ef33d776f8c343e565bdf>3e84084</denchmark-link>\n  \u8fd9\u4e2a\u7248\u672c\u5c31\u4e0d\u4f1a\u62a5\u9519\n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "zhengya01", "commentT": "2019-01-14T09:25:48Z", "comment_text": "\n \t\tfaster-rcnn\u8fd9\u4e2a\u6a21\u5f0f\u5e94\u8be5\u662f\u652f\u6301\u53d8\u957f\u6570\u636e\u7684\u3002\u4f60\u7528\u7684\u662fdevelop\u7248\u672c\u5417\uff1f\n \t\t"}, "comments_3": {"comment_id": 4, "comment_author": "zhengya01", "commentT": "2019-01-15T09:45:14Z", "comment_text": "\n \t\t\u4f3c\u4e4e\u662f\u8fd9\u4e2a\u4fee\u6539 <denchmark-link:https://github.com/PaddlePaddle/Paddle/commit/d752177b8f1fafe3588fe7f77a4960813f1bab4f#diff-eb827f0da22617956805e833749e250f>d752177#diff-eb827f0da22617956805e833749e250f</denchmark-link>\n  \u5f15\u8d77\u7684\uff0c<denchmark-link:https://github.com/sneaxiy>@sneaxiy</denchmark-link>\n \n \t\t"}}}, "commit": {"commit_id": "07dc5a1506b4c349b7771f7bec342c11ae0477b1", "commit_author": "qingqing01", "commitT": "2019-01-23 11:48:13+08:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "paddle\\fluid\\API.spec", "file_new_name": "paddle\\fluid\\API.spec", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "200,321", "deleted_lines": "200"}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "paddle\\fluid\\operators\\affine_channel_op.cu", "file_new_name": "paddle\\fluid\\operators\\affine_channel_op.cu", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "86,100,101,102,103,104,105,107,108", "deleted_lines": "86,100,101,103,104,106"}}}, "file_2": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "paddle\\fluid\\operators\\detection\\CMakeLists.txt", "file_new_name": "paddle\\fluid\\operators\\detection\\CMakeLists.txt", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "48,49,50,51", "deleted_lines": null}}}, "file_3": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "paddle\\fluid\\operators\\detection\\bbox_util.h", "file_new_name": "paddle\\fluid\\operators\\detection\\bbox_util.h", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "95,96,97", "deleted_lines": "91", "method_info": {"method_name": "paddle::operators::BboxOverlaps", "method_params": "r_boxes,c_boxes,overlaps", "method_startline": "71", "method_endline": "100"}}}}, "file_4": {"file_change_type": "ADD", "file_Nmethod": 0, "file_old_name": "None", "file_new_name": "paddle\\fluid\\operators\\detection\\generate_mask_labels_op.cc"}, "file_5": {"file_change_type": "MODIFY", "file_Nmethod": 5, "file_old_name": "paddle\\fluid\\operators\\detection\\generate_proposal_labels_op.cc", "file_new_name": "paddle\\fluid\\operators\\detection\\generate_proposal_labels_op.cc", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "51,52,53,56,59,60,61,62,63,64,65", "deleted_lines": "51,52,55,58,59,60,61,62,63,64", "method_info": {"method_name": "paddle::operators::GenerateProposalLabelsOp::InferShape", "method_params": "ctx", "method_startline": "40", "method_endline": "85"}}, "hunk_1": {"Ismethod": 1, "added_lines": "407,408", "deleted_lines": "400,401", "method_info": {"method_name": "paddle::operators::GenerateProposalLabelsKernel::Compute", "method_params": "context", "method_startline": "336", "method_endline": "441"}}, "hunk_2": {"Ismethod": 1, "added_lines": "229,230,231,232,235,236,237,238,239,240,241,242,243,246,248,252,254,258,273", "deleted_lines": "228,229,230,231,234,235,236,239,241,245,247,251,266", "method_info": {"method_name": "paddle::operators::SampleRoisForOneImage", "method_params": "context,rpn_rois_in,gt_classes,is_crowd,gt_boxes,im_info,batch_size_per_im,fg_fraction,fg_thresh,bg_thresh_hi,bg_thresh_lo,bbox_reg_weights,class_nums,engine,use_random", "method_startline": "228", "method_endline": "331"}}, "hunk_3": {"Ismethod": 1, "added_lines": "229,230,231,232,235,236,237,238,239,240,241,242,243,246,248,252,254,258,273", "deleted_lines": "228,229,230,231,234,235,236,239,241,245,247,251,266", "method_info": {"method_name": "paddle::operators::SampleRoisForOneImage", "method_params": "context,rpn_rois,gt_classes,is_crowd,gt_boxes,im_info,batch_size_per_im,fg_fraction,fg_thresh,bg_thresh_hi,bg_thresh_lo,bbox_reg_weights,class_nums,engine,use_random", "method_startline": "227", "method_endline": "324"}}, "hunk_4": {"Ismethod": 1, "added_lines": "477", "deleted_lines": "470", "method_info": {"method_name": "paddle::operators::GenerateProposalLabelsOpMaker::Make", "method_params": "", "method_startline": "446", "method_endline": "529"}}}}, "file_6": {"file_change_type": "ADD", "file_Nmethod": 0, "file_old_name": "None", "file_new_name": "paddle\\fluid\\operators\\detection\\mask_util.cc"}, "file_7": {"file_change_type": "ADD", "file_Nmethod": 0, "file_old_name": "None", "file_new_name": "paddle\\fluid\\operators\\detection\\mask_util.h"}, "file_8": {"file_change_type": "ADD", "file_Nmethod": 0, "file_old_name": "None", "file_new_name": "paddle\\fluid\\operators\\detection\\mask_util_test.cc"}, "file_9": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "paddle\\fluid\\operators\\gather_op.cc", "file_new_name": "paddle\\fluid\\operators\\gather_op.cc", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "106,111", "deleted_lines": null}}}, "file_10": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "paddle\\fluid\\operators\\roi_align_op.cu", "file_new_name": "paddle\\fluid\\operators\\roi_align_op.cu", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "15,259,260,274,275,276,277,278,279,280,281,282,283,285,315,316,324,325,326,327,328,329,330,331,332,335,342,345", "deleted_lines": "258,259,273,274,275,276,277,279,280,310,311,319,320,321,322,325,332,333,336"}}}, "file_11": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "paddle\\fluid\\operators\\roi_pool_op.cu", "file_new_name": "paddle\\fluid\\operators\\roi_pool_op.cu", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "15,156,157,172,173,174,175,176,177,178,179,180,181,182,184,185,213,214,222,223,224,225,226,227,228,229,230,231,235,242,245", "deleted_lines": "155,156,171,172,173,174,175,176,178,179,207,208,216,217,218,222,229,230,233,234"}}}, "file_12": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "paddle\\fluid\\operators\\sigmoid_cross_entropy_with_logits_op.cc", "file_new_name": "paddle\\fluid\\operators\\sigmoid_cross_entropy_with_logits_op.cc", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "104,105,106,107", "deleted_lines": null, "method_info": {"method_name": "paddle::operators::SigmoidCrossEntropyWithLogitsOpMaker::Make", "method_params": "", "method_startline": "90", "method_endline": "139"}}}}, "file_13": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "paddle\\fluid\\operators\\sigmoid_cross_entropy_with_logits_op.cu", "file_new_name": "paddle\\fluid\\operators\\sigmoid_cross_entropy_with_logits_op.cu", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "14,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,186,187,188,189,191,192,193,194", "deleted_lines": "18,19,21,22"}}}, "file_14": {"file_change_type": "MODIFY", "file_Nmethod": 6, "file_old_name": "paddle\\fluid\\operators\\sigmoid_cross_entropy_with_logits_op.h", "file_new_name": "paddle\\fluid\\operators\\sigmoid_cross_entropy_with_logits_op.h", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63", "deleted_lines": "29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63", "method_info": {"method_name": "paddle::operators::SigmoidCrossEntropyWithLogitsKernel::Compute", "method_params": "context", "method_startline": "29", "method_endline": "64"}}, "hunk_1": {"Ismethod": 1, "added_lines": "51,52", "deleted_lines": "51,52", "method_info": {"method_name": "paddle::operators::SigmoidCrossEntropyWithLogitsBackward::SigmoidCrossEntropyWithLogitsBackward", "method_params": "ignore_index", "method_startline": "51", "method_endline": "52"}}, "hunk_2": {"Ismethod": 1, "added_lines": "76,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108", "deleted_lines": "73,75,76,77,78,79,80,81,82,95,96,97,98,99,100,101,102,103,105,106,107", "method_info": {"method_name": "paddle::operators::SigmoidCrossEntropyWithLogitsGradKernel::Compute", "method_params": "context", "method_startline": "71", "method_endline": "109"}}, "hunk_3": {"Ismethod": 1, "added_lines": "36,37,38,39,40,41,42,43,44", "deleted_lines": "36,37,38,39,40,41,42,43,44", "method_info": {"method_name": "paddle::operators::SigmoidCrossEntropyWithLogitsForward::operator ( )", "method_params": "x,label", "method_startline": "36", "method_endline": "44"}}, "hunk_4": {"Ismethod": 1, "added_lines": "54,55,56,57,58,59,60", "deleted_lines": "54,55,56,57,58,59,60", "method_info": {"method_name": "paddle::operators::SigmoidCrossEntropyWithLogitsBackward::operator ( )", "method_params": "x,label", "method_startline": "54", "method_endline": "60"}}, "hunk_5": {"Ismethod": 1, "added_lines": "34", "deleted_lines": "33,34", "method_info": {"method_name": "paddle::operators::SigmoidCrossEntropyWithLogitsForward::SigmoidCrossEntropyWithLogitsForward", "method_params": "ignore_index", "method_startline": "33", "method_endline": "34"}}}}, "file_15": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "python\\paddle\\fluid\\data_feeder.py", "file_new_name": "python\\paddle\\fluid\\data_feeder.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "91,92", "deleted_lines": "91,92", "method_info": {"method_name": "done", "method_params": "self", "method_startline": "81", "method_endline": "97"}}}}, "file_16": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "python\\paddle\\fluid\\layers\\detection.py", "file_new_name": "python\\paddle\\fluid\\layers\\detection.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "1744,1745", "deleted_lines": null, "method_info": {"method_name": "generate_mask_labels", "method_params": "im_info,gt_classes,is_crowd,gt_segms,rois,labels_int32,num_classes,resolution", "method_startline": "1744", "method_endline": "1745"}}}}, "file_17": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "python\\paddle\\fluid\\layers\\nn.py", "file_new_name": "python\\paddle\\fluid\\layers\\nn.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "8930", "deleted_lines": "8930", "method_info": {"method_name": "sigmoid_cross_entropy_with_logits", "method_params": "x,label,ignore_index,name", "method_startline": "8927", "method_endline": "8930"}}, "hunk_1": {"Ismethod": 1, "added_lines": "8930,8931", "deleted_lines": "8930", "method_info": {"method_name": "sigmoid_cross_entropy_with_logits", "method_params": "x,label,ignore_index,name,normalize", "method_startline": "8927", "method_endline": "8931"}}}}, "file_18": {"file_change_type": "MODIFY", "file_Nmethod": 4, "file_old_name": "python\\paddle\\fluid\\tests\\test_detection.py", "file_new_name": "python\\paddle\\fluid\\tests\\test_detection.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256,257,258,259,260,261,262,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,287", "deleted_lines": null, "method_info": {"method_name": "test_generate_mask_labels", "method_params": "self", "method_startline": "235", "method_endline": "287"}}, "hunk_1": {"Ismethod": 1, "added_lines": "420,421,422,423,424,425,426,427,428,429,430,431,432,433,434,435,436,437,438,439,440,441,442,443,444,445,446,447,448,449,450,451,452,453,454,455,456", "deleted_lines": null, "method_info": {"method_name": "test_generate_proposals", "method_params": "self", "method_startline": "419", "method_endline": "456"}}, "hunk_2": {"Ismethod": 1, "added_lines": "377,387,401,402,403,404,405", "deleted_lines": "354,355,356,357,358,359,360,361,362,363,364,365,366,367,368,369,370,371,372,373,374,375,376,377,378,379,380,381,382,383,384,385,386,387,388", "method_info": {"method_name": "test_rpn_target_assign", "method_params": "self", "method_startline": "346", "method_endline": "415"}}, "hunk_3": {"Ismethod": 1, "added_lines": "206,219,220,221,222,223", "deleted_lines": "206", "method_info": {"method_name": "test_generate_proposal_labels", "method_params": "self", "method_startline": "172", "method_endline": "231"}}}}, "file_19": {"file_change_type": "ADD", "file_Nmethod": 0, "file_old_name": "None", "file_new_name": "python\\paddle\\fluid\\tests\\unittests\\test_generate_mask_labels_op.py"}, "file_20": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "python\\paddle\\fluid\\tests\\unittests\\test_generate_proposal_labels_op.py", "file_new_name": "python\\paddle\\fluid\\tests\\unittests\\test_generate_proposal_labels_op.py", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "7,15,16", "deleted_lines": "7"}}}, "file_21": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "python\\paddle\\fluid\\tests\\unittests\\test_generate_proposals_op.py", "file_new_name": "python\\paddle\\fluid\\tests\\unittests\\test_generate_proposals_op.py", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "7,15,16", "deleted_lines": "7"}}}, "file_22": {"file_change_type": "MODIFY", "file_Nmethod": 3, "file_old_name": "python\\paddle\\fluid\\tests\\unittests\\test_sigmoid_cross_entropy_with_logits_op.py", "file_new_name": "python\\paddle\\fluid\\tests\\unittests\\test_sigmoid_cross_entropy_with_logits_op.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "145,146", "deleted_lines": null, "method_info": {"method_name": "test_check_output", "method_params": "self", "method_startline": "145", "method_endline": "146"}}, "hunk_1": {"Ismethod": 1, "added_lines": "148,149", "deleted_lines": null, "method_info": {"method_name": "test_check_grad", "method_params": "self", "method_startline": "148", "method_endline": "149"}}, "hunk_2": {"Ismethod": 1, "added_lines": "122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143", "deleted_lines": null, "method_info": {"method_name": "setUp", "method_params": "self", "method_startline": "122", "method_endline": "143"}}}}}}}