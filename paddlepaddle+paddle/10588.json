{"BR": {"BR_id": "10588", "BR_author": "daming-lu", "BRopenT": "2018-05-11T04:56:00Z", "BRcloseT": "2018-05-17T21:49:49Z", "BR_text": {"BRsummary": "If `feed_order` is not passed in, then the default older will not be consistent.", "BRdescription": "\n We found a bug while testing the new API. If we pass in trainer.train() a feed order of a list like below:\n     trainer.train(\n         reader=train_reader,\n         num_epochs=100,\n         event_handler=event_handler,\n         feed_order=['x', 'y'])\n Then later call the trainer.test() without a feed_order. Then the pre-defined order (in this case, ['x', 'y']) will not be respected. In trainer.test(), it would become ['y', 'x'].\n The cause is here:\n paddle/fluid/trainer.py(279)build_feed_var_list()\n     if feed_order is None:\n         feed_var_list = [\n             var for var in program.global_block().vars.itervalues()\n             if var.is_data\n         ]\n Inside program.global_block().vars.itervalues(), we converted the passed-in list into a dictionary thus the order is not obeyed.\n <denchmark-link:https://user-images.githubusercontent.com/5635322/39907297-ad1913a0-549c-11e8-906f-007779493ddd.png></denchmark-link>\n \n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "daming-lu", "commentT": "2018-05-17T21:49:49Z", "comment_text": "\n \t\tfeed_order is required now.\n \t\t"}}}, "commit": {"commit_id": "1c4bb5c83d872ab878e21e27c627f718c6f779cd", "commit_author": "Qiao Longfei", "commitT": "2018-05-15 20:15:45-07:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 5, "file_old_name": "python\\paddle\\fluid\\trainer.py", "file_new_name": "python\\paddle\\fluid\\trainer.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "205", "deleted_lines": "205", "method_info": {"method_name": "test", "method_params": "self,reader,feed_order", "method_startline": "205", "method_endline": "215"}}, "hunk_1": {"Ismethod": 1, "added_lines": "205", "deleted_lines": "205", "method_info": {"method_name": "test", "method_params": "self,reader,feed_order", "method_startline": "205", "method_endline": "215"}}, "hunk_2": {"Ismethod": 1, "added_lines": "175,176,177", "deleted_lines": "175,176,177", "method_info": {"method_name": "train", "method_params": "self,num_epochs,event_handler,reader,feed_order,parallel", "method_startline": "172", "method_endline": "177"}}, "hunk_3": {"Ismethod": 1, "added_lines": "175,176,177", "deleted_lines": "175,176,177", "method_info": {"method_name": "train", "method_params": "self,num_epochs,event_handler,reader,parallel,feed_order", "method_startline": "172", "method_endline": "177"}}, "hunk_4": {"Ismethod": 1, "added_lines": "279", "deleted_lines": "279,280,281,282,283,284", "method_info": {"method_name": "build_feed_var_list", "method_params": "program,feed_order", "method_startline": "275", "method_endline": "295"}}}}}}}