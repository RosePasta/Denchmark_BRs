{"BR": {"BR_id": "6110", "BR_author": "reyoung", "BRopenT": "2017-11-30T10:59:41Z", "BRcloseT": "2017-12-11T08:12:37Z", "BR_text": {"BRsummary": "paddle API module manually set CXX_FLAGS but not check whether compiler support them or not", "BRdescription": "\n Not all C++ compiler support this compiler flags. We need check whether the compiler supports it or not.\n \n \n \n Paddle/paddle/api/CMakeLists.txt\n \n \n          Line 29\n       in\n       0d40a4d\n \n \n \n \n \n \n  SET(CMAKE_CXX_FLAGS \"${CMAKE_CXX_FLAGS} -Wno-parentheses-equality -Wno-missing-field-initializers -Wno-self-assign -ftls-model=global-dynamic\") \n \n \n \n \n \n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "reyoung", "commentT": "2017-12-11T06:20:59Z", "comment_text": "\n \t\tYes, when I use gcc4.9 to build Paddle, I met the following error:\n /home/work/liuyiqun/PaddlePaddle/Paddle/build_paddle/build/paddle/api/PaddlePYTHON_wrap.cxx: In function 'PyObject* _wrap_new_UnsupportError(PyObject*, PyObject*)':\n /home/work/liuyiqun/PaddlePaddle/Paddle/build_paddle/build/paddle/api/PaddlePYTHON_wrap.cxx:17128:64: error: 'argv[0]' may be used uninitialized in this function [-Werror=maybe-uninitialized]\n      int res = SWIG_AsPtr_std_string(argv[0], (std::string**)(0));\n                                                                 ^\n At global scope:\n cc1plus: error: unrecognized command line option \"-Wno-self-assign\" [-Werror]\n cc1plus: error: unrecognized command line option \"-Wno-parentheses-equality\" [-Werror]\n cc1plus: all warnings being treated as errors\t\n \t\t"}}}, "commit": {"commit_id": "95924686096556d959e67b294e146153ac3b0dfb", "commit_author": "Yiqun Liu", "commitT": "2017-12-11 16:12:36+08:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "paddle\\api\\CMakeLists.txt", "file_new_name": "paddle\\api\\CMakeLists.txt", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "28,29,30,31,32,33,34,35,36,37,39", "deleted_lines": "29"}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 3, "file_old_name": "paddle\\framework\\backward.cc", "file_new_name": "paddle\\framework\\backward.cc", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "193,194,195,220,221", "deleted_lines": "193,194,219", "method_info": {"method_name": "paddle::framework::BackwardRecursive", "method_params": "forwardOp,no_grad_names,grad_to_var,uniq_id", "method_startline": "112", "method_endline": "243"}}, "hunk_1": {"Ismethod": 1, "added_lines": "489,490,491", "deleted_lines": "486,487", "method_info": {"method_name": "paddle::framework::MakeBlockBackward", "method_params": "program_desc,block_idx,no_grad_vars,grad_to_var", "method_startline": "417", "method_endline": "509"}}, "hunk_2": {"Ismethod": 1, "added_lines": "397,398,399", "deleted_lines": "395,396", "method_info": {"method_name": "paddle::framework::MakeOpGrad", "method_params": "op_desc,no_grad_vars,grad_to_var,grad_block", "method_startline": "353", "method_endline": "409"}}}}, "file_2": {"file_change_type": "MODIFY", "file_Nmethod": 15, "file_old_name": "paddle\\framework\\backward_test.cc", "file_new_name": "paddle\\framework\\backward_test.cc", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "421,422,423", "deleted_lines": "440", "method_info": {"method_name": "TEST", "method_params": "Backward,op_part_of_output_are_not_need", "method_startline": "420", "method_endline": "443"}}, "hunk_1": {"Ismethod": 1, "added_lines": "327,329,330", "deleted_lines": "325,327", "method_info": {"method_name": "TEST", "method_params": "Backward,net_fc_backward_not_have_b", "method_startline": "321", "method_endline": "343"}}, "hunk_2": {"Ismethod": 1, "added_lines": "411,412,413", "deleted_lines": "415,416", "method_info": {"method_name": "TEST", "method_params": "Backward,op_all_output_are_not_need", "method_startline": "410", "method_endline": "418"}}, "hunk_3": {"Ismethod": 1, "added_lines": "447", "deleted_lines": null, "method_info": {"method_name": "TEST", "method_params": "Backward,op_part_of_input_are_not_need", "method_startline": "445", "method_endline": "459"}}, "hunk_4": {"Ismethod": 1, "added_lines": "300,302,303", "deleted_lines": "299,301", "method_info": {"method_name": "TEST", "method_params": "Backward,net_fc_backward_normal", "method_startline": "294", "method_endline": "319"}}, "hunk_5": {"Ismethod": 1, "added_lines": "109,110,111,117,127", "deleted_lines": "109,110,111,117,127", "method_info": {"method_name": "paddle::framework::FcOp::FcOp", "method_params": "type,inputs,outputs,attrs", "method_startline": "106", "method_endline": "129"}}, "hunk_6": {"Ismethod": 1, "added_lines": "557", "deleted_lines": "549", "method_info": {"method_name": "TEST", "method_params": "Backward,default_attribute", "method_startline": "545", "method_endline": "570"}}, "hunk_7": {"Ismethod": 1, "added_lines": "596,597", "deleted_lines": "588", "method_info": {"method_name": "TEST", "method_params": "Backward,simple_mult_op", "method_startline": "572", "method_endline": "655"}}, "hunk_8": {"Ismethod": 1, "added_lines": "468,474,480", "deleted_lines": "461,467,473", "method_info": {"method_name": "TEST", "method_params": "Backward,linear_net_intermediate_variable_has_no_grad", "method_startline": "461", "method_endline": "505"}}, "hunk_9": {"Ismethod": 1, "added_lines": "519,520", "deleted_lines": "512", "method_info": {"method_name": "TEST", "method_params": "Backward,simple_single_op", "method_startline": "507", "method_endline": "543"}}, "hunk_10": {"Ismethod": 1, "added_lines": "829,830", "deleted_lines": "820", "method_info": {"method_name": "TEST", "method_params": "Backward,shared_var", "method_startline": "805", "method_endline": "895"}}, "hunk_11": {"Ismethod": 1, "added_lines": "401,402,403", "deleted_lines": "406,407", "method_info": {"method_name": "TEST", "method_params": "Backward,op_all_input_are_not_need", "method_startline": "400", "method_endline": "408"}}, "hunk_12": {"Ismethod": 1, "added_lines": "387,389,390,393", "deleted_lines": "384,386,389,397,398", "method_info": {"method_name": "TEST", "method_params": "Backward,net_shared_weight", "method_startline": "384", "method_endline": "398"}}, "hunk_13": {"Ismethod": 1, "added_lines": "352,358", "deleted_lines": "349,355", "method_info": {"method_name": "TEST", "method_params": "Backward,net_input_of_network_not_need_grad", "method_startline": "345", "method_endline": "382"}}, "hunk_14": {"Ismethod": 1, "added_lines": "281,282,283", "deleted_lines": "281,282", "method_info": {"method_name": "TEST", "method_params": "Backward,simple_op_not_need_grad", "method_startline": "280", "method_endline": "292"}}}}, "file_3": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "paddle\\framework\\op_desc.cc", "file_new_name": "paddle\\framework\\op_desc.cc", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "319,320", "deleted_lines": "319,320", "method_info": {"method_name": "paddle::framework::InitInferShapeFuncs", "method_params": "", "method_startline": "311", "method_endline": "329"}}}}, "file_4": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "paddle\\framework\\operator_test.cc", "file_new_name": "paddle\\framework\\operator_test.cc", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "264,265,266", "deleted_lines": "264", "method_info": {"method_name": "TEST", "method_params": "Operator,Clone", "method_startline": "263", "method_endline": "269"}}}}, "file_5": {"file_change_type": "MODIFY", "file_Nmethod": 5, "file_old_name": "paddle\\framework\\prune_test.cc", "file_new_name": "paddle\\framework\\prune_test.cc", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "75,76,77,78,79,80,81,82", "deleted_lines": "74,75,76,77", "method_info": {"method_name": "TEST", "method_params": "Prune,forward", "method_startline": "71", "method_endline": "92"}}, "hunk_1": {"Ismethod": 1, "added_lines": "119,120,121,122,123,124", "deleted_lines": "127,128,129", "method_info": {"method_name": "TEST", "method_params": "Prune,multi_output_op", "method_startline": "115", "method_endline": "132"}}, "hunk_2": {"Ismethod": 1, "added_lines": "98,99,100,102,103,104,105", "deleted_lines": "94,95,96,111,112,113", "method_info": {"method_name": "TEST", "method_params": "Prune,multi_input_op", "method_startline": "94", "method_endline": "113"}}, "hunk_3": {"Ismethod": 1, "added_lines": "57,58", "deleted_lines": "57", "method_info": {"method_name": "TEST", "method_params": "Prune,one_operator", "method_startline": "53", "method_endline": "69"}}, "hunk_4": {"Ismethod": 1, "added_lines": "138,139,140,141,142,143", "deleted_lines": null, "method_info": {"method_name": "TEST", "method_params": "Prune,multi_target", "method_startline": "134", "method_endline": "152"}}}}, "file_6": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "paddle\\operators\\conditional_block_op.cc", "file_new_name": "paddle\\operators\\conditional_block_op.cc", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "145,146,147", "deleted_lines": "145,146,147", "method_info": {"method_name": "paddle::operators::ConditionalBlockGradOp::AssignLocalGradientToGlobal", "method_params": "dev_ctx,cur_scope,p_names,pg_names", "method_startline": "133", "method_endline": "151"}}}}, "file_7": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "paddle\\operators\\net_op.h", "file_new_name": "paddle\\operators\\net_op.h", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "41,42,43,44", "deleted_lines": "41", "method_info": {"method_name": "paddle::operators::NetOp::NetOp", "method_params": "", "method_startline": "41", "method_endline": "44"}}}}, "file_8": {"file_change_type": "MODIFY", "file_Nmethod": 3, "file_old_name": "paddle\\operators\\net_op_test.cc", "file_new_name": "paddle\\operators\\net_op_test.cc", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "41,44", "deleted_lines": "41,44", "method_info": {"method_name": "paddle::operators::TEST", "method_params": "OpKernel,all", "method_startline": "35", "method_endline": "55"}}, "hunk_1": {"Ismethod": 1, "added_lines": "71,72,73,74,75,76", "deleted_lines": "71,72,73,74", "method_info": {"method_name": "paddle::operators::TEST", "method_params": "NetOp,Clone", "method_startline": "69", "method_endline": "85"}}, "hunk_2": {"Ismethod": 1, "added_lines": "61", "deleted_lines": "61", "method_info": {"method_name": "paddle::operators::TEST", "method_params": "NetOp,insert_op", "method_startline": "57", "method_endline": "67"}}}}, "file_9": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "paddle\\operators\\recurrent_op.cc", "file_new_name": "paddle\\operators\\recurrent_op.cc", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "411,412,421", "deleted_lines": "411,420", "method_info": {"method_name": "paddle::operators::RecurrentGradOp::Run", "method_params": "scope,dev_ctx", "method_startline": "313", "method_endline": "463"}}}}, "file_10": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "paddle\\operators\\while_op.cc", "file_new_name": "paddle\\operators\\while_op.cc", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "190,191,199", "deleted_lines": "190,198", "method_info": {"method_name": "paddle::operators::WhileGradOp::Run", "method_params": "scope,dev_ctx", "method_startline": "99", "method_endline": "204"}}}}}}}