{"BR": {"BR_id": "273", "BR_author": "ryanjulian", "BRopenT": "2018-08-11T05:23:50Z", "BRcloseT": "2018-10-24T16:46:30Z", "BR_text": {"BRsummary": "Always copy actions if they are modified by the environment", "BRdescription": "\n When using VectorizedSampler, the actions ndarrary (or a slice thereof) of passed directly to the environment. If the environment modifies the action (e.g. by re-scaling or clipping it), it will modify the action vector used by the optimizer. This is not the correct behavior--the actions used by the optimizer should be the ones produced by the policy, regardless of how the environment mangles the actions.\n To close this issue, we need to audit each environment (including wrappers) and make sure that any environment which modifies actions in step() copies them first.\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "ryanjulian", "commentT": "2018-10-17T17:50:05Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/jonashen>@jonashen</denchmark-link>\n  status update?\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "ryanjulian", "commentT": "2018-10-17T18:35:42Z", "comment_text": "\n \t\tI can work on this issue for the release sprint.\n \t\t"}}}, "commit": {"commit_id": "7396eddab0151f368ad9d98eeed7c07868d67f47", "commit_author": "Jonathon Shen", "commitT": "2018-10-24 09:46:29-07:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "garage\\envs\\box2d\\box2d_env.py", "file_new_name": "garage\\envs\\box2d\\box2d_env.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "180,181,182,183,185,187", "deleted_lines": "179,181,183", "method_info": {"method_name": "step", "method_params": "self,action", "method_startline": "175", "method_endline": "195"}}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "garage\\envs\\mujoco\\half_cheetah_env.py", "file_new_name": "garage\\envs\\mujoco\\half_cheetah_env.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "40,41,42,43,45,46,47", "deleted_lines": "40,41", "method_info": {"method_name": "step", "method_params": "self,action", "method_startline": "39", "method_endline": "52"}}}}, "file_2": {"file_change_type": "MODIFY", "file_Nmethod": 3, "file_old_name": "tests\\dm_control\\test_dm_control_envs.py", "file_new_name": "tests\\dm_control\\test_dm_control_envs.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "13,14,15,16,17,18,19,20", "deleted_lines": null, "method_info": {"method_name": "test_can_step_and_render", "method_params": "self", "method_startline": "13", "method_endline": "20"}}, "hunk_1": {"Ismethod": 1, "added_lines": "22,23,24,25", "deleted_lines": null, "method_info": {"method_name": "test_pickling", "method_params": "self", "method_startline": "22", "method_endline": "25"}}, "hunk_2": {"Ismethod": 1, "added_lines": "27,28,29,30,31,32,33,34", "deleted_lines": null, "method_info": {"method_name": "test_all_does_not_modify_actions", "method_params": "self", "method_startline": "27", "method_endline": "34"}}}}, "file_3": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "tests\\fixtures\\__init__.py", "file_new_name": "tests\\fixtures\\__init__.py", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "5", "deleted_lines": "2,6,7,8"}}}, "file_4": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "tests\\fixtures\\fixtures.py", "file_new_name": "tests\\fixtures\\fixtures.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": null, "deleted_lines": "57,58,59,60,61,62,63,64", "method_info": {"method_name": "test_can_step_and_render", "method_params": "self", "method_startline": "57", "method_endline": "64"}}, "hunk_1": {"Ismethod": 1, "added_lines": null, "deleted_lines": "66,67", "method_info": {"method_name": "test_pickling", "method_params": "self", "method_startline": "66", "method_endline": "67"}}}}, "file_5": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "tests\\garage\\envs\\box2d\\test_car_parking_env.py", "file_new_name": "tests\\garage\\envs\\box2d\\test_car_parking_env.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "16,17,18,19,20,21,22", "deleted_lines": null, "method_info": {"method_name": "test_does_not_modify_action", "method_params": "self", "method_startline": "16", "method_endline": "22"}}}}, "file_6": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "tests\\garage\\envs\\box2d\\test_cartpole_env.py", "file_new_name": "tests\\garage\\envs\\box2d\\test_cartpole_env.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "16,17,18,19,20,21,22", "deleted_lines": null, "method_info": {"method_name": "test_does_not_modify_action", "method_params": "self", "method_startline": "16", "method_endline": "22"}}}}, "file_7": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "tests\\garage\\envs\\box2d\\test_cartpole_swingup_env.py", "file_new_name": "tests\\garage\\envs\\box2d\\test_cartpole_swingup_env.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "16,17,18,19,20,21,22", "deleted_lines": null, "method_info": {"method_name": "test_does_not_modify_action", "method_params": "self", "method_startline": "16", "method_endline": "22"}}}}, "file_8": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "tests\\garage\\envs\\box2d\\test_double_pendulum_env.py", "file_new_name": "tests\\garage\\envs\\box2d\\test_double_pendulum_env.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "16,17,18,19,20,21,22", "deleted_lines": null, "method_info": {"method_name": "test_does_not_modify_action", "method_params": "self", "method_startline": "16", "method_endline": "22"}}}}, "file_9": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "tests\\garage\\envs\\box2d\\test_mountain_car_env.py", "file_new_name": "tests\\garage\\envs\\box2d\\test_mountain_car_env.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "16,17,18,19,20,21,22", "deleted_lines": null, "method_info": {"method_name": "test_does_not_modify_action", "method_params": "self", "method_startline": "16", "method_endline": "22"}}}}, "file_10": {"file_change_type": "DELETE", "file_Nmethod": 0, "file_old_name": "tests\\garage\\envs\\dm_control\\test_dm_control_env.py", "file_new_name": "None"}, "file_11": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "tests\\garage\\envs\\mujoco\\gather\\test_point_gather_env.py", "file_new_name": "tests\\garage\\envs\\mujoco\\gather\\test_point_gather_env.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "16,17,18,19,20,21,22", "deleted_lines": null, "method_info": {"method_name": "test_does_not_modify_action", "method_params": "self", "method_startline": "16", "method_endline": "22"}}}}, "file_12": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "tests\\garage\\envs\\mujoco\\gather\\test_swimmer_gather_env.py", "file_new_name": "tests\\garage\\envs\\mujoco\\gather\\test_swimmer_gather_env.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "16,17,18,19,20,21,22", "deleted_lines": null, "method_info": {"method_name": "test_does_not_modify_action", "method_params": "self", "method_startline": "16", "method_endline": "22"}}}}, "file_13": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "tests\\garage\\envs\\mujoco\\hill\\test_ant_hill_env.py", "file_new_name": "tests\\garage\\envs\\mujoco\\hill\\test_ant_hill_env.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "16,17,18,19,20,21,22", "deleted_lines": null, "method_info": {"method_name": "test_does_not_modify_action", "method_params": "self", "method_startline": "16", "method_endline": "22"}}}}, "file_14": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "tests\\garage\\envs\\mujoco\\hill\\test_half_cheetah_hill_env.py", "file_new_name": "tests\\garage\\envs\\mujoco\\hill\\test_half_cheetah_hill_env.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "16,17,18,19,20,21,22", "deleted_lines": null, "method_info": {"method_name": "test_does_not_modify_action", "method_params": "self", "method_startline": "16", "method_endline": "22"}}}}, "file_15": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "tests\\garage\\envs\\mujoco\\hill\\test_hopper_hill_env.py", "file_new_name": "tests\\garage\\envs\\mujoco\\hill\\test_hopper_hill_env.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "16,17,18,19,20,21,22", "deleted_lines": null, "method_info": {"method_name": "test_does_not_modify_action", "method_params": "self", "method_startline": "16", "method_endline": "22"}}}}, "file_16": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "tests\\garage\\envs\\mujoco\\hill\\test_swimmer3d_hill_env.py", "file_new_name": "tests\\garage\\envs\\mujoco\\hill\\test_swimmer3d_hill_env.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "15", "deleted_lines": "10", "method_info": {"method_name": "test_pickleable", "method_params": "self", "method_startline": "9", "method_endline": "15"}}, "hunk_1": {"Ismethod": 1, "added_lines": "16,17,18,19,20,21,22", "deleted_lines": null, "method_info": {"method_name": "test_does_not_modify_action", "method_params": "self", "method_startline": "16", "method_endline": "22"}}}}, "file_17": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "tests\\garage\\envs\\mujoco\\hill\\test_walker2d_hill_env.py", "file_new_name": "tests\\garage\\envs\\mujoco\\hill\\test_walker2d_hill_env.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "16,17,18,19,20,21,22", "deleted_lines": null, "method_info": {"method_name": "test_does_not_modify_action", "method_params": "self", "method_startline": "16", "method_endline": "22"}}}}, "file_18": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "tests\\garage\\envs\\mujoco\\maze\\test_ant_maze_env.py", "file_new_name": "tests\\garage\\envs\\mujoco\\maze\\test_ant_maze_env.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "16,17,18,19,20,21,22", "deleted_lines": null, "method_info": {"method_name": "test_does_not_modify_action", "method_params": "self", "method_startline": "16", "method_endline": "22"}}}}, "file_19": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "tests\\garage\\envs\\mujoco\\maze\\test_point_maze_env.py", "file_new_name": "tests\\garage\\envs\\mujoco\\maze\\test_point_maze_env.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "16,17,18,19,20,21,22", "deleted_lines": null, "method_info": {"method_name": "test_does_not_modify_action", "method_params": "self", "method_startline": "16", "method_endline": "22"}}}}, "file_20": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "tests\\garage\\envs\\mujoco\\maze\\test_swimmer_maze_env.py", "file_new_name": "tests\\garage\\envs\\mujoco\\maze\\test_swimmer_maze_env.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "16,17,18,19,20,21,22", "deleted_lines": null, "method_info": {"method_name": "test_does_not_modify_action", "method_params": "self", "method_startline": "16", "method_endline": "22"}}}}, "file_21": {"file_change_type": "MODIFY", "file_Nmethod": 3, "file_old_name": "tests\\garage\\envs\\mujoco\\sawyer\\test_sawyer_envs.py", "file_new_name": "tests\\garage\\envs\\mujoco\\sawyer\\test_sawyer_envs.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "94", "deleted_lines": "90", "method_info": {"method_name": "test_pnp", "method_params": "self", "method_startline": "90", "method_endline": "94"}}, "hunk_1": {"Ismethod": 1, "added_lines": "96,97,98,99,100,101,102,103,104,105,106,107", "deleted_lines": "96,97,98,99,100", "method_info": {"method_name": "test_does_not_modify_action", "method_params": "self", "method_startline": "96", "method_endline": "108"}}, "hunk_2": {"Ismethod": 1, "added_lines": "88", "deleted_lines": "85,86,87,88", "method_info": {"method_name": "test_reacher", "method_params": "self", "method_startline": "83", "method_endline": "88"}}}}, "file_22": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "tests\\garage\\envs\\mujoco\\test_ant_env.py", "file_new_name": "tests\\garage\\envs\\mujoco\\test_ant_env.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "16,17,18,19,20,21,22", "deleted_lines": null, "method_info": {"method_name": "test_does_not_modify_action", "method_params": "self", "method_startline": "16", "method_endline": "22"}}}}, "file_23": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "tests\\garage\\envs\\mujoco\\test_half_cheetah_env.py", "file_new_name": "tests\\garage\\envs\\mujoco\\test_half_cheetah_env.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "16,17,18,19,20,21,22", "deleted_lines": null, "method_info": {"method_name": "test_does_not_modify_action", "method_params": "self", "method_startline": "16", "method_endline": "22"}}}}, "file_24": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "tests\\garage\\envs\\mujoco\\test_hopper_env.py", "file_new_name": "tests\\garage\\envs\\mujoco\\test_hopper_env.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "16,17,18,19,20,21,22", "deleted_lines": null, "method_info": {"method_name": "test_does_not_modify_action", "method_params": "self", "method_startline": "16", "method_endline": "22"}}}}, "file_25": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "tests\\garage\\envs\\mujoco\\test_humanoid_env.py", "file_new_name": "tests\\garage\\envs\\mujoco\\test_humanoid_env.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "16,17,18,19,20,21,22", "deleted_lines": null, "method_info": {"method_name": "test_does_not_modify_action", "method_params": "self", "method_startline": "16", "method_endline": "22"}}}}, "file_26": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "tests\\garage\\envs\\mujoco\\test_inverted_double_pendulum_env.py", "file_new_name": "tests\\garage\\envs\\mujoco\\test_inverted_double_pendulum_env.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "17,18,19,20,21,22,23", "deleted_lines": null, "method_info": {"method_name": "test_does_not_modify_action", "method_params": "self", "method_startline": "17", "method_endline": "23"}}}}, "file_27": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "tests\\garage\\envs\\mujoco\\test_point_env.py", "file_new_name": "tests\\garage\\envs\\mujoco\\test_point_env.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "16,17,18,19,20,21,22", "deleted_lines": null, "method_info": {"method_name": "test_does_not_modify_action", "method_params": "self", "method_startline": "16", "method_endline": "22"}}}}, "file_28": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "tests\\garage\\envs\\mujoco\\test_simple_humanoid_env.py", "file_new_name": "tests\\garage\\envs\\mujoco\\test_simple_humanoid_env.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "16,17,18,19,20,21,22", "deleted_lines": null, "method_info": {"method_name": "test_does_not_modify_action", "method_params": "self", "method_startline": "16", "method_endline": "22"}}}}, "file_29": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "tests\\garage\\envs\\mujoco\\test_swimmer3d_env.py", "file_new_name": "tests\\garage\\envs\\mujoco\\test_swimmer3d_env.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "16,17,18,19,20,21,22", "deleted_lines": null, "method_info": {"method_name": "test_does_not_modify_action", "method_params": "self", "method_startline": "16", "method_endline": "22"}}}}, "file_30": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "tests\\garage\\envs\\mujoco\\test_swimmer_env.py", "file_new_name": "tests\\garage\\envs\\mujoco\\test_swimmer_env.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "16,17,18,19,20,21,22", "deleted_lines": null, "method_info": {"method_name": "test_does_not_modify_action", "method_params": "self", "method_startline": "16", "method_endline": "22"}}}}, "file_31": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "tests\\garage\\envs\\mujoco\\test_walker2d_env.py", "file_new_name": "tests\\garage\\envs\\mujoco\\test_walker2d_env.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "16,17,18,19,20,21,22", "deleted_lines": null, "method_info": {"method_name": "test_does_not_modify_action", "method_params": "self", "method_startline": "16", "method_endline": "22"}}}}, "file_32": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "tests\\garage\\envs\\test_grid_world_env.py", "file_new_name": "tests\\garage\\envs\\test_grid_world_env.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "16,17,18,19,20,21,22", "deleted_lines": null, "method_info": {"method_name": "test_does_not_modify_action", "method_params": "self", "method_startline": "16", "method_endline": "22"}}}}, "file_33": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "tests\\garage\\envs\\test_identification_env.py", "file_new_name": "tests\\garage\\envs\\test_identification_env.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "18,19,20,21,22,23,24", "deleted_lines": null, "method_info": {"method_name": "test_does_not_modify_action", "method_params": "self", "method_startline": "18", "method_endline": "24"}}}}, "file_34": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "tests\\garage\\envs\\test_noisy_env.py", "file_new_name": "tests\\garage\\envs\\test_noisy_env.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "20,21,22,23,24,25,26,27,28", "deleted_lines": null, "method_info": {"method_name": "test_does_not_modify_action", "method_params": "self", "method_startline": "20", "method_endline": "28"}}}}, "file_35": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "tests\\garage\\envs\\test_normalized_env.py", "file_new_name": "tests\\garage\\envs\\test_normalized_env.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "19,20,21,22,23,24,25,26", "deleted_lines": null, "method_info": {"method_name": "test_does_not_modify_action", "method_params": "self", "method_startline": "19", "method_endline": "26"}}}}, "file_36": {"file_change_type": "MODIFY", "file_Nmethod": 4, "file_old_name": "tests\\garage\\envs\\test_normalized_gym.py", "file_new_name": "tests\\garage\\envs\\test_normalized_gym.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "42,43,44,45,46,47,48,49,52", "deleted_lines": "41,44", "method_info": {"method_name": "test_unflatten", "method_params": "self", "method_startline": "41", "method_endline": "52"}}, "hunk_1": {"Ismethod": 1, "added_lines": "20,21,22,23,24,25,26", "deleted_lines": "20,21,22,23,26", "method_info": {"method_name": "test_does_not_modify_action", "method_params": "self", "method_startline": "20", "method_endline": "26"}}, "hunk_2": {"Ismethod": 1, "added_lines": "28,29,30,31,32,33,34,35,36,39", "deleted_lines": "29,30,31,32,33,34,35,36,37,38,39", "method_info": {"method_name": "test_flatten", "method_params": "self", "method_startline": "28", "method_endline": "39"}}, "hunk_3": {"Ismethod": 1, "added_lines": "12,13", "deleted_lines": "17,18", "method_info": {"method_name": "setUp", "method_params": "self", "method_startline": "12", "method_endline": "18"}}}}, "file_37": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "tests\\garage\\envs\\test_occlusion_env.py", "file_new_name": "tests\\garage\\envs\\test_occlusion_env.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "20,21,22,23,24,25,26,27", "deleted_lines": null, "method_info": {"method_name": "test_does_not_modify_action", "method_params": "self", "method_startline": "20", "method_endline": "27"}}}}, "file_38": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "tests\\garage\\envs\\test_point_env.py", "file_new_name": "tests\\garage\\envs\\test_point_env.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "15,16,17,18,19,20,21", "deleted_lines": null, "method_info": {"method_name": "test_does_not_modify_action", "method_params": "self", "method_startline": "15", "method_endline": "21"}}}}, "file_39": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "tests\\garage\\envs\\test_sliding_mem_env.py", "file_new_name": "tests\\garage\\envs\\test_sliding_mem_env.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "19,20,21,22,23,24,25,26", "deleted_lines": null, "method_info": {"method_name": "test_does_not_modify_action", "method_params": "self", "method_startline": "19", "method_endline": "26"}}}}}}}