{"BR": {"BR_id": "734", "BR_author": "ahtsan", "BRopenT": "2019-06-20T04:29:08Z", "BRcloseT": "2020-04-20T20:30:29Z", "BR_text": {"BRsummary": "*Conv* models should accept uint8(images) and normalize", "BRdescription": "\n Convolution network should accept placeholder with type uint8 (images) but garage is not. Example: <denchmark-link:https://github.com/rlworkgroup/garage/blob/master/src/garage/tf/policies/categorical_cnn_policy.py#L104>https://github.com/rlworkgroup/garage/blob/master/src/garage/tf/policies/categorical_cnn_policy.py#L104</denchmark-link>\n \n It should also normalize the images.\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "ahtsan", "commentT": "2019-06-21T20:19:05Z", "comment_text": "\n \t\tCheck out the remote branch /fix_npo_conv as a reference.\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "ahtsan", "commentT": "2019-07-15T04:20:22Z", "comment_text": "\n \t\tIssue <denchmark-link:https://github.com/rlworkgroup/garage/issues/794>#794</denchmark-link>\n  and <denchmark-link:https://github.com/rlworkgroup/garage/issues/795>#795</denchmark-link>\n  should cover this bug, since it makes more sense that sampler should be responsible to normalize the inputs if inputs are images. In that case, policies do not need to normalize the inputs and will receive normalized images, with type . Therefore closing this issue.\n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "ahtsan", "commentT": "2019-07-17T02:09:35Z", "comment_text": "\n \t\tPolicies should be responsible to normalize pixel inputs. Reopened.\n \t\t"}}}, "commit": {"commit_id": "1016d58d7bfe3b7ec90e7a05e40839699653219d", "commit_author": "mishari", "commitT": "2020-04-20 13:30:28-07:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "examples\\tf\\dqn_pong.py", "file_new_name": "examples\\tf\\dqn_pong.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "54", "deleted_lines": "54", "method_info": {"method_name": "run_task", "method_params": "snapshot_config,variant_data,_", "method_startline": "27", "method_endline": "90"}}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "examples\\tf\\ppo_memorize_digits.py", "file_new_name": "examples\\tf\\ppo_memorize_digits.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "31", "deleted_lines": "31", "method_info": {"method_name": "run_task", "method_params": "snapshot_config,variant_data,_", "method_startline": "18", "method_endline": "57"}}}}, "file_2": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "src\\garage\\envs\\base.py", "file_new_name": "src\\garage\\envs\\base.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "50,61,62", "deleted_lines": "58", "method_info": {"method_name": "__init__", "method_params": "self,env,env_name,is_image", "method_startline": "50", "method_endline": "64"}}, "hunk_1": {"Ismethod": 1, "added_lines": "50", "deleted_lines": "47,58", "method_info": {"method_name": "__init__", "method_params": "self,env,env_name", "method_startline": "47", "method_endline": "60"}}}}, "file_3": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "src\\garage\\misc\\tensor_utils.py", "file_new_name": "src\\garage\\misc\\tensor_utils.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "277,280,284,285,291", "deleted_lines": "278,281,282,283,286", "method_info": {"method_name": "normalize_pixel_batch", "method_params": "observations", "method_startline": "277", "method_endline": "291"}}, "hunk_1": {"Ismethod": 1, "added_lines": "280,284,285,291", "deleted_lines": "278,281,282,283,286,293,294,295,296,297,298", "method_info": {"method_name": "normalize_pixel_batch", "method_params": "env_spec,observations", "method_startline": "278", "method_endline": "298"}}}}, "file_4": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "src\\garage\\sampler\\off_policy_vectorized_sampler.py", "file_new_name": "src\\garage\\sampler\\off_policy_vectorized_sampler.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "97,98,99,102,105", "deleted_lines": "96,97,98,101,104", "method_info": {"method_name": "obtain_samples", "method_params": "self,itr,batch_size,whole_paths", "method_startline": "67", "method_endline": "177"}}}}, "file_5": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "src\\garage\\tf\\algos\\dqn.py", "file_new_name": "src\\garage\\tf\\algos\\dqn.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "237,238,239,240,241,242,243", "deleted_lines": "237,238,239,240,241,242", "method_info": {"method_name": "optimize_policy", "method_params": "self,itr,samples_data", "method_startline": "215", "method_endline": "247"}}}}, "file_6": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "src\\garage\\tf\\baselines\\gaussian_cnn_baseline.py", "file_new_name": "src\\garage\\tf\\baselines\\gaussian_cnn_baseline.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "78,79,80,81,82", "deleted_lines": null, "method_info": {"method_name": "predict", "method_params": "self,path", "method_startline": "68", "method_endline": "82"}}, "hunk_1": {"Ismethod": 1, "added_lines": "62,63,64", "deleted_lines": "63", "method_info": {"method_name": "fit", "method_params": "self,paths", "method_startline": "54", "method_endline": "66"}}}}, "file_7": {"file_change_type": "MODIFY", "file_Nmethod": 3, "file_old_name": "src\\garage\\tf\\envs\\base.py", "file_new_name": "src\\garage\\tf\\envs\\base.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "33", "deleted_lines": null, "method_info": {"method_name": "max_episode_steps", "method_params": "self", "method_startline": "29", "method_endline": "35"}}, "hunk_1": {"Ismethod": 1, "added_lines": "22,23,25,26", "deleted_lines": null, "method_info": {"method_name": "__init__", "method_params": "self,env,env_name,is_image", "method_startline": "22", "method_endline": "26"}}, "hunk_2": {"Ismethod": 1, "added_lines": "17,18,19", "deleted_lines": "17,18,20", "method_info": {"method_name": "__init__", "method_params": "self,env,env_name", "method_startline": "17", "method_endline": "20"}}}}, "file_8": {"file_change_type": "MODIFY", "file_Nmethod": 23, "file_old_name": "src\\garage\\tf\\misc\\tensor_utils.py", "file_new_name": "src\\garage\\tf\\misc\\tensor_utils.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "213,214,215,216,217,218,219,220,221,222,223,224", "deleted_lines": "212,213,214,215,216,217,218,219,220,221,222,223,224,225,226", "method_info": {"method_name": "new_tensor_like", "method_params": "name,arr_like", "method_startline": "212", "method_endline": "226"}}, "hunk_1": {"Ismethod": 1, "added_lines": "443,444,445,446,447,448,449,450,451,452,453,454,455,456,457,458,459,460", "deleted_lines": null, "method_info": {"method_name": "center_advs", "method_params": "advs,axes,eps,offset,scale,name", "method_startline": "442", "method_endline": "464"}}, "hunk_2": {"Ismethod": 1, "added_lines": "288,289,290,291,292,293,294,295,296", "deleted_lines": null, "method_info": {"method_name": "split_tensor_dict_list", "method_params": "tensor_dict", "method_startline": "287", "method_endline": "308"}}, "hunk_3": {"Ismethod": 1, "added_lines": "242,243,244,245,246,247,248,249,250,251", "deleted_lines": null, "method_info": {"method_name": "concat_tensor_dict_list", "method_params": "tensor_dict_list", "method_startline": "241", "method_endline": "261"}}, "hunk_4": {"Ismethod": 1, "added_lines": "104,105,106,107,108,109,110,111,112,113,114", "deleted_lines": "103,104,105,106,109", "method_info": {"method_name": "filter_valids", "method_params": "t,valid,name", "method_startline": "103", "method_endline": "119"}}, "hunk_5": {"Ismethod": 1, "added_lines": "345,346,347,348,349,350,351,352,353", "deleted_lines": null, "method_info": {"method_name": "pad_tensor_dict", "method_params": "tensor_dict,max_len", "method_startline": "344", "method_endline": "361"}}, "hunk_6": {"Ismethod": 1, "added_lines": "159,160,161,162,164,165,166", "deleted_lines": "159", "method_info": {"method_name": "flatten_inputs", "method_params": "deep", "method_startline": "158", "method_endline": "175"}}, "hunk_7": {"Ismethod": 1, "added_lines": "39,50,54,55,56", "deleted_lines": "61", "method_info": {"method_name": "get_target_ops", "method_params": "variables,target_variables,tau", "method_startline": "38", "method_endline": "71"}}, "hunk_8": {"Ismethod": 1, "added_lines": "90,91,92,93,94,95,96,97,98", "deleted_lines": "98,99,100", "method_info": {"method_name": "flatten_batch_dict", "method_params": "d,name", "method_startline": "89", "method_endline": "100"}}, "hunk_9": {"Ismethod": 1, "added_lines": null, "deleted_lines": "137,138", "method_info": {"method_name": "stack_tensor_list", "method_params": "tensor_list", "method_startline": "137", "method_endline": "138"}}, "hunk_10": {"Ismethod": 1, "added_lines": "183,184,185,186,187,188,189,190", "deleted_lines": null, "method_info": {"method_name": "flatten_tensor_variables", "method_params": "ts", "method_startline": "182", "method_endline": "193"}}, "hunk_11": {"Ismethod": 1, "added_lines": "98,104,105,106", "deleted_lines": "98,99,100,101,102,103,104,105,106", "method_info": {"method_name": "unflatten_tensor_variables", "method_params": "flatarr,shapes,symb_arrs", "method_startline": "98", "method_endline": "106"}}, "hunk_12": {"Ismethod": 1, "added_lines": "468,469,470,471,472,473,474,475,476,477,478,479,480", "deleted_lines": null, "method_info": {"method_name": "positive_advs", "method_params": "advs,eps,name", "method_startline": "467", "method_endline": "484"}}, "hunk_13": {"Ismethod": 1, "added_lines": "139,140,141,142,143,144,145,146,147,148,149,150", "deleted_lines": "138,139,140,141,142,145,146,147,148,149,150", "method_info": {"method_name": "graph_inputs", "method_params": "name,kwargs", "method_startline": "138", "method_endline": "152"}}, "hunk_14": {"Ismethod": 1, "added_lines": "196,197,199,200,201,202,204,205,206", "deleted_lines": null, "method_info": {"method_name": "new_tensor", "method_params": "name,ndim,dtype", "method_startline": "196", "method_endline": "209"}}, "hunk_15": {"Ismethod": 1, "added_lines": "329,330,331,332,333,334,335,336,337", "deleted_lines": null, "method_info": {"method_name": "pad_tensor_n", "method_params": "xs,max_len", "method_startline": "328", "method_endline": "341"}}, "hunk_16": {"Ismethod": 1, "added_lines": "230,231,232,233,234,235,236,237", "deleted_lines": "229,230,231,232,233,234,235,236,237", "method_info": {"method_name": "concat_tensor_list", "method_params": "tensor_list", "method_startline": "229", "method_endline": "238"}}, "hunk_17": {"Ismethod": 1, "added_lines": "264,265,267,268,269,271,272,273,282", "deleted_lines": "270", "method_info": {"method_name": "stack_tensor_dict_list", "method_params": "tensor_dict_list", "method_startline": "264", "method_endline": "284"}}, "hunk_18": {"Ismethod": 1, "added_lines": "312,313,314,315,316,317,318,319,320", "deleted_lines": null, "method_info": {"method_name": "pad_tensor", "method_params": "x,max_len", "method_startline": "311", "method_endline": "325"}}, "hunk_19": {"Ismethod": 1, "added_lines": "123,124,125,126,127,128,129,130,131,132,133", "deleted_lines": null, "method_info": {"method_name": "filter_valids_dict", "method_params": "d,valid,name", "method_startline": "122", "method_endline": "135"}}, "hunk_20": {"Ismethod": 1, "added_lines": "13,14,15,16,17,18,19,20,21,22,23,24", "deleted_lines": "18,19,30", "method_info": {"method_name": "compile_function", "method_params": "inputs,outputs,log_name", "method_startline": "12", "method_endline": "30"}}, "hunk_21": {"Ismethod": 1, "added_lines": "75,76,77,78,79,80,81,82,83,84,85", "deleted_lines": null, "method_info": {"method_name": "flatten_batch", "method_params": "t,name", "method_startline": "74", "method_endline": "86"}}, "hunk_22": {"Ismethod": 1, "added_lines": "488,489,490,491,492,493,494,495,496,497,498,499,500", "deleted_lines": null, "method_info": {"method_name": "discounted_returns", "method_params": "discount,max_len,rewards,name", "method_startline": "487", "method_endline": "513"}}}}, "file_9": {"file_change_type": "MODIFY", "file_Nmethod": 5, "file_old_name": "src\\garage\\tf\\policies\\categorical_cnn_policy.py", "file_new_name": "src\\garage\\tf\\policies\\categorical_cnn_policy.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "207,208,209", "deleted_lines": null, "method_info": {"method_name": "get_actions", "method_params": "self,observations", "method_startline": "196", "method_endline": "212"}}, "hunk_1": {"Ismethod": 1, "added_lines": "115,116,117,118,119,120,121,122,123,124", "deleted_lines": "121", "method_info": {"method_name": "_initialize", "method_params": "self", "method_startline": "114", "method_endline": "131"}}, "hunk_2": {"Ismethod": 1, "added_lines": "116,117,118,119,120,121,122,123", "deleted_lines": "121", "method_info": {"method_name": "vectorized", "method_params": "self", "method_startline": "116", "method_endline": "123"}}, "hunk_3": {"Ismethod": 1, "added_lines": "189,190,191", "deleted_lines": null, "method_info": {"method_name": "get_action", "method_params": "self,observation", "method_startline": "178", "method_endline": "194"}}, "hunk_4": {"Ismethod": 1, "added_lines": "157,158,159", "deleted_lines": null, "method_info": {"method_name": "dist_info_sym", "method_params": "self,obs_var,state_info_vars,name", "method_startline": "142", "method_endline": "161"}}}}, "file_10": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "src\\garage\\tf\\policies\\discrete_qf_derived_policy.py", "file_new_name": "src\\garage\\tf\\policies\\discrete_qf_derived_policy.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "80,81,82,83,84", "deleted_lines": null, "method_info": {"method_name": "get_actions", "method_params": "self,observations", "method_startline": "68", "method_endline": "88"}}, "hunk_1": {"Ismethod": 1, "added_lines": "58,59,60,61,62", "deleted_lines": null, "method_info": {"method_name": "get_action", "method_params": "self,observation", "method_startline": "46", "method_endline": "66"}}}}, "file_11": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "src\\garage\\tf\\q_functions\\discrete_cnn_q_function.py", "file_new_name": "src\\garage\\tf\\q_functions\\discrete_cnn_q_function.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "209,210", "deleted_lines": null, "method_info": {"method_name": "get_qval_sym", "method_params": "self,state_input,name", "method_startline": "197", "method_endline": "211"}}, "hunk_1": {"Ismethod": 1, "added_lines": "170,171", "deleted_lines": null, "method_info": {"method_name": "_initialize", "method_params": "self", "method_startline": "166", "method_endline": "174"}}}}, "file_12": {"file_change_type": "MODIFY", "file_Nmethod": 3, "file_old_name": "tests\\garage\\misc\\test_tensor_utils.py", "file_new_name": "tests\\garage\\misc\\test_tensor_utils.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": null, "deleted_lines": "45,46,47,48,49", "method_info": {"method_name": "test_normalize_pixel_patch_not_trigger", "method_params": "self", "method_startline": "45", "method_endline": "49"}}, "hunk_1": {"Ismethod": 1, "added_lines": "38,40", "deleted_lines": "38,39,41", "method_info": {"method_name": "test_normalize_pixel_patch", "method_params": "self", "method_startline": "38", "method_endline": "43"}}, "hunk_2": {"Ismethod": 1, "added_lines": "37,38,40", "deleted_lines": "38,39,41", "method_info": {"method_name": "test_normalize_pixel_batch", "method_params": "self", "method_startline": "37", "method_endline": "42"}}}}, "file_13": {"file_change_type": "MODIFY", "file_Nmethod": 4, "file_old_name": "tests\\garage\\tf\\baselines\\test_gaussian_cnn_baseline.py", "file_new_name": "tests\\garage\\tf\\baselines\\test_gaussian_cnn_baseline.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "41,42,43,44", "deleted_lines": null, "method_info": {"method_name": "test_invalid_obs_shape", "method_params": "self,obs_dim", "method_startline": "41", "method_endline": "44"}}, "hunk_1": {"Ismethod": 1, "added_lines": "83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112", "deleted_lines": "83", "method_info": {"method_name": "test_obs_not_image", "method_params": "self", "method_startline": "83", "method_endline": "112"}}, "hunk_2": {"Ismethod": 1, "added_lines": "46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81", "deleted_lines": "62,77", "method_info": {"method_name": "test_obs_is_image", "method_params": "self", "method_startline": "46", "method_endline": "81"}}, "hunk_3": {"Ismethod": 1, "added_lines": "153,159", "deleted_lines": null, "method_info": {"method_name": "test_is_pickleable", "method_params": "self", "method_startline": "152", "method_endline": "174"}}}}, "file_14": {"file_change_type": "MODIFY", "file_Nmethod": 3, "file_old_name": "tests\\garage\\tf\\misc\\test_tensor_utils.py", "file_new_name": "tests\\garage\\tf\\misc\\test_tensor_utils.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "53,54", "deleted_lines": null, "method_info": {"method_name": "test_get_target_ops_tau", "method_params": "self", "method_startline": "52", "method_endline": "63"}}, "hunk_1": {"Ismethod": 1, "added_lines": "19,20,21,22,23,24,33,34,35,36,37", "deleted_lines": "18,19,20,21,30,31,32,33,34,39", "method_info": {"method_name": "test_compute_advantages", "method_params": "self", "method_startline": "14", "method_endline": "39"}}, "hunk_2": {"Ismethod": 1, "added_lines": "42,43", "deleted_lines": "50", "method_info": {"method_name": "test_get_target_ops", "method_params": "self", "method_startline": "41", "method_endline": "50"}}}}, "file_15": {"file_change_type": "MODIFY", "file_Nmethod": 3, "file_old_name": "tests\\garage\\tf\\policies\\test_categorical_cnn_policy.py", "file_new_name": "tests\\garage\\tf\\policies\\test_categorical_cnn_policy.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203", "deleted_lines": "166,167", "method_info": {"method_name": "test_obs_not_image", "method_params": "self", "method_startline": "156", "method_endline": "203"}}, "hunk_1": {"Ismethod": 1, "added_lines": "120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154", "deleted_lines": "120,121,122,125,126,127,128,129,130", "method_info": {"method_name": "test_obs_is_image", "method_params": "self", "method_startline": "120", "method_endline": "154"}}, "hunk_2": {"Ismethod": 1, "added_lines": "109,110", "deleted_lines": null, "method_info": {"method_name": "test_invalid_obs_shape", "method_params": "self,obs_dim,action_dim,filter_dims,filter_sizes,strides,padding,hidden_sizes", "method_startline": "109", "method_endline": "110"}}}}, "file_16": {"file_change_type": "MODIFY", "file_Nmethod": 8, "file_old_name": "tests\\garage\\tf\\q_functions\\test_discrete_cnn_q_function.py", "file_new_name": "tests\\garage\\tf\\q_functions\\test_discrete_cnn_q_function.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135", "deleted_lines": "100,101,102,103,104,105,106,107,108,133,134,135", "method_info": {"method_name": "test_obs_not_image", "method_params": "self", "method_startline": "100", "method_endline": "135"}}, "hunk_1": {"Ismethod": 1, "added_lines": "284,285,286,287,288", "deleted_lines": null, "method_info": {"method_name": "test_clone", "method_params": "self,filter_dims,num_filters,strides", "method_startline": "277", "method_endline": "292"}}, "hunk_2": {"Ismethod": 1, "added_lines": "215,216,217,218,219,225,226", "deleted_lines": "208,209", "method_info": {"method_name": "test_get_qval_sym", "method_params": "self,filter_dims,num_filters,strides", "method_startline": "208", "method_endline": "233"}}, "hunk_3": {"Ismethod": 1, "added_lines": "40,41,42,43,44", "deleted_lines": "37,38,39,40,41,42", "method_info": {"method_name": "test_get_action", "method_params": "self,filter_dims,num_filters,strides", "method_startline": "33", "method_endline": "53"}}, "hunk_4": {"Ismethod": 1, "added_lines": "249,250,251,252,253,265,266", "deleted_lines": null, "method_info": {"method_name": "test_is_pickleable", "method_params": "self,filter_dims,num_filters,strides", "method_startline": "242", "method_endline": "268"}}, "hunk_5": {"Ismethod": 1, "added_lines": "65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98", "deleted_lines": "67,68,69,70,71,72", "method_info": {"method_name": "test_obs_is_image", "method_params": "self", "method_startline": "65", "method_endline": "98"}}, "hunk_6": {"Ismethod": 1, "added_lines": "56,57,58,59,60,61,62,63", "deleted_lines": null, "method_info": {"method_name": "test_invalid_obs_shape", "method_params": "self,obs_dim", "method_startline": "56", "method_endline": "63"}}, "hunk_7": {"Ismethod": 1, "added_lines": "151,152,153,154,155", "deleted_lines": "144,145", "method_info": {"method_name": "test_get_action_dueling", "method_params": "self,filter_dims,num_filters,strides", "method_startline": "144", "method_endline": "164"}}}}}}}