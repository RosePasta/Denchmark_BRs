<bug id='383' author='robertnishihara' open_date='2017-03-19T06:43:00Z' closed_time='2017-06-15T07:32:37Z'>
	<summary>Failure in the test of plasma store failure.</summary>
	<description>
The test
&lt;denchmark-code&gt;python test/component_failures_test.py ComponentFailureTest.testPlasmaStoreFailed
&lt;/denchmark-code&gt;

seems to be failing in this log &lt;denchmark-link:https://s3.amazonaws.com/archive.travis-ci.org/jobs/212596022/log.txt&gt;https://s3.amazonaws.com/archive.travis-ci.org/jobs/212596022/log.txt&lt;/denchmark-link&gt;
.
I can reproduce this locally by running this in a loop, e.g.,
&lt;denchmark-code&gt;for i in {1..100}; do python test/component_failures_test.py ComponentFailureTest.testPlasmaStoreFailed; done
&lt;/denchmark-code&gt;

If you do the above, then to find the failed run, search for abort.
The output is printed below. Note that presumably a bunch of the fatal errors are actually expected because we are killing a plasma store which will cause a bunch of other components to exit (ungracefully).
&lt;denchmark-code&gt;testPlasmaStoreFailed (__main__.ComponentFailureTest) ... 16704:M 19 Mar 02:55:52.042 # Server started, Redis version 3.9.102

Waiting for redis server at 127.0.0.1:56657 to respond...

[INFO] (/Users/travis/build/ray-project/ray/src/plasma/plasma_store.cc:900) Allowing the Plasma store to use up to 3.44GB of memory.

[INFO] (/Users/travis/build/ray-project/ray/src/plasma/plasma_store.cc:900) Allowing the Plasma store to use up to 3.44GB of memory.

[INFO] (/Users/travis/build/ray-project/ray/src/plasma/plasma_store.cc:900) Allowing the Plasma store to use up to 3.44GB of memory.

[INFO] (/Users/travis/build/ray-project/ray/src/plasma/plasma_store.cc:900) Allowing the Plasma store to use up to 3.44GB of memory.

[INFO] (/Users/travis/build/ray-project/ray/src/local_scheduler/local_scheduler.cc:238) Started worker with pid 16729

[INFO] (/Users/travis/build/ray-project/ray/src/local_scheduler/local_scheduler.cc:238) Started worker with pid 16730

[INFO] (/Users/travis/build/ray-project/ray/src/local_scheduler/local_scheduler.cc:238) Started worker with pid 16731

[INFO] (/Users/travis/build/ray-project/ray/src/local_scheduler/local_scheduler.cc:238) Started worker with pid 16732

[INFO] (/Users/travis/build/ray-project/ray/src/local_scheduler/local_scheduler.cc:238) Started worker with pid 16733

[INFO] (/Users/travis/build/ray-project/ray/src/local_scheduler/local_scheduler.cc:238) Started worker with pid 16734

[INFO] (/Users/travis/build/ray-project/ray/src/local_scheduler/local_scheduler.cc:238) Started worker with pid 16735

[INFO] (/Users/travis/build/ray-project/ray/src/local_scheduler/local_scheduler.cc:238) Started worker with pid 16737

[INFO] (/Users/travis/build/ray-project/ray/src/local_scheduler/local_scheduler.cc:238) Started worker with pid 16759

[INFO] (/Users/travis/build/ray-project/ray/src/local_scheduler/local_scheduler.cc:238) Started worker with pid 16760

[INFO] (/Users/travis/build/ray-project/ray/src/local_scheduler/local_scheduler.cc:238) Started worker with pid 16761

[INFO] (/Users/travis/build/ray-project/ray/src/local_scheduler/local_scheduler.cc:238) Started worker with pid 16762

[INFO] (/Users/travis/build/ray-project/ray/src/local_scheduler/local_scheduler.cc:238) Started worker with pid 16763

[INFO] (/Users/travis/build/ray-project/ray/src/local_scheduler/local_scheduler.cc:238) Started worker with pid 16764

[INFO] (/Users/travis/build/ray-project/ray/src/local_scheduler/local_scheduler.cc:238) Started worker with pid 16765

[INFO] (/Users/travis/build/ray-project/ray/src/local_scheduler/local_scheduler.cc:238) Started worker with pid 16773

[INFO] (/Users/travis/build/ray-project/ray/src/local_scheduler/local_scheduler.cc:238) Started worker with pid 16794

[INFO] (/Users/travis/build/ray-project/ray/src/local_scheduler/local_scheduler.cc:238) Started worker with pid 16795

[INFO] (/Users/travis/build/ray-project/ray/src/local_scheduler/local_scheduler.cc:238) Started worker with pid 16796

[INFO] (/Users/travis/build/ray-project/ray/src/local_scheduler/local_scheduler.cc:238) Started worker with pid 16797

[INFO] (/Users/travis/build/ray-project/ray/src/local_scheduler/local_scheduler.cc:238) Started worker with pid 16798

[INFO] (/Users/travis/build/ray-project/ray/src/local_scheduler/local_scheduler.cc:238) Started worker with pid 16799

[INFO] (/Users/travis/build/ray-project/ray/src/local_scheduler/local_scheduler.cc:238) Started worker with pid 16800

[INFO] (/Users/travis/build/ray-project/ray/src/local_scheduler/local_scheduler.cc:238) Started worker with pid 16801

[INFO] (/Users/travis/build/ray-project/ray/src/local_scheduler/local_scheduler.cc:238) Started worker with pid 16817

[INFO] (/Users/travis/build/ray-project/ray/src/local_scheduler/local_scheduler.cc:238) Started worker with pid 16818

[INFO] (/Users/travis/build/ray-project/ray/src/local_scheduler/local_scheduler.cc:238) Started worker with pid 16819

[INFO] (/Users/travis/build/ray-project/ray/src/local_scheduler/local_scheduler.cc:238) Started worker with pid 16820

[INFO] (/Users/travis/build/ray-project/ray/src/local_scheduler/local_scheduler.cc:238) Started worker with pid 16821

[INFO] (/Users/travis/build/ray-project/ray/src/local_scheduler/local_scheduler.cc:238) Started worker with pid 16822

[INFO] (/Users/travis/build/ray-project/ray/src/local_scheduler/local_scheduler.cc:238) Started worker with pid 16823

[INFO] (/Users/travis/build/ray-project/ray/src/local_scheduler/local_scheduler.cc:238) Started worker with pid 16824

Not starting the web UI because the web UI requires Python 3.

[FATAL] (/Users/travis/build/ray-project/ray/src/plasma/plasma_manager.cc:1385: errno: No such file or directory) Lost connection to the plasma store, plasma manager is exiting!

0   plasma_manager                      0x0000000106daa76d _Z27process_object_notificationP11aeEventLoopiPvi + 525

1   plasma_manager                      0x0000000106dbda39 aeProcessEvents + 649

2   plasma_manager                      0x0000000106dbdd5b aeMain + 43

3   plasma_manager                      0x0000000106db04bd main + 413

4   libdyld.dylib                       0x00007fff895075ad start + 1

5   ???                                 0x000000000000000b 0x0 + 11

[FATAL] (/Users/travis/build/ray-project/ray/src/plasma/plasma_manager.cc:1385: errno: No such file or directory) Lost connection to the plasma store, plasma manager is exiting!

0   plasma_manager                      0x00000001072fd76d _Z27process_object_notificationP11aeEventLoopiPvi + 525

1   plasma_manager                      0x0000000107310a39 aeProcessEvents + 649

2   plasma_manager                      0x0000000107310d5b aeMain + 43

3   plasma_manager                      0x00000001073034bd main + 413

4   libdyld.dylib                       0x00007fff895075ad start + 1

5   ???                                 0x000000000000000b 0x0 + 11

[FATAL] (/Users/travis/build/ray-project/ray/src/local_scheduler/local_scheduler.cc:482: errno: No such file or directory) Lost connection to the plasma store, local scheduler is exiting!

0   local_scheduler                     0x000000010fb07cf9 _Z27process_plasma_notificationP11aeEventLoopiPvi + 377

1   local_scheduler                     0x000000010fb1e869 aeProcessEvents + 649

2   local_scheduler                     0x000000010fb1eb8b aeMain + 43

3   local_scheduler                     0x000000010fb09dae _Z12start_serverPKcS0_S0_iS0_S0_S0_bPKdS0_i + 398

4   local_scheduler                     0x000000010fb0a17c main + 924

5   libdyld.dylib                       0x00007fff895075ad start + 1

[FATAL] (/Users/travis/build/ray-project/ray/src/local_scheduler/local_scheduler.cc:482: errno: No such file or directory) Lost connection to the plasma store, local scheduler is exiting!

0   local_scheduler                     0x00000001036b3cf9 _Z27process_plasma_notificationP11aeEventLoopiPvi + 377

1   local_scheduler                     0x00000001036ca869 aeProcessEvents + 649

2   local_scheduler                     0x00000001036cab8b aeMain + 43

3   local_scheduler                     0x00000001036b5dae _Z12start_serverPKcS0_S0_iS0_S0_S0_bPKdS0_i + 398

4   local_scheduler                     0x00000001036b617c main + 924

5   libdyld.dylib                       0x00007fff895075ad start + 1

6   ???                                 0x0000000000000013 0x0 + 19

[INFO] (/Users/travis/build/ray-project/ray/src/local_scheduler/local_scheduler.cc:238) Started worker with pid 16957

[INFO] (/Users/travis/build/ray-project/ray/src/local_scheduler/local_scheduler.cc:238) Started worker with pid 16964

[FATAL] (/Users/travis/build/ray-project/ray/src/plasma/plasma_client.cc:407: errno: Broken pipe) Check failure: plasma_send_ReleaseRequest(conn-&gt;store_conn, conn-&gt;builder, object_id) &gt;= 0 



0   plasma_manager                      0x000000010c24f57b _Z22plasma_perform_releaseP16PlasmaConnection8UniqueID + 1595

1   plasma_manager                      0x000000010c25056d _Z17plasma_disconnectP16PlasmaConnection + 125

2   plasma_manager                      0x000000010c23990d _Z23PlasmaManagerState_freeP18PlasmaManagerState + 381

3   plasma_manager                      0x000000010c23970b _Z27process_object_notificationP11aeEventLoopiPvi + 427

4   plasma_manager                      0x000000010c24ca39 aeProcessEvents + 649

5   plasma_manager                      0x000000010c24cd5b aeMain + 43

6   plasma_manager                      0x000000010c23f4bd main + 413

7   libdyld.dylib                       0x00007fff895075ad start + 1

8   ???                                 0x000000000000000b 0x0 + 11

[INFO] [FATAL] (/Users/travis/build/ray-project/ray/src/plasma/plasma_protocol.cc:22: errno: None) Check failure: type == message_type 

type = 0, message_type = 2

0   libnumbuf.so                        0x000000010d6625b8 _Z14plasma_receiveix + 216

1   libnumbuf.so                        0x000000010d65f92a _Z13plasma_createP16PlasmaConnection8UniqueIDxPhxPS2_ + 122

2   libnumbuf.so                        0x000000010d62c1bb _Z10store_listP7_objectS0_ + 539

3   Python                              0x000000010c32afed PyEval_EvalFrameEx + 27113

4   Python                              0x000000010c32440e PyEval_EvalCodeEx + 1617

5   Python                              0x000000010c32ec9e fast_function + 117

6   Python                              0x000000010c32af09 PyEval_EvalFrameEx + 26885

7   Python                              0x000000010c32440e PyEval_EvalCodeEx + 1617

8   Python                              0x000000010c32ec9e fast_function + 117

9   Python                              0x000000010c32af09 PyEval_EvalFrameEx + 26885

10  Python                              0x000000010c32440e PyEval_EvalCodeEx + 1617

11  Python                              0x000000010c32ec9e fast_function + 117

12  Python                              0x000000010c32af09 PyEval_EvalFrameEx + 26885

13  Python                              0x000000010c32440e PyEval_EvalCodeEx + 1617

14  Python                              0x000000010c32ec9e fast_function + 117

15  Python                              0x000000010c32af09 PyEval_EvalFrameEx + 26885

16  Python                              0x000000010c32440e PyEval_EvalCodeEx + 1617

17  Python                              0x000000010c323db7 PyEval_EvalCode + 48

18  Python                              0x000000010c34783c run_mod + 53

19  Python                              0x000000010c3478df PyRun_FileExFlags + 133

20  Python                              0x000000010c347430 PyRun_SimpleFileExFlags + 702

21  Python                              0x000000010c358d9e Py_Main + 3094

22  libdyld.dylib                       0x00007fff895075ad start + 1

[INFO] (/Users/travis/build/ray-project/ray/src/local_scheduler/local_scheduler.cc:122) Killed worker with pid 16823

(/Users/travis/build/ray-project/ray/src/plasma/plasma_manager.cc:1539) Disconnecting client on fd 26

[INFO] (/Users/travis/build/ray-project/ray/src/local_scheduler/local_scheduler.cc:122) Killed worker with pid 16818

[INFO] (/Users/travis/build/ray-project/ray/src/local_scheduler/local_scheduler.cc:122) Killed worker with pid 16820

[INFO] (/Users/travis/build/ray-project/ray/src/local_scheduler/local_scheduler.cc:122) Killed worker with pid 16819

[INFO] (/Users/travis/build/ray-project/ray/src/local_scheduler/local_scheduler.cc:122) Killed worker with pid 16821

[INFO] (/Users/travis/build/ray-project/ray/src/local_scheduler/local_scheduler.cc:122) Killed worker with pid 16824

[INFO] (/Users/travis/build/ray-project/ray/src/local_scheduler/local_scheduler.cc:122) Killed worker with pid 16822

[INFO] (/Users/travis/build/ray-project/ray/src/local_scheduler/local_scheduler.cc:122) Killed worker with pid 16817

[INFO] (/Users/travis/build/ray-project/ray/src/local_scheduler/local_scheduler.cc:122) Killed worker with pid 16964

[FATAL] (/Users/travis/build/ray-project/ray/src/local_scheduler/local_scheduler.cc:482: errno: Bad file descriptor) Lost connection to the plasma store, local scheduler is exiting!

0   local_scheduler                     0x000000010ec46cf9 _Z27process_plasma_notificationP11aeEventLoopiPvi + 377

1   local_scheduler                     0x000000010ec5d869 aeProcessEvents + 649

2   local_scheduler                     0x000000010ec5db8b aeMain + 43

3   local_scheduler                     0x000000010ec48dae _Z12start_serverPKcS0_S0_iS0_S0_S0_bPKdS0_i + 398

4   local_scheduler                     0x000000010ec4917c main + 924

5   libdyld.dylib                       0x00007fff895075ad start + 1

6   ???                                 0x0000000000000013 0x0 + 19

[FATAL] (/Users/travis/build/ray-project/ray/src/plasma/plasma.cc:21: errno: Protocol wrong type for socket) Failed to write message to client on fd 27.

0   plasma_manager                      0x0000000109269fc9 _Z15warn_if_sigpipeii + 233

1   plasma_manager                      0x0000000109252de3 _Z19send_queued_requestP11aeEventLoopiPvi + 147

2   plasma_manager                      0x0000000109265a69 aeProcessEvents + 697

3   plasma_manager                      0x0000000109265d5b aeMain + 43

4   plasma_manager                      0x00000001092584bd main + 413

5   libdyld.dylib                       0x00007fff895075ad start + 1

6   ???                                 0x000000000000000b 0x0 + 11

[INFO] (/Users/travis/build/ray-project/ray/src/plasma/plasma_store.cc:824) Disconnecting client on fd 14

[FATAL] (/Users/travis/build/ray-project/ray/src/plasma/plasma_client.cc:639: errno: Broken pipe) Check failure: plasma_send_FetchRequest(conn-&gt;manager_conn, conn-&gt;builder, object_ids, num_object_ids) &gt;= 0 



0   local_scheduler                     0x0000000108cd0768 _Z12plasma_fetchP16PlasmaConnectioniP8UniqueID + 328

1   local_scheduler                     0x0000000108cbb933 _Z28fetch_object_timeout_handlerP11aeEventLoopxPv + 163

2   local_scheduler                     0x0000000108ccca15 aeProcessEvents + 1077

3   local_scheduler                     0x0000000108cccb8b aeMain + 43

4   local_scheduler                     0x0000000108cb7dae _Z12start_serverPKcS0_S0_iS0_S0_S0_bPKdS0_i + 398

5   local_scheduler                     0x0000000108cb817c main + 924

6   libdyld.dylib                       0x00007fff895075ad start + 1

[FATAL] (/Users/travis/build/ray-project/ray/src/local_scheduler/local_scheduler_client.cc:69: errno: None) Check failure: type == MessageType_ExecuteTask 



0   liblocal_scheduler_library.so       0x000000010f38338a _Z24local_scheduler_get_taskP24LocalSchedulerConnectionPx + 218

1   liblocal_scheduler_library.so       0x000000010f381213 _ZL31PyLocalSchedulerClient_get_taskP7_object + 35

2   Python                              0x000000010df0d00a PyEval_EvalFrameEx + 27142

3   Python                              0x000000010df0640e PyEval_EvalCodeEx + 1617

4   Python                              0x000000010df10c9e fast_function + 117

5   Python                              0x000000010df0cf09 PyEval_EvalFrameEx + 26885

6   Python                              0x000000010df0640e PyEval_EvalCodeEx + 1617

7   Python                              0x000000010df05db7 PyEval_EvalCode + 48

8   Python                              0x000000010df2983c run_mod + 53

9   Python                              0x000000010df298df PyRun_FileExFlags + 133

10  Python                              0x000000010df29430 PyRun_SimpleFileExFlags + 702

11  Python                              0x000000010df3ad9e Py_Main + 3094

12  libdyld.dylib                       0x00007fff895075ad start + 1

13  ???                                 0x0000000000000009 0x0 + 9

[INFO] (/Users/travis/build/ray-project/ray/src/plasma/plasma_store.cc:824) Disconnecting client on fd 28

[FATAL] (/Users/travis/build/ray-project/ray/src/local_scheduler/local_scheduler_client.cc:69: errno: None) Check failure: type == MessageType_ExecuteTask 



0   liblocal_scheduler_library.so       0x000000010954538a _Z24local_scheduler_get_taskP24LocalSchedulerConnectionPx + 218

1   liblocal_scheduler_library.so       0x0000000109543213 _ZL31PyLocalSchedulerClient_get_taskP7_object + 35

2   Python                              0x00000001080cd00a PyEval_EvalFrameEx + 27142

3   Python                              0x00000001080c640e PyEval_EvalCodeEx + 1617

4   Python                              0x00000001080d0c9e fast_function + 117

5   Python                              0x00000001080ccf09 PyEval_EvalFrameEx + 26885

6   Python                              0x00000001080c640e PyEval_EvalCodeEx + 1617

7   Python                              0x00000001080c5db7 PyEval_EvalCode + 48

8   Python                              0x00000001080e983c run_mod + 53

9   Python                              0x00000001080e98df PyRun_FileExFlags + 133

10  Python                              0x00000001080e9430 PyRun_SimpleFileExFlags + 702

11  Python                              0x00000001080fad9e Py_Main + 3094

12  libdyld.dylib                       0x00007fff895075ad start + 1

13  ???                                 0x0000000000000009 0x0 + 9

[FATAL] (/Users/travis/build/ray-project/ray/src/local_scheduler/local_scheduler_client.cc:69: errno: None) Check failure: type == MessageType_ExecuteTask 



0   liblocal_scheduler_library.so       0x0000000103ab638a _Z24local_scheduler_get_taskP24LocalSchedulerConnectionPx + 218

1   liblocal_scheduler_library.so       0x0000000103ab4213 _ZL31PyLocalSchedulerClient_get_taskP7_object + 35

2   Python                              0x000000010263e00a PyEval_EvalFrameEx + 27142

3   Python                              0x000000010263740e PyEval_EvalCodeEx + 1617

4   Python      [INFO] (/Users/travis/build/ray-project/ray/src/plasma/plasma_store.cc:824) Disconnecting client on fd 27

                        0x0000000102641c9e fast_function + 117

5   Python                              0x000000010263df09 PyEval_EvalFrameEx + 26885

6   Python                              0x000000010263740e PyEval_EvalCodeEx + 1617

7   Python                              0x0000000102636db7 PyEval_EvalCode + 48

8   Python                              0x000000010265a83c run_mod + 53

9   Python                              0x000000010265a8df PyRun_FileExFlags + 133

10  Python                              0x000000010265a430 PyRun_SimpleFileExFlags + 702

11  Python                              0x000000010266bd9e Py_Main + 3094

12  libdyld.dylib                       0x00007fff895075ad start + 1

13  ???                                 0x0000000000000009 0x0 + 9

[FATAL] (/Users/travis/build/ray-project/ray/src/local_scheduler/local_scheduler_client.cc:69: errno: None) Check failure: type == MessageTy[INFO] (/Users/travis/build/ray-project/ray/src/plasma/plasma_store.cc:824) Disconnecting client on fd 26

pe_ExecuteTask 



0   liblocal_scheduler_library.so       0x000000010adf338a _Z24local_scheduler_get_taskP24LocalSchedulerConnectionPx + 218

1   liblocal_scheduler_library.so       0x000000010adf1213 _ZL31PyLocalSchedulerClient_get_taskP7_object + 35

2   Python                              0x000000010997800a PyEval_EvalFrameEx + 27142

3   Python                              0x000000010997140e PyEval_EvalCodeEx + 1617

4   Python                              0x000000010997bc9e fast_function + 117

5   Python                              0x0000000109977f09 PyEval_EvalFrameEx + 26885

6   Python                              0x000000010997140e PyEval_EvalCodeEx + 1617

7   Python                              0x0000000109970db7 PyEval_EvalCode + 48

8   Python                              0x000000010999483c run_mod + 53

9   Python                              0x00000001099948df PyRun_FileExFlags + 133

10  Python                              0x0000000109994430 PyRun_SimpleFileExFlags + 702

11  Python                              0x00000001099a5d9e Py_Main + 3094

12  libdyld.dylib                       0x00007fff895075ad start + 1

13  ???                                 0x0000000000000009 0x0 + 9

[FATAL] (/Users/travis/build/ray-project/ray/src/local_scheduler/local_scheduler_client.cc:69: errno: None) Check failure: type == MessageType_ExecuteTask 



0   liblocal_scheduler_library.so       0x000000010400238a _Z24local_scheduler_get_taskP24LocalSchedulerConnectionPx + 218

1   liblocal_scheduler_library.so       0x0000000104000213 _ZL31PyLocalSchedulerClient_get_taskP7_object + 35

2   Python                              0x0000000102b8d00a PyEval_EvalFrameEx + 27142

3   Python                              0x0000000102b8640e PyEval_EvalCodeEx + 1617

4   Python                              0x0000000102b90c9e fast_function + 117

5   Python                              0x0000000102b8cf09 PyEval_EvalFrameE[INFO] (/Users/travis/build/ray-project/ray/src/plasma/plasma_store.cc:824) Disconnecting client on fd 25

x + 26885

6   Python                              0x0000000102b8640e PyEval_EvalCodeEx + 1617

7   Python                              0x0000000102b85db7 PyEval_EvalCode + 48

8   Python                              0x0000000102ba983c run_mod + 53

9   Python                              0x0000000102ba98df PyRun_FileExFlags + 133

10  Python                              0x0000000102ba9430 PyRun_SimpleFileExFlags + 702

11  Python                              0x0000000102bbad9e Py_Main + 3094

12  libdyld.dylib                       0x00007fff895075ad start + 1

13  ???                                 0x0000000000000009 0x0 + 9

[FATAL] (/Users/travis/build/ray-project/ray/src/local_scheduler/local_scheduler_client.cc:69: errno: None) Check failure: type == MessageType_ExecuteTask 



[FATAL] (/Users/travis/build/ray-project/ray/src/local_scheduler/local_scheduler_client.cc:69: errno: None) Check failure0[INFO] (/Users/travis/build/ray-project/ray/src/plasma/plasma_store.cc:824) Disconnecting client on fd 24

: type == MessageType_ExecuteTask 



0   liblocal_scheduler_library.so       0x000000010678b38a _Z24local_scheduler_get_taskP24LocalSchedulerConnectionPx + 218

1   liblocal_scheduler_library.so       0x0000000106789213 _ZL31PyLocalSchedulerClient_get_taskP7_object + 35

[FATAL] (/Users/travis/build/ray-project/ray/src/local_scheduler/local_scheduler_client.cc:69: errno: None) Check failure: type == MessageType_ExecuteTask 



2   Python                              0x000000010531600a PyEval_EvalFrameEx + 27142

3   Python                              0x000000010530f40e PyEval_EvalCodeEx + 1617

0   liblocal_scheduler_library.so       0x0000000110a5438a _Z24local_scheduler_get_taskP24LocalSchedulerConnectionPx + 218

1   liblocal_scheduler_library.so       0x0000000110a52213 _ZL31PyLocalSchedulerClient_get_taskP7_object + 35

4   Python                              0x0000000105319c9e fast_function + 1172

5   Python                              0x0000000105315f09 PyEval_EvalFrameEx + 26885

6   Python                              0x000000010530f40e PyEval_EvalCodeEx + 1617

7   Python                              0x000000010530edb7 PyEval_EvalCode + 48

8   Python                              0x000000010533283c run_mod + 53

9   Python                              0x00000001053328df PyRun_FileExFlags + 133

10  Python                              0x0000000105332430 PyRun_SimpleFileExFlags + 702

11  Python                              0x0000000105343d9e Py_Main + 3094

12  libdyld.dylib                       0x00007fff895075ad start + 1

13  ???                                 0x0000000000000009 0x0 + 9

[FATAL] (/Users/travis/build/ray-project/ray/src/local_scheduler/local_scheduler_client.cc:69: errno: None) Check failure: type == MessageType_ExecuteTask 



0   liblocal_scheduler_library.so       0x000000010752038a _Z24local_scheduler_get_taskP24LocalSchedulerConnectionPx + 218

1   liblocal_scheduler_lib[INFO] (/Users/travis/build/ray-project/ray/src/plasma/plasma_store.cc:824) Disconnecting client on fd 21

rary.so       0x000000010751e213 _ZL31PyLocalSchedulerClient_get_taskP7_object + 35

2   Python                              0x00000001060ab00a PyEval_EvalFrameEx + 27142

3   Python                              0x00000001060a440e PyEval_EvalCodeEx + 1617

4   Python                              0x00000001060aec9e fast_function + 117

5   Python                              0x00000001060aaf09 PyEval_EvalFrameEx + 26885

6   Python                              0x00000001060a440e PyEval_EvalCodeEx + 1617

7   Python                              0x00000001060a3db7 PyEval_EvalCode + 48

8   Python                              0x00000001060c783c run_mod + 53

9   Python                              0x00000001060c78df PyRun_FileExFlags + 133

10  Python                              0x00000001060c7430 PyRun_SimpleFileExFlags + 702

11  Python                              0x00000001060d8d9e Py_Main + 3094

12  libdyld.dylib                       0x00007fff895075ad start + 1

13  ???                                 0x0000000000000009 0x0 + 9

   liblocal_scheduler_library.so       0x000000010804838a _Z24local_scheduler_get_taskP24LocalSchedulerConnectionPx + 218

1   liblocal_scheduler_library.so       0x0000000108046213 _ZL31PyLocalSchedulerClient_get_taskP7_object + 35

2   Python                              0x0000000106bcd00a PyEval_EvalFrameEx + 27142

3   Python                              0x0000000106bc640e PyEval_EvalCodeEx + 1617

4   Python                              0x0000000106bd0c9e fast_function + 117

5   Python                              0x0000000106bccf09 PyEval_EvalFrameEx + 26885

6   Python                              0x0000000106bc640e PyEval_EvalCodeEx + 1617

7   Python                              0x0000000106bc5db7 PyEval_EvalCode + 48

8   Python                              0x0000000106be983c run_mod + 53

9   Python                              0x0000000106be98df PyRun_FileExFlags + [INFO] (/Users/travis/build/ray-project/ray/src/plasma/plasma_store.cc:824) Disconnecting client on fd 19

133

10  Python                              0x0000000106be9430 PyRun_SimpleFileExFlags + 702

11  Python                              0x0000000106bfad9e Py_Main + 3094

12  libdyld.dylib                       0x00007fff895075ad start + 1

13  ???                                 0x0000000000000009 0x0 + 9

   Python                              0x000000010f5dd00a PyEval_EvalFrameEx + 27142

3   Python                              0x000000010f5d640e PyEval_EvalCodeEx + 1617

4   Python                              0x000000010f5e0c9e fast_function + 117

5   Python                              0x000000010f5dcf09 PyEval_EvalFrameEx + 26885

6   Python                              0x000000010f5d640e PyEval_EvalCodeEx + 1617

7   Python                              0x000000010f5d5db7 PyEval_EvalCode + 48

8   Python                              0x000000010f5f983c run_mod + 53

9   Python                              0x000000010f5f98df PyRun_FileExFlags + 133

10  Python                              0x000000010f5f9[INFO] (/Users/travis/build/ray-project/ray/src/plasma/plasma_store.cc:824) Disconnecting client on fd 22

430 PyRun_SimpleFileExFlags + 702

11  Python                              0x000000010f60ad9e Py_Main + 3094

12  libdyld.dylib                       0x00007fff895075ad start + 1

13  ???                                 0x0000000000000009 0x0 + 9

[INFO] (/Users/travis/build/ray-project/ray/src/plasma/plasma_store.cc:824) Disconnecting client on fd 20

[INFO] (/Users/travis/build/ray-project/ray/src/plasma/plasma_store.cc:824) Disconnecting client on fd 16

[FATAL] (/Users/travis/build/ray-project/ray/src/plasma/plasma_client.cc:639: errno: Broken pipe) Check failure: plasma_send_FetchRequest(conn-&gt;manager_conn, conn-&gt;builder, object_ids, num_object_ids) &gt;= 0 



0   libplasma.so                        0x000000010dde6518 _Z12plasma_fetchP16PlasmaConnectioniP8UniqueID + 328

1   libplasma.so                        0x000000010ddd9832 _Z14PyPlasma_fetchP7_objectS0_ + 178

2   Python                              0x000000010c98efed PyEval_EvalFrameEx + 27113

3   Python                              0x000000010c98840e PyEval_EvalCodeEx + 1617

4   Python                              0x000000010c992c9e fast_function + 117

5   Python                              0x000000010c98ef09 PyEval_EvalFrameEx + 26885

6   Python                              0x000000010c98840e PyEval_EvalCodeEx + 1617

7   Python                              0x000000010c992c9e fast_function + 117

8   Python                              0x000000010c98ef09 PyEval_EvalFrameEx + 26885

9   Python                              0x000000010c98840e PyEval_EvalCodeEx + 1617

10  Python                              0x000000010c992c9e fast_function + 117

11  Python                              0x000000010c98ef09 PyEval_EvalFrameEx + 26885

12  Python                              0x000000010c98840e PyEval_EvalCodeEx + 1617

13  Python                              0x000000010c992c9e fast_function + 117

14  Python                              0x000000010c98ef09 PyEval_EvalFrameEx + 26885

15  Python                              0x000000010c98840e PyEval_EvalCodeEx + 1617

16  Python                              0x000000010c992c9e fast_function + 117

17  Python                              0x000000010c98ef09 PyEval_EvalFrameEx + 26885

18  Python                              0x000000010c98840e PyEval_EvalCodeEx + 1617

19  Python                              0x000000010c92db87 function_call + 350

20  Python                              0x000000010c90f9b4 PyObject_Call + 99

21  Python                              0x000000010c98f697 PyEval_EvalFrameEx + 28819

22  Python                              0x000000010c98840e PyEval_EvalCodeEx + 1617

23  Python                              0x000000010c92db87 function_call + 350

24  Python                              0x000000010c90f9b4 PyObject_Call + 99

25  Python                              0x000000010c91a680 instancemethod_call + 173

26  Python                              0x000000010c90f9b4 PyObject_Call + 99

27  Python                              0x000000010c95605d slot_tp_call + 61

28  Python                              0x000000010c90f9b4 PyObject_Call + 99

29  Python                              0x000000010c98ee30 PyEval_EvalFrameEx + 26668

30  Python                              0x000000010c98840e PyEval_EvalCodeEx + 1617

31  Python                              0x000000010c92db87 function_call + 350

32  Python                              0x000000010c90f9b4 PyObject_Call + 99

33  Python                              0x000000010c98f697 PyEval_EvalFrameEx + 28819

34  Python                              0x000000010c98840e PyEval_EvalCodeEx + 1617

35  Python                              0x000000010c92db87 function_call + 350

36  Python                              0x000000010c90f9b4 PyObject_Call + 99

37  Python                              0x000000010c91a680 instancemethod_call + 173

38  Python                              0x000000010c90f9b4 PyObject_Call + 99

39  Python                              0x000000010c95605d slot_tp_call + 61

40  Python                              0x000000010c90f9b4 PyObject_Call + 99

41  Python                              0x000000010c98ee30 PyEval_EvalFrameEx + 26668

42  Python                              0x000000010c98840e PyEval_EvalCodeEx + 1617

43  Python                              0x000000010c92db87 function_call + 350

44  Python                              0x000000010c90f9b4 PyObject_Call + 99

45  Python                              0x000000010c98f697 PyEval_EvalFrameEx + 28819

46  Python                              0x000000010c98840e PyEval_EvalCodeEx + 1617

47  Python                              0x000000010c92db87 function_call + 350

48  Python                              0x000000010c90f9b4 PyObject_Call + 99

49  Python                              0x000000010c91a680 instancemethod_call + 173

50  Python                              0x000000010c90f9b4 PyObject_Call + 99

51  Python                              0x000000010c95605d slot_tp_call + 61

52  Python                              0x000000010c90f9b4 PyObject_Call + 99

53  Python                              0x000000010c98ee30 PyEval_EvalFrameEx + 26668

54  Python                              0x000000010c992d31 fast_function + 264

55  Python                              0x000000010c98ef09 PyEval_EvalFrameEx + 26885

56  Python                              0x000000010c992d31 fast_function + 264

57  Python                              0x000000010c98ef09 PyEval_EvalFrameEx + 26885

58  Python                              0x000000010c98840e PyEval_EvalCodeEx + 1617

59  Python                              0x000000010c92db87 function_call + 350

60  Python                              0x000000010c90f9b4 PyObject_Call + 99

61  Python                              0x000000010c91a680 instancemethod_call + 173

62  Python                              0x000000010c90f9b4 PyObject_Call + 99

63  Python                              0x000000010c956aa2 slot_tp_init + 64

64  Python                              0x000000010c9522b3 type_call + 182

65  Python                              0x000000010c90f9b4 PyObject_Call + 99

66  Python                              0x000000010c98ee30 PyEval_EvalFrameEx + 26668

67  Python                              0x000000010c98840e PyEval_EvalCodeEx + 1617

68  Python                              0x000000010c987db7 PyEval_EvalCode + 48

69  Python                              0x000000010c9ab83c run_mod + 53

70  Python                              0x000000010c9ab8df PyRun_FileExFlags + 133

71  Python                              0x000000010c9ab430 PyRun_SimpleFileExFlags + 702

72  Python                              0x000000010c9bcd9e Py_Main + 3094

73  libdyld.dylib                       0x00007fff895075ad start + 1

74  ???                                 0x0000000000000002 0x0 + 2

[INFO] (/Users/travis/build/ray-project/ray/src/plasma/plasma_store.cc:824) Disconnecting client on fd 18

/Users/travis/build.sh: line 62: 15929 Abort trap: 6           python test/component_failures_test.py



travis_time:end:08059498:start=1489892105990250000,finish=1489892159579877000,duration=53589627000
�[0K

�[31;1mThe command "python test/component_failures_test.py" exited with 134.�[0m
&lt;/denchmark-code&gt;

FYI &lt;denchmark-link:https://github.com/stephanie-wang&gt;@stephanie-wang&lt;/denchmark-link&gt;

	</description>
	<comments>
		<comment id='1' author='robertnishihara' date='2017-05-16T21:13:59Z'>
		I haven't seen this in a long time, so maybe it got fixed. However, I'm not sure which PR fixed it.
		</comment>
		<comment id='2' author='robertnishihara' date='2017-05-19T23:20:33Z'>
		Reopening because I just saw this test hang. &lt;denchmark-link:https://s3.amazonaws.com/archive.travis-ci.org/jobs/234137596/log.txt?X-Amz-Expires=30&amp;X-Amz-Date=20170519T231351Z&amp;X-Amz-Algorithm=AWS4-HMAC-SHA256&amp;X-Amz-Credential=AKIAJRYRXRSVGNKPKO5A/20170519/us-east-1/s3/aws4_request&amp;X-Amz-SignedHeaders=host&amp;X-Amz-Signature=18a7ea6eb4b570144824525d01689296495b6fe7bfb68b2f76fbc739f5f475fc&gt;https://s3.amazonaws.com/archive.travis-ci.org/jobs/234137596/log.txt?X-Amz-Expires=30&amp;X-Amz-Date=20170519T231351Z&amp;X-Amz-Algorithm=AWS4-HMAC-SHA256&amp;X-Amz-Credential=AKIAJRYRXRSVGNKPKO5A/20170519/us-east-1/s3/aws4_request&amp;X-Amz-SignedHeaders=host&amp;X-Amz-Signature=18a7ea6eb4b570144824525d01689296495b6fe7bfb68b2f76fbc739f5f475fc&lt;/denchmark-link&gt;
 from &lt;denchmark-link:https://travis-ci.org/ray-project/ray/builds/234137590?utm_source=github_status&amp;utm_medium=notification&gt;https://travis-ci.org/ray-project/ray/builds/234137590?utm_source=github_status&amp;utm_medium=notification&lt;/denchmark-link&gt;

&lt;denchmark-code&gt;testPlasmaStoreFailed (__main__.ComponentFailureTest) ... Waiting for redis server at 127.0.0.1:16180 to respond...

Failed to connect to the redis server, retrying.

Waiting for redis server at 127.0.0.1:16180 to respond...

Waiting for redis server at 127.0.0.1:41845 to respond...

/Users/travis/.local/lib/python3.6/site-packages/ray-0.0.1-py3.6.egg/ray/services.py:917: ResourceWarning: unclosed file &lt;_io.TextIOWrapper name='/tmp/raylogs/plasma_store_0-071462.out' mode='a' encoding='UTF-8'&gt;

  "plasma_store_{}".format(i), redirect_output)

/Users/travis/.local/lib/python3.6/site-packages/ray-0.0.1-py3.6.egg/ray/services.py:917: ResourceWarning: unclosed file &lt;_io.TextIOWrapper name='/tmp/raylogs/plasma_store_0-071462.err' mode='a' encoding='UTF-8'&gt;

  "plasma_store_{}".format(i), redirect_output)

/Users/travis/.local/lib/python3.6/site-packages/ray-0.0.1-py3.6.egg/ray/services.py:919: ResourceWarning: unclosed file &lt;_io.TextIOWrapper name='/tmp/raylogs/plasma_manager_0-006263.out' mode='a' encoding='UTF-8'&gt;

  "plasma_manager_{}".format(i), redirect_output)

/Users/travis/.local/lib/python3.6/site-packages/ray-0.0.1-py3.6.egg/ray/services.py:919: ResourceWarning: unclosed file &lt;_io.TextIOWrapper name='/tmp/raylogs/plasma_manager_0-006263.err' mode='a' encoding='UTF-8'&gt;

  "plasma_manager_{}".format(i), redirect_output)

/Users/travis/.local/lib/python3.6/site-packages/ray-0.0.1-py3.6.egg/ray/services.py:917: ResourceWarning: unclosed file &lt;_io.TextIOWrapper name='/tmp/raylogs/plasma_store_1-015478.out' mode='a' encoding='UTF-8'&gt;

  "plasma_store_{}".format(i), redirect_output)

/Users/travis/.local/lib/python3.6/site-packages/ray-0.0.1-py3.6.egg/ray/services.py:917: ResourceWarning: unclosed file &lt;_io.TextIOWrapper name='/tmp/raylogs/plasma_store_1-015478.err' mode='a' encoding='UTF-8'&gt;

  "plasma_store_{}".format(i), redirect_output)

/Users/travis/.local/lib/python3.6/site-packages/ray-0.0.1-py3.6.egg/ray/services.py:919: ResourceWarning: unclosed file &lt;_io.TextIOWrapper name='/tmp/raylogs/plasma_manager_1-052060.out' mode='a' encoding='UTF-8'&gt;

  "plasma_manager_{}".format(i), redirect_output)

/Users/travis/.local/lib/python3.6/site-packages/ray-0.0.1-py3.6.egg/ray/services.py:919: ResourceWarning: unclosed file &lt;_io.TextIOWrapper name='/tmp/raylogs/plasma_manager_1-052060.err' mode='a' encoding='UTF-8'&gt;

  "plasma_manager_{}".format(i), redirect_output)

/Users/travis/.local/lib/python3.6/site-packages/ray-0.0.1-py3.6.egg/ray/services.py:917: ResourceWarning: unclosed file &lt;_io.TextIOWrapper name='/tmp/raylogs/plasma_store_2-055242.out' mode='a' encoding='UTF-8'&gt;

  "plasma_store_{}".format(i), redirect_output)

/Users/travis/.local/lib/python3.6/site-packages/ray-0.0.1-py3.6.egg/ray/services.py:917: ResourceWarning: unclosed file &lt;_io.TextIOWrapper name='/tmp/raylogs/plasma_store_2-055242.err' mode='a' encoding='UTF-8'&gt;

  "plasma_store_{}".format(i), redirect_output)

/Users/travis/.local/lib/python3.6/site-packages/ray-0.0.1-py3.6.egg/ray/services.py:919: ResourceWarning: unclosed file &lt;_io.TextIOWrapper name='/tmp/raylogs/plasma_manager_2-000025.out' mode='a' encoding='UTF-8'&gt;

  "plasma_manager_{}".format(i), redirect_output)

/Users/travis/.local/lib/python3.6/site-packages/ray-0.0.1-py3.6.egg/ray/services.py:919: ResourceWarning: unclosed file &lt;_io.TextIOWrapper name='/tmp/raylogs/plasma_manager_2-000025.err' mode='a' encoding='UTF-8'&gt;

  "plasma_manager_{}".format(i), redirect_output)

Starting local scheduler with 8 CPUs and 0 GPUs.

/Users/travis/.local/lib/python3.6/site-packages/ray-0.0.1-py3.6.egg/ray/services.py:948: ResourceWarning: unclosed file &lt;_io.TextIOWrapper name='/tmp/raylogs/local_scheduler_0-063101.out' mode='a' encoding='UTF-8'&gt;

  "local_scheduler_{}".format(i), redirect_output)

/Users/travis/.local/lib/python3.6/site-packages/ray-0.0.1-py3.6.egg/ray/services.py:948: ResourceWarning: unclosed file &lt;_io.TextIOWrapper name='/tmp/raylogs/local_scheduler_0-063101.err' mode='a' encoding='UTF-8'&gt;

  "local_scheduler_{}".format(i), redirect_output)

Starting local scheduler with 8 CPUs and 0 GPUs.

/Users/travis/.local/lib/python3.6/site-packages/ray-0.0.1-py3.6.egg/ray/services.py:948: ResourceWarning: unclosed file &lt;_io.TextIOWrapper name='/tmp/raylogs/local_scheduler_1-093554.out' mode='a' encoding='UTF-8'&gt;

  "local_scheduler_{}".format(i), redirect_output)

/Users/travis/.local/lib/python3.6/site-packages/ray-0.0.1-py3.6.egg/ray/services.py:948: ResourceWarning: unclosed file &lt;_io.TextIOWrapper name='/tmp/raylogs/local_scheduler_1-093554.err' mode='a' encoding='UTF-8'&gt;

  "local_scheduler_{}".format(i), redirect_output)

Starting local scheduler with 8 CPUs and 0 GPUs.

/Users/travis/.local/lib/python3.6/site-packages/ray-0.0.1-py3.6.egg/ray/services.py:948: ResourceWarning: unclosed file &lt;_io.TextIOWrapper name='/tmp/raylogs/local_scheduler_2-059864.out' mode='a' encoding='UTF-8'&gt;

  "local_scheduler_{}".format(i), redirect_output)

/Users/travis/.local/lib/python3.6/site-packages/ray-0.0.1-py3.6.egg/ray/services.py:948: ResourceWarning: unclosed file &lt;_io.TextIOWrapper name='/tmp/raylogs/local_scheduler_2-059864.err' mode='a' encoding='UTF-8'&gt;

  "local_scheduler_{}".format(i), redirect_output)

Starting local scheduler with 8 CPUs and 0 GPUs.

/Users/travis/miniconda/lib/python3.6/site-packages/cloudpickle/cloudpickle.py:180: ResourceWarning: unclosed file &lt;_io.TextIOWrapper name='/Users/travis/miniconda/lib/python3.6/site-packages/cloudpickle/cloudpickle.py' mode='r' encoding='utf-8'&gt;

  _find_module(mod_name)

/Users/travis/miniconda/lib/python3.6/site-packages/cloudpickle/cloudpickle.py:180: ResourceWarning: unclosed file &lt;_io.TextIOWrapper name='/Users/travis/.local/lib/python3.6/site-packages/ray-0.0.1-py3.6.egg/ray/serialization.py' mode='r' encoding='utf-8'&gt;

  _find_module(mod_name)



No output has been received in the last 10m0s, this potentially indicates a stalled build or something wrong with the build itself.
Check the details on how to adjust your build configuration on: https://docs.travis-ci.com/user/common-build-problems/#Build-times-out-because-no-output-was-received

The build has been terminated
&lt;/denchmark-code&gt;

		</comment>
		<comment id='3' author='robertnishihara' date='2017-06-02T23:37:46Z'>
		The following test failure has been very common. See &lt;denchmark-link:https://api.travis-ci.org/jobs/238946387/log.txt?deansi=true&gt;https://api.travis-ci.org/jobs/238946387/log.txt?deansi=true&lt;/denchmark-link&gt;
 for example.
&lt;denchmark-code&gt;======================================================================
FAIL: testPlasmaStoreFailed (__main__.ComponentFailureTest)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "test/component_failures_test.py", line 200, in testPlasmaStoreFailed
    False)
  File "test/component_failures_test.py", line 166, in check_components_alive
    self.assertTrue(not component.poll() is None)
AssertionError: False is not true

----------------------------------------------------------------------
Ran 9 tests in 183.620s
&lt;/denchmark-code&gt;

		</comment>
		<comment id='4' author='robertnishihara' date='2017-06-15T07:32:37Z'>
		Closing because the error in the previous comment (this one &lt;denchmark-link:https://github.com/ray-project/ray/issues/383#issuecomment-305932218&gt;#383 (comment)&lt;/denchmark-link&gt;
) should be addressed by &lt;denchmark-link:https://github.com/ray-project/ray/pull/673&gt;#673&lt;/denchmark-link&gt;
.
		</comment>
	</comments>
</bug>