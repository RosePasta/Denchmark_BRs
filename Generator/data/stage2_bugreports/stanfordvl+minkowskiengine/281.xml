<bug id='281' author='dante0shy' open_date='2020-12-22T13:11:07Z' closed_time='2020-12-25T09:56:34Z'>
	<summary>Error report "RuntimeError: CUSPARSE_STATUS_INVALID_VALUE at..." when using MinkowskiSumPooling in v0.5</summary>
	<description>
Hi Choy,
I'm working on a function that requires to check whether there is any nearest neighbor in point cloud A at the coordinates in point cloud B. My way is to use a  sum pooling like below.
&lt;denchmark-code&gt;com_sum = ME.MinkowskiSumPooling(kernel_size=5, dimension=D,)
com_index = torch.abs(com_sum(PC_a, coordinates=PC_b.C).F).sum(1) &gt; 0
&lt;/denchmark-code&gt;

com_index would be the index that those points in PC_b have any nearest neighbor in PC_a. When I use this code, the error RuntimeError: CUSPARSE_STATUS_INVALID_VALUE at... shows up randomly, but when I change my code as below, this error just disappears.
&lt;denchmark-code&gt;com_max = ME.MinkowskiMaxPooling(kernel_size=5, dimension=D,)
com_index = torch.abs(com_max (PC_a, coordinates=PC_b.C).F).sum(1) &gt; 0
&lt;/denchmark-code&gt;

I only change the sum pooling to max pooling, so I think there might be some bugs for MinkowskiSumPooling. Furthermore, I know it might not be the best way to realize my function, and is there any direct way to realize my function?
Thank you for your time!
	</description>
	<comments>
		<comment id='1' author='dante0shy' date='2020-12-23T11:40:27Z'>
		Could you post, CUDA version, nvidia driver version?
		</comment>
		<comment id='2' author='dante0shy' date='2020-12-24T03:04:06Z'>
		Sure. My working environment is as following:
&lt;denchmark-code&gt;CUDA: 11.1
Nvidia driver: 455.45.01
Python: 3.7
Pytorch: 1.7
&lt;/denchmark-code&gt;

I directly compile and install the package with the branch v0.5 instead of pip install git+https://github.com/NVIDIA/MinkowskiEngine.git@v0.5 .
		</comment>
		<comment id='3' author='dante0shy' date='2020-12-25T09:57:05Z'>
		Please install from the master
pip install git+https://github.com/NVIDIA/MinkowskiEngine.git
		</comment>
	</comments>
</bug>