<bug id='558' author='dstar55' open_date='2019-10-29T20:39:06Z' closed_time='2019-11-07T21:07:29Z'>
	<summary>bart_vs_bikes.py example doesn't work on Windows</summary>
	<description>
&lt;denchmark-h:h1&gt;Summary&lt;/denchmark-h&gt;

bart_vs_bikes.py script (from example folder) doesn't work on Windows. HttpError is thrown, seems that problem is in function from_data_file where os.path.join is used.
Example is working correctly on Linux.
&lt;denchmark-h:h1&gt;Steps to reproduce&lt;/denchmark-h&gt;

What are the steps we should take to reproduce the bug:

from streamlit folder:

&lt;denchmark-code&gt;$ cd examples
$ streamlit run bart_vs_bikes.py
&lt;/denchmark-code&gt;

&lt;denchmark-h:h2&gt;Expected behavior:&lt;/denchmark-h&gt;

No Error.
&lt;denchmark-h:h2&gt;Actual behavior:&lt;/denchmark-h&gt;

&lt;denchmark-code&gt;HTTPError: HTTP Error 404: Not Found
File "d:\programs\anaconda3\lib\site-packages\streamlit\ScriptRunner.py", line 311, in _run_script exec(code, module.__dict__) 
File "d:\work\python\streamlit\examples\bart_vs_bikes.py", line 42, in &lt;module&gt; bart_stop_stats = copy.deepcopy(from_data_file("bart_stop_stats.json")) 
File "d:\programs\anaconda3\lib\site-packages\streamlit\caching.py", line 560, in wrapped_func return get_or_set_cache() 
File "d:\programs\anaconda3\lib\site-packages\streamlit\caching.py", line 540, in get_or_set_cache return_value = func(*args, **kwargs) 
File "d:\work\python\streamlit\examples\bart_vs_bikes.py", line 38, in from_data_file return pd.read_json(url) 
File "d:\programs\anaconda3\lib\site-packages\pandas\io\json\json.py", line 408, in read_json path_or_buf, encoding=encoding, compression=compression, 
File "d:\programs\anaconda3\lib\site-packages\pandas\io\common.py", line 195, in get_filepath_or_buffer req = _urlopen(filepath_or_buffer) 
File "d:\programs\anaconda3\lib\urllib\request.py", line 222, in urlopen return opener.open(url, data, timeout) 
File "d:\programs\anaconda3\lib\urllib\request.py", line 531, in open response = meth(req, response) 
File "d:\programs\anaconda3\lib\urllib\request.py", line 641, in http_response 'http', request, response, code, msg, hdrs) 
File "d:\programs\anaconda3\lib\urllib\request.py", line 569, in error return self._call_chain(*args) 
File "d:\programs\anaconda3\lib\urllib\request.py", line 503, in _call_chain result = func(*args) 
File "d:\programs\anaconda3\lib\urllib\request.py", line 649, in http_error_default raise HTTPError(req.full_url, code, msg, hdrs, fp) 
&lt;/denchmark-code&gt;

&lt;denchmark-h:h1&gt;Debug info&lt;/denchmark-h&gt;


Streamlit version: (get it with $ streamlit version) 0.49.0
Python version: (get it with $ python --version) 3.7.0
Using Conda? PipEnv? PyEnv? Pex? Conda
OS version: Windows 10
Browser version: Chrome Version 78.0.3904.70

&lt;denchmark-h:h1&gt;Additional information&lt;/denchmark-h&gt;

function from_data_file is using os.path.join in order to build url:
&lt;denchmark-code&gt;@st.cache
def from_data_file(filename):
    dirname = "https://raw.githubusercontent.com/streamlit/streamlit/develop/examples/"
    url = os.path.join(dirname, "data", filename)
    return pd.read_json(url)
&lt;/denchmark-code&gt;

On Windows url has value(due to os.path.join()):
&lt;denchmark-code&gt;https://raw.githubusercontent.com/streamlit/streamlit/develop/examples/data\bart_stop_stats.json
&lt;/denchmark-code&gt;

instead of:
&lt;denchmark-code&gt;https://raw.githubusercontent.com/streamlit/streamlit/develop/examples/data/bart_stop_stats.json
&lt;/denchmark-code&gt;

Solution, consider to use posixpath.join() function
	</description>
	<comments>
		<comment id='1' author='dstar55' date='2019-10-30T00:34:34Z'>
		&lt;denchmark-link:https://docs.python.org/3/library/urllib.parse.html#urllib.parse.urljoin&gt;urllib.parse.urljoin&lt;/denchmark-link&gt;
 would be better for composing urls.
		</comment>
		<comment id='2' author='dstar55' date='2019-11-02T20:22:02Z'>
		&lt;denchmark-link:https://github.com/kinghuang&gt;@kinghuang&lt;/denchmark-link&gt;
, &lt;denchmark-link:https://docs.python.org/3/library/urllib.parse.html#urllib.parse.urljoin&gt;urllib.parse.urljoin&lt;/denchmark-link&gt;
 used, you can check &lt;denchmark-link:https://github.com/streamlit/streamlit/pull/599&gt;pull request 599&lt;/denchmark-link&gt;

		</comment>
	</comments>
</bug>