<bug id='1894' author='jacquestardie' open_date='2020-08-19T13:40:16Z' closed_time='2020-12-18T03:39:55Z'>
	<summary>Twemoji favicon is not found if the emoji in `set_page_config` has a variant selector</summary>
	<description>
&lt;denchmark-h:h1&gt;Summary&lt;/denchmark-h&gt;

The following maps to https://twemoji.maxcdn.com/2/72x72/1f6f0-fe0f.png, which 404s.
st.beta_set_page_config(
    page_icon="üõ∞Ô∏è",
)

# yields
# &lt;link rel="shortcut icon" href="https://twemoji.maxcdn.com/2/72x72/1f6f0-fe0f.png"&gt;
As a result, the custom favicon does not load.
&lt;denchmark-h:h1&gt;Steps to reproduce&lt;/denchmark-h&gt;

See above.
&lt;denchmark-h:h2&gt;Expected behavior:&lt;/denchmark-h&gt;

I expect the :satellite: emoji to load as a favicon.
&lt;denchmark-link:https://user-images.githubusercontent.com/192642/90641305-14cb4f80-e1ff-11ea-8a5b-3c3006815b07.png&gt;&lt;/denchmark-link&gt;

&lt;denchmark-h:h2&gt;Actual behavior:&lt;/denchmark-h&gt;

&lt;denchmark-link:https://user-images.githubusercontent.com/192642/90641437-3fb5a380-e1ff-11ea-9431-fca521bf9eab.png&gt;&lt;/denchmark-link&gt;

&lt;denchmark-h:h2&gt;Is this a regression?&lt;/denchmark-h&gt;

No
That is, did this use to work the way you expected in the past?
No
&lt;denchmark-h:h1&gt;Debug info&lt;/denchmark-h&gt;


Streamlit version: 0.65.2
Python version: 3.6.10
Using pyenv
OS version: Archlinux  5.8.1-arch1-1
Browser version: Firefox 79.0

&lt;denchmark-h:h1&gt;Additional information&lt;/denchmark-h&gt;

Looks like the appropriate URL should be https://twemoji.maxcdn.com/v/13.0.1/72x72/1f6f0.png. Hardcoding it yields the correct emoji.
	</description>
	<comments>
		<comment id='1' author='jacquestardie' date='2020-08-21T21:31:48Z'>
		Hm... interesting. In this case it looks like the specific Satellite emoji you chose "üõ∞Ô∏è" has a Variant Selector at the end, which is why FE0F gets appended to the the candidate URL. But Twemoji only hosts an image for the non-variant-selected version, like you found.
Of course, you can fix this by switching the emoji to "", the one without the Variant Selector (which might look identical in Chrome!). To see the difference between these, paste " " into &lt;denchmark-link:https://r12a.github.io/app-conversion/&gt;this converter&lt;/denchmark-link&gt;

We shouldn't expect our users to learn the difference between these and pick the right emoji, though -- gut instinct is that we should strip out variant selector when Twemoji doesn't expect it. A tricky problem would be to figure out which Twemoji images do or do not end with variant selector FE0F... Perhaps the Twemoji js library has an answer to this?
Background on Variant Selectors from &lt;denchmark-link:https://stackoverflow.com/a/40020609&gt;this post&lt;/denchmark-link&gt;
:

Not every emoji works the same. Some are old textual symbols that now have an (optional or default) colorful representation, others were explicitly (only) as emojis. That means, some Unicode codepoints should have two possible representations, text and emoji. Authors and users should be able to express their preference for one or the other. This is currently done with otherwise invisible variation selectors U+FE0E (text, VS-15) and U+FE0F (emoji, VS-16), but higher-level solutions (e.g. for CSS) have been proposed.

		</comment>
		<comment id='2' author='jacquestardie' date='2020-08-21T22:50:59Z'>
		Oh! I wasn't even aware of the variant selector. Thanks for following up &lt;denchmark-link:https://github.com/akrolsmir&gt;@akrolsmir&lt;/denchmark-link&gt;
.
		</comment>
		<comment id='3' author='jacquestardie' date='2020-09-19T17:44:07Z'>
		Hello, I would like to work on this issue.
		</comment>
		<comment id='4' author='jacquestardie' date='2020-12-10T02:05:48Z'>
		Possibly related?
&lt;denchmark-code&gt;set_page_config(page_icon=":X:")
&lt;/denchmark-code&gt;

Does not work either, according to &lt;denchmark-link:https://github.com/mesmith027&gt;@mesmith027&lt;/denchmark-link&gt;
 .
		</comment>
	</comments>
</bug>