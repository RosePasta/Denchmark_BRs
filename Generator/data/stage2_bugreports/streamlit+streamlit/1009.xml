<bug id='1009' author='danielchalef' open_date='2020-01-23T18:17:04Z' closed_time='2020-02-28T18:14:49Z'>
	<summary>Altair 4 interactive legend does not work</summary>
	<description>
&lt;denchmark-h:h1&gt;Summary&lt;/denchmark-h&gt;

The new interactive legend feature of Altair 4.x does not work when displaying charts with both altair_chart and write. The feature does work with identical code in a JupyterLab notebook.
&lt;denchmark-h:h1&gt;Steps to reproduce&lt;/denchmark-h&gt;

Test app pulled from Altair documentation:
import streamlit as st
import altair as alt
from vega_datasets import data

source = data.unemployment_across_industries.url

selection = alt.selection_multi(fields=['series'], bind='legend')

chart = alt.Chart(source).mark_area().encode(
    alt.X('yearmonth(date):T', axis=alt.Axis(domain=False, format='%Y', tickSize=0)),
    alt.Y('sum(count):Q', stack='center', axis=None),
    alt.Color('series:N', scale=alt.Scale(scheme='category20b')),
    opacity=alt.condition(selection, alt.value(1), alt.value(0.2))
).add_selection(
    selection
)

st.altair_chart(chart)

st.write(chart)
&lt;denchmark-h:h2&gt;Expected behavior:&lt;/denchmark-h&gt;

The legend should be clickable, with data series being filtered to the selected legend entries.
&lt;denchmark-h:h2&gt;Actual behavior:&lt;/denchmark-h&gt;

Nothing happens when the legend is clicked. There are no JS errors in the console output.
&lt;denchmark-h:h2&gt;Is this a regression?&lt;/denchmark-h&gt;

no
&lt;denchmark-h:h1&gt;Debug info&lt;/denchmark-h&gt;


Streamlit version:  0.53.0
Python version: 3.7.6
Altair version: 4.0.1
Using Conda? PipEnv? PyEnv? Pex? Conda, pip
OS version: Linux 5.0.0-37-generic #40~18.04.1-Ubuntu SMP
Browser version: Chrome 79.0.3945.130 / Firefox 72.0.1 (64-bit)

&lt;denchmark-h:h1&gt;Additional information&lt;/denchmark-h&gt;

	</description>
	<comments>
		<comment id='1' author='danielchalef' date='2020-02-12T14:02:46Z'>
		Yes, I can confirm similar issue on Streamlit 0.55.0 on Win10 and Chrome 79.0.3945.130.
If I use the other option of creating another clickable layer on the right for the legend, it works as expected though.
So I believe it is the , bind='legend' that is causing the issue
		</comment>
		<comment id='2' author='danielchalef' date='2020-02-27T20:39:06Z'>
		Created a new &lt;denchmark-link:https://github.com/vega/vega-embed/issues/351&gt;Issue&lt;/denchmark-link&gt;
 for this in vega-embed's github
		</comment>
	</comments>
</bug>