<bug id='2017' author='karriebear' open_date='2020-09-18T21:50:48Z' closed_time='2020-09-23T01:41:09Z'>
	<summary>[Horizontal Layouts] Update the expander on removal</summary>
	<description>
&lt;denchmark-h:h1&gt;Summary&lt;/denchmark-h&gt;

When an app with expander is running, the expander does not get removed completely on rerun.
&lt;denchmark-h:h1&gt;Steps to reproduce&lt;/denchmark-h&gt;

What are the steps we should take to reproduce the bug:

Create and run an app with st.expander
Remove st.expander while app is running
Rerun code

&lt;denchmark-h:h2&gt;Expected behavior:&lt;/denchmark-h&gt;

Expander is gone with label and toggle
&lt;denchmark-h:h2&gt;Actual behavior:&lt;/denchmark-h&gt;

Label and toggle is still available
	</description>
	<comments>
		<comment id='1' author='karriebear' date='2020-09-21T05:12:57Z'>
		I think this is caused by a change I did in st.columns: Basically, in this commit: &lt;denchmark-link:https://github.com/streamlit/streamlit/commit/d01be3f25a60ce19b609f6fe9bd063c454032742&gt;d01be3f&lt;/denchmark-link&gt;

I stopped empty containers from getting cleaned up in the code (e.g. on rerun), with the intention of keeping space for an empty column. The side effect was that empty expanders are also no longer removed... A quick workaround would be to reinstate that cleanup but explicitly ignore empty columns.
There's more overall thinking to be done around how containers interact with the existing tree, though... The existing code in deltaparser has some weird interactions with widgets and layout changes. See these bugs:
&lt;denchmark-link:https://www.notion.so/streamlit/402ec150023a4677a8611601c382a850?v=0278f985a819411ca98e1f0d23f755dc&amp;p=6641783e6baf4aefb974d8b88663afae&gt;Bug 1&lt;/denchmark-link&gt;

&lt;denchmark-link:https://www.notion.so/streamlit/402ec150023a4677a8611601c382a850?v=0278f985a819411ca98e1f0d23f755dc&amp;p=1d1cbcd1a848412db1ac566014606b89&gt;Bug 2&lt;/denchmark-link&gt;

		</comment>
	</comments>
</bug>