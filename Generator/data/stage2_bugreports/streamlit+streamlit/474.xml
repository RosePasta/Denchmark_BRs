<bug id='474' author='tvst' open_date='2019-10-20T21:02:04Z' closed_time='2019-11-19T01:19:35Z'>
	<summary>Only create `~/.streamlit` on run when needed</summary>
	<description>
See: &lt;denchmark-link:https://discuss.streamlit.io/t/permission-denied-to-create-streamlit/490/2&gt;https://discuss.streamlit.io/t/permission-denied-to-create-streamlit/490/2&lt;/denchmark-link&gt;

When Streamlit asks for the user's email, we create a file at ~/.streamlit/credentials.toml, creating that folder if needed. The thing is we create that file even if the user passes "" as their email.
It would be great if we only created the folder if we actually need to make a credentials.toml. This is not possible when running Streamlit interactively since we need to be able to tell when it's the first time Streamlit is being executed, and we use the presence of that file as a marker for that.
But when running on a headless server we should be able to skip the creation of that file and folder.
(Since we already don't ask for credentials when headless. See &lt;denchmark-link:https://github.com/streamlit/streamlit/pull/328&gt;#328&lt;/denchmark-link&gt;
 )
	</description>
	<comments>
	</comments>
</bug>