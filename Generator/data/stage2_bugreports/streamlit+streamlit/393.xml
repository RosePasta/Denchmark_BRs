<bug id='393' author='MarcSkovMadsen' open_date='2019-10-13T19:42:55Z' closed_time='2019-12-18T22:48:00Z'>
	<summary>Some example apps in this repo cannot be run as single file apps.</summary>
	<description>
&lt;denchmark-h:h1&gt;Summary&lt;/denchmark-h&gt;

I would expect it to be nice to have that most of the example apps in this repo can be run by users as reference examples without having to clone the run but for example using
streamlit run "https://raw.githubusercontent.com/streamlit/streamlit/develop/examples/apocrypha.py"
or the python exec command. This is not always the case. For example for the above file.
If the file cannot be run without the repo, then if possible it would be nice to add some error handling and message telling the user that it's not intended to run this example on a stand alone basis.
&lt;denchmark-h:h1&gt;Steps to reproduce&lt;/denchmark-h&gt;

You can identify the tests that fails the exec command using the awesome-streamlit test runner
docker run -it -p 80:80 --entrypoint "streamlit" marcskovmadsen/awesome-streamlit:latest run test_runner_app.py
You can read more about the test runner at
&lt;denchmark-link:https://github.com/marcskovmadsen/awesome-streamlit#streamlit-tests&gt;https://github.com/marcskovmadsen/awesome-streamlit#streamlit-tests&lt;/denchmark-link&gt;

The current results look like
&lt;denchmark-link:https://user-images.githubusercontent.com/42288570/66720880-36e78a80-ee02-11e9-878c-1990448ad847.png&gt;&lt;/denchmark-link&gt;

Please note that the 404 failing files probably don't exist any longer.
	</description>
	<comments>
		<comment id='1' author='MarcSkovMadsen' date='2019-10-13T19:49:08Z'>
		And this is the stack traces collected by the awesome-streamlit test runner.
Exceptions log
------ mnist-cnn ---------
File: &lt;denchmark-link:https://raw.githubusercontent.com/streamlit/streamlit/develop/examples/mnist-cnn&gt;https://raw.githubusercontent.com/streamlit/streamlit/develop/examples/mnist-cnn&lt;/denchmark-link&gt;

Traceback (most recent call last):
File "c:\repos\private\awesomestreamlit.venv\lib\site-packages\streamlit\caching.py", line 518, in get_or_set_cache
key, persist, ignore_hash, func, caller_frame
File "c:\repos\private\awesomestreamlit.venv\lib\site-packages\streamlit\caching.py", line 398, in _read_from_cache
raise e
File "c:\repos\private\awesomestreamlit.venv\lib\site-packages\streamlit\caching.py", line 381, in _read_from_cache
return _read_from_mem_cache(key, ignore_hash)
File "c:\repos\private\awesomestreamlit.venv\lib\site-packages\streamlit\caching.py", line 327, in _read_from_mem_cache
raise CacheKeyNotFoundError("Key not found in mem cache")
streamlit.caching.CacheKeyNotFoundError: Key not found in mem cache
During handling of the above exception, another exception occurred:
Traceback (most recent call last):
File "C:\repos\private\awesomestreamlit\test_runner_app.py", line 69, in get_test_result
python_code = get_file_content_as_string(resource.url)
File "c:\repos\private\awesomestreamlit.venv\lib\site-packages\streamlit\caching.py", line 544, in wrapped_func
return get_or_set_cache()
File "c:\repos\private\awesomestreamlit.venv\lib\site-packages\streamlit\caching.py", line 526, in get_or_set_cache
return_value = func(*args, **kwargs)
File "C:\repos\private\awesomestreamlit\test_runner_app.py", line 49, in get_file_content_as_string
data = urllib.request.urlopen(url).read()
File "C:\Users\masma\AppData\Local\Programs\Python\Python37\lib\urllib\request.py", line 222, in urlopen
return opener.open(url, data, timeout)
File "C:\Users\masma\AppData\Local\Programs\Python\Python37\lib\urllib\request.py", line 531, in open
response = meth(req, response)
File "C:\Users\masma\AppData\Local\Programs\Python\Python37\lib\urllib\request.py", line 641, in http_response
'http', request, response, code, msg, hdrs)
File "C:\Users\masma\AppData\Local\Programs\Python\Python37\lib\urllib\request.py", line 569, in error
return self._call_chain(*args)
File "C:\Users\masma\AppData\Local\Programs\Python\Python37\lib\urllib\request.py", line 503, in _call_chain
result = func(*args)
File "C:\Users\masma\AppData\Local\Programs\Python\Python37\lib\urllib\request.py", line 649, in http_error_default
raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 404: Not Found
------ apocrypha.py ---------
File: &lt;denchmark-link:https://raw.githubusercontent.com/streamlit/streamlit/develop/examples/apocrypha.py&gt;https://raw.githubusercontent.com/streamlit/streamlit/develop/examples/apocrypha.py&lt;/denchmark-link&gt;

Traceback (most recent call last):
File "C:\repos\private\awesomestreamlit\test_runner_app.py", line 70, in get_test_result
exec(python_code, globals())  # pylint: disable=exec-used
File "", line 55, in 
File "C:\Users\masma\AppData\Local\Programs\Python\Python37\lib\contextlib.py", line 119, in exit
next(self.gen)
File "c:\repos\private\awesomestreamlit.venv\lib\site-packages\streamlit_init_.py", line 541, in echo
with open(filename) as source_file:
OSError: [Errno 22] Invalid argument: ''
------ reference.py ---------
File: &lt;denchmark-link:https://raw.githubusercontent.com/streamlit/streamlit/develop/examples/reference.py&gt;https://raw.githubusercontent.com/streamlit/streamlit/develop/examples/reference.py&lt;/denchmark-link&gt;

Traceback (most recent call last):
File "C:\repos\private\awesomestreamlit\test_runner_app.py", line 70, in get_test_result
exec(python_code, globals())  # pylint: disable=exec-used
File "", line 41, in 
File "C:\Users\masma\AppData\Local\Programs\Python\Python37\lib\contextlib.py", line 119, in exit
next(self.gen)
File "c:\repos\private\awesomestreamlit.venv\lib\site-packages\streamlit_init_.py", line 541, in echo
with open(filename) as source_file:
OSError: [Errno 22] Invalid argument: ''
------ matplotlib_kwargs.py ---------
File: &lt;denchmark-link:https://raw.githubusercontent.com/streamlit/streamlit/develop/examples/matplotlib_kwargs.py&gt;https://raw.githubusercontent.com/streamlit/streamlit/develop/examples/matplotlib_kwargs.py&lt;/denchmark-link&gt;

Traceback (most recent call last):
File "C:\repos\private\awesomestreamlit\test_runner_app.py", line 70, in get_test_result
exec(python_code, globals())  # pylint: disable=exec-used
File "", line 103, in 
File "", line 65, in main
File "C:\Users\masma\AppData\Local\Programs\Python\Python37\lib\contextlib.py", line 119, in exit
next(self.gen)
File "c:\repos\private\awesomestreamlit.venv\lib\site-packages\streamlit_init_.py", line 541, in echo
with open(filename) as source_file:
OSError: [Errno 22] Invalid argument: ''
------ widget.time_input ---------
File: &lt;denchmark-link:https://raw.githubusercontent.com/streamlit/streamlit/master/docs/api-examples-source/widget.time_input.py&gt;https://raw.githubusercontent.com/streamlit/streamlit/master/docs/api-examples-source/widget.time_input.py&lt;/denchmark-link&gt;

Traceback (most recent call last):
File "C:\repos\private\awesomestreamlit\test_runner_app.py", line 70, in get_test_result
exec(python_code, globals())  # pylint: disable=exec-used
File "", line 3, in 
TypeError: descriptor 'time' requires a 'datetime.datetime' object but received a 'int'
------ bart_vs_bikes.py ---------
File: &lt;denchmark-link:https://raw.githubusercontent.com/streamlit/streamlit/develop/examples/bart_vs_bikes.py&gt;https://raw.githubusercontent.com/streamlit/streamlit/develop/examples/bart_vs_bikes.py&lt;/denchmark-link&gt;

Traceback (most recent call last):
File "c:\repos\private\awesomestreamlit.venv\lib\site-packages\streamlit\caching.py", line 518, in get_or_set_cache
key, persist, ignore_hash, func, caller_frame
File "c:\repos\private\awesomestreamlit.venv\lib\site-packages\streamlit\caching.py", line 398, in _read_from_cache
raise e
File "c:\repos\private\awesomestreamlit.venv\lib\site-packages\streamlit\caching.py", line 381, in _read_from_cache
return _read_from_mem_cache(key, ignore_hash)
File "c:\repos\private\awesomestreamlit.venv\lib\site-packages\streamlit\caching.py", line 327, in _read_from_mem_cache
raise CacheKeyNotFoundError("Key not found in mem cache")
streamlit.caching.CacheKeyNotFoundError: Key not found in mem cache
During handling of the above exception, another exception occurred:
Traceback (most recent call last):
File "C:\repos\private\awesomestreamlit\test_runner_app.py", line 70, in get_test_result
exec(python_code, globals())  # pylint: disable=exec-used
File "", line 42, in 
File "c:\repos\private\awesomestreamlit.venv\lib\site-packages\streamlit\caching.py", line 544, in wrapped_func
return get_or_set_cache()
File "c:\repos\private\awesomestreamlit.venv\lib\site-packages\streamlit\caching.py", line 526, in get_or_set_cache
return_value = func(*args, **kwargs)
File "", line 38, in from_data_file
File "c:\repos\private\awesomestreamlit.venv\lib\site-packages\pandas\io\json\json.py", line 413, in read_json
path_or_buf, encoding=encoding, compression=compression,
File "c:\repos\private\awesomestreamlit.venv\lib\site-packages\pandas\io\common.py", line 202, in get_filepath_or_buffer
req = _urlopen(filepath_or_buffer)
File "C:\Users\masma\AppData\Local\Programs\Python\Python37\lib\urllib\request.py", line 222, in urlopen
return opener.open(url, data, timeout)
File "C:\Users\masma\AppData\Local\Programs\Python\Python37\lib\urllib\request.py", line 531, in open
response = meth(req, response)
File "C:\Users\masma\AppData\Local\Programs\Python\Python37\lib\urllib\request.py", line 641, in http_response
'http', request, response, code, msg, hdrs)
File "C:\Users\masma\AppData\Local\Programs\Python\Python37\lib\urllib\request.py", line 569, in error
return self._call_chain(*args)
File "C:\Users\masma\AppData\Local\Programs\Python\Python37\lib\urllib\request.py", line 503, in _call_chain
result = func(*args)
File "C:\Users\masma\AppData\Local\Programs\Python\Python37\lib\urllib\request.py", line 649, in http_error_default
raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 404: Not Found
------ syntax_hilite.py ---------
File: &lt;denchmark-link:https://raw.githubusercontent.com/streamlit/streamlit/develop/examples/syntax_hilite.py&gt;https://raw.githubusercontent.com/streamlit/streamlit/develop/examples/syntax_hilite.py&lt;/denchmark-link&gt;

Traceback (most recent call last):
File "C:\repos\private\awesomestreamlit\test_runner_app.py", line 70, in get_test_result
exec(python_code, globals())  # pylint: disable=exec-used
File "", line 119, in 
File "C:\Users\masma\AppData\Local\Programs\Python\Python37\lib\contextlib.py", line 119, in exit
next(self.gen)
File "c:\repos\private\awesomestreamlit.venv\lib\site-packages\streamlit_init_.py", line 541, in echo
with open(filename) as source_file:
OSError: [Errno 22] Invalid argument: ''
------ images.py ---------
File: &lt;denchmark-link:https://raw.githubusercontent.com/streamlit/streamlit/develop/examples/images.py&gt;https://raw.githubusercontent.com/streamlit/streamlit/develop/examples/images.py&lt;/denchmark-link&gt;

Traceback (most recent call last):
File "C:\repos\private\awesomestreamlit\test_runner_app.py", line 70, in get_test_result
exec(python_code, globals())  # pylint: disable=exec-used
File "", line 205, in 
File "", line 41, in init
File "", line 198, in save
File "c:\repos\private\awesomestreamlit.venv\lib\site-packages\PIL\Image.py", line 2081, in save
fp = builtins.open(filename, "w+b")
FileNotFoundError: [Errno 2] No such file or directory: '/tmp/image.jpeg'
------ run_on_save.py ---------
File: &lt;denchmark-link:https://raw.githubusercontent.com/streamlit/streamlit/develop/examples/run_on_save.py&gt;https://raw.githubusercontent.com/streamlit/streamlit/develop/examples/run_on_save.py&lt;/denchmark-link&gt;

Traceback (most recent call last):
File "C:\repos\private\awesomestreamlit\test_runner_app.py", line 70, in get_test_result
exec(python_code, globals())  # pylint: disable=exec-used
File "", line 68, in 
NameError: name 'Error' is not defined
		</comment>
		<comment id='2' author='MarcSkovMadsen' date='2019-10-13T19:52:50Z'>
		A fix to some of the problems is to use an URL pointing to the file on Github instead of a local file. :-)
		</comment>
		<comment id='3' author='MarcSkovMadsen' date='2019-10-21T03:16:12Z'>
		Hi &lt;denchmark-link:https://github.com/MarcSkovMadsen&gt;@MarcSkovMadsen&lt;/denchmark-link&gt;
 , thanks for the bug report
We're actually been meaning to remove all examples from that repo, and create a different repo just with examples. At which point we'd probably want o make sure the examples are a bit more interesting too 😄
And something else we should do is steal your idea from this bug report and make all examples runnable by URL.
So I'll leave this bug open as a reminder to ourselves, but it's unlikely we'll spend time fixing the existing examples (since they're going away soon).
		</comment>
		<comment id='4' author='MarcSkovMadsen' date='2019-11-15T14:04:32Z'>
		Hey &lt;denchmark-link:https://github.com/MarcSkovMadsen&gt;@MarcSkovMadsen&lt;/denchmark-link&gt;

Is this still happening for you? I can't repro.
		</comment>
		<comment id='5' author='MarcSkovMadsen' date='2019-12-18T22:48:00Z'>
		Can't repro and no response from the user in a month, closing.
		</comment>
	</comments>
</bug>