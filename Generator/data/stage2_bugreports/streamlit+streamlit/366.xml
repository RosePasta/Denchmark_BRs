<bug id='366' author='treuille' open_date='2019-10-10T20:34:14Z' closed_time='2019-10-28T21:49:21Z'>
	<summary>Changing deeply imported python modules does not hot-reload properly</summary>
	<description>
&lt;denchmark-h:h1&gt;Summary&lt;/denchmark-h&gt;

If a python file a.py imports a module b which imports c, then changnes to c don't hot-reload properly to update a.
&lt;denchmark-h:h2&gt;Steps to reproduce&lt;/denchmark-h&gt;

In essence we will setup an import chain a -&gt; b -&gt; c where

a prints b.x and b.y
b.x is defined directly in b
b.y is defined as c.foo

Thus a depends on b directly and c "deeply" (step 1). Updating the direct import (step 2) works properly, but updating the deep import (step 3) fails. As a sanity check, restarting the server (step 4) displays the correct output.
&lt;denchmark-h:h3&gt;Step 1: Setup the import chain (THIS WORKS)&lt;/denchmark-h&gt;

We will setup the import chain a -&gt; b -&gt; c by defining these three files:
a.py:
import streamlit as st
import b

st.write('b.x:', b.x, 'b.y:', b.y)
b.py:
import c

x = 41
y = c.foo
c.py:
foo = 33
When we streamlit run a.py we see the correct output:
&lt;denchmark-link:https://user-images.githubusercontent.com/1673013/66604301-3060d500-ebae-11e9-9b04-88c3a327bbdb.png&gt;&lt;/denchmark-link&gt;

&lt;denchmark-h:h3&gt;Step 2: Update the imported module b (THIS WORKS)&lt;/denchmark-h&gt;

Without closing the server created in step 1, update b.py as follows:
import c

x = 42
y = c.foo
This change is hot-reloaded and again we see the correct output:
&lt;denchmark-link:https://user-images.githubusercontent.com/1673013/66604322-38b91000-ebae-11e9-9c0e-c4d0fc14e790.png&gt;&lt;/denchmark-link&gt;

&lt;denchmark-h:h3&gt;Step 3: Update the deeply imported module c (THIS DOESN'T WORK!!)&lt;/denchmark-h&gt;

Again without closing the server, update c.py as follows:
foo = 34
This change is hot-reloaded but we do not see the correct output:
&lt;denchmark-link:https://user-images.githubusercontent.com/1673013/66604335-3fe01e00-ebae-11e9-807d-4b2877de6bac.png&gt;&lt;/denchmark-link&gt;

&lt;denchmark-h:h3&gt;Step 4: Demonstrate the correct ouput by killing and restarting the server.&lt;/denchmark-h&gt;

Kill the server and run it again (streamlit run a.py) and you will see the correct output:
&lt;denchmark-link:https://user-images.githubusercontent.com/1673013/66604346-466e9580-ebae-11e9-927e-55b2a1afe52b.png&gt;&lt;/denchmark-link&gt;

&lt;denchmark-h:h1&gt;Behavior&lt;/denchmark-h&gt;

&lt;denchmark-h:h2&gt;Actual behavior&lt;/denchmark-h&gt;

Described above.
&lt;denchmark-h:h2&gt;Expected behavior&lt;/denchmark-h&gt;

Changing a deeply imported module (c) should correctly update everything.
In other words, we should see the step 4 output after step 3.
&lt;denchmark-h:h2&gt;Is this a regression?&lt;/denchmark-h&gt;

Probably not.
&lt;denchmark-h:h1&gt;Debug info&lt;/denchmark-h&gt;

&lt;denchmark-code&gt;$ streamlit version &amp;&amp; python --version &amp;&amp; pyenv --version &amp;&amp; sw_vers &amp;&amp; "/Applications/Google Chrome.app/Contents/MacOS/Google Chrome" --version
Streamlit, version 0.47.4
Python 3.6.3
pyenv 1.2.3
ProductName:    Mac OS X
ProductVersion: 10.14.6
BuildVersion:   18G103
Google Chrome 77.0.3865.90 
&lt;/denchmark-code&gt;

&lt;denchmark-h:h1&gt;Additional information&lt;/denchmark-h&gt;

This is the second of two bugs based on &lt;denchmark-link:https://github.com/MarcSkovMadsen/awesome-streamlit/issues/2&gt;this&lt;/denchmark-link&gt;
  issue. The first bug is &lt;denchmark-link:https://github.com/streamlit/streamlit/issues/358&gt;this&lt;/denchmark-link&gt;
.
	</description>
	<comments>
		<comment id='1' author='treuille' date='2019-10-28T21:49:17Z'>
		 &lt;denchmark-link:https://github.com/streamlit/streamlit/issues/358&gt;#358&lt;/denchmark-link&gt;

		</comment>
	</comments>
</bug>