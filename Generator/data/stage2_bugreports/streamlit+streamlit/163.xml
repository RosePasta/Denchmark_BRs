<bug id='163' author='treuille' open_date='2019-09-21T00:29:05Z' closed_time='2019-11-19T18:28:21Z'>
	<summary>Turning on `server.enableCORS` via `set_option()` can crash chrome</summary>
	<description>
&lt;denchmark-h:h1&gt;Summary&lt;/denchmark-h&gt;

Type here a clear and concise description of the bug. Aim for 2-3 sentences.
&lt;denchmark-h:h2&gt;Steps to reproduce&lt;/denchmark-h&gt;


Run this code:

import streamlit as st
st.set_option('server.enableCORS', False)
st.write('Hello world.')


Connect to the sever "unsecurely" via http://localhost:8501. Note that works!


Now connect to the sever securely via https://localhost:8501 and wait a loooong time.


&lt;denchmark-h:h1&gt;Behavior&lt;/denchmark-h&gt;

&lt;denchmark-h:h2&gt;Actual behavior&lt;/denchmark-h&gt;

After a long wait, one of two things happen to me:

Chrome crashes! ðŸ˜¬
It says that the request timed out:

&lt;denchmark-link:https://user-images.githubusercontent.com/1673013/65365166-02e6c400-dbcc-11e9-8259-d4fb0f475c95.png&gt;&lt;/denchmark-link&gt;

&lt;denchmark-h:h2&gt;Expected behavior&lt;/denchmark-h&gt;

I would expect the https request to work.
&lt;denchmark-h:h1&gt;Debug info&lt;/denchmark-h&gt;

&lt;denchmark-code&gt;$ streamlit version &amp;&amp; python --version &amp;&amp; pyenv --version &amp;&amp; sw_vers &amp;&amp; "/Applications/Google Chrome.app/Contents/MacOS/Google Chrome" --version

Streamlit, version 0.45.0
Python 3.6.5
pyenv 1.2.3
ProductName:	Mac OS X
ProductVersion:	10.14.6
BuildVersion:	18G95
Google Chrome 76.0.3809.132 
&lt;/denchmark-code&gt;

	</description>
	<comments>
		<comment id='1' author='treuille' date='2019-10-08T17:31:04Z'>
		Hi &lt;denchmark-link:https://github.com/treuille&gt;@treuille&lt;/denchmark-link&gt;
 :)
I believe CORS is unrelated to accessing the app over HTTPS, which we currently don't support.
		</comment>
		<comment id='2' author='treuille' date='2019-10-09T17:30:58Z'>
		What &lt;denchmark-link:https://github.com/jrhone&gt;@jrhone&lt;/denchmark-link&gt;
 said. And that's not a Chrome crash either 
But this reminds me: we should make it clear which settings can be set dynamically and which must be set before the app runs. enableCORS is an example of the latter.
So running this st.set_option('server.enableCORS', False) should raise an Exception since it's an option that can't be set dynamically.
		</comment>
		<comment id='3' author='treuille' date='2019-11-15T19:48:28Z'>
		OK so just to be clear, the idea here is that:

you can't actually set this option dynamically (and have it work)
we should document this option better
we should throw an error when someone tries to do this

I'm going ahead under these assumptions.
		</comment>
		<comment id='4' author='treuille' date='2019-11-15T23:02:21Z'>
		So in my branch, this is what the user would see if they tried to set this option in the script.  The message itself could be a little more useful (WIP).
&lt;denchmark-link:https://user-images.githubusercontent.com/98836/68981631-e96f8c00-07b8-11ea-9212-b4a2f44e1f75.png&gt;&lt;/denchmark-link&gt;

It came out during standup that most options can't really be set during runtime, so I'm adding a "scriptable" flag to the ConfigOption object that is False by default.
Now we just gotta go through and set scriptable=True on the few options that can be set thusly.... &lt;denchmark-link:https://github.com/tvst&gt;@tvst&lt;/denchmark-link&gt;
 I'll need your help to make sure this is done correctly.
		</comment>
		<comment id='5' author='treuille' date='2019-11-19T18:28:21Z'>
		Changes in  now in that satisfy conditions enough to close this issue.  See &lt;denchmark-link:https://github.com/streamlit/streamlit/pull/702&gt;#702&lt;/denchmark-link&gt;

		</comment>
	</comments>
</bug>