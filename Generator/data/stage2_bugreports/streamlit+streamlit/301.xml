<bug id='301' author='monchier' open_date='2019-10-07T16:53:37Z' closed_time='2019-10-30T19:41:01Z'>
	<summary>Permission problem when streamlit is running from url</summary>
	<description>
&lt;denchmark-h:h1&gt;Summary&lt;/denchmark-h&gt;

Permission problem when streamlit is running from url. This happens on Windows. Likely an issue with the permission of the system temporary folder. The stacktrace shows the EventBasedFileWatcher, so it may be related to this codepath.
&lt;denchmark-h:h1&gt;Steps to reproduce&lt;/denchmark-h&gt;

The bug still needs a formal repro.
&lt;denchmark-code&gt;streamlit run https://raw.githubusercontent.com/streamlit/demo-self-driving/master/app.py```
&lt;/denchmark-code&gt;

Discourse: &lt;denchmark-link:https://discuss.streamlit.io/t/permission-errors-when-running-demo-self-driving/246&gt;https://discuss.streamlit.io/t/permission-errors-when-running-demo-self-driving/246&lt;/denchmark-link&gt;

&lt;denchmark-h:h2&gt;Expected behavior:&lt;/denchmark-h&gt;

No exception raised
&lt;denchmark-h:h2&gt;Actual behavior:&lt;/denchmark-h&gt;

Permission denied exception raised as per Discourse.
&lt;denchmark-h:h2&gt;Is this a regression?&lt;/denchmark-h&gt;

no
&lt;denchmark-h:h1&gt;Debug info&lt;/denchmark-h&gt;


Streamlit version: post launch
Python version: not sure
Using Conda? PipEnv? PyEnv? Pex? not sure
OS version: Windows
Browser version: not sure

&lt;denchmark-h:h1&gt;Additional information&lt;/denchmark-h&gt;

If needed, add any other context about the problem here.
	</description>
	<comments>
		<comment id='1' author='monchier' date='2019-10-07T23:19:21Z'>
		Python Version was 3.7
Yes, using Anaconda
Browser Version = Chrome Version 77.0.3865.90 (Official Build) (64-bit)
OS = Windows 10 Pro
		</comment>
		<comment id='2' author='monchier' date='2019-10-08T18:29:03Z'>
		Another configuration where this bug repros:
Windows version: 10.0.17763 Build 17763.
		</comment>
		<comment id='3' author='monchier' date='2019-10-21T18:55:11Z'>
		I am debugging this and does not seem a permission issue. When we run from url we download to a temp file and we use:
&lt;denchmark-code&gt;with tempfile.NamedTemporaryFile(delete=True) as fp:
  execute(fp)
&lt;/denchmark-code&gt;

NamedTemporaryFile is supposed to delete the temp file when the resource manager exits, but it seems there is an open issue with Windows related to this use of NamedTemporaryFile:

you can't actually open a file opened by NamedTemporaryFile with delete=True (the default) until the NamedTemporaryFile is closed

Pulling from &lt;denchmark-link:https://stackoverflow.com/a/49868505&gt;https://stackoverflow.com/a/49868505&lt;/denchmark-link&gt;

... planning a fix.
		</comment>
	</comments>
</bug>