<bug id='554' author='coffeedjimmy' open_date='2019-10-29T01:21:41Z' closed_time='2020-05-12T19:51:12Z'>
	<summary>EXCEPTION! 'NoneType' object has no attribute 'strip'</summary>
	<description>
&lt;denchmark-h:h1&gt;Summary&lt;/denchmark-h&gt;

Fail to run streamlit on Python3.6.3 with anaconda and docker
&lt;denchmark-h:h1&gt;Steps to reproduce&lt;/denchmark-h&gt;

Just Type streamlit hello
&lt;denchmark-h:h2&gt;Expected behavior:&lt;/denchmark-h&gt;

Try to run streamlit according to the document
&lt;denchmark-h:h2&gt;Actual behavior:&lt;/denchmark-h&gt;

Make an exception as EXCEPTION! 'NoneType' object has no attribute 'strip'
	</description>
	<comments>
		<comment id='1' author='coffeedjimmy' date='2019-12-16T18:50:33Z'>
		Encounter the same error when there is no internet connectivity e.g. when on an air gapped host.
&lt;denchmark-code&gt;Did not auto detect external IP.
Please go to https://streamlit.io/docs/ for debugging hints.
EXCEPTION! 'NoneType' object has no attribute 'strip'
  File "/home/smartexpert/miniconda3/bin/streamlit", line 10, in &lt;module&gt;
    sys.exit(main())
  File "/home/smartexpert/miniconda3/lib/python3.7/site-packages/click/core.py", line 764, in __call__
    return self.main(*args, **kwargs)
  File "/home/smartexpert/miniconda3/lib/python3.7/site-packages/click/core.py", line 717, in main
    rv = self.invoke(ctx)
  File "/home/smartexpert/miniconda3/lib/python3.7/site-packages/click/core.py", line 1137, in invoke
    return _process_result(sub_ctx.command.invoke(sub_ctx))
  File "/home/smartexpert/miniconda3/lib/python3.7/site-packages/click/core.py", line 956, in invoke
    return ctx.invoke(self.callback, **ctx.params)
  File "/home/smartexpert/miniconda3/lib/python3.7/site-packages/click/core.py", line 555, in invoke
    return callback(*args, **kwargs)
  File "/home/smartexpert/miniconda3/lib/python3.7/site-packages/streamlit/cli.py", line 226, in main_run
    _main_run(target, args)
  File "/home/smartexpert/miniconda3/lib/python3.7/site-packages/streamlit/cli.py", line 251, in _main_run
    bootstrap.run(file, command_line, args)
  File "/home/smartexpert/miniconda3/lib/python3.7/site-packages/streamlit/bootstrap.py", line 229, in run
    ioloop.start()
  File "/home/smartexpert/miniconda3/lib/python3.7/site-packages/tornado/platform/asyncio.py", line 132, in start
    self.asyncio_loop.run_forever()
  File "/home/smartexpert/miniconda3/lib/python3.7/asyncio/base_events.py", line 539, in run_forever
    self._run_once()
  File "/home/smartexpert/miniconda3/lib/python3.7/asyncio/base_events.py", line 1775, in _run_once
    handle._run()
  File "/home/smartexpert/miniconda3/lib/python3.7/asyncio/events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
  File "/home/smartexpert/miniconda3/lib/python3.7/site-packages/tornado/ioloop.py", line 758, in _run_callback
    ret = callback()
  File "/home/smartexpert/miniconda3/lib/python3.7/site-packages/tornado/stack_context.py", line 300, in null_wrapper
    return fn(*args, **kwargs)
  File "/home/smartexpert/miniconda3/lib/python3.7/site-packages/tornado/gen.py", line 326, in wrapper
    yielded = next(result)
  File "/home/smartexpert/miniconda3/lib/python3.7/site-packages/streamlit/server/Server.py", line 342, in _loop_coroutine
    traceback.print_stack(file=sys.stdout)

Please report this bug at https://github.com/streamlit/streamlit/issues.
&lt;/denchmark-code&gt;

		</comment>
		<comment id='2' author='coffeedjimmy' date='2019-12-16T20:15:28Z'>
		I get this error when running streamlit hello in a docker container.
		</comment>
		<comment id='3' author='coffeedjimmy' date='2019-12-16T22:39:57Z'>
		I was able to go a workaround using &lt;denchmark-link:https://discuss.streamlit.io/t/how-do-i-set-the-server-to-0-0-0-0-for-deployment-using-docker/216/2?u=shuaib&gt;https://discuss.streamlit.io/t/how-do-i-set-the-server-to-0-0-0-0-for-deployment-using-docker/216/2?u=shuaib&lt;/denchmark-link&gt;

Essentially using a config.toml witht the following config:
&lt;denchmark-code&gt;[server]
enableCORS = false
headless = true

[browser]
serverAddress = "0.0.0.0"
gatherUsageStats = false
serverPort = 9000
&lt;/denchmark-code&gt;

It seems like the issue occurs because streamlit attempts to make tornado listen on an external ip address, when external up cannot be fetched/read. I might be wrong, but haven't used tornado so someone with more knowledge maybe able to troubleshoot easily.
check the bootstrap.py, Server.py and get_external_ip() in net_util.py along with the stack trace my my comment above. Happy to look into it and post a fix if someone can give me some pointers.
		</comment>
		<comment id='4' author='coffeedjimmy' date='2020-03-27T07:03:23Z'>
		For me this error is raised when I start the streamlit script with --server.headless True
But sometimes it runs and gives a very strange message:
&lt;denchmark-code&gt;  You can now view your Streamlit app in your browser.

  Network URL: http://10.204.150.61:8511
  External URL: http://&lt;!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN"&gt;

&lt;html&gt;
&lt;head&gt;
	&lt;meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"&gt;
&lt;meta http-equiv="Expires" content="-1"/&gt;
&lt;meta http-equiv="Pragma" content="no-cache"/&gt;
&lt;meta http-equiv="Cache-Control" content="no-cache"/&gt;
	&lt;meta name="id" content="polLoginRedirect" &gt;
	&lt;meta http-equiv="Content-Type" content="text/html; charset=UTF-8"&gt;
	&lt;title&gt;Policy Login Redirect&lt;/title&gt;
	&lt;script type="text/JavaScript" src="jquery_1_8_3-6.2.5-1589068415(eng).js"&gt;&lt;/script&gt;
	&lt;script type="text/javascript"&gt;
	&lt;!--
	var strPolicyRequir = "The policy set up by your network administrator requires that ";
	var strAuthYourself = "you authenticate yourself with this firewall before you can have access.";
	var strAuthYourselfInDomain = "only authenticated users are allowed access through this firewall. You do not appear to be logged into the domain, and so must authenticate yourself before you can have access.";
	var strAuthIntro = "To authenticate yourself click on the following link and enter your user name and password to log in to the firewall.";
	var strClickLogin = "Click here to log in";
	// --&gt;
	&lt;/script&gt;
	&lt;script type="text/JavaScript" src="polLoginRedirect.js"&gt;&lt;/script&gt;
	&lt;link rel=stylesheet href="swl_login-6.2.5-328142343(eng).css" TYPE="text/css"&gt;
&lt;/head&gt;
&lt;body class="login_bg"&gt;
	&lt;div class="login_outer"&gt;
		&lt;div class="login_inner"&gt;
			&lt;div class="vgap48"&gt;&lt;/div&gt;
			&lt;div class="login_logo"&gt;
				&lt;img src="logo_sw.png"&gt;
			&lt;/div&gt;
			&lt;div class="login_prodname"&gt;
				Network Security Appliance
			&lt;/div&gt;
			&lt;div class="vgap48"&gt;&lt;/div&gt;
			&lt;div class="contentWithIconBox"&gt;
				&lt;div class="containter_left"&gt;
					&lt;div class="icon_warning"&gt;&lt;/div&gt;
				&lt;/div&gt;
				&lt;div class="container_right"&gt;
					&lt;div class="login_msg_header"&gt;
						Authentication Required
					&lt;/div&gt;
					&lt;div id="popup_box_text" class="login_msg_content"&gt;
						&lt;a href="https://10.7.0.14:444/auth.html?cid=3"&gt;&lt;/a&gt;
					&lt;/div&gt;
				&lt;/div&gt;
			&lt;/div&gt;
		&lt;/div&gt;
	&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;:8511
&lt;/denchmark-code&gt;

Note that I run it as a service so it has never run with a headless=False, so there are no credentials created.
I found that if I add the option --browser.serverAddress "0.0.0.0", it seems to work
Note that I am with

windows 10, running as a service
python 3.7.7
streamlit 0.56

		</comment>
		<comment id='5' author='coffeedjimmy' date='2020-04-17T00:21:38Z'>
		I deploy app in heroku and before this I try run app locally.
$ heroku local
My app starts as expected but I include shell script which must run in server.
This script create file
~/.streamlit/config.toml
[server]
headless = true
enableCORS=false
port = 5000
After that a had this exception.
I had same EXCEPTION! 'NoneType' object has no attribute 'strip'
Yes. I can run app like suggest &lt;denchmark-link:https://github.com/hcoohb&gt;@hcoohb&lt;/denchmark-link&gt;

$ streamlit hello --browser.serverAddress "0.0.0.0"
But I just remove config.toml :-)
		</comment>
	</comments>
</bug>