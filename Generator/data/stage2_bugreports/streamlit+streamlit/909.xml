<bug id='909' author='dchudz' open_date='2020-01-02T02:34:04Z' closed_time='2020-01-03T22:28:08Z'>
	<summary>matplotlib figure leaves empty space on second call</summary>
	<description>
&lt;denchmark-h:h1&gt;Summary&lt;/denchmark-h&gt;

Type here a clear and concise description of the bug. Aim for 2-3 sentences.
&lt;denchmark-h:h1&gt;Steps to reproduce&lt;/denchmark-h&gt;

This is hi.py:
&lt;denchmark-code&gt;import numpy as np
import streamlit as st
import matplotlib.pyplot as plt

x = np.linspace(-10, 10)

st.text('before fig')
fig, axes = plt.subplots()
axes.scatter(x, x ** 2)
st.pyplot(fig)
st.text('showed fig once')
axes.scatter(x, x ** 3)
st.pyplot(fig)
st.text("showed fig again")
&lt;/denchmark-code&gt;

Then streamlit run hi.py
&lt;denchmark-h:h2&gt;Expected behavior:&lt;/denchmark-h&gt;

I expected to see in the browser window:
&lt;denchmark-code&gt;before fig
&lt;figure of x vs x^2&gt;
showed fig once
&lt;figure of x vs x^3&gt;
showed fig again
&lt;/denchmark-code&gt;

&lt;denchmark-h:h2&gt;Actual behavior:&lt;/denchmark-h&gt;

I actually see:
&lt;denchmark-code&gt;before fig
&lt;figure of x vs x^2&gt;
showed fig once
&lt;empty space where I expected the second figure&gt;
showed fig again
&lt;/denchmark-code&gt;

The difference is that where I expected the figure to be shown again, there is empty space.
&lt;denchmark-h:h1&gt;Debug info&lt;/denchmark-h&gt;


Streamlit version: 0.52.2
Python version: 3.6.4
Using pip and virtualenvwrapper
OS version: MacOS Sierra 10.12.4
Browser version: Chrome Version 78.0.3904.97 (Official Build) (64-bit)

&lt;denchmark-h:h1&gt;Additional information&lt;/denchmark-h&gt;

The warning seems relevant:
&lt;denchmark-code&gt;streamlit run hi.py

  You can now view your Streamlit app in your browser.

  Local URL: http://localhost:8501
  Network URL: http://192.168.0.17:8501

CoreAnimation: warning, deleted thread with uncommitted CATransaction; set CA_DEBUG_TRANSACTIONS=1 in environment to log backtraces, or set CA_ASSERT_MAIN_THREAD_TRANSACTIONS=1 to abort when an implicit transaction isn't created on a main thread.
&lt;/denchmark-code&gt;

	</description>
	<comments>
		<comment id='1' author='dchudz' date='2020-01-03T20:23:26Z'>
		Hi &lt;denchmark-link:https://github.com/dchudz&gt;@dchudz&lt;/denchmark-link&gt;
 ,
Looks like you need to add the new clear_figure parameter to your st.pyplot call.
&lt;denchmark-code&gt;axes.scatter(x, x ** 2)
st.pyplot(fig, clear_figure=False)
st.text('showed fig once')
&lt;/denchmark-code&gt;


clear_figure (bool) â€“ If True or unspecified, the figure will be cleared after being rendered. (This simulates Jupyterâ€™s approach to matplotlib rendering.)

&lt;denchmark-link:https://streamlit.io/docs/api.html?highlight=clear_figure#streamlit.pyplot&gt;https://streamlit.io/docs/api.html?highlight=clear_figure#streamlit.pyplot&lt;/denchmark-link&gt;


Breaking changes:
ðŸ§¹ st.pyplot now clears figures by default, since thatâ€™s what you want 99% of the time. This allows you to create two or more Matplotlib charts without having to call pyplot.clf every time. If you want to turn this behavior off, use st.pyplot(clear_figure=False)

&lt;denchmark-link:https://streamlit.io/docs/changelog.html?highlight=clear_figure&gt;https://streamlit.io/docs/changelog.html?highlight=clear_figure&lt;/denchmark-link&gt;

		</comment>
		<comment id='2' author='dchudz' date='2020-01-03T22:28:08Z'>
		Oh, right. Thanks/sorry.
I love streamlit.
		</comment>
	</comments>
</bug>