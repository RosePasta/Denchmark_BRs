<bug id='222' author='kmatt' open_date='2019-10-01T16:09:47Z' closed_time='2019-10-01T23:07:45Z'>
	<summary>DataFrame demo: Streamlit failed to hash an object of type &amp;lt;class 'code'&amp;gt;</summary>
	<description>
&lt;denchmark-h:h1&gt;Summary&lt;/denchmark-h&gt;

Running the DataFrame demo on a fresh install results in Streamlit failed to hash an object of type &lt;class 'code'&gt;
&lt;denchmark-h:h1&gt;Steps to reproduce&lt;/denchmark-h&gt;

What are the steps we should take to reproduce the bug:

$ pip install streamlit
$ streamlit hello
In browser select DataFrame Demo

&lt;denchmark-h:h2&gt;Expected behavior:&lt;/denchmark-h&gt;

See the demo
&lt;denchmark-h:h2&gt;Actual behavior:&lt;/denchmark-h&gt;

Stacktrace shown in browser app
&lt;denchmark-code&gt;NameError: name 'urllib' is not defined
File "/Users/kmatt/anaconda3/lib/python3.7/site-packages/streamlit/ScriptRunner.py", line 306, in _run_script exec(code, module.__dict__)
File "/Users/kmatt/anaconda3/lib/python3.7/site-packages/streamlit/hello.py", line 329, in &lt;module&gt; run()
File "/Users/kmatt/anaconda3/lib/python3.7/site-packages/streamlit/hello.py", line 303, in run demo()
File "/Users/kmatt/anaconda3/lib/python3.7/site-packages/streamlit/hello.py", line 243, in data_frame_demo except urllib.error.URLError:
&lt;/denchmark-code&gt;

&lt;denchmark-h:h1&gt;Debug info&lt;/denchmark-h&gt;


Streamlit version: Streamlit, version 0.47.1
Python version: Python 3.7.3
Using Conda
OS version: macOS 10.14.5
Browser version: Chrome 77.0.3865.90

	</description>
	<comments>
		<comment id='1' author='kmatt' date='2019-10-01T16:20:57Z'>
		Similar result with a fresh Python 3.6 environment:
&lt;denchmark-code&gt;conda create --name streamlit python=3.6
conda activate streamlit
pip install streamlit
streamlit hello
&lt;/denchmark-code&gt;

&lt;denchmark-code&gt;NameError: name 'urllib' is not defined
File "/Users/kmatt/anaconda3/envs/streamlit/lib/python3.6/site-packages/streamlit/ScriptRunner.py", line 306, in _run_script exec(code, module.__dict__)
File "/Users/kmatt/anaconda3/envs/streamlit/lib/python3.6/site-packages/streamlit/hello.py", line 329, in &lt;module&gt; run()
File "/Users/kmatt/anaconda3/envs/streamlit/lib/python3.6/site-packages/streamlit/hello.py", line 303, in run demo()
File "/Users/kmatt/anaconda3/envs/streamlit/lib/python3.6/site-packages/streamlit/hello.py", line 243, in data_frame_demo except urllib.error.URLError:
&lt;/denchmark-code&gt;

		</comment>
		<comment id='2' author='kmatt' date='2019-10-01T16:30:04Z'>
		Demo functions in a Python 2.7 env.
		</comment>
		<comment id='3' author='kmatt' date='2019-10-01T17:53:58Z'>
		Thanks for the bug report! This is very odd... I'm pretty sure urllib is &lt;denchmark-link:https://docs.python.org/3/library/urllib.html&gt;a standard Python library&lt;/denchmark-link&gt;
.
I'm trying to repro now. Will get back to you.
		</comment>
		<comment id='4' author='kmatt' date='2019-10-01T18:41:19Z'>
		I don't see an import urllib in this file:
&lt;denchmark-link:https://github.com/streamlit/streamlit/blob/0.47.1/lib/streamlit/hello.py&gt;https://github.com/streamlit/streamlit/blob/0.47.1/lib/streamlit/hello.py&lt;/denchmark-link&gt;

basically, it looks like you're missing an import statement, but the code path that requires it only runs in the "no internet connection" case
		</comment>
		<comment id='5' author='kmatt' date='2019-10-01T18:45:46Z'>
		Thanks! Yeah, we're getting a fix together to push out imminently -
Thanks for the heads up, &lt;denchmark-link:https://github.com/kmatt&gt;@kmatt&lt;/denchmark-link&gt;
 and &lt;denchmark-link:https://github.com/joelgrus&gt;@joelgrus&lt;/denchmark-link&gt;
!
		</comment>
		<comment id='6' author='kmatt' date='2019-10-02T20:07:15Z'>
		The fix was cherrypicked and released as 0.47.2
Thanks all!
		</comment>
	</comments>
</bug>