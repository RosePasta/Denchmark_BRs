<bug id='648' author='andaag' open_date='2019-11-08T12:17:01Z' closed_time='2019-12-02T23:14:37Z'>
	<summary>vscode debugging failure</summary>
	<description>
&lt;denchmark-h:h1&gt;Summary&lt;/denchmark-h&gt;

Following the tutorial on &lt;denchmark-link:https://awesome-streamlit.readthedocs.io/en/latest/vscode.html&gt;https://awesome-streamlit.readthedocs.io/en/latest/vscode.html&lt;/denchmark-link&gt;
 does not work. Streamlit apps can not be started with ptvsd.
Loading the browser on a streamlit app that has ptvsd enabled causes the following exception
&lt;denchmark-code&gt;ValueError: signal only works in main thread
File "/home/neuron/src/sch/streamlit-test/venv/lib/python3.6/site-packages/streamlit/ScriptRunner.py", line 311, in _run_script exec(code, module.__dict__)
File "/home/neuron/src/sch/streamlit-test/test.py", line 5, in &lt;module&gt; ptvsd.enable_attach(address=('localhost', 5678), redirect_output=True)
File "/home/neuron/src/sch/streamlit-test/venv/lib/python3.6/site-packages/ptvsd/attach_server.py", line 101, in enable_attach ptvsd_enable_attach(address)
File "/home/neuron/src/sch/streamlit-test/venv/lib/python3.6/site-packages/ptvsd/_remote.py", line 64, in enable_attach **kwargs)
File "/home/neuron/src/sch/streamlit-test/venv/lib/python3.6/site-packages/ptvsd/pydevd_hooks.py", line 128, in install daemon = Daemon(**kwargs)
File "/home/neuron/src/sch/streamlit-test/venv/lib/python3.6/site-packages/ptvsd/daemon.py", line 503, in __init__ super(Daemon, self).__init__(wait_for_user, **kwargs)
File "/home/neuron/src/sch/streamlit-test/venv/lib/python3.6/site-packages/ptvsd/daemon.py", line 100, in __init__ self._install_exit_handlers()
File "/home/neuron/src/sch/streamlit-test/venv/lib/python3.6/site-packages/ptvsd/daemon.py", line 425, in _install_exit_handlers self._exithandlers.install()
File "/home/neuron/src/sch/streamlit-test/venv/lib/python3.6/site-packages/ptvsd/exit_handlers.py", line 62, in install self._install_signal_handler()
File "/home/neuron/src/sch/streamlit-test/venv/lib/python3.6/site-packages/ptvsd/exit_handlers.py", line 103, in _install_signal_handler orig[sig] = signal.signal(sig, self._signal_handler)
File "/usr/lib/python3.6/signal.py", line 47, in signal handler = _signal.signal(_enum_to_int(signalnum), _enum_to_int(handler))
&lt;/denchmark-code&gt;

This is the script that can reproduce the issue:
&lt;denchmark-code&gt;#!/usr/bin/python3
import streamlit as st

import ptvsd
ptvsd.enable_attach(address=('localhost', 5678), redirect_output=True)
ptvsd.wait_for_attach()
print("PTSVD listening on localhost:5678")
&lt;/denchmark-code&gt;

&lt;denchmark-h:h1&gt;Debug info&lt;/denchmark-h&gt;


Streamlit version: Streamlit, version 0.49.0
Python version: Python 3.6.8
virtualenv
OS version: ubuntu 18.04.3 LTS
Browser version: Chrome Version 78.0.3904.70 (Official Build) (64-bit)

	</description>
	<comments>
		<comment id='1' author='andaag' date='2019-11-08T15:31:12Z'>
		Hi &lt;denchmark-link:https://github.com/andaag&gt;@andaag&lt;/denchmark-link&gt;
 . I’m the author of that document and i’m Using the integrated debugging like that everyday.
I can only speculate. But my best guess is that you need to update ptvsd. See &lt;denchmark-link:https://github.com/microsoft/ptvsd/issues/1682&gt;microsoft/ptvsd#1682&lt;/denchmark-link&gt;
.
If that does not work then file a bug to ptvsd on github and reference this issue.
Alternatives would be to try it with Streamlit 0.49 and Python 3.7.4. That’s what I am running.
If you solve it. Please write your solution here, so I can add it to the documentation.
Thanks.
		</comment>
		<comment id='2' author='andaag' date='2019-11-08T16:28:09Z'>
		&lt;denchmark-code&gt;altair==3.2.0
argh==0.26.2
astor==0.8.0
attrs==19.3.0
avro-python3==1.9.1
backcall==0.1.0
base58==1.0.3
blinker==1.4
boto3==1.10.12
botocore==1.13.12
certifi==2019.9.11
chardet==3.0.4
Click==7.0
confluent-kafka==1.2.0
decorator==4.4.1
docutils==0.15.2
entrypoints==0.3
enum-compat==0.0.3
fastavro==0.22.7
future==0.18.2
idna==2.8
importlib-metadata==0.23
ipdb==0.12.2
ipython==7.9.0
ipython-genutils==0.2.0
jedi==0.15.1
Jinja2==2.10.3
jmespath==0.9.4
jsonschema==3.1.1
MarkupSafe==1.1.1
more-itertools==7.2.0
numpy==1.17.3
pandas==0.25.3
parso==0.5.1
pathtools==0.1.2
pexpect==4.7.0
pickleshare==0.7.5
Pillow==6.2.1
pkg-resources==0.0.0
prompt-toolkit==2.0.10
protobuf==3.10.0
ptvsd==4.3.2
ptyprocess==0.6.0
Pygments==2.4.2
pyrsistent==0.15.5
python-dateutil==2.8.0
pytz==2019.3
PyYAML==5.1.2
requests==2.22.0
s3transfer==0.2.1
six==1.13.0
streamlit==0.49.0
toml==0.10.0
toolz==0.10.0
tornado==5.1.1
traitlets==4.3.3
tzlocal==2.0.0
urllib3==1.25.6
validators==0.14.0
watchdog==0.9.0
wcwidth==0.1.7
zipp==0.6.0
&lt;/denchmark-code&gt;

These are the complete versions of packages I'm running.
I was assuming it might be python version related, I'll check that as well.
		</comment>
		<comment id='3' author='andaag' date='2019-11-08T20:59:59Z'>
		Hi &lt;denchmark-link:https://github.com/andaag&gt;@andaag&lt;/denchmark-link&gt;

I reread the issue &lt;denchmark-link:https://github.com/microsoft/ptvsd/issues/1682&gt;microsoft/ptvsd#1682&lt;/denchmark-link&gt;
 and compared the dates to the release date of your package on PyPI.
It seems the fix has not been released yet.
Could it help writing about your problem in that thread to get it released?
Also in that github they write it’s that the problem is on specific os’s.
I’m on windows.
		</comment>
		<comment id='4' author='andaag' date='2019-11-11T08:59:26Z'>
		With that fix I run into this issue : &lt;denchmark-link:https://github.com/microsoft/ptvsd/issues/1854&gt;https://github.com/microsoft/ptvsd/issues/1854&lt;/denchmark-link&gt;

Where the workaround linked does not work.
		</comment>
		<comment id='5' author='andaag' date='2019-12-02T23:14:05Z'>
		Hey &lt;denchmark-link:https://github.com/andaag&gt;@andaag&lt;/denchmark-link&gt;
 -
I don't think we've tested Streamlit with ptvsd, so I can't comment on that particular plugin. (The awesome-streamlit project is created by an (awesome!) Streamlit community member, so the doc you're following doesn't come from us.)
I use &lt;denchmark-link:https://www.jetbrains.com/pycharm/download&gt;PyCharm&lt;/denchmark-link&gt;
 for all my Python debugging, so I'm not a VScode expert, but I was able to get a Streamlit debugging session working without any third-party plugins.
I edited my project's  file (&lt;denchmark-link:https://code.visualstudio.com/docs/python/debugging&gt;see here&lt;/denchmark-link&gt;
 for more details on creating that file), and added a new launch configuration:
{
    "name": "Streamlit: Current File (Integrated Terminal)",
    "type": "python",
    "request": "launch",
    "program": "/Users/tim/.local/share/virtualenvs/lib-CDRh8goq/bin/streamlit",
    "args": [
        "run",
        "${file}"
    ],
    "console": "integratedTerminal"
},
The "program" argument here is the path to bin/streamlit within my local virtual environment, so you'll need to replace it with the correct path for your setup.
The "args" values here are just telling VScode to run streamlit run ${file}, where ${file} gets replaced with the currently active VScode file.
		</comment>
		<comment id='6' author='andaag' date='2019-12-02T23:14:37Z'>
		I'm going to close this issue because I don't think it's directly related to anything we're doing in Streamlit, but feel free to re-open it if you think this is a mistake!
		</comment>
		<comment id='7' author='andaag' date='2020-07-20T01:25:53Z'>
		I have the exact same error with Ubuntu 20.04, Python 3.6.9, and Streamlit 0.63.1. At least a hello world repository with vscode files would help a lot.
I just give up and want back to my Jupyter Notebook + iPython. After testing my algorithm I paste it back to Streamlit.
		</comment>
	</comments>
</bug>