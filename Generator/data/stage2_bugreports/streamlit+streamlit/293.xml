<bug id='293' author='dwiel' open_date='2019-10-07T01:32:24Z' closed_time='2020-03-04T21:22:01Z'>
	<summary>http requests connect, but websockets do not when running inside docker</summary>
	<description>
&lt;denchmark-h:h1&gt;Summary&lt;/denchmark-h&gt;

When running streamlit hello inside a docker container, I am able to connect to the web server, but none of the web socket requests succeed. This occurs in both docker and kubernetes.
&lt;denchmark-h:h1&gt;Steps to reproduce&lt;/denchmark-h&gt;

running the Dockerfile:
&lt;denchmark-code&gt;FROM ubuntu:latest

RUN pip3 install streamlit

ENV LC_ALL=C.UTF-8
ENV LANG=C.UTF-8

RUN mkdir -p /root/.streamlit/
RUN echo '[general]\nemail = "a@a.a"' &gt; /root/.streamlit/credentials.toml

CMD streamlit hello
&lt;/denchmark-code&gt;

run docker run -p 8501:8501 --rm -it streamlit
&lt;denchmark-link:https://user-images.githubusercontent.com/29542/66279713-2161e600-e881-11e9-93fb-da75e29988de.png&gt;&lt;/denchmark-link&gt;

&lt;denchmark-h:h1&gt;Debug info&lt;/denchmark-h&gt;


Streamlit version: 0.47.4
Python version: 3.6.8
Using Conda? PipEnv? PyEnv? Pex? no
OS version: ubuntu:latest
Browser version: Chrome Version 76.0.3809.132

	</description>
	<comments>
		<comment id='1' author='dwiel' date='2019-10-07T01:46:03Z'>
		It seems that adding the following into ~/.streamlit/config.toml did the trick.
&lt;denchmark-code&gt;[server]
enableCORS = false
&lt;/denchmark-code&gt;

Still, it would be nice not to have to do this, or to get an error message that might suggest it.
		</comment>
		<comment id='2' author='dwiel' date='2019-10-12T02:55:22Z'>
		I had a similar issue. The browser request for  ws://192.168.1.111:8080/stream returns 403. I changed the serverAddress = "localhost" to serverAddress = “192.168.1.111:8080”, which is my host ip and port.
Runing streamlit hello shows a strange urlURL: http://192.168.1.111:8080:80, but the web browser was able to make that websocket connection.
		</comment>
		<comment id='3' author='dwiel' date='2019-10-14T13:18:12Z'>
		streamlit works fine from my local installation but I can't run it from inside a docker image.
Any workaround?
		</comment>
		<comment id='4' author='dwiel' date='2020-01-15T13:53:24Z'>
		I think this is a bug that should be fixed, have raised for &lt;denchmark-link:https://github.com/streamlit/streamlit/issues/964&gt;#964&lt;/denchmark-link&gt;
  .
		</comment>
		<comment id='5' author='dwiel' date='2020-02-28T08:35:36Z'>
		I have updated the codebase. If you use version 0.56 onwards, this should be fixed.
		</comment>
		<comment id='6' author='dwiel' date='2020-03-04T21:22:01Z'>
		Closing since fix has been merged: &lt;denchmark-link:https://github.com/streamlit/streamlit/pull/965&gt;#965&lt;/denchmark-link&gt;

Please reopen if this is not the case.
		</comment>
	</comments>
</bug>