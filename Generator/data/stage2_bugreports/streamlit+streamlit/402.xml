<bug id='402' author='coolum001' open_date='2019-10-14T08:02:02Z' closed_time='2020-05-11T08:45:40Z'>
	<summary>Running demo-uber-nyc on Windows 10 fails: PermissionError: [Errno 13] Permission denied:</summary>
	<description>
&lt;denchmark-h:h1&gt;Summary&lt;/denchmark-h&gt;

Running the Uber NYC  demo fails with:
&lt;denchmark-code&gt;PermissionError: [Errno 13] Permission denied: 'C:\\Users\\donrc\\AppData\\Local\\Temp\\tmp6y02aw49'
&lt;/denchmark-code&gt;

&lt;denchmark-h:h1&gt;Steps to reproduce&lt;/denchmark-h&gt;

&lt;denchmark-code&gt;
(streamlitenv) C:\Users\donrc&gt;
(streamlitenv) C:\Users\donrc&gt;streamlit run https://raw.githubusercontent.com/streamlit/demo-uber-nyc-pickups/master/app.py
Traceback (most recent call last):
  File "d:\anaconda3\envs\streamlitenv\lib\runpy.py", line 193, in _run_module_as_main
    "__main__", mod_spec)
  File "d:\anaconda3\envs\streamlitenv\lib\runpy.py", line 85, in _run_code
    exec(code, run_globals)
  File "D:\Anaconda3\envs\streamlitenv\Scripts\streamlit.exe\__main__.py", line 9, in &lt;module&gt;
  File "d:\anaconda3\envs\streamlitenv\lib\site-packages\click\core.py", line 764, in __call__
    return self.main(*args, **kwargs)
  File "d:\anaconda3\envs\streamlitenv\lib\site-packages\click\core.py", line 717, in main
    rv = self.invoke(ctx)
  File "d:\anaconda3\envs\streamlitenv\lib\site-packages\click\core.py", line 1137, in invoke
    return _process_result(sub_ctx.command.invoke(sub_ctx))
  File "d:\anaconda3\envs\streamlitenv\lib\site-packages\click\core.py", line 956, in invoke
    return ctx.invoke(self.callback, **ctx.params)
  File "d:\anaconda3\envs\streamlitenv\lib\site-packages\click\core.py", line 555, in invoke
    return callback(*args, **kwargs)
  File "d:\anaconda3\envs\streamlitenv\lib\site-packages\streamlit\cli.py", line 205, in main_run
    _main_run(fp.name, args)
  File "d:\anaconda3\envs\streamlitenv\lib\site-packages\streamlit\cli.py", line 235, in _main_run
    bootstrap.run(file, command_line, args)
  File "d:\anaconda3\envs\streamlitenv\lib\site-packages\streamlit\bootstrap.py", line 181, in run
    server.add_preheated_report_session()
  File "d:\anaconda3\envs\streamlitenv\lib\site-packages\streamlit\server\Server.py", line 419, in add_preheated_report_session
    session = self._add_browser_connection(PREHEATED_REPORT_SESSION)
  File "d:\anaconda3\envs\streamlitenv\lib\site-packages\streamlit\server\Server.py", line 448, in _add_browser_connection
    command_line=self._command_line,
  File "d:\anaconda3\envs\streamlitenv\lib\site-packages\streamlit\ReportSession.py", line 96, in __init__
    self._report, self._on_source_file_changed
  File "d:\anaconda3\envs\streamlitenv\lib\site-packages\streamlit\watcher\LocalSourcesWatcher.py", line 88, in __init__
    module_name=None,  # Only the root script has None here.
  File "d:\anaconda3\envs\streamlitenv\lib\site-packages\streamlit\watcher\LocalSourcesWatcher.py", line 111, in _register_watcher
    watcher=FileWatcher(filepath, self.on_file_changed), module_name=module_name
  File "d:\anaconda3\envs\streamlitenv\lib\site-packages\streamlit\watcher\EventBasedFileWatcher.py", line 86, in __init__
    file_watcher.watch_file(file_path, on_file_changed)
  File "d:\anaconda3\envs\streamlitenv\lib\site-packages\streamlit\watcher\EventBasedFileWatcher.py", line 160, in watch_file
    folder_handler.add_file_change_listener(file_path, callback)
  File "d:\anaconda3\envs\streamlitenv\lib\site-packages\streamlit\watcher\EventBasedFileWatcher.py", line 252, in add_file_change_listener
    md5 = util.calc_md5_with_blocking_retries(file_path)
  File "d:\anaconda3\envs\streamlitenv\lib\site-packages\streamlit\watcher\util.py", line 63, in calc_md5_with_blocking_retries
    with open(file_path, "rb") as f:
PermissionError: [Errno 13] Permission denied: 'C:\\Users\\donrc\\AppData\\Local\\Temp\\tmp6y02aw49'

&lt;/denchmark-code&gt;

&lt;denchmark-h:h2&gt;Expected behavior:&lt;/denchmark-h&gt;

Expected demo to work
&lt;denchmark-h:h2&gt;Actual behavior:&lt;/denchmark-h&gt;

Demo fails to launch
(Maybe due to temporary files management being different on Windows and Unix?)
&lt;denchmark-h:h2&gt;Is this a regression?&lt;/denchmark-h&gt;

That is, did this use to work the way you expected in the past?
no
&lt;denchmark-h:h1&gt;Debug info&lt;/denchmark-h&gt;

&lt;denchmark-code&gt;
(streamlitenv) C:\Users\donrc&gt;python --version
Python 3.7.4

(streamlitenv) C:\Users\donrc&gt;streamlit --version
Streamlit, version 0.48.1

(streamlitenv) C:\Users\donrc&gt;conda info

     active environment : streamlitenv
    active env location : D:\Anaconda3\envs\streamlitenv
            shell level : 2
       user config file : C:\Users\donrc\.condarc
 populated config files : C:\Users\donrc\.condarc
          conda version : 4.5.11
    conda-build version : 3.9.2
         python version : 3.5.4.final.0
       base environment : D:\Anaconda3  (writable)
           channel URLs : https://repo.anaconda.com/pkgs/main/win-64
                          https://repo.anaconda.com/pkgs/main/noarch
                          https://repo.anaconda.com/pkgs/free/win-64
                          https://repo.anaconda.com/pkgs/free/noarch
                          https://repo.anaconda.com/pkgs/r/win-64
                          https://repo.anaconda.com/pkgs/r/noarch
                          https://repo.anaconda.com/pkgs/pro/win-64
                          https://repo.anaconda.com/pkgs/pro/noarch
                          https://repo.anaconda.com/pkgs/msys2/win-64
                          https://repo.anaconda.com/pkgs/msys2/noarch
                          https://conda.anaconda.org/conda-forge/win-64
                          https://conda.anaconda.org/conda-forge/noarch
          package cache : D:\Anaconda3\pkgs
                          C:\Users\donrc\AppData\Local\conda\conda\pkgs
       envs directories : D:\Anaconda3\envs
                          C:\Users\donrc\AppData\Local\conda\conda\envs
                          C:\Users\donrc\.conda\envs
               platform : win-64
             user-agent : conda/4.5.11 requests/2.18.4 CPython/3.5.4 Windows/10 Windows/10.0.18362
          administrator : False
             netrc file : None
           offline mode : False


(streamlitenv) C:\Users\donrc&gt;


Windows 10 Version 1903 (OS Build 18362.418)
&lt;/denchmark-code&gt;

&lt;denchmark-h:h1&gt;Additional information&lt;/denchmark-h&gt;

Created a conda environment just for streamlit, no other packages added.  Note my conda base environment is at 3.5.4, but the streamlit environment is at 3.7.4 (as shown above).
Happy to supply more information as needed
	</description>
	<comments>
		<comment id='1' author='coolum001' date='2019-10-20T11:46:18Z'>
		I have the same problem. Not running Conda though.
&lt;denchmark-h:h1&gt;Summary&lt;/denchmark-h&gt;

If i try to streamlit run &lt;github link&gt; I get a PermissionError.
&lt;denchmark-h:h1&gt;Steps to reproduce&lt;/denchmark-h&gt;

streamlit run https://raw.githubusercontent.com/MarcSkovMadsen/awesome-streamlit/master/package/awesome_streamlit/app/pages/contributions/interactive_gaussian_plot/interactive_gaussian_plot.py
&lt;denchmark-h:h2&gt;Expected behavior:&lt;/denchmark-h&gt;

The application runs without an error
&lt;denchmark-h:h2&gt;Actual behavior:&lt;/denchmark-h&gt;

I get the below error
$ streamlit run https://raw.githubusercontent.com/MarcSkovMadsen/awesome-streamlit/master/package/awesome_streamlit/app/pages
/contributions/interactive_gaussian_plot/interactive_gaussian_plot.py
Traceback (most recent call last):
  File "C:\Users\masma\AppData\Local\Programs\Python\Python37\lib\runpy.py", line 193, in _run_module_as_main
    "__main__", mod_spec)
  File "C:\Users\masma\AppData\Local\Programs\Python\Python37\lib\runpy.py", line 85, in _run_code
    exec(code, run_globals)
  File "C:\repos\private\awesomestreamlit\.venv\Scripts\streamlit.exe\__main__.py", line 9, in &lt;module&gt;
  File "c:\repos\private\awesomestreamlit\.venv\lib\site-packages\click\core.py", line 764, in __call__
    return self.main(*args, **kwargs)
  File "c:\repos\private\awesomestreamlit\.venv\lib\site-packages\click\core.py", line 717, in main
    rv = self.invoke(ctx)
  File "c:\repos\private\awesomestreamlit\.venv\lib\site-packages\click\core.py", line 1137, in invoke
    return _process_result(sub_ctx.command.invoke(sub_ctx))
  File "c:\repos\private\awesomestreamlit\.venv\lib\site-packages\click\core.py", line 956, in invoke
    return ctx.invoke(self.callback, **ctx.params)
  File "c:\repos\private\awesomestreamlit\.venv\lib\site-packages\click\core.py", line 555, in invoke
    return callback(*args, **kwargs)
  File "c:\repos\private\awesomestreamlit\.venv\lib\site-packages\streamlit\cli.py", line 149, in main_run
    _main_run(fp.name, args)
  File "c:\repos\private\awesomestreamlit\.venv\lib\site-packages\streamlit\cli.py", line 179, in _main_run
    bootstrap.run(file, command_line, args)
  File "c:\repos\private\awesomestreamlit\.venv\lib\site-packages\streamlit\bootstrap.py", line 181, in run
    server.add_preheated_report_session()
  File "c:\repos\private\awesomestreamlit\.venv\lib\site-packages\streamlit\server\Server.py", line 408, in add_preheated_report_session
    session = self._add_browser_connection(PREHEATED_REPORT_SESSION)
  File "c:\repos\private\awesomestreamlit\.venv\lib\site-packages\streamlit\server\Server.py", line 437, in _add_browser_connection
    command_line=self._command_line,
  File "c:\repos\private\awesomestreamlit\.venv\lib\site-packages\streamlit\ReportSession.py", line 96, in __init__
    self._report, self._on_source_file_changed
  File "c:\repos\private\awesomestreamlit\.venv\lib\site-packages\streamlit\watcher\LocalSourcesWatcher.py", line 87, in __init__
    module_name=None,  # Only the root script has None here.
  File "c:\repos\private\awesomestreamlit\.venv\lib\site-packages\streamlit\watcher\LocalSourcesWatcher.py", line 110, in _register_watcher
    watcher=FileWatcher(filepath, self.on_file_changed), module_name=module_name
  File "c:\repos\private\awesomestreamlit\.venv\lib\site-packages\streamlit\watcher\EventBasedFileWatcher.py", line 86, in __init__
    file_watcher.watch_file(file_path, on_file_changed)
  File "c:\repos\private\awesomestreamlit\.venv\lib\site-packages\streamlit\watcher\EventBasedFileWatcher.py", line 160, in watch_file
    folder_handler.add_file_change_listener(file_path, callback)
  File "c:\repos\private\awesomestreamlit\.venv\lib\site-packages\streamlit\watcher\EventBasedFileWatcher.py", line 248, in add_file_change_listener
    md5 = util.calc_md5_with_blocking_retries(file_path)
  File "c:\repos\private\awesomestreamlit\.venv\lib\site-packages\streamlit\watcher\util.py", line 63, in calc_md5_with_blocking_retries
    with open(file_path, "rb") as f:
PermissionError: [Errno 13] Permission denied: 'C:\\Users\\masma\\AppData\\Local\\Temp\\tmp9fba5gq4'
&lt;denchmark-h:h2&gt;Is this a regression?&lt;/denchmark-h&gt;

I dont't know. Have never tried running a Github url before.
&lt;denchmark-h:h1&gt;Debug info&lt;/denchmark-h&gt;


Streamlit version: 0.47.1
Python version: 3.72
Using Conda? PipEnv? PyEnv? Pex? No just python -m venv .venv
OS version: Windows 8.1
Browser version: Chrome

&lt;denchmark-h:h1&gt;Additional information&lt;/denchmark-h&gt;

My guess is that my enterprise laptop is rather restricted and that it's the cause of the error. But I would not be the only one to have a rather restricted pc. So I think it's something to solve.
I also get the PermissionError if I run the example from the Announcement Blog.
streamlit run
https://raw.githubusercontent.com/streamlit/demo-self-driving/master/app.py
:-)
		</comment>
		<comment id='2' author='coolum001' date='2019-10-20T15:37:27Z'>
		Do you get this error running as administrator?  If python was installed
globally but you're running as your normal user and not admin you would get
similar messages as it tries to download and run packages without the
elevated permissions needed.
&lt;denchmark-link:#&gt;…&lt;/denchmark-link&gt;


On Sun, Oct 20, 2019, 5:46 AM Marc Skov Madsen ***@***.***&gt; wrote:
 I have the same problem. Not running Conda though.
 Summary

 If i try to streamlit run &lt;github link&gt; I get a PermissionError.
 Steps to reproduce

 streamlit run https://raw.githubusercontent.com/MarcSkovMadsen/awesome-streamlit/master/package/awesome_streamlit/app/pages/contributions/interactive_gaussian_plot/interactive_gaussian_plot.py

 Expected behavior:

 The application runs without an error
 Actual behavior:

 I get the below error

 $ streamlit run https://raw.githubusercontent.com/MarcSkovMadsen/awesome-streamlit/master/package/awesome_streamlit/app/pages
 /contributions/interactive_gaussian_plot/interactive_gaussian_plot.py &lt;https://raw.githubusercontent.com/MarcSkovMadsen/awesome-streamlit/master/package/awesome_streamlit/app/pages/contributions/interactive_gaussian_plot/interactive_gaussian_plot.py&gt;
 Traceback (most recent call last):
   File "C:\Users\masma\AppData\Local\Programs\Python\Python37\lib\runpy.py", line 193, in _run_module_as_main
     "__main__", mod_spec)
   File "C:\Users\masma\AppData\Local\Programs\Python\Python37\lib\runpy.py", line 85, in _run_code
     exec(code, run_globals)
   File "C:\repos\private\awesomestreamlit\.venv\Scripts\streamlit.exe\__main__.py", line 9, in &lt;module&gt;
   File "c:\repos\private\awesomestreamlit\.venv\lib\site-packages\click\core.py", line 764, in __call__
     return self.main(*args, **kwargs)
   File "c:\repos\private\awesomestreamlit\.venv\lib\site-packages\click\core.py", line 717, in main
     rv = self.invoke(ctx)
   File "c:\repos\private\awesomestreamlit\.venv\lib\site-packages\click\core.py", line 1137, in invoke
     return _process_result(sub_ctx.command.invoke(sub_ctx))
   File "c:\repos\private\awesomestreamlit\.venv\lib\site-packages\click\core.py", line 956, in invoke
     return ctx.invoke(self.callback, **ctx.params)
   File "c:\repos\private\awesomestreamlit\.venv\lib\site-packages\click\core.py", line 555, in invoke
     return callback(*args, **kwargs)
   File "c:\repos\private\awesomestreamlit\.venv\lib\site-packages\streamlit\cli.py", line 149, in main_run
     _main_run(fp.name, args)
   File "c:\repos\private\awesomestreamlit\.venv\lib\site-packages\streamlit\cli.py", line 179, in _main_run
     bootstrap.run(file, command_line, args)
   File "c:\repos\private\awesomestreamlit\.venv\lib\site-packages\streamlit\bootstrap.py", line 181, in run
     server.add_preheated_report_session()
   File "c:\repos\private\awesomestreamlit\.venv\lib\site-packages\streamlit\server\Server.py", line 408, in add_preheated_report_session
     session = self._add_browser_connection(PREHEATED_REPORT_SESSION)
   File "c:\repos\private\awesomestreamlit\.venv\lib\site-packages\streamlit\server\Server.py", line 437, in _add_browser_connection
     command_line=self._command_line,
   File "c:\repos\private\awesomestreamlit\.venv\lib\site-packages\streamlit\ReportSession.py", line 96, in __init__
     self._report, self._on_source_file_changed
   File "c:\repos\private\awesomestreamlit\.venv\lib\site-packages\streamlit\watcher\LocalSourcesWatcher.py", line 87, in __init__
     module_name=None,  # Only the root script has None here.
   File "c:\repos\private\awesomestreamlit\.venv\lib\site-packages\streamlit\watcher\LocalSourcesWatcher.py", line 110, in _register_watcher
     watcher=FileWatcher(filepath, self.on_file_changed), module_name=module_name
   File "c:\repos\private\awesomestreamlit\.venv\lib\site-packages\streamlit\watcher\EventBasedFileWatcher.py", line 86, in __init__
     file_watcher.watch_file(file_path, on_file_changed)
   File "c:\repos\private\awesomestreamlit\.venv\lib\site-packages\streamlit\watcher\EventBasedFileWatcher.py", line 160, in watch_file
     folder_handler.add_file_change_listener(file_path, callback)
   File "c:\repos\private\awesomestreamlit\.venv\lib\site-packages\streamlit\watcher\EventBasedFileWatcher.py", line 248, in add_file_change_listener
     md5 = util.calc_md5_with_blocking_retries(file_path)
   File "c:\repos\private\awesomestreamlit\.venv\lib\site-packages\streamlit\watcher\util.py", line 63, in calc_md5_with_blocking_retries
     with open(file_path, "rb") as f:
 PermissionError: [Errno 13] Permission denied: 'C:\\Users\\masma\\AppData\\Local\\Temp\\tmp9fba5gq4'

 Is this a regression?

 I dont't know. Have never tried running a Github url before.
 Debug info

    - Streamlit version: 0.47.1
    - Python version: 3.72
    - Using Conda? PipEnv? PyEnv? Pex? No just python -m venv .venv
    - OS version: Windows 8.1
    - Browser version: Chrome

 Additional information

 My guess is that my enterprise laptop is rather restricted and that it's
 the cause of the error. But I would not be the only one to have a rather
 restricted pc. So I think it's something to solve.

 I also get the PermissionError if I run the example from the Announcement
 Blog.

 streamlit run
 https://raw.githubusercontent.com/streamlit/demo-self-driving/master/app.py

 :-)

 —
 You are receiving this because you are subscribed to this thread.
 Reply to this email directly, view it on GitHub
 &lt;#402?email_source=notifications&amp;email_token=AC5CHIL5GH4JP4ILERBG7F3QPRAI5A5CNFSM4JAL2CL2YY3PNVWWK3TUL52HS4DFVREXG43VMVBW63LNMVXHJKTDN5WW2ZLOORPWSZGOEBYIJMA#issuecomment-544244912&gt;,
 or unsubscribe
 &lt;https://github.com/notifications/unsubscribe-auth/AC5CHING4MZVOHJNBLFBXY3QPRAI5ANCNFSM4JAL2CLQ&gt;
 .



		</comment>
		<comment id='3' author='coolum001' date='2019-10-21T07:01:14Z'>
		Hi
I am running as a Windows 10 Administrator  [Windows Icon -&gt; Settings -&gt; Your info]
The doc'n for
&lt;denchmark-code&gt;tempfile.NamedTemporaryFile(mode='w+b', buffering=None, encoding=None, newline=None, suffix=None, prefix=None, dir=None, delete=True)
&lt;/denchmark-code&gt;

for Python 3.7, says:
&lt;denchmark-code&gt;Whether the name can be used to open the file a second time, while the named temporary file is still open, varies across platforms (it can be so used on Unix; it cannot on Windows NT or later)
&lt;/denchmark-code&gt;

Could this be a cause of this issue?
Cheers, Don
		</comment>
		<comment id='4' author='coolum001' date='2020-05-11T08:41:07Z'>
		Hi all, I have not been able to reproduce this issue using streamlit 0.59.0 in python 3.7 or in python 3.8  -- I can run the Uber demo, for example, from the web without an issue.  This is on my personal Windows 10 install.
I suspect the problem may be site-specific (i.e. specific to how Windows was set up).
People who play games seem to run into write-permission errors like this; &lt;denchmark-link:https://answers.microsoft.com/en-us/windows/forum/windows_10-files-winpc/give-permissions-to-files-and-folders-in-windows/78ee562c-a21f-4a32-8691-73aac1415373&gt;here's a Windows troubleshooting page describing steps to correct this.&lt;/denchmark-link&gt;
.
		</comment>
		<comment id='5' author='coolum001' date='2020-05-11T08:45:39Z'>
		&lt;denchmark-link:https://github.com/coolum001&gt;@coolum001&lt;/denchmark-link&gt;
 &lt;denchmark-link:https://github.com/MarcSkovMadsen&gt;@MarcSkovMadsen&lt;/denchmark-link&gt;
  -- since I can't reproduce the bug, and due to the age of this report, I am thinking we should close this.
Let us know if you're still seeing this problem and we can reopen it.
		</comment>
	</comments>
</bug>