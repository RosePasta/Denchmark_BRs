<bug id='2139' author='theimposingdwarf' open_date='2020-10-10T01:46:50Z' closed_time='2020-10-15T16:15:17Z'>
	<summary>Media + Components (Ace Editor) don't work in Safari or Chrome iOS</summary>
	<description>
&lt;denchmark-h:h1&gt;Summary&lt;/denchmark-h&gt;

Playing audio and using components (like Ace Editor) don't work in Safari for desktop or iOS or for Chrome for iOS. These same functions all work great on Chrome for desktop.
&lt;denchmark-h:h1&gt;Steps to reproduce&lt;/denchmark-h&gt;


Go Here: https://share.streamlit.io/jkanner/streamlit-audio/main/app.py
Or run this script: streamlit run https://raw.githubusercontent.com/Ghasel/streamlit-ace/master/examples/streamlit_ace_demo.py

&lt;denchmark-h:h2&gt;Expected behavior:&lt;/denchmark-h&gt;

The hosted app at 1 has audio files that should play in Safari. They only work in Chrome.
Running the app locally at 2 uses the Ace Editor and should echo below what is in the editor.
&lt;denchmark-h:h2&gt;Actual behavior:&lt;/denchmark-h&gt;

The hosted apps audio files only work in Chrome and yield an error in Safari.
The echo only works in Chrome and adding text to the editor in an app viewed in Safari gives an empty string.
&lt;denchmark-h:h2&gt;Is this a regression?&lt;/denchmark-h&gt;

no
&lt;denchmark-h:h1&gt;Debug info&lt;/denchmark-h&gt;

Hosted app is on Streamlit for Teams Beta

Streamlit version: 0.68.0
Python version: 3.8.3
Using Conda? PipEnv? PyEnv? Pex?
OS version: Mac OS 10.15.3
Browser version: Safari 13.0.5, Chrome Version 85.0.4183.121

&lt;denchmark-h:h1&gt;Additional information&lt;/denchmark-h&gt;

From discussions here: &lt;denchmark-link:https://discuss.streamlit.io/t/trouble-with-st-audio-in-safari/6160&gt;Trouble with st Audio in Safari&lt;/denchmark-link&gt;

and here: &lt;denchmark-link:https://discuss.streamlit.io/t/ace-editor/3657/9&gt;Ace Editor Release Thread&lt;/denchmark-link&gt;

	</description>
	<comments>
		<comment id='1' author='theimposingdwarf' date='2020-10-12T18:11:46Z'>
		Hi &lt;denchmark-link:https://github.com/theimposingdwarf&gt;@theimposingdwarf&lt;/denchmark-link&gt;
 Thank you so much for the report. I can't speak for the Ace Editor yet, but I can explain the audio. Can you test on the ? You can install it by uninstalling streamlit and run .
To explain the problem, Safari requires the server to support &lt;denchmark-link:https://developer.mozilla.org/en-US/docs/Web/HTTP/Range_requests&gt;Range Requests&lt;/denchmark-link&gt;
. We found this problem with regard to videos, so I am sure this would apply to audio
See &lt;denchmark-link:https://github.com/streamlit/streamlit/issues/1804#issuecomment-687328551&gt;#1804 (comment)&lt;/denchmark-link&gt;

I can't explain the Ace Editor yet, but could you verify the issue continues exists on nightly? Thanks!
		</comment>
		<comment id='2' author='theimposingdwarf' date='2020-10-14T01:58:49Z'>
		I can confirm that with streamlit-nightly 0.68.2.dev20201012 it looks like the video player (I haven't had a chance to verify if the audio player works yet) is working well in desktop and mobile safari.
It does look like the Ace Editor still isn't working.
		</comment>
		<comment id='3' author='theimposingdwarf' date='2020-10-14T05:46:18Z'>
		&lt;denchmark-link:https://github.com/theimposingdwarf&gt;@theimposingdwarf&lt;/denchmark-link&gt;
 I have a PR out for a fix. Turns out Safari doesn't support the BigInt64Array Type, and so there was a . This is an update to the , so streamlit-ace will need to upgrade their library and repackage it when it's released.
		</comment>
		<comment id='4' author='theimposingdwarf' date='2020-10-15T16:15:17Z'>
		&lt;denchmark-link:https://github.com/theimposingdwarf&gt;@theimposingdwarf&lt;/denchmark-link&gt;
 the update to the  is out. &lt;denchmark-link:https://www.npmjs.com/package/streamlit-component-lib&gt;https://www.npmjs.com/package/streamlit-component-lib&lt;/denchmark-link&gt;

The next step would be for &lt;denchmark-link:https://github.com/Ghasel/streamlit-ace&gt;https://github.com/Ghasel/streamlit-ace&lt;/denchmark-link&gt;
 to update the component to use the latest library. I am going to close this issue since the issue should be resolved on Streamlit's side. If the component fails with the latest update, feel free to reopen this.
		</comment>
		<comment id='5' author='theimposingdwarf' date='2020-10-15T16:48:39Z'>
		Hello, thanks for the fix &lt;denchmark-link:https://github.com/kmcgrady&gt;@kmcgrady&lt;/denchmark-link&gt;
!
&lt;denchmark-link:https://github.com/theimposingdwarf&gt;@theimposingdwarf&lt;/denchmark-link&gt;
 I'll update Streamlit Ace this week-end
		</comment>
		<comment id='6' author='theimposingdwarf' date='2020-10-17T01:22:38Z'>
		&lt;denchmark-link:https://github.com/kmcgrady&gt;@kmcgrady&lt;/denchmark-link&gt;
 &lt;denchmark-link:https://github.com/okld&gt;@okld&lt;/denchmark-link&gt;
 Thank you! Looking forward to trying it out!
		</comment>
		<comment id='7' author='theimposingdwarf' date='2020-10-19T12:05:41Z'>
		&lt;denchmark-link:https://github.com/theimposingdwarf&gt;@theimposingdwarf&lt;/denchmark-link&gt;
 Little update, I just pushed a new version. You can now pip install --upgrade streamlit-ace
		</comment>
		<comment id='8' author='theimposingdwarf' date='2020-10-20T00:44:03Z'>
		Works great! &lt;denchmark-link:https://github.com/okld&gt;@okld&lt;/denchmark-link&gt;
 Is it just me or did the previous version update the variable without needing to press control+enter?
		</comment>
		<comment id='9' author='theimposingdwarf' date='2020-10-20T16:31:01Z'>
		I didn't update the parameter since it was introduced (version 0.0.2). By default it auto refreshes streamlit.
		</comment>
	</comments>
</bug>