<bug id='583' author='PALuczak' open_date='2019-10-31T15:21:28Z' closed_time='2020-01-30T17:40:37Z'>
	<summary>Streamlit stuck on loading screen on Docker</summary>
	<description>
&lt;denchmark-h:h1&gt;Summary&lt;/denchmark-h&gt;

When attempting to run streamlit under Docker it is stuck on the "connecting" screen.
&lt;denchmark-h:h1&gt;Steps to reproduce&lt;/denchmark-h&gt;


docker run -it --rm -p 42851:8501 python:3.7 /bin/bash
pip install streamlit
streamlit hello
Go to http://&lt; server IP &gt;:42851/
Streamlit is stuck "connecting"
The issue also appears when using a Dockerfile

&lt;denchmark-h:h2&gt;Expected behavior:&lt;/denchmark-h&gt;

Streamlit should finish "connecting" and start the hello app
&lt;denchmark-h:h2&gt;Actual behavior:&lt;/denchmark-h&gt;

The application is stuck on "connecting" screen (checked for over 1h before giving up):
&lt;denchmark-link:https://user-images.githubusercontent.com/12057745/67960132-18eb9980-fbfa-11e9-8698-80ffa5f342dc.png&gt;&lt;/denchmark-link&gt;

Output from the terminal:
&lt;denchmark-code&gt;root@35427972d7ee:/# streamlit hello

  Telemetry: As an open source project, we collect usage statistics.
  We cannot see and do not store information contained in Streamlit apps.

  If you'd like to opt out, add the following to ~/.streamlit/config.toml,
  creating that file if necessary:

    [browser]
    gatherUsageStats = false


  You can now view your Streamlit app in your browser.

  Network URL: http://172.17.0.6:8501
  External URL: http://&lt;external server IP&gt;:8501
&lt;/denchmark-code&gt;

&lt;denchmark-h:h2&gt;Is this a regression?&lt;/denchmark-h&gt;

no
&lt;denchmark-h:h1&gt;Debug info&lt;/denchmark-h&gt;


Streamlit version: Streamlit, version 0.49.0
Python version: Python 3.7.5 (same behaviour on python 3.8 and latest anaconda)
Using Docker: Docker version 19.03.4, build 9013bf583a
OS version: Linux myServer 4.9.0-9-amd64 #1 SMP Debian 4.9.168-1+deb9u5 (2019-08-11) x86_64 GNU/Linux
Browser version: Edge 79.0.309.5 (Official build) dev (64-bit

	</description>
	<comments>
		<comment id='1' author='PALuczak' date='2019-11-01T04:32:51Z'>
		Hi &lt;denchmark-link:https://github.com/PALuczak&gt;@PALuczak&lt;/denchmark-link&gt;

My guess is that inside docker it's waiting for you to enter your email. That's the first thing that happens when Streamlit is used the first time.
You can configure streamlit not to ask for an email in the ~/.streamlit/credentials.toml file
It should look like &lt;denchmark-link:https://github.com/MarcSkovMadsen/awesome-streamlit/blob/master/.streamlit/credentials.prod.toml&gt;https://github.com/MarcSkovMadsen/awesome-streamlit/blob/master/.streamlit/credentials.prod.toml&lt;/denchmark-link&gt;

You can see how I then copy that file using
RUN cp .streamlit/credentials.prod.toml ~/.streamlit/credentials.toml
in my Dockerfile for awesome-streamlit.org at
&lt;denchmark-link:https://github.com/MarcSkovMadsen/awesome-streamlit/blob/master/devops/docker/Dockerfile.prod&gt;https://github.com/MarcSkovMadsen/awesome-streamlit/blob/master/devops/docker/Dockerfile.prod&lt;/denchmark-link&gt;

		</comment>
		<comment id='2' author='PALuczak' date='2019-11-01T10:56:13Z'>
		&lt;denchmark-link:https://github.com/MarcSkovMadsen&gt;@MarcSkovMadsen&lt;/denchmark-link&gt;
 I have configured the  file as you described, unfortunately the issue still persists, though I tried your docker image and it worked correctly which suggests that it is some sort of configuration issue.
		</comment>
		<comment id='3' author='PALuczak' date='2019-12-11T14:31:27Z'>
		I have a similar issue when requesting the page through the domain name instead of the ip of the server. Could they be related?
		</comment>
		<comment id='4' author='PALuczak' date='2019-12-16T20:20:49Z'>
		Hey &lt;denchmark-link:https://github.com/PALuczak&gt;@PALuczak&lt;/denchmark-link&gt;
  , I'm seeing that Streamlit is running through port 8501, so try running docker redirect from 8501:8501, something like this:
docker run -p 8501:8501 -it ubuntu
instead of 42851
		</comment>
		<comment id='5' author='PALuczak' date='2020-01-30T17:40:37Z'>
		Closing this for now, if you still have this issue please reopen it.
		</comment>
		<comment id='6' author='PALuczak' date='2020-04-07T13:48:39Z'>
		Did manage to solve it by creating a ssh tunnel to connect to my local computer. As described here &lt;denchmark-link:https://docs.streamlit.io/tutorial/run_streamlit_remotely.html&gt;https://docs.streamlit.io/tutorial/run_streamlit_remotely.html&lt;/denchmark-link&gt;
.  This command did it for me
$ ssh -o logLevel=ERROR -L 8501:$IP_ADDRESS:8501 $USERNAME@$IP_ADDRESS
		</comment>
	</comments>
</bug>