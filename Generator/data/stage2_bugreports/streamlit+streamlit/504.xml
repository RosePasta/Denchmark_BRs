<bug id='504' author='Linshu107' open_date='2019-10-22T20:49:12Z' closed_time='2019-10-24T04:10:12Z'>
	<summary>Using checkbox/button to run the function</summary>
	<description>
&lt;denchmark-h:h1&gt;Summary&lt;/denchmark-h&gt;

When I click the checkbox, it runs the function and displays the result. However, when I click the button again, it looks like only return the result from last run (does not run the function again).
&lt;denchmark-h:h1&gt;Steps to reproduce&lt;/denchmark-h&gt;

Following is my code:
class FrameQueue:
－    def init(self):
－－    self.index = 0
－－    self.check_index = 0
－    def iter(self):
－－    return self
－    def next(self):
－－    self.index += 1
－－    self.check_index +=2
def main():
－    frames = FrameQueue()
－    if st.button("Next"):
－－    next(frames)
－－    st.write(frames.index)
－－    st.write(frames.check_index)
&lt;denchmark-h:h2&gt;Expected behavior:&lt;/denchmark-h&gt;

When I first click button "Next", I am expected to see 1 and 2. Output fits the expectation.
When I click the button "Next" second time, I expect to see 2 and 4. However, it still displays 1 and 2. Output does not match the expectation.
When I click the button "Next" third time, I expect to see 3 and 6. However, it still displays 1 and 2. Output does not match the expectation.
The same output is also observed when using checkbox.
&lt;denchmark-h:h1&gt;Debug info&lt;/denchmark-h&gt;


Streamlit version: 0.48.1
Python version: 2.7.12
OS version: Ubuntu 16.04.6 LTS
Browser version: Chrome 77.0.3865.120 (Official Build) (64-bit)
(already disable cache)

Any suggestions would be appreciated!! Thank you!
	</description>
	<comments>
		<comment id='1' author='Linshu107' date='2019-10-23T03:10:10Z'>
		From the &lt;denchmark-link:https://streamlit.io/docs/main_concepts.html#widgets&gt;docs&lt;/denchmark-link&gt;
:

There are no callbacks in Streamlit! Every interaction simply reruns the script from top-to-bottom

Your script is run again every time you interact with your button/checkbox.
And in you main() you initialize FrameQueue() every time the script is run..
&lt;denchmark-h:hr&gt;&lt;/denchmark-h&gt;

I had the same problem. You need to keep a state between each time your run your script.
I found the answer in this issue : &lt;denchmark-link:https://github.com/streamlit/streamlit/issues/165&gt;#165&lt;/denchmark-link&gt;

		</comment>
		<comment id='2' author='Linshu107' date='2019-10-24T00:32:04Z'>
		Hi Colanim,
Thank you for the direction!
So I try to use the "SessionState" right now. However, when I try to use the iterator "next()", it return None from the state. Could you please let me know where I get wrong?
The following is the updated main() function.
def main():
－ frame_queue = FrameQueue()
－ state = SessionState.get(frames = frame_queue)
－ if st.button("Next"):
－－ state.frames = next(state.frames)
－－ st.write(state.frames)  &lt;--use this to check the new state, and it print "None"
		</comment>
		<comment id='3' author='Linshu107' date='2019-10-24T01:11:59Z'>
		Your next() method return None...
And you update your state with the return value of the next() method ^^
Your next() method should be called alone, and it will update the object FrameQueue.
Try with this following code :
def main():
     frame_queue = FrameQueue()
     state = SessionState.get(frames = frame_queue)
     if st.button("Next"):
          next(state.frames)
          st.write(state.frames)
		</comment>
		<comment id='4' author='Linshu107' date='2019-10-24T04:10:12Z'>
		OMG you saved my life! I've been debugging so long.
Thank you Colanim!
		</comment>
	</comments>
</bug>