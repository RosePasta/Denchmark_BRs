<bug id='206' author='monchier' open_date='2019-09-28T18:48:34Z' closed_time='2019-10-02T22:35:19Z'>
	<summary>`ignore_cache` option of `st.cache` may be an old reference (error message)</summary>
	<description>
This error message shows up when the body a function contains some non-hashable piece of code. In this case a function. The message mention a ignore_cache option to st.cache that may have been renamed.
&lt;denchmark-link:https://user-images.githubusercontent.com/6821233/65821069-9ed48900-e1e5-11e9-9cf3-bd3457294633.png&gt;&lt;/denchmark-link&gt;

	</description>
	<comments>
		<comment id='1' author='monchier' date='2019-09-28T19:08:52Z'>
		The thing I don't understand about this is that one of the whole points of &lt;denchmark-link:https://github.com/domoritz&gt;@domoritz&lt;/denchmark-link&gt;
 's code was that functions  hashable. I'm going to ask him and see if he has any insight.
		</comment>
		<comment id='2' author='monchier' date='2019-09-28T19:09:13Z'>
		Do you have code to repro, &lt;denchmark-link:https://github.com/monchier&gt;@monchier&lt;/denchmark-link&gt;
 ?
		</comment>
		<comment id='3' author='monchier' date='2019-09-28T19:10:10Z'>
		Also, if we have time, there seems to be some kind of formatting error with that warning. Would be nice to:

Format it nicely, and
Add something about asking a question in our forums if this comes up.

		</comment>
		<comment id='4' author='monchier' date='2019-09-29T05:54:03Z'>
		
The thing I don't understand about this is that one of the whole points of @domoritz 's code was that functions are hashable. I'm going to ask him and see if he has any insight.

Yes, functions are hashable in general but we may fail (which it did in this case). We have two very similar error messages:

Streamlit cannot hash some type: https://github.com/streamlit/streamlit/blob/develop/lib/streamlit/hashing.py#L339
Streamlit failed to hash an object of type: https://github.com/streamlit/streamlit/blob/develop/lib/streamlit/hashing.py#L345

To fix this particular error, we need to look at the function that is being hashed.
The formatting error is easy to fix. Remove the commas in
&lt;denchmark-link:https://github.com/streamlit/streamlit/blob/develop/lib/streamlit/hashing.py#L147&gt;https://github.com/streamlit/streamlit/blob/develop/lib/streamlit/hashing.py#L147&lt;/denchmark-link&gt;
 to make the tuple a string.
		</comment>
		<comment id='5' author='monchier' date='2019-09-30T18:03:56Z'>
		In this case the function was containing this code:
&lt;denchmark-code&gt;    if sys.version_info[0] &lt; 3:
        reload(sys)
        sys.setdefaultencoding("utf-8")
&lt;/denchmark-code&gt;

		</comment>
		<comment id='6' author='monchier' date='2019-10-01T23:50:00Z'>
		I fixed the error message in &lt;denchmark-link:https://github.com/streamlit/streamlit/pull/215&gt;#215&lt;/denchmark-link&gt;
.
		</comment>
	</comments>
</bug>