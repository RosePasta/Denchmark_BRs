<bug id='1298' author='huisigoh' open_date='2020-04-03T06:33:51Z' closed_time='2020-04-04T20:06:55Z'>
	<summary>file_uploader does not work on first load</summary>
	<description>
&lt;denchmark-h:h1&gt;Summary&lt;/denchmark-h&gt;

When using the file_uploader widget to upload files on first page load, streamlit does not detect that the file is uploaded and the subsequent code does not run at all. Only after refreshing the page does the file uploader widget work correctly.
&lt;denchmark-h:h1&gt;Steps to reproduce&lt;/denchmark-h&gt;

Code:
&lt;denchmark-code&gt;import streamlit as st

uploaded_file = st.file_uploader("Choose a document: ", type="pdf")
show_file = st.empty()
if uploaded_file is not None:
    show_file.info("File received!")
&lt;/denchmark-code&gt;


Run streamlit app streamlit run app.py
Browser loads http://localhost:8501
Upload pdf file using file uploader widget
Nothing happens
Refresh page
Upload pdf file using file uploader widget
Message "File received!" is displayed.

&lt;denchmark-h:h2&gt;Expected behavior:&lt;/denchmark-h&gt;

File uploading should work right off the bat without page refresh.
&lt;denchmark-h:h2&gt;Actual behavior:&lt;/denchmark-h&gt;

See steps to reproduce for description.
Screenshots
First Load:
&lt;denchmark-link:https://user-images.githubusercontent.com/6029239/78330754-4a0c3380-75b7-11ea-8957-bd22c6ae36d3.png&gt;&lt;/denchmark-link&gt;

&lt;denchmark-link:https://user-images.githubusercontent.com/6029239/78330786-5a241300-75b7-11ea-97b4-c9c5b4770d71.png&gt;&lt;/denchmark-link&gt;

Nothing happens after.
After Refresh:
&lt;denchmark-link:https://user-images.githubusercontent.com/6029239/78330839-6f993d00-75b7-11ea-8a58-7e2d32f78fe6.png&gt;&lt;/denchmark-link&gt;

&lt;denchmark-link:https://user-images.githubusercontent.com/6029239/78330866-7c1d9580-75b7-11ea-9b7a-a86c460b4fad.png&gt;&lt;/denchmark-link&gt;

&lt;denchmark-h:h2&gt;Is this a regression?&lt;/denchmark-h&gt;

That is, did this use to work the way you expected in the past?
no
&lt;denchmark-h:h1&gt;Debug info&lt;/denchmark-h&gt;


Streamlit version: 0.57.2
Python version: Python 3.7.1
Using Conda? PipEnv? PyEnv? Pex? -- No
OS version: Windows 10 Enterprise
Browser version: Chrome Version 79.0.3945.117 (Official Build) (64-bit)

	</description>
	<comments>
		<comment id='1' author='huisigoh' date='2020-04-03T17:57:31Z'>
		I am seeing similar problems.
In version 0.56.0 it would work the first time you selected a file, but then you would have to refresh the page before selecting another one.
In version 0.57.2 it has changed and now often the first time you select a file the file name will appear in the file selector but the page won't re-run. If you re-select the same file it will almost always run the page the second time around, but not always so sometimes it takes three rounds of selection.
		</comment>
		<comment id='2' author='huisigoh' date='2020-04-04T20:06:55Z'>
		Thanks! Fixed in &lt;denchmark-link:https://pypi.org/project/streamlit/0.57.3/&gt;0.57.3&lt;/denchmark-link&gt;

		</comment>
		<comment id='3' author='huisigoh' date='2020-11-25T19:38:55Z'>
		&lt;denchmark-link:https://github.com/jrhone&gt;@jrhone&lt;/denchmark-link&gt;
 I'm experiencing this issue in 0.71.0.
		</comment>
		<comment id='4' author='huisigoh' date='2020-12-07T12:30:13Z'>
		
@jrhone I'm experiencing this issue in 0.71.0.

I can confirm this on 0.71.0. I'm yet to try 0.72.0
		</comment>
	</comments>
</bug>