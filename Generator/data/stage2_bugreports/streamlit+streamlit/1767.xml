<bug id='1767' author='kmcgrady' open_date='2020-07-27T20:38:38Z' closed_time='2020-08-04T22:27:32Z'>
	<summary>Inline JavaScript in Custom Component</summary>
	<description>
&lt;denchmark-h:h1&gt;Summary&lt;/denchmark-h&gt;

Building a custom component with &lt;denchmark-link:https://docs.streamlit.io/en/stable/develop_streamlit_components.html#render-an-html-string&gt;HTML rendering&lt;/denchmark-link&gt;
, inline scripts in  tags cause errors in the application
&lt;denchmark-h:h1&gt;Steps to reproduce&lt;/denchmark-h&gt;

Attempting to embed a tweet.
&lt;denchmark-code&gt;    components.html("""
        &lt;blockquote id="tweet-123"&gt;
        &lt;/blockquote&gt;
        &lt;script sync src="https://platform.twitter.com/widgets.js"&gt;&lt;/script&gt;
        &lt;script&gt;
            twttr.widgets.createTweet("123", document.getElementById("tweet-123"), {
                theme: "dark"
            });
        &lt;/script&gt;
        """
&lt;/denchmark-code&gt;

Note You can replace 123 with a valid tweet id.
&lt;denchmark-h:h2&gt;Expected behavior:&lt;/denchmark-h&gt;

Unsure. Based on doc, this should work and embed the tweet (or mark a JS error or error from Twitter, etc). But options of expectation.

It works as expected.
It does not work and the error reflects that inline JS is not supported.
It has undefined behavior and the docs say that inline JS is not supported.

&lt;denchmark-h:h2&gt;Actual behavior:&lt;/denchmark-h&gt;

I get a Python KeyError on a string in the html. See Screenshot.
&lt;denchmark-link:https://user-images.githubusercontent.com/69432/88589645-4e4cd880-d00e-11ea-9acd-b259c80a4a99.png&gt;&lt;/denchmark-link&gt;

&lt;denchmark-h:h2&gt;Is this a regression?&lt;/denchmark-h&gt;

No
&lt;denchmark-h:h1&gt;Debug info&lt;/denchmark-h&gt;


Streamlit version: 0.63.0
Python version: 3.8
Using Conda? PipEnv? PyEnv? Pex? PipEnv
OS version: Mac OS X Catalina
Browser version: Chrome 84

&lt;denchmark-h:h1&gt;Additional information&lt;/denchmark-h&gt;

Came from my hackathon project ðŸ˜Š
	</description>
	<comments>
		<comment id='1' author='kmcgrady' date='2020-08-04T20:37:29Z'>
		I'm not able to repro this in my setup - this Streamlit app runs without error:
import streamlit.components.v1 as components

components.html("""
&lt;blockquote id="tweet-123"&gt;
&lt;/blockquote&gt;
&lt;script sync src="https://platform.twitter.com/widgets.js"&gt;&lt;/script&gt;
&lt;script&gt;
    twttr.widgets.createTweet("123", document.getElementById("tweet-123"), {
        theme: "dark"
    });
&lt;/script&gt;
""")
(It doesn't display anything - but that's not a bug, it's because Twitter blocks the request with its CORS policy.)
&lt;denchmark-link:https://github.com/kmcgrady&gt;@kmcgrady&lt;/denchmark-link&gt;
, is there a complete example that shows the error? Was there other stuff in your app?
		</comment>
		<comment id='2' author='kmcgrady' date='2020-08-04T22:16:19Z'>
		&lt;denchmark-link:https://github.com/tconkling&gt;@tconkling&lt;/denchmark-link&gt;
 Perhaps the standard case isn't working. Does this cause an error on your side?
def embed_tweet(status_id):
    components.html("""
        &lt;blockquote id="tweet-{0}"&gt;
        &lt;/blockquote&gt;
        &lt;script sync src="https://platform.twitter.com/widgets.js"&gt;&lt;/script&gt;
        &lt;script&gt;
            twttr.widgets.createTweet("{0}", document.getElementById("tweet-{0}"), {
                theme: "dark"
            });
        &lt;/script&gt;""".format(status_id))

embed_tweet("123")
Something wrong with my formatting. Wonder if it has to do with the {0} in the parsing.
		</comment>
		<comment id='3' author='kmcgrady' date='2020-08-04T22:27:32Z'>
		This is my bad. The error is referring to a python string format bug curly braces need to be escaped. Closing this issue.
		</comment>
	</comments>
</bug>