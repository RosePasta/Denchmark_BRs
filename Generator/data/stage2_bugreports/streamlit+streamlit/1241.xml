<bug id='1241' author='demmerichs' open_date='2020-03-23T10:14:41Z' closed_time='2020-03-30T13:03:48Z'>
	<summary>Animation of matplotlib figures not working anymore</summary>
	<description>
&lt;denchmark-h:h1&gt;Summary&lt;/denchmark-h&gt;

&lt;denchmark-link:https://discuss.streamlit.io/t/how-to-animate-a-line-chart/164&gt;Here&lt;/denchmark-link&gt;
 is a discussion of how to have matplotlib figures inside streamlit be updated to have an animation like character. I recently tested the code provided over there and found that it was not working anymore with the most recent streamlit version.
&lt;denchmark-h:h1&gt;Steps to reproduce&lt;/denchmark-h&gt;

Take the gist from the above mentioned discussion and run it with different streamlit versions.
&lt;denchmark-h:h2&gt;Expected behavior:&lt;/denchmark-h&gt;

Expected would be that you see an animated line plot, like it is for streamlit version 0.51.0 (the most recent under which it seems to work for me).
&lt;denchmark-h:h2&gt;Actual behavior:&lt;/denchmark-h&gt;

For version 0.52.0 I get an error message "Bad message format: Tried to use SessionInfo before it was initialized!" and for versions 0.52.2 and up, there is no error message anymore but an white/empty placeholder for an matplotlib plot (recognizeable by the small zoom errors provided by streamlit).
&lt;denchmark-h:h2&gt;Is this a regression?&lt;/denchmark-h&gt;

As explained above, this is a regression as it worked in 0.51.0 and before (so the gist was working as the time of writing, of course).
&lt;denchmark-h:h1&gt;Debug info&lt;/denchmark-h&gt;


Streamlit version: tested multiple, see above
Python version: 3.7.5
Using Conda? PipEnv? PyEnv? Pex?
Is python -m venv a PipEnv? Anyway, I use venv and pip for installing packages like streamlit and matplotlib.
OS version: Ubuntu 19.10
Browser version: Chrome

	</description>
	<comments>
		<comment id='1' author='demmerichs' date='2020-03-29T09:59:23Z'>
		Hey @DavidS3141,
Try passing clear_figure=False to both pyplots.
Let me know if this solves your issue.
		</comment>
		<comment id='2' author='demmerichs' date='2020-03-30T13:03:22Z'>
		I just tested this and it works. Thanks. I commented on the corresponding &lt;denchmark-link:https://gist.github.com/treuille/4f70bff85ec5856cc7696f5c73f1ea11&gt;gist&lt;/denchmark-link&gt;
 and linked this issue! Thanks
		</comment>
	</comments>
</bug>