<bug id='2145' author='andfanilo' open_date='2020-10-10T11:15:24Z' closed_time='2020-10-15T16:12:14Z'>
	<summary>Components keep refreshing/remounting when in a column</summary>
	<description>
&lt;denchmark-h:h1&gt;Summary&lt;/denchmark-h&gt;

With or without a key, a component in a column will eventually refresh/remount, sometimes lock itself into a refresh loop.
Not sure but seems to depend on the browser (Chrome/Edge stop refreshing at some point but if you interact with the component it goes off again. Firefox stays in loop forever).
&lt;denchmark-h:h1&gt;Steps to reproduce&lt;/denchmark-h&gt;

Using drawable canvas
Canvas won't stop remounting.
&lt;denchmark-link:https://github.com/andfanilo/streamlit-drawable-canvas/issues/23&gt;andfanilo/streamlit-drawable-canvas#23&lt;/denchmark-link&gt;

import streamlit as st
from streamlit_drawable_canvas import st_canvas

col1, col2 = st.beta_columns(2)

with col1:
    canvas_image = st_canvas(
        fill_color = "rgba(255, 165, 0, 0.3)", 
        stroke_width = 2,
        stroke_color = '#e00',
        drawing_mode = "line",
        key = "canvas",
    )

with col2:
    options = ['U','D','R', 'L']
    lines = [st.selectbox('Select', options, key=x) for x in range(4)]
Using component template
Component will stop at state 1.
if not _RELEASE:
    import streamlit as st
    col1, col2 = st.beta_columns(2)

    with col1:
        st.subheader("Component with constant args")
        num_clicks = my_component("World")
        st.markdown("You've clicked %s times!" % int(num_clicks))

    with col2:
        st.subheader("Component with variable args")
        name_input = st.text_input("Enter a name", value="Streamlit")
        num_clicks = my_component(name_input, key="foo")
        st.markdown("You've clicked %s times!" % int(num_clicks))
&lt;denchmark-h:h2&gt;Expected behavior:&lt;/denchmark-h&gt;

If there's a key, no remount. If there's no key, as usual.
&lt;denchmark-h:h2&gt;Actual behavior:&lt;/denchmark-h&gt;

&lt;denchmark-link:https://user-images.githubusercontent.com/5351877/95653479-58ed1900-0af9-11eb-8a76-8cef84748413.gif&gt;&lt;/denchmark-link&gt;

&lt;denchmark-link:https://user-images.githubusercontent.com/5351877/95653482-5be80980-0af9-11eb-9432-0f525f983b83.gif&gt;&lt;/denchmark-link&gt;

&lt;denchmark-h:h2&gt;Is this a regression?&lt;/denchmark-h&gt;

Using the drawable canvas example, I went back to the &lt;denchmark-link:https://github.com/akrolsmir/married-dinosaurs/tree/27ff83587c69b69c402d0bbe801357941cee824f&gt;beta builds&lt;/denchmark-link&gt;
 &lt;denchmark-link:https://github.com/akrolsmir&gt;@akrolsmir&lt;/denchmark-link&gt;

 Works on streamlit-0.65.24-py2.py3-none-any.whl
 Doesn't work on streamlit-0.66.22-py2.py3-none-any.whl
	</description>
	<comments>
		<comment id='1' author='andfanilo' date='2020-10-11T22:23:54Z'>
		I also noticed a similar behavior when using the streamlit ace editor in a column. The editor refreshes almost immediately after you type anything causing it to refresh the text and become empty.
		</comment>
		<comment id='2' author='andfanilo' date='2020-10-12T16:04:01Z'>
		Maybe a related error is, when you are modifying any widget in an experimental column, the whole page starts to scroll up and it seems that all the components are refreshed / remounted just the same way as &lt;denchmark-link:https://github.com/andfanilo&gt;@andfanilo&lt;/denchmark-link&gt;
 described.
		</comment>
		<comment id='3' author='andfanilo' date='2020-10-12T18:55:02Z'>
		
Maybe a related error is, when you are modifying any widget in an experimental column, the whole page starts to scroll up and it seems that all the components are refreshed / remounted just the same way as @andfanilo described.

Hi &lt;denchmark-link:https://github.com/farkasmark&gt;@farkasmark&lt;/denchmark-link&gt;
 -- I wasn't aware of this one before, thanks for flagging. When you say "any widget", is that Streamlit widgets (st.slider, st.text_inpu) or Component widgets which trigger this issue?
		</comment>
		<comment id='4' author='andfanilo' date='2020-10-12T22:30:05Z'>
		Streamlit widgets seem to trigger this issue unfortunately.
		</comment>
		<comment id='5' author='andfanilo' date='2020-10-14T05:49:06Z'>
		&lt;denchmark-link:https://github.com/andfanilo&gt;@andfanilo&lt;/denchmark-link&gt;
 &lt;denchmark-link:https://github.com/theimposingdwarf&gt;@theimposingdwarf&lt;/denchmark-link&gt;
 &lt;denchmark-link:https://github.com/farkasmark&gt;@farkasmark&lt;/denchmark-link&gt;

I believe &lt;denchmark-link:https://github.com/streamlit/streamlit/pull/2173&gt;#2173&lt;/denchmark-link&gt;
 should address this problem and it will be in the next release soon. If nightly succeeds tonight, you can also try it out.
Fingers crossed!
		</comment>
		<comment id='6' author='andfanilo' date='2020-10-14T09:34:33Z'>
		First test on Drawable Canvas on streamlit-nightly LGTM !
		</comment>
		<comment id='7' author='andfanilo' date='2020-10-15T16:09:47Z'>
		

Maybe a related error is, when you are modifying any widget in an experimental column, the whole page starts to scroll up and it seems that all the components are refreshed / remounted just the same way as @andfanilo described.

Hi @farkasmark -- I wasn't aware of this one before, thanks for flagging. When you say "any widget", is that Streamlit widgets (st.slider, st.text_inpu) or Component widgets which trigger this issue?

&lt;denchmark-link:https://github.com/akrolsmir&gt;@akrolsmir&lt;/denchmark-link&gt;
 Thank you, this issue was resolved by the latest nightly build.
		</comment>
		<comment id='8' author='andfanilo' date='2020-10-15T16:12:14Z'>
		Looks like the update solves the problem. Going to close this issue. Let me know if it repros again.
		</comment>
		<comment id='9' author='andfanilo' date='2020-10-27T00:09:18Z'>
		Hey &lt;denchmark-link:https://github.com/cp149&gt;@cp149&lt;/denchmark-link&gt;
! Thanks for following up.
I tried running the sample code, and I do not see the issue, assuming you just need to run the code above to show the error. Can you confirm for sure you're using Version 0.69.2? Perhaps you can post a video (from YouTube) showing the version and bug?
Also, I would love to know your browser/OS as well incase this might be a result of some cross-browser problem. I can also use to help verify.
		</comment>
		<comment id='10' author='andfanilo' date='2020-10-27T00:11:19Z'>
		&lt;denchmark-link:https://github.com/kmcgrady&gt;@kmcgrady&lt;/denchmark-link&gt;
 ,Thank you for quick reply. I just restart everything and now it works well.
		</comment>
	</comments>
</bug>