<bug id='1641' author='Gopinathts' open_date='2020-06-28T20:00:01Z' closed_time='2020-06-29T18:51:31Z'>
	<summary>StreamlitAPIException: Unable to convert object of type &amp;lt;class 'str'&amp;gt; to pandas.DataFrame.</summary>
	<description>
&lt;denchmark-h:h1&gt;Summary&lt;/denchmark-h&gt;

while running a ML data prediction model, I am trying to write a confusion matrix using -
confusion_matrix(class_test_df.status, predict_test_df.predicted)
lg_reg_report = (classification_report(class_test_df, predict_test_df.predicted))
st.table(lg_reg_report)
&lt;denchmark-h:h1&gt;Steps to reproduce&lt;/denchmark-h&gt;

from sklearn import metrics
from sklearn.metrics import confusion_matrix
from sklearn.metrics import classification_report
st.write("3a. Confusion Matrix using sklearn")
print("The model with dummy variable coding output: ")
confusion_matrix(class_test_df.status, predict_test_df.predicted)
lg_reg_report = (classification_report(class_test_df, predict_test_df.predicted))
st.write(st.table(lg_reg_report))
&lt;denchmark-link:https://user-images.githubusercontent.com/48983135/85956958-dd7eb600-b9a6-11ea-9379-013d9846c33e.png&gt;&lt;/denchmark-link&gt;

What are the steps we should take to reproduce the bug:
you should try to write a confusion matrix table as shown above.
&lt;denchmark-h:h2&gt;Expected behavior:&lt;/denchmark-h&gt;

It should display a confusion matrix table
&lt;denchmark-h:h2&gt;Actual behavior:&lt;/denchmark-h&gt;

It is throwing an error as shown in the attached screen shot
&lt;denchmark-h:h2&gt;Is this a regression?&lt;/denchmark-h&gt;

No
That is, did this use to work the way you expected in the past?
not sure
&lt;denchmark-h:h1&gt;Debug info&lt;/denchmark-h&gt;


Streamlit version: version 0.58.0
Python version: Python 2.7.18rc1
Using Conda? No (Installed)
OS version:Ubuntu 20.04 LTS
Browser version: Google chrome -Version 83.0.4103.116 (Official Build) (64-bit)

&lt;denchmark-h:h1&gt;Additional information&lt;/denchmark-h&gt;

If needed, add any other context about the problem here. For example, did this bug come from &lt;denchmark-link:https://discuss.streamlit.io&gt;https://discuss.streamlit.io&lt;/denchmark-link&gt;
 or another site? Link the original source here!
	</description>
	<comments>
		<comment id='1' author='Gopinathts' date='2020-06-29T18:51:31Z'>
		Hi &lt;denchmark-link:https://github.com/Gopinathts&gt;@Gopinathts&lt;/denchmark-link&gt;
 -
Per the &lt;denchmark-link:https://scikit-learn.org/stable/modules/generated/sklearn.metrics.classification_report.html#sklearn-metrics-classification-report&gt;sklearn docs for classification_report&lt;/denchmark-link&gt;
, it returns a  or st.table()` requires a pandas dataframe, a numpy array or a dict. So the type error you have is because of that.
You could try the st.write() without st.table(), which might show it correctly inline. st.markdown() is another potential option, depending on how sklearn is putting formatting characters in the classification report output.
Best,
Randy
		</comment>
		<comment id='2' author='Gopinathts' date='2020-06-30T06:11:48Z'>
		Thank you very much.
I have used st.write, it did not work. I will try st.markdown and confirm.
Thanks again.


Thanks and regards,
Gopinath T. Subbegowda
Head - Testing Center Of Excellence
Ph: 9945 057 234
AmberTAG Analytics Pvt Ltd &lt;&lt;denchmark-link:http://www.AmberTAG.com&gt;http://www.AmberTAG.com&lt;/denchmark-link&gt;
&gt;
&lt;denchmark-link:#&gt;…&lt;/denchmark-link&gt;


On Tue, Jun 30, 2020 at 12:21 AM Randy Zwitch ***@***.***&gt; wrote:
 Hi @Gopinathts &lt;https://github.com/Gopinathts&gt; -

 Per the sklearn docs for classification_report
 &lt;https://scikit-learn.org/stable/modules/generated/sklearn.metrics.classification_report.html#sklearn-metrics-classification-report&gt;,
 it returns a str or dict. For Streamlit, st.table()` requires a pandas
 dataframe, a numpy array or a dict. So the type error you have is because
 of that.

 You could try the st.write() without st.table(), which might show it
 correctly inline. st.markdown() is another potential option, depending on
 how sklearn is putting formatting characters in the classification report
 output.

 Best,
 Randy

 —
 You are receiving this because you were mentioned.
 Reply to this email directly, view it on GitHub
 &lt;#1641 (comment)&gt;,
 or unsubscribe
 &lt;https://github.com/notifications/unsubscribe-auth/ALVWYXZ5NXKKMMECSUZKDRTRZDPEFANCNFSM4OKVVXMQ&gt;
 .


-- 

















Disclaimer

This
message may
contain confidential
information and is intended only for the
individual named. If you are not
the named addressee you should not
disseminate, distribute or copy this
e-mail. You cannot use or
forward any attachments in the email. Please
notify the sender and infoKnights@ambertag.com
&lt;mailto:infoknights@ambertag.com&gt; immediately by e-mail if you have
received this e-mail by mistake and
delete this e-mail from your system,
AmberTAG, no: 305/66, 2nd main road, 40th cross, Jayanagar 8th block,
Bangalore - 70, www.AmberTAG.com &lt;http://www.AmberTAG.com&gt;

		</comment>
		<comment id='3' author='Gopinathts' date='2020-10-16T08:26:46Z'>
		I have the same problem!
st.write
st.table
st.markdown
All not working
		</comment>
		<comment id='4' author='Gopinathts' date='2020-10-26T15:16:36Z'>
		st.text will work, but it looks like this
&lt;denchmark-link:https://github.com/stevessschen&gt;@stevessschen&lt;/denchmark-link&gt;


&lt;denchmark-link:https://user-images.githubusercontent.com/29574874/97192646-1badaa00-17ce-11eb-80b2-94b1064b90c3.png&gt;&lt;/denchmark-link&gt;

		</comment>
		<comment id='5' author='Gopinathts' date='2020-10-28T14:14:22Z'>
		Great! Thank you so much!!
		</comment>
	</comments>
</bug>