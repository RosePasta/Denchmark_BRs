<bug id='784' author='knorthover' open_date='2019-12-03T20:05:23Z' closed_time='2019-12-04T01:36:46Z'>
	<summary>Allow saving of files larger than 2MB from audio player</summary>
	<description>
&lt;denchmark-h:h1&gt;Summary&lt;/denchmark-h&gt;

Attempts to export (download) audio files larger than about 2MB from the player widget fail with Network Error (in Chrome).  Smaller files download OK.
&lt;denchmark-h:h1&gt;Steps to reproduce&lt;/denchmark-h&gt;


Create player widgets for two audio files, one short (&lt; 1MByte) one long (&gt;2.2 MByte)
Play the files to verify that the audio is transferred to the browser buffer
Right click on players, small file has "Save audio as...", for larger file this is ghosted out, verify download for small file
Use the three dot menu on the right, select "Download".  For smaller file download should work; for larger file Chrome reports "Failed - Network Error"

&lt;denchmark-h:h2&gt;Expected behavior:&lt;/denchmark-h&gt;

Files should download (export)
&lt;denchmark-h:h2&gt;Actual behavior:&lt;/denchmark-h&gt;

See steps to reproduce
&lt;denchmark-h:h2&gt;Is this a regression?&lt;/denchmark-h&gt;

That is, did this use to work the way you expected in the past?
no
&lt;denchmark-h:h1&gt;Debug info&lt;/denchmark-h&gt;


Streamlit version: 0.50.2
Python version: 3.73
Using Conda? PipEnv? PyEnv? Pex?  Conda
OS version:  Windows 10
Browser version:  Chrome Version 78.0.3904.108 (Official Build) (64-bit)

&lt;denchmark-h:h1&gt;Additional information&lt;/denchmark-h&gt;

I think the audio widget is handling the data buffer using what is called a “Data URI”, which is a form of URL.
Chrome limits the length of a URL to 2MB.  I’ve found a post (about an Excel data embedding – but it's all bytes at this level) where a Data URI a bit longer than 2MB still works in the browser but gets converted to a null if an export of the data buffer (download from the user’s perspective) is attempted.
&lt;denchmark-link:url&gt;https://craignicol.wordpress.com/2016/07/19/excellent-export-and-the-chrome-url-limit/&lt;/denchmark-link&gt;

Unfortunately the fix appears to be to change to an alternate API call, CreateObjectUrl,  in the player widget implementation in the client side Javascript (see above link).
For a lot more background:  &lt;denchmark-link:url&gt;https://stackoverflow.com/a/41755526&lt;/denchmark-link&gt;

	</description>
	<comments>
		<comment id='1' author='knorthover' date='2019-12-04T01:36:08Z'>
		Thanks for the detailed feature request!
I believe &lt;denchmark-link:https://github.com/streamlit/streamlit/issues/415&gt;#415&lt;/denchmark-link&gt;
 will fix this. This work is actually in progress right now 
Marking as duplicate and closing, but please reopen / change the label if you think that's not right.
		</comment>
	</comments>
</bug>