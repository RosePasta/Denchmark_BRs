<bug id='175' author='treuille' open_date='2019-09-23T21:21:58Z' closed_time='2019-10-02T19:53:39Z'>
	<summary>Streamlit login flow crashes for an unusual (but valid) `~/.streamlit/credentials` file</summary>
	<description>
&lt;denchmark-h:h1&gt;Summary&lt;/denchmark-h&gt;

I can crash the Streamlit login flow with an unusual (but valid) ~/.streamlit/credentials file.
&lt;denchmark-h:h2&gt;Steps to reproduce&lt;/denchmark-h&gt;


Set your ~/.streamlit/credentials.toml to

&lt;denchmark-code&gt;# [general]
# email = ""
&lt;/denchmark-code&gt;


Run streamlit hello.
When prompted, don't type in an email address.

&lt;denchmark-h:h1&gt;Behavior&lt;/denchmark-h&gt;

&lt;denchmark-h:h2&gt;Actual behavior&lt;/denchmark-h&gt;

You see a bug:
&lt;denchmark-code&gt;Exception in thread ScriptRunner.scriptThread:
Traceback (most recent call last):
  File "/Users/adrien/.pyenv/versions/3.6.5/lib/python3.6/threading.py", line 916, in _bootstrap_inner
    self.run()
  File "/Users/adrien/.pyenv/versions/3.6.5/lib/python3.6/threading.py", line 864, in run
    self._target(*self._args, **self._kwargs)
  File "/Users/adrien/.pyenv/versions/3.6.5/envs/streamlit-pre-launch/lib/python3.6/site-packages/streamlit/ScriptRunner.py", line 147, in _process_request_queue
    self._run_script(data)
  File "/Users/adrien/.pyenv/versions/3.6.5/envs/streamlit-pre-launch/lib/python3.6/site-packages/streamlit/ScriptRunner.py", line 238, in _run_script
    self.on_event.send(ScriptRunnerEvent.SCRIPT_STARTED)
  File "/Users/adrien/.pyenv/versions/3.6.5/envs/streamlit-pre-launch/lib/python3.6/site-packages/blinker/base.py", line 267, in send
    for receiver in self.receivers_for(sender)]
  File "/Users/adrien/.pyenv/versions/3.6.5/envs/streamlit-pre-launch/lib/python3.6/site-packages/blinker/base.py", line 267, in &lt;listcomp&gt;
    for receiver in self.receivers_for(sender)]
  File "/Users/adrien/.pyenv/versions/3.6.5/envs/streamlit-pre-launch/lib/python3.6/site-packages/streamlit/ReportSession.py", line 257, in _on_scriptrunner_event
    self._maybe_enqueue_initialize_message()
  File "/Users/adrien/.pyenv/versions/3.6.5/envs/streamlit-pre-launch/lib/python3.6/site-packages/streamlit/ReportSession.py", line 360, in _maybe_enqueue_initialize_message
    imsg.user_info.email = Credentials.get_current().activation.email
AttributeError: 'NoneType' object has no attribute 'email'
&lt;/denchmark-code&gt;

You will also see this:
&lt;denchmark-link:https://user-images.githubusercontent.com/1673013/65463858-74fa1b80-de0d-11e9-8678-c8e6d69852d8.png&gt;&lt;/denchmark-link&gt;

&lt;denchmark-h:h2&gt;Expected behavior&lt;/denchmark-h&gt;

Should work as if there were no ~/.streamlit/credentials.toml
&lt;denchmark-h:h1&gt;Debug info&lt;/denchmark-h&gt;

&lt;denchmark-code&gt;$ $ streamlit version &amp;&amp; python --version &amp;&amp; pyenv --version &amp;&amp; sw_vers &amp;&amp; "/Applications/Google Chrome.app/Contents/MacOS/Google Chrome" --version
Streamlit, version 0.46.0
Python 3.6.5
pyenv 1.2.3
ProductName:	Mac OS X
ProductVersion:	10.14.6
BuildVersion:	18G95
Google Chrome 76.0.3809.132 
&lt;/denchmark-code&gt;

	</description>
	<comments>
	</comments>
</bug>