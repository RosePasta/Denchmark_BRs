<bug id='1390' author='ericmjl' open_date='2020-04-27T21:22:13Z' closed_time='2020-06-16T13:18:59Z'>
	<summary>cannot cache function that does not accept an argument</summary>
	<description>
&lt;denchmark-h:h1&gt;Summary&lt;/denchmark-h&gt;

As per title.
&lt;denchmark-h:h1&gt;Steps to reproduce&lt;/denchmark-h&gt;

I created a dummy app that had the following:
import streamlit as st

@st.cache
def load_data():
    return 5

x = load_data()
&lt;denchmark-h:h2&gt;Expected behavior:&lt;/denchmark-h&gt;

I expect the function to just be cached deterministically, as if I were using the lru_cache instead. It's nice to eliminate one more import line ðŸ˜„.
&lt;denchmark-h:h2&gt;Actual behavior:&lt;/denchmark-h&gt;

Instead, I see the following error:
&lt;denchmark-code&gt;InternalHashError: 'NoneType' object has no attribute 'startswith'

While caching the body of load_data(), Streamlit encountered an object of type builtins.function, which it does not know how to hash.
&lt;/denchmark-code&gt;

&lt;denchmark-h:h2&gt;Is this a regression?&lt;/denchmark-h&gt;

I think it might be a regression, but I'm not 100% sure.
&lt;denchmark-h:h1&gt;Debug info&lt;/denchmark-h&gt;


Streamlit version: 0.57.3
Python version: 3.8.1
Using Conda
OS version: CentOS7
Browser version: Chrome 81.0.4044.122

	</description>
	<comments>
		<comment id='1' author='ericmjl' date='2020-05-04T13:52:25Z'>
		I cannot reproduce this. Your example code works as expected for me. No error, not even in the console with --log_level debug. I also use several cached no-argument functions in a live streamlit server without issues.

Streamlit version: 0.57.3
Python version: 3.6.9
OS version: Windows 10 64bit (with Cygwin 3.1.4)
Browser version: Chrome  81.0.4044.129

		</comment>
		<comment id='2' author='ericmjl' date='2020-05-04T14:26:46Z'>
		&lt;denchmark-link:https://github.com/m-ad&gt;@m-ad&lt;/denchmark-link&gt;
 our Python and OS versions are different. Could this be an OS-specific or Python version-specific problem?
		</comment>
		<comment id='3' author='ericmjl' date='2020-05-04T14:57:55Z'>
		I don't know, &lt;denchmark-link:https://github.com/ericmjl&gt;@ericmjl&lt;/denchmark-link&gt;
 . Here's one more datapoint:

Streamlit version: 0.57.3
Python version: 3.8
OS version: Ubuntu 18.04 (AWS CodeBuild Docker Image aws/codebuild/standard:4.0)

Cached no-argument functions work fine and as expected in this environment.
		</comment>
		<comment id='4' author='ericmjl' date='2020-05-04T15:02:25Z'>
		&lt;denchmark-link:https://github.com/m-ad&gt;@m-ad&lt;/denchmark-link&gt;
 cool, that does seem a bit more convincing, given the shared Linux OS and a recent Python version.
Let me attempt one more reproducing of the problem on other systems that I have access to. If I can't reproduce it, or if I don't get back to the issue tracker within the week, please feel free to close!
		</comment>
	</comments>
</bug>