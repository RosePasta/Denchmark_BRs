<bug id='1271' author='AdrianSosic' open_date='2020-03-28T09:27:40Z' closed_time='2020-04-23T17:57:08Z'>
	<summary>Caching problem since 0.53.0</summary>
	<description>
&lt;denchmark-h:h1&gt;Summary&lt;/denchmark-h&gt;

Hi, think I found a bug in Streamlit's caching mechanism that has been introduced somewhere after version 0.53.0. Compare the output of the following code between versions 0.53.0 and 0.54.0:
&lt;denchmark-h:h1&gt;Steps to reproduce&lt;/denchmark-h&gt;

&lt;denchmark-code&gt;import numpy as np
import streamlit as st

class C:
	def __init__(self, x):
		self.x = x

@st.cache
def f(c):
	return c.x

for x in 1000 / np.arange(1, 10):
	c = C(x)
	y = f(c)
	print(y)
&lt;/denchmark-code&gt;

&lt;denchmark-h:h2&gt;Expected behavior:&lt;/denchmark-h&gt;

The correct output of version 0.53.0 is:
&lt;denchmark-code&gt;1000.0
500.0
333.3333333333333
250.0
200.0
166.66666666666666
142.85714285714286
125.0
111.11111111111111
&lt;/denchmark-code&gt;

&lt;denchmark-h:h2&gt;Actual behavior:&lt;/denchmark-h&gt;

Version 0.54.0 mistakenly caches some of the function calls, returning the following incorrect output:
&lt;denchmark-code&gt;1000.0
1000.0
333.3333333333333
1000.0
1000.0
166.66666666666666
142.85714285714286
1000.0
111.11111111111111
&lt;/denchmark-code&gt;

&lt;denchmark-h:h2&gt;Is this a regression?&lt;/denchmark-h&gt;

yes
&lt;denchmark-h:h1&gt;Debug info&lt;/denchmark-h&gt;


Streamlit version: 0.54.0
Python version: 3.6.8.
OS version: macOS 10.15.2

&lt;denchmark-h:h1&gt;Additional information&lt;/denchmark-h&gt;

Interestingly, 0.54.0 shows the desired behavior when the value 1000 in the code above is replaced with the value 1.
	</description>
	<comments>
		<comment id='1' author='AdrianSosic' date='2020-03-31T20:33:09Z'>
		Possibly related to &lt;denchmark-link:https://github.com/streamlit/streamlit/issues/1166&gt;#1166&lt;/denchmark-link&gt;

		</comment>
		<comment id='2' author='AdrianSosic' date='2020-04-23T17:57:08Z'>
		 &lt;denchmark-link:https://github.com/streamlit/streamlit/issues/1166&gt;#1166&lt;/denchmark-link&gt;

		</comment>
	</comments>
</bug>