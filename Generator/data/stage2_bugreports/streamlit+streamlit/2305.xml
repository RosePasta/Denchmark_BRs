<bug id='2305' author='successar' open_date='2020-11-02T21:43:56Z' closed_time='2020-12-23T19:04:15Z'>
	<summary>Cache a function with an nested list comprehension</summary>
	<description>
&lt;denchmark-h:h1&gt;Summary&lt;/denchmark-h&gt;

When trying to cache a function with an nested list comprehension, streamlit doesn't allow outer iterator value within inner iterator.
&lt;denchmark-h:h1&gt;Steps to reproduce&lt;/denchmark-h&gt;

import streamlit as st

@st.cache()
def create_raw_data():
    production=[[outer + inner for inner in range(3)] for outer in range(5)]
    return production

production = create_raw_data()
st.write(production)
&lt;denchmark-h:h2&gt;Expected behavior:&lt;/denchmark-h&gt;

Should print [[0, 1, 2], [1, 2, 3], ..., [4, 5, 6]]
&lt;denchmark-h:h2&gt;Actual behavior:&lt;/denchmark-h&gt;

&lt;denchmark-link:https://user-images.githubusercontent.com/1499824/97922262-2dd99c00-1d2a-11eb-9516-5dd2fe09e0b4.png&gt;&lt;/denchmark-link&gt;

&lt;denchmark-h:h2&gt;Is this a regression?&lt;/denchmark-h&gt;

No.
&lt;denchmark-h:h1&gt;Debug info&lt;/denchmark-h&gt;


Streamlit version: (get it with 0.70.0)
Python version: (get it with 3.7.7)
Using Conda? PipEnv? PyEnv? Pex? Using conda env. Streamlit Installed with pip
OS version: Ubuntu 18.04
Browser version: Chrome

&lt;denchmark-h:h1&gt;Additional information&lt;/denchmark-h&gt;

Same as &lt;denchmark-link:https://github.com/streamlit/streamlit/issues/1801&gt;#1801&lt;/denchmark-link&gt;
 but that issue was closed. The provided solution there doesn't work.
	</description>
	<comments>
		<comment id='1' author='successar' date='2020-11-05T18:19:51Z'>
		Interesting!  I repro'd your bug.  Thanks for the tidy code snippet.  I'll see how fast we can get to this one.
		</comment>
	</comments>
</bug>