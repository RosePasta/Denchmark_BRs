<bug id='837' author='dsharpc' open_date='2019-12-12T09:04:07Z' closed_time='2020-04-01T16:37:45Z'>
	<summary>Unable to set the enableCORS configuration to false</summary>
	<description>
&lt;denchmark-h:h1&gt;Summary&lt;/denchmark-h&gt;

I'm running my streamlit app inside a docker container and using nginx inside a Digital Ocean box to redirect traffic arriving to my.url/crime to the port I've mapped for the container, however, the screen hangs on 'Please Wait'. I've done some research and apparently I need to set the config file enableCORS variable to false. I've tried changing setting it to false with the following:

Dockerfile CMD is streamlit run --server.enableCORS false app.py
Dockerfile setting environmental variable to:
-- ENV STREAMLIT_CONFIG_SERVER_ENABLE_CORS=false
-- ENV STREAMLIT_CONFIG_SERVER_ENABLECORS=false

However, when I run streamlit config show inside the container, enableCORS is always true
&lt;denchmark-h:h1&gt;Steps to reproduce&lt;/denchmark-h&gt;

The project is in the following link:
&lt;denchmark-link:https://github.com/dsharpc/StreamlitCrime&gt;https://github.com/dsharpc/StreamlitCrime&lt;/denchmark-link&gt;

And the Dockerfile is this:
&lt;denchmark-link:https://github.com/dsharpc/StreamlitCrime/blob/master/Dockerfile&gt;https://github.com/dsharpc/StreamlitCrime/blob/master/Dockerfile&lt;/denchmark-link&gt;

When the image is run using any of the three variations to set the enableCORS variable to false, the streamlit config show command keeps showing it as true.
&lt;denchmark-h:h2&gt;Expected behavior:&lt;/denchmark-h&gt;

enableCORS shows as false.
# Enables support for Cross-Origin Request Sharing, for added security.
# Default: true
enableCORS = false
&lt;denchmark-h:h2&gt;Actual behavior:&lt;/denchmark-h&gt;

enableCORS still shows as true
# Enables support for Cross-Origin Request Sharing, for added security.
# Default: true
enableCORS = true
&lt;denchmark-h:h2&gt;Is this a regression?&lt;/denchmark-h&gt;

First time I've tried it
&lt;denchmark-h:h1&gt;Debug info&lt;/denchmark-h&gt;


Streamlit version: 0.51.0
Python version: 3.6.8
Using Docker
OS version: Ubuntu 18.04
Browser version:

	</description>
	<comments>
		<comment id='1' author='dsharpc' date='2019-12-18T10:45:36Z'>
		Can you try to run this script and see what you see?
&lt;denchmark-code&gt;import streamlit as st
st.write(st.config.get_option("server.enableCORS"))
&lt;/denchmark-code&gt;

I also tried this and seems fine:
&lt;denchmark-code&gt;streamlit config show --server.enableCORS true|grep CORS
2019-12-18T10:54:51Z.492 DEBUG   streamlit.logger: Initialized tornado logs
enableCORS = true
$ streamlit config show --server.enableCORS false|grep CORS
2019-12-18T10:54:56Z.685 DEBUG   streamlit.logger: Initialized tornado logs
enableCORS = false
&lt;/denchmark-code&gt;

This may be unrelated, but may help. Did you configure Nginx for Websockets?
You need a config like this one: &lt;denchmark-link:https://gist.github.com/monchier/f2e7e7eff4324555cfc07a7359a1a631&gt;https://gist.github.com/monchier/f2e7e7eff4324555cfc07a7359a1a631&lt;/denchmark-link&gt;

Can you attach what you see in the network tab of Google Chrome Tools?
Best,
Matteo
		</comment>
		<comment id='2' author='dsharpc' date='2020-04-01T16:37:45Z'>
		&lt;denchmark-link:https://github.com/dsharpc&gt;@dsharpc&lt;/denchmark-link&gt;
 if you're still experiencing this please re-open
		</comment>
	</comments>
</bug>