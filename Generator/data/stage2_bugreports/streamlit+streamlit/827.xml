<bug id='827' author='tconkling' open_date='2019-12-10T17:06:05Z' closed_time='2020-01-07T20:44:36Z'>
	<summary>Snapshot crashes when using @st.cache</summary>
	<description>
From Danny-at-Yelp:
&lt;denchmark-code&gt;import streamlit as st

@st.cache
def test_cache():
    return "cached"

# If this function is called, then future elements will cause the
# snapshot to break.
test_cache()

"We'll crash here"
&lt;/denchmark-code&gt;

	</description>
	<comments>
		<comment id='1' author='tconkling' date='2019-12-12T00:28:27Z'>
		I can repro this; the snapshot page fails to load, and the javascript console shows this error:
&lt;denchmark-code&gt;react-dom.production.min.js:4260 TypeError: Cannot read property 'get' of undefined
    at Block.tsx:96
    at Array.map (&lt;anonymous&gt;)
    at t.renderElements (Block.tsx:95)
    at Block.tsx:368
    at t.value (AutoSizer.js:196)
    at ba (react-dom.production.min.js:3880)
    at ga (react-dom.production.min.js:3871)
    at Qs (react-dom.production.min.js:6116)
    at Ws (react-dom.production.min.js:5101)
    at Hs (react-dom.production.min.js:4958)
&lt;/denchmark-code&gt;

		</comment>
		<comment id='2' author='tconkling' date='2019-12-17T00:52:23Z'>
		The st.spinner that's created automatically by @st.cache is the proximate cause of this. (Passing show_spinner=False makes the error go away.) The spinner is being created, then becoming empty, and we now require ids to be sequential.
		</comment>
	</comments>
</bug>