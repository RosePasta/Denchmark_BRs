<bug id='1022' author='reuben' open_date='2017-11-25T11:15:45Z' closed_time='2018-02-08T22:44:02Z'>
	<summary>Transcode input audio to 16 kHz, 16-bit depth in the Python client</summary>
	<description>
Both the C++ and the JS clients leverage SoX to do this, but the Python client doesn't. We should make them consistent.
	</description>
	<comments>
		<comment id='1' author='reuben' date='2017-11-30T18:45:31Z'>
		Note that it doesn't seem to work for the C++ client -- at least it didn't work on my input data that were not in that format. Maybe it is due to some sub-par downsampling algo used?
		</comment>
		<comment id='2' author='reuben' date='2018-01-04T14:49:21Z'>
		This is the first time I am using deepspeech. Perhaps one wants to modify the deepspeech python executable to check for input type: (Only tested on python 3.6+ubuntu+python-magic installed)
# -*- coding: utf-8 -*-
import re
import sys
import magic # Install python-magic for this. Tested on python 3.6

from deepspeech.client import main

if __name__ == '__main__':
    if len(sys.argv) &lt; 3:
        print("Not enough arguments!")
        sys.exit(1)
    itype = magic.from_file(sys.argv[2])
    if "16 " not in itype:
        print("Error: Please encode your input file to 16000Hz")
        sys.exit(1)
    else:
        print("Input:", itype)
    sys.argv[0] = re.sub(r'(-script\.pyw?|\.exe)?$', '', sys.argv[0])
    sys.exit(main())
		</comment>
		<comment id='3' author='reuben' date='2018-01-04T15:02:09Z'>
		&lt;denchmark-link:https://github.com/pikumar&gt;@pikumar&lt;/denchmark-link&gt;
 Thanks but:

that file is generated by pip on installation, we don't have control for that
we already document the current limitation
that's still a workaround, we should rather fix that. Patches are welcome, if you have time :)

		</comment>
		<comment id='4' author='reuben' date='2018-01-04T15:40:47Z'>
		&lt;denchmark-link:https://github.com/lissyx&gt;@lissyx&lt;/denchmark-link&gt;

Can you please add the following line in native_client/python/client.py at line 69:
assert fs == 16000, "Only 16000Hz input WAV files are supported for now!"
		</comment>
		<comment id='5' author='reuben' date='2018-01-04T15:48:23Z'>
		&lt;denchmark-link:https://github.com/pikumar&gt;@pikumar&lt;/denchmark-link&gt;
 I'd be happy that you file an issue for this workaround and send a PR with that patch :)
		</comment>
		<comment id='6' author='reuben' date='2018-02-05T14:48:16Z'>
		That was fixed in &lt;denchmark-link:https://github.com/mozilla/DeepSpeech/pull/1203&gt;#1203&lt;/denchmark-link&gt;

		</comment>
		<comment id='7' author='reuben' date='2018-02-05T14:48:56Z'>
		I'll add test coverage and then we can close this.
		</comment>
		<comment id='8' author='reuben' date='2019-01-03T03:53:06Z'>
		This thread has been automatically locked since there has not been any recent activity after it was closed. Please open a new issue for related bugs.
		</comment>
	</comments>
</bug>