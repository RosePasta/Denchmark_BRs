<bug id='6' author='zfang' open_date='2018-07-25T10:55:02Z' closed_time='2018-07-26T07:16:42Z'>
	<summary>Possible bug in beam search</summary>
	<description>
L127-L128 has no effect: 


fast_abs_rl/decoding.py


        Lines 126 to 130
      in
      b1b66c1






 if i == UNK: 



 art_sent[max(range(len(art_sent)), 



 key=lambda j: attn[j].item())] 



 else: 



 seq.append(id2word[i]) 





I assume this is intended:seq.append(art_sent[max(range(len(art_sent)), key=lambda j: attn[j].item())]).
	</description>
	<comments>
		<comment id='1' author='zfang' date='2018-07-25T21:58:55Z'>
		Good catch! It is indeed a no-op. A quick experiment shows that this doesn't affect the scores much (&lt; 0.01). The UNKs are rare due to the copy-mechanism anyway. I will update code and result tables shortly. Thanks!
NOTE: This bug appeared after we started to refactor the old code base so all original results in our paper is still valid.
		</comment>
		<comment id='2' author='zfang' date='2018-07-26T07:16:41Z'>
		code and results updated
		</comment>
	</comments>
</bug>