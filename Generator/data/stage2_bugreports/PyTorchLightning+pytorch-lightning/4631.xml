<bug id='4631' author='vladimirbelyaev' open_date='2020-11-11T23:23:12Z' closed_time='2020-11-19T07:52:49Z'>
	<summary>TensorBoardLogger saves hyperparams generated by opt_range as strings</summary>
	<description>
&lt;denchmark-h:h2&gt;üêõ Bug&lt;/denchmark-h&gt;

&lt;denchmark-h:h2&gt;Please reproduce using [the BoringModel and post here]&lt;/denchmark-h&gt;

&lt;denchmark-link:https://colab.research.google.com/drive/1UAvfpDsvnIG3EHMIul4OR68GunMMmRgE?usp=sharing&gt;https://colab.research.google.com/drive/1UAvfpDsvnIG3EHMIul4OR68GunMMmRgE?usp=sharing&lt;/denchmark-link&gt;

&lt;denchmark-h:h3&gt;To Reproduce&lt;/denchmark-h&gt;

I used HyperOptArgumentParser to generate opt_range and pass it to model.
Then i passed these hyperparams to tensorboard logger as
self.save_hyperparameters(params)
Then I see that opt_range hyperparams are sorted in alphabetical order(like strings) and aren't usable for filtering trials.
&lt;denchmark-h:h3&gt;Expected behavior&lt;/denchmark-h&gt;

Float hyperparameters are still float in TensorBoard (e.g. they can be sorted and can be used as filtering value for hyperparameter table)
&lt;denchmark-h:h3&gt;Environment&lt;/denchmark-h&gt;


CUDA:

GPU:

Tesla T4


available:         True
version:           10.1


Packages:

numpy:             1.18.5
pyTorch_debug:     True
pyTorch_version:   1.7.0+cu101
pytorch-lightning: 1.0.0
tqdm:              4.41.1


System:

OS:                Linux
architecture:

64bit



processor:         x86_64
python:            3.6.9
version:           #1 SMP Thu Jul 23 08:00:38 PDT 2020



&lt;denchmark-h:h3&gt;Additional context&lt;/denchmark-h&gt;

I suppose problem is in _sanitize_params function of LightningLoggerBase which converts np.float64 values to strings.
Currently there's a simple workaround for this problem:
&lt;denchmark-code&gt;def pre_sanitize_args(kwargs: Dict) -&gt; Dict:  
    return {k: float(v) if type(v) == np.float64 else v for k, v in kwargs.items()}
&lt;/denchmark-code&gt;

	</description>
	<comments>
		<comment id='1' author='vladimirbelyaev' date='2020-11-11T23:23:54Z'>
		Hi! thanks for your contribution!, great first issue!
		</comment>
		<comment id='2' author='vladimirbelyaev' date='2020-11-12T07:34:37Z'>
		&lt;denchmark-code&gt;my_float_hopt_param &lt;class 'numpy.float64'&gt;
my_float_param &lt;class 'float'&gt;
&lt;/denchmark-code&gt;

I'm guessing there are issues casting np floats
Edit:
print(type(self.hparams.my_float_hopt_param)) returns &lt;class 'numpy.float64'&gt; as well which I suppose tensorboard does not support.
We can add a float cast in tb logger's log_hyperparams as to not affect other loggers and keep the numpy type in hparams in case users actually need a numpy type.
Edit 2:
I stand corrected, np types are actually casted internally to str, see the PR for more info
		</comment>
	</comments>
</bug>