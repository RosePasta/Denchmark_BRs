<bug id='5122' author='8greg8' open_date='2020-12-14T10:18:25Z' closed_time='2020-12-23T18:16:47Z'>
	<summary>Thre process  group doesn't default to all processes (world) but to None</summary>
	<description>
&lt;denchmark-h:h2&gt;üêõ Bug&lt;/denchmark-h&gt;

If we correct the issue &lt;denchmark-link:https://github.com/PyTorchLightning/pytorch-lightning/issues/5120#issue-766222158&gt;#5120 (comment)&lt;/denchmark-link&gt;
, and use the all_gather function of the LightningModule, we get another AttributeError: "NoneType object has no attribute allgather".
As stated in the documentation, the group parameter of the function:



pytorch-lightning/pytorch_lightning/utilities/distributed.py


         Line 192
      in
      127454a






 def all_gather_ddp_if_available( 





defaults to all processes, but this is not the case. It defaults to None.
&lt;denchmark-h:h2&gt;Please reproduce using the BoringModel and post here&lt;/denchmark-h&gt;

&lt;denchmark-link:https://colab.research.google.com/drive/1D7CnhxZziUoxTvqVqqsp_lJHHstQfz1r?usp=sharing&gt;https://colab.research.google.com/drive/1D7CnhxZziUoxTvqVqqsp_lJHHstQfz1r?usp=sharing&lt;/denchmark-link&gt;

&lt;denchmark-h:h3&gt;To Reproduce&lt;/denchmark-h&gt;

&lt;denchmark-h:h3&gt;Expected behavior&lt;/denchmark-h&gt;

*The group parameter should be changed to group.WORLD if None.
&lt;denchmark-h:h3&gt;Environment&lt;/denchmark-h&gt;

Note: Bugs with code are solved faster ! Colab Notebook should be made public !


IDE: Please, use our python bug_report_model.py template.


Colab Notebook: Please copy and paste the output from our environment collection script (or fill out the checklist below manually).


You can get the script and run it with:
&lt;denchmark-code&gt;wget https://raw.githubusercontent.com/PyTorchLightning/pytorch-lightning/master/tests/collect_env_details.py
# For security purposes, please check the contents of collect_env_details.py before running it.
python collect_env_details.py
&lt;/denchmark-code&gt;


CUDA:

GPU:

Tesla P100-PCIE-16GB


available:         True
version:           10.1


Packages:

numpy:             1.18.5
pyTorch_debug:     True
pyTorch_version:   1.7.0+cu101
pytorch-lightning: 1.1.0
tqdm:              4.41.1


System:

OS:                Linux
architecture:

64bit



processor:         x86_64
python:            3.6.9
version:           #1 SMP Thu Jul 23 08:00:38 PDT 2020



&lt;denchmark-h:h3&gt;Additional context&lt;/denchmark-h&gt;

Note that this issue is a logical contination of the issue &lt;denchmark-link:https://github.com/PyTorchLightning/pytorch-lightning/issues/5120#issue-766222158&gt;#5120 (comment)&lt;/denchmark-link&gt;
 if it were corrected. In order to reproduce this issue,  and  were modified. Please see the comments in the colab for clarification.
	</description>
	<comments>
	</comments>
</bug>