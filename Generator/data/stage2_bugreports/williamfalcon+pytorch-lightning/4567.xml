<bug id='4567' author='simonm3' open_date='2020-11-07T13:35:31Z' closed_time='2021-01-14T02:25:13Z'>
	<summary>validation progress bar does not update correctly</summary>
	<description>
Does not show progress. Reason is line 359 in progress.py:
self.val_progress_bar.total = convert_inf(self.total_val_batches)
should be:
self.val_progress_bar.reset(self.total_val_batches)
Same applies to other places where progress bar total set.
	</description>
	<comments>
		<comment id='1' author='simonm3' date='2020-11-07T17:31:25Z'>
		we would still have to convert the inf value, right?
self.val_progress_bar.reset(convert_inf(self.total_val_batches))
Would you be interested sending a PR with the fix?
		</comment>
		<comment id='2' author='simonm3' date='2020-11-07T19:01:18Z'>
		I am not clear why the value would ever be infinite.
&lt;denchmark-link:#&gt;…&lt;/denchmark-link&gt;


On Sat, 7 Nov 2020 at 17:31, Adrian Wälchli ***@***.***&gt; wrote:
 we would still have to convert the inf value, right?

 self.val_progress_bar.reset(convert_inf(self.total_val_batches))

 Would you be interested sending a PR with the fix?

 —
 You are receiving this because you authored the thread.
 Reply to this email directly, view it on GitHub
 &lt;#4567 (comment)&gt;,
 or unsubscribe
 &lt;https://github.com/notifications/unsubscribe-auth/AAJE32MSMZXEXMTW7MTOUHDSOV77TANCNFSM4TNVA4KQ&gt;
 .



		</comment>
		<comment id='3' author='simonm3' date='2020-11-07T19:04:59Z'>
		A dataset (e.g. IterableDataset) can have infinite/undefined length.
		</comment>
		<comment id='4' author='simonm3' date='2020-11-07T19:15:07Z'>
		then yes still needs the convert_inf.
		</comment>
		<comment id='5' author='simonm3' date='2020-11-08T15:41:25Z'>
		&lt;denchmark-link:https://github.com/simonm3&gt;@simonm3&lt;/denchmark-link&gt;
 If I replace the  with , I don't see a difference.
Can you post the examle code that gives the wrong progressbar?
		</comment>
		<comment id='6' author='simonm3' date='2020-11-08T19:24:42Z'>
		You can't see the difference on the validation bar until it is running for
a few seconds

Easiest is look at main progress bar by changing line 342 to self
.main_progress_bar.total = convert_inf(total_batches)

For example see attached.
&lt;denchmark-link:#&gt;…&lt;/denchmark-link&gt;


On Sun, 8 Nov 2020 at 15:41, Adrian Wälchli ***@***.***&gt; wrote:
 @simonm3 &lt;https://github.com/simonm3&gt; If I replace the
 self.val_progress_bar.total with self.val_progress_bar.reset, I don't see
 a difference.
 Can you post the examle code that gives the wrong progressbar?

 —
 You are receiving this because you were mentioned.
 Reply to this email directly, view it on GitHub
 &lt;#4567 (comment)&gt;,
 or unsubscribe
 &lt;https://github.com/notifications/unsubscribe-auth/AAJE32LPRPGU6INGVDMOQALSO233FANCNFSM4TNVA4KQ&gt;
 .



		</comment>
		<comment id='7' author='simonm3' date='2020-11-08T19:41:00Z'>
		thanks, for the main progress bar I can see what happens, just not for the validation and test bars but I submitted a PR. Just need to figure out how to write a test for it.
		</comment>
		<comment id='8' author='simonm3' date='2021-01-07T16:28:32Z'>
		&lt;denchmark-link:https://github.com/awaelchli&gt;@awaelchli&lt;/denchmark-link&gt;
 please update
		</comment>
		<comment id='9' author='simonm3' date='2021-01-09T09:39:40Z'>
		sorry for the delay. &lt;denchmark-link:https://github.com/simonm3&gt;@simonm3&lt;/denchmark-link&gt;
 see the changes in &lt;denchmark-link:https://github.com/PyTorchLightning/pytorch-lightning/pull/4579&gt;#4579&lt;/denchmark-link&gt;
 this should fix it.
		</comment>
	</comments>
</bug>