<bug id='5160' author='tobiasmaier' open_date='2020-12-16T14:29:07Z' closed_time='2021-01-19T12:58:32Z'>
	<summary>SLURM root node resolution for SLURM cluster with uniquely named nodes (e.g. alpha,beta,gamma) fails.</summary>
	<description>
&lt;denchmark-h:h2&gt;üêõ Bug&lt;/denchmark-h&gt;

SLURM root node resolution for SLURM cluster with uniquely named nodes (e.g. alpha,beta,gamma) fails.
It seems like all versions since introduction of cluster_environments in 0.10 are affected.
&lt;denchmark-h:h2&gt;Please reproduce using the BoringModel and post here&lt;/denchmark-h&gt;

&lt;denchmark-h:h3&gt;To Reproduce&lt;/denchmark-h&gt;

Here is a simple mockup to not require a SLURM cluster configured with nodes that have unique names.
&lt;denchmark-code&gt;import os
from pytorch_lightning.cluster_environments import SLURMEnvironment

os.environ['SLURM_NODELIST'] ="alpha,beta,gamma"

slurm_env = SLURMEnvironment()
master_address = slurm_env.master_address()
print(master_address)
&lt;/denchmark-code&gt;

&lt;denchmark-h:h3&gt;Expected behavior&lt;/denchmark-h&gt;

master_address should be "alpha"
&lt;denchmark-h:h3&gt;Additional context&lt;/denchmark-h&gt;

This error occurs in the file  pytorch-lightning/pytorch_lightning/cluster_environments/slurm_environment.py where the root node is resolved from the environment variable SLURM_NODELIST. This happens for list of named nodes without ranges, e.g. alpha,beta,gamma.
The variable SLURM_NODELIST is a comma separated list of nodes. Usually nodes are pooled with ranges like nodes[1-5,8] where this issue does not occur due to a parsing of the range.
There is a line
&lt;denchmark-code&gt; root_node = os.environ["SLURM_NODELIST"].split(" ")[0]
&lt;/denchmark-code&gt;

that splits the variable by spaces. I do not know in what cases there are spaces within this variable. But adding a .split(",")[0]after should be save  and fix the issue.
As a workaround I do modify the SLURM_NODELIST at the start of my code.
&lt;denchmark-code&gt;nodelist = os.environ.get("SLURM_NODELIST", "")
os.environ['SLURM_NODELIST'] = " ".join(nodelist.split(','))
&lt;/denchmark-code&gt;

	</description>
	<comments>
		<comment id='1' author='tobiasmaier' date='2020-12-16T14:30:00Z'>
		Hi! thanks for your contribution!, great first issue!
		</comment>
		<comment id='2' author='tobiasmaier' date='2021-01-15T14:59:41Z'>
		This issue has been automatically marked as stale because it hasn't had any recent activity. This issue will be closed in 7 days if no further activity occurs. Thank you for your contributions, Pytorch Lightning Team!
		</comment>
	</comments>
</bug>