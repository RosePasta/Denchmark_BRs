<bug id='524' author='WeberJulian' open_date='2020-09-21T08:12:43Z' closed_time='2020-11-28T08:32:29Z'>
	<summary>bidirectional_decoder isn't working</summary>
	<description>
Hi,
I'm trying to train a model on the french part of mailabs without the phonems. DDC's attention didn't converge so I taught I'll use bidirectional_decoder. When I changed "double_decoder_consistency": false and "bidirectional_decoder": true I'm getting the error :
&lt;denchmark-code&gt;Traceback (most recent call last):
  File "train_tts.py", line 705, in &lt;module&gt;
    main(args)
  File "train_tts.py", line 617, in main
    global_step, epoch, amp, speaker_mapping)
  File "train_tts.py", line 162, in train
    text_input, text_lengths, mel_input, mel_lengths, speaker_ids=speaker_ids, speaker_embeddings=speaker_embeddings)
  File "/home/ubuntu/miniconda3/envs/dev2/lib/python3.6/site-packages/torch/nn/modules/module.py", line 722, in _call_impl
    result = self.forward(*input, **kwargs)
  File "/home/ubuntu/lib/TTS/TTS/tts/models/tacotron2.py", line 133, in forward
    decoder_outputs_backward, alignments_backward = self._backward_pass(mel_specs, encoder_outputs, input_mask)
  File "/home/ubuntu/lib/TTS/TTS/tts/models/tacotron_abstract.py", line 143, in _backward_pass
    self.speaker_embeddings_projected)
  File "/home/ubuntu/miniconda3/envs/dev2/lib/python3.6/site-packages/torch/nn/modules/module.py", line 722, in _call_impl
    result = self.forward(*input, **kwargs)
TypeError: forward() takes 4 positional arguments but 5 were given

&lt;/denchmark-code&gt;

Is bidirectional_decoder still supported or is it obsolete since ddc ?
here is my &lt;denchmark-link:http://pastebin.fr/65909&gt;config.json&lt;/denchmark-link&gt;
 and use_forward_attn and DDC works when y run train_tts.py.
	</description>
	<comments>
		<comment id='1' author='WeberJulian' date='2020-09-21T09:02:17Z'>
		Have you tried a run with phonemes and basic_cleaner? So it will not turn the special characters to ASCII.
		</comment>
		<comment id='2' author='WeberJulian' date='2020-09-21T09:57:33Z'>
		It should work, if doesn't there is a bug.
		</comment>
		<comment id='3' author='WeberJulian' date='2020-09-21T09:58:55Z'>
		
Have you tried a run with phonemes and basic_cleaner? So it will not turn the special characters to ASCII.

Thanks for the suggestion but it isn't relevant to fixing the bug is it ?
		</comment>
		<comment id='4' author='WeberJulian' date='2020-09-21T10:01:18Z'>
		No sorry. Well, you could always give it a go, because if the phonemes are not turnt to ASCII, the model would not be confused, when it sees "c" in text and different pronunciation in audio (because of all special characters being turnt to "c"). So it might converge and you may not need bidirectional. It has happened to me in the past. ðŸ˜€
		</comment>
		<comment id='5' author='WeberJulian' date='2020-11-21T01:43:11Z'>
		This issue has been automatically marked as stale because it has not had recent activity. It will be closed if no further activity occurs. Thank you for your contributions. You might also look our discourse page for further help. &lt;denchmark-link:https://discourse.mozilla.org/c/tts&gt;https://discourse.mozilla.org/c/tts&lt;/denchmark-link&gt;

		</comment>
		<comment id='6' author='WeberJulian' date='2020-11-29T18:48:14Z'>
		it should be fixed by now.
		</comment>
	</comments>
</bug>