<bug id='8720' author='kakashidan' open_date='2017-05-11T11:49:06Z' closed_time='2018-08-01T11:05:46Z'>
	<summary>Opencv2.4.13 Mat push_back coredump</summary>
	<description>
&lt;denchmark-h:h5&gt;System information (version)&lt;/denchmark-h&gt;


OpenCV =&gt; 2.4.13
Operating System / Platform =&gt; ubuntu16.04
Compiler =&gt; g++ 5.4.0
Main Memory=&gt; 64G

&lt;denchmark-h:h5&gt;Detailed description&lt;/denchmark-h&gt;

I extracted sift descriptors of many images and pushed these descriptors into one single mat. But the program coredumped when the loop was not end.
&lt;denchmark-h:h5&gt;Steps to reproduce&lt;/denchmark-h&gt;

    #include &lt;opencv2/opencv.hpp&gt;
    #include &lt;opencv2/nonfree/features2d.hpp&gt;

    using namespace std;
    using namespace cv;

    void extractSiftFeatures(Mat&amp; stImage, vector&lt;KeyPoint&gt;&amp; vKeypoints, Mat&amp; stDescriptors)
    {
        Ptr&lt;SIFT&gt; psift = new SIFT(400);
        (*psift)(stImage, noArray(), vKeypoints, stDescriptors);
    }

    int main()
    {
        Mat test;
        test.reserve(100000000);
        Mat stImage = imread("demo.jpg"); //please replace with your image path
        vector&lt;KeyPoint&gt; vKeypoints;
        Mat stDescriptors;
        extractSiftFeatures(stImage, vKeypoints, stDescriptors);
        for (int i = 0 ; i&lt; 100000000; ++i)
        {
            test.push_back(stDescriptors); //core here
        }
        return 0;
    }
&lt;denchmark-code&gt;        Core was generated by `./test'.
        Program terminated with signal SIGSEGV, Segmentation fault.
        #0  __memcpy_avx_unaligned () at ../sysdeps/x86_64/multiarch/memcpy-avx-unaligned.S:267
        267	../sysdeps/x86_64/multiarch/memcpy-avx-unaligned.S: No such file or directory.
        [Current thread is 1 (Thread 0x7f9024dd2740 (LWP 823))]
        (gdb) bt
        #0  __memcpy_avx_unaligned () at ../sysdeps/x86_64/multiarch/memcpy-avx-unaligned.S:267 
        #1  0x00007f902489c57a in cv::Mat::copyTo(cv::_OutputArray const&amp;) const () from /usr/lib/libopencv_core.so.2.4
        #2  0x00007f90248ecd99 in cv::Mat::reserve(unsigned long) () from /usr/lib/libopencv_core.so.2.4
        #3  0x00007f90248ed971 in cv::Mat::push_back(cv::Mat const&amp;) () from /usr/lib/libopencv_core.so.2.4
        #4  0x000000000040150d in main ()
&lt;/denchmark-code&gt;

	</description>
	<comments>
		<comment id='1' author='kakashidan' date='2017-05-11T11:55:30Z'>
		the code above is just a demo which can reproduce the same problem.
		</comment>
		<comment id='2' author='kakashidan' date='2017-05-12T19:36:50Z'>
		Related: &lt;denchmark-link:https://github.com/opencv/opencv/issues/7160&gt;#7160&lt;/denchmark-link&gt;

		</comment>
	</comments>
</bug>