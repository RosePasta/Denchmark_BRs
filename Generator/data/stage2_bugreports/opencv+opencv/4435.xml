<bug id='4435' author='opencv-pushbot' open_date='2015-07-27T09:11:25Z' closed_time='2015-08-07T13:06:52Z'>
	<summary>highgui's namedWindow corrupts heap</summary>
	<description>
Transferred from &lt;denchmark-link:http://code.opencv.org/issues/2435&gt;http://code.opencv.org/issues/2435&lt;/denchmark-link&gt;

&lt;denchmark-code&gt;|| KOLANICH KOLANICH on 2012-10-13 09:47
|| Priority: Low
|| Affected: None
|| Category: highgui-gui
|| Tracker: Bug
|| Difficulty: None
|| PR: None
|| Platform: None / None
&lt;/denchmark-code&gt;

&lt;denchmark-h:h2&gt;highgui's namedWindow corrupts heap&lt;/denchmark-h&gt;

&lt;denchmark-code&gt;version from site and the latest version from git have both this bug
The IDE is VS 2012.


&lt;pre&gt;
#include "stdafx.h"
#include "vader.h"
using namespace cv;
int APIENTRY _tWinMain(_In_ HINSTANCE hInstance,
                     _In_opt_ HINSTANCE hPrevInstance,
                     _In_ LPTSTR    lpCmdLine,
                     _In_ int       nCmdShow)
{
    UNREFERENCED_PARAMETER(hPrevInstance);
    UNREFERENCED_PARAMETER(lpCmdLine);
    cv::String winName("cameraImage");
    namedWindow(winName,CV_WINDOW_AUTOSIZE);
    /*
    1 window name is not the same as in code, it contains of mojibake (крякозябры) (debug configuration, in release it in most cases looks right but the string which contains its name is constantly changing)
    2 some of the following function calls causes crash
    */
    cvWaitKey(0);
    Mat img=imread("darthvader.png");
    double fps=30;
    int key=0;
    UINT delay=1000/fps;
    while (key = cvWaitKey(delay)){
        imshow(winName,img);
        if (key == VK_ESCAPE) break;
    }
    cvDestroyAllWindows();
    return 0;
}
&lt;/pre&gt;
&lt;/denchmark-code&gt;

&lt;denchmark-h:h2&gt;History&lt;/denchmark-h&gt;

&lt;denchmark-h:h5&gt;Kazuki Matsuda on 2012-10-13 11:24&lt;/denchmark-h&gt;

&lt;denchmark-code&gt;Hi.

I have a 2 question.

1)  Do you using self build library?

2) Are you care about difference of Debug/Release library"
When you build for Debug, you must link "opencv_yyyy243*d*.lib" and when you build for Release, you must link "opencv_yyy243.lib".
"d" is important. When you missing "d" or adding unnecessary "d", will invoke mojibake or application crash.
&lt;/denchmark-code&gt;

&lt;denchmark-h:h5&gt;KOLANICH KOLANICH on 2012-10-13 12:05&lt;/denchmark-h&gt;

&lt;denchmark-code&gt;1) Yes.
http://pastebin.com/cvzyPew6
2) I link to Release library, but I also have troubles and crashes in Release mode.
&lt;/denchmark-code&gt;

&lt;denchmark-h:h5&gt;Kazuki Matsuda on 2012-10-15 00:54&lt;/denchmark-h&gt;

&lt;denchmark-code&gt;OK.
But I cant reproduce the problem... Sorry.
&lt;/denchmark-code&gt;

&lt;denchmark-h:h5&gt;KOLANICH KOLANICH on 2012-10-15 08:43&lt;/denchmark-h&gt;

&lt;denchmark-code&gt;Is my config wrong?
https://gist.github.com/d71d07c51d5cd6924432
&lt;/denchmark-code&gt;

&lt;denchmark-h:h5&gt;Kirill Kornyakov on 2012-10-15 11:49&lt;/denchmark-h&gt;

&lt;denchmark-code&gt;You should detect which function causes the crash yourself. It is possible, that the bug in your application, not OpenCV.
-   Priority changed from High to Low
-   Description changed from @#include "stdafx.h" #include "vader.h"
    using namespace... to version from site and the latest version from
    git have both this bug The IDE... More
-   Assignee changed from Vadim Pisarevsky to KOLANICH KOLANICH
&lt;/denchmark-code&gt;

&lt;denchmark-h:h5&gt;Daniil Osokin on 2012-10-16 04:52&lt;/denchmark-h&gt;

&lt;denchmark-code&gt;Hi! If you have other version of VS, please, try to build libs with it and write, is the issue reproduced in this case.
&lt;/denchmark-code&gt;

&lt;denchmark-h:h5&gt;Andrey Kamaev on 2012-10-31 14:23&lt;/denchmark-h&gt;

&lt;denchmark-code&gt;-   Target version deleted (2.4.3)
&lt;/denchmark-code&gt;

	</description>
	<comments>
		<comment id='1' author='opencv-pushbot' date='2015-08-07T13:02:10Z'>
		Tested for both Windows and Linux and there is no heap corruption when creating namedWindows here. I am afraid that the bug is far more related to the code generated by the author and should thus be closed down, as not related to OpenCV.
		</comment>
	</comments>
</bug>