<bug id='8' author='omidrohanian' open_date='2017-10-23T12:58:50Z' closed_time='2018-06-03T10:09:53Z'>
	<summary>TypeError when running the code</summary>
	<description>
I am running tensorflow version 1.0.1 and keras 2.0.5 on ubuntu. I am trying to run the code. The weights are created and saved, however I cannot evaluate or tag sentences. When I want to evaluate the model, I get the following error:
&lt;denchmark-code&gt;---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
&lt;ipython-input-21-0cc4c2a02f0f&gt; in &lt;module&gt;()
      2 
      3 evaluator = anago.Evaluator(model_config, weights, save_path=SAVE_ROOT, preprocessor=p)
----&gt; 4 evaluator.eval(x_test, y_test)

~/Desktop/anago-master/anago/evaluator.py in eval(self, x_test, y_test)
     23         # Prepare test data(steps, generator)
     24         train_steps, train_batches = batch_iter(
---&gt; 25             list(zip(x_test, y_test)), self.config.batch_size, preprocessor=self.preprocessor)
     26 
     27         # Build the model

TypeError: batch_iter() missing 1 required positional argument: 'batch_size'
&lt;/denchmark-code&gt;

and when I want to run the tagger, I get this error:
&lt;denchmark-code&gt;---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
&lt;ipython-input-18-1151c9247c1c&gt; in &lt;module&gt;()
      1 # To tag any text, we can use Tagger. Prepare an instance of Tagger class and give text to tag method:
      2 weights = 'model_weights.h5'
----&gt; 3 tagger = anago.Tagger(model_config, weights, save_path=SAVE_ROOT, preprocessor=p)

~/Desktop/anago-master/anago/tagger.py in __init__(self, config, weights, save_path, preprocessor, tokenizer)
     21 
     22         # Build the model
---&gt; 23         self.model = SeqLabeling(config, ntags=len(self.preprocessor.vocab_tag))
     24         self.model.load(filepath=os.path.join(save_path, weights))
     25 

~/Desktop/anago-master/anago/models.py in __init__(self, config, embeddings, ntags)
     50             word_embeddings = Embedding(input_dim=config.vocab_size,
     51                                         output_dim=config.word_embedding_size,
---&gt; 52                                         mask_zero=True)(word_ids)
     53         else:
     54             word_embeddings = Embedding(input_dim=embeddings.shape[0],

~/anaconda3/lib/python3.6/site-packages/keras/engine/topology.py in __call__(self, inputs, **kwargs)
    567                                          '`layer.build(batch_input_shape)`')
    568                 if len(input_shapes) == 1:
--&gt; 569                     self.build(input_shapes[0])
    570                 else:
    571                     self.build(input_shapes)

~/anaconda3/lib/python3.6/site-packages/keras/layers/embeddings.py in build(self, input_shape)
     99             name='embeddings',
    100             regularizer=self.embeddings_regularizer,
--&gt; 101             constraint=self.embeddings_constraint)
    102         self.built = True
    103 

~/anaconda3/lib/python3.6/site-packages/keras/legacy/interfaces.py in wrapper(*args, **kwargs)
     86                 warnings.warn('Update your `' + object_name +
     87                               '` call to the Keras 2 API: ' + signature, stacklevel=2)
---&gt; 88             return func(*args, **kwargs)
     89         wrapper._legacy_support_signature = inspect.getargspec(func)
     90         return wrapper

~/anaconda3/lib/python3.6/site-packages/keras/engine/topology.py in add_weight(self, name, shape, dtype, initializer, regularizer, trainable, constraint)
    389         if dtype is None:
    390             dtype = K.floatx()
--&gt; 391         weight = K.variable(initializer(shape), dtype=dtype, name=name)
    392         if regularizer is not None:
    393             self.add_loss(regularizer(weight))

~/anaconda3/lib/python3.6/site-packages/keras/initializers.py in __call__(self, shape, dtype)
    101     def __call__(self, shape, dtype=None):
    102         return K.random_uniform(shape, self.minval, self.maxval,
--&gt; 103                                 dtype=dtype, seed=self.seed)
    104 
    105     def get_config(self):

~/anaconda3/lib/python3.6/site-packages/keras/backend/tensorflow_backend.py in random_uniform(shape, minval, maxval, dtype, seed)
   3444         seed = np.random.randint(10e6)
   3445     return tf.random_uniform(shape, minval=minval, maxval=maxval,
-&gt; 3446                              dtype=dtype, seed=seed)
   3447 
   3448 

~/anaconda3/lib/python3.6/site-packages/tensorflow/python/ops/random_ops.py in random_uniform(shape, minval, maxval, dtype, seed, name)
    227     maxval = 1
    228   with ops.name_scope(name, "random_uniform", [shape, minval, maxval]) as name:
--&gt; 229     shape = _ShapeTensor(shape)
    230     minval = ops.convert_to_tensor(minval, dtype=dtype, name="min")
    231     maxval = ops.convert_to_tensor(maxval, dtype=dtype, name="max")

~/anaconda3/lib/python3.6/site-packages/tensorflow/python/ops/random_ops.py in _ShapeTensor(shape)
     39   else:
     40     dtype = None
---&gt; 41   return ops.convert_to_tensor(shape, dtype=dtype, name="shape")
     42 
     43 

~/anaconda3/lib/python3.6/site-packages/tensorflow/python/framework/ops.py in convert_to_tensor(value, dtype, name, preferred_dtype)
    635       name=name,
    636       preferred_dtype=preferred_dtype,
--&gt; 637       as_ref=False)
    638 
    639 

~/anaconda3/lib/python3.6/site-packages/tensorflow/python/framework/ops.py in internal_convert_to_tensor(value, dtype, name, as_ref, preferred_dtype)
    700 
    701         if ret is None:
--&gt; 702           ret = conversion_func(value, dtype=dtype, name=name, as_ref=as_ref)
    703 
    704         if ret is NotImplemented:

~/anaconda3/lib/python3.6/site-packages/tensorflow/python/framework/constant_op.py in _constant_tensor_conversion_function(v, dtype, name, as_ref)
    108                                          as_ref=False):
    109   _ = as_ref
--&gt; 110   return constant(v, dtype=dtype, name=name)
    111 
    112 

~/anaconda3/lib/python3.6/site-packages/tensorflow/python/framework/constant_op.py in constant(value, dtype, shape, name, verify_shape)
     97   tensor_value = attr_value_pb2.AttrValue()
     98   tensor_value.tensor.CopyFrom(
---&gt; 99       tensor_util.make_tensor_proto(value, dtype=dtype, shape=shape, verify_shape=verify_shape))
    100   dtype_value = attr_value_pb2.AttrValue(type=tensor_value.tensor.dtype)
    101   const_tensor = g.create_op(

~/anaconda3/lib/python3.6/site-packages/tensorflow/python/framework/tensor_util.py in make_tensor_proto(values, dtype, shape, verify_shape)
    439   if numpy_dtype == dtypes.string and not isinstance(values, np.ndarray):
    440     proto_values = _FlattenToStrings(values)
--&gt; 441     tensor_proto.string_val.extend([compat.as_bytes(x) for x in proto_values])
    442     return tensor_proto
    443 

~/anaconda3/lib/python3.6/site-packages/tensorflow/python/framework/tensor_util.py in &lt;listcomp&gt;(.0)
    439   if numpy_dtype == dtypes.string and not isinstance(values, np.ndarray):
    440     proto_values = _FlattenToStrings(values)
--&gt; 441     tensor_proto.string_val.extend([compat.as_bytes(x) for x in proto_values])
    442     return tensor_proto
    443 

~/anaconda3/lib/python3.6/site-packages/tensorflow/python/util/compat.py in as_bytes(bytes_or_text, encoding)
     63   else:
     64     raise TypeError('Expected binary or unicode string, got %r' %
---&gt; 65                     (bytes_or_text,))
     66 
     67 

TypeError: Expected binary or unicode string, got None
&lt;/denchmark-code&gt;

	</description>
	<comments>
		<comment id='1' author='omidrohanian' date='2017-10-24T02:58:01Z'>
		i also got the same error !  when i run evaluating the model,it occured this "TypeError: batch_iter() missing 1 required positional argument: 'batch_size' "
keras 2.0.8   tf : 1.2.1
		</comment>
		<comment id='2' author='omidrohanian' date='2018-06-03T10:09:39Z'>
		Probably solved. Thanks!
		</comment>
		<comment id='3' author='omidrohanian' date='2018-06-08T09:14:02Z'>
		Hey Hironsan , can you please explain how was your problem solved?
I am having the same issue
		</comment>
	</comments>
</bug>