<bug id='240' author='pyaf' open_date='2019-08-06T17:23:59Z' closed_time='2019-10-16T14:58:03Z'>
	<summary>Classes in string when one of actual or target vector is numpy and the other is not</summary>
	<description>
&lt;denchmark-h:h4&gt;Description&lt;/denchmark-h&gt;

Hey, I've found a bug in PyCM.
If one of actual and target vectors is a numpy array and the other is not, the classes tend to be strings.
&lt;denchmark-h:h4&gt;Steps/Code to Reproduce&lt;/denchmark-h&gt;

&lt;denchmark-code&gt;from pycm import *
y_actu = np.array([2, 0, 2, 2, 0, 1, 1, 2, 2, 0, 1, 2])
y_pred = [0, 0, 2, 1, 0, 2, 1, 0, 2, 0, 2, 2]
cm = ConfusionMatrix(actual_vector=y_actu, predict_vector=y_pred) # Create CM From Data
print(cm.classes)
&lt;/denchmark-code&gt;

&lt;denchmark-h:h4&gt;Expected Behavior&lt;/denchmark-h&gt;

Output should be [0, 1, 2]
&lt;denchmark-h:h4&gt;Actual Behavior&lt;/denchmark-h&gt;

Output is ['0', '1', '2']
&lt;denchmark-h:h4&gt;Operating System&lt;/denchmark-h&gt;

Linux Ubuntu 18.04
&lt;denchmark-h:h4&gt;Python Version&lt;/denchmark-h&gt;

3.7.2
&lt;denchmark-h:h4&gt;PyCM Version&lt;/denchmark-h&gt;

2.3
Tip: pycm.__version__ is helpful sometimes, it isn't implemented yet.
	</description>
	<comments>
		<comment id='1' author='pyaf' date='2019-08-06T17:24:51Z'>
		&lt;denchmark-link:https://github.com/sepandhaghighi&gt;@sepandhaghighi&lt;/denchmark-link&gt;
 This is in response to your mail dated 5 Aug 2019.
		</comment>
		<comment id='2' author='pyaf' date='2019-08-06T18:33:38Z'>
		&lt;denchmark-link:https://github.com/pyaf&gt;@pyaf&lt;/denchmark-link&gt;
 Hi
Thanks a lot.
It's a major bug, we will fix it in next releases ;-)
Also nice tip about  ;-)
		</comment>
		<comment id='3' author='pyaf' date='2019-08-07T13:00:17Z'>
		&lt;denchmark-link:https://github.com/sadrasabouri&gt;@sadrasabouri&lt;/denchmark-link&gt;

Another task for you ;-)
I think, there is something wrong with  function.


My suggestion :


Move first part of matrix_params_calc  to vector_filter function.



pycm/pycm/pycm_util.py


        Lines 275 to 280
      in
      60b4cbc






 if isinstance(actual_vector, numpy.ndarray): 



 actual_vector = actual_vector.tolist() 



 if isinstance(predict_vector, numpy.ndarray): 



 predict_vector = predict_vector.tolist() 



 if isinstance(sample_weight, numpy.ndarray): 



 sample_weight = sample_weight.tolist() 







Call vector_filter inside of matrix_params_calc


Remove this lines



pycm/pycm/pycm_obj.py


        Lines 834 to 835
      in
      60b4cbc






 [actual_vector, predict_vector] = vector_filter( 



 actual_vector, predict_vector) 







Notice 1 : You should check all these parts.
Notice 2 : Add a testcase for this condition to overall_test.py
Notice 3 : You should rebase your forked repository
		</comment>
		<comment id='4' author='pyaf' date='2019-08-07T14:21:55Z'>
		Allright!
I'll do this.
		</comment>
		<comment id='5' author='pyaf' date='2019-10-16T14:58:03Z'>
		fixed
		</comment>
	</comments>
</bug>