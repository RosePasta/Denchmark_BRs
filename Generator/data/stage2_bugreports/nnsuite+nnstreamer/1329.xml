<bug id='1329' author='myungjoo' open_date='2019-04-03T11:00:43Z' closed_time='2019-08-18T12:13:59Z'>
	<summary>[BUG!][Tensorflow] Ref Count Failed</summary>
	<description>
&lt;denchmark-code&gt;2019-04-03 19:58:36.165867: F /usr/include/tensorflow/tensorflow/core/lib/core/refcount.h:87] Check failed: ref_.load() &gt; 0 (0 vs. 0)
./gst-launch-object-detection-tf.sh: line 21: 30339 Aborted                 (core dumped) gst-launch-1.0 v4l2src name=cam_src ! videoscale ! videoconvert ! video/x-raw,width=640,height=480,format=RGB,framerate=30/1 ! tee name=t t. ! queue leaky=2 max-size-buffers=2 ! videoscale ! tensor_converter ! tensor_filter framework=tensorflow model=ssdlite_mobilenet_v2.pb input=3:640:480:1 inputname=image_tensor inputtype=uint8 output=1:1:1:1,100:1:1:1,100:1:1:1,4:100:1:1 outputname=num_detections,detection_classes,detection_scores,detection_boxes outputtype=float32,float32,float32,float32 ! tee name=tx tx. ! queue ! tensor_demux name=dmx dmx.src_0 ! queue ! multifilesink location="/tmp/testtfssd_tensors.0.%d" index=0 dmx.src_1 ! queue ! multifilesink location="/tmp/testtfssd_tensors.1.%d" index=0 dmx.src_2 ! queue ! multifilesink location="/tmp/testtfssd_tensors.2.%d" index=0 dmx.src_3 ! queue ! multifilesink location="/tmp/testtfssd_tensors.3.%d" index=0 tx. ! queue ! tensor_decoder mode=bounding_boxes option1=tf-ssd option2=coco_labels_list.txt option4=160:120 option5=640:480 ! tee name=sx sx. ! queue ! videoconvert ! video/x-raw,format=BGRx ! multifilesink location="/tmp/testtfssd_golden.%d" index=0 sx. ! queue ! compositor name=mix sink_0::zorder=2 sink_1::zorder=1 ! videoconvert ! ximagesink t. ! queue leaky=2 max-size-buffers=10 ! mix.
mzx@kohaku:/source/AutoDrv/nnstreamer-example/bash_script/example_object_detection_tensorflow$ cat gst-launch-object-detection-tf.sh 
#!/usr/bin/env bash
gst-launch-1.0 \
	v4l2src name=cam_src ! videoscale ! videoconvert ! video/x-raw,width=640,height=480,format=RGB,framerate=30/1 ! tee name=t \
    t. ! queue leaky=2 max-size-buffers=2 ! videoscale ! tensor_converter ! \
		tensor_filter framework=tensorflow model=ssdlite_mobilenet_v2.pb \
			input=3:640:480:1 inputname=image_tensor inputtype=uint8 \
			output=1:1:1:1,100:1:1:1,100:1:1:1,4:100:1:1 \
			outputname=num_detections,detection_classes,detection_scores,detection_boxes \
			outputtype=float32,float32,float32,float32 ! \
			tee name=tx \
		tx. ! queue ! tensor_demux name=dmx \
			dmx.src_0 ! queue ! multifilesink location="/tmp/testtfssd_tensors.0.%d" index=0 \
			dmx.src_1 ! queue ! multifilesink location="/tmp/testtfssd_tensors.1.%d" index=0 \
			dmx.src_2 ! queue ! multifilesink location="/tmp/testtfssd_tensors.2.%d" index=0 \
			dmx.src_3 ! queue ! multifilesink location="/tmp/testtfssd_tensors.3.%d" index=0 \
		tx. ! queue ! \
		tensor_decoder mode=bounding_boxes option1=tf-ssd option2=coco_labels_list.txt option4=160:120 option5=640:480 ! \
			tee name=sx \
		sx. ! queue ! videoconvert ! video/x-raw,format=BGRx ! multifilesink location="/tmp/testtfssd_golden.%d" index=0 \
		sx. ! queue ! compositor name=mix sink_0::zorder=2 sink_1::zorder=1 ! videoconvert ! ximagesink \
	t. ! queue leaky=2 max-size-buffers=10 ! mix.
mzx@kohaku:/source/AutoDrv/nnstreamer-example/bash_script/example_object_detection_tensorflow$ 
&lt;/denchmark-code&gt;

Ubuntu 16.04 / x64 machine
NNStreamer 0.1.3-RC / &lt;denchmark-link:https://github.com/nnstreamer/nnstreamer/commit/8695359fe61a790f5694579312fdee8381fe6319&gt;8695359&lt;/denchmark-link&gt;

Modified version of 
	</description>
	<comments>
		<comment id='1' author='myungjoo' date='2019-04-03T11:00:46Z'>
		 : Thank you for posting issue &lt;denchmark-link:https://github.com/nnstreamer/nnstreamer/issues/1329&gt;#1329&lt;/denchmark-link&gt;
. The person in charge will reply soon.
		</comment>
		<comment id='2' author='myungjoo' date='2019-04-09T03:36:07Z'>
		PR &lt;denchmark-link:https://github.com/nnstreamer/nnstreamer/pull/1339&gt;#1339&lt;/denchmark-link&gt;
 refactor code about tf-buffer
		</comment>
	</comments>
</bug>