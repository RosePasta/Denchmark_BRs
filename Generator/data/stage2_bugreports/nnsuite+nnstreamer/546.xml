<bug id='546' author='wooksong' open_date='2018-09-18T08:30:37Z' closed_time='2018-11-05T08:08:17Z'>
	<summary>[Performance Bug] FPS drops when the pipeline using NNStreamer is attached to the normal gstreamer pipeline</summary>
	<description>
&lt;denchmark-h:h4&gt;Issue Description&lt;/denchmark-h&gt;

The structure of ./nnstreamer_example/example_filter_performance_profile is as follows:
&lt;denchmark-code&gt;v4l2src [USB-CAM 1920x1080/30fps] -- videoconvert -- tee -- queue -- textoverlay -- fpsdisplaysink
                                                      |                                                
                                                      -- queue -- videoscale [224x224] -- videoconvert [RGB]-- tensor_converter -- tensor_filter [Mobinet w/ TF Lite] -- tensor_sink
&lt;/denchmark-code&gt;

Under this structure, the FPS value measured by fpsdisplaysink drops to about 20. Howerver, when the NNStreamer line is disabled (which means the bottom queue is not linked to the upper tee), the FPS value measured by fpsdisplaysink is 30, same as that of input.
&lt;denchmark-h:h4&gt;How to reproduce&lt;/denchmark-h&gt;


Clone https://github.com/wooksong/nnstreamer/tree/issue-546
Build


For the nnline-enabled running,



&lt;denchmark-code&gt;./nnstreamer_example_filter_performance_profile -c /dev/video0
&lt;/denchmark-code&gt;

&lt;denchmark-link:https://user-images.githubusercontent.com/2772376/45674440-1a7a0f80-bb68-11e8-945a-9ba170cacfc3.png&gt;&lt;/denchmark-link&gt;




For the nnline-disabled running,



&lt;denchmark-code&gt;./nnstreamer_example_filter_performance_profile -c /dev/video0 --streamline-only
&lt;/denchmark-code&gt;

&lt;denchmark-link:https://user-images.githubusercontent.com/2772376/45674335-dedf4580-bb67-11e8-995f-0874ce7bbdbe.png&gt;&lt;/denchmark-link&gt;

	</description>
	<comments>
		<comment id='1' author='wooksong' date='2018-09-18T08:30:40Z'>
		 : Thank you for posting issue &lt;denchmark-link:https://github.com/nnstreamer/nnstreamer/issues/546&gt;#546&lt;/denchmark-link&gt;
. The person in charge will reply soon.
		</comment>
		<comment id='2' author='wooksong' date='2018-09-19T04:27:45Z'>
		How's the CPU utilization in both cases?
		</comment>
		<comment id='3' author='wooksong' date='2018-09-21T06:13:38Z'>
		&lt;denchmark-link:https://github.com/myungjoo&gt;@myungjoo&lt;/denchmark-link&gt;



The case of the nnline-enabled running: about 16% (on Intel Core i7-6700 CPU @ 3.40GHz)



The case of the nnline-disabled running: about 5% (on Intel Core i7-6700 CPU @ 3.40GHz)



		</comment>
		<comment id='4' author='wooksong' date='2018-10-31T11:48:41Z'>
		This issue is detailed in &lt;denchmark-link:https://github.com/nnstreamer/nnstreamer/issues/741&gt;#741&lt;/denchmark-link&gt;
.
		</comment>
		<comment id='5' author='wooksong' date='2018-11-05T08:08:17Z'>
		Duplicated. Closing this. (Continued on &lt;denchmark-link:https://github.com/nnstreamer/nnstreamer/issues/741&gt;#741&lt;/denchmark-link&gt;
)
		</comment>
	</comments>
</bug>