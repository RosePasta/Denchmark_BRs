<bug id='1911' author='myungjoo' open_date='2019-12-04T10:25:46Z' closed_time='2019-12-18T04:52:20Z'>
	<summary>NNFW-Runtime Subplugin Unittest Fail</summary>
	<description>
TAOS_CI does not to unittest for ARM binaries. So don't rely on it to test NNFW-runtime, which is enabled only for ARM devices.
In ARM build of today's master HEAD ( &lt;denchmark-link:https://github.com/nnstreamer/nnstreamer/commit/306087fe7213ffcdfd03054bdaed45d65e9e5f21&gt;306087f&lt;/denchmark-link&gt;
 ), if you do unittest with ARM:
&lt;denchmark-code&gt;...
[  201s] + ./tests/tizen_nnfw_runtime/unittest_nnfw_runtime_raw --gst-plugin-path=. --gtest_output=xml:unittest_nnfw_runtime_raw.xml
[  201s] [==========] Running 5 tests from 1 test case.
[  201s] [----------] Global test environment set-up.
[  201s] [----------] 5 tests from nnstreamer_nnfw_runtime_raw_functions
[  201s] [ RUN      ] nnstreamer_nnfw_runtime_raw_functions.check_existence
[  201s] [       OK ] nnstreamer_nnfw_runtime_raw_functions.check_existence (26 ms)
[  201s] [ RUN      ] nnstreamer_nnfw_runtime_raw_functions.open_close_00_n
[  201s] invalid nnpackge directory: null.nnfw
[  201s] Cannot load the model file: null.nnfw[       OK ] nnstreamer_nnfw_runtime_raw_functions.open_close_00_n (2 ms)
[  201s] [ RUN      ] nnstreamer_nnfw_runtime_raw_functions.open_close_01_n
[  201s] nnfw_close called without proper nnfw_openCan't load libOpenCL.so: libOpenCL.so: cannot open shared object file: No such file or directory
[  201s] Can't load libGLES_mali.so: libGLES_mali.so: cannot open shared object file: No such file or directory
[  201s] Can't load libmali.so: libmali.so: cannot open shared object file: No such file or directory
[  201s] Couldn't find any OpenCL library.
[  201s] Error during model prepare
[  201s] nnfw-runtime cannot prepare the session for /home/abuild/rpmbuild/BUILD/nnstreamer-1.0.0/tests/test_models/models../tests/tizen_nnfw_runtime/unittest_tizen_nnfw_runtime_raw.cpp:82: Failure
[  201s]       Expected: ret
[  201s]       Which is: -22
[  201s] To be equal to: 0
[  201s] nnfw_close called without proper nnfw_opennnfw_close called without proper nnfw_open[  FAILED  ] nnstreamer_nnfw_runtime_raw_functions.open_close_01_n (77 ms)
[  201s] [ RUN      ] nnstreamer_nnfw_runtime_raw_functions.get_dimension
[  201s] 
[  201s] ** (process:31036): CRITICAL **: nnfw_tensors_info_get: assertion 'pdata != NULL' failed
[  201s] 
[  201s] ** (process:31036): CRITICAL **: nnfw_tensors_info_get: assertion 'pdata != NULL' failed
[  201s] Error during model prepare
[  201s] nnfw-runtime cannot prepare the session for /home/abuild/rpmbuild/BUILD/nnstreamer-1.0.0/tests/test_models/models../tests/tizen_nnfw_runtime/unittest_tizen_nnfw_runtime_raw.cpp:130: Failure
[  201s]       Expected: ret
[  201s]       Which is: -22
[  201s] To be equal to: 0
[  201s] 
[  201s] ** (process:31036): CRITICAL **: nnfw_tensors_info_get: assertion 'info != NULL' failed
[  201s] 
[  201s] ** (process:31036): CRITICAL **: nnfw_tensors_info_get: assertion 'pdata != NULL' failed
[  201s] ../tests/tizen_nnfw_runtime/unittest_tizen_nnfw_runtime_raw.cpp:143: Failure
[  201s]       Expected: ret
[  201s]       Which is: -22
[  201s] To be equal to: 0
[  201s] ../tests/tizen_nnfw_runtime/unittest_tizen_nnfw_runtime_raw.cpp:146: Failure
[  201s]       Expected: res.info[0].type
[  201s]       Which is: 1
[  201s] To be equal to: info.info[0].type
[  201s]       Which is: 7
[  201s] ../tests/tizen_nnfw_runtime/unittest_tizen_nnfw_runtime_raw.cpp:147: Failure
[  201s]       Expected: res.info[0].dimension[0]
[  201s]       Which is: 0
[  201s] To be equal to: info.info[0].dimension[0]
[  201s]       Which is: 1
[  201s] ../tests/tizen_nnfw_runtime/unittest_tizen_nnfw_runtime_raw.cpp:148: Failure
[  201s]       Expected: res.info[0].dimension[1]
[  201s]       Which is: 19897488
[  201s] To be equal to: info.info[0].dimension[1]
[  201s]       Which is: 1
[  201s] ../tests/tizen_nnfw_runtime/unittest_tizen_nnfw_runtime_raw.cpp:149: Failure
[  201s]       Expected: res.info[0].dimension[2]
[  201s]       Which is: 64
[  201s] To be equal to: info.info[0].dimension[2]
[  201s]       Which is: 1
[  201s] ../tests/tizen_nnfw_runtime/unittest_tizen_nnfw_runtime_raw.cpp:150: Failure
[  201s]       Expected: res.info[0].dimension[3]
[  201s]       Which is: 10488744
[  201s] To be equal to: info.info[0].dimension[3]
[  201s]       Which is: 1
[  201s] 
[  201s] ** (process:31036): CRITICAL **: nnfw_tensors_info_get: assertion 'info != NULL' failed
[  201s] 
[  201s] ** (process:31036): CRITICAL **: nnfw_tensors_info_get: assertion 'pdata != NULL' failed
[  201s] ../tests/tizen_nnfw_runtime/unittest_tizen_nnfw_runtime_raw.cpp:155: Failure
[  201s]       Expected: ret
[  201s]       Which is: -22
[  201s] To be equal to: 0
[  201s] ../tests/tizen_nnfw_runtime/unittest_tizen_nnfw_runtime_raw.cpp:158: Failure
[  201s]       Expected: res.info[0].type
[  201s]       Which is: 1
[  201s] To be equal to: info.info[0].type
[  201s]       Which is: 7
[  201s] ../tests/tizen_nnfw_runtime/unittest_tizen_nnfw_runtime_raw.cpp:159: Failure
[  201s]       Expected: res.info[0].dimension[0]
[  201s]       Which is: 0
[  201s] To be equal to: info.info[0].dimension[0]
[  201s]       Which is: 1
[  201s] ../tests/tizen_nnfw_runtime/unittest_tizen_nnfw_runtime_raw.cpp:160: Failure
[  201s]       Expected: res.info[0].dimension[1]
[  201s]       Which is: 19897488
[  201s] To be equal to: info.info[0].dimension[1]
[  201s]       Which is: 1
[  201s] ../tests/tizen_nnfw_runtime/unittest_tizen_nnfw_runtime_raw.cpp:161: Failure
[  201s]       Expected: res.info[0].dimension[2]
[  201s]       Which is: 64
[  201s] To be equal to: info.info[0].dimension[2]
[  201s]       Which is: 1
[  201s] ../tests/tizen_nnfw_runtime/unittest_tizen_nnfw_runtime_raw.cpp:162: Failure
[  201s]       Expected: res.info[0].dimension[3]
[  201s]       Which is: 10488744
[  201s] To be equal to: info.info[0].dimension[3]
[  201s]       Which is: 1
[  201s] nnfw_close called without proper nnfw_open[  FAILED  ] nnstreamer_nnfw_runtime_raw_functions.get_dimension (7 ms)
[  201s] [ RUN      ] nnstreamer_nnfw_runtime_raw_functions.invoke
[  201s] 
[  201s] ** (process:31036): CRITICAL **: nnfw_tensor_memory_set: assertion 'pdata != NULL' failed
[  201s] Error during model prepare
[  201s] nnfw-runtime cannot prepare the session for /home/abuild/rpmbuild/BUILD/nnstreamer-1.0.0/tests/test_models/models../tests/tizen_nnfw_runtime/unittest_tizen_nnfw_runtime_raw.cpp:213: Failure
[  201s]       Expected: ret
[  201s]       Which is: -22
[  201s] To be equal to: 0
[  201s] 
[  201s] ** (process:31036): CRITICAL **: nnfw_tensor_memory_set: assertion 'mem != NULL' failed
[  201s] 
[  201s] ** (process:31036): CRITICAL **: nnfw_tensor_memory_set: assertion 'pdata != NULL' failed
[  201s] 
[  201s] ** (process:31036): CRITICAL **: nnfw_tensor_memory_set: assertion 'mem != NULL' failed
[  201s] 
[  201s] ** (process:31036): CRITICAL **: nnfw_tensor_memory_set: assertion 'pdata != NULL' failed
[  201s] ../tests/tizen_nnfw_runtime/unittest_tizen_nnfw_runtime_raw.cpp:225: Failure
[  201s]       Expected: ret
[  201s]       Which is: -22
[  201s] To be equal to: 0
[  201s] ../tests/tizen_nnfw_runtime/unittest_tizen_nnfw_runtime_raw.cpp:226: Failure
[  201s]       Expected: *((float *)output.data)
[  201s]       Which is: 1.93637e-38
[  201s] To be equal to: 12.0
[  201s]       Which is: 12
[  201s] 
[  201s] ** (process:31036): CRITICAL **: nnfw_tensor_memory_set: assertion 'pdata != NULL' failed
[  201s] ../tests/tizen_nnfw_runtime/unittest_tizen_nnfw_runtime_raw.cpp:230: Failure
[  201s]       Expected: ret
[  201s]       Which is: -22
[  201s] To be equal to: 0
[  201s] ../tests/tizen_nnfw_runtime/unittest_tizen_nnfw_runtime_raw.cpp:231: Failure
[  201s]       Expected: *((float *)output.data)
[  201s]       Which is: 1.93637e-38
[  201s] To be equal to: 3.0
[  201s]       Which is: 3
[  201s] nnfw_close called without proper nnfw_open[  FAILED  ] nnstreamer_nnfw_runtime_raw_functions.invoke (6 ms)
[  201s] [----------] 5 tests from nnstreamer_nnfw_runtime_raw_functions (119 ms total)
[  201s] 
[  201s] [----------] Global test environment tear-down
[  201s] [==========] 5 tests from 1 test case ran. (121 ms total)
[  201s] [  PASSED  ] 2 tests.
[  201s] [  FAILED  ] 3 tests, listed below:
[  201s] [  FAILED  ] nnstreamer_nnfw_runtime_raw_functions.open_close_01_n
[  201s] [  FAILED  ] nnstreamer_nnfw_runtime_raw_functions.get_dimension
[  201s] [  FAILED  ] nnstreamer_nnfw_runtime_raw_functions.invoke
[  201s] 
[  201s]  3 FAILED TESTS
[  201s] error: Bad exit status from /var/tmp/rpm-tmp.scBy7a (%build)
...
&lt;/denchmark-code&gt;

	</description>
	<comments>
		<comment id='1' author='myungjoo' date='2019-12-04T10:25:47Z'>
		 : Thank you for posting issue &lt;denchmark-link:https://github.com/nnstreamer/nnstreamer/issues/1911&gt;#1911&lt;/denchmark-link&gt;
. The person in charge will reply soon.
		</comment>
		<comment id='2' author='myungjoo' date='2019-12-05T06:32:59Z'>
		This will be addressed by fixing up missing dependencies from nnfw developers: &lt;denchmark-link:https://github.com/chunseoklee&gt;@chunseoklee&lt;/denchmark-link&gt;
 and &lt;denchmark-link:https://github.com/daeinki&gt;@daeinki&lt;/denchmark-link&gt;

		</comment>
	</comments>
</bug>