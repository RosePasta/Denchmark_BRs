<bug id='660' author='leemgs' open_date='2018-10-17T08:21:56Z' closed_time='2018-10-24T09:14:59Z'>
	<summary>[Test] Evaluating Producer &amp; Consumer with GUI video application</summary>
	<description>
Here is  a video app test: producer / consumer
&lt;denchmark-h:h2&gt;Testcase 1 ( summary)&lt;/denchmark-h&gt;


producer:  $ gst-launch-1.0 videotestsrc ! v4l2sink device=/dev/video0
consumer:  $ gst-launch-1.0 v4l2src device=/dev/video0 ! xvimagesink

&lt;denchmark-h:h2&gt;Testcase 2 (others)&lt;/denchmark-h&gt;

&lt;denchmark-h:h3&gt;gstreamer: producer&lt;/denchmark-h&gt;

$ ffmpeg -f x11grab -r 15 -s 1280x720 -i :0.0+0,0 -vcodec rawvideo -pix_fmt yuv420p -threads 0 -f v4l2 /dev/video0
$ gst-launch-1.0 videotestsrc ! v4l2sink device=/dev/video0
$ wget &lt;denchmark-link:http://file-examples.com/wp-content/uploads/2017/04/file_example_MP4_640_3MG.mp4&gt;http://file-examples.com/wp-content/uploads/2017/04/file_example_MP4_640_3MG.mp4&lt;/denchmark-link&gt;

$ gst-launch-1.0  filesrc location=./file_example_MP4_640_3MG.mp4 ! decodebin ! videoconvert ! v4l2sink device=/dev/video0
&lt;denchmark-h:h3&gt;gstreamer: consumer&lt;/denchmark-h&gt;

$ gst-launch-1.0 v4l2src device=/dev/video0 ! xvimagesink
$ ./nnstreamer_example_filter
	</description>
	<comments>
		<comment id='1' author='leemgs' date='2018-10-17T08:21:57Z'>
		 : Thank you for posting issue &lt;denchmark-link:https://github.com/nnstreamer/nnstreamer/issues/660&gt;#660&lt;/denchmark-link&gt;
. The person in charge will reply soon.
		</comment>
		<comment id='2' author='leemgs' date='2018-10-17T08:22:04Z'>
		&lt;denchmark-h:h3&gt;Evaluation: on Real display + Ubuntu 16.04 x86_64 ==&gt; Succeeded&lt;/denchmark-h&gt;


producer:  $ gst-launch-1.0 videotestsrc ! v4l2sink device=/dev/video0  ==&gt; O
consumer:  $ gst-launch-1.0 v4l2src device=/dev/video0 ! xvimagesink  ==&gt; O

&lt;denchmark-h:h3&gt;Evaluation: on local display(w/o VNC) + Ubuntu 16.04 x86_64 ==&gt; Failed&lt;/denchmark-h&gt;


producer:  $ gst-launch-1.0 videotestsrc ! v4l2sink device=/dev/video0   ==&gt; O
consumer:  $ gst-launch-1.0 v4l2src device=/dev/video0 ! xvimagesink   ===&gt; X
consumer:  $ gst-launch-1.0 v4l2src device=/dev/video0 ! videoconvert ! ximagesink   ===&gt; O
My solution (Geunsik): Please install  gstreamer1.0-libav , gstreamer1.0-plugins-bad-faad , gstreamer1.0-plugins-bad-videoparsers after install a video graphic driver. Then retry it.

log :  strace -t -o local-consumer-err.txt gst-launch-1.0   v4l2src device=/dev/video0 ! xvimagesink



&lt;denchmark-link:https://user-images.githubusercontent.com/82404/47141331-618c2980-d2fb-11e8-92d2-781eebab6156.png&gt;&lt;/denchmark-link&gt;

$ xvinfo                                                                                                                                                                                                                                                                       
X-Video Extension version 2.2
screen #0
 no adaptors present
&lt;denchmark-h:h3&gt;Evaluation: on virtual display(VNC) + Ubuntu 16.04 x86_64 ==&gt; Failed&lt;/denchmark-h&gt;


producer:  $ gst-launch-1.0 videotestsrc ! v4l2sink device=/dev/video0   ==&gt; O
consumer:  $ gst-launch-1.0 v4l2src device=/dev/video0 ! videoconvert ! ximagesink   ===&gt; O
consumer:  $ gst-launch-1.0 v4l2src device=/dev/video0 ! xvimagesink   ===&gt; X

My solution (Geunsik):  Install vino-preference utility instead of vnc4server (or tigervnc-server) to use same display port (e.g., $ echo $DISPLAY  ( :0 ) == vino-preference (5900) )



&lt;denchmark-h:h3&gt;log message in case that a consumer generates a runtime error:&lt;/denchmark-h&gt;

invain@mymate:~$ gst-launch-1.0 v4l2src device=/dev/video0 ! xvimagesink
Setting pipeline to PAUSED ...
ERROR: Pipeline doesn't want to pause.
ERROR: from element /GstPipeline:pipeline0/GstXvImageSink:xvimagesink0: Could not initialise Xv output
Additional debug info:
xvimagesink.c(1760): gst_xv_image_sink_open (): /GstPipeline:pipeline0/GstXvImageSink:xvimagesink0:
No Xv Port available
Setting pipeline to NULL ...
Freeing pipeline ...
invain@mymate:~$  
		</comment>
		<comment id='3' author='leemgs' date='2018-10-17T08:23:19Z'>
		
XImageSink renders video frames to a drawable (XWindow) on a local or remote display.
XvImageSink renders video frames to a drawable (XWindow) on a local display using the XVideo extension



Reference:

https://gstreamer.freedesktop.org/data/doc/gstreamer/head/gst-plugins-base-plugins/html/gst-plugins-base-plugins-ximagesink.html
https://gstreamer.freedesktop.org/data/doc/gstreamer/head/gst-plugins-base-plugins/html/gst-plugins-base-plugins-xvimagesink.html



		</comment>
		<comment id='4' author='leemgs' date='2018-10-17T08:24:26Z'>
		
$ gst-inspect-1.0  xvimagesink

Factory Details:
  Rank                     primary (256)
  Long-name                Video sink
  Klass                    Sink/Video
  Description              A Xv based videosink
  Author                   Julien Moutte &lt;julien@moutte.net&gt;

Plugin Details:
  Name                     xvimagesink
  Description              XFree86 video output plugin using Xv extension
  Filename                 /usr/lib/x86_64-linux-gnu/gstreamer-1.0/libgstxvimagesink.so
  Version                  1.8.3
  License                  LGPL
  Source module            gst-plugins-base
  Source release date      2016-08-19
  Binary package           GStreamer Base Plugins (Ubuntu)
  Origin URL               https://launchpad.net/distros/ubuntu/+source/gst-plugins-base1.0

$ gst-inspect-1.0  ximagesink

Factory Details:
  Rank                     secondary (128)
  Long-name                Video sink
  Klass                    Sink/Video
  Description              A standard X based videosink
  Author                   Julien Moutte &lt;julien@moutte.net&gt;

Plugin Details:
  Name                     ximagesink
  Description              X11 video output element based on standard Xlib calls
  Filename                 /usr/lib/x86_64-linux-gnu/gstreamer-1.0/libgstximagesink.so
  Version                  1.8.3
  License                  LGPL
  Source module            gst-plugins-base
  Source release date      2016-08-19
  Binary package           GStreamer Base Plugins (Ubuntu)
  Origin URL               https://launchpad.net/distros/ubuntu/+source/gst-plugins-base1.0

		</comment>
		<comment id='5' author='leemgs' date='2018-10-17T14:21:00Z'>
		
http://gstreamer-devel.966125.n4.nabble.com/xvimagesink-Could-not-initialise-Xv-output-and-No-port-available-td3092246.html

		</comment>
		<comment id='6' author='leemgs' date='2018-10-18T08:19:27Z'>
		I have summarized my solution as a workaround to solve this issue at &lt;denchmark-link:https://github.com/nnstreamer/nnstreamer/issues/660#issuecomment-430535584&gt;#660 (comment)&lt;/denchmark-link&gt;
. It is experimented on Ubunu 16.04 x86_64 distribution + Windows mobaxterm (vnc session).
Please, refer to "My solution (Geunsik): .............." statement.
		</comment>
		<comment id='7' author='leemgs' date='2018-10-18T08:36:08Z'>
		&lt;denchmark-link:https://github.com/jijoongmoon&gt;@jijoongmoon&lt;/denchmark-link&gt;
 , &lt;denchmark-link:https://github.com/jaeyun-jung&gt;@jaeyun-jung&lt;/denchmark-link&gt;
  Could you check if my solution  (as a workaround) is okay in your Ubuntu desktop computer?
		</comment>
		<comment id='8' author='leemgs' date='2018-10-24T09:14:59Z'>
		Resolved.
		</comment>
	</comments>
</bug>