<bug id='303' author='smcope' open_date='2020-09-11T16:56:21Z' closed_time='2020-11-10T12:49:19Z'>
	<summary>gRPC client example jpeg_classification.py passes RBG image while RESNET expects RGB</summary>
	<description>
Line 48 of jpeg_classification.py transposes BGR--&gt;RBG. RESNET expects RGB format.
Proposed change:
Line 48: img = img.transpose(2,1,0).reshape(1,3,size,size)
	</description>
	<comments>
		<comment id='1' author='smcope' date='2020-10-02T22:22:31Z'>
		&lt;denchmark-link:https://github.com/smcope&gt;@smcope&lt;/denchmark-link&gt;
 indeed for models expecting RGB format there should be added a conversion.
It should be something like this:
img = img[:, :, [2, 1, 0]]
The command you listed would rather convert on different dimensions from HWC to CHW.
We will be adding improvements in the exemplary clients shortly.
		</comment>
		<comment id='2' author='smcope' date='2020-11-10T12:49:19Z'>
		&lt;denchmark-link:https://github.com/smcope&gt;@smcope&lt;/denchmark-link&gt;
 We are using the resnet50 model in the example from: gs://ovms-public-eu/resnet50
That is &lt;denchmark-link:https://github.com/openvinotoolkit/open_model_zoo/blob/master/models/intel/resnet50-binary-0001/description/resnet50-binary-0001.md&gt;https://github.com/openvinotoolkit/open_model_zoo/blob/master/models/intel/resnet50-binary-0001/description/resnet50-binary-0001.md&lt;/denchmark-link&gt;
 model that expects the following format:
A blob with a BGR image in the format: [B, C=3, H=224, W=224], where:
B – batch size
C – number of channels
H – image height
W – image width
img = cv2.imdecode(img, cv2.IMREAD_COLOR) reads an image in BGR channel format with HWC dimensions.
Thus we need to transpose it to CHW using img = img.transpose(2,0,1) method.
No color channels conversion is required here. But as you noticed if model input requires different channels order a channel reorder would be required.
We have added an option to convert to RGB in &lt;denchmark-link:https://github.com/openvinotoolkit/model_server/pull/345/files&gt;https://github.com/openvinotoolkit/model_server/pull/345/files&lt;/denchmark-link&gt;
 PR using the --rgb_image 1 command line option in the jpeg_classification example.
		</comment>
	</comments>
</bug>