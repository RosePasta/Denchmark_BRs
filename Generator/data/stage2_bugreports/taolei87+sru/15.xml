<bug id='15' author='lime-robot' open_date='2017-09-19T09:19:26Z' closed_time='2017-09-19T19:47:46Z'>
	<summary>An error occurred in the backward pass after adding the slice of hidden state.</summary>
	<description>
Hi,
when I use SRU in NMT
this error happened to me.
&lt;denchmark-code&gt;bidirectional = True
output, hidden = enc(x)      # forward pass

# (4, 64, 400) - (layers x batch_size x rnn_size*2)
hidden = hidden[:, :, 0:rnn_size] + hidden[:, :, rnn_size:]

output, hidden = dec(y, hidden)

...

loss.div(x.size(1)).backward() 
&lt;/denchmark-code&gt;

&lt;denchmark-h:hr&gt;&lt;/denchmark-h&gt;

loss.div(x.size(1)).backward()
File "/usr/local/lib/python2.7/dist-packages/torch/autograd/variable.py", line 156, in backward
torch.autograd.backward(self, gradient, retain_graph, create_graph, retain_variables)
File "/usr/local/lib/python2.7/dist-packages/torch/autograd/init.py", line 98, in backward
variables, grad_variables, retain_graph)
File "/usr/local/lib/python2.7/dist-packages/torch/autograd/function.py", line 91, in apply
return self._forward_cls.backward(self, *args)
File "/usr/local/lib/python2.7/dist-packages/torch/autograd/_functions/tensor.py", line 29, in backward
grad_input[ctx.index] = grad_output
File "/usr/local/lib/python2.7/dist-packages/torch/autograd/variable.py", line 85, in setitem
return SetItem.apply(self, key, value)
File "/usr/local/lib/python2.7/dist-packages/torch/autograd/_functions/tensor.py", line 43, in forward
i._set_index(ctx.index, value)
RuntimeError: invalid argument 2: sizes do not match at /pytorch/torch/lib/THC/THCTensorCopy.cu:31
	</description>
	<comments>
		<comment id='1' author='lime-robot' date='2017-09-19T18:46:23Z'>
		@kfaceapi the bug should be fixed now.
&lt;denchmark-link:https://github.com/asappresearch/sru/commit/e26604a56cebe576881a8a8bf359d085ba615bcf&gt;e26604a&lt;/denchmark-link&gt;

		</comment>
		<comment id='2' author='lime-robot' date='2017-09-20T04:41:25Z'>
		thank you!!
		</comment>
	</comments>
</bug>