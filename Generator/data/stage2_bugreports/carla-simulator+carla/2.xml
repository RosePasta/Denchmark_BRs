<bug id='2' author='nsubiron' open_date='2017-10-30T17:15:55Z' closed_time='2018-01-23T11:40:46Z'>
	<summary>Intersections are not deterministic</summary>
	<description>
The route that a vehicle follows when entering an intersection (turn left, right...) is chosen at random. This random number should come from the random engine associated with the vehicle spawner, and should always result in the same choices if the seed for vehicles is fixed. That's not currently the case.
Since we are doing changes in this part would be nice to clean and optimize the IntersectionEntrance and move most of the code to C++.
	</description>
	<comments>
		<comment id='1' author='nsubiron' date='2017-12-15T17:18:02Z'>
		A new actor "ARoutePlanner" has been added to substitute the intersection entrance actor. Most of the code has been cleaned up and moved out of the blueprints. Now it uses splines to visualize better the routes in editor.
However the problem wasn't in the previous actor, the new actor is still having the same issue.
I'm guessing the problem is that if several cars enter any trigger box during the same frame, the order in which the callback is called is not always the same. Inside the callback we request a random number from the global random engine for vehicles in order to choose which route the car will follow. Thus if the random numbers are requested in different order, each run the result will be different. If there are very few cars in the city this doesn't seem to happen, makes sense since the probability of getting two triggers in the same frame is very low.
		</comment>
		<comment id='2' author='nsubiron' date='2018-01-10T18:34:18Z'>
		Now each vehicle has its own random engine instance seeded from the original random engine at the vehicle spawner. This way each vehicle has its own chain of (deterministic) random decisions, derived from the global seed but independent of the decisions taken by other vehicles in the scene.
		</comment>
	</comments>
</bug>