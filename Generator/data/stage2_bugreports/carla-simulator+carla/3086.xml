<bug id='3086' author='little9999' open_date='2020-07-21T10:08:54Z' closed_time='2020-11-08T02:28:15Z'>
	<summary>Can not genereate pedestrian navigation info with RecastBuilder</summary>
	<description>
Hi,
I'm using carla 0.9.9.2 under ubuntu 18.04.
Today I created a custom road map with RoadRunner, and then I follow the doc &lt;denchmark-link:https://carla.readthedocs.io/en/latest/tuto_D_generate_pedestrian_navigation/&gt;https://carla.readthedocs.io/en/latest/tuto_D_generate_pedestrian_navigation/&lt;/denchmark-link&gt;
 to generate the pedestrian navigation info.
The RecastBuilder log sounds good :
Loading...
Building...
Saving...
However I can not find the generated *.bin file.
So I double check with the offical maps: Town01, Town02 and Town04.
I export the OBJ file and then launch RecastBuilder, everytime I have the same log "loading building saving", but there is only the Town04.bin is generated.
Bests,
Tao
	</description>
	<comments>
		<comment id='1' author='little9999' date='2020-07-24T00:38:07Z'>
		&lt;denchmark-link:https://github.com/bernatx&gt;@bernatx&lt;/denchmark-link&gt;
 could you have a look at this issue?
		</comment>
		<comment id='2' author='little9999' date='2020-07-24T08:16:12Z'>
		Hi, probably the map is too big to be processed. You can follow the following procedure. Just select all the meshes that involves in pedestrian navigation and deselect all that are not related, like the landscapes where the pedestrians can not navigate, the sky box...then export with the CARLA exporter, and try again with the new .obj.
		</comment>
		<comment id='3' author='little9999' date='2020-08-17T08:56:43Z'>
		I'm afraid I opened a new issue when I should have added to this one, see &lt;denchmark-link:https://github.com/carla-simulator/carla/issues/3189&gt;#3189&lt;/denchmark-link&gt;
 .
I'm not even interested in pedestrian navigation, but did want the traffic lights set up so that I could address them in simulation. Even with an extremely simple RoadRunner model (one crossroads) I had the same problem. I did a little debugging, see &lt;denchmark-link:https://github.com/carla-simulator/carla/issues/3189&gt;#3189&lt;/denchmark-link&gt;
, but have not yet solved it. I do not think it is anything to do with the size of the model.
It would be extremely helpful having an open-source example map that we could practise the toolchain on (at least starting with an .xodr + .fbx (+.xml)? set from RoadRunner, I understand the raw asset files are proprietary to them).
I'll add my &lt;denchmark-link:https://github.com/carla-simulator/carla/issues/3189&gt;#3189&lt;/denchmark-link&gt;
 comments here and close that other issue to reduce duplication.
		</comment>
		<comment id='4' author='little9999' date='2020-08-17T08:59:26Z'>
		[Here is what I put in &lt;denchmark-link:https://github.com/carla-simulator/carla/issues/3189&gt;#3189&lt;/denchmark-link&gt;
 on the same topic.]
RecastBuilder emits no .bin file at 'Generate pedestrian navigation' step of map import
Dear all, I hope this is an appropriate question. I have not found the answer elsewhere. I have been struggling for days to get my own model with working traffic lights into CARLA, starting from RoadRunner.
Really I would like to start with the source RoadRunner files used for the 'official' assets to see if they work for me. Are they available anywhere, or are they private? Or at least the exported .xodr/.fbx/xml files, even if the original .rrscene and assets must be private because of RoadRunner licensing on the assets. Then I could figure out if I have a toolchain issue, or the problem is with my own model. ANY example model someone else has succeeded with would be great.
I have built CARLA from source starting from a fairly recent commit &lt;denchmark-link:https://github.com/carla-simulator/carla/commit/8557c0b4e5e17ef6a7089b3cfcf3db6ea6cbca00&gt;8557c0b&lt;/denchmark-link&gt;
 (15Jul2020) and have tried both Ubuntu 18.04 and Windows 10.
I have built a model in RoadRunner with a simple auto-signalised crossroads and one crosswalk. I have followed the instructions at &lt;denchmark-link:https://carla.readthedocs.io/en/latest/tuto_A_add_map/#map-ingestion-in-a-build-from-source&gt;https://carla.readthedocs.io/en/latest/tuto_A_add_map/#map-ingestion-in-a-build-from-source&lt;/denchmark-link&gt;
 (most recently, have also tried RoadRunner plugin, the deprecated import method, docker image failed to build for me near end, carla-map-editor build also failed but I guess that's out of date now?). The closest I got was some animated traffic lights using the RoadRunner plugin in Ubuntu (not Windows), but that doesn't give me traffic light objects accessible via the PythonAPI, which I want to use with scenario_runner and OpenSCENARIO scripts.
I have also found the super-helpful video &lt;denchmark-link:https://www.youtube.com/watch?v=mHiUUZ4xC9o&gt;https://www.youtube.com/watch?v=mHiUUZ4xC9o&lt;/denchmark-link&gt;
 presented by Bernat Pina (&lt;denchmark-link:https://github.com/bernatx&gt;@bernatx&lt;/denchmark-link&gt;
 ?).
Both on Ubuntu and Windows, RecastBuilder does not build any .bin file for me. I have debugged a bit in Visual Studio 2017 and it fails because:
&lt;denchmark-code&gt;dtCreateNavMeshData() returns false because:
if (!params-&gt;vertCount || !params-&gt;verts) is true
vertCount is zero, though verts is non-NULL
Likewise params-&gt;polyCount is 0 though polys is non-NULL
So sample-&gt;handleBuild(); leaves us with m_navMesh=NULL
then sample-&gt;SaveAll() quietly fails
&lt;/denchmark-code&gt;

I tried hacking some likely non-zero numbers into those counts in the debugger to get a .bin file, but that didn't get me any traffic lights in the model.
I feel it would be very valuable if there was at least one very simple standard example map asset where all the source was available, so newbies like me have something to experiment with to figure out what is going wrong! (E.g. the model used by Bernat in that video.)
Thank you in advance for any tips!
Charlie Wartnaby, Applus IDIADA, UK
		</comment>
		<comment id='5' author='little9999' date='2020-10-18T05:25:46Z'>
		This issue has been automatically marked as stale because it has not had recent activity. It will be closed if no further activity occurs. Thank you for your contributions.
		</comment>
	</comments>
</bug>