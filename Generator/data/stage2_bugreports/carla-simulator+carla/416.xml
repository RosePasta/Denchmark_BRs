<bug id='416' author='wzhAptiv' open_date='2018-05-14T09:29:27Z' closed_time='2020-03-19T21:52:03Z'>
	<summary>Lidar sensor is not considering ego-pitch&amp;roll</summary>
	<description>
Currently, the Lidar sensor is only considering the yaw of the ego-car, but not pitch or roll.
Experiment can be easily conducted, by reading Lidar data points when the ego-car is turning.
During turning, the car will have some roll degree, but the Lidar points is not showing this effect, while the ground points are still flat in the Lidar coordinates.
I think this is a bug in Unreal/CarlaUE4/Plugins/Carla/Source/Carla/Sensor/Lidar.cpp
  FVector LidarBodyLoc = GetActorLocation();
  FRotator LidarBodyRot = GetActorRotation();
  FRotator LaserRot (VerticalAngle, HorizontalAngle, 0);  // float InPitch, float InYaw, float InRoll
  FRotator ResultRot = UKismetMathLibrary::ComposeRotators(
    LaserRot,
    LidarBodyRot
  );
  const auto Range = Description-&gt;Range;
  FVector EndTrace = Range * UKismetMathLibrary::GetForwardVector(ResultRot) + LidarBodyLoc;
I'm not deep into the engine code, but I think the ego-car rotation may not be considered in LidarBodyRot.
	</description>
	<comments>
		<comment id='1' author='wzhAptiv' date='2020-03-19T21:52:03Z'>
		This should now be fixed.
		</comment>
	</comments>
</bug>