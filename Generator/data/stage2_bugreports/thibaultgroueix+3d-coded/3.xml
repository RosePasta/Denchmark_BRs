<bug id='3' author='sonnyhu' open_date='2018-11-12T18:49:58Z' closed_time='2018-11-15T21:13:04Z'>
	<summary>.eval mode predicts [2, -2, 2]</summary>
	<description>
Hi,
During training, when it runs on validation dataset, it does network.eval(). However, I found that whenever it turns to eval mode, the mode predicts [2, -2, 2]. And when it stays in train mode, prediction works fine. Did you run into this problem before? Thanks!
I am using default batch size 32 because it seems only layer that will be affected by eval is BatchNorm which is related to batch size.
	</description>
	<comments>
		<comment id='1' author='sonnyhu' date='2018-11-14T19:54:28Z'>
		hum that's strange indeed. does the eval script work if you set the network in train mode ? ( and keep batch size of 32 ). that's a good starting point... i never had this issue.
		</comment>
		<comment id='2' author='sonnyhu' date='2018-11-14T20:50:22Z'>
		Yeah. train mode + 32 batch size works. Based on discussion here (&lt;denchmark-link:https://github.com/pytorch/pytorch/issues/4741&gt;pytorch/pytorch#4741&lt;/denchmark-link&gt;
), it seems training is unstable. Not sure what to do... I am going to close issue. If you have some suggestions, definitely let me know. Thanks!
		</comment>
		<comment id='3' author='sonnyhu' date='2018-11-15T16:25:23Z'>
		Hi again,
I just realized that I was using 0.4.1 pytorch.
For what you said here, "Please note that the Chamfer Distance code doesn't work on all versions of pytorch because of some weird error with the batch norm layers.", does chamfer distance use batch norm or is it in encoder-decoder?
		</comment>
		<comment id='4' author='sonnyhu' date='2018-11-15T18:28:02Z'>
		hi, yes i strongly recomment using the pytorch 0.4 specific commit mentionned in the readme. i am currently porting atlasnet to pytorch 1. i will do 3d-coded after...
		</comment>
		<comment id='5' author='sonnyhu' date='2018-11-15T18:32:50Z'>
		I tried the commit you listed in readme. Same behavior. Val loss exploded.
&lt;denchmark-link:https://user-images.githubusercontent.com/4804594/48573662-eb1f1f00-e8da-11e8-98e1-9da203ea6365.png&gt;&lt;/denchmark-link&gt;

		</comment>
		<comment id='6' author='sonnyhu' date='2018-11-15T19:10:46Z'>
		What should  be? There is no default value for it. &lt;denchmark-link:https://github.com/ThibaultGROUEIX/3D-CODED/blob/master/training/train_sup.py#L142&gt;https://github.com/ThibaultGROUEIX/3D-CODED/blob/master/training/train_sup.py#L142&lt;/denchmark-link&gt;

I am looking for any possible way I am training it wrong. Thanks!
		</comment>
		<comment id='7' author='sonnyhu' date='2018-11-15T19:36:40Z'>
		should be 1. but i think these variables are never used anyway.
		</comment>
	</comments>
</bug>