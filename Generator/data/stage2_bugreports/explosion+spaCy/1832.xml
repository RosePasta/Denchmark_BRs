<bug id='1832' author='jarozajac' open_date='2018-01-12T11:29:07Z' closed_time='2018-02-03T16:18:39Z'>
	<summary>Error in init_model cli command</summary>
	<description>
the init_model command fails during the Creating model step with error

Traceback (most recent call last):
File "/home/ec2-user/anaconda3/lib/python3.6/runpy.py", line 193, in _run_module_as_main
"main", mod_spec)
File "/home/ec2-user/anaconda3/lib/python3.6/runpy.py", line 85, in _run_code
exec(code, run_globals)
File "/home/ec2-user/spaCy/spacy/main.py", line 31, in 
plac.call(commands[command], sys.argv[1:])
File "/home/ec2-user/anaconda3/lib/python3.6/site-packages/plac_core.py", line 328, in call
cmd, result = parser.consume(arglist)
File "/home/ec2-user/anaconda3/lib/python3.6/site-packages/plac_core.py", line 207, in consume
return cmd, self.func(*(args + varargs + extraopts), **kwargs)
File "/home/ec2-user/spaCy/spacy/cli/init_model.py", line 42, in init_model
nlp = create_model(lang, probs, oov_prob, clusters, vectors_data, vector_keys, prune_vectors)
File "/home/ec2-user/spaCy/spacy/cli/init_model.py", line 73, in create_model
nlp.vocab.vectors = Vectors(data=vectors_data, keys=vector_keys)
File "vectors.pyx", line 56, in spacy.vectors.Vectors.init
AttributeError: 'tuple' object has no attribute 'shape'

The problem is, that in init_model.py

vectors_data, vector_keys = read_vectors(vectors_loc) if vectors_loc else None, None

returns vectors_data as a tuple instead of numpy array, it's caused by 1 of the latest merges adding the second "None" part in the if
The second error in init_model.py is caused by this line:

if vectors_data:

It produces another exception:

Traceback (most recent call last):
File "/home/ec2-user/anaconda3/lib/python3.6/runpy.py", line 193, in _run_module_as_main
"main", mod_spec)
File "/home/ec2-user/anaconda3/lib/python3.6/runpy.py", line 85, in _run_code
exec(code, run_globals)
File "/home/ec2-user/spaCy/spacy/main.py", line 31, in 
plac.call(commands[command], sys.argv[1:])
File "/home/ec2-user/anaconda3/lib/python3.6/site-packages/plac_core.py", line 328, in call
cmd, result = parser.consume(arglist)
File "/home/ec2-user/anaconda3/lib/python3.6/site-packages/plac_core.py", line 207, in consume
return cmd, self.func(*(args + varargs + extraopts), **kwargs)
File "/home/ec2-user/spaCy/spacy/cli/init_model.py", line 42, in init_model
nlp = create_model(lang, probs, oov_prob, clusters, vectors_data, vector_keys, prune_vectors)
File "/home/ec2-user/spaCy/spacy/cli/init_model.py", line 72, in create_model
if vectors_data:
ValueError: The truth value of an array with more than one element is ambiguous. Use a.any() or a.all()

Both lines were changed in the same merge.
&lt;denchmark-h:h2&gt;Info about spaCy&lt;/denchmark-h&gt;


Operating System: Linux
spaCy version: 2.0.5
Platform: Linux-4.9.70-2.243.amzn2.x86_64-x86_64-with-glibc2.9
Python version: 3.6.3

	</description>
	<comments>
		<comment id='1' author='jarozajac' date='2018-01-12T14:32:59Z'>
		Thanks and sorry about that. This has already been fixed in &lt;denchmark-link:https://github.com/explosion/spaCy/pull/1789&gt;#1789&lt;/denchmark-link&gt;
 and will be included in the next release!
		</comment>
		<comment id='2' author='jarozajac' date='2018-01-12T15:51:13Z'>
		I had a problem with it with the the latest master branch I have downloaded today, are you sure it is fixed?
		</comment>
		<comment id='3' author='jarozajac' date='2018-01-12T16:46:07Z'>
		&lt;denchmark-link:https://github.com/jarozajac&gt;@jarozajac&lt;/denchmark-link&gt;
 Ah, sorry â€“ I thought this was also related to one of the fixes made to  in the recent PRs (there have been several ones actually). But if you've tried installing from  today, then this indicates another problem. Reopening, sorry!
There's also issue &lt;denchmark-link:https://github.com/explosion/spaCy/issues/1794&gt;#1794&lt;/denchmark-link&gt;
 where we're discussing more detailed improvements to the model initialisation / word frequencies / vectors process.
		</comment>
		<comment id='4' author='jarozajac' date='2018-05-07T19:52:53Z'>
		This thread has been automatically locked since there has not been any recent activity after it was closed. Please open a new issue for related bugs.
		</comment>
	</comments>
</bug>