<bug id='3328' author='nyejon' open_date='2019-02-25T08:37:56Z' closed_time='2019-02-27T09:27:06Z'>
	<summary>Matcher breaks with "complex" patterns</summary>
	<description>
Hi,
The matcher breaks with certain patterns. I think it has something to do with the "IN" when there are multiple patterns in a single matcher.
&lt;denchmark-h:h2&gt;How to reproduce the behaviour&lt;/denchmark-h&gt;

&lt;denchmark-code&gt;import spacy
from spacy.tokens import Token, Doc, Span
from spacy.matcher import Matcher, PhraseMatcher

text = "Hello, how are you doing?"

nlp = spacy.load('en_core_web_md')

matcher = Matcher(nlp.vocab)
patterns = [
    [{'LOWER': {'IN': ["hello", "how"]}}],
    [{'LOWER': {'IN': ["you", "doing"]}}],
]

matcher.add('TEST', None, *patterns)

doc = nlp(text)

matches = matcher(doc)
for match_id, start, end in matches:
    span = Span(doc, start, end, label=match_id)
    print(span.text)
&lt;/denchmark-code&gt;

Output:
&lt;denchmark-code&gt;Hello  # OK
you . # OK
doing  #OK
?  #Not ok and missing "how"
&lt;/denchmark-code&gt;

&lt;denchmark-h:h2&gt;Your Environment&lt;/denchmark-h&gt;


spaCy version: 2.1.0a9.dev0
Platform: Darwin-18.2.0-x86_64-i386-64bit
Python version: 3.7.2
Models: en_core_web_md, de_core_news_md

	</description>
	<comments>
		<comment id='1' author='nyejon' date='2019-02-27T09:26:46Z'>
		Thanks! Introduced a regression in the last round of changes =/. I thought my test cases were more robust than this, but evidently not. Added another to check for this.
		</comment>
		<comment id='2' author='nyejon' date='2019-03-29T09:42:43Z'>
		This thread has been automatically locked since there has not been any recent activity after it was closed. Please open a new issue for related bugs.
		</comment>
	</comments>
</bug>