<bug id='3598' author='fizban99' open_date='2019-04-16T13:57:48Z' closed_time='2019-04-22T12:18:38Z'>
	<summary>Cannot force displacy.render to return html when in IPython/Spyder</summary>
	<description>
I am using Spyder, which uses IPython by default, with the limitation that it is not able to render HTML inline. Instead it just displays &lt;IPython.core.display.HTML object&gt; on the console.
When using displacy.render and even when passing jupyter=False, I just get the above message and I cannot capture the html markup and use it offline.
&lt;denchmark-link:https://github.com/explosion/spaCy/blob/master/spacy/displacy/__init__.py&gt;Looking at the code &lt;/denchmark-link&gt;
it seems that the render function overrides the value of the parameter if it runs on IPython:

Which means that the example code to generate svg at
&lt;denchmark-link:https://spacy.io/usage/visualizers?#jupyter&gt;https://spacy.io/usage/visualizers?#jupyter&lt;/denchmark-link&gt;
 does not work for me as is set to  and
I get 
&lt;denchmark-code&gt;import spacy
from spacy import displacy
from pathlib import Path


nlp = spacy.load("en_core_web_sm")
sentences = [u"This is an example.", u"This is another one."]
for sent in sentences:
    doc = nlp(sent)
    svg = displacy.render(doc, style="dep")
    file_name = '-'.join([w.text for w in doc if not w.is_punct]) + ".svg"
    output_path = Path("/images/" + file_name)
    output_path.open("w", encoding="utf-8").write(svg)
&lt;/denchmark-code&gt;


spaCy version: 2.1.3
Platform: Windows-10-10.0.16299-SP0
Python version: 3.7.1

	</description>
	<comments>
		<comment id='1' author='fizban99' date='2019-04-17T09:10:04Z'>
		me too. Have you solved this problem ?
		</comment>
		<comment id='2' author='fizban99' date='2019-04-17T09:15:09Z'>
		Thanks for the report and analysis, this makes sense!
We should probably set jupyter=None by default, and then check something like:
if jupyter or jupyter is None and is_in_jupyter():
If you want to test this and submit a PR, that'd be great. Otherwise, I can also take care of this in the next round of bugfixing.
		</comment>
		<comment id='3' author='fizban99' date='2019-05-22T12:33:40Z'>
		This thread has been automatically locked since there has not been any recent activity after it was closed. Please open a new issue for related bugs.
		</comment>
	</comments>
</bug>