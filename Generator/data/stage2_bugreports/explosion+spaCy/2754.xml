<bug id='2754' author='patperry' open_date='2018-09-11T18:19:20Z' closed_time='2018-12-08T11:07:56Z'>
	<summary>Normalized form of "am" is "a.m."</summary>
	<description>
It appears that for the default English model, the normalized form of "am" is "a.m.". This seems reasonable, but then shouldn't the normalized form of "I'm" be ["i", "a.m."]?
Would it be better to make the normalized form of "am" and "a.m." be "am"?
&lt;denchmark-h:h2&gt;How to reproduce the behaviour&lt;/denchmark-h&gt;

from spacy.lang.en import English
nlp = English()
print([tok.norm_ for tok in nlp("I'm fine. I am fine")])
#&gt; ['i', 'am', 'fine', '.', 'i', 'a.m.', 'fine']
&lt;denchmark-h:h2&gt;Your Environment&lt;/denchmark-h&gt;


Operating System: Linux version 4.9.93-linuxkit-aufs
Python Version Used: 3.7.0
spaCy Version Used: 2.0.12
Environment Information:

	</description>
	<comments>
		<comment id='1' author='patperry' date='2018-09-12T11:54:20Z'>
		I think this is probably a bad norm exception, because it really refers to "am" as in the time. The more common case is the verb to be --- so we should remove this.
		</comment>
		<comment id='2' author='patperry' date='2018-10-01T04:50:33Z'>
		Is this supposed to be the relevant code, in tokenizer_exceptions.py, around line 290?
&lt;denchmark-code&gt;for h in range(1, 12 + 1):                                                                      
    for period in ["a.m.", "am"]:                                                               
        _exc["%d%s" % (h, period)] = [                                                          
            {ORTH: "%d" % h},                                                                   
            {ORTH: period, LEMMA: "a.m.", NORM: "a.m."}]                                        
    for period in ["p.m.", "pm"]:                                                               
        _exc["%d%s" % (h, period)] = [                                                          
            {ORTH: "%d" % h},                                                                   
            {ORTH: period, LEMMA: "p.m.", NORM: "p.m."}]
&lt;/denchmark-code&gt;

And, if so, why would one get that the norm of token "am" in "I am fine" is "a.m." when there was no number beforehand such as in "3am"?
		</comment>
		<comment id='3' author='patperry' date='2018-10-01T09:01:52Z'>
		
And, if so, why would one get that the norm of token "am" in "I am fine" is "a.m." when there was no number beforehand such as in "3am"?

You're correct, this doesn't make sense and the above exceptions really only target tokens like "1am" or "10p.m".
I've been trying to find where this norm is set and it's pretty mysterious... ðŸ¤” I haven't been able to figure it out yet.
		</comment>
		<comment id='4' author='patperry' date='2018-10-04T17:57:00Z'>
		Also this is troubling:
import spacy
from spacy.lang.en import English
nlp = English()
print([tok.norm_ for tok in nlp('The normalized form of "a" is "gonna".')])
#&gt; ['the', 'normalized', 'form', 'of', '"', 'gonna', '"', 'is', '"', 'going', 'to', '"', '.']
		</comment>
		<comment id='5' author='patperry' date='2018-10-05T19:10:42Z'>
		&lt;denchmark-link:https://github.com/patperry&gt;@patperry&lt;/denchmark-link&gt;


print([tok.norm_ for tok in nlp('The normalized form of "a" is "gonna".')])

Thanks for the example â€“ this might explain a lot. Looks like this is actually an issue with the caching of the token attributes. There was a similar bug a while ago, but I'm pretty sure we fixed that. But it might still be related.
		</comment>
		<comment id='6' author='patperry' date='2018-12-08T11:07:56Z'>
		Fix should now be up on develop: &lt;denchmark-link:https://github.com/explosion/spaCy/pull/3029&gt;#3029&lt;/denchmark-link&gt;

Thanks for your help reporting this.
		</comment>
		<comment id='7' author='patperry' date='2019-01-07T11:28:07Z'>
		This thread has been automatically locked since there has not been any recent activity after it was closed. Please open a new issue for related bugs.
		</comment>
	</comments>
</bug>