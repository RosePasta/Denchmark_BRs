<bug id='2219' author='hunan-rostomyan' open_date='2018-04-13T21:06:33Z' closed_time='2018-05-20T22:00:15Z'>
	<summary>Indexing issue during Token-Token similarity</summary>
	<description>
Given these sentences:

cat on the mat
cat on a mat

I want to look at the SpaCy &lt;denchmark-link:https://spacy.io/api/token#similarity&gt;similarity&lt;/denchmark-link&gt;
 scores between every pair of tokens in each of these sentences. The first one works, but I'm getting an error on the second one.
&lt;denchmark-h:h3&gt;Code&lt;/denchmark-h&gt;

nlp = spacy.load('en')

tokens = nlp('cat on a mat')

for tok1 in tokens:
    for tok2 in tokens:
        print(tok1, tok2, tok1.similarity(tok2))
&lt;denchmark-h:h3&gt;Error&lt;/denchmark-h&gt;

&lt;denchmark-code&gt;cat cat 1.0
cat on -0.0020153373
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
&lt;ipython-input-133-e2870c8253a9&gt; in &lt;module&gt;()
      3 for tok1 in tokens:
      4     for tok2 in tokens:
----&gt; 5         print(tok1, tok2, tok1.similarity(tok2))
      6 
      7 heat = np.zeros(shape=(len(tokens), len(tokens)))

token.pyx in spacy.tokens.token.Token.similarity()

TypeError: 'spacy.tokens.token.Token' object does not support indexing
&lt;/denchmark-code&gt;

I've had the same error on several other sentences, so I don't think it's specific to "a". Not sure how to make sense of this inconsistent behavior.
&lt;denchmark-h:h2&gt;Your Environment&lt;/denchmark-h&gt;


Operating System: OS X 10.11.4 (15E65)
Python Version Used: python 3.5+
spaCy Version Used: 2.0.9
Environment Information: Jupyter Notebook running a python3 kernel

	</description>
	<comments>
		<comment id='1' author='hunan-rostomyan' date='2018-04-17T19:51:48Z'>
		I just encountered the same error, and agree that it looks like a bug. The problem is in lines 128â€“129 of token.pyx, where if  other is length 1 there's an attempt to get the orth attribute of other[0]. I don't understand the full context, but it looks like this expects to unwrap a token from a single-item list, and instead it generates an error on a single-character string.
		</comment>
		<comment id='2' author='hunan-rostomyan' date='2018-04-17T21:57:47Z'>
		Got the same error.
		</comment>
		<comment id='3' author='hunan-rostomyan' date='2018-04-24T06:15:55Z'>
		Got the same error too.
		</comment>
		<comment id='4' author='hunan-rostomyan' date='2018-04-25T04:24:45Z'>
		Also got the same error.
		</comment>
		<comment id='5' author='hunan-rostomyan' date='2018-04-28T04:15:10Z'>
		This deserves a bug label, rather than feature labels. The test included with my pull request illustrates the problem.
Briefly, token1.similarity(token2) will generate an error if token2 is a single-character word.
		</comment>
		<comment id='6' author='hunan-rostomyan' date='2018-06-19T22:45:55Z'>
		This thread has been automatically locked since there has not been any recent activity after it was closed. Please open a new issue for related bugs.
		</comment>
	</comments>
</bug>