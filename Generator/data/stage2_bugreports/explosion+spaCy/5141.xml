<bug id='5141' author='notnami' open_date='2020-03-12T16:09:06Z' closed_time='2020-03-20T13:40:19Z'>
	<summary>DocBin.to_bytes fails for empty DocBin</summary>
	<description>
&lt;denchmark-h:h2&gt;How to reproduce the behaviour&lt;/denchmark-h&gt;

The exact example from the docs causes an error:
&lt;denchmark-code&gt;doc_bin = DocBin(attrs=["DEP", "HEAD"])
doc_bin_bytes = doc_bin.to_bytes()
&lt;/denchmark-code&gt;

&lt;denchmark-code&gt;ValueError                                Traceback (most recent call last)
&lt;ipython-input-6-d51ca7c2f6fe&gt; in &lt;module&gt;
----&gt; 1 doc_bin_bytes = doc_bin.to_bytes()

~/anaconda3/envs/insights/lib/python3.7/site-packages/spacy/tokens/_serialize.py in to_bytes(self)
    141         msg = {
    142             "attrs": self.attrs,
--&gt; 143             "tokens": numpy.vstack(self.tokens).tobytes("C"),
    144             "spaces": numpy.vstack(self.spaces).tobytes("C"),
    145             "lengths": numpy.asarray(lengths, dtype="int32").tobytes("C"),

&lt;__array_function__ internals&gt; in vstack(*args, **kwargs)

~/anaconda3/envs/insights/lib/python3.7/site-packages/numpy/core/shape_base.py in vstack(tup)
    281     if not isinstance(arrs, list):
    282         arrs = [arrs]
--&gt; 283     return _nx.concatenate(arrs, 0)
    284 
    285 

&lt;__array_function__ internals&gt; in concatenate(*args, **kwargs)

ValueError: need at least one array to concatenate
&lt;/denchmark-code&gt;

&lt;denchmark-h:h2&gt;Info about spaCy&lt;/denchmark-h&gt;


spaCy version: 2.2.4
Platform: Linux-4.15.0-88-generic-x86_64-with-debian-buster-sid
Python version: 3.7.6
Models: en, fr

numpy==1.18.1
	</description>
	<comments>
		<comment id='1' author='notnami' date='2020-03-13T15:13:26Z'>
		Thanks for the report! PR &lt;denchmark-link:https://github.com/explosion/spaCy/pull/5148&gt;#5148&lt;/denchmark-link&gt;
 should fix the issue and will be available in spaCy 3.0 onwards. Meanwhile, if this is blocking you, you can make the changes to your local install as shown &lt;denchmark-link:https://github.com/explosion/spaCy/pull/5148/files#diff-fbeb13709318b7b895188f6d882c058c&gt;here&lt;/denchmark-link&gt;
.
		</comment>
		<comment id='2' author='notnami' date='2020-03-13T15:47:29Z'>
		&lt;denchmark-link:https://github.com/svlandeg&gt;@svlandeg&lt;/denchmark-link&gt;
 thank you! I have worked around this for now by subclassing the DocBin and overriding  in a similar way to how you implemented the fix.
		</comment>
		<comment id='3' author='notnami' date='2020-04-19T15:15:52Z'>
		This thread has been automatically locked since there has not been any recent activity after it was closed. Please open a new issue for related bugs.
		</comment>
	</comments>
</bug>