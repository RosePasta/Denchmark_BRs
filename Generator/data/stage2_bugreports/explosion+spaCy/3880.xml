<bug id='3880' author='p-sodmann' open_date='2019-06-25T15:12:34Z' closed_time='2019-07-10T12:01:39Z'>
	<summary>nlp.pipe() crashes after second empty string</summary>
	<description>
&lt;denchmark-h:h2&gt;How to reproduce the behaviour&lt;/denchmark-h&gt;

it is very easy to reproduce:
import spacy
nlp = spacy.load("de_core_news_sm")
texts = ["ich bin ein Satz", "", " ", "meow", " ", ""]
for doc in nlp.pipe(texts):
print(doc)
it works if the array contains only one empty string.
&lt;denchmark-h:h2&gt;Your Environment&lt;/denchmark-h&gt;


spaCy version: 2.1.4
Platform: Windows-10-10.0.17763-SP0
Python version: 3.6.4

	</description>
	<comments>
		<comment id='1' author='p-sodmann' date='2019-06-26T08:41:26Z'>
		I did some research on this and can say that the pipe crashes not after the "second empty string", but just if the last string in the array is empty.
So these texts work:
texts = ["ich bin ein Satz", "", "", "", " ", "meow", " ", "", "Noch ein Satz"]
texts = ["ich bin ein Satz", "", "", "", " ", "meow", " ", "", "Noch ein Satz", " "]
But this does not:
texts = ["ich bin ein Satz", "", "", "", " ", "meow", " ", "", "Noch ein Satz", ""]
		</comment>
		<comment id='2' author='p-sodmann' date='2019-06-26T16:00:22Z'>
		This also happens if the last element in a "minibatch" of nlp.pipe() is empty
		</comment>
		<comment id='3' author='p-sodmann' date='2019-07-04T11:06:26Z'>
		I think this may be due to a quirck in  - but not sure.
cf &lt;denchmark-link:https://github.com/explosion/thinc/pull/104&gt;explosion/thinc#104&lt;/denchmark-link&gt;

		</comment>
		<comment id='4' author='p-sodmann' date='2019-07-10T12:01:39Z'>
		Added test verifying the fix, which is now live in v7.0.5 ðŸŽ‰
		</comment>
		<comment id='5' author='p-sodmann' date='2019-08-09T12:42:29Z'>
		This thread has been automatically locked since there has not been any recent activity after it was closed. Please open a new issue for related bugs.
		</comment>
	</comments>
</bug>