<bug id='4218' author='DBaker999' open_date='2019-08-30T14:19:52Z' closed_time='2019-09-05T08:34:09Z'>
	<summary>POS tagging after multi-word expression re-tokenization</summary>
	<description>
Hello,
I am wondering how the POS tagging is done for mult-word expressions.
'carboxylic acid' gets tagged as 'ADJ' although it would seem more natural to have it tagged as a 'NOUN' because the term 'acid' the head of this multiword expression
(see code below)
Am I missing something?  Is this something which I can adjust?
Thank you,
David
import spacy
from spacy.pipeline import EntityRuler
sentence = "A fatty acid is a carboxylic acid"
nlp = spacy.load('en_core_web_sm')
doc = nlp(sentence)
print([(t.text, t.pos_) for t in doc])
output: [('A', 'DET'), ('fatty', 'ADJ'), ('acid', 'NOUN'), ('is', 'VERB'), ('a', 'DET'), ('carboxylic', 'ADJ'), ('acid', 'NOUN')]
mwes = ['carboxylic acid', 'fatty acid']
ruler = EntityRuler(nlp)
for a in mwes:
ruler.add_patterns([{"label": "x", "pattern": a}])
nlp.add_pipe(ruler)
doc = nlp(sentence)
with doc.retokenize() as retokenizer:
for ent in doc.ents:
retokenizer.merge(doc[ent.start:ent.end])
print([(t.text, t.pos_) for t in doc])
output: [('A', 'DET'), ('fatty acid', 'ADJ'), ('is', 'VERB'), ('a', 'DET'), ('carboxylic acid', 'ADJ')]
&lt;denchmark-h:hr&gt;&lt;/denchmark-h&gt;

doc = nlp('carboxylic acid')
print([(t.text, t.head, t.pos_) for t in doc])
output: [('carboxylic', acid, 'ADJ'), ('acid', acid, 'NOUN')]
&lt;denchmark-h:hr&gt;&lt;/denchmark-h&gt;

Info about spaCy

spaCy version: 2.1.3
Platform: Linux-4.15.0-20-generic-x86_64-with-debian-buster-sid
Python version: 3.7.2
Models: en

	</description>
	<comments>
		<comment id='1' author='DBaker999' date='2019-08-30T16:04:22Z'>
		The new span was taking the attributes of the first word rather than the root of the span. Hopefully fixed by &lt;denchmark-link:https://github.com/explosion/spaCy/pull/4219&gt;#4219&lt;/denchmark-link&gt;
.
Duplicate of &lt;denchmark-link:https://github.com/explosion/spaCy/issues/4051&gt;#4051&lt;/denchmark-link&gt;
.
		</comment>
		<comment id='2' author='DBaker999' date='2019-10-05T08:42:54Z'>
		This thread has been automatically locked since there has not been any recent activity after it was closed. Please open a new issue for related bugs.
		</comment>
	</comments>
</bug>