<bug id='5089' author='shovalsa' open_date='2020-03-03T11:57:14Z' closed_time='2020-03-22T14:13:06Z'>
	<summary>Streamlit app doesn't show arc labels with displaCy</summary>
	<description>
Trying out your displaCy+streamlit gist as is, the output tree doesn't show arc labels:
&lt;denchmark-link:https://user-images.githubusercontent.com/24814427/75773214-1d65c180-5d56-11ea-8adf-0ac907299d98.png&gt;&lt;/denchmark-link&gt;

However, rendering the output svg in a simple html file yields the desired image:
&lt;denchmark-link:https://user-images.githubusercontent.com/24814427/75773329-5a31b880-5d56-11ea-9351-47a53c0f55a7.png&gt;&lt;/denchmark-link&gt;

There is a solution that worked for me and might be a good idea to include in the formal gist (following &lt;denchmark-link:https://discuss.streamlit.io/t/display-svg/172/5&gt;this&lt;/denchmark-link&gt;
 solution on streamlit discussion board).
&lt;denchmark-code&gt;def render_svg(svg):
    """Renders the given svg string."""
    b64 = base64.b64encode(svg.encode('utf-8')).decode("utf-8")
    html = r'&lt;img src="data:image/svg+xml;base64,%s"/&gt;' % b64
    st.write(html, unsafe_allow_html=True)
...
    for sent in docs:
        html = displacy.render(sent, options=displacy_style_options, style="dep")  # svg object
        # Double newlines seem to mess with the rendering
        html = html.replace("\n\n", "\n")
        if split_sents and len(docs) &gt; 1:
            st.markdown(f"&gt; {sent.text}")
        render_svg(html)
&lt;/denchmark-code&gt;

&lt;denchmark-h:h2&gt;Environment&lt;/denchmark-h&gt;


spaCy version: 2.2.1
Platform: Linux-5.3.0-40-generic-x86_64-with-debian-buster-sid
Python version: 3.7.4

	</description>
	<comments>
		<comment id='1' author='shovalsa' date='2020-03-19T09:34:06Z'>
		Thanks a lot for the report, the analysis and the fix! I double checked and could reproduce all your results. The fix is commited in PR &lt;denchmark-link:https://github.com/explosion/spaCy/pull/5168&gt;#5168&lt;/denchmark-link&gt;
 and the new example script will be distributed with spaCy 3.0 onwards.
		</comment>
		<comment id='2' author='shovalsa' date='2020-04-25T07:54:12Z'>
		This thread has been automatically locked since there has not been any recent activity after it was closed. Please open a new issue for related bugs.
		</comment>
	</comments>
</bug>