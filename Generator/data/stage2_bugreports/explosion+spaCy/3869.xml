<bug id='3869' author='PhilippeMarcotte' open_date='2019-06-20T13:23:31Z' closed_time='2019-07-11T11:44:16Z'>
	<summary>Count_by IS_ALPHA not giving expected result.</summary>
	<description>
&lt;denchmark-h:h2&gt;How to reproduce the behaviour&lt;/denchmark-h&gt;

&lt;denchmark-code&gt;import spacy
from spacy.attrs import IS_ALPHA

nlp = spacy.load("en_core_web_sm")
sentence = 'The next month Barry Siddall joined Stoke City on a free transfer, after Chris Pearce had established himself as the Vale\'s #1.'
doc = nlp(sentence)
print(doc.count_by(IS_ALPHA))
{}

count = 0
for token in doc:
    count += token.is_alpha
print(count)
21
&lt;/denchmark-code&gt;

It is bugged only for some sentences.
Other bugged examples:
'Indeed, making the one who remains do all the work has installed him into a position of such insolent tyranny, it will take a month at least to reduce him to his proper proportions.'
'It was a missed assignment, but it shouldn't have resulted in a turnover ...'
&lt;denchmark-h:h2&gt;Your Environment&lt;/denchmark-h&gt;


spaCy version: 2.1.4
Platform: Darwin-18.5.0-x86_64-i386-64bit
Python version: 3.7.3
Models: en_core_web_lg, en_core_web_sm

	</description>
	<comments>
		<comment id='1' author='PhilippeMarcotte' date='2019-06-20T15:53:35Z'>
		The problem here is that the count_by method currently expects token attributes like POS or ORTH, not boolean flags of the lexeme like IS_ALPHA or LIKE_NUM.
I'm not sure what the analogous expected output should be for boolean flags, but it could probably return a dict keyed by True and False (or 1 and 0).
Edit: Turns out it should have worked but just... didn't.
		</comment>
		<comment id='2' author='PhilippeMarcotte' date='2019-06-20T16:38:22Z'>
		Thank you for your answer.
This is good to know and makes the fact that it works in some cases even stranger.
Example:
&lt;denchmark-code&gt;import spacy
from spacy.attrs import IS_ALPHA

nlp = spacy.load("en_core_web_sm")
sentence = 'The story was to the effect that a young American student recently called on Professor Christlieb with a letter of introduction.'
doc = nlp(sentence)
print(doc.count_by(IS_ALPHA))
{1: 21}
&lt;/denchmark-code&gt;

		</comment>
		<comment id='3' author='PhilippeMarcotte' date='2019-06-20T20:23:01Z'>
		Okay, yes, so this is definitely strange and inconsistent either way!
		</comment>
		<comment id='4' author='PhilippeMarcotte' date='2019-08-10T12:42:29Z'>
		This thread has been automatically locked since there has not been any recent activity after it was closed. Please open a new issue for related bugs.
		</comment>
	</comments>
</bug>