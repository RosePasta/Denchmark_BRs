<bug id='4030' author='adrianeboyd' open_date='2019-07-26T07:46:07Z' closed_time='2019-07-29T07:18:49Z'>
	<summary>TextCategorizer crashes on an empty text</summary>
	<description>
The textcat component doesn't seem to handle empty texts well.
&lt;denchmark-h:h2&gt;How to reproduce the behaviour&lt;/denchmark-h&gt;

&lt;denchmark-code&gt;nlp = spacy.load("/path/to/textcat-model")
nlp("")
&lt;/denchmark-code&gt;

The errors are different depending on the type of model, but both bow and simple_cnn crash with an IndexError in thinc.
For bow:
&lt;denchmark-code&gt;  File "/home/adriane/spacy/venv/spacy21/lib/python3.7/site-packages/thinc/neural/_classes/feed_forward.py", line 46, in begin_update
    X, inc_layer_grad = layer.begin_update(X, drop=drop)
  File "linear.pyx", line 45, in thinc.linear.linear.LinearModel.begin_update
  File "linear.pyx", line 67, in thinc.linear.linear.LinearModel._begin_cpu_update
IndexError: Out of bounds on buffer access (axis 0)
&lt;/denchmark-code&gt;

For simple_cnn:
&lt;denchmark-code&gt;  File "/home/adriane/spacy/venv/spacy21/lib/python3.7/site-packages/thinc/api.py", line 310, in predict
    X = layer(layer.ops.flatten(seqs_in, pad=pad))
  File "ops.pyx", line 113, in thinc.neural.ops.Ops.flatten
IndexError: list index out of range
&lt;/denchmark-code&gt;

&lt;denchmark-h:h2&gt;Your Environment&lt;/denchmark-h&gt;


spaCy version: 2.1.6
Platform: Linux-4.19.0-5-amd64-x86_64-with-debian-10.0
Python version: 3.7.3

	</description>
	<comments>
		<comment id='1' author='adrianeboyd' date='2019-07-29T07:18:49Z'>
		Should be fixed in PR &lt;denchmark-link:https://github.com/explosion/spaCy/pull/4035&gt;#4035&lt;/denchmark-link&gt;
, by explicitely checking on empty  in the  method of 
		</comment>
		<comment id='2' author='adrianeboyd' date='2019-08-28T07:42:29Z'>
		This thread has been automatically locked since there has not been any recent activity after it was closed. Please open a new issue for related bugs.
		</comment>
	</comments>
</bug>