<bug id='3002' author='WolfFinster' open_date='2018-12-02T19:25:42Z' closed_time='2018-12-03T00:47:40Z'>
	<summary>Long sequence of digits and dots cause exponential time increase</summary>
	<description>
&lt;denchmark-h:h2&gt;How to reproduce the behaviour&lt;/denchmark-h&gt;

I discovered the following issue with a sentence from a wikipedia dump. Long sequences of digits and dots make the computation time explode.
&lt;denchmark-code&gt;In [3]: nlp = spacy.load('de_core_news_sm') 
   ...: nlp.remove_pipe('parser') 
   ...: nlp.remove_pipe('ner') 
In [13]: for x in nlp('Bei den Aufgaben der Rechenkünstler geht es natürlich um viel höhere Potenzen mehrstelliger Zahlen – zum Beispiel die Berechnung der 25. Wurzel aus 880.794.982.218.444.893.023.439.794.626.12
    ...: 0.190.780.624.990.275.329.063.400.179.824.681.489.784.873.773.249 (Lösung: 1729) und extremere Aufgaben.'): 
    ...:     print(x) 
&lt;/denchmark-code&gt;

The more digits-dot segments you add the worse it gets.
The following did not terminate for me. I waited several minutes:
&lt;denchmark-code&gt;In [31]: for x in nlp('880.794.982.218.444.893.023.439.794.626.120.190.780.624.990.275.671 ist eine lange Zahl'): 
    ...:     print(x) 
&lt;/denchmark-code&gt;

&lt;denchmark-h:h2&gt;Your Environment&lt;/denchmark-h&gt;


Operating System:


Linux


Python Version Used:


3.7


spaCy Version Used:


2.0.16


Environment Information:


spaCy version      2.0.16         
Location           /home/me/miniconda3/lib/python3.7/site-packages/spacy
Platform           Linux-4.13.9-1-default-x86_64-with-glibc2.9
Python version     3.7.0          
Models             de_core_news_sm


	</description>
	<comments>
		<comment id='1' author='WolfFinster' date='2018-12-03T00:44:46Z'>
		Thanks. This is related to the use of the regex library, and the fact that non-fixed-width lookarounds have crept into our expressions. The tokenizer regex needs to be refactored significantly.
		</comment>
		<comment id='2' author='WolfFinster' date='2018-12-03T00:47:40Z'>
		I'll merge this with the regex issue in &lt;denchmark-link:https://github.com/explosion/spaCy/issues/1642&gt;#1642&lt;/denchmark-link&gt;
 
		</comment>
		<comment id='3' author='WolfFinster' date='2019-01-02T01:01:19Z'>
		This thread has been automatically locked since there has not been any recent activity after it was closed. Please open a new issue for related bugs.
		</comment>
	</comments>
</bug>