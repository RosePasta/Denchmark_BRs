<bug id='1643' author='paulineChav' open_date='2017-11-26T18:38:33Z' closed_time='2018-12-08T11:23:02Z'>
	<summary>Exit code 139 while testing a customized trained model</summary>
	<description>
&lt;denchmark-h:h2&gt;Problem&lt;/denchmark-h&gt;

Hi, I am completely new with spaCy, and I have some trouble to test a model that I trained.
I first trained a model without any difficulty with this code (copy pasted from the tutorial):
&lt;denchmark-code&gt;import spacy

N_ITER = 10
OUTPUT_DIR = 'path/to/my/dir'

nlp = spacy.blank('fr')  # create blank Language class
ner = nlp.create_pipe('ner')
nlp.add_pipe(ner, last=True)

for text, annotations in training_dataset:
    for ent in annotations.get('entities'):
        ner.add_label(ent[2])

optimizer = nlp.begin_training()
for itn in range(N_ITER):
    random.shuffle(training_dataset)
    losses = {}
    for text, annotations in training_dataset:
        nlp.update(
            [text],  # batch of texts
            [annotations],  # batch of annotations
            drop=0,  # dropout - make it harder to memorise data
            sgd=optimizer,  # callable to update weights
            losses=losses)
    print(losses)

# Save model
nlp.to_disk(OUTPUT_DIR)
print("Saved model to", OUTPUT_DIR)
&lt;/denchmark-code&gt;

Then I test my model on a few examples, but on some of them it crashes with a simple Process finished with exit code 139 (interrupted by signal 11: SIGSEGV). I noticed for example that Considérant que works, but Considérant que selon doesn't... :
&lt;denchmark-code&gt;import os
import spacy
nlp = spacy.load(OUTPUT_DIR)
doc = nlp(u"Considérant que")
doc = nlp(u"Considérant que selon")
Process finished with exit code 139 (interrupted by signal 11: SIGSEGV)
&lt;/denchmark-code&gt;

Thank you for your help !
&lt;denchmark-h:h2&gt;Your Environment&lt;/denchmark-h&gt;


spaCy version: 2.0.3
Platform: Ubuntu 16.04.3 LTS
Python version: 3.6.2

	</description>
	<comments>
		<comment id='1' author='paulineChav' date='2017-11-28T16:16:18Z'>
		Thanks. Your code looks correct, and exiting with a C-level error is never "correct" behaviour, so this is definitely a bug in spaCy.
Is it likely that the example doc = nlp(u"Considérant que selon") would be the start of an entity? This might help narrow things down.
		</comment>
		<comment id='2' author='paulineChav' date='2017-11-28T17:06:25Z'>
		Thanks for your answer. In this case no, it's not the start of an entity !
		</comment>
		<comment id='3' author='paulineChav' date='2018-12-08T11:23:02Z'>
		This was likely related to &lt;denchmark-link:https://github.com/explosion/spaCy/commit/ad068f51be6a2579c19c35bcd8b5c1767441ffc1&gt;ad068f5&lt;/denchmark-link&gt;
, which is now fixed (if not, feel free to reopen). Thanks for your patience!
		</comment>
		<comment id='4' author='paulineChav' date='2019-01-07T11:28:06Z'>
		This thread has been automatically locked since there has not been any recent activity after it was closed. Please open a new issue for related bugs.
		</comment>
	</comments>
</bug>