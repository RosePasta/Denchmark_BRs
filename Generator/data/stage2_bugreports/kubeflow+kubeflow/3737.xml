<bug id='3737' author='emmayang' open_date='2019-07-24T03:56:53Z' closed_time='2019-08-26T23:30:50Z'>
	<summary>installation failure because do not have external IP for istio-ingressgateway</summary>
	<description>
I tried to deploy latest version of kubeflow to my own cluster, and got stuck at the step Tring to get istio-ingressgateway Service External IP, and the error logs are:
&lt;denchmark-code&gt;INFO[0245] Trying to get istio-ingressgateway Service External IP  filename="existing_arrikto/existing.go:392"
Error: couldn't apply KfApp:  (kubeflow.error): Code 500 with message: coordinator Apply failed for existing_arrikto:  (kubeflow.error): Code 500 with message: timed out while waiting to get istio-ingressgateway Service ExternalIP
github.com/kubeflow/kubeflow/bootstrap/v2/pkg/kfapp/existing_arrikto.getEndpoints
	/home/jlewi/git_kubeflow/bootstrap/v2/pkg/kfapp/existing_arrikto/existing.go:288
github.com/kubeflow/kubeflow/bootstrap/v2/pkg/kfapp/existing_arrikto.(*Existing).Apply
&lt;/denchmark-code&gt;

This is my own testing kube cluster, which does not have an external IP, and it shouldn't prevent me install kubeflow.
I tried to remove istio overlay from app.yaml, and it does not work.
kfctl version:
&lt;denchmark-code&gt;root@qcloud:~/workspace/kfapp# kfctl version
kfctl v0.6.0-0-g71aea0a9
&lt;/denchmark-code&gt;

	</description>
	<comments>
		<comment id='1' author='emmayang' date='2019-07-24T03:56:55Z'>
		Issue-Label Bot is automatically applying the label kind/bug to this issue, with a confidence of 0.85. Please mark this comment with üëç or üëé to give our bot feedback!
Links: &lt;denchmark-link:https://github.com/marketplace/issue-label-bot&gt;app homepage&lt;/denchmark-link&gt;
, &lt;denchmark-link:https://mlbot.net/data/kubeflow/kubeflow&gt;dashboard&lt;/denchmark-link&gt;
 and &lt;denchmark-link:https://github.com/hamelsmu/MLapp&gt;code&lt;/denchmark-link&gt;
 for this bot.
		</comment>
		<comment id='2' author='emmayang' date='2019-07-24T05:20:27Z'>
		What kfctl command did you run to generate your config?
Are you following
&lt;denchmark-link:https://www.kubeflow.org/docs/started/getting-started-k8s/&gt;https://www.kubeflow.org/docs/started/getting-started-k8s/&lt;/denchmark-link&gt;
?
/cc &lt;denchmark-link:https://github.com/yanniszark&gt;@yanniszark&lt;/denchmark-link&gt;

		</comment>
		<comment id='3' author='emmayang' date='2019-07-24T06:51:56Z'>
		&lt;denchmark-link:https://github.com/jlewi&gt;@jlewi&lt;/denchmark-link&gt;
 yes, exactly following the  section of that guide.
		</comment>
		<comment id='4' author='emmayang' date='2019-07-24T06:57:07Z'>
		I have the same issue. external-ip pending...
		</comment>
		<comment id='5' author='emmayang' date='2019-07-24T09:27:26Z'>
		Hi &lt;denchmark-link:https://github.com/emmayang&gt;@emmayang&lt;/denchmark-link&gt;
!
The reason the installation is not working is most likely because you don't have a working LoadBalancer Service in your environment.
kfctl gets the LoadBalancer IP from the LoadBalancer Service's status and uses it to provision certs and setup Dex and the OIDC client.
I am working on getting this restriction lifted soon.
Until then, you can use &lt;denchmark-link:https://metallb.universe.tf/&gt;MetalLB&lt;/denchmark-link&gt;
, or try it out in a compliant GKE cluster, using &lt;denchmark-link:https://www.kubeflow.org/docs/started/getting-started-k8s/#prerequisites&gt;the script mentioned in the docs&lt;/denchmark-link&gt;
.
		</comment>
		<comment id='6' author='emmayang' date='2019-07-24T14:37:43Z'>
		I am also facing the same issue. How to resolve this?
		</comment>
		<comment id='7' author='emmayang' date='2019-07-24T14:56:40Z'>
		&lt;denchmark-link:https://github.com/yanniszark&gt;@yanniszark&lt;/denchmark-link&gt;
 thanks, but just thought this shouldn't block the installation.
I know the latest release are using Istio to expose the component links, but without an externalIP, user can still use nodeport to access the services.
		</comment>
		<comment id='8' author='emmayang' date='2019-07-24T15:09:38Z'>
		hi, emma, as suggested by yanniszark, just deploy metallb, deploy its configmap, the installation will be good...i got mine working now
		</comment>
		<comment id='9' author='emmayang' date='2019-07-26T20:51:16Z'>
		/assign &lt;denchmark-link:https://github.com/johnugeorge&gt;@johnugeorge&lt;/denchmark-link&gt;

&lt;denchmark-link:https://github.com/emmayang&gt;@emmayang&lt;/denchmark-link&gt;
; &lt;denchmark-link:https://github.com/johnugeorge&gt;@johnugeorge&lt;/denchmark-link&gt;
 has updated the instructions in &lt;denchmark-link:https://github.com/kubeflow/website/pull/977&gt;kubeflow/website#977&lt;/denchmark-link&gt;
 to describe how to deploy Kubeflow on an existing cluster without requiring an external IP address.
You can take a look at the pending PR to get a preview.
		</comment>
		<comment id='10' author='emmayang' date='2019-07-29T01:45:09Z'>
		&lt;denchmark-link:https://github.com/johnugeorge&gt;@johnugeorge&lt;/denchmark-link&gt;
 I just went through the instructions on a fresh Kubernetes cluster.  It got me further than anything before, in terms of everything at least being able to install - and I tried following the directions for the Istio Gateway that you link to at the end, but while using a browser against that host and port is sufficient to get to the dashboard, nothing seems to work beyond that.  Is there additional setup expected for the gateway in order to gain ingress to all the internal services?
&lt;denchmark-link:https://user-images.githubusercontent.com/41542120/62016577-92499b00-b178-11e9-8a90-2a17a711e400.png&gt;&lt;/denchmark-link&gt;

		</comment>
		<comment id='11' author='emmayang' date='2019-07-29T04:44:37Z'>
		&lt;denchmark-link:https://github.com/JavaDerek&gt;@JavaDerek&lt;/denchmark-link&gt;
 What cluster type is this? What error do you see? If all pods are running fine, can you verify your INGRESS_HOST is correct?   Is your INGRESS_HOST accessible?
What is o/p of kubectl get nodes -o wide
		</comment>
		<comment id='12' author='emmayang' date='2019-07-29T08:07:41Z'>
		after following &lt;denchmark-link:https://deploy-preview-977--competent-brattain-de2d6d.netlify.com/docs/started/getting-started-k8s/&gt;https://deploy-preview-977--competent-brattain-de2d6d.netlify.com/docs/started/getting-started-k8s/&lt;/denchmark-link&gt;
  document I am getting this error. any solution?
&lt;denchmark-code&gt;Error: couldn't apply KfApp:  (kubeflow.error): Code 500 with message: kfApp Apply failed for kustomize:  (kubeflow.error): Code 500 with message: couldn't create resources from application Error: no matches for kind "Application" in version "app.k8s.io/v1beta1"
Usage:
  kfctl apply [all(=default)|k8s|platform] [flags]

Flags:
  -h, --help      help for apply
  -V, --verbose   verbose output default is false

couldn't apply KfApp:  (kubeflow.error): Code 500 with message: kfApp Apply failed for kustomize:  (kubeflow.error): Code 500 with message: couldn't create resources from application Error: no matches for kind "Application" in version "app.k8s.io/v1beta1"
&lt;/denchmark-code&gt;

Details Log:
&lt;denchmark-code&gt;asis@paisky2:~/kubeflow$ kubectl version
Client Version: version.Info{Major:"1", Minor:"15", GitVersion:"v1.15.1", GitCommit:"4485c6f18cee9a5d3c3b4e523bd27972b1b53892", GitTreeState:"clean", BuildDate:"2019-07-18T09:18:22Z", GoVersion:"go1.12.5", Compiler:"gc", Platform:"linux/amd64"}
Server Version: version.Info{Major:"1", Minor:"15", GitVersion:"v1.15.1", GitCommit:"4485c6f18cee9a5d3c3b4e523bd27972b1b53892", GitTreeState:"clean", BuildDate:"2019-07-18T09:09:21Z", GoVersion:"go1.12.5", Compiler:"gc", Platform:"linux/amd64"}
asis@paisky2:~/kubeflow$ kfctl version
kfctl v0.6.1-rc.2-1-g3a37cbc6
asis@paisky2:~/kubeflow$ kubectl get nodes
NAME      STATUS   ROLES    AGE     VERSION
paisky1   Ready    &lt;none&gt;   2d22h   v1.15.1
paisky2   Ready    master   3d      v1.15.1

asis@paisky2:~/kubeflow$ kfctl apply k8s -V
INFO[0000] Downloading /home/asis/kubeflow/app.yaml to /tmp/768202239/app.yaml  filename="v1alpha1/application_types.go:334"
INFO[0000] Writing stripped KfDef to /home/asis/kubeflow/app.yaml  filename="v1alpha1/application_types.go:626"
INFO[0000] Downloading /home/asis/kubeflow/app.yaml to /tmp/311878482/app.yaml  filename="v1alpha1/application_types.go:334"
INFO[0000] Initializing a default restConfig for Kubernetes  filename="kustomize/kustomize.go:248"
INFO[0000] namespace: kubeflow                           filename="kustomize/kustomize.go:265"
INFO[0000] Creating namespace: kubeflow                  filename="kustomize/kustomize.go:268"
INFO[0000] creating CustomResourceDefinition/adapters.config.istio.io  filename="kustomize/kustomize.go:440"
INFO[0000] creating CustomResourceDefinition/apikeys.config.istio.io  filename="kustomize/kustomize.go:440"
INFO[0000] creating CustomResourceDefinition/attributemanifests.config.istio.io  filename="kustomize/kustomize.go:440"
INFO[0000] creating CustomResourceDefinition/authorizations.config.istio.io  filename="kustomize/kustomize.go:440"
INFO[0000] creating CustomResourceDefinition/bypasses.config.istio.io  filename="kustomize/kustomize.go:440"
INFO[0000] creating CustomResourceDefinition/certificates.certmanager.k8s.io  filename="kustomize/kustomize.go:440"
INFO[0000] creating CustomResourceDefinition/challenges.certmanager.k8s.io  filename="kustomize/kustomize.go:440"
INFO[0000] creating CustomResourceDefinition/checknothings.config.istio.io  filename="kustomize/kustomize.go:440"
INFO[0000] creating CustomResourceDefinition/circonuses.config.istio.io  filename="kustomize/kustomize.go:440"
INFO[0000] creating CustomResourceDefinition/cloudwatches.config.istio.io  filename="kustomize/kustomize.go:440"
INFO[0000] creating CustomResourceDefinition/clusterissuers.certmanager.k8s.io  filename="kustomize/kustomize.go:440"
INFO[0000] creating CustomResourceDefinition/clusterrbacconfigs.rbac.istio.io  filename="kustomize/kustomize.go:440"
INFO[0000] creating CustomResourceDefinition/deniers.config.istio.io  filename="kustomize/kustomize.go:440"
INFO[0000] creating CustomResourceDefinition/destinationrules.networking.istio.io  filename="kustomize/kustomize.go:440"
INFO[0000] creating CustomResourceDefinition/dogstatsds.config.istio.io  filename="kustomize/kustomize.go:440"
INFO[0000] creating CustomResourceDefinition/edges.config.istio.io  filename="kustomize/kustomize.go:440"
INFO[0000] creating CustomResourceDefinition/envoyfilters.networking.istio.io  filename="kustomize/kustomize.go:440"
INFO[0000] creating CustomResourceDefinition/fluentds.config.istio.io  filename="kustomize/kustomize.go:440"
INFO[0000] creating CustomResourceDefinition/gateways.networking.istio.io  filename="kustomize/kustomize.go:440"
INFO[0000] creating CustomResourceDefinition/handlers.config.istio.io  filename="kustomize/kustomize.go:440"
INFO[0000] creating CustomResourceDefinition/httpapispecbindings.config.istio.io  filename="kustomize/kustomize.go:440"
INFO[0000] creating CustomResourceDefinition/httpapispecs.config.istio.io  filename="kustomize/kustomize.go:440"
INFO[0000] creating CustomResourceDefinition/instances.config.istio.io  filename="kustomize/kustomize.go:440"
INFO[0000] creating CustomResourceDefinition/issuers.certmanager.k8s.io  filename="kustomize/kustomize.go:440"
INFO[0000] creating CustomResourceDefinition/kubernetesenvs.config.istio.io  filename="kustomize/kustomize.go:440"
INFO[0000] creating CustomResourceDefinition/kuberneteses.config.istio.io  filename="kustomize/kustomize.go:440"
INFO[0000] creating CustomResourceDefinition/listcheckers.config.istio.io  filename="kustomize/kustomize.go:440"
INFO[0000] creating CustomResourceDefinition/listentries.config.istio.io  filename="kustomize/kustomize.go:440"
INFO[0000] creating CustomResourceDefinition/logentries.config.istio.io  filename="kustomize/kustomize.go:440"
INFO[0000] creating CustomResourceDefinition/memquotas.config.istio.io  filename="kustomize/kustomize.go:440"
INFO[0000] creating CustomResourceDefinition/meshpolicies.authentication.istio.io  filename="kustomize/kustomize.go:440"
INFO[0000] creating CustomResourceDefinition/metrics.config.istio.io  filename="kustomize/kustomize.go:440"
INFO[0000] creating CustomResourceDefinition/noops.config.istio.io  filename="kustomize/kustomize.go:440"
INFO[0001] creating CustomResourceDefinition/opas.config.istio.io  filename="kustomize/kustomize.go:440"
INFO[0001] creating CustomResourceDefinition/orders.certmanager.k8s.io  filename="kustomize/kustomize.go:440"
INFO[0001] creating CustomResourceDefinition/policies.authentication.istio.io  filename="kustomize/kustomize.go:440"
INFO[0001] creating CustomResourceDefinition/prometheuses.config.istio.io  filename="kustomize/kustomize.go:440"
INFO[0001] creating CustomResourceDefinition/quotas.config.istio.io  filename="kustomize/kustomize.go:440"
INFO[0001] creating CustomResourceDefinition/quotaspecbindings.config.istio.io  filename="kustomize/kustomize.go:440"
INFO[0001] creating CustomResourceDefinition/quotaspecs.config.istio.io  filename="kustomize/kustomize.go:440"
INFO[0001] creating CustomResourceDefinition/rbacconfigs.rbac.istio.io  filename="kustomize/kustomize.go:440"
INFO[0001] creating CustomResourceDefinition/rbacs.config.istio.io  filename="kustomize/kustomize.go:440"
INFO[0001] creating CustomResourceDefinition/redisquotas.config.istio.io  filename="kustomize/kustomize.go:440"
INFO[0001] creating CustomResourceDefinition/reportnothings.config.istio.io  filename="kustomize/kustomize.go:440"
INFO[0001] creating CustomResourceDefinition/rules.config.istio.io  filename="kustomize/kustomize.go:440"
INFO[0001] creating CustomResourceDefinition/serviceentries.networking.istio.io  filename="kustomize/kustomize.go:440"
INFO[0001] creating CustomResourceDefinition/servicerolebindings.rbac.istio.io  filename="kustomize/kustomize.go:440"
INFO[0001] creating CustomResourceDefinition/serviceroles.rbac.istio.io  filename="kustomize/kustomize.go:440"
INFO[0001] creating CustomResourceDefinition/sidecars.networking.istio.io  filename="kustomize/kustomize.go:440"
INFO[0001] creating CustomResourceDefinition/signalfxs.config.istio.io  filename="kustomize/kustomize.go:440"
INFO[0001] creating CustomResourceDefinition/solarwindses.config.istio.io  filename="kustomize/kustomize.go:440"
INFO[0001] creating CustomResourceDefinition/stackdrivers.config.istio.io  filename="kustomize/kustomize.go:440"
INFO[0001] creating CustomResourceDefinition/statsds.config.istio.io  filename="kustomize/kustomize.go:440"
INFO[0001] creating CustomResourceDefinition/stdios.config.istio.io  filename="kustomize/kustomize.go:440"
INFO[0001] creating CustomResourceDefinition/templates.config.istio.io  filename="kustomize/kustomize.go:440"
INFO[0001] creating CustomResourceDefinition/tracespans.config.istio.io  filename="kustomize/kustomize.go:440"
INFO[0001] creating CustomResourceDefinition/virtualservices.networking.istio.io  filename="kustomize/kustomize.go:440"
INFO[0001] creating CustomResourceDefinition/zipkins.config.istio.io  filename="kustomize/kustomize.go:440"
INFO[0002] creating Namespace/istio-system               filename="kustomize/kustomize.go:440"
INFO[0002] creating ServiceAccount/istio-citadel-service-account  filename="kustomize/kustomize.go:440"
INFO[0002] creating ServiceAccount/istio-cleanup-secrets-service-account  filename="kustomize/kustomize.go:440"
INFO[0002] creating ServiceAccount/istio-egressgateway-service-account  filename="kustomize/kustomize.go:440"
INFO[0002] creating ServiceAccount/istio-galley-service-account  filename="kustomize/kustomize.go:440"
INFO[0002] creating ServiceAccount/istio-grafana-post-install-account  filename="kustomize/kustomize.go:440"
INFO[0002] creating ServiceAccount/istio-ingressgateway-service-account  filename="kustomize/kustomize.go:440"
INFO[0002] creating ServiceAccount/istio-mixer-service-account  filename="kustomize/kustomize.go:440"
INFO[0002] creating ServiceAccount/istio-multi           filename="kustomize/kustomize.go:440"
INFO[0002] creating ServiceAccount/istio-pilot-service-account  filename="kustomize/kustomize.go:440"
INFO[0002] creating ServiceAccount/istio-security-post-install-account  filename="kustomize/kustomize.go:440"
INFO[0002] creating ServiceAccount/istio-sidecar-injector-service-account  filename="kustomize/kustomize.go:440"
INFO[0002] creating ServiceAccount/kiali-service-account  filename="kustomize/kustomize.go:440"
INFO[0002] creating ServiceAccount/prometheus            filename="kustomize/kustomize.go:440"
INFO[0002] creating Role/istio-ingressgateway-sds        filename="kustomize/kustomize.go:440"
INFO[0002] creating ClusterRole/istio-citadel-istio-system  filename="kustomize/kustomize.go:440"
INFO[0002] creating ClusterRole/istio-cleanup-secrets-istio-system  filename="kustomize/kustomize.go:440"
INFO[0002] creating ClusterRole/istio-egressgateway-istio-system  filename="kustomize/kustomize.go:440"
INFO[0002] creating ClusterRole/istio-galley-istio-system  filename="kustomize/kustomize.go:440"
INFO[0002] creating ClusterRole/istio-grafana-post-install-istio-system  filename="kustomize/kustomize.go:440"
INFO[0002] creating ClusterRole/istio-ingressgateway-istio-system  filename="kustomize/kustomize.go:440"
INFO[0002] creating ClusterRole/istio-mixer-istio-system  filename="kustomize/kustomize.go:440"
INFO[0002] creating ClusterRole/istio-pilot-istio-system  filename="kustomize/kustomize.go:440"
INFO[0002] creating ClusterRole/istio-reader             filename="kustomize/kustomize.go:440"
INFO[0002] creating ClusterRole/istio-sidecar-injector-istio-system  filename="kustomize/kustomize.go:440"
INFO[0002] creating ClusterRole/kiali-viewer             filename="kustomize/kustomize.go:440"
INFO[0002] creating ClusterRole/kiali                    filename="kustomize/kustomize.go:440"
INFO[0002] creating ClusterRole/prometheus-istio-system  filename="kustomize/kustomize.go:440"
INFO[0002] creating ClusterRole/istio-security-post-install-istio-system  filename="kustomize/kustomize.go:440"
INFO[0002] creating RoleBinding/istio-ingressgateway-sds  filename="kustomize/kustomize.go:440"
INFO[0002] creating ClusterRoleBinding/istio-citadel-istio-system  filename="kustomize/kustomize.go:440"
INFO[0002] creating ClusterRoleBinding/istio-cleanup-secrets-istio-system  filename="kustomize/kustomize.go:440"
INFO[0002] creating ClusterRoleBinding/istio-egressgateway-istio-system  filename="kustomize/kustomize.go:440"
INFO[0002] creating ClusterRoleBinding/istio-galley-admin-role-binding-istio-system  filename="kustomize/kustomize.go:440"
INFO[0002] creating ClusterRoleBinding/istio-grafana-post-install-role-binding-istio-system  filename="kustomize/kustomize.go:440"
INFO[0002] creating ClusterRoleBinding/istio-ingressgateway-istio-system  filename="kustomize/kustomize.go:440"
INFO[0002] creating ClusterRoleBinding/istio-kiali-admin-role-binding-istio-system  filename="kustomize/kustomize.go:440"
INFO[0002] creating ClusterRoleBinding/istio-mixer-admin-role-binding-istio-system  filename="kustomize/kustomize.go:440"
INFO[0002] creating ClusterRoleBinding/istio-multi       filename="kustomize/kustomize.go:440"
INFO[0002] creating ClusterRoleBinding/istio-pilot-istio-system  filename="kustomize/kustomize.go:440"
INFO[0002] creating ClusterRoleBinding/istio-sidecar-injector-admin-role-binding-istio-system  filename="kustomize/kustomize.go:440"
INFO[0002] creating ClusterRoleBinding/prometheus-istio-system  filename="kustomize/kustomize.go:440"
INFO[0002] creating ClusterRoleBinding/istio-security-post-install-role-binding-istio-system  filename="kustomize/kustomize.go:440"
INFO[0002] creating ConfigMap/istio-galley-configuration  filename="kustomize/kustomize.go:440"
INFO[0002] creating ConfigMap/istio-grafana-configuration-dashboards-galley-dashboard  filename="kustomize/kustomize.go:440"
INFO[0002] creating ConfigMap/istio-grafana-configuration-dashboards-istio-mesh-dashboard  filename="kustomize/kustomize.go:440"
INFO[0002] creating ConfigMap/istio-grafana-configuration-dashboards-istio-performance-dashboard  filename="kustomize/kustomize.go:440"
INFO[0002] creating ConfigMap/istio-grafana-configuration-dashboards-istio-service-dashboard  filename="kustomize/kustomize.go:440"
INFO[0002] creating ConfigMap/istio-grafana-configuration-dashboards-istio-workload-dashboard  filename="kustomize/kustomize.go:440"
INFO[0002] creating ConfigMap/istio-grafana-configuration-dashboards-mixer-dashboard  filename="kustomize/kustomize.go:440"
INFO[0002] creating ConfigMap/istio-grafana-configuration-dashboards-pilot-dashboard  filename="kustomize/kustomize.go:440"
INFO[0002] creating ConfigMap/istio-grafana-custom-resources  filename="kustomize/kustomize.go:440"
INFO[0002] creating ConfigMap/istio-grafana              filename="kustomize/kustomize.go:440"
INFO[0002] creating ConfigMap/istio-security-custom-resources  filename="kustomize/kustomize.go:440"
INFO[0002] creating ConfigMap/istio-sidecar-injector     filename="kustomize/kustomize.go:440"
INFO[0002] creating ConfigMap/istio                      filename="kustomize/kustomize.go:440"
INFO[0002] creating ConfigMap/kiali                      filename="kustomize/kustomize.go:440"
INFO[0002] creating ConfigMap/prometheus                 filename="kustomize/kustomize.go:440"
INFO[0002] creating Secret/kiali                         filename="kustomize/kustomize.go:440"
INFO[0002] creating Service/grafana                      filename="kustomize/kustomize.go:440"
INFO[0003] creating Service/istio-citadel                filename="kustomize/kustomize.go:440"
INFO[0003] creating Service/istio-egressgateway          filename="kustomize/kustomize.go:440"
INFO[0003] creating Service/istio-galley                 filename="kustomize/kustomize.go:440"
INFO[0003] creating Service/istio-ingressgateway         filename="kustomize/kustomize.go:440"
INFO[0003] creating Service/istio-pilot                  filename="kustomize/kustomize.go:440"
INFO[0003] creating Service/istio-policy                 filename="kustomize/kustomize.go:440"
INFO[0003] creating Service/istio-sidecar-injector       filename="kustomize/kustomize.go:440"
INFO[0003] creating Service/istio-telemetry              filename="kustomize/kustomize.go:440"
INFO[0003] creating Service/jaeger-agent                 filename="kustomize/kustomize.go:440"
INFO[0003] creating Service/jaeger-collector             filename="kustomize/kustomize.go:440"
INFO[0003] creating Service/jaeger-query                 filename="kustomize/kustomize.go:440"
INFO[0003] creating Service/kiali                        filename="kustomize/kustomize.go:440"
INFO[0003] creating Service/prometheus                   filename="kustomize/kustomize.go:440"
INFO[0003] creating Service/tracing                      filename="kustomize/kustomize.go:440"
INFO[0005] creating Service/zipkin                       filename="kustomize/kustomize.go:440"
INFO[0005] creating Deployment/grafana                   filename="kustomize/kustomize.go:440"
INFO[0005] creating Deployment/istio-citadel             filename="kustomize/kustomize.go:440"
INFO[0005] creating Deployment/istio-egressgateway       filename="kustomize/kustomize.go:440"
INFO[0005] creating Deployment/istio-galley              filename="kustomize/kustomize.go:440"
INFO[0005] creating Deployment/istio-ingressgateway      filename="kustomize/kustomize.go:440"
INFO[0005] creating Deployment/istio-pilot               filename="kustomize/kustomize.go:440"
INFO[0005] creating Deployment/istio-policy              filename="kustomize/kustomize.go:440"
INFO[0005] creating Deployment/istio-sidecar-injector    filename="kustomize/kustomize.go:440"
INFO[0005] creating Deployment/istio-telemetry           filename="kustomize/kustomize.go:440"
INFO[0005] creating Deployment/istio-tracing             filename="kustomize/kustomize.go:440"
INFO[0005] creating Deployment/kiali                     filename="kustomize/kustomize.go:440"
INFO[0005] creating Deployment/prometheus                filename="kustomize/kustomize.go:440"
INFO[0005] creating PodDisruptionBudget/istio-egressgateway  filename="kustomize/kustomize.go:440"
INFO[0005] creating PodDisruptionBudget/istio-galley     filename="kustomize/kustomize.go:440"
INFO[0005] creating PodDisruptionBudget/istio-ingressgateway  filename="kustomize/kustomize.go:440"
INFO[0005] creating PodDisruptionBudget/istio-pilot      filename="kustomize/kustomize.go:440"
INFO[0006] creating PodDisruptionBudget/istio-policy     filename="kustomize/kustomize.go:440"
INFO[0007] creating PodDisruptionBudget/istio-telemetry  filename="kustomize/kustomize.go:440"
INFO[0008] creating MutatingWebhookConfiguration/istio-sidecar-injector  filename="kustomize/kustomize.go:440"
INFO[0008] creating HorizontalPodAutoscaler/istio-egressgateway  filename="kustomize/kustomize.go:440"
INFO[0009] creating HorizontalPodAutoscaler/istio-ingressgateway  filename="kustomize/kustomize.go:440"
INFO[0010] creating HorizontalPodAutoscaler/istio-pilot  filename="kustomize/kustomize.go:440"
INFO[0010] creating HorizontalPodAutoscaler/istio-policy  filename="kustomize/kustomize.go:440"
INFO[0010] creating HorizontalPodAutoscaler/istio-telemetry  filename="kustomize/kustomize.go:440"
INFO[0010] creating Job/istio-cleanup-secrets-1.1.6      filename="kustomize/kustomize.go:440"
INFO[0011] creating Job/istio-grafana-post-install-1.1.6  filename="kustomize/kustomize.go:440"
INFO[0011] creating Job/istio-security-post-install-1.1.6  filename="kustomize/kustomize.go:440"
INFO[0011] creating attributemanifest/istioproxy         filename="kustomize/kustomize.go:440"
INFO[0011] creating attributemanifest/kubernetes         filename="kustomize/kustomize.go:440"
INFO[0012] creating handler/kubernetesenv                filename="kustomize/kustomize.go:440"
INFO[0012] creating handler/prometheus                   filename="kustomize/kustomize.go:440"
INFO[0013] creating handler/stdio                        filename="kustomize/kustomize.go:440"
INFO[0014] creating kubernetes/attributes                filename="kustomize/kustomize.go:440"
INFO[0014] creating logentry/accesslog                   filename="kustomize/kustomize.go:440"
INFO[0014] creating logentry/tcpaccesslog                filename="kustomize/kustomize.go:440"
INFO[0015] creating metric/requestcount                  filename="kustomize/kustomize.go:440"
INFO[0015] creating metric/requestduration               filename="kustomize/kustomize.go:440"
INFO[0015] creating metric/requestsize                   filename="kustomize/kustomize.go:440"
INFO[0015] creating metric/responsesize                  filename="kustomize/kustomize.go:440"
INFO[0015] creating metric/tcpbytereceived               filename="kustomize/kustomize.go:440"
INFO[0015] creating metric/tcpbytesent                   filename="kustomize/kustomize.go:440"
INFO[0016] creating metric/tcpconnectionsclosed          filename="kustomize/kustomize.go:440"
INFO[0016] creating metric/tcpconnectionsopened          filename="kustomize/kustomize.go:440"
INFO[0016] creating rule/kubeattrgenrulerule             filename="kustomize/kustomize.go:440"
INFO[0016] creating rule/promhttp                        filename="kustomize/kustomize.go:440"
INFO[0016] creating rule/promtcpconnectionclosed         filename="kustomize/kustomize.go:440"
INFO[0016] creating rule/promtcpconnectionopen           filename="kustomize/kustomize.go:440"
INFO[0016] creating rule/promtcp                         filename="kustomize/kustomize.go:440"
INFO[0016] creating rule/stdiotcp                        filename="kustomize/kustomize.go:440"
INFO[0016] creating rule/stdio                           filename="kustomize/kustomize.go:440"
INFO[0016] creating rule/tcpkubeattrgenrulerule          filename="kustomize/kustomize.go:440"
INFO[0016] creating DestinationRule/istio-policy         filename="kustomize/kustomize.go:440"
INFO[0017] creating DestinationRule/istio-telemetry      filename="kustomize/kustomize.go:440"
INFO[0017] creating ConfigMap/istio-parameters-9m7m4fhdb8  filename="kustomize/kustomize.go:440"
INFO[0017] creating Gateway/kubeflow-gateway             filename="kustomize/kustomize.go:440"
INFO[0017] creating ServiceEntry/google-api-entry        filename="kustomize/kustomize.go:440"
INFO[0017] creating ServiceEntry/google-storage-api-entry  filename="kustomize/kustomize.go:440"
INFO[0017] creating VirtualService/google-api-vs         filename="kustomize/kustomize.go:440"
INFO[0017] creating VirtualService/google-storage-api-vs  filename="kustomize/kustomize.go:440"
INFO[0017] creating VirtualService/grafana-vs            filename="kustomize/kustomize.go:440"
INFO[0017] creating ClusterRbacConfig/default            filename="kustomize/kustomize.go:440"
INFO[0017] creating CustomResourceDefinition/applications.app.k8s.io  filename="kustomize/kustomize.go:440"
INFO[0017] creating ServiceAccount/application-controller-service-account  filename="kustomize/kustomize.go:440"
INFO[0017] creating ClusterRole/application-controller-cluster-role  filename="kustomize/kustomize.go:440"
INFO[0017] creating ClusterRoleBinding/application-controller-cluster-role-binding  filename="kustomize/kustomize.go:440"
INFO[0017] creating ConfigMap/application-controller-parameters  filename="kustomize/kustomize.go:440"
INFO[0017] creating Service/application-controller-service  filename="kustomize/kustomize.go:440"
INFO[0017] creating StatefulSet/application-controller-stateful-set  filename="kustomize/kustomize.go:440"
Error: couldn't apply KfApp:  (kubeflow.error): Code 500 with message: kfApp Apply failed for kustomize:  (kubeflow.error): Code 500 with message: couldn't create resources from application Error: no matches for kind "Application" in version "app.k8s.io/v1beta1"
Usage:
  kfctl apply [all(=default)|k8s|platform] [flags]

Flags:
  -h, --help      help for apply
  -V, --verbose   verbose output default is false

couldn't apply KfApp:  (kubeflow.error): Code 500 with message: kfApp Apply failed for kustomize:  (kubeflow.error): Code 500 with message: couldn't create resources from application Error: no matches for kind "Application" in version "app.k8s.io/v1beta1"
&lt;/denchmark-code&gt;

		</comment>
		<comment id='13' author='emmayang' date='2019-07-30T01:06:27Z'>
		
@JavaDerek What cluster type is this? What error do you see? If all pods are running fine, can you verify your INGRESS_HOST is correct? Is your INGRESS_HOST accessible?
What is o/p of kubectl get nodes -o wide

&lt;denchmark-link:https://github.com/johnugeorge&gt;@johnugeorge&lt;/denchmark-link&gt;
 It is a bare metal, on premise cluster.  I can get to the dashboard is is just that, for example, going to the Pipelines screen causes it to give an error about not being able to establish a proxy path to the pipelines list.  I actually just deleted the setup to try the MetalLB approach, but if that doesn't work, I'll come back and try this again and send the output from the get nodes command.
		</comment>
		<comment id='14' author='emmayang' date='2019-07-30T01:20:35Z'>
		
MetalLB

&lt;denchmark-link:https://github.com/yanniszark&gt;@yanniszark&lt;/denchmark-link&gt;
 So, I installed MetalLB as per &lt;denchmark-link:https://metallb.universe.tf/installation/&gt;https://metallb.universe.tf/installation/&lt;/denchmark-link&gt;
 and then ran the KF install instructions at &lt;denchmark-link:https://www.kubeflow.org/docs/started/getting-started-k8s/#Kubeflow-for-Existing-Clusters---by-Arrikto&gt;https://www.kubeflow.org/docs/started/getting-started-k8s/#Kubeflow-for-Existing-Clusters---by-Arrikto&lt;/denchmark-link&gt;
, targeting .6.1, but it still hangs trying to find the gateway.  Is there something more that is expected to be done?
&lt;denchmark-link:https://user-images.githubusercontent.com/41542120/62093268-4a8d4700-b23e-11e9-8ee2-6dfa9082b735.png&gt;&lt;/denchmark-link&gt;

		</comment>
		<comment id='15' author='emmayang' date='2019-07-30T02:09:43Z'>
		Hi &lt;denchmark-link:https://github.com/JavaDerek&gt;@JavaDerek&lt;/denchmark-link&gt;
.
We have reports of users installing existing_arrikto successfully using MetalLB.
I suspect there might be something wrong with the MetalLB installation.
Can you paste the following logs here to give more context to debug the issue:

OIDC Service logs: kubectl logs -n istio-system -l app=authservice
Dex logs: kubectl logs -n kubeflow -l app=dex
Istio ingress-gateway logs: kubectl logs -n istio-system -l istio=ingressgateway
Istio ingressgateway service: kubectl get service -n istio-system istio-ingressgateway -o yaml
MetalLB logs and config.

		</comment>
		<comment id='16' author='emmayang' date='2019-07-30T02:59:51Z'>
		&lt;denchmark-link:https://github.com/asispatra&gt;@asispatra&lt;/denchmark-link&gt;
 the error
&lt;denchmark-code&gt;couldn't apply KfApp:  (kubeflow.error): Code 500 with message: kfApp Apply failed for kustomize:  (kubeflow.error): Code 500 with message: couldn't create resources from application Error: no matches for kind "Application" in version "app.k8s.io/v1beta1"
&lt;/denchmark-code&gt;

Looks like a different one from this issue; I'd suggest opening a new issue so we don't try to debug multiple problems on the same issue.
It looks like the error is complaining because the Application resource isn't defined in your cluster.
Can you please run the following and include the output in any issue you open.
&lt;denchmark-code&gt;kubectl get crd -o yaml applications.app.k8s.io
&lt;/denchmark-code&gt;

		</comment>
		<comment id='17' author='emmayang' date='2019-07-30T03:18:16Z'>
		&lt;denchmark-link:https://github.com/jlewi&gt;@jlewi&lt;/denchmark-link&gt;
 The issue was, the lag with which application crd was getting created. On reapply, it worked. Related &lt;denchmark-link:https://github.com/kubeflow/kubeflow/issues/3750&gt;#3750&lt;/denchmark-link&gt;

		</comment>
		<comment id='18' author='emmayang' date='2019-07-31T05:24:02Z'>
		&lt;denchmark-link:https://github.com/jlewi&gt;@jlewi&lt;/denchmark-link&gt;
 &lt;denchmark-link:https://github.com/halayudha&gt;@halayudha&lt;/denchmark-link&gt;
 sorry for the late response, and thanks, I tired latest  release, and also installed the , and now the installation passed. However now the installation failed at some other places, and the  and  pods are not running as expected, but I think I can work that out.
&lt;denchmark-link:https://github.com/JavaDerek&gt;@JavaDerek&lt;/denchmark-link&gt;
 I have exact same problem like you do, and then I found out only install metallb will not solve the problem, you'll also need to create a config map for it, like here: &lt;denchmark-link:https://metallb.universe.tf/configuration/&gt;https://metallb.universe.tf/configuration/&lt;/denchmark-link&gt;
.
I used the basic layer2 configuration exactly like described on the doc, waited for a while, and try re-install kubeflow, and it worked.
		</comment>
		<comment id='19' author='emmayang' date='2019-07-31T09:07:16Z'>
		&lt;denchmark-link:https://github.com/emmayang&gt;@emmayang&lt;/denchmark-link&gt;
 can you share the config you used? For the layer2 config:

the IP address range are those of your physical nodes?
did you have to deploy MetalLB in the default namespace as well?

I've tried to deploy MetalLB on a clean Kubernetes cluster (to deploy MetalLB before Kubeflow) but I'm still getting the Trying to get istio-ingressgateway Service External IP filename="existing_arrikto/existing.go:392" problem and I'm not sure how to debug MetalLB.
		</comment>
		<comment id='20' author='emmayang' date='2019-08-01T11:15:53Z'>
		After install MetalLB I‚Äòm also meet this question:
&lt;denchmark-code&gt;# kubectl get pods -n metallb-system
NAME                        READY   STATUS    RESTARTS   AGE
controller-55d74449-726hz   1/1     Running   0          62s
speaker-5r8mw               1/1     Running   0          62s
speaker-ldsp7               1/1     Running   0          62s

# kubectl get svc -n istio-system
NAME                     TYPE           CLUSTER-IP       EXTERNAL-IP    PORT(S)                                                                                                                                                     AGE
grafana                  ClusterIP      10.111.8.188     &lt;none&gt;         3000/TCP                                                                                                                                                    92m
istio-citadel            ClusterIP      10.98.228.176    &lt;none&gt;         8060/TCP,15014/TCP                                                                                                                                          92m
istio-egressgateway      ClusterIP      10.107.190.68    &lt;none&gt;         80/TCP,443/TCP,15443/TCP                                                                                                                                    92m
istio-galley             ClusterIP      10.111.24.35     &lt;none&gt;         443/TCP,15014/TCP,9901/TCP                                                                                                                                  92m
istio-ingressgateway     LoadBalancer   10.109.82.228    10.60.133.18   5556:30589/TCP,15020:31098/TCP,80:31380/TCP,443:31390/TCP,31400:31400/TCP,15029:31363/TCP,15030:30599/TCP,15031:30094/TCP,15032:30977/TCP,15443:30979/TCP   92m
istio-pilot              ClusterIP      10.109.218.153   &lt;none&gt;         15010/TCP,15011/TCP,8080/TCP,15014/TCP                                                                                                                      92m
istio-policy             ClusterIP      10.106.208.143   &lt;none&gt;         9091/TCP,15004/TCP,15014/TCP                                                                                                                                92m
istio-sidecar-injector   ClusterIP      10.105.138.187   &lt;none&gt;         443/TCP                                                                                                                                                     92m
istio-telemetry          ClusterIP      10.103.210.39    &lt;none&gt;         9091/TCP,15004/TCP,15014/TCP,42422/TCP                                                                                                                      92m
jaeger-agent             ClusterIP      None             &lt;none&gt;         5775/UDP,6831/UDP,6832/UDP                                                                                                                                  91m
jaeger-collector         ClusterIP      10.109.68.53     &lt;none&gt;         14267/TCP,14268/TCP                                                                                                                                         91m
jaeger-query             ClusterIP      10.104.109.245   &lt;none&gt;         16686/TCP                                                                                                                                                   91m
kiali                    ClusterIP      10.105.126.123   &lt;none&gt;         20001/TCP                                                                                                                                                   92m
prometheus               ClusterIP      10.99.218.35     &lt;none&gt;         9090/TCP                                                                                                                                                    92m
tracing                  ClusterIP      10.109.144.209   &lt;none&gt;         80/TCP                                                                                                                                                      91m
zipkin                   ClusterIP      10.101.52.197    &lt;none&gt;         9411/TCP

# kfctl apply all -V
...
INFO[0044] object already exists...                      filename="utils/k8utils.go:259"
INFO[0044] Creating istio-policy                         filename="utils/k8utils.go:255"
INFO[0044] object already exists...                      filename="utils/k8utils.go:259"
INFO[0044] Creating istio-telemetry                      filename="utils/k8utils.go:255"
INFO[0044] object already exists...                      filename="utils/k8utils.go:259"
INFO[0044] Trying to get istio-ingressgateway Service Address from its Status  filename="existing_arrikto/existing.go:414"
INFO[0054] Trying to get istio-ingressgateway Service Address from its Status  filename="existing_arrikto/existing.go:414"
INFO[0064] Trying to get istio-ingressgateway Service Address from its Status  filename="existing_arrikto/existing.go:414"
INFO[0074] Trying to get istio-ingressgateway Service Address from its Status  filename="existing_arrikto/existing.go:414"
INFO[0084] Trying to get istio-ingressgateway Service Address from its Status  filename="existing_arrikto/existing.go:414"

# kfctl version
kfctl v0.6.1-rc.2-1-g3a37cbc6
&lt;/denchmark-code&gt;

istio-ingressgateway was pending at frist, I use internal IP instead of external IP to add the externalIPs into the  istio-ingressgateway service„ÄÇ

As &lt;denchmark-link:https://github.com/emmayang&gt;@emmayang&lt;/denchmark-link&gt;
 said, after create configmap for metallb, the installation is ok. thanks.
		</comment>
		<comment id='21' author='emmayang' date='2019-08-01T14:34:38Z'>
		
@emmayang can you share the config you used? For the layer2 config:

the IP address range are those of your physical nodes?
did you have to deploy MetalLB in the default namespace as well?

I've tried to deploy MetalLB on a clean Kubernetes cluster (to deploy MetalLB before Kubeflow) but I'm still getting the Trying to get istio-ingressgateway Service External IP filename="existing_arrikto/existing.go:392" problem and I'm not sure how to debug MetalLB.

Ok, I can confirm the steps to get it working:

kubectl apply -f https://raw.githubusercontent.com/google/metallb/v0.8.1/manifests/metallb.yaml
Deploy configmap to metallb-system namespace, IP is IP range of physical nodes (kubectl apply -f config.yaml)
Just wait a few seconds before deploying Kubeflow

Now it successfully installs, but there are still some other (probably unrelated) issues.
		</comment>
		<comment id='22' author='emmayang' date='2019-08-01T15:12:28Z'>
		&lt;denchmark-link:https://github.com/tlkh&gt;@tlkh&lt;/denchmark-link&gt;
 sorry for the late, and I used exactly the same config file from metallb website, and just double checked the ip range in that is free. Glad to see it's working now.
And for some other issue you've mentioned, is that the katib-db and katib-manager cannot start successfully?
		</comment>
		<comment id='23' author='emmayang' date='2019-08-01T15:48:22Z'>
		&lt;denchmark-link:https://github.com/emmayang&gt;@emmayang&lt;/denchmark-link&gt;
 yes indeed
I‚Äôm mainly concerned about some issue with authentication, although some pods failed to start as you mentioned. The logs seem to indicate some permissions problem.
I detailed them at the bottom of &lt;denchmark-link:https://github.com/kubeflow/kubeflow/issues/3805&gt;#3805&lt;/denchmark-link&gt;

		</comment>
		<comment id='24' author='emmayang' date='2019-08-19T17:56:10Z'>
		Just an update on the status of this issue:

As mentioned in the docs, having a LoadBalancer Service is a prerequisite. For the user's convenience, MetalLB instructions have been included in the docs.
The need for a LoadBalancer will be removed once #3839 is implemented.
For the authentication issue that @tlkh mentioned, it will be fixed by #3885.

Is there anything else left to close this?
cc &lt;denchmark-link:https://github.com/jlewi&gt;@jlewi&lt;/denchmark-link&gt;

		</comment>
		<comment id='25' author='emmayang' date='2019-08-26T23:30:50Z'>
		Closing this per &lt;denchmark-link:https://github.com/yanniszark&gt;@yanniszark&lt;/denchmark-link&gt;
 comment above.
		</comment>
	</comments>
</bug>