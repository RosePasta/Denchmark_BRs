<bug id='7698' author='Gubarev' open_date='2017-02-20T14:25:18Z' closed_time='2017-04-12T12:20:13Z'>
	<summary>Quantize nodes via Transform Graph tool cause error</summary>
	<description>
I am trying to quantize my model by following this &lt;denchmark-link:https://github.com/tensorflow/tensorflow/blob/master/tensorflow/tools/graph_transforms/README.md&gt;README&lt;/denchmark-link&gt;

I have faced with issue No attr named 'T' in NodeDef: when I run transform_graph tool with quantize_nodes option both for my model and example model (Inception V3).
&lt;denchmark-code&gt;path/to/transform_graph --in_graph=model.pb --out_graph=optimized.pb --inputs='input:0' --outputs='regression:0,classification:0' --transforms='quantize_weights quantize_nodes'
&lt;/denchmark-code&gt;

Here is relevant part of output:
&lt;denchmark-code&gt;2017-02-20 17:14:19.944778: I tensorflow/tools/graph_transforms/transform_graph.cc:257] Applying quantize_nodes
2017-02-20 17:14:20.599637: E tensorflow/tools/graph_transforms/transform_graph.cc:203] No attr named 'T' in NodeDef:
	 [[Node: pool = MaxPool[ksize=[1, 3, 3, 1], padding="VALID", strides=[1, 2, 2, 1]](pool/control_dependency)]]
&lt;/denchmark-code&gt;

&lt;denchmark-h:h3&gt;Environment info&lt;/denchmark-h&gt;

Doesn't seems too important. Tested on two machines with different configurations (referred as M for Mac and U for Ubuntu below).
Operating System:
M: macOS Sierra 10.12.3
U: Ubuntu 16.04.2 LTS x86_64
TF has been installed from source. Commit hash:
M: &lt;denchmark-link:https://github.com/tensorflow/tensorflow/commit/b6f16b8166e3a7761f607be66d46acbd37dfaf43&gt;b6f16b8&lt;/denchmark-link&gt;

U: &lt;denchmark-link:https://github.com/tensorflow/tensorflow/commit/c56c873fbaf976d26d487ad57c8efbc87f05331c&gt;c56c873&lt;/denchmark-link&gt;

Bazel version / build label
M: 0.4.4-homebrew
U: 0.4.4
&lt;denchmark-h:h3&gt;Minimal reproducible example&lt;/denchmark-h&gt;

Download &amp; unpack inception V3. Run the tool (modify path to tool and model if necessary).
&lt;denchmark-code&gt;curl http://download.tensorflow.org/models/image/imagenet/inception-2015-12-05.tgz -o /tmp/inceptionv3.tgz
tar xzf /tmp/inceptionv3.tgz -C /tmp/
bazel-bin/tensorflow/tools/graph_transforms/transform_graph --in_graph=/tmp/classify_image_graph_def.pb --out_graph=optimized.pb --inputs='input:0' --outputs='regression:0,classification:0' --transforms='quantize_weights quantize_nodes'
&lt;/denchmark-code&gt;

&lt;denchmark-h:h3&gt;What other attempted solutions have you tried?&lt;/denchmark-h&gt;

I have tried to run quantisation on different OS (Mac and Ubuntu) and slightly different revisions of master. Also, initially, I have tried to quantize nodes of my own model, not Inception. In all cases result is the same: error.
	</description>
	<comments>
		<comment id='1' author='Gubarev' date='2017-02-21T16:52:42Z'>
		&lt;denchmark-link:https://github.com/petewarden&gt;@petewarden&lt;/denchmark-link&gt;
, could you please take a look?
		</comment>
		<comment id='2' author='Gubarev' date='2017-04-12T10:55:51Z'>
		&lt;denchmark-link:https://github.com/Gubarev&gt;@Gubarev&lt;/denchmark-link&gt;
,
you can try this :
bazel-bin/tensorflow/tools/graph_transforms/transform_graph --in_graph=/tmp/classify_image_graph_def.pb --out_graph=optimized.pb --inputs='input:0' --outputs='regression:0,classification:0' --transforms=' quantize_weights quantize_nodes'
		</comment>
		<comment id='3' author='Gubarev' date='2017-04-12T12:20:13Z'>
		Now I see that README I referred has been updated since I opened my issue. With  option the transform_graph does not produce errors. Thanks to &lt;denchmark-link:https://github.com/scangh&gt;@scangh&lt;/denchmark-link&gt;
 for noticing! So this issue is appeared to be README issue and already resolved.
		</comment>
	</comments>
</bug>