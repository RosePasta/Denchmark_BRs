<bug id='12593' author='rsd-raul' open_date='2017-08-25T10:04:11Z' closed_time='2017-09-21T22:04:00Z'>
	<summary>Android Demo - Bug - Exception in TF Detect activity</summary>
	<description>
&lt;denchmark-h:h3&gt;System information&lt;/denchmark-h&gt;


Have I written custom code (as opposed to using a stock example script provided in TensorFlow):
At build.gradle (Module: android)
def nativeBuildSystem = 'none'
At CameraActivity.java:
useCamera2API = true;
Suggested by @andrewharp at #12431
OS Platform and Distribution (e.g., Linux Ubuntu 16.04):
Windows version: 10 Pro
Android version: 6.0.1
Demo version: commit 18e4590
TensorFlow installed from (source or binary):
x
TensorFlow version (use command below):
x
Python version:
x
Bazel version (if compiling from source):
x
CUDA/cuDNN version:
x
GPU model and memory:
x
Exact command to reproduce:
x

&lt;denchmark-h:h3&gt;Describe the problem&lt;/denchmark-h&gt;

Running the activity TF Detect after installing the project with Android Studio results in an IllegalArgumentException being thrown.
The problem has been noticed before with other configurations at issue &lt;denchmark-link:https://github.com/tensorflow/tensorflow/issues/12431&gt;#12431&lt;/denchmark-link&gt;
 and pull request &lt;denchmark-link:https://github.com/tensorflow/tensorflow/pull/10771&gt;#10771&lt;/denchmark-link&gt;
 and tested recently by &lt;denchmark-link:https://github.com/ArtsiomCh&gt;@ArtsiomCh&lt;/denchmark-link&gt;
  using CMake and Ubuntu.
&lt;denchmark-h:h3&gt;Source code / logs&lt;/denchmark-h&gt;

&lt;denchmark-code&gt;08-25 11:46:10.596 9185-9185/? I/art: Late-enabling -Xcheck:jni
08-25 11:46:10.636 9185-9185/? D/TidaProvider: TidaProvider()
08-25 11:46:10.722 9185-9185/org.tensorflow.demo D/tensorflow: CameraActivity: onCreate org.tensorflow.demo.DetectorActivity@df7138f
08-25 11:46:10.749 9185-9185/org.tensorflow.demo I/CameraManagerGlobal: Connecting to camera service
08-25 11:46:10.784 9185-9185/org.tensorflow.demo I/tensorflow: CameraActivity: Camera API lv2?: true
08-25 11:46:10.788 9185-9185/org.tensorflow.demo D/tensorflow: CameraActivity: onStart org.tensorflow.demo.DetectorActivity@df7138f
08-25 11:46:10.788 9185-9185/org.tensorflow.demo D/tensorflow: CameraActivity: onResume org.tensorflow.demo.DetectorActivity@df7138f
08-25 11:46:10.796 9185-9217/org.tensorflow.demo D/OpenGLRenderer: Use EGL_SWAP_BEHAVIOR_PRESERVED: true
08-25 11:46:10.801 9185-9185/org.tensorflow.demo D/ActivityThreadInjector: clearCachedDrawables.
08-25 11:46:10.840 9185-9217/org.tensorflow.demo I/Adreno: QUALCOMM build                   : a7823f5, I59a6815413
                                                           Build Date                       : 09/23/16
                                                           OpenGL ES Shader Compiler Version: XE031.07.00.00
                                                           Local Branch                     : mybranch22028469
                                                           Remote Branch                    : quic/LA.BR.1.3.3_rb2.26
                                                           Remote Branch                    : NONE
                                                           Reconstruct Branch               : NOTHING
08-25 11:46:10.846 9185-9217/org.tensorflow.demo I/OpenGLRenderer: Initialized EGL, version 1.4
08-25 11:46:10.858 9185-9185/org.tensorflow.demo I/tensorflow: CameraConnectionFragment: Desired size: 640x480, min size: 480x480
08-25 11:46:10.858 9185-9185/org.tensorflow.demo I/tensorflow: CameraConnectionFragment: Valid preview sizes: [1280x960, 1280x720, 864x480, 640x640, 800x480, 720x480, 640x480, 480x640]
08-25 11:46:10.859 9185-9185/org.tensorflow.demo I/tensorflow: CameraConnectionFragment: Rejected preview sizes: [832x468, 768x432, 576x432, 640x360, 480x360, 480x320, 384x288, 352x288, 320x240, 240x320, 240x160, 176x144]
08-25 11:46:10.859 9185-9185/org.tensorflow.demo I/tensorflow: CameraConnectionFragment: Exact size match found.
08-25 11:46:10.861 9185-9185/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: ???
08-25 11:46:10.861 9185-9185/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: person
... Etc.
08-25 11:46:10.863 9185-9185/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: hair drier
08-25 11:46:10.863 9185-9185/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: toothbrush
08-25 11:46:10.864 9185-9185/org.tensorflow.demo I/TensorFlowInferenceInterface: Checking to see if TensorFlow native methods are already loaded
08-25 11:46:10.864 9185-9185/org.tensorflow.demo E/art: No implementation found for long org.tensorflow.contrib.android.RunStats.allocate() (tried Java_org_tensorflow_contrib_android_RunStats_allocate and Java_org_tensorflow_contrib_android_RunStats_allocate__)
08-25 11:46:10.864 9185-9185/org.tensorflow.demo I/TensorFlowInferenceInterface: TensorFlow native methods not found, attempting to load via tensorflow_inference
08-25 11:46:10.896 9185-9185/org.tensorflow.demo I/TensorFlowInferenceInterface: Successfully loaded TensorFlow native methods (RunStats error may be ignored)
08-25 11:46:12.133 9185-9185/org.tensorflow.demo I/TensorFlowInferenceInterface: Model load took 1213ms, TensorFlow version: 1.2.0
08-25 11:46:12.136 9185-9185/org.tensorflow.demo I/TensorFlowInferenceInterface: Successfully loaded model from 'file:///android_asset/ssd_mobilenet_v1_android_export.pb'
08-25 11:46:12.137 9185-9185/org.tensorflow.demo I/tensorflow: DetectorActivity: Sensor orientation: 90, Screen orientation: 0
08-25 11:46:12.137 9185-9185/org.tensorflow.demo I/tensorflow: DetectorActivity: Initializing at size 640x480
08-25 11:46:12.139 9185-9185/org.tensorflow.demo W/tensorflow: ImageUtils: Native library not found, native RGB -&gt; YUV conversion may be unavailable.
08-25 11:46:12.148 9185-9185/org.tensorflow.demo I/CameraManager: Using legacy camera HAL.
08-25 11:46:12.280 9185-9216/org.tensorflow.demo I/tensorflow: CameraConnectionFragment: Opening camera preview: 640x480
08-25 11:46:12.285 9185-9216/org.tensorflow.demo I/CameraDeviceState: Legacy camera service transitioning to state CONFIGURING
08-25 11:46:12.286 9185-9217/org.tensorflow.demo E/HAL: hw_get_module_by_class: module name gralloc
08-25 11:46:12.286 9185-9290/org.tensorflow.demo I/RequestThread-0: Configure outputs: 2 surfaces configured.
08-25 11:46:12.286 9185-9217/org.tensorflow.demo E/HAL: hw_get_module_by_class: module name gralloc
08-25 11:46:12.286 9185-9290/org.tensorflow.demo D/Camera: app passed NULL surface
08-25 11:46:12.297 9185-9185/org.tensorflow.demo I/Choreographer: Skipped 85 frames!  The application may be doing too much work on its main thread.
08-25 11:46:12.309 9185-9216/org.tensorflow.demo I/CameraDeviceState: Legacy camera service transitioning to state IDLE
08-25 11:46:12.313 9185-9216/org.tensorflow.demo I/RequestQueue: Repeating capture request set.
08-25 11:46:12.314 9185-9290/org.tensorflow.demo W/LegacyRequestMapper: convertRequestMetadata - control.awbRegions setting is not supported, ignoring value
08-25 11:46:12.314 9185-9290/org.tensorflow.demo W/LegacyRequestMapper: Only received metering rectangles with weight 0.
08-25 11:46:12.314 9185-9290/org.tensorflow.demo W/LegacyRequestMapper: Only received metering rectangles with weight 0.
08-25 11:46:12.493 9185-9291/org.tensorflow.demo I/CameraDeviceState: Legacy camera service transitioning to state CAPTURING
08-25 11:46:12.515 9185-9216/org.tensorflow.demo D/tensorflow: CameraActivity: Initializing buffer 0 at size 307200
08-25 11:46:12.516 9185-9216/org.tensorflow.demo D/tensorflow: CameraActivity: Initializing buffer 1 at size 153599
08-25 11:46:12.516 9185-9216/org.tensorflow.demo D/tensorflow: CameraActivity: Initializing buffer 2 at size 153599
08-25 11:46:12.517 9185-9216/org.tensorflow.demo E/tensorflow: ObjectTracker: libtensorflow_demo.so not found, tracking unavailable
08-25 11:46:12.517 9185-9216/org.tensorflow.demo I/tensorflow: MultiBoxTracker: Initializing ObjectTracker: 640x480
08-25 11:46:12.517 9185-9216/org.tensorflow.demo E/tensorflow: ObjectTracker: Native object tracking support not found. See tensorflow/examples/android/README.md for details.
08-25 11:46:12.525 9185-9216/org.tensorflow.demo E/tensorflow: MultiBoxTracker: Object tracking support not found. See tensorflow/examples/android/README.md for details.
08-25 11:46:12.544 9185-9216/org.tensorflow.demo E/art: No implementation found for void org.tensorflow.demo.env.ImageUtils.convertYUV420ToARGB8888(byte[], byte[], byte[], int[], int, int, int, int, int, boolean) (tried Java_org_tensorflow_demo_env_ImageUtils_convertYUV420ToARGB8888 and Java_org_tensorflow_demo_env_ImageUtils_convertYUV420ToARGB8888___3B_3B_3B_3IIIIIIZ)
08-25 11:46:12.545 9185-9216/org.tensorflow.demo W/tensorflow: ImageUtils: Native YUV -&gt; RGB implementation not found, falling back to Java implementation
08-25 11:46:12.717 9185-9217/org.tensorflow.demo V/RenderScript: 0x558f6c1290 Launching thread(s), CPUs 6
08-25 11:46:13.060 9185-9215/org.tensorflow.demo E/TensorFlowInferenceInterface: Failed to run TensorFlow inference with inputs:[image_tensor], outputs:[detection_boxes, detection_scores, detection_classes, num_detections]
                                                                                 
                                                                                 --------- beginning of crash
08-25 11:46:13.060 9185-9215/org.tensorflow.demo E/AndroidRuntime: FATAL EXCEPTION: inference
                                                                   Process: org.tensorflow.demo, PID: 9185
                                                                   java.lang.IllegalArgumentException: No OpKernel was registered to support Op 'Switch' with these attrs.  Registered devices: [CPU], Registered kernels:
                                                                     device='CPU'; T in [DT_FLOAT]
                                                                     device='CPU'; T in [DT_INT32]
                                                                     device='GPU'; T in [DT_STRING]
                                                                     device='GPU'; T in [DT_BOOL]
                                                                     device='GPU'; T in [DT_INT32]
                                                                     device='GPU'; T in [DT_FLOAT]
                                                                   
                                                                   	 [[Node: Postprocessor/BatchMultiClassNonMaxSuppression/map/while/PadOrClipBoxList/cond/Switch = Switch[T=DT_BOOL](Postprocessor/BatchMultiClassNonMaxSuppression/map/while/PadOrClipBoxList/Greater, Postprocessor/BatchMultiClassNonMaxSuppression/map/while/PadOrClipBoxList/Greater)]]
                                                                       at org.tensorflow.Session.run(Native Method)
                                                                       at org.tensorflow.Session.access$100(Session.java:48)
                                                                       at org.tensorflow.Session$Runner.runHelper(Session.java:295)
                                                                       at org.tensorflow.Session$Runner.run(Session.java:245)
                                                                       at org.tensorflow.contrib.android.TensorFlowInferenceInterface.run(TensorFlowInferenceInterface.java:142)
                                                                       at org.tensorflow.demo.TensorFlowObjectDetectionAPIModel.recognizeImage(TensorFlowObjectDetectionAPIModel.java:158)
                                                                       at org.tensorflow.demo.DetectorActivity$3.run(DetectorActivity.java:340)
                                                                       at android.os.Handler.handleCallback(Handler.java:742)
                                                                       at android.os.Handler.dispatchMessage(Handler.java:95)
                                                                       at android.os.Looper.loop(Looper.java:154)
                                                                       at android.os.HandlerThread.run(HandlerThread.java:61)
08-25 11:46:13.061 9185-9215/org.tensorflow.demo E/MQSEventManagerDelegate: failed to get MQSService.
08-25 11:46:13.080 9185-9185/org.tensorflow.demo I/RequestQueue: Repeating capture request cancelled.
08-25 11:46:13.194 9185-9327/org.tensorflow.demo E/BufferQueueProducer: [SurfaceTexture-1-9185-1] cancelBuffer: BufferQueue has been abandoned
&lt;/denchmark-code&gt;

	</description>
	<comments>
		<comment id='1' author='rsd-raul' date='2017-08-25T17:26:58Z'>
		I suspect you're missing the  addition from &lt;denchmark-link:https://github.com/tensorflow/tensorflow/commit/53aabd5cb0ffcc1fd33cbd00eb468dd8d8353df2&gt;53aabd5&lt;/denchmark-link&gt;
. Are you using an older version of the TF native libs?
		</comment>
		<comment id='2' author='rsd-raul' date='2017-09-02T18:04:45Z'>
		Current update:
TF version shown as 1.3 in log (Master branch from GitHub on Sep 1 / 2017, head on commit &lt;denchmark-link:https://github.com/tensorflow/tensorflow/commit/a2e1a5e0985d8d2c1ec3a3f246dad214600af21c&gt;a2e1a5e&lt;/denchmark-link&gt;
)
app build at Android Studio 2.3.3 on Linux Ubuntu 16.04
app tested on Meizu M2 Note (Android 5.1, API 22)
With useCamera2API = true TF Detect works with both nativeBuildSystem = 'cmake' and nativeBuildSystem = 'none' (i.e. with Java and native implementation of YUV to RGB transformation: convertYUV420ToARGB8888).
With  TF Detect doesn't work with either  and  (Java implementation of YUV to RGB transformation  used from &lt;denchmark-link:https://github.com/tensorflow/tensorflow/pull/12622&gt;#12622&lt;/denchmark-link&gt;
 ).
Pressing the volume keys on a device doesn't toggle debug visualizations on/off.
App also doesn't produce any additional errors in the log:
&lt;denchmark-link:https://github.com/tensorflow/tensorflow/files/1272377/TFDetect_log_cmake_CameraAPI2_false.txt&gt;TFDetect_log_cmake_CameraAPI2_false.txt&lt;/denchmark-link&gt;

For comparison log of working TF Detect with  and :
&lt;denchmark-link:https://github.com/tensorflow/tensorflow/files/1272382/TFDetect_log_cmake_CameraAPI2_true.txt&gt;TFDetect_log_cmake_CameraAPI2_true.txt&lt;/denchmark-link&gt;

		</comment>
		<comment id='3' author='rsd-raul' date='2017-09-04T10:17:16Z'>
		&lt;denchmark-link:https://github.com/andrewharp&gt;@andrewharp&lt;/denchmark-link&gt;
 Just checked with 1.3.0 and same as &lt;denchmark-link:https://github.com/ArtsiomCh&gt;@ArtsiomCh&lt;/denchmark-link&gt;
, with the camera fix TF Detect works with , without it still throws an  for the method .
		</comment>
		<comment id='4' author='rsd-raul' date='2017-09-21T22:03:59Z'>
		I believe the UnsatisfiedLinkError should be fixed by &lt;denchmark-link:https://github.com/ArtsiomCh&gt;@ArtsiomCh&lt;/denchmark-link&gt;
 in &lt;denchmark-link:https://github.com/tensorflow/tensorflow/commit/0e69f536c13d6db7e8276ee7ffe249a82d89f246&gt;0e69f53&lt;/denchmark-link&gt;
.
I've also submitted an internal commit that should be public soon which will enable the object tracker when using camera 1 API.
		</comment>
		<comment id='5' author='rsd-raul' date='2017-10-11T14:36:23Z'>
		I have a similar issue with the TF Detection using Samsung Galaxy S5 with android version 6,  built from Android Studio in windows 10.  After the APK was installed to the Galaxy S5, the camera preview showed for a couple seconds and then the app stopped.  the  error message is:
E/BufferQueueProducer: [SurfaceTexture-1-8262-1] dequeueBuffer: min undequeued buffer count (2) exceeded (dequeued=5 undequeued=1)
below is the logcat generated when running it:
ote: v2
10-11 09:12:02.241 8262-8262/? I/libpersona: KNOX_SDCARD checking this for 10262
10-11 09:12:02.241 8262-8262/? I/libpersona: KNOX_SDCARD not a persona
10-11 09:12:02.251 8262-8262/? I/SELinux: Function: selinux_compare_spd_ram, index[1], SPD-policy is existed. and_ver=SEPF_SECMOBILE_6.0.1 ver=11
10-11 09:12:02.251 8262-8262/? W/SELinux: Function: selinux_compare_spd_ram, index[1], priority [2], priority version is VE=SEPF_SECMOBILE_6.0.1_0029
10-11 09:12:02.251 8262-8262/? E/Zygote: accessInfo : 0
10-11 09:12:02.251 8262-8262/? W/SELinux: SELinux: seapp_context_lookup: seinfo=default, level=s0:c512,c768, pkgname=org.tensorflow.demo
10-11 09:12:02.251 8262-8262/? I/art: Late-enabling -Xcheck:jni
10-11 09:12:02.291 8262-8262/org.tensorflow.demo D/TimaKeyStoreProvider: TimaSignature is unavailable
10-11 09:12:02.291 8262-8262/org.tensorflow.demo D/ActivityThread: Added TimaKeyStore provider
10-11 09:12:02.311 8262-8262/org.tensorflow.demo W/ResourcesManager: getTopLevelResources: /data/app/org.tensorflow.demo-1/base.apk / 1.0 running in org.tensorflow.demo rsrc of package null
10-11 09:12:02.401 8262-8262/org.tensorflow.demo W/art: Failed execv(/system/bin/dex2oat --runtime-arg -classpath --runtime-arg  --debuggable --instruction-set=arm --instruction-set-features=smp,div,atomic_ldrd_strd --runtime-arg -Xrelocate --boot-image=/system/framework/boot.art --runtime-arg -Xms64m --runtime-arg -Xmx512m --instruction-set-variant=krait --instruction-set-features=default --dex-file=/data/app/org.tensorflow.demo-1/split_lib_dependencies_apk.apk --oat-file=/data/dalvik-cache/arm/data@app@org.tensorflow.demo-1@&lt;denchmark-link:mailto:split_lib_dependencies_apk.apk@classes.dex&gt;split_lib_dependencies_apk.apk@classes.dex&lt;/denchmark-link&gt;
) because non-0 exit status
10-11 09:12:02.461 8262-8262/org.tensorflow.demo W/art: Failed execv(/system/bin/dex2oat --runtime-arg -classpath --runtime-arg  --debuggable --instruction-set=arm --instruction-set-features=smp,div,atomic_ldrd_strd --runtime-arg -Xrelocate --boot-image=/system/framework/boot.art --runtime-arg -Xms64m --runtime-arg -Xmx512m --instruction-set-variant=krait --instruction-set-features=default --dex-file=/data/app/org.tensorflow.demo-1/split_lib_slice_0_apk.apk --oat-file=/data/dalvik-cache/arm/data@app@org.tensorflow.demo-1@&lt;denchmark-link:mailto:split_lib_slice_0_apk.apk@classes.dex&gt;split_lib_slice_0_apk.apk@classes.dex&lt;/denchmark-link&gt;
) because non-0 exit status
10-11 09:12:02.521 8262-8262/org.tensorflow.demo W/art: Failed execv(/system/bin/dex2oat --runtime-arg -classpath --runtime-arg  --debuggable --instruction-set=arm --instruction-set-features=smp,div,atomic_ldrd_strd --runtime-arg -Xrelocate --boot-image=/system/framework/boot.art --runtime-arg -Xms64m --runtime-arg -Xmx512m --instruction-set-variant=krait --instruction-set-features=default --dex-file=/data/app/org.tensorflow.demo-1/split_lib_slice_1_apk.apk --oat-file=/data/dalvik-cache/arm/data@app@org.tensorflow.demo-1@&lt;denchmark-link:mailto:split_lib_slice_1_apk.apk@classes.dex&gt;split_lib_slice_1_apk.apk@classes.dex&lt;/denchmark-link&gt;
) because non-0 exit status
10-11 09:12:02.581 8262-8262/org.tensorflow.demo W/art: Failed execv(/system/bin/dex2oat --runtime-arg -classpath --runtime-arg  --debuggable --instruction-set=arm --instruction-set-features=smp,div,atomic_ldrd_strd --runtime-arg -Xrelocate --boot-image=/system/framework/boot.art --runtime-arg -Xms64m --runtime-arg -Xmx512m --instruction-set-variant=krait --instruction-set-features=default --dex-file=/data/app/org.tensorflow.demo-1/split_lib_slice_2_apk.apk --oat-file=/data/dalvik-cache/arm/data@app@org.tensorflow.demo-1@&lt;denchmark-link:mailto:split_lib_slice_2_apk.apk@classes.dex&gt;split_lib_slice_2_apk.apk@classes.dex&lt;/denchmark-link&gt;
) because non-0 exit status
10-11 09:12:02.641 8262-8262/org.tensorflow.demo W/art: Failed execv(/system/bin/dex2oat --runtime-arg -classpath --runtime-arg  --debuggable --instruction-set=arm --instruction-set-features=smp,div,atomic_ldrd_strd --runtime-arg -Xrelocate --boot-image=/system/framework/boot.art --runtime-arg -Xms64m --runtime-arg -Xmx512m --instruction-set-variant=krait --instruction-set-features=default --dex-file=/data/app/org.tensorflow.demo-1/split_lib_slice_3_apk.apk --oat-file=/data/dalvik-cache/arm/data@app@org.tensorflow.demo-1@&lt;denchmark-link:mailto:split_lib_slice_3_apk.apk@classes.dex&gt;split_lib_slice_3_apk.apk@classes.dex&lt;/denchmark-link&gt;
) because non-0 exit status
10-11 09:12:02.691 8262-8262/org.tensorflow.demo W/art: Failed execv(/system/bin/dex2oat --runtime-arg -classpath --runtime-arg  --debuggable --instruction-set=arm --instruction-set-features=smp,div,atomic_ldrd_strd --runtime-arg -Xrelocate --boot-image=/system/framework/boot.art --runtime-arg -Xms64m --runtime-arg -Xmx512m --instruction-set-variant=krait --instruction-set-features=default --dex-file=/data/app/org.tensorflow.demo-1/split_lib_slice_4_apk.apk --oat-file=/data/dalvik-cache/arm/data@app@org.tensorflow.demo-1@&lt;denchmark-link:mailto:split_lib_slice_4_apk.apk@classes.dex&gt;split_lib_slice_4_apk.apk@classes.dex&lt;/denchmark-link&gt;
) because non-0 exit status
10-11 09:12:02.751 8262-8262/org.tensorflow.demo W/art: Failed execv(/system/bin/dex2oat --runtime-arg -classpath --runtime-arg  --debuggable --instruction-set=arm --instruction-set-features=smp,div,atomic_ldrd_strd --runtime-arg -Xrelocate --boot-image=/system/framework/boot.art --runtime-arg -Xms64m --runtime-arg -Xmx512m --instruction-set-variant=krait --instruction-set-features=default --dex-file=/data/app/org.tensorflow.demo-1/split_lib_slice_5_apk.apk --oat-file=/data/dalvik-cache/arm/data@app@org.tensorflow.demo-1@&lt;denchmark-link:mailto:split_lib_slice_5_apk.apk@classes.dex&gt;split_lib_slice_5_apk.apk@classes.dex&lt;/denchmark-link&gt;
) because non-0 exit status
10-11 09:12:02.801 8262-8262/org.tensorflow.demo W/art: Failed execv(/system/bin/dex2oat --runtime-arg -classpath --runtime-arg  --debuggable --instruction-set=arm --instruction-set-features=smp,div,atomic_ldrd_strd --runtime-arg -Xrelocate --boot-image=/system/framework/boot.art --runtime-arg -Xms64m --runtime-arg -Xmx512m --instruction-set-variant=krait --instruction-set-features=default --dex-file=/data/app/org.tensorflow.demo-1/split_lib_slice_6_apk.apk --oat-file=/data/dalvik-cache/arm/data@app@org.tensorflow.demo-1@&lt;denchmark-link:mailto:split_lib_slice_6_apk.apk@classes.dex&gt;split_lib_slice_6_apk.apk@classes.dex&lt;/denchmark-link&gt;
) because non-0 exit status
10-11 09:12:02.861 8262-8262/org.tensorflow.demo W/art: Failed execv(/system/bin/dex2oat --runtime-arg -classpath --runtime-arg  --debuggable --instruction-set=arm --instruction-set-features=smp,div,atomic_ldrd_strd --runtime-arg -Xrelocate --boot-image=/system/framework/boot.art --runtime-arg -Xms64m --runtime-arg -Xmx512m --instruction-set-variant=krait --instruction-set-features=default --dex-file=/data/app/org.tensorflow.demo-1/split_lib_slice_7_apk.apk --oat-file=/data/dalvik-cache/arm/data@app@org.tensorflow.demo-1@&lt;denchmark-link:mailto:split_lib_slice_7_apk.apk@classes.dex&gt;split_lib_slice_7_apk.apk@classes.dex&lt;/denchmark-link&gt;
) because non-0 exit status
10-11 09:12:02.911 8262-8262/org.tensorflow.demo W/art: Failed execv(/system/bin/dex2oat --runtime-arg -classpath --runtime-arg  --debuggable --instruction-set=arm --instruction-set-features=smp,div,atomic_ldrd_strd --runtime-arg -Xrelocate --boot-image=/system/framework/boot.art --runtime-arg -Xms64m --runtime-arg -Xmx512m --instruction-set-variant=krait --instruction-set-features=default --dex-file=/data/app/org.tensorflow.demo-1/split_lib_slice_8_apk.apk --oat-file=/data/dalvik-cache/arm/data@app@org.tensorflow.demo-1@&lt;denchmark-link:mailto:split_lib_slice_8_apk.apk@classes.dex&gt;split_lib_slice_8_apk.apk@classes.dex&lt;/denchmark-link&gt;
) because non-0 exit status
10-11 09:12:02.981 8262-8262/org.tensorflow.demo W/art: Failed execv(/system/bin/dex2oat --runtime-arg -classpath --runtime-arg  --debuggable --instruction-set=arm --instruction-set-features=smp,div,atomic_ldrd_strd --runtime-arg -Xrelocate --boot-image=/system/framework/boot.art --runtime-arg -Xms64m --runtime-arg -Xmx512m --instruction-set-variant=krait --instruction-set-features=default --dex-file=/data/app/org.tensorflow.demo-1/split_lib_slice_9_apk.apk --oat-file=/data/dalvik-cache/arm/data@app@org.tensorflow.demo-1@&lt;denchmark-link:mailto:split_lib_slice_9_apk.apk@classes.dex&gt;split_lib_slice_9_apk.apk@classes.dex&lt;/denchmark-link&gt;
) because non-0 exit status
10-11 09:12:02.981 8262-8262/org.tensorflow.demo I/InstantRun: starting instant run server: is main process
10-11 09:12:03.021 8262-8262/org.tensorflow.demo W/ResourcesManager: getTopLevelResources: /data/app/org.tensorflow.demo-1/base.apk / 1.0 running in org.tensorflow.demo rsrc of package null
10-11 09:12:03.031 8262-8262/org.tensorflow.demo W/ResourcesManager: getTopLevelResources: /data/app/org.tensorflow.demo-1/base.apk / 1.0 running in org.tensorflow.demo rsrc of package null
10-11 09:12:03.031 8262-8262/org.tensorflow.demo D/tensorflow: CameraActivity: onCreate org.tensorflow.demo.DetectorActivity@86593f0
10-11 09:12:03.051 8262-8262/org.tensorflow.demo I/CameraManagerGlobal: Connecting to camera service
10-11 09:12:03.061 8262-8262/org.tensorflow.demo I/tensorflow: CameraActivity: Camera API lv2?: true
10-11 09:12:03.111 8262-8262/org.tensorflow.demo D/tensorflow: CameraActivity: onStart org.tensorflow.demo.DetectorActivity@86593f0
10-11 09:12:03.111 8262-8262/org.tensorflow.demo D/tensorflow: CameraActivity: onResume org.tensorflow.demo.DetectorActivity@86593f0
10-11 09:12:03.121 8262-8262/org.tensorflow.demo D/SecWifiDisplayUtil: Metadata value : none
10-11 09:12:03.121 8262-8262/org.tensorflow.demo D/ViewRootImpl: &lt;denchmark-link:https://github.com/tensorflow/tensorflow/issues/1&gt;#1&lt;/denchmark-link&gt;
 mView = com.android.internal.policy.PhoneWindow$DecorView{bad45dd I.E...... R.....ID 0,0-0,0}
10-11 09:12:03.131 8262-8325/org.tensorflow.demo D/OpenGLRenderer: Use EGL_SWAP_BEHAVIOR_PRESERVED: true
10-11 09:12:03.161 8262-8325/org.tensorflow.demo I/Adreno-EGL: &lt;qeglDrvAPI_eglInitialize:379&gt;: EGL 1.4 QUALCOMM build:  (Ia10634f51b)
OpenGL ES Shader Compiler Version: E031.29.00.00
Build Date: 01/28/16 Thu
Local Branch: ss
Remote Branch:
Local Patches:
Reconstruct Branch:
10-11 09:12:03.161 8262-8325/org.tensorflow.demo D/libEGL: eglInitialize EGLDisplay = 0xadf907c4
10-11 09:12:03.161 8262-8325/org.tensorflow.demo I/OpenGLRenderer: Initialized EGL, version 1.4
10-11 09:12:03.191 8262-8262/org.tensorflow.demo D/ViewRootImpl: MSG_RESIZED_REPORT: ci=Rect(0, 0 - 0, 0) vi=Rect(0, 0 - 0, 0) or=1
10-11 09:12:03.211 8262-8262/org.tensorflow.demo I/tensorflow: CameraConnectionFragment: Desired size: 640x480, min size: 480x480
10-11 09:12:03.211 8262-8262/org.tensorflow.demo I/tensorflow: CameraConnectionFragment: Valid preview sizes: [1920x1080, 1440x1080, 1280x720, 1056x864, 960x720, 800x480, 720x480, 640x480]
10-11 09:12:03.211 8262-8262/org.tensorflow.demo I/tensorflow: CameraConnectionFragment: Rejected preview sizes: [352x288, 320x240, 176x144]
10-11 09:12:03.211 8262-8262/org.tensorflow.demo I/tensorflow: CameraConnectionFragment: Exact size match found.
10-11 09:12:03.221 8262-8262/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: ???
10-11 09:12:03.221 8262-8262/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: person
10-11 09:12:03.221 8262-8262/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: bicycle
10-11 09:12:03.231 8262-8262/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: car
10-11 09:12:03.231 8262-8262/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: motorcycle
10-11 09:12:03.231 8262-8262/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: airplane
10-11 09:12:03.231 8262-8262/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: bus
10-11 09:12:03.231 8262-8262/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: train
10-11 09:12:03.231 8262-8262/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: truck
10-11 09:12:03.231 8262-8262/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: boat
10-11 09:12:03.231 8262-8262/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: traffic light
10-11 09:12:03.231 8262-8262/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: fire hydrant
10-11 09:12:03.231 8262-8262/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: ???
10-11 09:12:03.231 8262-8262/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: stop sign
10-11 09:12:03.231 8262-8262/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: parking meter
10-11 09:12:03.231 8262-8262/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: bench
10-11 09:12:03.231 8262-8262/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: bird
10-11 09:12:03.231 8262-8262/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: cat
10-11 09:12:03.231 8262-8262/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: dog
10-11 09:12:03.231 8262-8262/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: horse
10-11 09:12:03.231 8262-8262/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: sheep
10-11 09:12:03.231 8262-8262/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: cow
10-11 09:12:03.231 8262-8262/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: elephant
10-11 09:12:03.231 8262-8262/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: bear
10-11 09:12:03.231 8262-8262/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: zebra
10-11 09:12:03.231 8262-8262/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: giraffe
10-11 09:12:03.231 8262-8262/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: ???
10-11 09:12:03.231 8262-8262/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: backpack
10-11 09:12:03.231 8262-8262/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: umbrella
10-11 09:12:03.231 8262-8262/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: ???
10-11 09:12:03.231 8262-8262/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: ???
10-11 09:12:03.231 8262-8262/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: handbag
10-11 09:12:03.231 8262-8262/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: tie
10-11 09:12:03.231 8262-8262/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: suitcase
10-11 09:12:03.231 8262-8262/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: frisbee
10-11 09:12:03.231 8262-8262/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: skis
10-11 09:12:03.231 8262-8262/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: snowboard
10-11 09:12:03.231 8262-8262/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: sports ball
10-11 09:12:03.231 8262-8262/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: kite
10-11 09:12:03.231 8262-8262/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: baseball bat
10-11 09:12:03.231 8262-8262/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: baseball glove
10-11 09:12:03.231 8262-8262/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: skateboard
10-11 09:12:03.231 8262-8262/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: surfboard
10-11 09:12:03.231 8262-8262/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: tennis racket
10-11 09:12:03.231 8262-8262/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: bottle
10-11 09:12:03.231 8262-8262/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: ???
10-11 09:12:03.231 8262-8262/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: wine glass
10-11 09:12:03.231 8262-8262/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: cup
10-11 09:12:03.231 8262-8262/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: fork
10-11 09:12:03.231 8262-8262/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: knife
10-11 09:12:03.231 8262-8262/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: spoon
10-11 09:12:03.231 8262-8262/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: bowl
10-11 09:12:03.231 8262-8262/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: banana
10-11 09:12:03.231 8262-8262/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: apple
10-11 09:12:03.231 8262-8262/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: sandwich
10-11 09:12:03.231 8262-8262/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: orange
10-11 09:12:03.231 8262-8262/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: broccoli
10-11 09:12:03.231 8262-8262/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: carrot
10-11 09:12:03.231 8262-8262/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: hot dog
10-11 09:12:03.231 8262-8262/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: pizza
10-11 09:12:03.231 8262-8262/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: donut
10-11 09:12:03.231 8262-8262/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: cake
10-11 09:12:03.231 8262-8262/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: chair
10-11 09:12:03.231 8262-8262/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: couch
10-11 09:12:03.231 8262-8262/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: potted plant
10-11 09:12:03.231 8262-8262/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: bed
10-11 09:12:03.231 8262-8262/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: ???
10-11 09:12:03.231 8262-8262/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: dining table
10-11 09:12:03.231 8262-8262/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: ???
10-11 09:12:03.231 8262-8262/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: ???
10-11 09:12:03.231 8262-8262/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: toilet
10-11 09:12:03.231 8262-8262/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: ???
10-11 09:12:03.231 8262-8262/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: tv
10-11 09:12:03.241 8262-8262/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: laptop
10-11 09:12:03.241 8262-8262/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: mouse
10-11 09:12:03.241 8262-8262/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: remote
10-11 09:12:03.241 8262-8262/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: keyboard
10-11 09:12:03.241 8262-8262/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: cell phone
10-11 09:12:03.241 8262-8262/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: microwave
10-11 09:12:03.241 8262-8262/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: oven
10-11 09:12:03.241 8262-8262/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: toaster
10-11 09:12:03.241 8262-8262/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: sink
10-11 09:12:03.241 8262-8262/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: refrigerator
10-11 09:12:03.241 8262-8262/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: ???
10-11 09:12:03.241 8262-8262/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: book
10-11 09:12:03.241 8262-8262/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: clock
10-11 09:12:03.241 8262-8262/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: vase
10-11 09:12:03.241 8262-8262/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: scissors
10-11 09:12:03.241 8262-8262/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: teddy bear
10-11 09:12:03.241 8262-8262/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: hair drier
10-11 09:12:03.241 8262-8262/org.tensorflow.demo W/tensorflow: TensorFlowObjectDetectionAPIModel: toothbrush
10-11 09:12:03.241 8262-8262/org.tensorflow.demo I/TensorFlowInferenceInterface: Checking to see if TensorFlow native methods are already loaded
10-11 09:12:03.241 8262-8262/org.tensorflow.demo E/art: No implementation found for long org.tensorflow.contrib.android.RunStats.allocate() (tried Java_org_tensorflow_contrib_android_RunStats_allocate and Java_org_tensorflow_contrib_android_RunStats_allocate__)
10-11 09:12:03.241 8262-8262/org.tensorflow.demo I/TensorFlowInferenceInterface: TensorFlow native methods not found, attempting to load via tensorflow_inference
10-11 09:12:03.311 8262-8262/org.tensorflow.demo I/TensorFlowInferenceInterface: Successfully loaded TensorFlow native methods (RunStats error may be ignored)
10-11 09:12:05.351 8262-8262/org.tensorflow.demo I/TensorFlowInferenceInterface: Model load took 1996ms, TensorFlow version: 1.3.0-rc2
10-11 09:12:05.351 8262-8262/org.tensorflow.demo I/TensorFlowInferenceInterface: Successfully loaded model from 'file:///android_asset/ssd_mobilenet_v1_android_export.pb'
10-11 09:12:05.361 8262-8262/org.tensorflow.demo I/tensorflow: DetectorActivity: Sensor orientation: 90, Screen orientation: 0
10-11 09:12:05.361 8262-8262/org.tensorflow.demo I/tensorflow: DetectorActivity: Initializing at size 640x480
10-11 09:12:05.391 8262-8262/org.tensorflow.demo I/CameraManager: Using legacy camera HAL.
10-11 09:12:05.651 8262-8262/org.tensorflow.demo W/DisplayListCanvas: DisplayListCanvas is started on unbinded RenderNode (without mOwningView)
10-11 09:12:05.651 8262-8324/org.tensorflow.demo I/tensorflow: CameraConnectionFragment: Opening camera preview: 640x480
10-11 09:12:05.661 8262-8324/org.tensorflow.demo I/CameraDeviceState: Legacy camera service transitioning to state CONFIGURING
10-11 09:12:05.661 8262-8399/org.tensorflow.demo I/RequestThread-0: Configure outputs: 2 surfaces configured.
10-11 09:12:05.671 8262-8399/org.tensorflow.demo D/Camera: app passed NULL surface
10-11 09:12:05.681 8262-8401/org.tensorflow.demo D/libEGL: eglInitialize EGLDisplay = 0x9dcfc3f4
10-11 09:12:05.691 8262-8262/org.tensorflow.demo I/Choreographer: Skipped 148 frames!  The application may be doing too much work on its main thread.
10-11 09:12:05.701 8262-8262/org.tensorflow.demo I/Timeline: Timeline: Activity_idle id: android.os.BinderProxy@9ab15b4 time:19994310
10-11 09:12:05.751 8262-8324/org.tensorflow.demo I/CameraDeviceState: Legacy camera service transitioning to state IDLE
10-11 09:12:05.751 8262-8324/org.tensorflow.demo I/RequestQueue: Repeating capture request set.
10-11 09:12:05.751 8262-8399/org.tensorflow.demo W/LegacyRequestMapper: convertRequestMetadata - control.awbRegions setting is not supported, ignoring value
10-11 09:12:05.751 8262-8399/org.tensorflow.demo W/LegacyRequestMapper: Only received metering rectangles with weight 0.
10-11 09:12:05.751 8262-8399/org.tensorflow.demo W/LegacyRequestMapper: Only received metering rectangles with weight 0.
10-11 09:12:06.441 8262-8401/org.tensorflow.demo D/libEGL: eglInitialize EGLDisplay = 0x9dcfc2fc
10-11 09:12:06.441 8262-8401/org.tensorflow.demo I/CameraDeviceState: Legacy camera service transitioning to state CAPTURING
10-11 09:12:06.471 8262-8325/org.tensorflow.demo D/libEGL: eglInitialize EGLDisplay = 0xadf9062c
10-11 09:12:06.481 8262-8324/org.tensorflow.demo D/tensorflow: CameraActivity: Initializing buffer 0 at size 307200
10-11 09:12:06.481 8262-8324/org.tensorflow.demo D/tensorflow: CameraActivity: Initializing buffer 1 at size 153599
10-11 09:12:06.481 8262-8324/org.tensorflow.demo D/tensorflow: CameraActivity: Initializing buffer 2 at size 153599
10-11 09:12:06.501 8262-8324/org.tensorflow.demo I/tensorflow: MultiBoxTracker: Initializing ObjectTracker: 640x480
10-11 09:12:06.501 8262-8324/org.tensorflow.demo I/native: Initializing object tracker. 320x240 @0xae1b8cdc
10-11 09:12:06.501 8262-8294/org.tensorflow.demo E/BufferQueueProducer: [SurfaceTexture-1-8262-1] dequeueBuffer: min undequeued buffer count (2) exceeded (dequeued=5 undequeued=1)
10-11 09:12:06.501 8262-8401/org.tensorflow.demo D/libEGL: eglInitialize EGLDisplay = 0x9dcfc2fc
10-11 09:12:06.501 8262-8324/org.tensorflow.demo I/native: Initialized!
10-11 09:12:06.511 8262-8324/org.tensorflow.demo I/tensorflow: DetectorActivity: Preparing image 1 for detection in bg thread.
10-11 09:12:06.521 8262-8325/org.tensorflow.demo D/libEGL: eglInitialize EGLDisplay = 0xadf9062c
10-11 09:12:06.561 8262-8323/org.tensorflow.demo I/tensorflow: DetectorActivity: Running detection on image 1
10-11 09:12:06.571 8262-8401/org.tensorflow.demo D/libEGL: eglInitialize EGLDisplay = 0x9dcfc2fc
10-11 09:12:06.641 8262-8401/org.tensorflow.demo D/libEGL: eglInitialize EGLDisplay = 0x9dcfc2fc
10-11 09:12:07.281 8262-8323/org.tensorflow.demo E/TensorFlowInferenceInterface: Failed to run TensorFlow inference with inputs:[image_tensor], outputs:[detection_boxes, detection_scores, detection_classes, num_detections]
10-11 09:12:07.281 8262-8323/org.tensorflow.demo E/AndroidRuntime: FATAL EXCEPTION: inference
Process: org.tensorflow.demo, PID: 8262
java.lang.IllegalArgumentException: No OpKernel was registered to support Op 'Switch' with these attrs.  Registered devices: [CPU], Registered kernels:
device='GPU'; T in [DT_STRING]
device='GPU'; T in [DT_BOOL]
device='GPU'; T in [DT_INT32]
device='GPU'; T in [DT_FLOAT]
device='CPU'; T in [DT_FLOAT]
device='CPU'; T in [DT_INT32]
&lt;denchmark-code&gt;                                                               	 [[Node: Postprocessor/BatchMultiClassNonMaxSuppression/map/while/PadOrClipBoxList/cond/Switch = Switch[T=DT_BOOL](Postprocessor/BatchMultiClassNonMaxSuppression/map/while/PadOrClipBoxList/Greater, Postprocessor/BatchMultiClassNonMaxSuppression/map/while/PadOrClipBoxList/Greater)]]
                                                                   at org.tensorflow.Session.run(Native Method)
                                                                   at org.tensorflow.Session.access$100(Session.java:48)
                                                                   at org.tensorflow.Session$Runner.runHelper(Session.java:295)
                                                                   at org.tensorflow.Session$Runner.run(Session.java:245)
                                                                   at org.tensorflow.contrib.android.TensorFlowInferenceInterface.run(TensorFlowInferenceInterface.java:143)
                                                                   at org.tensorflow.demo.TensorFlowObjectDetectionAPIModel.recognizeImage(TensorFlowObjectDetectionAPIModel.java:158)
                                                                   at org.tensorflow.demo.DetectorActivity$3.run(DetectorActivity.java:293)
                                                                   at android.os.Handler.handleCallback(Handler.java:739)
                                                                   at android.os.Handler.dispatchMessage(Handler.java:95)
                                                                   at android.os.Looper.loop(Looper.java:158)
                                                                   at android.os.HandlerThread.run(HandlerThread.java:61)
&lt;/denchmark-code&gt;

10-11 09:12:07.341 8262-8262/org.tensorflow.demo I/RequestQueue: Repeating capture request cancelled.
10-11 09:12:07.401 8262-8401/org.tensorflow.demo D/libEGL: eglTerminate EGLDisplay = 0x9dcfc48c
10-11 09:12:07.401 8262-8401/org.tensorflow.demo D/libEGL: eglTerminate EGLDisplay = 0x9dcfc414
10-11 09:12:07.401 8262-8401/org.tensorflow.demo D/libEGL: eglTerminate EGLDisplay = 0x9dcfc414
10-11 09:12:07.401 8262-8401/org.tensorflow.demo D/libEGL: eglTerminate EGLDisplay = 0x9dcfc414
10-11 09:12:07.401 8262-8401/org.tensorflow.demo D/libEGL: eglTerminate EGLDisplay = 0x9dcfc414
10-11 09:12:07.441 8262-8304/org.tensorflow.demo E/BufferQueueProducer: [SurfaceTexture-1-8262-1] dequeueBuffer: BufferQueue has been abandoned
10-11 09:12:07.441 8262-8294/org.tensorflow.demo E/BufferQueueProducer: [SurfaceTexture-1-8262-1] queueBuffer: BufferQueue has been abandoned
10-11 09:12:07.701 8262-8291/org.tensorflow.demo E/BufferQueueProducer: [SurfaceTexture-1-8262-1] cancelBuffer: BufferQueue has been abandoned
10-11 09:12:07.701 8262-8274/org.tensorflow.demo E/BufferQueueProducer: [SurfaceTexture-1-8262-1] cancelBuffer: BufferQueue has been abandoned
10-11 09:12:07.701 8262-8273/org.tensorflow.demo E/BufferQueueProducer: [SurfaceTexture-1-8262-1] cancelBuffer: BufferQueue has been abandoned
10-11 09:12:07.701 8262-8297/org.tensorflow.demo E/BufferQueueProducer: [SurfaceTexture-1-8262-1] cancelBuffer: BufferQueue has been abandoned
10-11 09:12:07.931 8262-8262/org.tensorflow.demo D/tensorflow: CameraActivity: onPause org.tensorflow.demo.DetectorActivity@86593f0
10-11 09:12:51.501 8262-8268/org.tensorflow.demo W/art: Suspending all threads took: 50.114ms
10-11 09:13:26.041 8262-8268/org.tensorflow.demo W/art: Suspending all threads took: 6.732ms
10-11 09:17:07.401 8262-8323/org.tensorflow.demo I/Process: Sending signal. PID: 8262 SIG: 9
Since I do not have other devices to test it, please help to see if this is a Samsung Galaxy S5 specific issue or a general issue.  Thank you very much!
		</comment>
		<comment id='6' author='rsd-raul' date='2017-10-11T15:36:02Z'>
		&lt;denchmark-link:https://github.com/w9wang2&gt;@w9wang2&lt;/denchmark-link&gt;
 Do you have your build.gradle set up to grab an explicit version of the TF library? This should be fixed in &lt;denchmark-link:https://bintray.com/google/tensorflow/tensorflow/1.3.1-alpha&gt;1.3.1-alpha&lt;/denchmark-link&gt;
. It looks like you're grabbing a 1.3.0 release, which did not build in the necessary bool support.
		</comment>
		<comment id='7' author='rsd-raul' date='2017-10-11T15:59:59Z'>
		the build.gradle I used is like below, I should change it to compile 'org.tensorflow:tensorflow-android:1.3.1-alpha', right?compile 'org.tensorflow:tensorflow-android:+'
Thanks.      From: Andrew Harp &lt;notifications@github.com&gt;
 To: tensorflow/tensorflow &lt;tensorflow@noreply.github.com&gt;
Cc: w9wang2 &lt;w9wang2@yahoo.com&gt;; Mention &lt;mention@noreply.github.com&gt;
 Sent: Wednesday, October 11, 2017 10:41 AM
 Subject: Re: [tensorflow/tensorflow] Android Demo - Bug - Exception in TF Detect activity (&lt;denchmark-link:https://github.com/tensorflow/tensorflow/issues/12593&gt;#12593&lt;/denchmark-link&gt;
)

&lt;denchmark-link:https://github.com/w9wang2&gt;@w9wang2&lt;/denchmark-link&gt;
 Do you have your build.gradle set up to grab an explicit version of the TF library? This should be fixed in 1.3.1-alpha. It looks like you're grabbing a 1.3.0 release, which did not build in the necessary bool support.—
You are receiving this because you were mentioned.
Reply to this email directly, view it on GitHub, or mute the thread.
		</comment>
		<comment id='8' author='rsd-raul' date='2017-10-11T16:08:36Z'>
		I just tried build.gradle with compile 'org.tensorflow:tensorflow-android:1.3.1-alpha', but it could not find it. How to get this one?
Thanks.

      From: Wensu Wang &lt;w9wang2@yahoo.com&gt;
 To: tensorflow/tensorflow &lt;reply@reply.github.com&gt;; tensorflow/tensorflow &lt;tensorflow@noreply.github.com&gt;
Cc: Mention &lt;mention@noreply.github.com&gt;
 Sent: Wednesday, October 11, 2017 10:59 AM
 Subject: Re: [tensorflow/tensorflow] Android Demo - Bug - Exception in TF Detect activity (&lt;denchmark-link:https://github.com/tensorflow/tensorflow/issues/12593&gt;#12593&lt;/denchmark-link&gt;
)

the build.gradle I used is like below, I should change it to compile 'org.tensorflow:tensorflow-android:1.3.1-alpha', right?compile 'org.tensorflow:tensorflow-android:+'
Thanks.      From: Andrew Harp &lt;notifications@github.com&gt;
 To: tensorflow/tensorflow &lt;tensorflow@noreply.github.com&gt;
Cc: w9wang2 &lt;w9wang2@yahoo.com&gt;; Mention &lt;mention@noreply.github.com&gt;
 Sent: Wednesday, October 11, 2017 10:41 AM
 Subject: Re: [tensorflow/tensorflow] Android Demo - Bug - Exception in TF Detect activity (&lt;denchmark-link:https://github.com/tensorflow/tensorflow/issues/12593&gt;#12593&lt;/denchmark-link&gt;
)

&lt;denchmark-link:https://github.com/w9wang2&gt;@w9wang2&lt;/denchmark-link&gt;
 Do you have your build.gradle set up to grab an explicit version of the TF library? This should be fixed in 1.3.1-alpha. It looks like you're grabbing a 1.3.0 release, which did not build in the necessary bool support.—
You are receiving this because you were mentioned.
Reply to this email directly, view it on GitHub, or mute the thread.
		</comment>
		<comment id='9' author='rsd-raul' date='2017-10-11T16:09:18Z'>
		The '+' should work to find the latest version, if it doesn't then I doubt writing 1.3.1-alpha explicitly will (but you could try).
We may have a temporary problem with resolving the latest archive as we try to consolidate the various TF bintray/jcenter/maven entries, so until that is resolved I'd suggest dropping the AAR into your project manually.
		</comment>
		<comment id='10' author='rsd-raul' date='2017-10-11T16:51:00Z'>
		Could you please advise how to include the AAR manually to the tensorflow detect project in Android studio.
Thanks.

      From: Andrew Harp &lt;notifications@github.com&gt;
 To: tensorflow/tensorflow &lt;tensorflow@noreply.github.com&gt;
Cc: w9wang2 &lt;w9wang2@yahoo.com&gt;; Mention &lt;mention@noreply.github.com&gt;
 Sent: Wednesday, October 11, 2017 11:14 AM
 Subject: Re: [tensorflow/tensorflow] Android Demo - Bug - Exception in TF Detect activity (&lt;denchmark-link:https://github.com/tensorflow/tensorflow/issues/12593&gt;#12593&lt;/denchmark-link&gt;
)

The + should work, if it doesn't then I doubt writing 1.3.1-alpha will (but you could try).We may have a temporary problem with resolving the latest archive as we try to consolidate the TF bintray/jcenter/maven entries, so until that is resolved I'd suggest dropping the AAR into your project manually.—
You are receiving this because you were mentioned.
Reply to this email directly, view it on GitHub, or mute the thread.
		</comment>
		<comment id='11' author='rsd-raul' date='2017-10-11T16:57:20Z'>
		&lt;denchmark-link:https://stackoverflow.com/questions/29826717/how-to-import-a-aar-file-into-android-studio-1-1-0-and-use-it-in-my-code&gt;https://stackoverflow.com/questions/29826717/how-to-import-a-aar-file-into-android-studio-1-1-0-and-use-it-in-my-code&lt;/denchmark-link&gt;

You can find the latest successful nightly build of the TF AAR &lt;denchmark-link:https://ci.tensorflow.org/view/Nightly/job/nightly-android/lastSuccessfulBuild/artifact/out/tensorflow.aar&gt;here&lt;/denchmark-link&gt;
, or download the latest released version from the bintray link above.
		</comment>
		<comment id='12' author='rsd-raul' date='2017-10-11T18:16:31Z'>
		I manually add the AAP file, now the TF Detect works as expected, Thank you very much for your help!

      From: Andrew Harp &lt;notifications@github.com&gt;
 To: tensorflow/tensorflow &lt;tensorflow@noreply.github.com&gt;
Cc: w9wang2 &lt;w9wang2@yahoo.com&gt;; Mention &lt;mention@noreply.github.com&gt;
 Sent: Wednesday, October 11, 2017 12:01 PM
 Subject: Re: [tensorflow/tensorflow] Android Demo - Bug - Exception in TF Detect activity (&lt;denchmark-link:https://github.com/tensorflow/tensorflow/issues/12593&gt;#12593&lt;/denchmark-link&gt;
)

&lt;denchmark-link:https://stackoverflow.com/questions/29826717/how-to-import-a-aar-file-into-android-studio-1-1-0-and-use-it-in-my-codeYou&gt;https://stackoverflow.com/questions/29826717/how-to-import-a-aar-file-into-android-studio-1-1-0-and-use-it-in-my-codeYou&lt;/denchmark-link&gt;
 can find the latest successful nightly build of the TF AAR here, or download the latest released version from the bintray link above.—
You are receiving this because you were mentioned.
Reply to this email directly, view it on GitHub, or mute the thread.
		</comment>
		<comment id='13' author='rsd-raul' date='2017-10-11T19:39:05Z'>
		Hi, Could you please let me know how many objects can be detected in the TF Detect demo app, I found the maximum is 3, is it correct?
Thanks.

      From: Wensu Wang &lt;w9wang2@yahoo.com&gt;
 To: tensorflow/tensorflow &lt;reply@reply.github.com&gt;; tensorflow/tensorflow &lt;tensorflow@noreply.github.com&gt;
Cc: Mention &lt;mention@noreply.github.com&gt;
 Sent: Wednesday, October 11, 2017 1:16 PM
 Subject: Re: [tensorflow/tensorflow] Android Demo - Bug - Exception in TF Detect activity (&lt;denchmark-link:https://github.com/tensorflow/tensorflow/issues/12593&gt;#12593&lt;/denchmark-link&gt;
)

I manually add the AAP file, now the TF Detect works as expected, Thank you very much for your help!

      From: Andrew Harp &lt;notifications@github.com&gt;
 To: tensorflow/tensorflow &lt;tensorflow@noreply.github.com&gt;
Cc: w9wang2 &lt;w9wang2@yahoo.com&gt;; Mention &lt;mention@noreply.github.com&gt;
 Sent: Wednesday, October 11, 2017 12:01 PM
 Subject: Re: [tensorflow/tensorflow] Android Demo - Bug - Exception in TF Detect activity (&lt;denchmark-link:https://github.com/tensorflow/tensorflow/issues/12593&gt;#12593&lt;/denchmark-link&gt;
)

&lt;denchmark-link:https://stackoverflow.com/questions/29826717/how-to-import-a-aar-file-into-android-studio-1-1-0-and-use-it-in-my-codeYou&gt;https://stackoverflow.com/questions/29826717/how-to-import-a-aar-file-into-android-studio-1-1-0-and-use-it-in-my-codeYou&lt;/denchmark-link&gt;
 can find the latest successful nightly build of the TF AAR here, or download the latest released version from the bintray link above.—
You are receiving this because you were mentioned.
Reply to this email directly, view it on GitHub, or mute the thread.
		</comment>
		<comment id='14' author='rsd-raul' date='2017-10-11T19:52:14Z'>
		In principle it can track up to 15 at a time, which is the length of the color list in MultiBoxTracker.java. In practice you'll never see that amount at once since there is non-max suppression logic in place to make sure that every box is distinct from the others. However you should be able to get more than 3 at once. Apart from the implicit max of 15, there is no other hard-coded limitation in either the detector itself or the tracker logic to limit the number of boxes.
If you press the volume keys you can see the actual preview frame and detections being made in it. If something there seems strange, please file a new issue with a screenshot and other relevant details.
		</comment>
		<comment id='15' author='rsd-raul' date='2017-10-11T20:53:36Z'>
		Thanks for the info.

      From: Andrew Harp &lt;notifications@github.com&gt;
 To: tensorflow/tensorflow &lt;tensorflow@noreply.github.com&gt;
Cc: w9wang2 &lt;w9wang2@yahoo.com&gt;; Comment &lt;comment@noreply.github.com&gt;
 Sent: Wednesday, October 11, 2017 2:56 PM
 Subject: Re: [tensorflow/tensorflow] Android Demo - Bug - Exception in TF Detect activity (&lt;denchmark-link:https://github.com/tensorflow/tensorflow/issues/12593&gt;#12593&lt;/denchmark-link&gt;
)

In principle it can track up to 15 at a time, which is the length of the color list in MultiBoxTracker.java. In practice you'll never see that amount at once since there is non-max suppression logic in place to make sure that every box is distinct from the others. However you should be able to get more than 3 at once.If you press the volume keys you can see the actual preview frame and detections being made in it. If something there seems strange, please file a new issue with a screenshot and other relevant details.—
You are receiving this because you commented.
Reply to this email directly, view it on GitHub, or mute the thread.
		</comment>
	</comments>
</bug>