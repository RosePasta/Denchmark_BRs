<bug id='38108' author='zerollzeng' open_date='2020-04-01T08:53:56Z' closed_time='2020-04-08T06:19:07Z'>
	<summary>(SOLVE) while convert SavedModel to tflite: ValueError: as_list() is not defined on an unknown TensorShape.</summary>
	<description>
System information

OS Platform and Distribution (e.g., Linux Ubuntu 16.04): ubuntu 16.04
TensorFlow installed from (source or binary): binary
TensorFlow version (or github SHA if from source): 2.1.0

Command used to run the converter or code if youâ€™re using the Python API
If possible, please share a link to Colab/Jupyter/any notebook.
&lt;denchmark-code&gt;tflite_convert --output_file=model.tflite --saved_model_dir . --input_arrays=serving_default_input_1 --input_shapes=1,800,800,3 --output_arrays=StatefulPartitionedCall_1
&lt;/denchmark-code&gt;

The output from the converter invocation
&lt;denchmark-code&gt;2020-04-01 15:38:11.537934: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libnvinfer.so.6
2020-04-01 15:38:11.540538: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libnvinfer_plugin.so.6
2020-04-01 15:38:12.243351: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcuda.so.1
2020-04-01 15:38:12.251378: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:981] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero
2020-04-01 15:38:12.251935: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1555] Found device 0 with properties: 
pciBusID: 0000:01:00.0 name: GeForce RTX 2080 Ti computeCapability: 7.5
coreClock: 1.545GHz coreCount: 68 deviceMemorySize: 10.73GiB deviceMemoryBandwidth: 573.69GiB/s
2020-04-01 15:38:12.252000: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:981] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero
2020-04-01 15:38:12.252535: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1555] Found device 1 with properties: 
pciBusID: 0000:03:00.0 name: GeForce RTX 2080 Ti computeCapability: 7.5
coreClock: 1.545GHz coreCount: 68 deviceMemorySize: 10.73GiB deviceMemoryBandwidth: 573.69GiB/s
2020-04-01 15:38:12.252651: W tensorflow/stream_executor/platform/default/dso_loader.cc:55] Could not load dynamic library 'libcudart.so.10.1'; dlerror: libcudart.so.10.1: cannot open shared object file: No such file or directory
2020-04-01 15:38:12.252693: W tensorflow/stream_executor/platform/default/dso_loader.cc:55] Could not load dynamic library 'libcublas.so.10'; dlerror: libcublas.so.10: cannot open shared object file: No such file or directory
2020-04-01 15:38:12.252731: W tensorflow/stream_executor/platform/default/dso_loader.cc:55] Could not load dynamic library 'libcufft.so.10'; dlerror: libcufft.so.10: cannot open shared object file: No such file or directory
2020-04-01 15:38:12.252767: W tensorflow/stream_executor/platform/default/dso_loader.cc:55] Could not load dynamic library 'libcurand.so.10'; dlerror: libcurand.so.10: cannot open shared object file: No such file or directory
2020-04-01 15:38:12.252806: W tensorflow/stream_executor/platform/default/dso_loader.cc:55] Could not load dynamic library 'libcusolver.so.10'; dlerror: libcusolver.so.10: cannot open shared object file: No such file or directory
2020-04-01 15:38:12.252842: W tensorflow/stream_executor/platform/default/dso_loader.cc:55] Could not load dynamic library 'libcusparse.so.10'; dlerror: libcusparse.so.10: cannot open shared object file: No such file or directory
2020-04-01 15:38:12.252869: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcudnn.so.7
2020-04-01 15:38:12.252875: W tensorflow/core/common_runtime/gpu/gpu_device.cc:1592] Cannot dlopen some GPU libraries. Please make sure the missing libraries mentioned above are installed properly if you would like to use GPU. Follow the guide at https://www.tensorflow.org/install/gpu for how to download and setup the required libraries for your platform.
Skipping registering GPU devices...
2020-04-01 15:38:12.253276: I tensorflow/core/platform/cpu_feature_guard.cc:142] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2 FMA
2020-04-01 15:38:12.259296: I tensorflow/core/platform/profile_utils/cpu_utils.cc:94] CPU Frequency: 3191935000 Hz
2020-04-01 15:38:12.259632: I tensorflow/compiler/xla/service/service.cc:168] XLA service 0x563e568f9430 initialized for platform Host (this does not guarantee that XLA will be used). Devices:
2020-04-01 15:38:12.259645: I tensorflow/compiler/xla/service/service.cc:176]   StreamExecutor device (0): Host, Default Version
2020-04-01 15:38:12.402933: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:981] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero
2020-04-01 15:38:12.406735: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:981] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero
2020-04-01 15:38:12.407499: I tensorflow/compiler/xla/service/service.cc:168] XLA service 0x563e5698fad0 initialized for platform CUDA (this does not guarantee that XLA will be used). Devices:
2020-04-01 15:38:12.407515: I tensorflow/compiler/xla/service/service.cc:176]   StreamExecutor device (0): GeForce RTX 2080 Ti, Compute Capability 7.5
2020-04-01 15:38:12.407520: I tensorflow/compiler/xla/service/service.cc:176]   StreamExecutor device (1): GeForce RTX 2080 Ti, Compute Capability 7.5
2020-04-01 15:38:12.407689: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1096] Device interconnect StreamExecutor with strength 1 edge matrix:
2020-04-01 15:38:12.407697: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1102]      
2020-04-01 15:38:13.801484: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:981] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero
2020-04-01 15:38:13.802395: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:981] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero
2020-04-01 15:38:13.803088: I tensorflow/core/grappler/devices.cc:55] Number of eligible GPUs (core count &gt;= 8, compute capability &gt;= 0.0): 2
2020-04-01 15:38:13.803208: I tensorflow/core/grappler/clusters/single_machine.cc:356] Starting new session
2020-04-01 15:38:13.804559: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:981] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero
2020-04-01 15:38:13.805223: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1555] Found device 0 with properties: 
pciBusID: 0000:01:00.0 name: GeForce RTX 2080 Ti computeCapability: 7.5
coreClock: 1.545GHz coreCount: 68 deviceMemorySize: 10.73GiB deviceMemoryBandwidth: 573.69GiB/s
2020-04-01 15:38:13.805314: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:981] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero
2020-04-01 15:38:13.805958: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1555] Found device 1 with properties: 
pciBusID: 0000:03:00.0 name: GeForce RTX 2080 Ti computeCapability: 7.5
coreClock: 1.545GHz coreCount: 68 deviceMemorySize: 10.73GiB deviceMemoryBandwidth: 573.69GiB/s
2020-04-01 15:38:13.806094: W tensorflow/stream_executor/platform/default/dso_loader.cc:55] Could not load dynamic library 'libcudart.so.10.1'; dlerror: libcudart.so.10.1: cannot open shared object file: No such file or directory
2020-04-01 15:38:13.806151: W tensorflow/stream_executor/platform/default/dso_loader.cc:55] Could not load dynamic library 'libcublas.so.10'; dlerror: libcublas.so.10: cannot open shared object file: No such file or directory
2020-04-01 15:38:13.806196: W tensorflow/stream_executor/platform/default/dso_loader.cc:55] Could not load dynamic library 'libcufft.so.10'; dlerror: libcufft.so.10: cannot open shared object file: No such file or directory
2020-04-01 15:38:13.806240: W tensorflow/stream_executor/platform/default/dso_loader.cc:55] Could not load dynamic library 'libcurand.so.10'; dlerror: libcurand.so.10: cannot open shared object file: No such file or directory
2020-04-01 15:38:13.806283: W tensorflow/stream_executor/platform/default/dso_loader.cc:55] Could not load dynamic library 'libcusolver.so.10'; dlerror: libcusolver.so.10: cannot open shared object file: No such file or directory
2020-04-01 15:38:13.806326: W tensorflow/stream_executor/platform/default/dso_loader.cc:55] Could not load dynamic library 'libcusparse.so.10'; dlerror: libcusparse.so.10: cannot open shared object file: No such file or directory
2020-04-01 15:38:13.806339: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcudnn.so.7
2020-04-01 15:38:13.806346: W tensorflow/core/common_runtime/gpu/gpu_device.cc:1592] Cannot dlopen some GPU libraries. Please make sure the missing libraries mentioned above are installed properly if you would like to use GPU. Follow the guide at https://www.tensorflow.org/install/gpu for how to download and setup the required libraries for your platform.
Skipping registering GPU devices...
2020-04-01 15:38:13.806423: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1096] Device interconnect StreamExecutor with strength 1 edge matrix:
2020-04-01 15:38:13.806432: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1102]      0 1 
2020-04-01 15:38:13.806440: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1115] 0:   N N 
2020-04-01 15:38:13.806445: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1115] 1:   N N 
2020-04-01 15:38:13.922212: I tensorflow/core/grappler/optimizers/meta_optimizer.cc:814] Optimization results for grappler item: graph_to_optimize
2020-04-01 15:38:13.922539: I tensorflow/core/grappler/optimizers/meta_optimizer.cc:816]   function_optimizer: Graph size after: 1542 nodes (1413), 2635 edges (2506), time = 71.453ms.
2020-04-01 15:38:13.922555: I tensorflow/core/grappler/optimizers/meta_optimizer.cc:816]   function_optimizer: function_optimizer did nothing. time = 1.68ms.
2020-04-01 15:38:15.070366: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:981] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero
2020-04-01 15:38:15.071111: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:981] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero
2020-04-01 15:38:15.071664: I tensorflow/core/grappler/devices.cc:55] Number of eligible GPUs (core count &gt;= 8, compute capability &gt;= 0.0): 2
2020-04-01 15:38:15.071742: I tensorflow/core/grappler/clusters/single_machine.cc:356] Starting new session
2020-04-01 15:38:15.072130: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:981] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero
2020-04-01 15:38:15.072644: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1555] Found device 0 with properties: 
pciBusID: 0000:01:00.0 name: GeForce RTX 2080 Ti computeCapability: 7.5
coreClock: 1.545GHz coreCount: 68 deviceMemorySize: 10.73GiB deviceMemoryBandwidth: 573.69GiB/s
2020-04-01 15:38:15.072689: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:981] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero
2020-04-01 15:38:15.073234: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1555] Found device 1 with properties: 
pciBusID: 0000:03:00.0 name: GeForce RTX 2080 Ti computeCapability: 7.5
coreClock: 1.545GHz coreCount: 68 deviceMemorySize: 10.73GiB deviceMemoryBandwidth: 573.69GiB/s
2020-04-01 15:38:15.073368: W tensorflow/stream_executor/platform/default/dso_loader.cc:55] Could not load dynamic library 'libcudart.so.10.1'; dlerror: libcudart.so.10.1: cannot open shared object file: No such file or directory
2020-04-01 15:38:15.073410: W tensorflow/stream_executor/platform/default/dso_loader.cc:55] Could not load dynamic library 'libcublas.so.10'; dlerror: libcublas.so.10: cannot open shared object file: No such file or directory
2020-04-01 15:38:15.073445: W tensorflow/stream_executor/platform/default/dso_loader.cc:55] Could not load dynamic library 'libcufft.so.10'; dlerror: libcufft.so.10: cannot open shared object file: No such file or directory
2020-04-01 15:38:15.073480: W tensorflow/stream_executor/platform/default/dso_loader.cc:55] Could not load dynamic library 'libcurand.so.10'; dlerror: libcurand.so.10: cannot open shared object file: No such file or directory
2020-04-01 15:38:15.073520: W tensorflow/stream_executor/platform/default/dso_loader.cc:55] Could not load dynamic library 'libcusolver.so.10'; dlerror: libcusolver.so.10: cannot open shared object file: No such file or directory
2020-04-01 15:38:15.073552: W tensorflow/stream_executor/platform/default/dso_loader.cc:55] Could not load dynamic library 'libcusparse.so.10'; dlerror: libcusparse.so.10: cannot open shared object file: No such file or directory
2020-04-01 15:38:15.073562: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcudnn.so.7
2020-04-01 15:38:15.073568: W tensorflow/core/common_runtime/gpu/gpu_device.cc:1592] Cannot dlopen some GPU libraries. Please make sure the missing libraries mentioned above are installed properly if you would like to use GPU. Follow the guide at https://www.tensorflow.org/install/gpu for how to download and setup the required libraries for your platform.
Skipping registering GPU devices...
2020-04-01 15:38:15.073658: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1096] Device interconnect StreamExecutor with strength 1 edge matrix:
2020-04-01 15:38:15.073664: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1102]      0 1 
2020-04-01 15:38:15.073668: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1115] 0:   N N 
2020-04-01 15:38:15.073671: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1115] 1:   N N 
2020-04-01 15:38:15.346279: I tensorflow/core/grappler/optimizers/meta_optimizer.cc:814] Optimization results for grappler item: graph_to_optimize
2020-04-01 15:38:15.346362: I tensorflow/core/grappler/optimizers/meta_optimizer.cc:816]   constant_folding: Graph size after: 1300 nodes (-204), 2189 edges (-408), time = 140.857ms.
2020-04-01 15:38:15.346373: I tensorflow/core/grappler/optimizers/meta_optimizer.cc:816]   constant_folding: Graph size after: 1300 nodes (0), 2189 edges (0), time = 89.953ms.
Traceback (most recent call last):
  File "/home/bigdata/anaconda3/envs/cartoongan_v2/bin/tflite_convert", line 10, in &lt;module&gt;
    sys.exit(main())
  File "/home/bigdata/anaconda3/envs/cartoongan_v2/lib/python3.7/site-packages/tensorflow_core/lite/python/tflite_convert.py", line 594, in main
    app.run(main=run_main, argv=sys.argv[:1])
  File "/home/bigdata/anaconda3/envs/cartoongan_v2/lib/python3.7/site-packages/tensorflow_core/python/platform/app.py", line 40, in run
    _run(main=main, argv=argv, flags_parser=_parse_flags_tolerate_undef)
  File "/home/bigdata/anaconda3/envs/cartoongan_v2/lib/python3.7/site-packages/absl/app.py", line 300, in run
    _run_main(main, args)
  File "/home/bigdata/anaconda3/envs/cartoongan_v2/lib/python3.7/site-packages/absl/app.py", line 251, in _run_main
    sys.exit(main(argv))
  File "/home/bigdata/anaconda3/envs/cartoongan_v2/lib/python3.7/site-packages/tensorflow_core/lite/python/tflite_convert.py", line 577, in run_main
    _convert_tf2_model(tflite_flags)
  File "/home/bigdata/anaconda3/envs/cartoongan_v2/lib/python3.7/site-packages/tensorflow_core/lite/python/tflite_convert.py", line 235, in _convert_tf2_model
    tflite_model = converter.convert()
  File "/home/bigdata/anaconda3/envs/cartoongan_v2/lib/python3.7/site-packages/tensorflow_core/lite/python/lite.py", line 442, in convert
    shape_list = tensor.shape.as_list()
  File "/home/bigdata/anaconda3/envs/cartoongan_v2/lib/python3.7/site-packages/tensorflow_core/python/framework/tensor_shape.py", line 1166, in as_list
    raise ValueError("as_list() is not defined on an unknown TensorShape.")
ValueError: as_list() is not defined on an unknown TensorShape.

&lt;/denchmark-code&gt;

Also, please include a link to the saved model or GraphDef
&lt;denchmark-code&gt;[model.zip](https://github.com/tensorflow/tensorflow/files/4413909/model.zip)
it's small and about 1.7MB
&lt;/denchmark-code&gt;

Failure details
can not convert to tflite
&lt;denchmark-code&gt;2020-04-01 16:44:20.851662: I tensorflow/core/grappler/optimizers/meta_optimizer.cc:814] Optimization results for grappler item: graph_to_optimize
2020-04-01 16:44:20.851708: I tensorflow/core/grappler/optimizers/meta_optimizer.cc:816]   constant_folding: Graph size after: 1300 nodes (-204), 2189 edges (-408), time = 106.827ms.
2020-04-01 16:44:20.851715: I tensorflow/core/grappler/optimizers/meta_optimizer.cc:816]   constant_folding: Graph size after: 1300 nodes (0), 2189 edges (0), time = 61.656ms.
Traceback (most recent call last):
  File "/home/bigdata/anaconda3/envs/cartoongan_v2/bin/tflite_convert", line 10, in &lt;module&gt;
    sys.exit(main())
  File "/home/bigdata/anaconda3/envs/cartoongan_v2/lib/python3.7/site-packages/tensorflow_core/lite/python/tflite_convert.py", line 594, in main
    app.run(main=run_main, argv=sys.argv[:1])
  File "/home/bigdata/anaconda3/envs/cartoongan_v2/lib/python3.7/site-packages/tensorflow_core/python/platform/app.py", line 40, in run
    _run(main=main, argv=argv, flags_parser=_parse_flags_tolerate_undef)
  File "/home/bigdata/anaconda3/envs/cartoongan_v2/lib/python3.7/site-packages/absl/app.py", line 300, in run
    _run_main(main, args)
  File "/home/bigdata/anaconda3/envs/cartoongan_v2/lib/python3.7/site-packages/absl/app.py", line 251, in _run_main
    sys.exit(main(argv))
  File "/home/bigdata/anaconda3/envs/cartoongan_v2/lib/python3.7/site-packages/tensorflow_core/lite/python/tflite_convert.py", line 577, in run_main
    _convert_tf2_model(tflite_flags)
  File "/home/bigdata/anaconda3/envs/cartoongan_v2/lib/python3.7/site-packages/tensorflow_core/lite/python/tflite_convert.py", line 235, in _convert_tf2_model
    tflite_model = converter.convert()
  File "/home/bigdata/anaconda3/envs/cartoongan_v2/lib/python3.7/site-packages/tensorflow_core/lite/python/lite.py", line 442, in convert
    shape_list = tensor.shape.as_list()
  File "/home/bigdata/anaconda3/envs/cartoongan_v2/lib/python3.7/site-packages/tensorflow_core/python/framework/tensor_shape.py", line 1166, in as_list
    raise ValueError("as_list() is not defined on an unknown TensorShape.")
ValueError: as_list() is not defined on an unknown TensorShape.
&lt;/denchmark-code&gt;

Any other info / logs
the model was train with tensorflow 2.0.0a0, but I convert it under tensorflow 2.1.0
	</description>
	<comments>
		<comment id='1' author='zerollzeng' date='2020-04-01T08:59:28Z'>
		by the way I am not very familiar with tensorflow, does anyone can tell me how to find the input/output node of my model? currently I check it via Netron but the render is totallly a mess
		</comment>
		<comment id='2' author='zerollzeng' date='2020-04-01T18:28:35Z'>
		To &lt;denchmark-link:https://developer.arm.com/solutions/machine-learning-on-arm/developer-material/how-to-guides/optimizing-neural-networks-for-mobile-and-embedded-devices-with-tensorflow/determine-the-names-of-input-and-output-nodes&gt;determine the names of input and output nodes&lt;/denchmark-link&gt;
 you may use TensorBoard.
Also can you test it with tf-nightly?
		</comment>
		<comment id='3' author='zerollzeng' date='2020-04-02T02:19:28Z'>
		after try to compile it with tf-nightly, I got the follow output
&lt;denchmark-code&gt;2020-04-02 10:14:01.528508: W tensorflow/stream_executor/platform/default/dso_loader.cc:55] Could not load dynamic library 'libcudart.so.10.1'; dlerror: libcudart.so.10.1: cannot open shared object file: No such file or directory
2020-04-02 10:14:01.528549: I tensorflow/stream_executor/cuda/cudart_stub.cc:29] Ignore above cudart dlerror if you do not have a GPU set up on your machine.
2020-04-02 10:14:02.772786: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcuda.so.1
2020-04-02 10:14:03.402604: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:982] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero
2020-04-02 10:14:03.403166: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1544] Found device 0 with properties: 
pciBusID: 0000:01:00.0 name: GeForce RTX 2080 Ti computeCapability: 7.5
coreClock: 1.545GHz coreCount: 68 deviceMemorySize: 10.73GiB deviceMemoryBandwidth: 573.69GiB/s
2020-04-02 10:14:03.403213: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:982] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero
2020-04-02 10:14:03.403863: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1544] Found device 1 with properties: 
pciBusID: 0000:03:00.0 name: GeForce RTX 2080 Ti computeCapability: 7.5
coreClock: 1.545GHz coreCount: 68 deviceMemorySize: 10.73GiB deviceMemoryBandwidth: 573.69GiB/s
2020-04-02 10:14:03.403958: W tensorflow/stream_executor/platform/default/dso_loader.cc:55] Could not load dynamic library 'libcudart.so.10.1'; dlerror: libcudart.so.10.1: cannot open shared object file: No such file or directory
2020-04-02 10:14:03.404002: W tensorflow/stream_executor/platform/default/dso_loader.cc:55] Could not load dynamic library 'libcublas.so.10'; dlerror: libcublas.so.10: cannot open shared object file: No such file or directory
2020-04-02 10:14:03.404040: W tensorflow/stream_executor/platform/default/dso_loader.cc:55] Could not load dynamic library 'libcufft.so.10'; dlerror: libcufft.so.10: cannot open shared object file: No such file or directory
2020-04-02 10:14:03.404074: W tensorflow/stream_executor/platform/default/dso_loader.cc:55] Could not load dynamic library 'libcurand.so.10'; dlerror: libcurand.so.10: cannot open shared object file: No such file or directory
2020-04-02 10:14:03.404113: W tensorflow/stream_executor/platform/default/dso_loader.cc:55] Could not load dynamic library 'libcusolver.so.10'; dlerror: libcusolver.so.10: cannot open shared object file: No such file or directory
2020-04-02 10:14:03.404149: W tensorflow/stream_executor/platform/default/dso_loader.cc:55] Could not load dynamic library 'libcusparse.so.10'; dlerror: libcusparse.so.10: cannot open shared object file: No such file or directory
2020-04-02 10:14:03.407325: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcudnn.so.7
2020-04-02 10:14:03.407352: W tensorflow/core/common_runtime/gpu/gpu_device.cc:1581] Cannot dlopen some GPU libraries. Please make sure the missing libraries mentioned above are installed properly if you would like to use GPU. Follow the guide at https://www.tensorflow.org/install/gpu for how to download and setup the required libraries for your platform.
Skipping registering GPU devices...
2020-04-02 10:14:03.407685: I tensorflow/core/platform/cpu_feature_guard.cc:142] This TensorFlow binary is optimized with Intel(R) MKL-DNN to use the following CPU instructions in performance-critical operations:  AVX2 FMA
To enable them in other operations, rebuild TensorFlow with the appropriate compiler flags.
2020-04-02 10:14:03.414224: I tensorflow/core/platform/profile_utils/cpu_utils.cc:102] CPU Frequency: 3191935000 Hz
2020-04-02 10:14:03.414733: I tensorflow/compiler/xla/service/service.cc:168] XLA service 0x591db70 initialized for platform Host (this does not guarantee that XLA will be used). Devices:
2020-04-02 10:14:03.414748: I tensorflow/compiler/xla/service/service.cc:176]   StreamExecutor device (0): Host, Default Version
2020-04-02 10:14:03.416273: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1085] Device interconnect StreamExecutor with strength 1 edge matrix:
2020-04-02 10:14:03.416283: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1091]      
2020-04-02 10:14:04.972011: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:982] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero
2020-04-02 10:14:04.972782: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:982] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero
2020-04-02 10:14:04.973468: I tensorflow/core/grappler/devices.cc:69] Number of eligible GPUs (core count &gt;= 8, compute capability &gt;= 0.0): 2
2020-04-02 10:14:04.973567: I tensorflow/core/grappler/clusters/single_machine.cc:356] Starting new session
2020-04-02 10:14:05.110304: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:982] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero
2020-04-02 10:14:05.125903: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:982] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero
2020-04-02 10:14:05.126800: I tensorflow/compiler/xla/service/service.cc:168] XLA service 0xa01a810 initialized for platform CUDA (this does not guarantee that XLA will be used). Devices:
2020-04-02 10:14:05.126818: I tensorflow/compiler/xla/service/service.cc:176]   StreamExecutor device (0): GeForce RTX 2080 Ti, Compute Capability 7.5
2020-04-02 10:14:05.126822: I tensorflow/compiler/xla/service/service.cc:176]   StreamExecutor device (1): GeForce RTX 2080 Ti, Compute Capability 7.5
2020-04-02 10:14:05.127259: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:982] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero
2020-04-02 10:14:05.127782: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1544] Found device 0 with properties: 
pciBusID: 0000:01:00.0 name: GeForce RTX 2080 Ti computeCapability: 7.5
coreClock: 1.545GHz coreCount: 68 deviceMemorySize: 10.73GiB deviceMemoryBandwidth: 573.69GiB/s
2020-04-02 10:14:05.127853: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:982] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero
2020-04-02 10:14:05.128495: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1544] Found device 1 with properties: 
pciBusID: 0000:03:00.0 name: GeForce RTX 2080 Ti computeCapability: 7.5
coreClock: 1.545GHz coreCount: 68 deviceMemorySize: 10.73GiB deviceMemoryBandwidth: 573.69GiB/s
2020-04-02 10:14:05.128622: W tensorflow/stream_executor/platform/default/dso_loader.cc:55] Could not load dynamic library 'libcudart.so.10.1'; dlerror: libcudart.so.10.1: cannot open shared object file: No such file or directory
2020-04-02 10:14:05.128675: W tensorflow/stream_executor/platform/default/dso_loader.cc:55] Could not load dynamic library 'libcublas.so.10'; dlerror: libcublas.so.10: cannot open shared object file: No such file or directory
2020-04-02 10:14:05.128709: W tensorflow/stream_executor/platform/default/dso_loader.cc:55] Could not load dynamic library 'libcufft.so.10'; dlerror: libcufft.so.10: cannot open shared object file: No such file or directory
2020-04-02 10:14:05.128746: W tensorflow/stream_executor/platform/default/dso_loader.cc:55] Could not load dynamic library 'libcurand.so.10'; dlerror: libcurand.so.10: cannot open shared object file: No such file or directory
2020-04-02 10:14:05.128779: W tensorflow/stream_executor/platform/default/dso_loader.cc:55] Could not load dynamic library 'libcusolver.so.10'; dlerror: libcusolver.so.10: cannot open shared object file: No such file or directory
2020-04-02 10:14:05.128815: W tensorflow/stream_executor/platform/default/dso_loader.cc:55] Could not load dynamic library 'libcusparse.so.10'; dlerror: libcusparse.so.10: cannot open shared object file: No such file or directory
2020-04-02 10:14:05.128827: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcudnn.so.7
2020-04-02 10:14:05.128833: W tensorflow/core/common_runtime/gpu/gpu_device.cc:1581] Cannot dlopen some GPU libraries. Please make sure the missing libraries mentioned above are installed properly if you would like to use GPU. Follow the guide at https://www.tensorflow.org/install/gpu for how to download and setup the required libraries for your platform.
Skipping registering GPU devices...
2020-04-02 10:14:05.128894: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1085] Device interconnect StreamExecutor with strength 1 edge matrix:
2020-04-02 10:14:05.128902: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1091]      0 1 
2020-04-02 10:14:05.128908: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1104] 0:   N N 
2020-04-02 10:14:05.128911: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1104] 1:   N N 
2020-04-02 10:14:05.258266: I tensorflow/core/grappler/optimizers/meta_optimizer.cc:802] Optimization results for grappler item: graph_to_optimize
2020-04-02 10:14:05.258307: I tensorflow/core/grappler/optimizers/meta_optimizer.cc:804]   function_optimizer: Graph size after: 1542 nodes (1413), 2635 edges (2506), time = 69.886ms.
2020-04-02 10:14:05.258311: I tensorflow/core/grappler/optimizers/meta_optimizer.cc:804]   function_optimizer: function_optimizer did nothing. time = 2.362ms.
2020-04-02 10:14:06.511723: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:982] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero
2020-04-02 10:14:06.512397: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:982] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero
2020-04-02 10:14:06.513063: I tensorflow/core/grappler/devices.cc:69] Number of eligible GPUs (core count &gt;= 8, compute capability &gt;= 0.0): 2
2020-04-02 10:14:06.513148: I tensorflow/core/grappler/clusters/single_machine.cc:356] Starting new session
2020-04-02 10:14:06.513531: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:982] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero
2020-04-02 10:14:06.514076: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1544] Found device 0 with properties: 
pciBusID: 0000:01:00.0 name: GeForce RTX 2080 Ti computeCapability: 7.5
coreClock: 1.545GHz coreCount: 68 deviceMemorySize: 10.73GiB deviceMemoryBandwidth: 573.69GiB/s
2020-04-02 10:14:06.514124: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:982] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero
2020-04-02 10:14:06.514794: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1544] Found device 1 with properties: 
pciBusID: 0000:03:00.0 name: GeForce RTX 2080 Ti computeCapability: 7.5
coreClock: 1.545GHz coreCount: 68 deviceMemorySize: 10.73GiB deviceMemoryBandwidth: 573.69GiB/s
2020-04-02 10:14:06.514943: W tensorflow/stream_executor/platform/default/dso_loader.cc:55] Could not load dynamic library 'libcudart.so.10.1'; dlerror: libcudart.so.10.1: cannot open shared object file: No such file or directory
2020-04-02 10:14:06.514990: W tensorflow/stream_executor/platform/default/dso_loader.cc:55] Could not load dynamic library 'libcublas.so.10'; dlerror: libcublas.so.10: cannot open shared object file: No such file or directory
2020-04-02 10:14:06.515029: W tensorflow/stream_executor/platform/default/dso_loader.cc:55] Could not load dynamic library 'libcufft.so.10'; dlerror: libcufft.so.10: cannot open shared object file: No such file or directory
2020-04-02 10:14:06.515077: W tensorflow/stream_executor/platform/default/dso_loader.cc:55] Could not load dynamic library 'libcurand.so.10'; dlerror: libcurand.so.10: cannot open shared object file: No such file or directory
2020-04-02 10:14:06.515135: W tensorflow/stream_executor/platform/default/dso_loader.cc:55] Could not load dynamic library 'libcusolver.so.10'; dlerror: libcusolver.so.10: cannot open shared object file: No such file or directory
2020-04-02 10:14:06.515171: W tensorflow/stream_executor/platform/default/dso_loader.cc:55] Could not load dynamic library 'libcusparse.so.10'; dlerror: libcusparse.so.10: cannot open shared object file: No such file or directory
2020-04-02 10:14:06.515182: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcudnn.so.7
2020-04-02 10:14:06.515187: W tensorflow/core/common_runtime/gpu/gpu_device.cc:1581] Cannot dlopen some GPU libraries. Please make sure the missing libraries mentioned above are installed properly if you would like to use GPU. Follow the guide at https://www.tensorflow.org/install/gpu for how to download and setup the required libraries for your platform.
Skipping registering GPU devices...
2020-04-02 10:14:06.515311: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1085] Device interconnect StreamExecutor with strength 1 edge matrix:
2020-04-02 10:14:06.515319: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1091]      0 1 
2020-04-02 10:14:06.515324: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1104] 0:   N N 
2020-04-02 10:14:06.515328: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1104] 1:   N N 
2020-04-02 10:14:06.678709: I tensorflow/core/grappler/optimizers/meta_optimizer.cc:802] Optimization results for grappler item: graph_to_optimize
2020-04-02 10:14:06.678785: I tensorflow/core/grappler/optimizers/meta_optimizer.cc:804]   constant_folding: Graph size after: 1300 nodes (-242), 2189 edges (-446), time = 82.118ms.
2020-04-02 10:14:06.678792: I tensorflow/core/grappler/optimizers/meta_optimizer.cc:804]   constant_folding: Graph size after: 1300 nodes (0), 2189 edges (0), time = 42.243ms.
I0402 10:14:06.725161 140247144630016 lite.py:595] Using experimental converter: If you encountered a problem please file a bug. You can opt-out by setting experimental_new_converter=False
Traceback (most recent call last):
  File "/home/bigdata/anaconda3/envs/tf-nightly/bin/tflite_convert", line 8, in &lt;module&gt;
    sys.exit(main())
  File "/home/bigdata/anaconda3/envs/tf-nightly/lib/python3.6/site-packages/tensorflow/lite/python/tflite_convert.py", line 638, in main
    app.run(main=run_main, argv=sys.argv[:1])
  File "/home/bigdata/anaconda3/envs/tf-nightly/lib/python3.6/site-packages/tensorflow/python/platform/app.py", line 40, in run
    _run(main=main, argv=argv, flags_parser=_parse_flags_tolerate_undef)
  File "/home/bigdata/anaconda3/envs/tf-nightly/lib/python3.6/site-packages/absl/app.py", line 299, in run
    _run_main(main, args)
  File "/home/bigdata/anaconda3/envs/tf-nightly/lib/python3.6/site-packages/absl/app.py", line 250, in _run_main
    sys.exit(main(argv))
  File "/home/bigdata/anaconda3/envs/tf-nightly/lib/python3.6/site-packages/tensorflow/lite/python/tflite_convert.py", line 621, in run_main
    _convert_tf2_model(tflite_flags)
  File "/home/bigdata/anaconda3/envs/tf-nightly/lib/python3.6/site-packages/tensorflow/lite/python/tflite_convert.py", line 237, in _convert_tf2_model
    tflite_model = converter.convert()
  File "/home/bigdata/anaconda3/envs/tf-nightly/lib/python3.6/site-packages/tensorflow/lite/python/lite.py", line 604, in convert
    **converter_kwargs)
  File "/home/bigdata/anaconda3/envs/tf-nightly/lib/python3.6/site-packages/tensorflow/lite/python/convert.py", line 485, in toco_convert_impl
    input_tensors, output_tensors, *args, **kwargs)
  File "/home/bigdata/anaconda3/envs/tf-nightly/lib/python3.6/site-packages/tensorflow/lite/python/convert.py", line 387, in build_toco_convert_protos
    for dim in shape:
  File "/home/bigdata/anaconda3/envs/tf-nightly/lib/python3.6/site-packages/tensorflow/python/framework/tensor_shape.py", line 842, in __iter__
    raise ValueError("Cannot iterate over a shape with unknown rank.")
ValueError: Cannot iterate over a shape with unknown rank.
&lt;/denchmark-code&gt;

and I try to visulize it via tensorboard, it still give me error
&lt;denchmark-code&gt;2020-04-02 10:08:36.256005: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libnvinfer.so.6
2020-04-02 10:08:36.258205: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libnvinfer_plugin.so.6
2020-04-02 10:08:36.860121: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcuda.so.1
2020-04-02 10:08:37.490554: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:981] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero
2020-04-02 10:08:37.491122: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1555] Found device 0 with properties: 
pciBusID: 0000:01:00.0 name: GeForce RTX 2080 Ti computeCapability: 7.5
coreClock: 1.545GHz coreCount: 68 deviceMemorySize: 10.73GiB deviceMemoryBandwidth: 573.69GiB/s
2020-04-02 10:08:37.491180: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:981] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero
2020-04-02 10:08:37.491838: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1555] Found device 1 with properties: 
pciBusID: 0000:03:00.0 name: GeForce RTX 2080 Ti computeCapability: 7.5
coreClock: 1.545GHz coreCount: 68 deviceMemorySize: 10.73GiB deviceMemoryBandwidth: 573.69GiB/s
2020-04-02 10:08:37.491941: W tensorflow/stream_executor/platform/default/dso_loader.cc:55] Could not load dynamic library 'libcudart.so.10.1'; dlerror: libcudart.so.10.1: cannot open shared object file: No such file or directory
2020-04-02 10:08:37.491988: W tensorflow/stream_executor/platform/default/dso_loader.cc:55] Could not load dynamic library 'libcublas.so.10'; dlerror: libcublas.so.10: cannot open shared object file: No such file or directory
2020-04-02 10:08:37.492022: W tensorflow/stream_executor/platform/default/dso_loader.cc:55] Could not load dynamic library 'libcufft.so.10'; dlerror: libcufft.so.10: cannot open shared object file: No such file or directory
2020-04-02 10:08:37.492064: W tensorflow/stream_executor/platform/default/dso_loader.cc:55] Could not load dynamic library 'libcurand.so.10'; dlerror: libcurand.so.10: cannot open shared object file: No such file or directory
2020-04-02 10:08:37.492101: W tensorflow/stream_executor/platform/default/dso_loader.cc:55] Could not load dynamic library 'libcusolver.so.10'; dlerror: libcusolver.so.10: cannot open shared object file: No such file or directory
2020-04-02 10:08:37.492138: W tensorflow/stream_executor/platform/default/dso_loader.cc:55] Could not load dynamic library 'libcusparse.so.10'; dlerror: libcusparse.so.10: cannot open shared object file: No such file or directory
2020-04-02 10:08:37.492165: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcudnn.so.7
2020-04-02 10:08:37.492173: W tensorflow/core/common_runtime/gpu/gpu_device.cc:1592] Cannot dlopen some GPU libraries. Please make sure the missing libraries mentioned above are installed properly if you would like to use GPU. Follow the guide at https://www.tensorflow.org/install/gpu for how to download and setup the required libraries for your platform.
Skipping registering GPU devices...
2020-04-02 10:08:37.492545: I tensorflow/core/platform/cpu_feature_guard.cc:142] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2 FMA
2020-04-02 10:08:37.498331: I tensorflow/core/platform/profile_utils/cpu_utils.cc:94] CPU Frequency: 3191935000 Hz
2020-04-02 10:08:37.498776: I tensorflow/compiler/xla/service/service.cc:168] XLA service 0x55c843ef2440 initialized for platform Host (this does not guarantee that XLA will be used). Devices:
2020-04-02 10:08:37.498796: I tensorflow/compiler/xla/service/service.cc:176]   StreamExecutor device (0): Host, Default Version
2020-04-02 10:08:37.651350: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:981] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero
2020-04-02 10:08:37.655401: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:981] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero
2020-04-02 10:08:37.656099: I tensorflow/compiler/xla/service/service.cc:168] XLA service 0x55c843f88ae0 initialized for platform CUDA (this does not guarantee that XLA will be used). Devices:
2020-04-02 10:08:37.656115: I tensorflow/compiler/xla/service/service.cc:176]   StreamExecutor device (0): GeForce RTX 2080 Ti, Compute Capability 7.5
2020-04-02 10:08:37.656120: I tensorflow/compiler/xla/service/service.cc:176]   StreamExecutor device (1): GeForce RTX 2080 Ti, Compute Capability 7.5
2020-04-02 10:08:37.656311: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1096] Device interconnect StreamExecutor with strength 1 edge matrix:
2020-04-02 10:08:37.656318: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1102]      
Traceback (most recent call last):
  File "tensorflow/python/tools/import_pb_to_tensorboard.py", line 86, in &lt;module&gt;
    app.run(main=main, argv=[sys.argv[0]] + unparsed)
  File "/home/bigdata/anaconda3/envs/cartoongan_v2/lib/python3.7/site-packages/tensorflow_core/python/platform/app.py", line 40, in run
    _run(main=main, argv=argv, flags_parser=_parse_flags_tolerate_undef)
  File "/home/bigdata/anaconda3/envs/cartoongan_v2/lib/python3.7/site-packages/absl/app.py", line 300, in run
    _run_main(main, args)
  File "/home/bigdata/anaconda3/envs/cartoongan_v2/lib/python3.7/site-packages/absl/app.py", line 251, in _run_main
    sys.exit(main(argv))
  File "tensorflow/python/tools/import_pb_to_tensorboard.py", line 68, in main
    import_to_tensorboard(FLAGS.model_dir, FLAGS.log_dir)
  File "tensorflow/python/tools/import_pb_to_tensorboard.py", line 58, in import_to_tensorboard
    graph_def.ParseFromString(f.read())
google.protobuf.message.DecodeError: Error parsing message
&lt;/denchmark-code&gt;

Does it means there are problems with my model?  the model was train with this &lt;denchmark-link:https://github.com/mnicnc404/CartoonGan-tensorflow&gt;repo&lt;/denchmark-link&gt;

		</comment>
		<comment id='4' author='zerollzeng' date='2020-04-02T07:46:13Z'>
		update:
I regenerate the pb model, and now I have a better model and it render well on Netron, and when I convert it to tflite model, I got "ValueError: This converter can only convert a single ConcreteFunction. Converting multiple functions is under development."
&lt;denchmark-link:https://github.com/tensorflow/tensorflow/files/4419478/model.zip&gt;model.zip&lt;/denchmark-link&gt;

this is the new pb model. and the tf output
&lt;denchmark-code&gt;(tf-nightly) zengren@GPU003:~/gomo/CartoonGan-tensorflow-master/optimized_pbs$ tflite_convert --output_file=model.tflite --saved_model_dir ./shinkai --input_arrays Placeholder:0 --output_arrays Cast_1:0 
2020-04-02 14:27:25.319175: W tensorflow/stream_executor/platform/default/dso_loader.cc:55] Could not load dynamic library 'libcudart.so.10.1'; dlerror: libcudart.so.10.1: cannot open shared object file: No such file or directory
2020-04-02 14:27:25.319241: I tensorflow/stream_executor/cuda/cudart_stub.cc:29] Ignore above cudart dlerror if you do not have a GPU set up on your machine.
INFO:tensorflow:Saver not created because there are no variables in the graph to restore
I0402 14:27:26.942274 139780310492928 saver.py:1512] Saver not created because there are no variables in the graph to restore
2020-04-02 14:27:26.947938: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcuda.so.1
2020-04-02 14:27:26.956871: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:982] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero
2020-04-02 14:27:26.957522: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1544] Found device 0 with properties: 
pciBusID: 0000:01:00.0 name: GeForce RTX 2080 Ti computeCapability: 7.5
coreClock: 1.545GHz coreCount: 68 deviceMemorySize: 10.73GiB deviceMemoryBandwidth: 573.69GiB/s
2020-04-02 14:27:26.957594: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:982] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero
2020-04-02 14:27:26.958293: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1544] Found device 1 with properties: 
pciBusID: 0000:03:00.0 name: GeForce RTX 2080 Ti computeCapability: 7.5
coreClock: 1.545GHz coreCount: 68 deviceMemorySize: 10.73GiB deviceMemoryBandwidth: 573.69GiB/s
2020-04-02 14:27:26.958398: W tensorflow/stream_executor/platform/default/dso_loader.cc:55] Could not load dynamic library 'libcudart.so.10.1'; dlerror: libcudart.so.10.1: cannot open shared object file: No such file or directory
2020-04-02 14:27:26.958442: W tensorflow/stream_executor/platform/default/dso_loader.cc:55] Could not load dynamic library 'libcublas.so.10'; dlerror: libcublas.so.10: cannot open shared object file: No such file or directory
2020-04-02 14:27:26.958481: W tensorflow/stream_executor/platform/default/dso_loader.cc:55] Could not load dynamic library 'libcufft.so.10'; dlerror: libcufft.so.10: cannot open shared object file: No such file or directory
2020-04-02 14:27:26.958519: W tensorflow/stream_executor/platform/default/dso_loader.cc:55] Could not load dynamic library 'libcurand.so.10'; dlerror: libcurand.so.10: cannot open shared object file: No such file or directory
2020-04-02 14:27:26.958563: W tensorflow/stream_executor/platform/default/dso_loader.cc:55] Could not load dynamic library 'libcusolver.so.10'; dlerror: libcusolver.so.10: cannot open shared object file: No such file or directory
2020-04-02 14:27:26.958603: W tensorflow/stream_executor/platform/default/dso_loader.cc:55] Could not load dynamic library 'libcusparse.so.10'; dlerror: libcusparse.so.10: cannot open shared object file: No such file or directory
2020-04-02 14:27:26.962433: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcudnn.so.7
2020-04-02 14:27:26.962458: W tensorflow/core/common_runtime/gpu/gpu_device.cc:1581] Cannot dlopen some GPU libraries. Please make sure the missing libraries mentioned above are installed properly if you would like to use GPU. Follow the guide at https://www.tensorflow.org/install/gpu for how to download and setup the required libraries for your platform.
Skipping registering GPU devices...
2020-04-02 14:27:26.962909: I tensorflow/core/platform/cpu_feature_guard.cc:142] This TensorFlow binary is optimized with Intel(R) MKL-DNN to use the following CPU instructions in performance-critical operations:  AVX2 FMA
To enable them in other operations, rebuild TensorFlow with the appropriate compiler flags.
2020-04-02 14:27:26.969604: I tensorflow/core/platform/profile_utils/cpu_utils.cc:102] CPU Frequency: 3191935000 Hz
2020-04-02 14:27:26.970272: I tensorflow/compiler/xla/service/service.cc:168] XLA service 0x4abc3d0 initialized for platform Host (this does not guarantee that XLA will be used). Devices:
2020-04-02 14:27:26.970299: I tensorflow/compiler/xla/service/service.cc:176]   StreamExecutor device (0): Host, Default Version
2020-04-02 14:27:26.972342: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1085] Device interconnect StreamExecutor with strength 1 edge matrix:
2020-04-02 14:27:26.972355: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1091]      
Traceback (most recent call last):
  File "/home/bigdata/anaconda3/envs/tf-nightly/bin/tflite_convert", line 8, in &lt;module&gt;
    sys.exit(main())
  File "/home/bigdata/anaconda3/envs/tf-nightly/lib/python3.6/site-packages/tensorflow/lite/python/tflite_convert.py", line 638, in main
    app.run(main=run_main, argv=sys.argv[:1])
  File "/home/bigdata/anaconda3/envs/tf-nightly/lib/python3.6/site-packages/tensorflow/python/platform/app.py", line 40, in run
    _run(main=main, argv=argv, flags_parser=_parse_flags_tolerate_undef)
  File "/home/bigdata/anaconda3/envs/tf-nightly/lib/python3.6/site-packages/absl/app.py", line 299, in run
    _run_main(main, args)
  File "/home/bigdata/anaconda3/envs/tf-nightly/lib/python3.6/site-packages/absl/app.py", line 250, in _run_main
    sys.exit(main(argv))
  File "/home/bigdata/anaconda3/envs/tf-nightly/lib/python3.6/site-packages/tensorflow/lite/python/tflite_convert.py", line 621, in run_main
    _convert_tf2_model(tflite_flags)
  File "/home/bigdata/anaconda3/envs/tf-nightly/lib/python3.6/site-packages/tensorflow/lite/python/tflite_convert.py", line 237, in _convert_tf2_model
    tflite_model = converter.convert()
  File "/home/bigdata/anaconda3/envs/tf-nightly/lib/python3.6/site-packages/tensorflow/lite/python/lite.py", line 520, in convert
    raise ValueError("This converter can only convert a single "
ValueError: This converter can only convert a single ConcreteFunction. Converting multiple functions is under development.
&lt;/denchmark-code&gt;

I've search this problem and find some information on other issue and stackoverflow, but I still very confused about how to deal with it? does it mean that I need to write some code instead of use tflite_convert binary?
		</comment>
		<comment id='5' author='zerollzeng' date='2020-04-08T03:20:44Z'>
		update: after stuck at this issue for a week, still got nothing
here is the detaile
&lt;denchmark-code&gt;ValueError: This converter can only convert a single ConcreteFunction. Converting multiple functions is under development.
&lt;/denchmark-code&gt;

this error was the output of tflite_convert and the pb model was create with following script
import os
from PIL import Image

try:
    import tensorflow.compat.v1 as tf
    tf.disable_v2_behavior()
except (ImportError, AttributeError):
    import tensorflow as tf


from generator import Generator
from logger import get_logger


# NOTE: TF warnings are too noisy without this
os.environ['TF_CPP_MIN_LOG_LEVEL'] = '3'
tf.logging.set_verbosity(tf.logging.ERROR)


def makedirs(path):
    if not os.path.isdir(path):
        os.makedirs(path)


def main(m_path, out_dir, light=False, test_out=True):
    logger = get_logger("tf1_export", debug=test_out)
    g = Generator(light=light)
    t = tf.placeholder(tf.string, [])
    x = tf.expand_dims(tf.image.decode_jpeg(tf.read_file(t), channels=3), 0)
    x = (tf.cast(x, tf.float32) / 127.5) - 1
    x = g(x, training=False)
    out = tf.cast((tf.squeeze(x, 0) + 1) * 127.5, tf.uint8)
    in_name, out_name = t.op.name, out.op.name
    try:
        with tf.Session() as sess:
            sess.run(tf.global_variables_initializer())
            g.load_weights(tf.train.latest_checkpoint(m_path))
            in_graph_def = tf.get_default_graph().as_graph_def()
            out_graph_def = tf.graph_util.convert_variables_to_constants(
                sess, in_graph_def, [out_name])
        tf.reset_default_graph()
        tf.import_graph_def(out_graph_def, name='')
    except ValueError:
        logger.error("Failed to load specified weight.")
        logger.error("If you trained your model with --light, "
                     "consider adding --light when executing this script; otherwise, "
                     "do not add --light when executing this script.")
        exit(1)
    makedirs(out_dir)
    m_cnt = 0
    bpath = 'optimized_graph_light' if light else 'optimized_graph'
    # out_path = os.path.join(out_dir, f'{bpath}_{m_cnt:04d}.pb')
    out_path = os.path.join(out_dir, 'saved_model.pb')
    while os.path.exists(out_path):
        m_cnt += 1
        # out_path = os.path.join(out_dir, f'{bpath}_{m_cnt:04d}.pb')
        out_path = os.path.join(out_dir, 'saved_model.pb')
    with tf.gfile.GFile(out_path, 'wb') as f:
        f.write(out_graph_def.SerializeToString())

    if test_out:
        with tf.Graph().as_default():
            gd = tf.GraphDef()
            with tf.gfile.GFile(out_path, 'rb') as f:
                gd.ParseFromString(f.read())
            tf.import_graph_def(gd, name='')
            tf.get_default_graph().finalize()
            t = tf.get_default_graph().get_tensor_by_name(f"{in_name}:0")
            out = tf.get_default_graph().get_tensor_by_name(f"{out_name}:0")
            from time import time
            start = time()
            with tf.Session() as sess:
                img = Image.fromarray(sess.run(out, {t: "input_images/temple.jpg"}))
                img.show()
            elapsed = time() - start
            logger.debug(f"{elapsed} sec per img")
    logger.info(f"successfully exported ckpt to {out_path}")
    logger.info(f"input var name: {in_name}:0")
    logger.info(f"output var name: {out_name}:0")


if __name__ == "__main__":
    import argparse
    parser = argparse.ArgumentParser()
    parser.add_argument("--m_path", type=str, default="models")
    parser.add_argument("--out_dir", type=str, default='optimized_pbs')
    parser.add_argument("--light", action='store_true')
    parser.add_argument("--not_test_out", action='store_true')
    args = parser.parse_args()
    main(args.m_path, args.out_dir, args.light, not args.not_test_out)
the previous error output of tflite_convert
&lt;denchmark-code&gt;Traceback (most recent call last):
  File "/home/bigdata/anaconda3/envs/tf-nightly/bin/tflite_convert", line 8, in &lt;module&gt;
    sys.exit(main())
  File "/home/bigdata/anaconda3/envs/tf-nightly/lib/python3.6/site-packages/tensorflow/lite/python/tflite_convert.py", line 638, in main
    app.run(main=run_main, argv=sys.argv[:1])
  File "/home/bigdata/anaconda3/envs/tf-nightly/lib/python3.6/site-packages/tensorflow/python/platform/app.py", line 40, in run
    _run(main=main, argv=argv, flags_parser=_parse_flags_tolerate_undef)
  File "/home/bigdata/anaconda3/envs/tf-nightly/lib/python3.6/site-packages/absl/app.py", line 299, in run
    _run_main(main, args)
  File "/home/bigdata/anaconda3/envs/tf-nightly/lib/python3.6/site-packages/absl/app.py", line 250, in _run_main
    sys.exit(main(argv))
  File "/home/bigdata/anaconda3/envs/tf-nightly/lib/python3.6/site-packages/tensorflow/lite/python/tflite_convert.py", line 621, in run_main
    _convert_tf2_model(tflite_flags)
  File "/home/bigdata/anaconda3/envs/tf-nightly/lib/python3.6/site-packages/tensorflow/lite/python/tflite_convert.py", line 237, in _convert_tf2_model
    tflite_model = converter.convert()
  File "/home/bigdata/anaconda3/envs/tf-nightly/lib/python3.6/site-packages/tensorflow/lite/python/lite.py", line 604, in convert
    **converter_kwargs)
  File "/home/bigdata/anaconda3/envs/tf-nightly/lib/python3.6/site-packages/tensorflow/lite/python/convert.py", line 485, in toco_convert_impl
    input_tensors, output_tensors, *args, **kwargs)
  File "/home/bigdata/anaconda3/envs/tf-nightly/lib/python3.6/site-packages/tensorflow/lite/python/convert.py", line 387, in build_toco_convert_protos
    for dim in shape:
  File "/home/bigdata/anaconda3/envs/tf-nightly/lib/python3.6/site-packages/tensorflow/python/framework/tensor_shape.py", line 842, in __iter__
    raise ValueError("Cannot iterate over a shape with unknown rank.")
ValueError: Cannot iterate over a shape with unknown rank.
&lt;/denchmark-code&gt;

was come from the model generate by following script
import os
from subprocess import Popen
import tensorflow as tf
from generator import Generator
from logger import get_logger


os.environ['TF_CPP_MIN_LOG_LEVEL'] = '3'
tf.get_logger().setLevel(40)


def main(m_path, out_dir, light):
    logger = get_logger("export")
    try:
        g = Generator(light=light)
        g.load_weights(tf.train.latest_checkpoint(m_path))
        t = tf.keras.Input(shape=[800, 800, 3], batch_size=1, name='input_0')
        out = g(t, training=False)
        in_name, out_name = t.op.name, out.op.name
        print('in_name:{}, out_name:{}'.format(in_name,out_name))
        

        g.summary()
    except ValueError as e:
        logger.error(e)
        logger.error("Failed to load specified weight.")
        logger.error("If you trained your model with --light, "
                     "consider adding --light when executing this script; otherwise, "
                     "do not add --light when executing this script.")
        exit(1)
    m_num = 0
    smd = os.path.join(out_dir, "SavedModel")
    tfmd = os.path.join(out_dir, "tfjs_model")
    if light:
        smd += "Light"
        tfmd += "_light"
    saved_model_dir = f"{smd}_{m_num:04d}"
    tfjs_model_dir = f"{tfmd}_{m_num:04d}"
    while os.path.exists(saved_model_dir):
        m_num += 1
        saved_model_dir = f"{smd}_{m_num:04d}"
        tfjs_model_dir = f"{tfmd}_{m_num:04d}"
    tf.saved_model.save(g, saved_model_dir)


if __name__ == "__main__":
    import argparse
    parser = argparse.ArgumentParser()
    parser.add_argument("--m_path", type=str, default='models/')
    parser.add_argument("--out_dir", type=str, default='exported_models')
    parser.add_argument("--light", action='store_true')
    args = parser.parse_args()
    main(args.m_path, args.out_dir, args.light)
and the tf.sumary() output
&lt;denchmark-code&gt;in_name:input_0, out_name:Generator/activation_1/Tanh
Model: "Generator"
_________________________________________________________________
Layer (type)                 Output Shape              Param #   
=================================================================
FlatConv (FlatConv)          (1, 800, 800, 96)         7298      
_________________________________________________________________
DownShuffleUnitV2 (DownShuff (1, 400, 400, 192)        29384     
_________________________________________________________________
DownShuffleUnitV2 (DownShuff (1, 200, 200, 384)        114056    
_________________________________________________________________
sequential_15 (Sequential)   (1, 200, 200, 384)        603696    
_________________________________________________________________
UpSampleConv (UpSampleConv)  (1, 400, 400, 192)        93222     
_________________________________________________________________
UpSampleConv (UpSampleConv)  (1, 800, 800, 96)         23574     
_________________________________________________________________
sequential_20 (Sequential)   (1, 800, 800, 3)          7203      
_________________________________________________________________
activation (Activation)      (1, 800, 800, 3)          0         
=================================================================
Total params: 878,433
Trainable params: 878,433
Non-trainable params: 0
_________________________________________________________________
&lt;/denchmark-code&gt;

convert command
&lt;denchmark-code&gt;tflite_convert --output_file=model.tflite --saved_model_dir . --input_arrays input_0 --input_shapes=1,800,800,3 --output_arrays Generator/activation_1/Tanh
&lt;/denchmark-code&gt;

** pb was generated in tensorflow 2.0.0 alpha 0, and tflite_convert was run in tf_nightly **
		</comment>
		<comment id='6' author='zerollzeng' date='2020-04-08T03:23:57Z'>
		I'm totally mess up in api of different version and module of tensorflow. does anyone can help me?
Best Regard
		</comment>
		<comment id='7' author='zerollzeng' date='2020-04-08T06:19:06Z'>
		This problem has been solved thanks to &lt;denchmark-link:https://github.com/windmaple&gt;@windmaple&lt;/denchmark-link&gt;

The reason that cause this error might be the  imcompatibility between tensorflow 2.0 alpha and newest tf_nightly, solved this by adding --enable_v1_converter
&lt;denchmark-code&gt;tflite_convert --saved_model_dir=./SavedModelLight_0000/ --output_file=model.tflite --enable_v1_converter
&lt;/denchmark-code&gt;

		</comment>
		<comment id='8' author='zerollzeng' date='2020-04-08T06:19:08Z'>
		Are you satisfied with the resolution of your issue?
&lt;denchmark-link:https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=Yes&amp;entry.2137816233=https://github.com/tensorflow/tensorflow/issues/38108&gt;Yes&lt;/denchmark-link&gt;

&lt;denchmark-link:https://docs.google.com/forms/d/e/1FAIpQLSfaP12TRhd9xSxjXZjcZFNXPGk4kc1-qMdv3gc6bEP90vY1ew/viewform?entry.85265664=No&amp;entry.2137816233=https://github.com/tensorflow/tensorflow/issues/38108&gt;No&lt;/denchmark-link&gt;

		</comment>
	</comments>
</bug>