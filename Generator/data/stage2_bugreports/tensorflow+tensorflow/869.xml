<bug id='869' author='pender' open_date='2016-01-24T22:14:39Z' closed_time='2016-01-28T07:02:21Z'>
	<summary>Error in description of outputs of rnn_decoder</summary>
	<description>
rnn_decoder is described as follows:
&lt;denchmark-code&gt;def rnn_decoder(decoder_inputs, initial_state, cell, loop_function=None,
                scope=None):
  """RNN decoder for the sequence-to-sequence model.
...
Returns:
...
    states: The state of each cell in each time-step. This is a list with
      length len(decoder_inputs) -- one item for each time-step.
&lt;/denchmark-code&gt;

States output does not appear to have the length as the decoder inputs. For example, the following script --
&lt;denchmark-code&gt;import tensorflow as tf
from tensorflow.models.rnn import rnn_cell
from tensorflow.models.rnn import seq2seq
batch_size = 4
seq_len = 5
num_layers = 3
vocab_size = 26
rnn_size = 100
cell = rnn_cell.MultiRNNCell([rnn_cell.BasicLSTMCell(rnn_size)] * num_layers)
input_data = tf.placeholder(tf.int32, [batch_size, seq_len])
embedding = tf.get_variable("embedding", [vocab_size, rnn_size])
decoder_inputs = tf.split(1, seq_len, tf.nn.embedding_lookup(embedding, input_data))
decoder_inputs = [tf.squeeze(input_, [1]) for input_ in decoder_inputs]
outputs, states = seq2seq.rnn_decoder(decoder_inputs, cell.zero_state(batch_size, tf.float32), cell)
print "Length of states is {}, but length of decoder inputs is {}".format(len(states), len(decoder_inputs))
&lt;/denchmark-code&gt;

gives the following output:
&lt;denchmark-code&gt;Length of states is 6, but length of decoder inputs is 5
&lt;/denchmark-code&gt;

This is still true if you replace BasicLSTMCell with GRUCell.
Is it correct to say that the length of states is equal to one greater than the length of decoder inputs? Seems to be true from playing around with it. Is this a fencepost error, where the states include the zeroth state plus the state following each decoder input?
	</description>
	<comments>
		<comment id='1' author='pender' date='2016-01-28T05:59:21Z'>
		This api is about to change. From now on rnn() and its cousins will return just the very last state instead of a list of intermediate states.
		</comment>
		<comment id='2' author='pender' date='2016-01-28T07:02:18Z'>
		Makes sense, that's how I've seen it used every time anyway. Thanks. I'll
close the issue.
On Wed, Jan 27, 2016 at 10:00 PM, ebrevdo &lt;denchmark-link:mailto:notifications@github.com&gt;notifications@github.com&lt;/denchmark-link&gt;
 wrote:

This api is about to change. From now on rnn() and its cousins will return
just the very last state instead of a list of intermediate states.
â€”
Reply to this email directly or view it on GitHub
#869 (comment)
.

		</comment>
	</comments>
</bug>