<bug id='12011' author='kzos' open_date='2017-08-03T17:00:28Z' closed_time='2018-01-30T00:05:29Z'>
	<summary>Quantized graph not running with commit:bb88ec7ecc4dc7ba72548a5115fb86e20b14de5b</summary>
	<description>
OS: Ubuntu 16.04 64bits
Android Version: 7.1 (Nougat)
NDK Version: android-ndk-r12b
commit &lt;denchmark-link:https://github.com/tensorflow/tensorflow/commit/bb88ec7ecc4dc7ba72548a5115fb86e20b14de5b&gt;bb88ec7&lt;/denchmark-link&gt;

Author: Alan Yee &lt;denchmark-link:mailto:alyee@ucsd.edu&gt;alyee@ucsd.edu&lt;/denchmark-link&gt;

Date:   Mon Jul 24 22:46:38 2017 -0700
LOG:
&lt;denchmark-code&gt;native : benchmark_model.cc:405 Input layers: [Variable]
native : benchmark_model.cc:406 Input shapes: [1,227,227,3]
native : benchmark_model.cc:407 Input types: [float]
native : benchmark_model.cc:408 Output layers: [prob]
native : benchmark_model.cc:409 Num runs: [50]
native : benchmark_model.cc:410 Inter-run delay (seconds): [-1.0]
native : benchmark_model.cc:411 Num threads: [16]
native : benchmark_model.cc:412 Benchmark name: []
native : benchmark_model.cc:413 Output prefix: []
native : benchmark_model.cc:414 Show sizes: [0]
native : benchmark_model.cc:415 Warmup runs: [2]
native : benchmark_model.cc:54 Loading TensorFlow.
native : benchmark_model.cc:61 Got config, 0 devices
can't determine number of CPU cores: assuming 4
native : op_kernel.cc:1142 OpKernel ('op: "BitwiseAnd" device_type: "CPU" constraint { name: "T" allowed_values { list { type: DT_UINT16 } } }') for unknown op: BitwiseAnd
native : op_kernel.cc:1142 OpKernel ('op: "BitwiseAnd" device_type: "CPU" constraint { name: "T" allowed_values { list { type: DT_UINT8 } } }') for unknown op: BitwiseAnd
native : op_kernel.cc:1142 OpKernel ('op: "BitwiseAnd" device_type: "CPU" constraint { name: "T" allowed_values { list { type: DT_INT64 } } }') for unknown op: BitwiseAnd
native : op_kernel.cc:1142 OpKernel ('op: "BitwiseAnd" device_type: "CPU" constraint { name: "T" allowed_values { list { type: DT_INT32 } } }') for unknown op: BitwiseAnd
native : op_kernel.cc:1142 OpKernel ('op: "BitwiseAnd" device_type: "CPU" constraint { name: "T" allowed_values { list { type: DT_INT16 } } }') for unknown op: BitwiseAnd
native : op_kernel.cc:1142 OpKernel ('op: "BitwiseAnd" device_type: "CPU" constraint { name: "T" allowed_values { list { type: DT_INT8 } } }') for unknown op: BitwiseAnd
native : op_kernel.cc:1142 OpKernel ('op: "BitwiseXor" device_type: "CPU" constraint { name: "T" allowed_values { list { type: DT_UINT16 } } }') for unknown op: BitwiseXor
native : op_kernel.cc:1142 OpKernel ('op: "BitwiseXor" device_type: "CPU" constraint { name: "T" allowed_values { list { type: DT_UINT8 } } }') for unknown op: BitwiseXor
native : op_kernel.cc:1142 OpKernel ('op: "BitwiseXor" device_type: "CPU" constraint { name: "T" allowed_values { list { type: DT_INT64 } } }') for unknown op: BitwiseXor
native : op_kernel.cc:1142 OpKernel ('op: "BitwiseXor" device_type: "CPU" constraint { name: "T" allowed_values { list { type: DT_INT32 } } }') for unknown op: BitwiseXor
native : op_kernel.cc:1142 OpKernel ('op: "BitwiseXor" device_type: "CPU" constraint { name: "T" allowed_values { list { type: DT_INT16 } } }') for unknown op: BitwiseXor
native : op_kernel.cc:1142 OpKernel ('op: "BitwiseXor" device_type: "CPU" constraint { name: "T" allowed_values { list { type: DT_INT8 } } }') for unknown op: BitwiseXor
native : op_kernel.cc:1142 OpKernel ('op: "Invert" device_type: "CPU" constraint { name: "T" allowed_values { list { type: DT_UINT16 } } }') for unknown op: Invert
native : op_kernel.cc:1142 OpKernel ('op: "Invert" device_type: "CPU" constraint { name: "T" allowed_values { list { type: DT_UINT8 } } }') for unknown op: Invert
native : op_kernel.cc:1142 OpKernel ('op: "Invert" device_type: "CPU" constraint { name: "T" allowed_values { list { type: DT_INT64 } } }') for unknown op: Invert
native : op_kernel.cc:1142 OpKernel ('op: "Invert" device_type: "CPU" constraint { name: "T" allowed_values { list { type: DT_INT32 } } }') for unknown op: Invert
native : op_kernel.cc:1142 OpKernel ('op: "Invert" device_type: "CPU" constraint { name: "T" allowed_values { list { type: DT_INT16 } } }') for unknown op: Invert
native : op_kernel.cc:1142 OpKernel ('op: "Invert" device_type: "CPU" constraint { name: "T" allowed_values { list { type: DT_INT8 } } }') for unknown op: Invert
native : op_kernel.cc:1142 OpKernel ('op: "BitwiseOr" device_type: "CPU" constraint { name: "T" allowed_values { list { type: DT_UINT16 } } }') for unknown op: BitwiseOr
native : op_kernel.cc:1142 OpKernel ('op: "BitwiseOr" device_type: "CPU" constraint { name: "T" allowed_values { list { type: DT_UINT8 } } }') for unknown op: BitwiseOr
native : op_kernel.cc:1142 OpKernel ('op: "BitwiseOr" device_type: "CPU" constraint { name: "T" allowed_values { list { type: DT_INT64 } } }') for unknown op: BitwiseOr
native : op_kernel.cc:1142 OpKernel ('op: "BitwiseOr" device_type: "CPU" constraint { name: "T" allowed_values { list { type: DT_INT32 } } }') for unknown op: BitwiseOr
native : op_kernel.cc:1142 OpKernel ('op: "BitwiseOr" device_type: "CPU" constraint { name: "T" allowed_values { list { type: DT_INT16 } } }') for unknown op: BitwiseOr
native : op_kernel.cc:1142 OpKernel ('op: "BitwiseOr" device_type: "CPU" constraint { name: "T" allowed_values { list { type: DT_INT8 } } }') for unknown op: BitwiseOr
native : benchmark_model.cc:74 Could not create TensorFlow Session: Not found: Op type not registered 'RoundToSteps' in binary running on localhost. Make sure the Op and Kernel are registered in the binary running in this process.

&lt;/denchmark-code&gt;

Earlier this error was not getting reported.
Thanks
	</description>
	<comments>
		<comment id='1' author='kzos' date='2017-08-04T00:03:15Z'>
		Did you confirm this works just before the commit, and fails just after?
		</comment>
		<comment id='2' author='kzos' date='2017-08-05T08:22:56Z'>
		I was using 1.2 version. later I pulled to that commit id, I am not sure from which commit id  this error is happening.
thanks
		</comment>
		<comment id='3' author='kzos' date='2017-08-05T16:57:46Z'>
		Can you post a small reproducible case?
		</comment>
		<comment id='4' author='kzos' date='2017-08-05T19:05:24Z'>
		Quantize the inception v3/alexnet and try running benchmark app.
		</comment>
		<comment id='5' author='kzos' date='2017-08-07T18:16:22Z'>
		&lt;denchmark-link:https://github.com/cwhipkey&gt;@cwhipkey&lt;/denchmark-link&gt;
 Can you see what's going on with the RoundToSteps Op?
		</comment>
		<comment id='6' author='kzos' date='2017-08-07T20:43:26Z'>
		This is an old bug in the quantize_graph.py script. We used to have a RoundToSteps op, but it was removed but the script still inserts it. The quantize_graph.py script is now obsolete though, since it's been replaced by the Graph Transform Tool's quantize_nodes rule:
&lt;denchmark-link:https://github.com/tensorflow/tensorflow/tree/master/tensorflow/tools/graph_transforms/#quantize_nodes&gt;https://github.com/tensorflow/tensorflow/tree/master/tensorflow/tools/graph_transforms/#quantize_nodes&lt;/denchmark-link&gt;

It is confusing though, and I need to officially deprecate quantize_graph.py, and add a logging message point people to the right tool to use.
		</comment>
		<comment id='7' author='kzos' date='2017-08-14T08:30:21Z'>
		&lt;denchmark-link:https://github.com/petewarden&gt;@petewarden&lt;/denchmark-link&gt;

any quick fix to get rid of this error?
		</comment>
		<comment id='8' author='kzos' date='2017-12-20T01:17:55Z'>
		It has been 14 days with no activity and this issue has an assignee.Please update the label and/or status accordingly.
		</comment>
		<comment id='9' author='kzos' date='2018-01-03T19:13:01Z'>
		It has been 14 days with no activity and this issue has an assignee.Please update the label and/or status accordingly.
		</comment>
		<comment id='10' author='kzos' date='2018-01-18T19:15:13Z'>
		Nagging Assignee: It has been 14 days with no activity and this issue has an assignee. Please update the label and/or status accordingly.
		</comment>
		<comment id='11' author='kzos' date='2018-01-30T00:05:28Z'>
		Since the recommended fix is to use the more up to date script, closing this one for now. I'm also hoping we'll have some improved documentation on quantization soon.
		</comment>
	</comments>
</bug>