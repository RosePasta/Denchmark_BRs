<bug id='14345' author='XinyuDu' open_date='2019-03-06T10:15:15Z' closed_time='2019-07-17T22:24:32Z'>
	<summary>Output inconsistency between mxnet model and converted onnx model</summary>
	<description>
&lt;denchmark-h:h2&gt;Description&lt;/denchmark-h&gt;

The inference result of a converted onnx model is not identical with the original mxnet model.
&lt;denchmark-h:h2&gt;Environment info&lt;/denchmark-h&gt;

Ubuntu 18.04
python 3.6
mxnet 1.3.1
onnx 1.2.1
&lt;denchmark-h:h2&gt;Mxnet model&lt;/denchmark-h&gt;

The light weight (1M) gender-age mxnet model can be download &lt;denchmark-link:https://github.com/deepinsight/insightface/tree/master/gender-age/model&gt;here&lt;/denchmark-link&gt;

&lt;denchmark-h:h2&gt;Converting script&lt;/denchmark-h&gt;

The mxnet model has been successfully converted to onnx model.
The script for converting a mxnet model to onnx model is:
&lt;denchmark-code&gt;import mxnet as mx
import numpy as np
from mxnet.contrib import onnx as onnx_mxnet

sym = './model-symbol.json'
params = './model-0000.params'

input_shape = (1,3,112,112)
# Path of the output file
onnx_file = './mxnet_exported_ga1m.onnx'

# Invoke export model API. It returns path of the converted onnx model
converted_model_path = onnx_mxnet.export_model(sym, params, [input_shape], np.float32, onnx_file)

print(converted_model_path)
&lt;/denchmark-code&gt;

&lt;denchmark-h:h2&gt;Inference script&lt;/denchmark-h&gt;

#mxnet model script
&lt;denchmark-code&gt;import numpy as np
import mxnet as mx
from PIL import Image
import cv2

#load test image
img = cv2.imread('./images/112image.png')
img = cv2.cvtColor(img, cv2.COLOR_BGR2RGB)
img = np.transpose(img, (2,0,1)).reshape([1,3,112,112])
data = mx.nd.array(img)
db = mx.io.DataBatch(data=(data,))

#load mxnet model
prefix = './model'
epoch = 0
sym, arg_params, aux_params = mx.model.load_checkpoint(prefix, epoch)
model = mx.mod.Module(symbol=sym, label_names = None)
model.bind(data_shapes=[('data', (1, 3, 112, 112))])
model.set_params(arg_params, aux_params)

#inference
model.forward(db, is_train=False)
ret = model.get_outputs()[0].asnumpy()

print(ret)
&lt;/denchmark-code&gt;

&lt;denchmark-h:h1&gt;onnx model script&lt;/denchmark-h&gt;

&lt;denchmark-code&gt;import mxnet as mx
import numpy as np
import mxnet.contrib.onnx as onnx_mxnet
import cv2

#load test image
img = cv2.imread('./images/112image.png')
img = cv2.cvtColor(img, cv2.COLOR_BGR2RGB)
img = np.transpose(img, (2,0,1)).reshape([1,3,112,112])
data = mx.nd.array(img)
db = mx.io.DataBatch(data=(data,))

#load onnx model
model_path = './mxnet_exported_ga1m.onnx'
sym, arg_params, aux_params = onnx_mxnet.import_model(model_path)
model = mx.mod.Module(symbol=sym, label_names = None)
model.bind(data_shapes=[('data', (1, 3, 112, 112))])
model.set_params(arg_params, aux_params)

#inference
model.forward(db, is_train=False)
ret = model.get_outputs()[0].asnumpy()

print(ret)
&lt;/denchmark-code&gt;

The output of the above two scripts is inconsistent.
	</description>
	<comments>
		<comment id='1' author='XinyuDu' date='2019-03-06T10:15:19Z'>
		Hey, this is the MXNet Label Bot.
Thank you for submitting the issue! I will try and suggest some labels so that the appropriate MXNet community members can help resolve it.
Here are my recommended labels: ONNX, Bug
		</comment>
		<comment id='2' author='XinyuDu' date='2019-03-06T17:57:31Z'>
		&lt;denchmark-link:https://github.com/mxnet-label-bot&gt;@mxnet-label-bot&lt;/denchmark-link&gt;
 Add [ONNX, Bug]
		</comment>
		<comment id='3' author='XinyuDu' date='2019-03-07T14:28:11Z'>
		Thanks for your report!
We will check it.
		</comment>
		<comment id='4' author='XinyuDu' date='2019-03-08T00:49:09Z'>
		&lt;denchmark-link:https://github.com/XinyuDu&gt;@XinyuDu&lt;/denchmark-link&gt;
 I downloaded your model, and given the code snippet, I was not able to convert it to ONNX.
I got the following error : 
		</comment>
		<comment id='5' author='XinyuDu' date='2019-03-08T09:13:13Z'>
		
@XinyuDu I downloaded your model, and given the code snippet, I was not able to convert it to ONNX.
I got the following error :  TypeError: __new__() got an unexpected keyword argument 'serialized_options'

&lt;denchmark-link:https://github.com/piyushghai&gt;@piyushghai&lt;/denchmark-link&gt;
  The converting script runs successfully in my environment. I think maybe you should try  before converting the model.
		</comment>
		<comment id='6' author='XinyuDu' date='2019-03-08T19:32:28Z'>
		&lt;denchmark-link:https://github.com/XinyuDu&gt;@XinyuDu&lt;/denchmark-link&gt;
 Thanks I was missing protobuf.
So I was able to reproduce your issue.
I loaded both the models and found there is a difference in the layers in both of them.
I used mx.visualization.print_summary(symbol) to visualize the layers in the model.
Here's the one for MXNet only model :
&lt;denchmark-code&gt;Layer (type)                                        Output Shape            Param #     Previous Layer                  
========================================================================================================================
data(null)                                                                  0                                           
________________________________________________________________________________________________________________________
_minusscalar0(_minus_scalar)                                                0           data                            
________________________________________________________________________________________________________________________
_mulscalar0(_mul_scalar)                                                    0           _minusscalar0                   
________________________________________________________________________________________________________________________
conv_1_conv2d(Convolution)                                                  0           _mulscalar0                     
________________________________________________________________________________________________________________________
conv_1_batchnorm(BatchNorm)                                                 0           conv_1_conv2d                   
________________________________________________________________________________________________________________________
conv_1_relu(Activation)                                                     0           conv_1_batchnorm                
________________________________________________________________________________________________________________________
conv_2_dw_conv2d(Convolution)                                               0           conv_1_relu                     
________________________________________________________________________________________________________________________
conv_2_dw_batchnorm(BatchNorm)                                              0           conv_2_dw_conv2d                
________________________________________________________________________________________________________________________
conv_2_dw_relu(Activation)                                                  0           conv_2_dw_batchnorm             
________________________________________________________________________________________________________________________
conv_2_conv2d(Convolution)                                                  0           conv_2_dw_relu                  
________________________________________________________________________________________________________________________
conv_2_batchnorm(BatchNorm)                                                 0           conv_2_conv2d                   
________________________________________________________________________________________________________________________
conv_2_relu(Activation)                                                     0           conv_2_batchnorm                
________________________________________________________________________________________________________________________
conv_3_dw_conv2d(Convolution)                                               0           conv_2_relu                     
________________________________________________________________________________________________________________________
conv_3_dw_batchnorm(BatchNorm)                                              0           conv_3_dw_conv2d                
________________________________________________________________________________________________________________________
conv_3_dw_relu(Activation)                                                  0           conv_3_dw_batchnorm             
________________________________________________________________________________________________________________________
conv_3_conv2d(Convolution)                                                  0           conv_3_dw_relu                  
________________________________________________________________________________________________________________________
conv_3_batchnorm(BatchNorm)                                                 0           conv_3_conv2d                   
________________________________________________________________________________________________________________________
conv_3_relu(Activation)                                                     0           conv_3_batchnorm                
________________________________________________________________________________________________________________________
conv_4_dw_conv2d(Convolution)                                               0           conv_3_relu                     
________________________________________________________________________________________________________________________
conv_4_dw_batchnorm(BatchNorm)                                              0           conv_4_dw_conv2d                
________________________________________________________________________________________________________________________
conv_4_dw_relu(Activation)                                                  0           conv_4_dw_batchnorm             
________________________________________________________________________________________________________________________
conv_4_conv2d(Convolution)                                                  0           conv_4_dw_relu                  
________________________________________________________________________________________________________________________
conv_4_batchnorm(BatchNorm)                                                 0           conv_4_conv2d                   
________________________________________________________________________________________________________________________
conv_4_relu(Activation)                                                     0           conv_4_batchnorm                
________________________________________________________________________________________________________________________
conv_5_dw_conv2d(Convolution)                                               0           conv_4_relu                     
________________________________________________________________________________________________________________________
conv_5_dw_batchnorm(BatchNorm)                                              0           conv_5_dw_conv2d                
________________________________________________________________________________________________________________________
conv_5_dw_relu(Activation)                                                  0           conv_5_dw_batchnorm             
________________________________________________________________________________________________________________________
conv_5_conv2d(Convolution)                                                  0           conv_5_dw_relu                  
________________________________________________________________________________________________________________________
conv_5_batchnorm(BatchNorm)                                                 0           conv_5_conv2d                   
________________________________________________________________________________________________________________________
conv_5_relu(Activation)                                                     0           conv_5_batchnorm                
________________________________________________________________________________________________________________________
conv_6_dw_conv2d(Convolution)                                               0           conv_5_relu                     
________________________________________________________________________________________________________________________
conv_6_dw_batchnorm(BatchNorm)                                              0           conv_6_dw_conv2d                
________________________________________________________________________________________________________________________
conv_6_dw_relu(Activation)                                                  0           conv_6_dw_batchnorm             
________________________________________________________________________________________________________________________
conv_6_conv2d(Convolution)                                                  0           conv_6_dw_relu                  
________________________________________________________________________________________________________________________
conv_6_batchnorm(BatchNorm)                                                 0           conv_6_conv2d                   
________________________________________________________________________________________________________________________
conv_6_relu(Activation)                                                     0           conv_6_batchnorm                
________________________________________________________________________________________________________________________
conv_7_dw_conv2d(Convolution)                                               0           conv_6_relu                     
________________________________________________________________________________________________________________________
conv_7_dw_batchnorm(BatchNorm)                                              0           conv_7_dw_conv2d                
________________________________________________________________________________________________________________________
conv_7_dw_relu(Activation)                                                  0           conv_7_dw_batchnorm             
________________________________________________________________________________________________________________________
conv_7_conv2d(Convolution)                                                  0           conv_7_dw_relu                  
________________________________________________________________________________________________________________________
conv_7_batchnorm(BatchNorm)                                                 0           conv_7_conv2d                   
________________________________________________________________________________________________________________________
conv_7_relu(Activation)                                                     0           conv_7_batchnorm                
________________________________________________________________________________________________________________________
conv_8_dw_conv2d(Convolution)                                               0           conv_7_relu                     
________________________________________________________________________________________________________________________
conv_8_dw_batchnorm(BatchNorm)                                              0           conv_8_dw_conv2d                
________________________________________________________________________________________________________________________
conv_8_dw_relu(Activation)                                                  0           conv_8_dw_batchnorm             
________________________________________________________________________________________________________________________
conv_8_conv2d(Convolution)                                                  0           conv_8_dw_relu                  
________________________________________________________________________________________________________________________
conv_8_batchnorm(BatchNorm)                                                 0           conv_8_conv2d                   
________________________________________________________________________________________________________________________
conv_8_relu(Activation)                                                     0           conv_8_batchnorm                
________________________________________________________________________________________________________________________
conv_9_dw_conv2d(Convolution)                                               0           conv_8_relu                     
________________________________________________________________________________________________________________________
conv_9_dw_batchnorm(BatchNorm)                                              0           conv_9_dw_conv2d                
________________________________________________________________________________________________________________________
conv_9_dw_relu(Activation)                                                  0           conv_9_dw_batchnorm             
________________________________________________________________________________________________________________________
conv_9_conv2d(Convolution)                                                  0           conv_9_dw_relu                  
________________________________________________________________________________________________________________________
conv_9_batchnorm(BatchNorm)                                                 0           conv_9_conv2d                   
________________________________________________________________________________________________________________________
conv_9_relu(Activation)                                                     0           conv_9_batchnorm                
________________________________________________________________________________________________________________________
conv_10_dw_conv2d(Convolution)                                              0           conv_9_relu                     
________________________________________________________________________________________________________________________
conv_10_dw_batchnorm(BatchNorm)                                             0           conv_10_dw_conv2d               
________________________________________________________________________________________________________________________
conv_10_dw_relu(Activation)                                                 0           conv_10_dw_batchnorm            
________________________________________________________________________________________________________________________
conv_10_conv2d(Convolution)                                                 0           conv_10_dw_relu                 
________________________________________________________________________________________________________________________
conv_10_batchnorm(BatchNorm)                                                0           conv_10_conv2d                  
________________________________________________________________________________________________________________________
conv_10_relu(Activation)                                                    0           conv_10_batchnorm               
________________________________________________________________________________________________________________________
conv_11_dw_conv2d(Convolution)                                              0           conv_10_relu                    
________________________________________________________________________________________________________________________
conv_11_dw_batchnorm(BatchNorm)                                             0           conv_11_dw_conv2d               
________________________________________________________________________________________________________________________
conv_11_dw_relu(Activation)                                                 0           conv_11_dw_batchnorm            
________________________________________________________________________________________________________________________
conv_11_conv2d(Convolution)                                                 0           conv_11_dw_relu                 
________________________________________________________________________________________________________________________
conv_11_batchnorm(BatchNorm)                                                0           conv_11_conv2d                  
________________________________________________________________________________________________________________________
conv_11_relu(Activation)                                                    0           conv_11_batchnorm               
________________________________________________________________________________________________________________________
conv_12_dw_conv2d(Convolution)                                              0           conv_11_relu                    
________________________________________________________________________________________________________________________
conv_12_dw_batchnorm(BatchNorm)                                             0           conv_12_dw_conv2d               
________________________________________________________________________________________________________________________
conv_12_dw_relu(Activation)                                                 0           conv_12_dw_batchnorm            
________________________________________________________________________________________________________________________
conv_12_conv2d(Convolution)                                                 0           conv_12_dw_relu                 
________________________________________________________________________________________________________________________
conv_12_batchnorm(BatchNorm)                                                0           conv_12_conv2d                  
________________________________________________________________________________________________________________________
conv_12_relu(Activation)                                                    0           conv_12_batchnorm               
________________________________________________________________________________________________________________________
conv_13_dw_conv2d(Convolution)                                              0           conv_12_relu                    
________________________________________________________________________________________________________________________
conv_13_dw_batchnorm(BatchNorm)                                             0           conv_13_dw_conv2d               
________________________________________________________________________________________________________________________
conv_13_dw_relu(Activation)                                                 0           conv_13_dw_batchnorm            
________________________________________________________________________________________________________________________
conv_13_conv2d(Convolution)                                                 0           conv_13_dw_relu                 
________________________________________________________________________________________________________________________
conv_13_batchnorm(BatchNorm)                                                0           conv_13_conv2d                  
________________________________________________________________________________________________________________________
conv_13_relu(Activation)                                                    0           conv_13_batchnorm               
________________________________________________________________________________________________________________________
conv_14_dw_conv2d(Convolution)                                              0           conv_13_relu                    
________________________________________________________________________________________________________________________
conv_14_dw_batchnorm(BatchNorm)                                             0           conv_14_dw_conv2d               
________________________________________________________________________________________________________________________
conv_14_dw_relu(Activation)                                                 0           conv_14_dw_batchnorm            
________________________________________________________________________________________________________________________
conv_14_conv2d(Convolution)                                                 0           conv_14_dw_relu                 
________________________________________________________________________________________________________________________
conv_14_batchnorm(BatchNorm)                                                0           conv_14_conv2d                  
________________________________________________________________________________________________________________________
conv_14_relu(Activation)                                                    0           conv_14_batchnorm               
________________________________________________________________________________________________________________________
bn1(BatchNorm)                                                              0           conv_14_relu                    
________________________________________________________________________________________________________________________
relu1(LeakyReLU)                                                            0           bn1                             
________________________________________________________________________________________________________________________
pool1(Pooling)                                                              0           relu1                           
________________________________________________________________________________________________________________________
flatten0(Flatten)                                                           0           pool1                           
________________________________________________________________________________________________________________________
pre_fc1(FullyConnected)                                                     202         flatten0                        
________________________________________________________________________________________________________________________
fc1(BatchNorm)                                                              0           pre_fc1                         
========================================================================================================================
Total params: 202
________________________________________________________________________________________________________________________
&lt;/denchmark-code&gt;

Here's on that was converted from ONNX to MXNet :
&lt;denchmark-code&gt;In [24]: mx.visualization.print_summary(sym)
________________________________________________________________________________________________________________________
Layer (type)                                        Output Shape            Param #     Previous Layer                  
========================================================================================================================
data(null)                                                                  0                                           
________________________________________________________________________________________________________________________
_minusscalar0(broadcast_sub)                                                0           data                            
________________________________________________________________________________________________________________________
_mulscalar0(broadcast_mul)                                                  0           _minusscalar0                   
________________________________________________________________________________________________________________________
pad27(Pad)                                                                  0           _mulscalar0                     
________________________________________________________________________________________________________________________
convolution27(Convolution)                                                  0           pad27                           
________________________________________________________________________________________________________________________
conv_1_batchnorm(BatchNorm)                                                 0           convolution27                   
________________________________________________________________________________________________________________________
conv_1_relu(relu)                                                           0           conv_1_batchnorm                
________________________________________________________________________________________________________________________
pad28(Pad)                                                                  0           conv_1_relu                     
________________________________________________________________________________________________________________________
convolution28(Convolution)                                                  0           pad28                           
________________________________________________________________________________________________________________________
conv_2_dw_batchnorm(BatchNorm)                                              0           convolution28                   
________________________________________________________________________________________________________________________
conv_2_dw_relu(relu)                                                        0           conv_2_dw_batchnorm             
________________________________________________________________________________________________________________________
pad29(Pad)                                                                  0           conv_2_dw_relu                  
________________________________________________________________________________________________________________________
convolution29(Convolution)                                                  0           pad29                           
________________________________________________________________________________________________________________________
conv_2_batchnorm(BatchNorm)                                                 0           convolution29                   
________________________________________________________________________________________________________________________
conv_2_relu(relu)                                                           0           conv_2_batchnorm                
________________________________________________________________________________________________________________________
pad30(Pad)                                                                  0           conv_2_relu                     
________________________________________________________________________________________________________________________
convolution30(Convolution)                                                  0           pad30                           
________________________________________________________________________________________________________________________
conv_3_dw_batchnorm(BatchNorm)                                              0           convolution30                   
________________________________________________________________________________________________________________________
conv_3_dw_relu(relu)                                                        0           conv_3_dw_batchnorm             
________________________________________________________________________________________________________________________
pad31(Pad)                                                                  0           conv_3_dw_relu                  
________________________________________________________________________________________________________________________
convolution31(Convolution)                                                  0           pad31                           
________________________________________________________________________________________________________________________
conv_3_batchnorm(BatchNorm)                                                 0           convolution31                   
________________________________________________________________________________________________________________________
conv_3_relu(relu)                                                           0           conv_3_batchnorm                
________________________________________________________________________________________________________________________
pad32(Pad)                                                                  0           conv_3_relu                     
________________________________________________________________________________________________________________________
convolution32(Convolution)                                                  0           pad32                           
________________________________________________________________________________________________________________________
conv_4_dw_batchnorm(BatchNorm)                                              0           convolution32                   
________________________________________________________________________________________________________________________
conv_4_dw_relu(relu)                                                        0           conv_4_dw_batchnorm             
________________________________________________________________________________________________________________________
pad33(Pad)                                                                  0           conv_4_dw_relu                  
________________________________________________________________________________________________________________________
convolution33(Convolution)                                                  0           pad33                           
________________________________________________________________________________________________________________________
conv_4_batchnorm(BatchNorm)                                                 0           convolution33                   
________________________________________________________________________________________________________________________
conv_4_relu(relu)                                                           0           conv_4_batchnorm                
________________________________________________________________________________________________________________________
pad34(Pad)                                                                  0           conv_4_relu                     
________________________________________________________________________________________________________________________
convolution34(Convolution)                                                  0           pad34                           
________________________________________________________________________________________________________________________
conv_5_dw_batchnorm(BatchNorm)                                              0           convolution34                   
________________________________________________________________________________________________________________________
conv_5_dw_relu(relu)                                                        0           conv_5_dw_batchnorm             
________________________________________________________________________________________________________________________
pad35(Pad)                                                                  0           conv_5_dw_relu                  
________________________________________________________________________________________________________________________
convolution35(Convolution)                                                  0           pad35                           
________________________________________________________________________________________________________________________
conv_5_batchnorm(BatchNorm)                                                 0           convolution35                   
________________________________________________________________________________________________________________________
conv_5_relu(relu)                                                           0           conv_5_batchnorm                
________________________________________________________________________________________________________________________
pad36(Pad)                                                                  0           conv_5_relu                     
________________________________________________________________________________________________________________________
convolution36(Convolution)                                                  0           pad36                           
________________________________________________________________________________________________________________________
conv_6_dw_batchnorm(BatchNorm)                                              0           convolution36                   
________________________________________________________________________________________________________________________
conv_6_dw_relu(relu)                                                        0           conv_6_dw_batchnorm             
________________________________________________________________________________________________________________________
pad37(Pad)                                                                  0           conv_6_dw_relu                  
________________________________________________________________________________________________________________________
convolution37(Convolution)                                                  0           pad37                           
________________________________________________________________________________________________________________________
conv_6_batchnorm(BatchNorm)                                                 0           convolution37                   
________________________________________________________________________________________________________________________
conv_6_relu(relu)                                                           0           conv_6_batchnorm                
________________________________________________________________________________________________________________________
pad38(Pad)                                                                  0           conv_6_relu                     
________________________________________________________________________________________________________________________
convolution38(Convolution)                                                  0           pad38                           
________________________________________________________________________________________________________________________
conv_7_dw_batchnorm(BatchNorm)                                              0           convolution38                   
________________________________________________________________________________________________________________________
conv_7_dw_relu(relu)                                                        0           conv_7_dw_batchnorm             
________________________________________________________________________________________________________________________
pad39(Pad)                                                                  0           conv_7_dw_relu                  
________________________________________________________________________________________________________________________
convolution39(Convolution)                                                  0           pad39                           
________________________________________________________________________________________________________________________
conv_7_batchnorm(BatchNorm)                                                 0           convolution39                   
________________________________________________________________________________________________________________________
conv_7_relu(relu)                                                           0           conv_7_batchnorm                
________________________________________________________________________________________________________________________
pad40(Pad)                                                                  0           conv_7_relu                     
________________________________________________________________________________________________________________________
convolution40(Convolution)                                                  0           pad40                           
________________________________________________________________________________________________________________________
conv_8_dw_batchnorm(BatchNorm)                                              0           convolution40                   
________________________________________________________________________________________________________________________
conv_8_dw_relu(relu)                                                        0           conv_8_dw_batchnorm             
________________________________________________________________________________________________________________________
pad41(Pad)                                                                  0           conv_8_dw_relu                  
________________________________________________________________________________________________________________________
convolution41(Convolution)                                                  0           pad41                           
________________________________________________________________________________________________________________________
conv_8_batchnorm(BatchNorm)                                                 0           convolution41                   
________________________________________________________________________________________________________________________
conv_8_relu(relu)                                                           0           conv_8_batchnorm                
________________________________________________________________________________________________________________________
pad42(Pad)                                                                  0           conv_8_relu                     
________________________________________________________________________________________________________________________
convolution42(Convolution)                                                  0           pad42                           
________________________________________________________________________________________________________________________
conv_9_dw_batchnorm(BatchNorm)                                              0           convolution42                   
________________________________________________________________________________________________________________________
conv_9_dw_relu(relu)                                                        0           conv_9_dw_batchnorm             
________________________________________________________________________________________________________________________
pad43(Pad)                                                                  0           conv_9_dw_relu                  
________________________________________________________________________________________________________________________
convolution43(Convolution)                                                  0           pad43                           
________________________________________________________________________________________________________________________
conv_9_batchnorm(BatchNorm)                                                 0           convolution43                   
________________________________________________________________________________________________________________________
conv_9_relu(relu)                                                           0           conv_9_batchnorm                
________________________________________________________________________________________________________________________
pad44(Pad)                                                                  0           conv_9_relu                     
________________________________________________________________________________________________________________________
convolution44(Convolution)                                                  0           pad44                           
________________________________________________________________________________________________________________________
conv_10_dw_batchnorm(BatchNorm)                                             0           convolution44                   
________________________________________________________________________________________________________________________
conv_10_dw_relu(relu)                                                       0           conv_10_dw_batchnorm            
________________________________________________________________________________________________________________________
pad45(Pad)                                                                  0           conv_10_dw_relu                 
________________________________________________________________________________________________________________________
convolution45(Convolution)                                                  0           pad45                           
________________________________________________________________________________________________________________________
conv_10_batchnorm(BatchNorm)                                                0           convolution45                   
________________________________________________________________________________________________________________________
conv_10_relu(relu)                                                          0           conv_10_batchnorm               
________________________________________________________________________________________________________________________
pad46(Pad)                                                                  0           conv_10_relu                    
________________________________________________________________________________________________________________________
convolution46(Convolution)                                                  0           pad46                           
________________________________________________________________________________________________________________________
conv_11_dw_batchnorm(BatchNorm)                                             0           convolution46                   
________________________________________________________________________________________________________________________
conv_11_dw_relu(relu)                                                       0           conv_11_dw_batchnorm            
________________________________________________________________________________________________________________________
pad47(Pad)                                                                  0           conv_11_dw_relu                 
________________________________________________________________________________________________________________________
convolution47(Convolution)                                                  0           pad47                           
________________________________________________________________________________________________________________________
conv_11_batchnorm(BatchNorm)                                                0           convolution47                   
________________________________________________________________________________________________________________________
conv_11_relu(relu)                                                          0           conv_11_batchnorm               
________________________________________________________________________________________________________________________
pad48(Pad)                                                                  0           conv_11_relu                    
________________________________________________________________________________________________________________________
convolution48(Convolution)                                                  0           pad48                           
________________________________________________________________________________________________________________________
conv_12_dw_batchnorm(BatchNorm)                                             0           convolution48                   
________________________________________________________________________________________________________________________
conv_12_dw_relu(relu)                                                       0           conv_12_dw_batchnorm            
________________________________________________________________________________________________________________________
pad49(Pad)                                                                  0           conv_12_dw_relu                 
________________________________________________________________________________________________________________________
convolution49(Convolution)                                                  0           pad49                           
________________________________________________________________________________________________________________________
conv_12_batchnorm(BatchNorm)                                                0           convolution49                   
________________________________________________________________________________________________________________________
conv_12_relu(relu)                                                          0           conv_12_batchnorm               
________________________________________________________________________________________________________________________
pad50(Pad)                                                                  0           conv_12_relu                    
________________________________________________________________________________________________________________________
convolution50(Convolution)                                                  0           pad50                           
________________________________________________________________________________________________________________________
conv_13_dw_batchnorm(BatchNorm)                                             0           convolution50                   
________________________________________________________________________________________________________________________
conv_13_dw_relu(relu)                                                       0           conv_13_dw_batchnorm            
________________________________________________________________________________________________________________________
pad51(Pad)                                                                  0           conv_13_dw_relu                 
________________________________________________________________________________________________________________________
convolution51(Convolution)                                                  0           pad51                           
________________________________________________________________________________________________________________________
conv_13_batchnorm(BatchNorm)                                                0           convolution51                   
________________________________________________________________________________________________________________________
conv_13_relu(relu)                                                          0           conv_13_batchnorm               
________________________________________________________________________________________________________________________
pad52(Pad)                                                                  0           conv_13_relu                    
________________________________________________________________________________________________________________________
convolution52(Convolution)                                                  0           pad52                           
________________________________________________________________________________________________________________________
conv_14_dw_batchnorm(BatchNorm)                                             0           convolution52                   
________________________________________________________________________________________________________________________
conv_14_dw_relu(relu)                                                       0           conv_14_dw_batchnorm            
________________________________________________________________________________________________________________________
pad53(Pad)                                                                  0           conv_14_dw_relu                 
________________________________________________________________________________________________________________________
convolution53(Convolution)                                                  0           pad53                           
________________________________________________________________________________________________________________________
conv_14_batchnorm(BatchNorm)                                                0           convolution53                   
________________________________________________________________________________________________________________________
conv_14_relu(relu)                                                          0           conv_14_batchnorm               
________________________________________________________________________________________________________________________
bn1(BatchNorm)                                                              0           conv_14_relu                    
________________________________________________________________________________________________________________________
relu1(LeakyReLU)                                                            0           bn1                             
________________________________________________________________________________________________________________________
pool1(Pooling)                                                              0           relu1                           
________________________________________________________________________________________________________________________
flatten0(Flatten)                                                           0           pool1                           
________________________________________________________________________________________________________________________
flatten1(Flatten)                                                           0           flatten0                        
________________________________________________________________________________________________________________________
linalg_gemm21(_linalg_gemm2)                                                0           flatten1                        
________________________________________________________________________________________________________________________
_mulscalar1(_mul_scalar)                                                    0                                           
________________________________________________________________________________________________________________________
broadcast_add1(broadcast_add)                                               0           linalg_gemm21                   
                                                                                        _mulscalar1                     
________________________________________________________________________________________________________________________
fc1(BatchNorm)                                                              0           broadcast_add1                  
========================================================================================================================
Total params: 0
________________________________________________________________________________________________________________________
&lt;/denchmark-code&gt;

The model summaries start deviating from the Convolution layer itself and I believe this is the reason why you are seeing different inference outputs.
		</comment>
		<comment id='7' author='XinyuDu' date='2019-03-11T22:54:14Z'>
		could you check the behavior with count_include_pad=True and with count_include_pad=False in Pooling. Based on info from &lt;denchmark-link:https://github.com/apache/incubator-mxnet/issues/10194&gt;#10194&lt;/denchmark-link&gt;

		</comment>
		<comment id='8' author='XinyuDu' date='2019-05-13T17:24:24Z'>
		&lt;denchmark-link:https://github.com/mxnet-label-bot&gt;@mxnet-label-bot&lt;/denchmark-link&gt;
 add [Pending Requester Info]
		</comment>
		<comment id='9' author='XinyuDu' date='2019-07-17T22:24:32Z'>
		&lt;denchmark-link:https://github.com/XinyuDu&gt;@XinyuDu&lt;/denchmark-link&gt;
 Close this issue due to inactivity. Please feel free to reopen if problem persist
		</comment>
	</comments>
</bug>