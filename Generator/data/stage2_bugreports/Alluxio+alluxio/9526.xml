<bug id='9526' author='lodocj' open_date='2019-07-22T13:52:48Z' closed_time='2019-07-25T05:03:14Z'>
	<summary>Job_master health check failed</summary>
	<description>
Alluxio Version:
v2.0.0
Describe the bug
JOB_MASTERâ€˜s main class is alluxio.master.AlluxioJobMaster  , but MasterHealthCheckClient check command were as follows:

ssh -o StrictHostKeyChecking=no -o ConnectTimeout=5 hostname ps -ef | grep "alluxio.master.job.JobMaster$" | grep "java" | awk '{ print $2; }'

Class alluxio.master.job.JobMaster not on the process list so that will never sucessed.
To Reproduce
Steps to reproduce the behavior (as minimally and precisely as possible)
Expected behavior
A clear and concise description of what you expected to happen.
Urgency
Describe the impact and urgency of the bug.
Additional context
Add any other context about the problem here.
	</description>
	<comments>
		<comment id='1' author='lodocj' date='2019-07-22T16:10:16Z'>
		Thanks for reporting this! You are correct that the check won't succeed currently.
I took a closer look. Specifically this should happen when the job master is running in HA mode and the alluxio-monitor.sh script is used to check the health of the job master.
We are hoping in a near release to completely remove the need to for the ps -ef | grep in the health check and instead replace it with a ping to the RPC port of the job master. Currently, in HA mode we don't open RPC ports on the non-primary job masters, so we can't use the RPC ping to check if they are up.
		</comment>
	</comments>
</bug>