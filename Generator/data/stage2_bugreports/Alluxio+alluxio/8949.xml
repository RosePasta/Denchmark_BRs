<bug id='8949' author='mingfang' open_date='2019-05-01T11:53:20Z' closed_time='2019-05-10T11:49:55Z'>
	<summary>hadoop maven dependencies should be in provided scope</summary>
	<description>
When integrating Alluxio with environments that already has hadoop jars such as Spark Workers, the hadoop jars from Alluxio conflicts with the hadoop jars from the Spark Worker.
This leads to serialization and/or class casting problems.
Putting the hadoop dependencies in provided scope avoids this problem.
	</description>
	<comments>
		<comment id='1' author='mingfang' date='2019-05-01T22:42:11Z'>
		HI &lt;denchmark-link:https://github.com/mingfang&gt;@mingfang&lt;/denchmark-link&gt;
, thanks for reporting the issue. Can you specify which version of Alluxio and Spark you are using? Also can you provide more details of your workaround? Thx
		</comment>
		<comment id='2' author='mingfang' date='2019-05-02T01:36:05Z'>
		I was using Alluxio 2.0.0-preview and Spark 2.3.3.
You will find detailed documentation and see the actual test in my Jupyter notebook here &lt;denchmark-link:https://github.com/mingfang/terraform-provider-k8s/blob/master/examples/alluxio/AlluxioExample.ipynb&gt;https://github.com/mingfang/terraform-provider-k8s/blob/master/examples/alluxio/AlluxioExample.ipynb&lt;/denchmark-link&gt;

		</comment>
		<comment id='3' author='mingfang' date='2019-05-08T04:39:51Z'>
		&lt;denchmark-link:https://github.com/mingfang&gt;@mingfang&lt;/denchmark-link&gt;
 when integrating with spark/hadoop, which jars exactly are you putting on their classpath to access Alluxio?
The proper client jar uses shaded dependencies which shouldn't result in any conflicts. From your link at &lt;denchmark-link:https://github.com/mingfang/terraform-provider-k8s/blob/master/examples/alluxio/AlluxioExample.ipynb&gt;https://github.com/mingfang/terraform-provider-k8s/blob/master/examples/alluxio/AlluxioExample.ipynb&lt;/denchmark-link&gt;
 I see you're referencing . This jar doesn't have the dependencies shaded which is probably why you're seeing issues.
The jar which should be used can be found at {ALLUXIO_INSTALL}/client/alluxio-${VERSION}-client.jar.
		</comment>
		<comment id='4' author='mingfang' date='2019-05-08T17:45:49Z'>
		&lt;denchmark-link:https://github.com/ZacBlanco&gt;@ZacBlanco&lt;/denchmark-link&gt;
 can you please publish that artifact to maven?
		</comment>
		<comment id='5' author='mingfang' date='2019-05-08T17:48:44Z'>
		I don't have the power to publish the maven artifact, but I don't think this is something we want to publish. You can get it by downloading an alluxio tarball at &lt;denchmark-link:https://www.alluxio.io/download/&gt;https://www.alluxio.io/download/&lt;/denchmark-link&gt;
 or by building from source and looking in the  folder.
&lt;denchmark-link:https://github.com/apc999&gt;@apc999&lt;/denchmark-link&gt;
 may have other opinions on this however. Feel free to chime in.
		</comment>
		<comment id='6' author='mingfang' date='2019-05-10T11:49:55Z'>
		Since the official solution is to use the {ALLUXIO_INSTALL}/client/alluxio-${VERSION}-client.jar then I'm closing this issue.
		</comment>
	</comments>
</bug>