<bug id='9501' author='guang7niu' open_date='2019-07-19T06:32:39Z' closed_time='2019-07-24T17:53:38Z'>
	<summary>Register worker fails with UnsupportedOperation exception</summary>
	<description>
Alluxio Version:
2.0.1-snapshot
Describe the bug
When worker registers itself to master with a list of blocks, master will check for duplication of block ids. However the lambda expression will try to modify the block list provided by protobuf which is readonly, hence a UnsupportedException is raised.
Example:
core/server/master/src/main/java/alluxio/master/block/BlockMasterWorkerServiceHandler.java::registerWorker &amp; blockHeartbeat,
Collectors.toMap  (e1, e2) -&gt; {
e1.addAll(e2);
return e1;
To Reproduce
Just restart the worker (depends on what block is in worker, may not be reproduced every time)
Expected behavior
No exception raised.
Urgency
Middle
Additional context
Add any other context about the problem here.
	</description>
	<comments>
		<comment id='1' author='guang7niu' date='2019-07-23T05:28:39Z'>
		&lt;denchmark-link:https://github.com/apc999&gt;@apc999&lt;/denchmark-link&gt;
 please close this issue if it is fixed.
		</comment>
		<comment id='2' author='guang7niu' date='2019-07-24T17:53:38Z'>
		Fixed in 2.1.0-SNAPSHOT and cherry-picked into 2.0 branch by &lt;denchmark-link:https://github.com/Alluxio/alluxio/pull/9517&gt;#9517&lt;/denchmark-link&gt;

		</comment>
	</comments>
</bug>