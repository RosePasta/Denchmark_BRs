<bug id='11239' author='ns1123' open_date='2020-04-06T15:32:41Z' closed_time='2020-04-08T20:08:38Z'>
	<summary>Impersonation conflicts with HDFS change owner</summary>
	<description>
Alluxio Version:
2.2.0
Describe the bug
When mounting an HDFS UFS as a superuser and using with Presto, exceptions are thrown where Alluxio fails to change owner on the HDFS UFS since it is impersonating as the presto end user.
More specifically, the HDFS client that is used by Alluxio to perform operations with impersonation is also being used for superuser operations like 'chown'. The HDFS UFS changeOwner operation needs to be modified to run without impersonation so that it can succeed.
To Reproduce
Run Presto on Alluxio with Kerberized HDFS (mounted with full impersonation and superuser privilege on HDFS). Trigger a query on Presto with a non-superuser that does a write (CREATE TABLE AS)
Expected behavior
Alluxio correctly issues the change owner command on an HDFS client without impersonation so as to allow the command to succeed.
Urgency
Urgent. Directly impacts end users attempting to do writes.
Additional context
N/A
	</description>
	<comments>
		<comment id='1' author='ns1123' date='2020-04-08T17:44:08Z'>
		&lt;denchmark-link:https://github.com/ns1123&gt;@ns1123&lt;/denchmark-link&gt;
 Is it always the case that the original user has permissions to run chown, and the impersonated user cannot run chown?
		</comment>
		<comment id='2' author='ns1123' date='2020-04-08T19:05:48Z'>
		It is not always the case, but if the original user has the ability to run a chown on the UFS and the upstream client is authorized to chown on Alluxio, then the operation should succeed even.
		</comment>
	</comments>
</bug>