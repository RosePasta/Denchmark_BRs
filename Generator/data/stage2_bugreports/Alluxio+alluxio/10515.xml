<bug id='10515' author='swhzzh' open_date='2019-11-26T12:47:42Z' closed_time='2020-01-17T17:45:37Z'>
	<summary>buildnumber maven plugin error when compilng</summary>
	<description>
Alluxio Version:
What version of Alluxio are you using?
2.1.0
Describe the bug
A clear and concise description of what the bug is.
I tried to compile the alluxio source code on my ubuntu18.04 machine by executing "mvn -e -T 2C clean install -DskipTests -Dmaven.javadoc.skip -Dfindbugs.skip -Dcheckstyle.skip -Dlicense.skip".
And I got an error.
&lt;denchmark-code&gt;[INFO] ------------------------------------------------------------------------
[INFO] Reactor Summary:
[INFO] 
[INFO] Alluxio Parent 2.1.0 ............................... SUCCESS [  4.892 s]
[INFO] Alluxio Core 2.1.0 ................................. SUCCESS [  0.294 s]
[INFO] Alluxio Core - Transport 2.1.0 ..................... SUCCESS [ 40.891 s]
[INFO] Alluxio Core - Base module 2.1.0 ................... SUCCESS [  1.802 s]
[INFO] Alluxio Core - Common Utilities 2.1.0 .............. FAILURE [  1.415 s]
[INFO] Alluxio Core - Client 2.1.0 ........................ SUCCESS [  0.256 s]
[INFO] Alluxio Core - Client - File System 2.1.0 .......... SKIPPED
[INFO] Alluxio Examples 2.1.0 ............................. SKIPPED
[INFO] Alluxio Table 2.1.0 ................................ SUCCESS [  0.423 s]
[INFO] Alluxio Table - Base Module 2.1.0 .................. SUCCESS [  0.658 s]
[INFO] Alluxio Table - Client 2.1.0 ....................... SKIPPED
[INFO] Alluxio Job Service 2.1.0 .......................... SUCCESS [  0.277 s]
[INFO] Alluxio Job Service - Common Utilities 2.1.0 ....... SKIPPED
[INFO] Alluxio Job Service - Client 2.1.0 ................. SKIPPED
[INFO] Alluxio Shell 2.1.0 ................................ SKIPPED
[INFO] Alluxio Table - Shell 2.1.0 ........................ SKIPPED
[INFO] Alluxio Assembly 2.1.0 ............................. SUCCESS [  0.352 s]
[INFO] Alluxio Assembly - Client 2.1.0 .................... SKIPPED
[INFO] Alluxio Core - Server 2.1.0 ........................ SUCCESS [  0.224 s]
[INFO] Alluxio Core - Server - Common Utilities 2.1.0 ..... SKIPPED
[INFO] Alluxio Under File System 2.1.0 .................... SUCCESS [  0.380 s]
[INFO] Alluxio Under File System - Local FS 2.1.0 ......... SKIPPED
[INFO] Alluxio Core - Server - Master 2.1.0 ............... SKIPPED
[INFO] Alluxio Core - Server - Proxy 2.1.0 ................ SKIPPED
[INFO] Alluxio Core - Server - Worker 2.1.0 ............... SKIPPED
[INFO] Alluxio Core - Client - HDFS 2.1.0 ................. SKIPPED
[INFO] Alluxio Job Service - Server 2.1.0 ................. SKIPPED
[INFO] Alluxio Log Server 2.1.0 ........................... SKIPPED
[INFO] Alluxio Table - Server 2.1.0 ....................... SUCCESS [  0.123 s]
[INFO] Alluxio Table - Server - Common 2.1.0 .............. SKIPPED
[INFO] Alluxio Table - Server - Master 2.1.0 .............. SKIPPED
[INFO] Alluxio Assembly - Server 2.1.0 .................... SKIPPED
[INFO] Alluxio Integration 2.1.0 .......................... SUCCESS [  0.240 s]
[INFO] Alluxio Integration - Checker 2.1.0 ................ SKIPPED
[INFO] Alluxio Integration - FUSE 2.1.0 ................... SKIPPED
[INFO] Alluxio MiniCluster 2.1.0 .......................... SKIPPED
[INFO] Alluxio Shaded Libraries 2.1.0 ..................... SUCCESS [  0.364 s]
[INFO] Alluxio Shaded Libraries - Client 2.1.0 ............ SKIPPED
[INFO] Alluxio Shaded Libraries - Hadoop 2.7.3 ............ SUCCESS [ 40.340 s]
[INFO] Alluxio Table - Server - UnderDB 2.1.0 ............. SKIPPED
[INFO] Alluxio Table - Server - UnderDB - Hive 2.1.0 ...... SKIPPED
[INFO] Alluxio Tests 2.1.0 ................................ SKIPPED
[INFO] Alluxio Under File System - Tencent Cloud COS 2.1.0  SKIPPED
[INFO] Alluxio Under File System - GCS 2.1.0 .............. SKIPPED
[INFO] Alluxio Under File System - HDFS 2.1.0 ............. SKIPPED
[INFO] Alluxio Under File System - Qiniu Kodo 2.1.0 ....... SKIPPED
[INFO] Alluxio Under File System - Aliyun OSS 2.1.0 ....... SKIPPED
[INFO] Alluxio Under File System - S3 2.1.0 ............... SKIPPED
[INFO] Alluxio Under File System - Swift 2.1.0 ............ SKIPPED
[INFO] Alluxio Under File System - Microsoft Azure Blob Storage 2.1.0 SKIPPED
[INFO] Alluxio Under File System - Web 2.1.0 .............. SKIPPED
[INFO] Alluxio UI 2.1.0 ................................... SUCCESS [10:40 min]
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time:  10:41 min (Wall Clock)
[INFO] Finished at: 2019-11-26T20:33:46+08:00
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.codehaus.mojo:buildnumber-maven-plugin:1.4:create-metadata (default) on project alluxio-core-common: Execution default of goal org.codehaus.mojo:buildnumber-maven-plugin:1.4:create-metadata failed.: NullPointerException -&gt; [Help 1]
org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.codehaus.mojo:buildnumber-maven-plugin:1.4:create-metadata (default) on project alluxio-core-common: Execution default of goal org.codehaus.mojo:buildnumber-maven-plugin:1.4:create-metadata failed.
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:215)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:156)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:148)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)
    at org.apache.maven.lifecycle.internal.builder.multithreaded.MultiThreadedBuilder$1.call (MultiThreadedBuilder.java:190)
    at org.apache.maven.lifecycle.internal.builder.multithreaded.MultiThreadedBuilder$1.call (MultiThreadedBuilder.java:186)
    at java.util.concurrent.FutureTask.run (FutureTask.java:266)
    at java.util.concurrent.Executors$RunnableAdapter.call (Executors.java:511)
    at java.util.concurrent.FutureTask.run (FutureTask.java:266)
    at java.util.concurrent.ThreadPoolExecutor.runWorker (ThreadPoolExecutor.java:1149)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run (ThreadPoolExecutor.java:624)
    at java.lang.Thread.run (Thread.java:748)
Caused by: org.apache.maven.plugin.PluginExecutionException: Execution default of goal org.codehaus.mojo:buildnumber-maven-plugin:1.4:create-metadata failed.
    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:148)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:210)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:156)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:148)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)
    at org.apache.maven.lifecycle.internal.builder.multithreaded.MultiThreadedBuilder$1.call (MultiThreadedBuilder.java:190)
    at org.apache.maven.lifecycle.internal.builder.multithreaded.MultiThreadedBuilder$1.call (MultiThreadedBuilder.java:186)
    at java.util.concurrent.FutureTask.run (FutureTask.java:266)
    at java.util.concurrent.Executors$RunnableAdapter.call (Executors.java:511)
    at java.util.concurrent.FutureTask.run (FutureTask.java:266)
    at java.util.concurrent.ThreadPoolExecutor.runWorker (ThreadPoolExecutor.java:1149)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run (ThreadPoolExecutor.java:624)
    at java.lang.Thread.run (Thread.java:748)
Caused by: java.lang.NullPointerException
    at java.util.Hashtable.put (Hashtable.java:460)
    at org.codehaus.mojo.build.CreateMetadataMojo.execute (CreateMetadataMojo.java:188)
    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:137)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:210)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:156)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:148)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)
    at org.apache.maven.lifecycle.internal.builder.multithreaded.MultiThreadedBuilder$1.call (MultiThreadedBuilder.java:190)
    at org.apache.maven.lifecycle.internal.builder.multithreaded.MultiThreadedBuilder$1.call (MultiThreadedBuilder.java:186)
    at java.util.concurrent.FutureTask.run (FutureTask.java:266)
    at java.util.concurrent.Executors$RunnableAdapter.call (Executors.java:511)
    at java.util.concurrent.FutureTask.run (FutureTask.java:266)
    at java.util.concurrent.ThreadPoolExecutor.runWorker (ThreadPoolExecutor.java:1149)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run (ThreadPoolExecutor.java:624)
    at java.lang.Thread.run (Thread.java:748)
&lt;/denchmark-code&gt;

I tried two times and it reproduced. So I expected to get some help.
To Reproduce
Steps to reproduce the behavior (as minimally and precisely as possible)
Just run the command above
Additional context
Add any other context about the problem here.
Oracle JDK 1.8
Maven 3.6.2
	</description>
	<comments>
		<comment id='1' author='swhzzh' date='2019-11-26T16:14:15Z'>
		hi &lt;denchmark-link:https://github.com/sunweihao&gt;@sunweihao&lt;/denchmark-link&gt;
  - as far as I'm aware Alluxio does not comile with maven 3.6.x+
Can you try using maven 3.5.4? That's the version I use to compile and it usually works just fine.
		</comment>
		<comment id='2' author='swhzzh' date='2019-11-27T03:59:22Z'>
		hi &lt;denchmark-link:https://github.com/ZacBlanco&gt;@ZacBlanco&lt;/denchmark-link&gt;

Thanks for your suggestion first.
Unfortunately, I tried again with maven 3.5.4 and it worked the same as before
		</comment>
		<comment id='3' author='swhzzh' date='2019-11-27T16:29:47Z'>
		I'm not sure what the issue is then - I use maven 3.5.4 on macOS with the following command:
&lt;denchmark-code&gt;mvn -T 2C clean install -Dcheckstyle.skip -Dfindbugs.skip -Dmaven.javadoc.skip -Dlicense.skip -DskipTests
&lt;/denchmark-code&gt;

Can you provide some more information about the environment you're running on? i.e. your OS and and corresponding version? As well as the commit hash you're attempting to build on
		</comment>
		<comment id='4' author='swhzzh' date='2019-11-28T03:53:44Z'>
		&lt;denchmark-link:https://github.com/ZacBlanco&gt;@ZacBlanco&lt;/denchmark-link&gt;

OS ubuntu 18.04.1
And the code I built on is the source code downloaded from the release of version 2.1.0.
		</comment>
		<comment id='5' author='swhzzh' date='2019-12-02T18:14:10Z'>
		&lt;denchmark-link:https://github.com/sunweihao&gt;@sunweihao&lt;/denchmark-link&gt;
 I've tested the commands below on numerous systems and have had no issues compiling. I suspect the issue has something to do with your local environment.
# Shallow checkout of the code from the v2.1.0 tag
$ git clone --branch v2.1.0 --depth 1 https://github.com/Alluxio/alluxio.git
$ cd alluxio
$ mvn -T 2C clean install -Dcheckstyle.skip -Dfindbugs.skip -Dmaven.javadoc.skip -Dlicense.skip -DskipTests
		</comment>
		<comment id='6' author='swhzzh' date='2019-12-10T10:16:28Z'>
		&lt;denchmark-link:https://github.com/ZacBlanco&gt;@ZacBlanco&lt;/denchmark-link&gt;

I have re-installed my system and just followed your commands, and I got some new errors.
&lt;denchmark-code&gt;[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.2:compile (default-compile) on project alluxio-core-server-common: Compilation failure: Compilation failure: 
[ERROR] /home/ubuntu/code/alluxio/core/server/common/src/main/java/alluxio/master/journal/raft/RaftJournalSystem.java:[36,37] package io.atomix.catalyst.serializer does not exist
[ERROR] /home/ubuntu/code/alluxio/core/server/common/src/main/java/alluxio/master/journal/raft/RaftJournalSystem.java:[37,36] package io.atomix.catalyst.transport does not exist
[ERROR] /home/ubuntu/code/alluxio/core/server/common/src/main/java/alluxio/master/journal/raft/RaftPrimarySelector.java:[17,37] package io.atomix.catalyst.concurrent does not exist
[ERROR] /home/ubuntu/code/alluxio/core/server/common/src/main/java/alluxio/master/journal/raft/RaftJournalSystem.java:[278,23] cannot find symbol
[ERROR]   symbol:   class Address
[ERROR]   location: class alluxio.master.journal.raft.RaftJournalSystem
&lt;/denchmark-code&gt;

It seemes that I lacked the dependency of io.atomix.catalyst and actually it is. So i tried to find the definition of this dependency but I got nothing. I wonder where the dependency defines or which dependency contains it since I need to know the version to add it to my repository.
And I have had the same error as &lt;denchmark-link:https://github.com/Alluxio/alluxio/issues/8868&gt;#8868&lt;/denchmark-link&gt;
 and I downloaded the copycat jar by myself and install to my local repository, is there something wrong with it?
		</comment>
		<comment id='7' author='swhzzh' date='2019-12-10T17:55:31Z'>
		Those classes come from a fork of the atomix copycat dependencies that we have. They are hosted here: &lt;denchmark-link:https://github.com/Alluxio/alluxio/blob/master/pom.xml#L130-L134&gt;https://github.com/Alluxio/alluxio/blob/master/pom.xml#L130-L134&lt;/denchmark-link&gt;

And the corresponding maven dependencies are defined here: &lt;denchmark-link:https://github.com/Alluxio/alluxio/blob/master/pom.xml#L527-L536&gt;https://github.com/Alluxio/alluxio/blob/master/pom.xml#L527-L536&lt;/denchmark-link&gt;

I'm not sure why your system isn't able to resolve them properly.
		</comment>
		<comment id='8' author='swhzzh' date='2019-12-11T02:15:41Z'>
		&lt;denchmark-link:https://github.com/ZacBlanco&gt;@ZacBlanco&lt;/denchmark-link&gt;

I have had the same error as &lt;denchmark-link:https://github.com/Alluxio/alluxio/issues/8868&gt;#8868&lt;/denchmark-link&gt;
 and I downloaded the copycat jar by myself and install to my local repository...
The copycat jar I downloaded doesn't contain classes about io.atomix.catalyst and there are only classes about io.atomix.alluxio.copycat..
		</comment>
		<comment id='9' author='swhzzh' date='2019-12-11T04:20:54Z'>
		&lt;denchmark-link:https://github.com/ZacBlanco&gt;@ZacBlanco&lt;/denchmark-link&gt;

I thought the dependency only means that two jars(copycat-client and copycat-server) are needed. So
I just downloaded these two jars. But I tried to use maven with proxy since I am in China and s3 repository can not be resolved properly and I got all the dependencies needed locally and copied them to my cloud server since using proxy is banned on law and cannot be used on the cloud server.
Finally, I built successfully!
Thanks for all the efforts on helping me!!!
		</comment>
		<comment id='10' author='swhzzh' date='2020-03-17T12:17:47Z'>
		&lt;denchmark-link:https://github.com/ZacBlanco&gt;@ZacBlanco&lt;/denchmark-link&gt;
 &lt;denchmark-link:https://github.com/swhzzh&gt;@swhzzh&lt;/denchmark-link&gt;
 I'm encoutering the same situation. I cannot download these 2 jars and I'm in China as well. I tried to download the jars from &lt;denchmark-link:http://alluxio.artifacts.s3-website-us-east-1.amazonaws.com/release&gt;http://alluxio.artifacts.s3-website-us-east-1.amazonaws.com/release&lt;/denchmark-link&gt;
. But I cannot open the link even with a proxy.
		</comment>
		<comment id='11' author='swhzzh' date='2020-03-17T12:22:43Z'>
		&lt;denchmark-link:https://github.com/justKidrauhl&gt;@justKidrauhl&lt;/denchmark-link&gt;

I can open the link with my proxy, so maybe there is something wrong with your proxy.
		</comment>
		<comment id='12' author='swhzzh' date='2020-03-17T12:47:56Z'>
		&lt;denchmark-link:https://github.com/swhzzh&gt;@swhzzh&lt;/denchmark-link&gt;
 Sorry to bother you, but I tried several proxies and still cannot open this link. Can you open this link now?
&lt;denchmark-link:https://user-images.githubusercontent.com/28786663/76856625-986ac400-688e-11ea-9154-8dec86bbe653.png&gt;&lt;/denchmark-link&gt;

		</comment>
		<comment id='13' author='swhzzh' date='2020-03-17T19:44:25Z'>
		&lt;denchmark-link:https://github.com/justKidrauhl&gt;@justKidrauhl&lt;/denchmark-link&gt;
 we've had some hosting issues recently. It should be fixed now.
		</comment>
		<comment id='14' author='swhzzh' date='2020-03-20T09:43:56Z'>
		&lt;denchmark-link:https://github.com/justKidrauhl&gt;@justKidrauhl&lt;/denchmark-link&gt;

I am sorry that I forgot to reply you. I can still open the link now.
		</comment>
	</comments>
</bug>