<bug id='12316' author='jiemar' open_date='2020-10-15T11:28:59Z' closed_time='2020-11-06T21:39:38Z'>
	<summary>can alluxio change default ttlaction from delete to free?</summary>
	<description>
**Alluxio Version:
2.3
it is very dangerous for ttlaction default to be delete. ufs file may be deleted
	</description>
	<comments>
		<comment id='1' author='jiemar' date='2020-10-15T18:52:27Z'>
		&lt;denchmark-link:https://github.com/calvinjia&gt;@calvinjia&lt;/denchmark-link&gt;
 &lt;denchmark-link:https://github.com/gpang&gt;@gpang&lt;/denchmark-link&gt;
  do you remember the reason in early days we set default to delete for ttlaction after ttl expires?
I agree with &lt;denchmark-link:https://github.com/jiemar&gt;@jiemar&lt;/denchmark-link&gt;
  that deleting files from UFS as default ttl action is risky.
		</comment>
		<comment id='2' author='jiemar' date='2020-10-21T23:36:42Z'>
		In 
 change  to , &lt;denchmark-link:https://github.com/cheyang&gt;@cheyang&lt;/denchmark-link&gt;
  do you want to create a patch?
		</comment>
		<comment id='3' author='jiemar' date='2020-10-27T22:06:59Z'>
		&lt;denchmark-link:https://github.com/jiemar&gt;@jiemar&lt;/denchmark-link&gt;
 Thanks for raising this issue. The concept of TTL free does not have good semantics, so having it as the default was very confusing to users as well. I think the preferred resolution is to not overload TTL with free/delete modes and in the meanwhile attach a bigger warning to using default TTL that is not . &lt;denchmark-link:https://github.com/maobaolong&gt;@maobaolong&lt;/denchmark-link&gt;
 do you mind making the doc change instead of the default value change?
		</comment>
		<comment id='4' author='jiemar' date='2020-10-30T13:24:11Z'>
		Thank &lt;denchmark-link:https://github.com/calvinjia&gt;@calvinjia&lt;/denchmark-link&gt;
 for your reply. I'm ok to add some warn into the documents. But I still think, the default value DELETE is dangerous, although we have a best document, but I think majority prefer to jump this trap first, and then study the documents carefully.
Another argument, FREE and DELETE are both the ttlAction, there are in the same position. AFAIK, FREE means delete file only from Alluxio, DELETE mean remove the file from both Alluxio and UFS, so the FREE can be more safe to be default value.
		</comment>
		<comment id='5' author='jiemar' date='2020-11-01T05:11:15Z'>
		
In



alluxio/core/common/src/main/java/alluxio/conf/PropertyKey.java


        Lines 3569 to 3572
      in
      e5d4ea2






 public static final PropertyKey USER_FILE_CREATE_TTL_ACTION = 



 new Builder(Name.USER_FILE_CREATE_TTL_ACTION) 



         .setDefaultValue("DELETE") 



         .setDescription("When file's ttl is expired, the action performs on it. Options: " 





change DELETE to FREE, @cheyang do you want to create a patch?

Done with &lt;denchmark-link:https://github.com/Alluxio/alluxio/pull/12443&gt;#12443&lt;/denchmark-link&gt;

		</comment>
		<comment id='6' author='jiemar' date='2020-11-04T01:42:43Z'>
		&lt;denchmark-link:https://github.com/cheyang&gt;@cheyang&lt;/denchmark-link&gt;
 This seems duplicate to &lt;denchmark-link:https://github.com/Alluxio/alluxio/pull/12390&gt;#12390&lt;/denchmark-link&gt;

		</comment>
	</comments>
</bug>