<bug id='8720' author='lichaoguang973' open_date='2019-04-08T14:43:09Z' closed_time='2019-04-17T15:02:42Z'>
	<summary>Restart master cause listStatus return local directory content, instead of from UFS</summary>
	<description>
Alluxio Version:
2.0.0-preview
Describe the bug
start a single master (without zk) in docker, after a successful ls in client (Kodo client), restart master and re-mount UFS to master, then ls, will see the listStatus return / in docker env.
To Reproduce

start one worker, one master, and one client with fuse (with kodo, oss or other may work)
mkdir -f /fuse in client fuse
mount an bucket to master in fuse (/opt/alluxio/integration/bin/alluxio-fuse mount /fuse /
mount bucket to master (i use kodo)
cd to the mount point and ls; with a clean start, it works
restart master &amp; client
remount client to master with step 2-4
cd to mount point and ls
Expected behavior
ls will return the content in UFS, not from master local dir
Urgency
alluxio will crash after master restart
Additional context
Add any other context about the problem here.

	</description>
	<comments>
		<comment id='1' author='lichaoguang973' date='2019-04-08T17:29:05Z'>
		&lt;denchmark-link:https://github.com/lichaoguang973&gt;@lichaoguang973&lt;/denchmark-link&gt;
 which part of alluxio crashes? The fuse client, the master, or the worker (or all)? Is there any sort of error message, either on from the CLI or from the logs?
		</comment>
		<comment id='2' author='lichaoguang973' date='2019-04-08T23:12:00Z'>
		Alluxio didn't crash. It just return the local file list in where alluxio master is deployed. There is not error message in the log. It seems like the master gets a wrong UnderFileSystem, aka, it gets a LocalUnderFileSystem instead of KodoUderFileSystem or some other UFS UnderFileSYstem.
		</comment>
		<comment id='3' author='lichaoguang973' date='2019-04-09T16:53:08Z'>
		&lt;denchmark-link:https://github.com/lichaoguang973&gt;@lichaoguang973&lt;/denchmark-link&gt;
 When you restart master &amp; client, are you starting a new Docker container? How are you mounting kodo into Alluxio? Can you share more details on the commands you ran so I can try to reproduce the issue?
		</comment>
		<comment id='4' author='lichaoguang973' date='2019-04-16T13:56:57Z'>
		Sorry for late response. I mount /opt/alluxio from mac to docker, so the /opt/alluxio/journal folder is also mounted into docker. I restart master by just restarting the docker (docker rm -f alluxio-master, and then docker run command to start the master). But again, the /opt/alluxio/journal is also mounted into the docker environment.
		</comment>
		<comment id='5' author='lichaoguang973' date='2019-04-16T19:59:37Z'>
		&lt;denchmark-link:https://github.com/guang7niu&gt;@guang7niu&lt;/denchmark-link&gt;
 &lt;denchmark-link:https://github.com/lichaoguang973&gt;@lichaoguang973&lt;/denchmark-link&gt;
 Why do you have to re-mount the UFS? If the master is replaying from an existing journal, then nothing should be re-mounted, since the mount information is already in the journal.
		</comment>
		<comment id='6' author='lichaoguang973' date='2019-04-17T01:53:18Z'>
		Try again, the journal is loaded. The reason is probably that journal is corrupted during the shutdown or  docker restart operation. Now verified that the journal is ok and mount point successfully get mounted back into master. Thanks. We can close this issue.
		</comment>
		<comment id='7' author='lichaoguang973' date='2019-04-17T15:02:42Z'>
		&lt;denchmark-link:https://github.com/guang7niu&gt;@guang7niu&lt;/denchmark-link&gt;
 Thanks for the update!
		</comment>
	</comments>
</bug>