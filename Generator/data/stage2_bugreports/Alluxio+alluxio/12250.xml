<bug id='12250' author='ljk-1993' open_date='2020-10-13T01:25:30Z' closed_time='2020-10-14T20:50:50Z'>
	<summary>which: no java in (/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin)</summary>
	<description>
Alluxio Version:v2.3.0
Describe the bug：
1.Although I specified JAVA_HOME in the conf/alluxio-env.sh file, there are still prompt messages  as shown in the title during installation.
2.I have installed different versions of java in my system, and I specified a specific version of java for alluxio, but it did not take effect.
&lt;denchmark-h:h2&gt;Related logs：&lt;/denchmark-h&gt;

&lt;denchmark-h:h2&gt;Starting to monitor all remote services.&lt;/denchmark-h&gt;

which: no java in (/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin)
--- [ OK ] The master service @ node1.bigdata is in a healthy state.
Expected behavior：
If I specify JAVA_HOME, the console should no longer display the prompt message "which: no java in...", and alluxio should use the Java version I specified
Additional context：
I modified the relevant code in the libexec/alluxio-config.sh file to solve this problem：
if [[ -z "${JAVA}" ]]; then
if [[ -n "${JAVA_HOME}" ]] &amp;&amp; [[ -x "${JAVA_HOME}/bin/java" ]];  then
JAVA="${JAVA_HOME}/bin/java"
elif [[ -n "$(which java 2&gt;/dev/null)" ]]; then
JAVA=$(which java)
else
echo "Error: Cannot find 'java' on path or under $JAVA_HOME/bin/."
exit 1
fi
fi
	</description>
	<comments>
		<comment id='1' author='ljk-1993' date='2020-10-13T19:13:39Z'>
		thanks for reporting this issue &lt;denchmark-link:https://github.com/ljk-1993&gt;@ljk-1993&lt;/denchmark-link&gt;
 . Can you create a pull request here to contribute your fix back? Thanks!
		</comment>
		<comment id='2' author='ljk-1993' date='2020-10-14T21:11:23Z'>
		the new fix will show up in next 2.4.0 release. Let me know if you need this in other versions and I could help cherrypick &lt;denchmark-link:https://github.com/ljk-1993&gt;@ljk-1993&lt;/denchmark-link&gt;
 . thanks for reporting and fixing this issue!
		</comment>
	</comments>
</bug>