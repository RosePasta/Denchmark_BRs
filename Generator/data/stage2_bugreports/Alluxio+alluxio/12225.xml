<bug id='12225' author='hooooyeah' open_date='2020-10-10T03:24:39Z' closed_time='2020-10-13T03:24:05Z'>
	<summary>HA Mode (Embedded Journal)   Sync UFS meta  has no effect</summary>
	<description>
Alluxio Version:
alluxio-enterprise-2.4.0-0.1
Describe the bug
exectue  alluxio fs ls -R /  and alluxio fs ls -R -Dalluxio.user.file.metadata.sync.interval=0 /
did not detetc files in UFS  bucket （just 18 80Byte files and one 1.7G file） and alluxio fs ls /  get  nothing
To Reproduce
1.a   3 workers with 3 masters on  3 nodes  .  use Embedded journal mode
1.b   start-all  success  and  do  alluxio runTest Success (crate 18 80bytes files and persist to UFS )
1.c    do alluxio fs copyFromLocal    copy one 1.7G file to alluxio success  and persist success
2.a  do alluxio format  and start-all success
2.b   do alluxio fs ls /  get nothing   then  exectue  sync cli    "exectue  alluxio fs ls -R /  and alluxio fs ls -R -Dalluxio.user.file.metadata.sync.interval=0 /   "    did not detect UFS  files  and do alluxio fs ls /  get nothing
2.c   do allxuo fs touch hello   success     do alluxio fs ls /  get  file "hello" only
Expected behavior
after execute   sync meta cli   do  alluxio fs ls /  can get all files info
Urgency
Describe the impact and urgency of the bug.

I checked  all 3 mater.log  get no error
&lt;denchmark-link:https://user-images.githubusercontent.com/11880771/95644722-1a506200-0aeb-11eb-997c-e4c1fc202ee3.png&gt;&lt;/denchmark-link&gt;

&lt;denchmark-link:https://user-images.githubusercontent.com/11880771/95644724-1d4b5280-0aeb-11eb-9981-28cb84c6b47b.png&gt;&lt;/denchmark-link&gt;

&lt;denchmark-link:https://user-images.githubusercontent.com/11880771/95644733-25a38d80-0aeb-11eb-8815-1eed098a37ab.png&gt;&lt;/denchmark-link&gt;

	</description>
	<comments>
		<comment id='1' author='hooooyeah' date='2020-10-13T00:25:40Z'>
		&lt;denchmark-link:https://github.com/hooooyeah&gt;@hooooyeah&lt;/denchmark-link&gt;
 Thanks for your reporting! I tried to reproduce the issue, but HDFS as UFS is worked for me with reproduce steps.
&lt;denchmark-code&gt;bin/alluxio runTests

bin/alluxio fs copyFromLocal LICENSE /

bin/alluxio fs ls /
-rw-r--r--  ec2-user       ec2-user                 27040       PERSISTED 10-13-2020 00:01:55:565 100% /LICENSE
drwxr-xr-x  ec2-user       ec2-user                    24       PERSISTED 10-12-2020 23:27:32:271  DIR /default_tests_files

bin/alluxio format

bin/alluxio-start.sh all

bin/alluxio fs ls /
-rw-r--r--  ec2-user       ec2-user                 27040       PERSISTED 10-13-2020 00:01:57:213   0% /LICENSE
drwxr-xr-x  ec2-user       ec2-user                    18       PERSISTED 10-12-2020 23:27:35:382  DIR /default_tests_files

[ec2-user@AlluxioSandboxEJSC-masters-1 alluxio]$ bin/alluxio fs ls -R /
-rw-r--r--  ec2-user       ec2-user                 27040       PERSISTED 10-13-2020 00:01:57:213   0% /LICENSE
drwxr-xr-x  ec2-user       ec2-user                    18       PERSISTED 10-12-2020 23:27:35:382  DIR /default_tests_files
-rw-r--r--  ec2-user       ec2-user                    80       PERSISTED 10-12-2020 23:27:33:552   0% /default_tests_files/BASIC_CACHE_ASYNC_THROUGH
-rw-r--r--  ec2-user       ec2-user                    80       PERSISTED 10-12-2020 23:27:31:031   0% /default_tests_files/BASIC_CACHE_CACHE_THROUGH
-rw-r--r--  ec2-user       ec2-user                    80       PERSISTED 10-12-2020 23:27:33:553   0% /default_tests_files/BASIC_CACHE_PROMOTE_ASYNC_THROUGH
-rw-r--r--  ec2-user       ec2-user                    80       PERSISTED 10-12-2020 23:27:27:352   0% /default_tests_files/BASIC_CACHE_PROMOTE_CACHE_THROUGH
-rw-r--r--  ec2-user       ec2-user                    80       PERSISTED 10-12-2020 23:27:29:033   0% /default_tests_files/BASIC_CACHE_PROMOTE_THROUGH
-rw-r--r--  ec2-user       ec2-user                    80       PERSISTED 10-12-2020 23:27:31:596   0% /default_tests_files/BASIC_CACHE_THROUGH
-rw-r--r--  ec2-user       ec2-user                    84       PERSISTED 10-12-2020 23:27:34:623   0% /default_tests_files/BASIC_NON_BYTE_BUFFER_CACHE_ASYNC_THROUGH
-rw-r--r--  ec2-user       ec2-user                    84       PERSISTED 10-12-2020 23:27:31:514   0% /default_tests_files/BASIC_NON_BYTE_BUFFER_CACHE_CACHE_THROUGH
-rw-r--r--  ec2-user       ec2-user                    84       PERSISTED 10-12-2020 23:27:33:851   0% /default_tests_files/BASIC_NON_BYTE_BUFFER_CACHE_PROMOTE_ASYNC_THROUGH
-rw-r--r--  ec2-user       ec2-user                    84       PERSISTED 10-12-2020 23:27:28:934   0% /default_tests_files/BASIC_NON_BYTE_BUFFER_CACHE_PROMOTE_CACHE_THROUGH
-rw-r--r--  ec2-user       ec2-user                    84       PERSISTED 10-12-2020 23:27:30:775   0% /default_tests_files/BASIC_NON_BYTE_BUFFER_CACHE_PROMOTE_THROUGH
-rw-r--r--  ec2-user       ec2-user                    84       PERSISTED 10-12-2020 23:27:31:741   0% /default_tests_files/BASIC_NON_BYTE_BUFFER_CACHE_THROUGH
-rw-r--r--  ec2-user       ec2-user                    84       PERSISTED 10-12-2020 23:27:33:552   0% /default_tests_files/BASIC_NON_BYTE_BUFFER_NO_CACHE_ASYNC_THROUGH
-rw-r--r--  ec2-user       ec2-user                    84       PERSISTED 10-12-2020 23:27:32:076   0% /default_tests_files/BASIC_NON_BYTE_BUFFER_NO_CACHE_CACHE_THROUGH
-rw-r--r--  ec2-user       ec2-user                    84       PERSISTED 10-12-2020 23:27:32:188   0% /default_tests_files/BASIC_NON_BYTE_BUFFER_NO_CACHE_THROUGH
-rw-r--r--  ec2-user       ec2-user                    80       PERSISTED 10-12-2020 23:27:34:623   0% /default_tests_files/BASIC_NO_CACHE_ASYNC_THROUGH
-rw-r--r--  ec2-user       ec2-user                    80       PERSISTED 10-12-2020 23:27:32:000   0% /default_tests_files/BASIC_NO_CACHE_CACHE_THROUGH
-rw-r--r--  ec2-user       ec2-user                    80       PERSISTED 10-12-2020 23:27:32:119   0% /default_tests_files/BASIC_NO_CACHE_THROUGH
&lt;/denchmark-code&gt;

Just let me you if you see this issue again(or this problem happened in specific UFS).
		</comment>
	</comments>
</bug>