<bug id='11300' author='archichen' open_date='2020-04-15T10:02:24Z' closed_time='2020-04-15T10:57:39Z'>
	<summary>alluxio-worker can't run on kubernetes</summary>
	<description>
Alluxio Version:
2.3.0
Describe the bug
alluxio-worker always restart on Kubernetes
Console log
2020-04-15 09:56:57,362 INFO  TieredIdentityFactory - Initialized tiered identity TieredIdentity(node=192.168.31.203, rack=null)
2020-04-15 09:56:57,770 INFO  BlockWorkerFactory - Creating alluxio.worker.block.BlockWorker 
2020-04-15 09:56:57,872 WARN  StorageTier - Failed to verify memory capacity
2020-04-15 09:56:58,046 INFO  log - Logging initialized @2586ms
2020-04-15 09:56:58,261 INFO  NettyUtils - EPOLL_MODE is available
2020-04-15 09:56:58,833 INFO  GrpcDataServer - Alluxio worker gRPC server started, listening on /0.0.0.0:29999
2020-04-15 09:56:58,833 INFO  AlluxioWorkerProcess - Domain socket data server is enabled at /opt/domain/1c8f94b4-84cb-41e3-aca3-ddbaa101008f.
2020-04-15 09:56:58,846 WARN  RetryUtils - Failed to Starting gRPC server (attempt 1): java.io.IOException: Failed to bind
2020-04-15 09:56:59,047 WARN  RetryUtils - Failed to Starting gRPC server (attempt 2): java.io.IOException: Failed to bind
2020-04-15 09:56:59,549 WARN  RetryUtils - Failed to Starting gRPC server (attempt 3): java.io.IOException: Failed to bind
2020-04-15 09:57:00,051 WARN  RetryUtils - Failed to Starting gRPC server (attempt 4): java.io.IOException: Failed to bind
2020-04-15 09:57:00,552 WARN  RetryUtils - Failed to Starting gRPC server (attempt 5): java.io.IOException: Failed to bind
2020-04-15 09:57:01,054 WARN  RetryUtils - Failed to Starting gRPC server (attempt 6): java.io.IOException: Failed to bind
2020-04-15 09:57:01,055 ERROR GrpcDataServer - Alluxio worker gRPC server failed to start on /opt/domain/1c8f94b4-84cb-41e3-aca3-ddbaa101008f
java.io.IOException: Failed to bind
        at io.grpc.netty.NettyServer.start(NettyServer.java:249)
        at io.grpc.internal.ServerImpl.start(ServerImpl.java:184)
        at io.grpc.internal.ServerImpl.start(ServerImpl.java:90)
        at alluxio.grpc.GrpcServer.lambda$start$0(GrpcServer.java:77)
        at alluxio.retry.RetryUtils.retry(RetryUtils.java:39)
        at alluxio.grpc.GrpcServer.start(GrpcServer.java:77)
        at alluxio.worker.grpc.GrpcDataServer.&lt;init&gt;(GrpcDataServer.java:107)
        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
        at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)
        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
        at java.lang.reflect.Constructor.newInstance(Constructor.java:423)
        at alluxio.util.CommonUtils.createNewClassInstance(CommonUtils.java:271)
        at alluxio.worker.DataServer$Factory.create(DataServer.java:47)
        at alluxio.worker.AlluxioWorkerProcess.&lt;init&gt;(AlluxioWorkerProcess.java:162)
        at alluxio.worker.WorkerProcess$Factory.create(WorkerProcess.java:46)
        at alluxio.worker.WorkerProcess$Factory.create(WorkerProcess.java:38)
        at alluxio.worker.AlluxioWorker.main(AlluxioWorker.java:72)
Caused by: io.netty.channel.unix.Errors$NativeIoException: bind(..) failed: Permission denied
2020-04-15 09:57:01,063 ERROR AlluxioWorker - Fatal error: Failed to create worker process
java.lang.RuntimeException: java.lang.RuntimeException: java.lang.RuntimeException: Alluxio worker gRPC server failed to start on /opt/domain/1c8f94b4-84cb-41e3-aca3-ddbaa101008f
        at alluxio.worker.AlluxioWorkerProcess.&lt;init&gt;(AlluxioWorkerProcess.java:168)
        at alluxio.worker.WorkerProcess$Factory.create(WorkerProcess.java:46)
        at alluxio.worker.WorkerProcess$Factory.create(WorkerProcess.java:38)
        at alluxio.worker.AlluxioWorker.main(AlluxioWorker.java:72)
Caused by: java.lang.RuntimeException: java.lang.RuntimeException: Alluxio worker gRPC server failed to start on /opt/domain/1c8f94b4-84cb-41e3-aca3-ddbaa101008f
        at alluxio.util.CommonUtils.createNewClassInstance(CommonUtils.java:273)
        at alluxio.worker.DataServer$Factory.create(DataServer.java:47)
        at alluxio.worker.AlluxioWorkerProcess.&lt;init&gt;(AlluxioWorkerProcess.java:162)
        ... 3 more
Caused by: java.lang.RuntimeException: Alluxio worker gRPC server failed to start on /opt/domain/1c8f94b4-84cb-41e3-aca3-ddbaa101008f
        at alluxio.worker.grpc.GrpcDataServer.&lt;init&gt;(GrpcDataServer.java:112)
        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
        at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)
        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
        at java.lang.reflect.Constructor.newInstance(Constructor.java:423)
        at alluxio.util.CommonUtils.createNewClassInstance(CommonUtils.java:271)
        ... 5 more
Caused by: java.io.IOException: Failed to bind
        at io.grpc.netty.NettyServer.start(NettyServer.java:249)
        at io.grpc.internal.ServerImpl.start(ServerImpl.java:184)
        at io.grpc.internal.ServerImpl.start(ServerImpl.java:90)
        at alluxio.grpc.GrpcServer.lambda$start$0(GrpcServer.java:77)
        at alluxio.retry.RetryUtils.retry(RetryUtils.java:39)
        at alluxio.grpc.GrpcServer.start(GrpcServer.java:77)
        at alluxio.worker.grpc.GrpcDataServer.&lt;init&gt;(GrpcDataServer.java:107)
        ... 10 more
Caused by: io.netty.channel.unix.Errors$NativeIoException: bind(..) failed: Permission denied
	</description>
	<comments>
		<comment id='1' author='archichen' date='2020-04-15T10:57:30Z'>
		Resolved. PV permission on host should be 1000:1000 according to alluxio-worker-daemonset.yml  claimed.
		</comment>
	</comments>
</bug>