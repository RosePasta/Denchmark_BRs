<bug id='10264' author='LuQQiu' open_date='2019-10-24T20:09:03Z' closed_time='2019-10-25T02:25:03Z'>
	<summary>Backup command return null if mounted s3 bucket is empty</summary>
	<description>
Alluxio Version:
Alluxio master
Describe the bug
When an empty S3 bucket is mounted to Alluxio, before any files are written into the bucket, backing up will throw NPE
2019-10-24 12:48:13,514 INFO  DefaultMetaMaster - Backing up to root UFS in directory /alluxio_backups
2019-10-24 12:48:14,998 ERROR MetaMasterClientServiceHandler - Exit (Error): backup: options=localFileSystem: false
java.lang.NullPointerException
at alluxio.underfs.s3a.S3AUnderFileSystem.getObjectStatus(S3AUnderFileSystem.java:516)
at alluxio.underfs.ObjectUnderFileSystem.isFile(ObjectUnderFileSystem.java:589)
at alluxio.underfs.ObjectUnderFileSystem.mkdirs(ObjectUnderFileSystem.java:616)
at alluxio.underfs.BaseUnderFileSystem.mkdirs(BaseUnderFileSystem.java:184)
at alluxio.underfs.ObjectUnderFileSystem.mkdirs(ObjectUnderFileSystem.java:636)
To Reproduce
Create an empty S3 bucket
Use the empty S3 bucket as a root mount, change the write type to be MUST_CACHE
do some operations (what kind of operation does not matter)
run fsadmin backup
Expected behavior
Alluxio backup command should not return NPE in whatever cases
	</description>
	<comments>
		<comment id='1' author='LuQQiu' date='2019-10-24T23:56:51Z'>
		The details of the workflow that cause the issue is
&lt;denchmark-code&gt;Backup -&gt; try to create /alluxio_backups folder
(1) call mkdirs(/)  because `/alluxio_backups` is not a directory or a file and parent not exist
(2) call mkdirs("") because `/` is not a directory or file and parent not exists
(3) empty string is not an folder 
When checking if it's a file, getObjectStatus of empty string throws NPE
&lt;/denchmark-code&gt;

		</comment>
		<comment id='2' author='LuQQiu' date='2019-10-24T23:58:39Z'>
		Our ObjectUFS root key is full url like s3:///
but in nearly all ufs operation, we strip the prefix which is stripping the rootkey.
The fix is to check "/" in isRoot
		</comment>
		<comment id='3' author='LuQQiu' date='2019-10-25T02:25:03Z'>
		Fixed in &lt;denchmark-link:https://github.com/Alluxio/alluxio/pull/10276&gt;#10276&lt;/denchmark-link&gt;

		</comment>
	</comments>
</bug>