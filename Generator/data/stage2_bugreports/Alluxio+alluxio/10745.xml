<bug id='10745' author='apc999' open_date='2020-01-14T19:59:12Z' closed_time='2020-02-13T02:36:55Z'>
	<summary>Incorrect cluster-default configuration propagation</summary>
	<description>
Alluxio Version:
2.1.1
Describe the bug
Incorrect cluster-default configuration propagation:

Currently we only propagates property keys with scope CLIENT or ALL to both client and workers, but not these property keys with scope WORKER to workers.
Some job server property keys are marked with scope ALL and got propagated.

To Reproduce
Expected behavior

Propagate CLIENT or ALL to client side conf
Propagate WORKER or ALL to worker side conf

Urgency
Medium
Additional context
See the following list of properties received by a worker
&lt;denchmark-code&gt;2020-01-14 01:07:45,832 INFO  ConfigurationUtils - Loading property: alluxio.user.network.netty.worker.threads (CLIENT) -&gt; 0
2020-01-14 01:07:45,832 INFO  ConfigurationUtils - Loading property: alluxio.debug (ALL) -&gt; false
2020-01-14 01:07:45,832 INFO  ConfigurationUtils - Loading property: alluxio.master.hostname (ALL) -&gt; localhost
2020-01-14 01:07:45,832 INFO  ConfigurationUtils - Loading property: alluxio.web.cors.enabled (ALL) -&gt; false
2020-01-14 01:07:45,832 INFO  ConfigurationUtils - Loading property: alluxio.master.persistence.initial.interval (ALL) -&gt; 1s
2020-01-14 01:07:45,832 INFO  ConfigurationUtils - Loading property: alluxio.user.network.writer.buffer.size.messages (CLIENT) -&gt; 16
2020-01-14 01:07:45,832 INFO  ConfigurationUtils - Loading property: alluxio.user.conf.sync.interval (CLIENT) -&gt; 1min
2020-01-14 01:07:45,832 INFO  ConfigurationUtils - Loading property: alluxio.job.master.finished.job.retention.time (ALL) -&gt; 300sec
2020-01-14 01:07:45,832 INFO  ConfigurationUtils - Loading property: alluxio.conf.dir (ALL) -&gt; /Users/binfan/Dropbox/Work/alluxio/alluxio/conf
2020-01-14 01:07:45,832 INFO  ConfigurationUtils - Loading property: alluxio.job.master.embedded.journal.port (ALL) -&gt; 20003
2020-01-14 01:07:45,833 INFO  ConfigurationUtils - Loading property: alluxio.user.file.copyfromlocal.block.location.policy.class (CLIENT) -&gt; alluxio.client.block.policy.RoundRobinPolicy
2020-01-14 01:07:45,833 INFO  ConfigurationUtils - Loading property: alluxio.user.network.zerocopy.enabled (CLIENT) -&gt; true
2020-01-14 01:07:45,833 INFO  ConfigurationUtils - Loading property: alluxio.network.host.resolution.timeout (ALL) -&gt; 5sec
2020-01-14 01:07:45,833 INFO  ConfigurationUtils - Loading property: alluxio.user.logs.dir (ALL) -&gt; /Users/binfan/Dropbox/Work/alluxio/alluxio/logs/user
2020-01-14 01:07:45,833 INFO  ConfigurationUtils - Loading property: alluxio.master.embedded.journal.port (ALL) -&gt; 19200
2020-01-14 01:07:45,833 INFO  ConfigurationUtils - Loading property: alluxio.zookeeper.leader.path (ALL) -&gt; /alluxio/leader
2020-01-14 01:07:45,833 INFO  ConfigurationUtils - Loading property: alluxio.zookeeper.session.timeout (ALL) -&gt; 60s
2020-01-14 01:07:45,833 INFO  ConfigurationUtils - Loading property: alluxio.user.network.netty.channel (CLIENT) -&gt; EPOLL
2020-01-14 01:07:45,833 INFO  ConfigurationUtils - Loading property: alluxio.user.network.data.timeout (CLIENT) -&gt; 30sec
2020-01-14 01:07:45,833 INFO  ConfigurationUtils - Loading property: alluxio.user.file.writetype.default (CLIENT) -&gt; MUST_CACHE
2020-01-14 01:07:45,833 INFO  ConfigurationUtils - Loading property: alluxio.zookeeper.connection.timeout (ALL) -&gt; 15s
2020-01-14 01:07:45,833 INFO  ConfigurationUtils - Loading property: alluxio.network.connection.shutdown.timeout (ALL) -&gt; 60sec
2020-01-14 01:07:45,833 INFO  ConfigurationUtils - Loading property: alluxio.master.persistence.max.interval (ALL) -&gt; 1hr
2020-01-14 01:07:45,833 INFO  ConfigurationUtils - Loading property: alluxio.user.block.avoid.eviction.policy.reserved.size.bytes (CLIENT) -&gt; 0MB
2020-01-14 01:07:45,833 INFO  ConfigurationUtils - Loading property: alluxio.master.persistence.max.total.wait.time (ALL) -&gt; 1day
2020-01-14 01:07:45,833 INFO  ConfigurationUtils - Loading property: alluxio.locality.script (ALL) -&gt; alluxio-locality.sh
2020-01-14 01:07:45,833 INFO  ConfigurationUtils - Loading property: alluxio.job.master.hostname (ALL) -&gt; localhost
2020-01-14 01:07:45,833 INFO  ConfigurationUtils - Loading property: alluxio.user.network.writer.close.timeout (CLIENT) -&gt; 30min
2020-01-14 01:07:45,833 INFO  ConfigurationUtils - Loading property: alluxio.user.block.worker.client.read.retry (CLIENT) -&gt; 5
2020-01-14 01:07:45,833 INFO  ConfigurationUtils - Loading property: alluxio.user.local.writer.chunk.size.bytes (CLIENT) -&gt; 64KB
2020-01-14 01:07:45,833 INFO  ConfigurationUtils - Loading property: alluxio.user.ufs.block.read.concurrency.max (CLIENT) -&gt; 2147483647
2020-01-14 01:07:45,833 INFO  ConfigurationUtils - Loading property: alluxio.job.worker.data.port (ALL) -&gt; 30002
2020-01-14 01:07:45,833 INFO  ConfigurationUtils - Loading property: alluxio.user.ufs.block.location.all.fallback.enabled (CLIENT) -&gt; false
2020-01-14 01:07:45,833 INFO  ConfigurationUtils - Loading property: alluxio.underfs.version (ALL) -&gt; 2.7
2020-01-14 01:07:45,834 INFO  ConfigurationUtils - Loading property: alluxio.user.file.master.client.threads (CLIENT) -&gt; 10
2020-01-14 01:07:45,834 INFO  ConfigurationUtils - Loading property: alluxio.zookeeper.job.leader.path (ALL) -&gt; /job_leader
2020-01-14 01:07:45,834 INFO  ConfigurationUtils - Loading property: alluxio.master.persistence.scheduler.interval (ALL) -&gt; 1s
2020-01-14 01:07:45,834 INFO  ConfigurationUtils - Loading property: alluxio.logs.dir (ALL) -&gt; /Users/binfan/Dropbox/Work/alluxio/alluxio/logs
2020-01-14 01:07:45,834 INFO  ConfigurationUtils - Loading property: alluxio.user.block.worker.client.pool.gc.threshold (CLIENT) -&gt; 300sec
2020-01-14 01:07:45,834 INFO  ConfigurationUtils - Loading property: alluxio.user.block.size.bytes.default (CLIENT) -&gt; 64MB
2020-01-14 01:07:45,834 INFO  ConfigurationUtils - Loading property: alluxio.job.worker.throttling (ALL) -&gt; false
2020-01-14 01:07:45,834 INFO  ConfigurationUtils - Loading property: alluxio.debug (ALL) -&gt; false
2020-01-14 01:07:45,834 INFO  ConfigurationUtils - Loading property: alluxio.web.cors.enabled (ALL) -&gt; false
2020-01-14 01:07:45,834 INFO  ConfigurationUtils - Loading property: alluxio.user.network.writer.buffer.size.messages (CLIENT) -&gt; 16
2020-01-14 01:07:45,834 INFO  ConfigurationUtils - Loading property: alluxio.job.master.finished.job.retention.time (ALL) -&gt; 300sec
2020-01-14 01:07:45,834 INFO  ConfigurationUtils - Loading property: alluxio.job.master.embedded.journal.port (ALL) -&gt; 20003
2020-01-14 01:07:45,834 INFO  ConfigurationUtils - Loading property: alluxio.user.network.zerocopy.enabled (CLIENT) -&gt; true
2020-01-14 01:07:45,834 INFO  ConfigurationUtils - Loading property: alluxio.user.logs.dir (ALL) -&gt; /Users/binfan/Dropbox/Work/alluxio/alluxio/logs/user
2020-01-14 01:07:45,834 INFO  ConfigurationUtils - Loading property: alluxio.zookeeper.leader.path (ALL) -&gt; /alluxio/leader
2020-01-14 01:07:45,834 INFO  ConfigurationUtils - Loading property: alluxio.user.network.netty.channel (CLIENT) -&gt; EPOLL
2020-01-14 01:07:45,834 INFO  ConfigurationUtils - Loading property: alluxio.user.file.writetype.default (CLIENT) -&gt; MUST_CACHE
2020-01-14 01:07:45,834 INFO  ConfigurationUtils - Loading property: alluxio.network.connection.shutdown.timeout (ALL) -&gt; 60sec
2020-01-14 01:07:45,894 INFO  AlluxioWorkerProcess - Started Alluxio worker @10.0.1.55:29999 with id 9222847217999742283
&lt;/denchmark-code&gt;

	</description>
	<comments>
	</comments>
</bug>