<bug id='8815' author='LuQQiu' open_date='2019-04-15T23:55:16Z' closed_time='2019-04-18T19:55:24Z'>
	<summary>Worker failed to connect to single master when using embedded journal based on master.rpc.addresses</summary>
	<description>
Alluxio Version:
2.0.0-preview and this bug should exist in the previous versions
Describe the bug
Alluxio worker cannot connect to the leading master when
(1) only have one master
(2) use embedded journal
(3) when the master.rpc.port inside the alluxio.master.rpc.addresses does not equal to the default value 19998 . e.g. given alluxio.master.rpc.addresses=&lt;MASTER_ADDRESS&gt;:19997 and do not give alluxio.master.rpc.port=19997 in the worker configuration
This is because when we only have one master in embedded journal mode, our worker still get the master rpc port from alluxio.master.rpc.port instead of alluxio.master.rpc.addresses.
	</description>
	<comments>
		<comment id='1' author='LuQQiu' date='2019-04-15T23:57:27Z'>
		This bug is fixed in &lt;denchmark-link:https://github.com/Alluxio/alluxio/pull/8755&gt;#8755&lt;/denchmark-link&gt;

by changing the way to get master inquire client when using embedded journal mode in  to:
&lt;denchmark-code&gt;        List&lt;InetSocketAddress&gt; addresses = ConfigurationUtils.getMasterRpcAddresses(conf);
            NetworkAddressUtils.getConnectAddress(ServiceType.MASTER_RPC, conf));	        if (addresses.size() &gt; 1) {
          return new PollingMasterInquireClient(addresses, conf);
        } else {
          return new SingleMasterInquireClient(addresses.get(0));
        }
&lt;/denchmark-code&gt;

		</comment>
	</comments>
</bug>