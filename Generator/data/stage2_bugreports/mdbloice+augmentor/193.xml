<bug id='193' author='tr1pzz' open_date='2019-08-01T13:35:11Z' closed_time='2019-08-01T14:01:12Z'>
	<summary>Crashes when OOM</summary>
	<description>
I've experienced several crashes of my VM due to running out of cache memory.
My machine crashed with 8 CPU's &amp; 32Gb memory after sampling 6000/20000 images (I watched the cache memory slowely build up..)
	</description>
	<comments>
		<comment id='1' author='tr1pzz' date='2019-08-01T13:59:38Z'>
		I've solved this using the following snippet:
&lt;denchmark-code&gt;...

def create_pipeline(seed):
    p = Augmentor.Pipeline(input_folder, output_folder, save_format="JPEG")
    p.set_seed(seed)
    p.add_operation(...)
    ...
    return p

total_images_to_sample = 20000
max_at_once = 2000 #Tweak this number according to your machine's RAM
iterations = int(total_images_to_sample/max_at_once)

for seed_id in range(iterations):
    p = create_pipeline(seed_id)
    p.sample(max_at_once)
    del p
&lt;/denchmark-code&gt;

		</comment>
		<comment id='2' author='tr1pzz' date='2019-08-02T09:18:23Z'>
		Hi &lt;denchmark-link:https://github.com/tr1pzz&gt;@tr1pzz&lt;/denchmark-link&gt;
 - there is also a way to disable multi-threading altogether:
&lt;denchmark-code&gt;p.sample(n, multi_threaded=False)
&lt;/denchmark-code&gt;

Anyway, I will investigate the issue with the cache, thanks for taking the time to make the issue.
		</comment>
	</comments>
</bug>