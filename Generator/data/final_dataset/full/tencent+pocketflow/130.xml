<bug_data>
<bug id='130' author='haolibai' open_date='2018-12-07T07:15:17Z' closed_time='2018-12-10T10:52:27Z'>
 	<summary>Minor bug in weight sparsification learner</summary>
 	<description>
 
 According to &lt;denchmark-link:https://arxiv.org/abs/1710.01878&gt;To prune, or not to prune: exploring the efficacy of pruning for model compression&lt;/denchmark-link&gt;
 , the mask should be updated based on the un-pruned weights. However in the code, the mask is updated based on the pruned weights.
 
 &lt;denchmark-link:https://user-images.githubusercontent.com/24502378/49632885-48b60f80-fa32-11e8-98a4-eed9da713533.png&gt;&lt;/denchmark-link&gt;
 
 	</description>
 	<comments>
 		<comment id='1' author='haolibai' date='2018-12-07T07:37:44Z'>
 		Thanks for pointing it out. Both mask_thres and mask should be updated based on var_bkup, rather than var in the current implementation. We will fix it ASAP.
 		</comment>
 		<comment id='2' author='haolibai' date='2018-12-10T10:52:27Z'>
 		Resolved in PR &lt;denchmark-link:https://github.com/Tencent/PocketFlow/pull/134&gt;#134&lt;/denchmark-link&gt;
 .
 		</comment>
 	</comments>
 </bug>
<commit id='f3ac17a23e08041f8674b9b27ea746e69e1e3a43' author='Jiaxiang Wu' date='2018-12-10 18:50:59+08:00'>
 	<dmm_unit complexity='None' interfacing='None' size='None'></dmm_unit>
 	<modification change_type='MODIFY' old_name='learners\weight_sparsification\learner.py' new_name='learners\weight_sparsification\learner.py'>
 		<file_info nloc='214' complexity='47' token_count='2212'></file_info>
 		<method name='__build_masks' parameters='self'>
 				<method_info nloc='20' complexity='2' token_count='257' nesting_level='1' start_line='258' end_line='292'></method_info>
 			<added_lines>283,284</added_lines>
 			<deleted_lines>281,284</deleted_lines>
 		</method>
 		<modified_lines>
 			<added_lines></added_lines>
 			<deleted_lines></deleted_lines>
 		</modified_lines>
 	</modification>
 </commit>
</bug_data>
