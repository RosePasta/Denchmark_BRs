<bug_data>
<bug id='184' author='kylegao91' open_date='2017-11-20T20:38:10Z' closed_time='2017-12-22T20:25:56Z'>
 	<summary>Side effect in Vocab __init__</summary>
 	<description>
 The constructor of Vocab accumulates input data in its specials argument/variable and pollute the input argument counter.  The constructed object is also wrong because of this side effect.  Please find reproducible example below:
 &lt;denchmark-code&gt;&gt;&gt;&gt; c1 = Counter([1])
 &gt;&gt;&gt; v1 = Vocab(c1)
 &gt;&gt;&gt; print(c1)
 Counter({1: 1, u'&lt;pad&gt;': 0})
 &gt;&gt;&gt; print(v1.stoi)
 defaultdict(&lt;function _default_unk_index at 0x10b4aa758&gt;, {1: 1, u'&lt;pad&gt;': 0})
 
 &gt;&gt;&gt; c2 = Counter([2])
 &gt;&gt;&gt; print(c2)
 Counter({2: 1})
 &gt;&gt;&gt; v2 = Vocab(c2)
 &gt;&gt;&gt; print(c2)
 Counter({2: 1, 1: 0, u'&lt;pad&gt;': 0}) # c2 is changed after passing as argument
 &gt;&gt;&gt; print(v2.stoi)
 defaultdict(&lt;function _default_unk_index at 0x10b4aa758&gt;, {1: 1, u'&lt;pad&gt;': 0, 2: 2}) # resulting vocabulary is wrong
 &lt;/denchmark-code&gt;
 
 	</description>
 	<comments>
 	</comments>
 </bug>
<commit id='256ebcd6c516378dae2674998410dfd8dc7e4519' author='jekbradbury' date='2017-12-22 15:25:55-05:00'>
 	<dmm_unit complexity='None' interfacing='None' size='None'></dmm_unit>
 	<modification change_type='MODIFY' old_name='torchtext\vocab.py' new_name='torchtext\vocab.py'>
 		<file_info nloc='257' complexity='64' token_count='2212'></file_info>
 		<modified_lines>
 			<added_lines>48,49</added_lines>
 			<deleted_lines>48</deleted_lines>
 		</modified_lines>
 	</modification>
 </commit>
</bug_data>
