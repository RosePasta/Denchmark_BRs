<bug_data>
<bug id='11336' author='AmeerHajAli' open_date='2020-10-12T03:16:26Z' closed_time='2020-10-14T23:50:42Z'>
 	<summary>[C++ API] The cluster_mode_test.cc fails if it was made run functions that have no arguments.</summary>
 	<description>
 The cluster_mode_test.cc fails if it was made run functions that have no arguments.
 e.g.,
 &lt;denchmark-code&gt;int func() { return 1; }
 
   auto task_obj = Ray::Task(func).Remote();
   int task_result = *(Ray::Get(task_obj));
   EXPECT_EQ(1, task_result);
 &lt;/denchmark-code&gt;
 
 The output error:
 &lt;denchmark-code&gt;E1013 08:11:39.012250  2800  2917 core_worker.cc:419] Will resubmit task after a 5000ms delay: Type=NORMAL_TASK, Language=CPP, Resources: {}, function_descriptor={type=CppFunctionDescriptor, lib_name=, function_offset=961856, exec_function_offset=982992}, task_id=df5a1a828c9685d3ffffffff01000000, task_name=+961856, job_id=01000000, num_args=1, num_returns=1
 E1013 08:11:45.001149  2800  2917 task_manager.cc:323] Task failed: IOError: 14: Socket closed: Type=NORMAL_TASK, Language=CPP, Resources: {}, function_descriptor={type=CppFunctionDescriptor, lib_name=, function_offset=961856, exec_function_offset=982992}, task_id=df5a1a828c9685d3ffffffff01000000, task_name=+961856, job_id=01000000, num_args=1, num_returns=1
 &lt;/denchmark-code&gt;
 
 
  I have verified my script runs in a clean environment and reproduces the issue.
  I have verified the issue also occurs with the latest wheels.
 
 	</description>
 	<comments>
 		<comment id='1' author='AmeerHajAli' date='2020-10-12T03:18:32Z'>
 		Hi &lt;denchmark-link:https://github.com/SongGuyang&gt;@SongGuyang&lt;/denchmark-link&gt;
 , can you please look into this issue?
 		</comment>
 		<comment id='2' author='AmeerHajAli' date='2020-10-12T07:18:35Z'>
 		Thanks, I will see this.
 		</comment>
 		<comment id='3' author='AmeerHajAli' date='2020-10-14T23:50:42Z'>
 		Fixed in &lt;denchmark-link:https://github.com/ray-project/ray/pull/11363&gt;#11363&lt;/denchmark-link&gt;
 .
 		</comment>
 	</comments>
 </bug>
<commit id='34191107a3c532d723ec728c1db1107870b530ae' author='SongGuyang' date='2020-10-14 16:48:34-07:00'>
 	<dmm_unit complexity='0.6666666666666666' interfacing='0.6666666666666666' size='1.0'></dmm_unit>
 	<modification change_type='MODIFY' old_name='cpp\src\ray\runtime\task\native_task_submitter.cc' new_name='cpp\src\ray\runtime\task\native_task_submitter.cc'>
 		<file_info nloc='71' complexity='9' token_count='527'></file_info>
 		<method name='ray::api::BuildRayFunction' parameters='invocation'>
 				<method_info nloc='9' complexity='1' token_count='93' nesting_level='2' start_line='11' end_line='19'></method_info>
 			<added_lines>11,18,19</added_lines>
 			<deleted_lines>11,12,13,14,15,18</deleted_lines>
 		</method>
 		<method name='ray::api::NativeTaskSubmitter::CreateActor' parameters='invocation'>
 				<method_info nloc='23' complexity='2' token_count='130' nesting_level='2' start_line='52' end_line='76'></method_info>
 			<added_lines>54,70,71</added_lines>
 			<deleted_lines>52,53,54,55,56,57,58,59,60,61,63,64,65</deleted_lines>
 		</method>
 		<method name='ray::api::NativeTaskSubmitter::Submit' parameters='invocation'>
 				<method_info nloc='14' complexity='2' token_count='132' nesting_level='2' start_line='33' end_line='46'></method_info>
 			<added_lines>33,34,35,39,40,42,43</added_lines>
 			<deleted_lines>36,37,39,40</deleted_lines>
 		</method>
 		<method name='ray::api::BuildTaskArgs' parameters='invocation,args'>
 				<method_info nloc='11' complexity='2' token_count='116' nesting_level='2' start_line='21' end_line='31'></method_info>
 			<added_lines>21,22,23,24,25,26,27,28,29,30,31</added_lines>
 			<deleted_lines>23,25,26,27,28,29,30,31</deleted_lines>
 		</method>
 		<modified_lines>
 			<added_lines></added_lines>
 			<deleted_lines>50,51,81,85</deleted_lines>
 		</modified_lines>
 	</modification>
 	<modification change_type='MODIFY' old_name='cpp\src\ray\runtime\task\task_executor.cc' new_name='cpp\src\ray\runtime\task\task_executor.cc'>
 		<file_info nloc='113' complexity='12' token_count='1129'></file_info>
 		<method name='ray::api::TaskExecutor::ExecuteTask' parameters='task_type,task_name,ray_function,required_resources,args,arg_reference_ids,return_ids,results'>
 				<method_info nloc='69' complexity='8' token_count='732' nesting_level='2' start_line='25' end_line='96'></method_info>
 			<added_lines>41,42,43,44,45,46,47,48,49,50</added_lines>
 			<deleted_lines>41,42,43,44,45,46,48</deleted_lines>
 		</method>
 		<modified_lines>
 			<added_lines></added_lines>
 			<deleted_lines></deleted_lines>
 		</modified_lines>
 	</modification>
 	<modification change_type='MODIFY' old_name='cpp\src\ray\test\cluster\cluster_mode_test.cc' new_name='cpp\src\ray\test\cluster\cluster_mode_test.cc'>
 		<file_info nloc='55' complexity='11' token_count='453'></file_info>
 		<method name='Return1' parameters=''>
 				<method_info nloc='1' complexity='1' token_count='8' nesting_level='0' start_line='10' end_line='10'></method_info>
 			<added_lines>10</added_lines>
 			<deleted_lines></deleted_lines>
 		</method>
 		<method name='Counter::FactoryCreate' parameters=''>
 				<method_info nloc='1' complexity='1' token_count='12' nesting_level='1' start_line='19' end_line='19'></method_info>
 			<added_lines>19</added_lines>
 			<deleted_lines></deleted_lines>
 		</method>
 		<method name='TEST' parameters='RayClusterModeTest,FullTest'>
 				<method_info nloc='23' complexity='1' token_count='264' nesting_level='0' start_line='32' end_line='67'></method_info>
 			<added_lines>44,45,47,48,49,50,51,54,55,56,57,58,59,60,61,62,63,64</added_lines>
 			<deleted_lines>39,43,44,45,46</deleted_lines>
 		</method>
 		<method name='Counter::Plus1' parameters=''>
 				<method_info nloc='4' complexity='1' token_count='12' nesting_level='1' start_line='22' end_line='25'></method_info>
 			<added_lines>22,23,24,25</added_lines>
 			<deleted_lines></deleted_lines>
 		</method>
 		<modified_lines>
 			<added_lines></added_lines>
 			<deleted_lines>18</deleted_lines>
 		</modified_lines>
 	</modification>
 </commit>
</bug_data>
