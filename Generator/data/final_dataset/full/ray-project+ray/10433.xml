<bug_data>
<bug id='10433' author='kfstorm' open_date='2020-08-31T03:42:04Z' closed_time='2020-09-11T11:05:30Z'>
 	<summary>Allow users to specify the classpath of Java workers in driver options</summary>
 	<description>
 There's an existing option named ray.job.resource-path, which allows users to specify the parent directory of a job resource directory. When a worker process is about to execute a task, it creates a class loader for this job from a child directory named by job ID from the parent directory. This approach is not usable since most likely users won't specify the job ID when starting a driver and the job ID is generated automatically.
 	</description>
 	<comments>
 		<comment id='1' author='kfstorm' date='2020-08-31T03:42:21Z'>
 		&lt;denchmark-link:https://github.com/ray-project/ray/issues/7291&gt;#7291&lt;/denchmark-link&gt;
 
 		</comment>
 	</comments>
 </bug>
<commit id='bbfbc98a4155cbe79e001efb8e7cd9821c0f7d97' author='chaokunyang' date='2020-09-09 00:46:32+08:00'>
 	<dmm_unit complexity='0.0' interfacing='0.4' size='0.0'></dmm_unit>
 	<modification change_type='MODIFY' old_name='doc\source\cross-language.rst' new_name='doc\source\cross-language.rst'>
 		<file_info nloc='None' complexity='None' token_count='None'></file_info>
 		<modified_lines>
 			<added_lines>6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,63,79,85,114,161,190,294</added_lines>
 			<deleted_lines>44,60,66,95,142,171,275</deleted_lines>
 		</modified_lines>
 	</modification>
 	<modification change_type='MODIFY' old_name='doc\source\starting-ray.rst' new_name='doc\source\starting-ray.rst'>
 		<file_info nloc='None' complexity='None' token_count='None'></file_info>
 		<modified_lines>
 			<added_lines>138,139,191,192,193,194,195</added_lines>
 			<deleted_lines>155,156,162</deleted_lines>
 		</modified_lines>
 	</modification>
 	<modification change_type='MODIFY' old_name='java\runtime\src\main\java\io\ray\runtime\AbstractRayRuntime.java' new_name='java\runtime\src\main\java\io\ray\runtime\AbstractRayRuntime.java'>
 		<file_info nloc='266' complexity='39' token_count='1925'></file_info>
 		<method name='AbstractRayRuntime::AbstractRayRuntime' parameters='rayConfig'>
 				<method_info nloc='6' complexity='1' token_count='44' nesting_level='1' start_line='69' end_line='74'></method_info>
 			<added_lines>72</added_lines>
 			<deleted_lines>72</deleted_lines>
 		</method>
 		<modified_lines>
 			<added_lines></added_lines>
 			<deleted_lines></deleted_lines>
 		</modified_lines>
 	</modification>
 	<modification change_type='MODIFY' old_name='java\runtime\src\main\java\io\ray\runtime\RayNativeRuntime.java' new_name='java\runtime\src\main\java\io\ray\runtime\RayNativeRuntime.java'>
 		<file_info nloc='238' complexity='40' token_count='1767'></file_info>
 		<method name='RayNativeRuntime::start' parameters=''>
 				<method_info nloc='35' complexity='7' token_count='295' nesting_level='1' start_line='140' end_line='181'></method_info>
 			<added_lines>160,161</added_lines>
 			<deleted_lines>160</deleted_lines>
 		</method>
 		<modified_lines>
 			<added_lines></added_lines>
 			<deleted_lines></deleted_lines>
 		</modified_lines>
 	</modification>
 	<modification change_type='MODIFY' old_name='java\runtime\src\main\java\io\ray\runtime\config\RayConfig.java' new_name='java\runtime\src\main\java\io\ray\runtime\config\RayConfig.java'>
 		<file_info nloc='303' complexity='53' token_count='2048'></file_info>
 		<method name='RayConfig::render' parameters=''>
 				<method_info nloc='11' complexity='1' token_count='105' nesting_level='1' start_line='308' end_line='320'></method_info>
 			<added_lines>317</added_lines>
 			<deleted_lines>314</deleted_lines>
 		</method>
 		<method name='RayConfig::RayConfig' parameters='config'>
 				<method_info nloc='110' complexity='22' token_count='783' nesting_level='1' start_line='120' end_line='256'></method_info>
 			<added_lines>230,231,232,233,235</added_lines>
 			<deleted_lines>228,229,230,232</deleted_lines>
 		</method>
 		<modified_lines>
 			<added_lines>19,20,78</added_lines>
 			<deleted_lines>76</deleted_lines>
 		</modified_lines>
 	</modification>
 	<modification change_type='MODIFY' old_name='java\runtime\src\main\java\io\ray\runtime\functionmanager\FunctionManager.java' new_name='java\runtime\src\main\java\io\ray\runtime\functionmanager\FunctionManager.java'>
 		<file_info nloc='165' complexity='26' token_count='1426'></file_info>
 		<method name='FunctionManager::FunctionManager' parameters='codeSearchPath'>
 				<method_info nloc='3' complexity='1' token_count='16' nesting_level='1' start_line='70' end_line='72'></method_info>
 			<added_lines>70,71</added_lines>
 			<deleted_lines></deleted_lines>
 		</method>
 		<method name='FunctionManager::FunctionManager' parameters='jobResourcePath'>
 				<method_info nloc='3' complexity='1' token_count='13' nesting_level='1' start_line='68' end_line='70'></method_info>
 			<added_lines>70</added_lines>
 			<deleted_lines>68,69</deleted_lines>
 		</method>
 		<method name='FunctionManager::createJobFunctionTable' parameters='jobId'>
 				<method_info nloc='34' complexity='8' token_count='327' nesting_level='1' start_line='118' end_line='152'></method_info>
 			<added_lines>120,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148</added_lines>
 			<deleted_lines>118,121,122,123,124,125,126,127,128,129,130,131,132,133,134</deleted_lines>
 		</method>
 		<modified_lines>
 			<added_lines>14,15,25,29,62,65,67</added_lines>
 			<deleted_lines>3,24,60,63,65</deleted_lines>
 		</modified_lines>
 	</modification>
 	<modification change_type='MODIFY' old_name='java\runtime\src\main\java\io\ray\runtime\runner\RunManager.java' new_name='java\runtime\src\main\java\io\ray\runtime\runner\RunManager.java'>
 		<file_info nloc='311' complexity='44' token_count='2558'></file_info>
 		<method name='RunManager::buildWorkerCommand' parameters=''>
 				<method_info nloc='24' complexity='2' token_count='210' nesting_level='1' start_line='343' end_line='376'></method_info>
 			<added_lines>360,361,362,363</added_lines>
 			<deleted_lines>360</deleted_lines>
 		</method>
 		<modified_lines>
 			<added_lines></added_lines>
 			<deleted_lines></deleted_lines>
 		</modified_lines>
 	</modification>
 	<modification change_type='MODIFY' old_name='java\runtime\src\main\resources\ray.default.conf' new_name='java\runtime\src\main\resources\ray.default.conf'>
 		<file_info nloc='None' complexity='None' token_count='None'></file_info>
 		<modified_lines>
 			<added_lines>25,26,27,28</added_lines>
 			<deleted_lines>25,26,27,28</deleted_lines>
 		</modified_lines>
 	</modification>
 	<modification change_type='MODIFY' old_name='java\runtime\src\test\java\io\ray\runtime\config\RayConfigTest.java' new_name='java\runtime\src\test\java\io\ray\runtime\config\RayConfigTest.java'>
 		<file_info nloc='38' complexity='5' token_count='235'></file_info>
 		<method name='RayConfigTest::testCreateRayConfig' parameters=''>
 				<method_info nloc='11' complexity='1' token_count='65' nesting_level='1' start_line='13' end_line='24'></method_info>
 			<added_lines>15,18,19,22</added_lines>
 			<deleted_lines>14,17,20</deleted_lines>
 		</method>
 		<modified_lines>
 			<added_lines>4</added_lines>
 			<deleted_lines></deleted_lines>
 		</modified_lines>
 	</modification>
 	<modification change_type='MODIFY' old_name='java\runtime\src\test\java\io\ray\runtime\functionmanager\FunctionManagerTest.java' new_name='java\runtime\src\test\java\io\ray\runtime\functionmanager\FunctionManagerTest.java'>
 		<file_info nloc='145' complexity='11' token_count='1179'></file_info>
 		<method name='FunctionManagerTest::testGetFunctionFromLocalResource' parameters=''>
 				<method_info nloc='27' complexity='2' token_count='204' nesting_level='1' start_line='153' end_line='186'></method_info>
 			<added_lines>155,156,168,169,174,182,183</added_lines>
 			<deleted_lines>154,155,156,168,169,174,182</deleted_lines>
 		</method>
 		<modified_lines>
 			<added_lines>10</added_lines>
 			<deleted_lines></deleted_lines>
 		</modified_lines>
 	</modification>
 	<modification change_type='MODIFY' old_name='java\test.sh' new_name='java\test.sh'>
 		<file_info nloc='None' complexity='None' token_count='None'></file_info>
 		<modified_lines>
 			<added_lines>49,50,51,52,53,54,55,56,57,58</added_lines>
 			<deleted_lines></deleted_lines>
 		</modified_lines>
 	</modification>
 	<modification change_type='MODIFY' old_name='java\test\src\main\java\io\ray\test\BaseMultiLanguageTest.java' new_name='java\test\src\main\java\io\ray\test\BaseMultiLanguageTest.java'>
 		<file_info nloc='99' complexity='11' token_count='792'></file_info>
 		<method name='BaseMultiLanguageTest::setUp' parameters=''>
 				<method_info nloc='36' complexity='5' token_count='271' nesting_level='1' start_line='56' end_line='101'></method_info>
 			<added_lines>70,72,74,86,87,89</added_lines>
 			<deleted_lines>69,71,72,74,86,87</deleted_lines>
 		</method>
 		<modified_lines>
 			<added_lines>11</added_lines>
 			<deleted_lines></deleted_lines>
 		</modified_lines>
 	</modification>
 	<modification change_type='MODIFY' old_name='java\test\src\main\java\io\ray\test\ClassLoaderTest.java' new_name='java\test\src\main\java\io\ray\test\ClassLoaderTest.java'>
 		<file_info nloc='131' complexity='8' token_count='885'></file_info>
 		<method name='ClassLoaderTest::tearDown' parameters=''>
 				<method_info nloc='3' complexity='1' token_count='12' nesting_level='1' start_line='36' end_line='38'></method_info>
 			<added_lines>37</added_lines>
 			<deleted_lines>38</deleted_lines>
 		</method>
 		<method name='ClassLoaderTest::setUp' parameters=''>
 				<method_info nloc='3' complexity='1' token_count='14' nesting_level='1' start_line='29' end_line='33'></method_info>
 			<added_lines>31,32</added_lines>
 			<deleted_lines>32,33</deleted_lines>
 		</method>
 		<method name='ClassLoaderTest::testClassLoaderInMultiThreading' parameters=''>
 				<method_info nloc='78' complexity='4' token_count='477' nesting_level='1' start_line='41' end_line='130'></method_info>
 			<added_lines>42,47,48,49,85,86,92</added_lines>
 			<deleted_lines>43,44,49,50,86,87,93</deleted_lines>
 		</method>
 		<modified_lines>
 			<added_lines>25</added_lines>
 			<deleted_lines>6,26</deleted_lines>
 		</modified_lines>
 	</modification>
 	<modification change_type='MODIFY' old_name='python\ray\job_config.py' new_name='python\ray\job_config.py'>
 		<file_info nloc='41' complexity='3' token_count='152'></file_info>
 		<method name='__init__' parameters='self,worker_env,num_java_workers_per_process,jvm_options,code_search_path'>
 				<method_info nloc='6' complexity='1' token_count='20' nesting_level='1' start_line='18' end_line='23'></method_info>
 			<added_lines>23</added_lines>
 			<deleted_lines></deleted_lines>
 		</method>
 		<method name='serialize' parameters='self'>
 				<method_info nloc='9' complexity='2' token_count='69' nesting_level='1' start_line='37' end_line='45'></method_info>
 			<added_lines>44</added_lines>
 			<deleted_lines></deleted_lines>
 		</method>
 		<modified_lines>
 			<added_lines>13,14,15,34,35</added_lines>
 			<deleted_lines></deleted_lines>
 		</modified_lines>
 	</modification>
 	<modification change_type='MODIFY' old_name='python\ray\node.py' new_name='python\ray\node.py'>
 		<file_info nloc='676' complexity='106' token_count='4219'></file_info>
 		<method name='start_raylet' parameters='self,use_valgrind,use_profiler'>
 				<method_info nloc='38' complexity='1' token_count='237' nesting_level='1' start_line='691' end_line='736'></method_info>
 			<added_lines>733,734</added_lines>
 			<deleted_lines>733</deleted_lines>
 		</method>
 		<modified_lines>
 			<added_lines></added_lines>
 			<deleted_lines></deleted_lines>
 		</modified_lines>
 	</modification>
 	<modification change_type='MODIFY' old_name='python\ray\parameter.py' new_name='python\ray\parameter.py'>
 		<file_info nloc='272' complexity='27' token_count='930'></file_info>
 		<method name='__init__' parameters='self,redis_address,num_cpus,num_gpus,resources,memory,object_store_memory,redis_max_memory,redis_port,redis_shard_ports,object_manager_port,node_manager_port,gcs_server_port,node_ip_address,raylet_ip_address,min_worker_port,max_worker_port,object_ref_seed,driver_mode,redirect_worker_output,redirect_output,num_redis_shards,redis_max_clients,redis_password,plasma_directory,worker_path,huge_pages,include_dashboard,dashboard_host,dashboard_port,logging_level,logging_format,plasma_store_socket_name,raylet_socket_name,temp_dir,include_log_monitor,autoscaling_config,include_java,java_worker_options,load_code_from_local,start_initial_python_workers_for_first_job,_system_config,enable_object_reconstruction,metrics_agent_port,metrics_export_port,lru_evict,object_spilling_config'>
 				<method_info nloc='47' complexity='1' token_count='199' nesting_level='1' start_line='104' end_line='150'></method_info>
 			<added_lines>150</added_lines>
 			<deleted_lines>150</deleted_lines>
 		</method>
 		<method name='__init__' parameters='self,redis_address,num_cpus,num_gpus,resources,memory,object_store_memory,redis_max_memory,redis_port,redis_shard_ports,object_manager_port,node_manager_port,gcs_server_port,node_ip_address,raylet_ip_address,min_worker_port,max_worker_port,object_ref_seed,driver_mode,redirect_worker_output,redirect_output,num_redis_shards,redis_max_clients,redis_password,plasma_directory,worker_path,huge_pages,include_dashboard,dashboard_host,dashboard_port,logging_level,logging_format,plasma_store_socket_name,raylet_socket_name,temp_dir,include_log_monitor,autoscaling_config,include_java,java_worker_options,load_code_from_local,start_initial_python_workers_for_first_job,_system_config,enable_object_reconstruction,metrics_agent_port,metrics_export_port,lru_evict,object_spilling_config,code_search_path'>
 				<method_info nloc='48' complexity='1' token_count='203' nesting_level='1' start_line='104' end_line='151'></method_info>
 			<added_lines>150,151</added_lines>
 			<deleted_lines>150</deleted_lines>
 		</method>
 		<modified_lines>
 			<added_lines>198,199,200</added_lines>
 			<deleted_lines></deleted_lines>
 		</modified_lines>
 	</modification>
 	<modification change_type='MODIFY' old_name='python\ray\scripts\scripts.py' new_name='python\ray\scripts\scripts.py'>
 		<file_info nloc='1393' complexity='63' token_count='6959'></file_info>
 		<method name='start' parameters='node_ip_address,redis_address,address,redis_port,port,num_redis_shards,redis_max_clients,redis_password,redis_shard_ports,object_manager_port,node_manager_port,gcs_server_port,min_worker_port,max_worker_port,memory,object_store_memory,redis_max_memory,num_cpus,num_gpus,resources,head,include_webui,webui_host,include_dashboard,dashboard_host,dashboard_port,block,plasma_directory,huge_pages,autoscaling_config,no_redirect_worker_output,no_redirect_output,plasma_store_socket_name,raylet_socket_name,temp_dir,include_java,java_worker_options,load_code_from_local,system_config,lru_evict,enable_object_reconstruction,metrics_export_port,log_style,log_color,verbose'>
 				<method_info nloc='12' complexity='1' token_count='93' nesting_level='0' start_line='385' end_line='396'></method_info>
 			<added_lines></added_lines>
 			<deleted_lines>394,395,396</deleted_lines>
 		</method>
 		<method name='start' parameters='node_ip_address,redis_address,address,redis_port,port,num_redis_shards,redis_max_clients,redis_password,redis_shard_ports,object_manager_port,node_manager_port,gcs_server_port,min_worker_port,max_worker_port,memory,object_store_memory,redis_max_memory,num_cpus,num_gpus,resources,head,include_webui,webui_host,include_dashboard,dashboard_host,dashboard_port,block,plasma_directory,huge_pages,autoscaling_config,no_redirect_worker_output,no_redirect_output,plasma_store_socket_name,raylet_socket_name,temp_dir,include_java,java_worker_options,code_search_path,load_code_from_local,system_config,lru_evict,enable_object_reconstruction,metrics_export_port,log_style,log_color,verbose'>
 				<method_info nloc='12' complexity='1' token_count='95' nesting_level='0' start_line='392' end_line='403'></method_info>
 			<added_lines>401,402,403</added_lines>
 			<deleted_lines>394,395,396</deleted_lines>
 		</method>
 		<modified_lines>
 			<added_lines>357,358,359,360,361,362,363,514</added_lines>
 			<deleted_lines></deleted_lines>
 		</modified_lines>
 	</modification>
 	<modification change_type='MODIFY' old_name='python\ray\services.py' new_name='python\ray\services.py'>
 		<file_info nloc='1089' complexity='73' token_count='5701'></file_info>
 		<method name='build_java_worker_command' parameters='java_worker_options,redis_address,node_manager_port,plasma_store_name,raylet_name,redis_password,session_dir,code_search_path'>
 				<method_info nloc='4' complexity='1' token_count='19' nesting_level='0' start_line='1498' end_line='1501'></method_info>
 			<added_lines>1498,1499,1500,1501</added_lines>
 			<deleted_lines>1498,1499,1500,1501</deleted_lines>
 		</method>
 		<method name='start_raylet' parameters='redis_address,node_ip_address,node_manager_port,raylet_name,plasma_store_name,worker_path,temp_dir,session_dir,resource_spec,min_worker_port,max_worker_port,object_manager_port,redis_password,metrics_agent_port,metrics_export_port,use_valgrind,use_profiler,stdout_file,stderr_file,config,include_java,java_worker_options,load_code_from_local,plasma_directory,huge_pages,fate_share,socket_to_use,head_node,start_initial_python_workers_for_first_job,object_spilling_config,code_search_path'>
 				<method_info nloc='31' complexity='1' token_count='109' nesting_level='0' start_line='1250' end_line='1280'></method_info>
 			<added_lines>1279,1280</added_lines>
 			<deleted_lines></deleted_lines>
 		</method>
 		<method name='start_raylet' parameters='redis_address,node_ip_address,node_manager_port,raylet_name,plasma_store_name,worker_path,temp_dir,session_dir,resource_spec,min_worker_port,max_worker_port,object_manager_port,redis_password,metrics_agent_port,metrics_export_port,use_valgrind,use_profiler,stdout_file,stderr_file,config,include_java,java_worker_options,load_code_from_local,plasma_directory,huge_pages,fate_share,socket_to_use,head_node,start_initial_python_workers_for_first_job,object_spilling_config'>
 				<method_info nloc='30' complexity='1' token_count='105' nesting_level='0' start_line='1256' end_line='1285'></method_info>
 			<added_lines>1279,1280</added_lines>
 			<deleted_lines>1285</deleted_lines>
 		</method>
 		<method name='build_java_worker_command' parameters='java_worker_options,redis_address,node_manager_port,plasma_store_name,raylet_name,redis_password,session_dir'>
 				<method_info nloc='8' complexity='1' token_count='16' nesting_level='0' start_line='1496' end_line='1503'></method_info>
 			<added_lines>1498,1499,1500,1501</added_lines>
 			<deleted_lines>1496,1497,1498,1499,1500,1501,1502,1503</deleted_lines>
 		</method>
 		<modified_lines>
 			<added_lines>16,17,21,1318,1319,1320,1350,1357,1384,1385,1400,1401,1402,1512,1533</added_lines>
 			<deleted_lines>14,20,21,23,74,75,76,77,78,1351,1353,1354,1504,1535</deleted_lines>
 		</modified_lines>
 	</modification>
 	<modification change_type='MODIFY' old_name='python\ray\worker.py' new_name='python\ray\worker.py'>
 		<file_info nloc='961' complexity='173' token_count='5133'></file_info>
 		<method name='init' parameters='address,num_cpus,num_gpus,resources,object_store_memory,local_mode,ignore_reinit_error,include_dashboard,dashboard_host,dashboard_port,job_config,configure_logging,logging_level,logging_format,log_to_driver,_enable_object_reconstruction,_redis_max_memory,_node_ip_address,_driver_object_store_memory,_memory,_redis_password,_include_java,_java_worker_options,_code_search_path,_temp_dir,_load_code_from_local,_lru_evict,_metrics_export_port,_object_spilling_config,_system_config'>
 				<method_info nloc='32' complexity='1' token_count='137' nesting_level='0' start_line='470' end_line='502'></method_info>
 			<added_lines>496</added_lines>
 			<deleted_lines></deleted_lines>
 		</method>
 		<modified_lines>
 			<added_lines>591,687</added_lines>
 			<deleted_lines></deleted_lines>
 		</modified_lines>
 	</modification>
 	<modification change_type='MODIFY' old_name='python\ray\workers\default_worker.py' new_name='python\ray\workers\default_worker.py'>
 		<file_info nloc='168' complexity='0' token_count='776'></file_info>
 		<modified_lines>
 			<added_lines>4,5,103,104,105,106,107,108,109,146,147,148,149,150,151,152</added_lines>
 			<deleted_lines>101</deleted_lines>
 		</modified_lines>
 	</modification>
 	<modification change_type='MODIFY' old_name='src\ray\protobuf\gcs.proto' new_name='src\ray\protobuf\gcs.proto'>
 		<file_info nloc='None' complexity='None' token_count='None'></file_info>
 		<modified_lines>
 			<added_lines>324,325,326,327</added_lines>
 			<deleted_lines></deleted_lines>
 		</modified_lines>
 	</modification>
 	<modification change_type='MODIFY' old_name='src\ray\raylet\worker_pool.cc' new_name='src\ray\raylet\worker_pool.cc'>
 		<file_info nloc='740' complexity='165' token_count='5462'></file_info>
 		<method name='ray::raylet::WorkerPool::StartWorkerProcess' parameters='language,worker_type,job_id,dynamic_options'>
 				<method_info nloc='140' complexity='32' token_count='940' nesting_level='2' start_line='174' end_line='339'></method_info>
 			<added_lines>227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253</added_lines>
 			<deleted_lines></deleted_lines>
 		</method>
 		<modified_lines>
 			<added_lines></added_lines>
 			<deleted_lines></deleted_lines>
 		</modified_lines>
 	</modification>
 </commit>
</bug_data>
