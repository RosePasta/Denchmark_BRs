<bug_data>
<bug id='8593' author='ericl' open_date='2020-05-25T07:36:14Z' closed_time='2020-06-08T19:37:12Z'>
 	<summary>Cannot overwrite named actor even after killing it</summary>
 	<description>
 &lt;denchmark-h:h3&gt;What is the problem?&lt;/denchmark-h&gt;
 
 Ray version and other system information (Python version, TensorFlow version, OS): Latest ray
 There doesn't seem to be a way to reuse an actor name.
 &lt;denchmark-h:h3&gt;Reproduction (REQUIRED)&lt;/denchmark-h&gt;
 
 &lt;denchmark-code&gt;&gt;&gt;&gt; b = Bar.options(name="bar").remote()
 &gt;&gt;&gt; b = ray.get_actor("bar")
 &gt;&gt;&gt; ray.kill(b)
 &gt;&gt;&gt; b = Bar.options(name="bar").remote()
 Traceback (most recent call last):
   File "&lt;stdin&gt;", line 1, in &lt;module&gt;
   File "/home/eric/Desktop/ray/python/ray/actor.py", line 397, in remote
     return actor_cls._remote(args=args, kwargs=kwargs, **options)
   File "/home/eric/Desktop/ray/python/ray/actor.py", line 496, in _remote
     "ray.get_actor('{name}')".format(name=name))
 ValueError: The name bar is already taken.
 Please use a different name or get the existing
 actor using ray.get_actor('bar')
 &lt;/denchmark-code&gt;
 
 	</description>
 	<comments>
 		<comment id='1' author='ericl' date='2020-05-25T07:36:20Z'>
 		&lt;denchmark-link:https://github.com/edoakes&gt;@edoakes&lt;/denchmark-link&gt;
 
 		</comment>
 		<comment id='2' author='ericl' date='2020-05-25T08:01:26Z'>
 		This has been an issue for a while actually. I was planning to work on fixing this issue next sprint. Is it an urgent issue?
 		</comment>
 		<comment id='3' author='ericl' date='2020-05-25T08:38:07Z'>
 		It's not urgent, but does seem like a regression from the previous experimental implementation of named actors.
 		</comment>
 		<comment id='4' author='ericl' date='2020-05-25T18:30:46Z'>
 		Related issue here. &lt;denchmark-link:https://github.com/ray-project/ray/issues/7591&gt;#7591&lt;/denchmark-link&gt;
 
 		</comment>
 		<comment id='5' author='ericl' date='2020-05-28T21:58:01Z'>
 		This is urgent for &lt;denchmark-link:https://github.com/allenyin55&gt;@allenyin55&lt;/denchmark-link&gt;
  and we will work on it next week.
 		</comment>
 	</comments>
 </bug>
<commit id='3388864768fa198f27496824407f9aee16256c2f' author='SangBin Cho' date='2020-06-08 11:22:01-05:00'>
 	<dmm_unit complexity='0.751219512195122' interfacing='1.0' size='0.11219512195121951'></dmm_unit>
 	<modification change_type='MODIFY' old_name='python\ray\tests\test_actor_advanced.py' new_name='python\ray\tests\test_actor_advanced.py'>
 		<file_info nloc='634' complexity='150' token_count='4223'></file_info>
 		<method name='test_detached_actor_cleanup_due_to_failure.kill_itself' parameters='self'>
 				<method_info nloc='2' complexity='1' token_count='11' nesting_level='2' start_line='788' end_line='790'></method_info>
 			<added_lines>788,789,790</added_lines>
 			<deleted_lines></deleted_lines>
 		</method>
 		<method name='test_detached_actor_cleanup_due_to_failure.wait_until_actor_dead' parameters='handle'>
 				<method_info nloc='12' complexity='3' token_count='80' nesting_level='1' start_line='795' end_line='806'></method_info>
 			<added_lines>795,796,797,798,799,800,801,802,803,804,805,806</added_lines>
 			<deleted_lines></deleted_lines>
 		</method>
 		<method name='test_detached_actor_cleanup_due_to_failure.ping' parameters='self'>
 				<method_info nloc='2' complexity='1' token_count='7' nesting_level='2' start_line='785' end_line='786'></method_info>
 			<added_lines>785,786</added_lines>
 			<deleted_lines></deleted_lines>
 		</method>
 		<method name='test_detached_actor_cleanup' parameters='ray_start_regular'>
 				<method_info nloc='37' complexity='1' token_count='51' nesting_level='0' start_line='702' end_line='766'></method_info>
 			<added_lines>702,703,704,705,706,707,708,709,710,711,712,713,714,715,716,717,718,719,720,721,722,723,724,725,726,727,728,729,730,731,732,733,734,735,736,737,738,739,740,741,742,743,744,745,746,747,748,749,750,751,752,753,754,755,756,757,758,759,760,761,762,763,764,765,766</added_lines>
 			<deleted_lines></deleted_lines>
 		</method>
 		<method name='test_detached_actor_cleanup.create_and_kill_actor' parameters='actor_name'>
 				<method_info nloc='15' complexity='3' token_count='115' nesting_level='1' start_line='710' end_line='727'></method_info>
 			<added_lines>710,711,712,713,714,715,716,717,718,719,720,721,722,723,724,725,726,727</added_lines>
 			<deleted_lines></deleted_lines>
 		</method>
 		<method name='test_detached_actor_cleanup.ping' parameters='self'>
 				<method_info nloc='2' complexity='1' token_count='7' nesting_level='2' start_line='705' end_line='706'></method_info>
 			<added_lines>705,706</added_lines>
 			<deleted_lines></deleted_lines>
 		</method>
 		<method name='test_detached_actor' parameters='ray_start_regular'>
 				<method_info nloc='34' complexity='1' token_count='146' nesting_level='0' start_line='658' end_line='699'></method_info>
 			<added_lines>671,672,673</added_lines>
 			<deleted_lines>671</deleted_lines>
 		</method>
 		<method name='test_detached_actor_cleanup_due_to_failure' parameters='ray_start_cluster'>
 				<method_info nloc='30' complexity='2' token_count='179' nesting_level='0' start_line='778' end_line='834'></method_info>
 			<added_lines>778,779,780,781,782,783,784,785,786,787,788,789,790,791,792,793,794,795,796,797,798,799,800,801,802,803,804,805,806,807,808,809,810,811,812,813,814,815,816,817,818,819,820,821,822,823,824,825,826,827,828,829,830,831,832,833,834</added_lines>
 			<deleted_lines></deleted_lines>
 		</method>
 		<method name='test_detached_actor_cleanup_due_to_failure.create_detached_actor_blocking' parameters='actor_name,schedule_in_second_node'>
 				<method_info nloc='2' complexity='1' token_count='9' nesting_level='1' start_line='808' end_line='809'></method_info>
 			<added_lines>808,809</added_lines>
 			<deleted_lines></deleted_lines>
 		</method>
 		<modified_lines>
 			<added_lines>767,768,769,770,771,772,773,774,775,776,777,835,836</added_lines>
 			<deleted_lines></deleted_lines>
 		</modified_lines>
 	</modification>
 	<modification change_type='MODIFY' old_name='python\ray\util\named_actors.py' new_name='python\ray\util\named_actors.py'>
 		<file_info nloc='47' complexity='13' token_count='295'></file_info>
 		<method name='_get_actor' parameters='name'>
 				<method_info nloc='16' complexity='5' token_count='115' nesting_level='0' start_line='23' end_line='42'></method_info>
 			<added_lines>34,35,36,37,38,39,40,41</added_lines>
 			<deleted_lines>33</deleted_lines>
 		</method>
 		<modified_lines>
 			<added_lines>6</added_lines>
 			<deleted_lines></deleted_lines>
 		</modified_lines>
 	</modification>
 	<modification change_type='MODIFY' old_name='src\ray\core_worker\core_worker.cc' new_name='src\ray\core_worker\core_worker.cc'>
 		<file_info nloc='1611' complexity='278' token_count='12713'></file_info>
 		<method name='ray::CoreWorker::GetNamedActorHandle' parameters='name,actor_handle'>
 				<method_info nloc='45' complexity='5' token_count='376' nesting_level='1' start_line='1363' end_line='1420'></method_info>
 			<added_lines>1383,1387,1388,1389,1390,1411,1412,1413,1414</added_lines>
 			<deleted_lines>1383,1384,1385,1386,1387,1388,1412</deleted_lines>
 		</method>
 		<modified_lines>
 			<added_lines></added_lines>
 			<deleted_lines></deleted_lines>
 		</modified_lines>
 	</modification>
 	<modification change_type='MODIFY' old_name='src\ray\gcs\gcs_client\service_based_accessor.cc' new_name='src\ray\gcs\gcs_client\service_based_accessor.cc'>
 		<file_info nloc='1166' complexity='149' token_count='8642'></file_info>
 		<modified_lines>
 			<added_lines>16</added_lines>
 			<deleted_lines></deleted_lines>
 		</modified_lines>
 	</modification>
 	<modification change_type='MODIFY' old_name='src\ray\gcs\gcs_server\gcs_actor_manager.cc' new_name='src\ray\gcs\gcs_server\gcs_actor_manager.cc'>
 		<file_info nloc='618' complexity='108' token_count='5122'></file_info>
 		<method name='ray::gcs::GcsActorManager::ReconstructActor' parameters='actor_id,need_reschedule'>
 				<method_info nloc='51' complexity='7' token_count='406' nesting_level='2' start_line='624' end_line='686'></method_info>
 			<added_lines>660,661,662,663,664,665,666,667,672,673,674,675,676</added_lines>
 			<deleted_lines>664</deleted_lines>
 		</method>
 		<modified_lines>
 			<added_lines></added_lines>
 			<deleted_lines></deleted_lines>
 		</modified_lines>
 	</modification>
 	<modification change_type='MODIFY' old_name='src\ray\gcs\gcs_server\test\gcs_actor_manager_test.cc' new_name='src\ray\gcs\gcs_server\test\gcs_actor_manager_test.cc'>
 		<file_info nloc='405' complexity='19' token_count='3788'></file_info>
 		<method name='ray::TEST_F' parameters='GcsActorManagerTest,TestNamedActorDeletionNodeFailure'>
 				<method_info nloc='29' complexity='1' token_count='289' nesting_level='1' start_line='452' end_line='489'></method_info>
 			<added_lines>452,453,454,455,456,457,458,459,460,461,462,463,464,465,466,467,468,469,470,471,472,473,474,475,476,477,478,479,480,481,482,483,484,485,486,487,488,489</added_lines>
 			<deleted_lines></deleted_lines>
 		</method>
 		<method name='ray::TEST_F' parameters='GcsActorManagerTest,TestNamedActorDeletionWorkerFailure'>
 				<method_info nloc='30' complexity='1' token_count='302' nesting_level='1' start_line='412' end_line='450'></method_info>
 			<added_lines>412,413,414,415,416,417,418,419,420,421,422,423,424,425,426,427,428,429,430,431,432,433,434,435,436,437,438,439,440,441,442,443,444,445,446,447,448,449,450</added_lines>
 			<deleted_lines></deleted_lines>
 		</method>
 		<method name='ray::TEST_F' parameters='GcsActorManagerTest,TestNamedActorDeletionNotHappendWhenReconstructed'>
 				<method_info nloc='29' complexity='1' token_count='291' nesting_level='1' start_line='491' end_line='531'></method_info>
 			<added_lines>491,492,493,494,495,496,497,498,499,500,501,502,503,504,505,506,507,508,509,510,511,512,513,514,515,516,517,518,519,520,521,522,523,524,525,526,527,528,529,530,531</added_lines>
 			<deleted_lines></deleted_lines>
 		</method>
 		<modified_lines>
 			<added_lines>451,490,532</added_lines>
 			<deleted_lines></deleted_lines>
 		</modified_lines>
 	</modification>
 </commit>
</bug_data>
