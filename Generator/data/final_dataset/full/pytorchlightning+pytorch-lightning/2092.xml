<bug_data>
<bug id='2092' author='edenlightning' open_date='2020-06-05T20:33:09Z' closed_time='2020-06-08T21:55:26Z'>
 	<summary>[ddp] New ddp implementation doesn't work in notebooks / using scripts</summary>
 	<description>
 The using .spawn() to spin off subprocesses ddp in had a few problems:
 
 Everything needs to be picklable.
 It doesnâ€™t work well with num_workers on dataloaders because of spawn
 fit(model) trains the model in a subprocess, so the original model is not updated.
 Those are not limitations of lightning, but of pytorch and python.
 
 As a result, we removed .spawn and instead call the script under the hood.
 This approach solves all problems above, but it assumes you can call your model like
 python train.py ... and does not support other ways of calling the script.
 We should decide how to support DDP on Jupyter notebooks.
 	</description>
 	<comments>
 	</comments>
 </bug>
<commit id='3260e59b2723a0f5d666c6779486717aa3a9373d' author='William Falcon' date='2020-06-08 17:55:25-04:00'>
 	<dmm_unit complexity='0.3333333333333333' interfacing='0.6666666666666666' size='0.3333333333333333'></dmm_unit>
 	<modification change_type='MODIFY' old_name='docs\source\multi_gpu.rst' new_name='docs\source\multi_gpu.rst'>
 		<file_info nloc='None' complexity='None' token_count='None'></file_info>
 		<modified_lines>
 			<added_lines>203,204,257,258,259,260,261,262,263,264,265,266,267,268,269,270,271,272,273,274,275,276,299,300,301,302,303,304,305,306,307,308,309,310,311,312,313,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,329,330,331,332,333,334,335,336,337,338,339,340,341,342,343,344,345,346,347,348,349,350,351,352,353,354,355,356,357,358,359,360,361,362,363,364,365,366,367,609,610,611,612,613,614,615,616,617,618,619,620,621,622,623,624,625,626,627,628</added_lines>
 			<deleted_lines>203</deleted_lines>
 		</modified_lines>
 	</modification>
 	<modification change_type='MODIFY' old_name='pytorch_lightning\trainer\data_loading.py' new_name='pytorch_lightning\trainer\data_loading.py'>
 		<file_info nloc='241' complexity='61' token_count='1340'></file_info>
 		<method name='_get_distributed_sampler' parameters='self,dataloader'>
 				<method_info nloc='15' complexity='3' token_count='130' nesting_level='1' start_line='134' end_line='148'></method_info>
 			<added_lines>142</added_lines>
 			<deleted_lines></deleted_lines>
 		</method>
 		<modified_lines>
 			<added_lines></added_lines>
 			<deleted_lines></deleted_lines>
 		</modified_lines>
 	</modification>
 	<modification change_type='MODIFY' old_name='pytorch_lightning\trainer\distrib_data_parallel.py' new_name='pytorch_lightning\trainer\distrib_data_parallel.py'>
 		<file_info nloc='392' complexity='89' token_count='1818'></file_info>
 		<method name='ddp_train' parameters='self,process_idx,model,is_master'>
 				<method_info nloc='35' complexity='12' token_count='300' nesting_level='1' start_line='397' end_line='468'></method_info>
 			<added_lines>398,406,407,408,461</added_lines>
 			<deleted_lines>397,457</deleted_lines>
 		</method>
 		<method name='set_distributed_mode' parameters='self,distributed_backend'>
 				<method_info nloc='54' complexity='25' token_count='301' nesting_level='1' start_line='194' end_line='256'></method_info>
 			<added_lines>224</added_lines>
 			<deleted_lines>224</deleted_lines>
 		</method>
 		<method name='ddp_train' parameters='self,process_idx,model,is_master,proc_offset'>
 				<method_info nloc='36' complexity='13' token_count='315' nesting_level='1' start_line='398' end_line='472'></method_info>
 			<added_lines>398,406,407,408,461</added_lines>
 			<deleted_lines>457</deleted_lines>
 		</method>
 		<method name='spawn_ddp_children' parameters='self,model'>
 				<method_info nloc='35' complexity='7' token_count='304' nesting_level='1' start_line='342' end_line='396'></method_info>
 			<added_lines>381</added_lines>
 			<deleted_lines></deleted_lines>
 		</method>
 		<modified_lines>
 			<added_lines></added_lines>
 			<deleted_lines></deleted_lines>
 		</modified_lines>
 	</modification>
 	<modification change_type='MODIFY' old_name='pytorch_lightning\trainer\trainer.py' new_name='pytorch_lightning\trainer\trainer.py'>
 		<file_info nloc='923' complexity='90' token_count='3897'></file_info>
 		<modified_lines>
 			<added_lines>249,879,883,884,885,886,887,888</added_lines>
 			<deleted_lines>249</deleted_lines>
 		</modified_lines>
 	</modification>
 </commit>
</bug_data>
