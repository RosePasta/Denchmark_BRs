<bug_data>
<bug id='1613' author='mkostiv' open_date='2020-05-28T17:27:39Z' closed_time='2020-06-15T12:26:26Z'>
 	<summary>Dump annotations with frame step: Key error</summary>
 	<description>
 Steps to reproduce:
 
 Create a task with frame step (5 in my case)
 Annotate a few images
 Dump annotations
 
 git describe 0.2.0-750-g3f46258
 &lt;denchmark-link:https://user-images.githubusercontent.com/45266535/83173301-7eb4eb00-a121-11ea-8f06-0457062e01a4.png&gt;&lt;/denchmark-link&gt;
 
 Traceback (most recent call last):
 File "/usr/local/lib/python3.5/dist-packages/rq/worker.py", line 812, in perform_job
 rv = job.perform()
 File "/usr/local/lib/python3.5/dist-packages/rq/job.py", line 588, in perform
 self._result = self._execute()
 File "/usr/local/lib/python3.5/dist-packages/rq/job.py", line 594, in _execute
 return self.func(*self.args, **self.kwargs)
 File "/home/django/cvat/apps/dataset_manager/views.py", line 87, in export_task_annotations
 return export_task(task_id, dst_format, server_url=server_url, save_images=False)
 File "/home/django/cvat/apps/dataset_manager/views.py", line 62, in export_task
 server_url=server_url, save_images=save_images)
 File "/home/django/cvat/apps/dataset_manager/task.py", line 723, in export_task
 save_images=save_images)
 File "/home/django/cvat/apps/dataset_manager/task.py", line 619, in export
 exporter(dst_file, task_data, **options)
 File "/home/django/cvat/apps/dataset_manager/formats/registry.py", line 35, in call
 f_or_cls(*args, **kwargs)
 File "/home/django/cvat/apps/dataset_manager/formats/cvat.py", line 545, in _export_images
 anno_callback=dump_as_cvat_annotation, save_images=save_images)
 File "/home/django/cvat/apps/dataset_manager/formats/cvat.py", line 517, in _export
 anno_callback(f, task_data)
 File "/home/django/cvat/apps/dataset_manager/formats/cvat.py", line 178, in dump_as_cvat_annotation
 for frame_annotation in annotations.group_by_frame(include_empty=True):
 File "/home/django/cvat/apps/dataset_manager/bindings.py", line 259, in group_by_frame
 get_frame(shape['frame']).labeled_shapes.append(
 File "/home/django/cvat/apps/dataset_manager/bindings.py", line 234, in get_frame
 frame_info = self._frame_info[idx]
 KeyError: 1
 	</description>
 	<comments>
 		<comment id='1' author='mkostiv' date='2020-05-28T19:23:57Z'>
 		&lt;denchmark-link:https://github.com/zhiltsov-max&gt;@zhiltsov-max&lt;/denchmark-link&gt;
  , do you think you can look at the issue tomorrow?
 		</comment>
 	</comments>
 </bug>
<commit id='1fb7e5bf6d2fd5ccb57cc7285c486d9f2c63cef8' author='zhiltsov-max' date='2020-06-15 15:26:25+03:00'>
 	<dmm_unit complexity='0.3333333333333333' interfacing='0.0' size='0.6666666666666666'></dmm_unit>
 	<modification change_type='MODIFY' old_name='CHANGELOG.md' new_name='CHANGELOG.md'>
 		<file_info nloc='None' complexity='None' token_count='None'></file_info>
 		<modified_lines>
 			<added_lines>28,89,90</added_lines>
 			<deleted_lines></deleted_lines>
 		</modified_lines>
 	</modification>
 	<modification change_type='MODIFY' old_name='cvat\apps\dataset_manager\bindings.py' new_name='cvat\apps\dataset_manager\bindings.py'>
 		<file_info nloc='508' complexity='142' token_count='4115'></file_info>
 		<method name='_export_tracked_shape' parameters='self,shape'>
 				<method_info nloc='14' complexity='1' token_count='121' nesting_level='1' start_line='198' end_line='211'></method_info>
 			<added_lines>201</added_lines>
 			<deleted_lines></deleted_lines>
 		</method>
 		<method name='group_by_frame' parameters='self,include_empty'>
 				<method_info nloc='18' complexity='6' token_count='144' nesting_level='1' start_line='233' end_line='267'></method_info>
 			<added_lines>237</added_lines>
 			<deleted_lines>235</deleted_lines>
 		</method>
 		<method name='_import_track' parameters='self,track'>
 				<method_info nloc='17' complexity='8' token_count='178' nesting_level='1' start_line='327' end_line='344'></method_info>
 			<added_lines>330,331,336</added_lines>
 			<deleted_lines>330,331,336,337</deleted_lines>
 		</method>
 		<method name='_import_tag' parameters='self,tag'>
 				<method_info nloc='9' complexity='3' token_count='85' nesting_level='1' start_line='301' end_line='309'></method_info>
 			<added_lines>304</added_lines>
 			<deleted_lines>302,303</deleted_lines>
 		</method>
 		<method name='_import_shape' parameters='self,shape'>
 				<method_info nloc='9' complexity='3' token_count='85' nesting_level='1' start_line='317' end_line='325'></method_info>
 			<added_lines>320</added_lines>
 			<deleted_lines>319,320</deleted_lines>
 		</method>
 		<method name='rel_frame_id' parameters='self,absolute_id'>
 				<method_info nloc='2' complexity='1' token_count='20' nesting_level='1' start_line='103' end_line='104'></method_info>
 			<added_lines>103,104</added_lines>
 			<deleted_lines>103,104</deleted_lines>
 		</method>
 		<method name='_export_labeled_shape' parameters='self,shape'>
 				<method_info nloc='11' complexity='1' token_count='92' nesting_level='1' start_line='213' end_line='223'></method_info>
 			<added_lines>217</added_lines>
 			<deleted_lines>213,214</deleted_lines>
 		</method>
 		<method name='import_dm_annotations' parameters='dm_dataset,task_data'>
 				<method_info nloc='45' complexity='14' token_count='410' nesting_level='0' start_line='558' end_line='607'></method_info>
 			<added_lines>569</added_lines>
 			<deleted_lines>570</deleted_lines>
 		</method>
 		<method name='group_by_frame.get_frame' parameters='idx'>
 				<method_info nloc='14' complexity='2' token_count='81' nesting_level='2' start_line='235' end_line='248'></method_info>
 			<added_lines>237</added_lines>
 			<deleted_lines>235</deleted_lines>
 		</method>
 		<method name='_init_frame_info' parameters='self'>
 				<method_info nloc='17' complexity='5' token_count='158' nesting_level='1' start_line='106' end_line='123'></method_info>
 			<added_lines>109,114</added_lines>
 			<deleted_lines>109</deleted_lines>
 		</method>
 		<method name='_export_tag' parameters='self,tag'>
 				<method_info nloc='7' complexity='1' token_count='60' nesting_level='1' start_line='225' end_line='231'></method_info>
 			<added_lines>227</added_lines>
 			<deleted_lines>225</deleted_lines>
 		</method>
 		<method name='abs_frame_id' parameters='self,relative_id'>
 				<method_info nloc='2' complexity='1' token_count='21' nesting_level='1' start_line='100' end_line='101'></method_info>
 			<added_lines>100,101</added_lines>
 			<deleted_lines></deleted_lines>
 		</method>
 		<modified_lines>
 			<added_lines>102,105</added_lines>
 			<deleted_lines>196,197,224</deleted_lines>
 		</modified_lines>
 	</modification>
 	<modification change_type='MODIFY' old_name='cvat\apps\dataset_manager\formats\mot.py' new_name='cvat\apps\dataset_manager\formats\mot.py'>
 		<file_info nloc='53' complexity='8' token_count='444'></file_info>
 		<method name='_import' parameters='src_file,task_data'>
 				<method_info nloc='33' complexity='7' token_count='275' nesting_level='0' start_line='32' end_line='75'></method_info>
 			<added_lines>43,60</added_lines>
 			<deleted_lines>43,60</deleted_lines>
 		</method>
 		<modified_lines>
 			<added_lines></added_lines>
 			<deleted_lines></deleted_lines>
 		</modified_lines>
 	</modification>
 </commit>
</bug_data>
