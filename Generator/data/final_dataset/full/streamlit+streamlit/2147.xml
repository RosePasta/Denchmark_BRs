<bug_data>
<bug id='2147' author='treuille' open_date='2020-10-10T15:43:29Z' closed_time='2020-11-12T22:07:52Z'>
 	<summary>Clicking on a text field in the sidebar (on mobile) causes the sidebar to close.</summary>
 	<description>
 &lt;denchmark-h:h1&gt;Summary&lt;/denchmark-h&gt;
 
 When the window is too narrow, clicking on a text input in the sidebar causes the sidebar to disappear, making it impossible to type in text. [&lt;denchmark-link:https://drive.google.com/file/d/1KetCBECPsg3UAiESZCRdm6W9M_zIrNkc/view?usp=sharing&gt;video example&lt;/denchmark-link&gt;
 ]
 &lt;denchmark-h:h1&gt;Steps to reproduce&lt;/denchmark-h&gt;
 
 
 Put a text input in the sidebar.
 Make the Streamlit app window narrow.
 Click the text input in the sidebar.
 
 &lt;denchmark-h:h2&gt;Expected behavior:&lt;/denchmark-h&gt;
 
 Ideally, the sidebar would stay open and the text input box would have focus and you coudl type something in.
 In fact, this  happen when the window is a bit wider. [&lt;denchmark-link:https://drive.google.com/file/d/1fObxQWIjkL_5VBJY_niltG489Ki8tRB8/view?usp=sharing&gt;video example&lt;/denchmark-link&gt;
 ]
 &lt;denchmark-h:h2&gt;Actual behavior:&lt;/denchmark-h&gt;
 
 Clicking on a text input in the sidebar causes the sidebar to disappear, making it impossible to type in text. [&lt;denchmark-link:https://drive.google.com/file/d/1KetCBECPsg3UAiESZCRdm6W9M_zIrNkc/view?usp=sharing&gt;video example&lt;/denchmark-link&gt;
 ]
 &lt;denchmark-h:h2&gt;Is this a regression?&lt;/denchmark-h&gt;
 
 Unkown
 &lt;denchmark-h:h1&gt;Debug info&lt;/denchmark-h&gt;
 
 
 Streamlit version: Streamlit, version 0.68.0
 Python version: Python 3.8.5
 Using Conda? PipEnv? PyEnv? Pex? pipenv, version 2020.8.13
 OS version:
 
 &lt;denchmark-code&gt;Distributor ID: Ubuntu
 Description:    Ubuntu 20.04.1 LTS
 Release:        20.04
 Codename:       focal
 &lt;/denchmark-code&gt;
 
 
 Browser version: Safari on iPadOS 14
 
 	</description>
 	<comments>
 		<comment id='1' author='treuille' date='2020-11-06T21:31:48Z'>
 		Naomi Most commented: Requested by [~accountid:5f571ad5c9c528007ca18054]
 		</comment>
 		<comment id='2' author='treuille' date='2020-11-12T06:10:25Z'>
 		Dev notes:
 Hm, unable to repro on Chrome/Windows with a simple example &lt;denchmark-link:https://share.streamlit.io/akrolsmir/streamlit-snippet/main?snippet_id=8zu2vvp2&gt;https://share.streamlit.io/akrolsmir/streamlit-snippet/main?snippet_id=8zu2vvp2&lt;/denchmark-link&gt;
 
 &lt;denchmark-code&gt;import streamlit as st
 
 input = st.sidebar.text_input('Write some stuff')
 st.write(input)
 &lt;/denchmark-code&gt;
 
 Also did not repro on Safari/Macbook.
 But it repros on Chrome/Android. So it's probably a mobile slash touch-related issue.
 The app is not re-running, just popping. Is it related to touch event vs click event? TextInput is a BaseWeb component, so look there.
 TextInput.tsx: onBlur, onKeyPress, onChange are not firing when this thing disappears.
 Sidebar.tsx: toggleCollapse is not firing (?!)... AHA! It's checkmobileOnResize().
 So why does tapping on Sidebar trigger a resize event? Oh, probably cuz the keyboard pops up all of a sudden
 Ideas:
 
 Do nothing
 Remove checkMobileOnResize entirely
 Only collapse if the innerWidth got smaller? This has the advantage of doing the right thing when a user is making the window wider/taller/shorter. But requires another parameter to track. (Also in the video cast it didn't really look like Adrien's innerwidth was changing?)
 Only collapse if innerWidth just equalled the threshold? Could be bad if checkMobileOnResize is used for other things. Also, this doesn't work, since resize sometimes skips over the threshold (not every pixel size fires)
 
 Let's do 2.
 		</comment>
 	</comments>
 </bug>
<commit id='a27d4c7fc8dfef32ba40f51c1a57f6f87b0ef800' author='Austin Chen' date='2020-11-12 14:07:51-08:00'>
 	<dmm_unit complexity='1.0' interfacing='1.0' size='1.0'></dmm_unit>
 	<modification change_type='MODIFY' old_name='e2e\scripts\st_sidebar.py' new_name='e2e\scripts\st_sidebar.py'>
 		<file_info nloc='10' complexity='0' token_count='96'></file_info>
 		<modified_lines>
 			<added_lines>27,28</added_lines>
 			<deleted_lines></deleted_lines>
 		</modified_lines>
 	</modification>
 	<modification change_type='MODIFY' old_name='e2e\specs\st_sidebar.spec.js' new_name='e2e\specs\st_sidebar.spec.js'>
 		<file_info nloc='47' complexity='6' token_count='248'></file_info>
 		<method name='(anonymous)' parameters=''>
 				<method_info nloc='7' complexity='1' token_count='50' nesting_level='0' start_line='18' end_line='76'></method_info>
 			<added_lines>44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75</added_lines>
 			<deleted_lines></deleted_lines>
 		</method>
 		<modified_lines>
 			<added_lines></added_lines>
 			<deleted_lines></deleted_lines>
 		</modified_lines>
 	</modification>
 	<modification change_type='MODIFY' old_name='frontend\src\components\core\Sidebar\Sidebar.tsx' new_name='frontend\src\components\core\Sidebar\Sidebar.tsx'>
 		<file_info nloc='None' complexity='None' token_count='None'></file_info>
 		<modified_lines>
 			<added_lines>40,64,131,132,133,134,135,137,138</added_lines>
 			<deleted_lines>129</deleted_lines>
 		</modified_lines>
 	</modification>
 </commit>
</bug_data>
