<bug_data>
<bug id='1166' author='firstmover' open_date='2020-03-02T05:00:25Z' closed_time='2020-07-13T17:39:42Z'>
 	<summary>Incorrect cache hit when argument is a list of float</summary>
 	<description>
 &lt;denchmark-h:h1&gt;Summary&lt;/denchmark-h&gt;
 
 Incorrect cache hit when argument is a list of float.
 &lt;denchmark-h:h1&gt;Steps to reproduce&lt;/denchmark-h&gt;
 
 import streamlit as st
 
 
 @st.cache()
 def _func(o):
     return o
 
 
 def main():
 
     for o in [[0.0, 1.0], [2.0, 3.0]]:
         print("o: {}".format(o))
         ret_o = _func(o)
         print("ret_o: {}".format(ret_o))
 
     for o in [[0, 1], [2, 3]]:
         print("o: {}".format(o))
         ret_o = _func(o)
         print("ret_o: {}".format(ret_o))
 
 
 if __name__ == "__main__":
     main()
 &lt;denchmark-h:h2&gt;Expected behavior:&lt;/denchmark-h&gt;
 
 _func returns the argument o. In main loop, for each _func call o and ret_o should be identical.
 &lt;denchmark-h:h2&gt;Actual behavior:&lt;/denchmark-h&gt;
 
 Incorrect cache hit when o is a list of float. When o is a list of int, it works correctly.
 &lt;denchmark-h:h2&gt;Is this a regression?&lt;/denchmark-h&gt;
 
 I am not sure. I didn't try the old version.
 &lt;denchmark-h:h1&gt;Debug info&lt;/denchmark-h&gt;
 
 
 Streamlit version: 0.56.0
 Python version: 3.7.4
 conda
 OS version: Ubuntu 18.04.4 LTS
 Browser version: Google Chrome 80.0.3987.116
 
 	</description>
 	<comments>
 		<comment id='1' author='firstmover' date='2020-03-03T21:04:43Z'>
 		Hi &lt;denchmark-link:https://github.com/firstmover&gt;@firstmover&lt;/denchmark-link&gt;
  ,
 This does seem to be a bug.  Thanks for reporting it!
 		</comment>
 		<comment id='2' author='firstmover' date='2020-06-16T16:11:48Z'>
 		I just wanted to comment (as can be seen in &lt;denchmark-link:https://github.com/streamlit/streamlit/issues/1502&gt;#1502&lt;/denchmark-link&gt;
 ) that this bug only happens if the floats are integer-like, i.e. it does not happen with [1.0001, 2.0001, ...] but it does happen for [1.0, 2.0,...].
 		</comment>
 	</comments>
 </bug>
<commit id='9a8d76e5facd1983c660e9240a731f4905758738' author='Jonathan R' date='2020-07-07 14:46:19-04:00'>
 	<dmm_unit complexity='1.0' interfacing='1.0' size='1.0'></dmm_unit>
 	<modification change_type='MODIFY' old_name='lib\streamlit\hashing.py' new_name='lib\streamlit\hashing.py'>
 		<file_info nloc='600' complexity='159' token_count='3393'></file_info>
 		<method name='__init__' parameters='self,hash_funcs'>
 				<method_info nloc='11' complexity='4' token_count='69' nesting_level='1' start_line='236' end_line='258'></method_info>
 			<added_lines></added_lines>
 			<deleted_lines>257,258</deleted_lines>
 		</method>
 		<method name='to_bytes' parameters='self,obj,context'>
 				<method_info nloc='21' complexity='8' token_count='153' nesting_level='1' start_line='257' end_line='296'></method_info>
 			<added_lines>259,260,262,263,267,274,281</added_lines>
 			<deleted_lines>257,258,259,262,264,268,269,270,271,278,279,280,282,288</deleted_lines>
 		</method>
 		<modified_lines>
 			<added_lines></added_lines>
 			<deleted_lines></deleted_lines>
 		</modified_lines>
 	</modification>
 	<modification change_type='MODIFY' old_name='lib\tests\streamlit\caching_test.py' new_name='lib\tests\streamlit\caching_test.py'>
 		<file_info nloc='420' complexity='64' token_count='2309'></file_info>
 		<method name='test_multiple_int_like_floats' parameters='self'>
 				<method_info nloc='5' complexity='1' token_count='41' nesting_level='1' start_line='47' end_line='53'></method_info>
 			<added_lines>47,48,49,50,51,52,53</added_lines>
 			<deleted_lines></deleted_lines>
 		</method>
 		<method name='test_multiple_int_like_floats.foo' parameters='x'>
 				<method_info nloc='2' complexity='1' token_count='7' nesting_level='2' start_line='49' end_line='50'></method_info>
 			<added_lines>49,50</added_lines>
 			<deleted_lines></deleted_lines>
 		</method>
 		<modified_lines>
 			<added_lines>54</added_lines>
 			<deleted_lines></deleted_lines>
 		</modified_lines>
 	</modification>
 	<modification change_type='MODIFY' old_name='lib\tests\streamlit\hashing_test.py' new_name='lib\tests\streamlit\hashing_test.py'>
 		<file_info nloc='731' complexity='173' token_count='5760'></file_info>
 		<method name='test_recursive_hash_func.hash_int' parameters='x'>
 				<method_info nloc='2' complexity='1' token_count='7' nesting_level='2' start_line='106' end_line='107'></method_info>
 			<added_lines>106,107</added_lines>
 			<deleted_lines></deleted_lines>
 		</method>
 		<method name='test_recursive_hash_func.foo' parameters='x'>
 				<method_info nloc='2' complexity='1' token_count='7' nesting_level='2' start_line='110' end_line='111'></method_info>
 			<added_lines>110,111</added_lines>
 			<deleted_lines></deleted_lines>
 		</method>
 		<method name='test_recursive_hash_func' parameters='self'>
 				<method_info nloc='5' complexity='1' token_count='36' nesting_level='1' start_line='105' end_line='113'></method_info>
 			<added_lines>105,106,107,108,109,110,111,112,113</added_lines>
 			<deleted_lines></deleted_lines>
 		</method>
 		<modified_lines>
 			<added_lines>114,115,116,117,118</added_lines>
 			<deleted_lines></deleted_lines>
 		</modified_lines>
 	</modification>
 </commit>
</bug_data>
