<bug_data>
<bug id='2497' author='nthmost' open_date='2020-12-21T17:53:02Z' closed_time='2020-12-22T22:16:25Z'>
 	<summary>Possible memory leak: passing int(None) to st.slider step value will crash streamlit</summary>
 	<description>
 &lt;denchmark-h:h1&gt;Summary&lt;/denchmark-h&gt;
 
 Cells in the forum writes:
 
 Can anybody else replicate this error I’m seeing?  Streamlit version 0.73.0 and 0.72.0
 
 &lt;denchmark-code&gt;input_step = st.number_input("Step")
 my_range = st.slider("Range", 20, 120, step=int(input_step))
 &lt;/denchmark-code&gt;
 
 The preceeding code results in my chrome returning an Out of Memory error code.
 &lt;denchmark-code&gt;Out of Memory
 743×280 4.83 KB
 &lt;/denchmark-code&gt;
 
 No console error is logged. However, if I change the st.number_input to provide a default value for the input_step, like so:
 &lt;denchmark-code&gt;input_step = st.number_input("Step", value=5)
 my_range = st.slider("Range", 20, 120, step=int(input_step))
 &lt;/denchmark-code&gt;
 
 This code produces the desired result. Digging into the slider.py file, it seems like st.slider should be able to handle a None value with the following code, line 192:
 &lt;denchmark-code&gt;step = DEFAULTS[data_type]["step"]
 &lt;/denchmark-code&gt;
 
 Doing a little more digging, I found that
 &lt;denchmark-code&gt;input_step = int(st.number_input("Step"))
 my_range = st.slider("Range", 20, 120, step=input_step)
 &lt;/denchmark-code&gt;
 
 will also lead to a crash but only in the st.slider line. input_step = int(st.number_input("Step")) alone isn’t enough to crash streamlit, but passing the value into a subsequent widget is. So it seems that the mistake might be mine: that I can’t pass in int(None) as a step value to the st.slider, which makes sense as it’s a type error. Perhaps catching this as a TypeError would be a good thing to add?
 Title of this post has been changed accordingly (from Possible memory leak: passing input of st.number_input without a default value to a subsequent st.slider will crash streamlit)
 (also, is there a forum tag for bugs? I couldn’t find one in the dropdown menu here)
 &lt;denchmark-h:h1&gt;Steps to reproduce&lt;/denchmark-h&gt;
 
 Code snippet:
 &lt;denchmark-code&gt;input_step = st.number_input("Step")
 my_range = st.slider("Range", 20, 120, step=int(input_step))
 &lt;/denchmark-code&gt;
 
 &lt;denchmark-h:h2&gt;Expected behavior:&lt;/denchmark-h&gt;
 
 st.slider displays as normal
 &lt;denchmark-h:h2&gt;Actual behavior:&lt;/denchmark-h&gt;
 
 Streamlit crashes!
 &lt;denchmark-h:h2&gt;Is this a regression?&lt;/denchmark-h&gt;
 
 probably not
 &lt;denchmark-h:h1&gt;Debug info&lt;/denchmark-h&gt;
 
 
 Streamlit version: 0.72 and 0.73
 Python version: (get it with $ python --version)
 Using Conda? PipEnv? PyEnv? Pex?
 OS version:
 Browser version:
 
 &lt;denchmark-h:h1&gt;Additional information&lt;/denchmark-h&gt;
 
 Original forum discussion: &lt;denchmark-link:https://discuss.streamlit.io/t/possible-memory-leak-passing-int-none-to-st-slider-step-value-will-crash-streamlit/8171&gt;https://discuss.streamlit.io/t/possible-memory-leak-passing-int-none-to-st-slider-step-value-will-crash-streamlit/8171&lt;/denchmark-link&gt;
 
 	</description>
 	<comments>
 	</comments>
 </bug>
<commit id='fa554c73dc15f972b41c11a2ba5746253ef282ba' author='bh-streamlit' date='2020-12-22 14:16:24-08:00'>
 	<dmm_unit complexity='1.0' interfacing='1.0' size='1.0'></dmm_unit>
 	<modification change_type='MODIFY' old_name='lib\streamlit\elements\slider.py' new_name='lib\streamlit\elements\slider.py'>
 		<file_info nloc='238' complexity='8' token_count='1443'></file_info>
 		<modified_lines>
 			<added_lines>221,222,223,224,225</added_lines>
 			<deleted_lines></deleted_lines>
 		</modified_lines>
 	</modification>
 	<modification change_type='MODIFY' old_name='lib\tests\streamlit\slider_test.py' new_name='lib\tests\streamlit\slider_test.py'>
 		<file_info nloc='138' complexity='8' token_count='1105'></file_info>
 		<method name='test_step_zero' parameters='self'>
 				<method_info nloc='6' complexity='1' token_count='46' nesting_level='1' start_line='180' end_line='185'></method_info>
 			<added_lines>180,181,182,183,184,185</added_lines>
 			<deleted_lines></deleted_lines>
 		</method>
 		<modified_lines>
 			<added_lines>179</added_lines>
 			<deleted_lines></deleted_lines>
 		</modified_lines>
 	</modification>
 </commit>
</bug_data>
