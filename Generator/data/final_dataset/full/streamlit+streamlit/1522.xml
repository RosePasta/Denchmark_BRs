<bug_data>
<bug id='1522' author='randyzwitch' open_date='2020-06-02T16:38:49Z' closed_time='2020-06-10T22:40:12Z'>
 	<summary>st.file_uploader returns 400 error for files above 100MB</summary>
 	<description>
 &lt;denchmark-h:h1&gt;Summary&lt;/denchmark-h&gt;
 
 When uploading a video file larger than 100MB or so, the st.file_uploader widget throws a 400 error. This is unrelated to using server.maxUploadSize.
 &lt;denchmark-h:h1&gt;Steps to reproduce&lt;/denchmark-h&gt;
 
 What are the steps we should take to reproduce the bug:
 import streamlit as st
 
 uploaded_files = st.file_uploader('Choose your video', type="MP4")
 
 if uploaded_files is not None:
     video_bytes = uploaded_files.read()
     st.video(video_bytes)
 When uploading a file of 150MB, a 400 error is thrown:
 &lt;denchmark-link:https://user-images.githubusercontent.com/2762787/83545199-e033db80-a4cc-11ea-8152-e36a6b198d02.png&gt;&lt;/denchmark-link&gt;
 
 &lt;denchmark-h:h2&gt;Expected behavior:&lt;/denchmark-h&gt;
 
 I would expect this to work up to the limit of server.maxUploadSize or other reasonable, documented max size (if browser limitations are present)
 &lt;denchmark-h:h2&gt;Actual behavior:&lt;/denchmark-h&gt;
 
 This behavior is unrelated to using server.maxUploadSize, as shown by this test matrix:
 Streamlit 0.60, no arguments passed on streamlit run file.py
 50MB: ok
 100MB: ok
 150MB: "Error: Request failed with status code 400"
 250MB: "Max allowed in 200MB"
 Streamlit 0.60,  streamlit run test.py --server.maxUploadSize=500
 250MB:  "Error: Request failed with status code 400"
 750MB: "Max allowed in 500MB"
 &lt;denchmark-h:h2&gt;Is this a regression?&lt;/denchmark-h&gt;
 
 That is, did this use to work the way you expected in the past?
 Yes
 &lt;denchmark-h:h1&gt;Debug info&lt;/denchmark-h&gt;
 
 
 Streamlit version: (get it with $ streamlit version)  0.60
 Python version: (get it with $ python --version)  3.83
 Using Conda? PipEnv? PyEnv? Pex?  conda
 OS version:  Ubuntu 18.04 LTS
 Browser version: Version 83.0.4103.61 (Official Build) (64-bit)
 
 &lt;denchmark-h:h1&gt;Additional information&lt;/denchmark-h&gt;
 
 &lt;denchmark-link:https://discuss.streamlit.io/t/network-error-when-uploading-files-larger-than-100mb/2646/&gt;https://discuss.streamlit.io/t/network-error-when-uploading-files-larger-than-100mb/2646/&lt;/denchmark-link&gt;
 
 Streamlit folks, I can provide the files I tested with, send me a Slack message
 	</description>
 	<comments>
 	</comments>
 </bug>
<commit id='e2bd126a42a595fd0297b464486fe34239d38679' author='karrie' date='2020-06-10 18:40:10-04:00'>
 	<dmm_unit complexity='0.42857142857142855' interfacing='1.0' size='0.42857142857142855'></dmm_unit>
 	<modification change_type='MODIFY' old_name='lib\streamlit\server\Server.py' new_name='lib\streamlit\server\Server.py'>
 		<file_info nloc='389' complexity='75' token_count='2194'></file_info>
 		<method name='start_listening' parameters='app'>
 				<method_info nloc='37' complexity='7' token_count='158' nesting_level='0' start_line='116' end_line='166'></method_info>
 			<added_lines>125,126,127,128,135</added_lines>
 			<deleted_lines>131</deleted_lines>
 		</method>
 		<modified_lines>
 			<added_lines></added_lines>
 			<deleted_lines></deleted_lines>
 		</modified_lines>
 	</modification>
 	<modification change_type='MODIFY' old_name='lib\tests\streamlit\Server_test.py' new_name='lib\tests\streamlit\Server_test.py'>
 		<file_info nloc='357' complexity='38' token_count='2677'></file_info>
 		<method name='get_httpserver' parameters='self'>
 				<method_info nloc='5' complexity='1' token_count='39' nesting_level='1' start_line='453' end_line='459'></method_info>
 			<added_lines>453,454,456,457,459</added_lines>
 			<deleted_lines>453,454,456,457,459</deleted_lines>
 		</method>
 		<method name='test_rotates_a_hundred_ports' parameters='self'>
 				<method_info nloc='11' complexity='1' token_count='93' nesting_level='1' start_line='461' end_line='472'></method_info>
 			<added_lines>462,463,466,467,468,469,470,471,472</added_lines>
 			<deleted_lines>462,465,466,467,468</deleted_lines>
 		</method>
 		<method name='get_app' parameters='self'>
 				<method_info nloc='5' complexity='1' token_count='39' nesting_level='1' start_line='453' end_line='459'></method_info>
 			<added_lines>453,454,456,457,459</added_lines>
 			<deleted_lines>453,454,456,457,459</deleted_lines>
 		</method>
 		<modified_lines>
 			<added_lines>480,481,483,484,486,493,497,498,499,500,502,504,505,506</added_lines>
 			<deleted_lines>476,477,479,480,482,489,493,495,497,498,499</deleted_lines>
 		</modified_lines>
 	</modification>
 </commit>
</bug_data>
