<bug_data>
<bug id='1397' author='arnaudmiribel' open_date='2020-04-29T12:24:20Z' closed_time='2020-05-20T18:29:41Z'>
 	<summary>Multiselect check for defaults goes wrong if not a list</summary>
 	<description>
 &lt;denchmark-h:h1&gt;Summary&lt;/denchmark-h&gt;
 
 When using st.multiselect(), there's an error being thrown out if default values are given in a tuple instead of a list. See additional info for a solution. I'm happy to do a PR if you're ok with my point.
 &lt;denchmark-h:h1&gt;Steps to reproduce&lt;/denchmark-h&gt;
 
 
 Create an app.py with the following:
 
 import streamlit as st
 INTENSITIES = ("a", "b", "c")
 st.multiselect(
     label="Choose among:",
     options=INTENSITIES,
     default=INTENSITIES,
 )
 
 Now run streamlit run app.py.
 
 &lt;denchmark-h:h2&gt;Expected behavior:&lt;/denchmark-h&gt;
 
 The code above should work and print the following:
 &lt;denchmark-link:https://user-images.githubusercontent.com/7164864/80595482-1b05a800-8a25-11ea-8764-20934e347c37.png&gt;&lt;/denchmark-link&gt;
 
 It does work if given list objects as in:
 st.multiselect(
     label="Choose among:",
     options=list(INTENSITIES),
     default=list(INTENSITIES),
 )
 &lt;denchmark-h:h2&gt;Actual behavior:&lt;/denchmark-h&gt;
 
 Error shows:
 StreamlitAPIException: Every Multiselect default value must exist in options
 &lt;denchmark-h:h2&gt;Is this a regression?&lt;/denchmark-h&gt;
 
 Not sure about this. Didn't try before.
 &lt;denchmark-h:h1&gt;Debug info&lt;/denchmark-h&gt;
 
 
 Streamlit version: 0.58.0
 Python version: Python 3.6.9 :: Anaconda, Inc.
 Using Conda
 OS version: macOS Mojave 10.14.6
 Browser version: Google Chrome 81.0.4044.92
 
 &lt;denchmark-h:h1&gt;Additional info&lt;/denchmark-h&gt;
 
 Code responsible seems to &lt;denchmark-link:https://github.com/streamlit/streamlit/blob/e1431cf04523a1e8f2a32eff1e223dae20219087/lib/streamlit/DeltaGenerator.py#L1685&gt;be here&lt;/denchmark-link&gt;
  when casting to list:
 &lt;denchmark-code&gt;if not isinstance(default_values, list):
                 default_values = [default_values]
 &lt;/denchmark-code&gt;
 
 Should rather be:
 &lt;denchmark-code&gt;if not isinstance(default_values, list):
                 default_values = list(default_values)
 &lt;/denchmark-code&gt;
 
 Otherwise, in the tuple case, ("a", "b", "c") is converted to [("a", "b", "c")] hence the error.
 	</description>
 	<comments>
 		<comment id='1' author='arnaudmiribel' date='2020-04-29T17:29:54Z'>
 		Hi &lt;denchmark-link:https://github.com/arnaudmiribel&gt;@arnaudmiribel&lt;/denchmark-link&gt;
 , thanks for reporting this! It looks like this is a simple oversight/bug, so please create a PR and we'll be happy to review it.
 		</comment>
 		<comment id='2' author='arnaudmiribel' date='2020-04-30T08:07:45Z'>
 		Thanks &lt;denchmark-link:https://github.com/randyzwitch&gt;@randyzwitch&lt;/denchmark-link&gt;
 , PR is submitted here: &lt;denchmark-link:https://github.com/streamlit/streamlit/pull/1401&gt;#1401&lt;/denchmark-link&gt;
 
 		</comment>
 	</comments>
 </bug>
<commit id='78511762d15d4d032c0535c4cf406a53bb060072' author='Arnaud' date='2020-05-07 00:52:26-07:00'>
 	<dmm_unit complexity='0.46153846153846156' interfacing='0.5384615384615384' size='0.0'></dmm_unit>
 	<modification change_type='MODIFY' old_name='lib\streamlit\DeltaGenerator.py' new_name='lib\streamlit\DeltaGenerator.py'>
 		<file_info nloc='1072' complexity='158' token_count='5879'></file_info>
 		<method name='_check_and_convert_to_indices' parameters='options,default_values'>
 				<method_info nloc='18' complexity='10' token_count='95' nesting_level='2' start_line='1719' end_line='1742'></method_info>
 			<added_lines>1724,1725,1726,1727,1728,1729,1730,1731,1732,1733,1734</added_lines>
 			<deleted_lines>1723</deleted_lines>
 		</method>
 		<modified_lines>
 			<added_lines>45</added_lines>
 			<deleted_lines></deleted_lines>
 		</modified_lines>
 	</modification>
 	<modification change_type='MODIFY' old_name='lib\tests\streamlit\multiselect_test.py' new_name='lib\tests\streamlit\multiselect_test.py'>
 		<file_info nloc='89' complexity='9' token_count='959'></file_info>
 		<method name='test_default_types' parameters='self,defaults,expected'>
 				<method_info nloc='6' complexity='1' token_count='76' nesting_level='1' start_line='118' end_line='125'></method_info>
 			<added_lines>118,119,120,121,122,123,124,125</added_lines>
 			<deleted_lines></deleted_lines>
 		</method>
 		<modified_lines>
 			<added_lines>110,111,112,113,114,115,116,117,126</added_lines>
 			<deleted_lines></deleted_lines>
 		</modified_lines>
 	</modification>
 </commit>
</bug_data>
