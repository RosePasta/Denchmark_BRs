<bug_data>
<bug id='485' author='kellyamanda' open_date='2019-10-21T17:59:13Z' closed_time='2019-11-26T20:09:13Z'>
 	<summary>Passing a date in index to st.line_chart defaults to UTC time zone</summary>
 	<description>
 &lt;denchmark-h:h1&gt;Summary&lt;/denchmark-h&gt;
 
 This may not be a Streamlit bug - it may be a Python issue where I need to declare a datetime. When I pass a date through as the index to st.line_chart my graph is then shifted 7 hours back in time from my intended time (e.g. I would want to show value 50 on the graph for midnight on 2019-08-10 and it shows as 5pm for 2019-08-09). I think what is happening is somehow it's doing a UTC offset by default. Would like to
 &lt;denchmark-h:h1&gt;Steps to reproduce&lt;/denchmark-h&gt;
 
 df = pd.DataFrame({
 'index': [date(2019, 8, 9), date(2019, 8, 10), date(2019, 8, 11), date(2019, 8, 12)],
 'numbers': [10, 50, 30, 40]
 })
 df
 st.line_chart(df.set_index('index'))
 &lt;denchmark-h:h2&gt;Expected behavior:&lt;/denchmark-h&gt;
 
 I would expect it to plot in the date that I passed through but it's converting it for some reason. Also happens when I use pd.to_datetime() on a dataset.
 &lt;denchmark-h:h2&gt;Actual behavior:&lt;/denchmark-h&gt;
 
 Shifts it back in time by 7 hours.
 &lt;denchmark-h:h2&gt;Is this a regression?&lt;/denchmark-h&gt;
 
 No
 &lt;denchmark-h:h1&gt;Debug info&lt;/denchmark-h&gt;
 
 Streamlit, version 0.47.4
 Python 3.7.2
 	</description>
 	<comments>
 		<comment id='1' author='kellyamanda' date='2019-10-30T00:56:10Z'>
 		By default, Vegalite outputs time data in local time: &lt;denchmark-link:https://vega.github.io/vega-lite/docs/timeunit.html#output&gt;https://vega.github.io/vega-lite/docs/timeunit.html#output&lt;/denchmark-link&gt;
 
 We can fix this by setting scale: {type: "utc"} in the chart spec:
 chart = (
     getattr(alt.Chart(data), "mark_" + chart_type)()
     .encode(
         alt.X("index", title="", scale=alt.Scale(type="utc")),  # &lt;-- set "scale" to "utc"
         alt.Y("value", title=""),
         alt.Color("variable", title="", type="nominal"),
         alt.Tooltip(["index", "value", "variable"]),
         opacity=opacity,
     )
     .interactive()
 )
 (We'd only want to do this for temporal data, obviously.) But I'm not familiar with altair/vega-lite, so I'm not sure if this is the right solution.
 		</comment>
 		<comment id='2' author='kellyamanda' date='2019-10-30T16:16:42Z'>
 		Maybe st.line_chart and friends take a new datetime_display param that defaults to "local" but can be set to "utc"?
 		</comment>
 	</comments>
 </bug>
<commit id='c2ac2f873e7b7a4eefad2d0dea24d29d551e18bc' author='Tim Conkling' date='2019-11-26 12:09:12-08:00'>
 	<dmm_unit complexity='0.3409090909090909' interfacing='1.0' size='0.8863636363636364'></dmm_unit>
 	<modification change_type='ADD' old_name='None' new_name='e2e\scripts\chart_utc_time.py'>
 		<file_info nloc='18' complexity='0' token_count='102'></file_info>
 	</modification>
 	<modification change_type='ADD' old_name='None' new_name='e2e\specs\chart_utc_time.ts'>
 		<file_info nloc='14' complexity='4' token_count='105'></file_info>
 	</modification>
 	<modification change_type='ADD' old_name='frontend\cypress\snapshots\linux\2x\chart_utc_time.ts\chartUTCTime-0.snap.png' new_name='frontend\cypress\snapshots\linux\2x\chart_utc_time.ts\chartUTCTime-0.snap.png'>
 		<file_info nloc='None' complexity='None' token_count='None'></file_info>
 	</modification>
 	<modification change_type='ADD' old_name='frontend\cypress\snapshots\linux\2x\chart_utc_time.ts\chartUTCTime-1.snap.png' new_name='frontend\cypress\snapshots\linux\2x\chart_utc_time.ts\chartUTCTime-1.snap.png'>
 		<file_info nloc='None' complexity='None' token_count='None'></file_info>
 	</modification>
 	<modification change_type='ADD' old_name='frontend\cypress\snapshots\linux\2x\chart_utc_time.ts\chartUTCTime-2.snap.png' new_name='frontend\cypress\snapshots\linux\2x\chart_utc_time.ts\chartUTCTime-2.snap.png'>
 		<file_info nloc='None' complexity='None' token_count='None'></file_info>
 	</modification>
 	<modification change_type='MODIFY' old_name='lib\streamlit\elements\altair.py' new_name='lib\streamlit\elements\altair.py'>
 		<file_info nloc='52' complexity='11' token_count='397'></file_info>
 		<method name='_is_date_column' parameters='df,name'>
 				<method_info nloc='5' complexity='2' token_count='33' nesting_level='0' start_line='29' end_line='49'></method_info>
 			<added_lines>29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49</added_lines>
 			<deleted_lines>37,38,41,42</deleted_lines>
 		</method>
 		<method name='generate_chart' parameters='chart_type,data'>
 				<method_info nloc='29' complexity='7' token_count='230' nesting_level='0' start_line='52' end_line='93'></method_info>
 			<added_lines>63,64,72,73,74,75,76,77,78,79,80,81,85,86</added_lines>
 			<deleted_lines>53,54</deleted_lines>
 		</method>
 		<modified_lines>
 			<added_lines>21,50,51</added_lines>
 			<deleted_lines></deleted_lines>
 		</modified_lines>
 	</modification>
 	<modification change_type='MODIFY' old_name='lib\tests\streamlit\altair_test.py' new_name='lib\tests\streamlit\altair_test.py'>
 		<file_info nloc='48' complexity='4' token_count='420'></file_info>
 		<method name='_deep_get' parameters='dictionary,keys'>
 				<method_info nloc='6' complexity='2' token_count='39' nesting_level='0' start_line='29' end_line='34'></method_info>
 			<added_lines>29,30,31,32,33,34</added_lines>
 			<deleted_lines></deleted_lines>
 		</method>
 		<method name='test_date_column_utc_scale' parameters='self'>
 				<method_info nloc='12' complexity='1' token_count='130' nesting_level='1' start_line='65' end_line='83'></method_info>
 			<added_lines>65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83</added_lines>
 			<deleted_lines></deleted_lines>
 		</method>
 		<method name='test_altair_chart' parameters='self'>
 				<method_info nloc='19' complexity='1' token_count='206' nesting_level='1' start_line='40' end_line='63'></method_info>
 			<added_lines>42,43,44,45</added_lines>
 			<deleted_lines></deleted_lines>
 		</method>
 		<modified_lines>
 			<added_lines>17,18,24,64</added_lines>
 			<deleted_lines>26,27,28</deleted_lines>
 		</modified_lines>
 	</modification>
 </commit>
</bug_data>
