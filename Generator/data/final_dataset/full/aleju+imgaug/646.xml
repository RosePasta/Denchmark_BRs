<bug_data>
<bug id='646' author='WillNichols726' open_date='2020-03-26T14:50:12Z' closed_time='2020-04-13T15:09:11Z'>
 	<summary>Array broadcast error in Change Color Temperatures</summary>
 	<description>
 Getting the following broadcast error when trying to use the Change color temperature augmenter
 Calling code:
 &lt;denchmark-code&gt;self.augmenter = iaa.SomeOf((0,2), [
                 iaa.AdditiveGaussianNoise(scale=0.3*255, per_channel=True),
                 iaa.Cutout(nb_iterations=(1,8), size=0.1, fill_mode='gaussian', fill_per_channel=True),
                 iaa.GaussianBlur(sigma=(0, 0.2)),
                 iaa.MultiplyAndAddToBrightness(mul=(0.5, 1.5), add=(-30, 30)),
                 iaa.ChangeColorTemperature((1100, 10000)),
                 iaa.GammaContrast((0.5, 2.0)),
                 iaa.Clouds()
             ],
             random_order=True            
             )
 
 #images is a numpy array (N, 96, 96, 3)
 images = self.augmenter.augment_images(images=images)
 &lt;/denchmark-code&gt;
 
 Exception Stack:
 &lt;denchmark-code&gt;File "C:\Users\Will.Nichols\AppData\Local\Continuum\miniconda3\lib\site-packages\imgaug\augmenters\meta.py", line 825, in augment_images
     hooks=hooks
   File "C:\Users\Will.Nichols\AppData\Local\Continuum\miniconda3\lib\site-packages\imgaug\augmenters\meta.py", line 645, in augment_batch_
     hooks=hooks)
   File "C:\Users\Will.Nichols\AppData\Local\Continuum\miniconda3\lib\site-packages\imgaug\augmenters\meta.py", line 3406, in _augment_batch_
     hooks=hooks
   File "C:\Users\Will.Nichols\AppData\Local\Continuum\miniconda3\lib\site-packages\imgaug\augmenters\meta.py", line 645, in augment_batch_
     hooks=hooks)
   File "C:\Users\Will.Nichols\AppData\Local\Continuum\miniconda3\lib\site-packages\imgaug\augmenters\color.py", line 3093, in _augment_batch_
     batch.images, kelvins, from_colorspaces=self.from_colorspace)
   File "C:\Users\Will.Nichols\AppData\Local\Continuum\miniconda3\lib\site-packages\imgaug\augmenters\color.py", line 926, in change_color_temperatures_
     rgb_multipliers = table.transform_kelvins_to_rgb_multipliers(kelvins)
   File "C:\Users\Will.Nichols\AppData\Local\Continuum\miniconda3\lib\site-packages\imgaug\augmenters\color.py", line 451, in transform_kelvins_to_rgb_multipliers
     * (multipliers_ceiled - multipliers_floored)
 ValueError: operands could not be broadcast together with shapes (4,) (4,3)
 &lt;/denchmark-code&gt;
 
 	</description>
 	<comments>
 		<comment id='1' author='WillNichols726' date='2020-03-26T17:13:45Z'>
 		Was able to patch my code by making the following code change. Was unable to create pull request.
 current:
 imgaug/augmenters/color.py: Line 450
             + interpolation_factors
 patched:
 imgaug/augmenters/color.py: Line 450
             + interpolation_factors[:,None]
 		</comment>
 		<comment id='2' author='WillNichols726' date='2020-04-13T15:09:11Z'>
 		Thanks for reporting this issue. The tests all ran with 1 or 3 images (leading to broadcastable arrays in the mentioned line) and thus did not catch this error. It is now fixed in master.
 		</comment>
 		<comment id='3' author='WillNichols726' date='2020-12-14T13:47:39Z'>
 		Hello, it seems that this fix hasn't been released to PyPi yet. Are there any plans for new release please?
 		</comment>
 	</comments>
 </bug>
<commit id='cf05cd46907945b7b6545040fca197766557626f' author='Alexander Jung' date='2020-04-13 17:05:41+02:00'>
 	<dmm_unit complexity='1.0' interfacing='1.0' size='0.4838709677419355'></dmm_unit>
 	<modification change_type='ADD' old_name='None' new_name='changelogs\master\fixed\20200412_fix_change_color_temperature.md'>
 		<file_info nloc='None' complexity='None' token_count='None'></file_info>
 	</modification>
 	<modification change_type='MODIFY' old_name='imgaug\augmenters\color.py' new_name='imgaug\augmenters\color.py'>
 		<file_info nloc='3172' complexity='152' token_count='11956'></file_info>
 		<method name='transform_kelvins_to_rgb_multipliers' parameters='self,kelvins'>
 				<method_info nloc='16' complexity='1' token_count='112' nesting_level='1' start_line='416' end_line='454'></method_info>
 			<added_lines>450</added_lines>
 			<deleted_lines>450</deleted_lines>
 		</method>
 		<modified_lines>
 			<added_lines></added_lines>
 			<deleted_lines></deleted_lines>
 		</modified_lines>
 	</modification>
 	<modification change_type='MODIFY' old_name='test\augmenters\test_color.py' new_name='test\augmenters\test_color.py'>
 		<file_info nloc='2241' complexity='304' token_count='21395'></file_info>
 		<method name='test_several_images_as_list' parameters='self'>
 				<method_info nloc='15' complexity='1' token_count='167' nesting_level='1' start_line='259' end_line='275'></method_info>
 			<added_lines>259,260,261,263</added_lines>
 			<deleted_lines>259,261</deleted_lines>
 		</method>
 		<method name='test_several_images_as_array' parameters='self'>
 				<method_info nloc='13' complexity='1' token_count='141' nesting_level='1' start_line='277' end_line='291'></method_info>
 			<added_lines>279,280,281,282,283,284,285,286,287,288,289,290,291</added_lines>
 			<deleted_lines>277</deleted_lines>
 		</method>
 		<method name='test_three_images_as_array' parameters='self'>
 				<method_info nloc='13' complexity='1' token_count='141' nesting_level='1' start_line='300' end_line='316'></method_info>
 			<added_lines>300,301,302</added_lines>
 			<deleted_lines></deleted_lines>
 		</method>
 		<method name='test_three_images_as_list' parameters='self'>
 				<method_info nloc='15' complexity='1' token_count='167' nesting_level='1' start_line='259' end_line='277'></method_info>
 			<added_lines>259,260,261,263</added_lines>
 			<deleted_lines>259,261,277</deleted_lines>
 		</method>
 		<method name='test_four_images_as_array' parameters='self'>
 				<method_info nloc='15' complexity='1' token_count='158' nesting_level='1' start_line='318' end_line='336'></method_info>
 			<added_lines>318,319,320,321,322,323,324,325,326,327,328,329,330,331,332,333,334,335,336</added_lines>
 			<deleted_lines></deleted_lines>
 		</method>
 		<method name='test_four_images_as_list' parameters='self'>
 				<method_info nloc='16' complexity='1' token_count='184' nesting_level='1' start_line='279' end_line='298'></method_info>
 			<added_lines>279,280,281,282,283,284,285,286,287,288,289,290,291,292,293,294,295,296,297,298</added_lines>
 			<deleted_lines></deleted_lines>
 		</method>
 		<modified_lines>
 			<added_lines>299,337</added_lines>
 			<deleted_lines></deleted_lines>
 		</modified_lines>
 	</modification>
 	<modification change_type='MODIFY' old_name='test\augmenters\test_mixed_files.py' new_name='test\augmenters\test_mixed_files.py'>
 		<file_info nloc='405' complexity='28' token_count='5414'></file_info>
 		<method name='test_determinism' parameters=''>
 				<method_info nloc='91' complexity='3' token_count='1205' nesting_level='0' start_line='27' end_line='131'></method_info>
 			<added_lines>33</added_lines>
 			<deleted_lines>33</deleted_lines>
 		</method>
 		<modified_lines>
 			<added_lines></added_lines>
 			<deleted_lines></deleted_lines>
 		</modified_lines>
 	</modification>
 	<modification change_type='MODIFY' old_name='test\test_multicore.py' new_name='test\test_multicore.py'>
 		<file_info nloc='687' complexity='107' token_count='5637'></file_info>
 		<modified_lines>
 			<added_lines>357,369,388,389,390</added_lines>
 			<deleted_lines>357,369,388,389,390</deleted_lines>
 		</modified_lines>
 	</modification>
 </commit>
</bug_data>
