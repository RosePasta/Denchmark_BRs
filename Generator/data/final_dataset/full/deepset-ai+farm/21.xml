<bug_data>
<bug id='21' author='tholor' open_date='2019-07-30T14:48:48Z' closed_time='2019-07-31T08:32:31Z'>
 	<summary>Wrong vocab ids for custom vocab</summary>
 	<description>
 The user can enrich the vocabulary of an already pretrained language model by supplying a custom vocab. However, if this custom vocab contains tokens that are already present in the original vocab, the indices got messed up in an edge case because the duplicate check is on the "unstripped" token rather than the "stripped" one. This caused some trouble later down my pipeline. I will add a fix soon.
 
 
 
 FARM/farm/modeling/tokenization.py
 
 
          Line 133
       in
       c8a8556
 
 
 
 
 
 
  if token not in self.vocab.keys(): 
 
 
 
 
 
 	</description>
 	<comments>
 	</comments>
 </bug>
<commit id='23ed9a06315690a40d5e6efb6287c40480cf7b3a' author='Malte Pietsch' date='2019-07-31 10:32:30+02:00'>
 	<dmm_unit complexity='None' interfacing='None' size='None'></dmm_unit>
 	<modification change_type='MODIFY' old_name='farm\modeling\tokenization.py' new_name='farm\modeling\tokenization.py'>
 		<file_info nloc='142' complexity='38' token_count='1055'></file_info>
 		<method name='_load_custom_vocab' parameters='self,custom_vocab_file'>
 				<method_info nloc='33' complexity='8' token_count='232' nesting_level='1' start_line='122' end_line='157'></method_info>
 			<added_lines>128,135</added_lines>
 			<deleted_lines>128,135</deleted_lines>
 		</method>
 		<modified_lines>
 			<added_lines></added_lines>
 			<deleted_lines></deleted_lines>
 		</modified_lines>
 	</modification>
 </commit>
</bug_data>
