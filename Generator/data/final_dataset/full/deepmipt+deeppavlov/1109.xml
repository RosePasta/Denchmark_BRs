<bug_data>
<bug id='1109' author='acriptis' open_date='2019-12-23T10:49:40Z' closed_time='2020-06-30T12:33:16Z'>
 	<summary>method download_decompress downloads non-existing files</summary>
 	<description>
 I've used method download_decompress to load the file from remote storage. It seems that if I provide &lt;denchmark-link:http://files.deeppavlov.ai/spelling_crrectors/elmo_weights_ckpt3.tar.gz&gt;broken URL&lt;/denchmark-link&gt;
  the method downloads content without check of file validity and tries to unpack it (although it is not archieve) and silently continues on fail.
 I think expected behavior is to raise exception for missed file on broken URL and wrong archive formats.
 	</description>
 	<comments>
 		<comment id='1' author='acriptis' date='2019-12-23T10:51:51Z'>
 		We need to check a status code in simple_download(). It's weird that we do not do that already.
 		</comment>
 	</comments>
 </bug>
<commit id='99a80409849bdf83f0c4dfcd0ddf7453e02d436e' author='Aleksei Lymar' date='2020-06-30 11:43:35+03:00'>
 	<dmm_unit complexity='0.5151515151515151' interfacing='1.0' size='0.0'></dmm_unit>
 	<modification change_type='MODIFY' old_name='deeppavlov\core\data\utils.py' new_name='deeppavlov\core\data\utils.py'>
 		<file_info nloc='566' complexity='90' token_count='2788'></file_info>
 		<method name='simple_download' parameters='str,Path'>
 				<method_info nloc='48' complexity='13' token_count='340' nesting_level='0' start_line='81' end_line='138'></method_info>
 			<added_lines>84,93,94,95,96,97,98,99,100,105,106</added_lines>
 			<deleted_lines>81</deleted_lines>
 		</method>
 		<method name='s3_download' parameters='str,str'>
 				<method_info nloc='17' complexity='1' token_count='98' nesting_level='0' start_line='60' end_line='78'></method_info>
 			<added_lines>60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78</added_lines>
 			<deleted_lines>63,70,71</deleted_lines>
 		</method>
 		<modified_lines>
 			<added_lines>79,80</added_lines>
 			<deleted_lines>80</deleted_lines>
 		</modified_lines>
 	</modification>
 	<modification change_type='MODIFY' old_name='deeppavlov\download.py' new_name='deeppavlov\download.py'>
 		<file_info nloc='121' complexity='41' token_count='972'></file_info>
 		<method name='check_md5' parameters='str'>
 				<method_info nloc='41' complexity='13' token_count='286' nesting_level='0' start_line='78' end_line='124'></method_info>
 			<added_lines>80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,97,99</added_lines>
 			<deleted_lines>80,81,84</deleted_lines>
 		</method>
 		<method name='deep_download' parameters='str,Path'>
 				<method_info nloc='6' complexity='4' token_count='71' nesting_level='0' start_line='156' end_line='162'></method_info>
 			<added_lines>160</added_lines>
 			<deleted_lines></deleted_lines>
 		</method>
 		<modified_lines>
 			<added_lines></added_lines>
 			<deleted_lines>145</deleted_lines>
 		</modified_lines>
 	</modification>
 	<modification change_type='MODIFY' old_name='setup.py' new_name='setup.py'>
 		<file_info nloc='58' complexity='6' token_count='340'></file_info>
 		<modified_lines>
 			<added_lines>67,68,74,75,76,77,78</added_lines>
 			<deleted_lines>67,73</deleted_lines>
 		</modified_lines>
 	</modification>
 </commit>
</bug_data>
