<bug_data>
<bug id='638' author='jchen42703' open_date='2020-02-06T04:54:27Z' closed_time='2020-02-29T21:40:56Z'>
 	<summary>AttributeError: 'numpy.ndarray' object has no attribute 'items' when using `MulticlassDiceMetricCallback`</summary>
 	<description>
 Describe the bug
 In the on_loader_end method for MulticlassDiceMetricCallback, batch_metrics is a numpy array instead of a dict. This is because batch_metrics = calculate_dice(...) and calculate_dice returns a np.ndarray of the dice coefficients for each class instead of a dict.
 To Reproduce
 Steps to reproduce the behavior:
 
 Train a segmentation pipeline with MulticlassDiceMetricCallback.
 Haven't explored edge cases where this bug may not be an issue.
 
 Expected behavior
 Should work properly and return the multi-class dice scores for each class.
 Screenshots
 If applicable, add screenshots to help explain your problem.
 Additional context
 Add any other context about the problem here.
 I'll look towards creating a PR for this bug soon.
 	</description>
 	<comments>
 	</comments>
 </bug>
<commit id='38a503c8af040906e377b7485d7fe15a7bc1de19' author='Joseph Chen' date='2020-02-28 08:25:57+03:00'>
 	<dmm_unit complexity='0.0' interfacing='1.0' size='0.0'></dmm_unit>
 	<modification change_type='MODIFY' old_name='catalyst\dl\callbacks\__init__.py' new_name='catalyst\dl\callbacks\__init__.py'>
 		<file_info nloc='16' complexity='0' token_count='78'></file_info>
 		<modified_lines>
 			<added_lines>13,14</added_lines>
 			<deleted_lines>13</deleted_lines>
 		</modified_lines>
 	</modification>
 	<modification change_type='MODIFY' old_name='catalyst\dl\callbacks\metrics\dice.py' new_name='catalyst\dl\callbacks\metrics\dice.py'>
 		<file_info nloc='75' complexity='12' token_count='421'></file_info>
 		<method name='__init__' parameters='self,str,str,str,class_names'>
 				<method_info nloc='6' complexity='1' token_count='26' nesting_level='1' start_line='47' end_line='52'></method_info>
 			<added_lines>51</added_lines>
 			<deleted_lines>49,50</deleted_lines>
 		</method>
 		<method name='on_batch_end' parameters='self,State'>
 				<method_info nloc='10' complexity='2' token_count='59' nesting_level='1' start_line='80' end_line='94'></method_info>
 			<added_lines>81,82,83</added_lines>
 			<deleted_lines>80,82,83,86,87,88,90,91,92</deleted_lines>
 		</method>
 		<method name='__init__' parameters='self,str,str,str,class_names,class_prefix,metric_params'>
 				<method_info nloc='8' complexity='1' token_count='32' nesting_level='1' start_line='43' end_line='50'></method_info>
 			<added_lines>43,44,45,46</added_lines>
 			<deleted_lines>45,49,50</deleted_lines>
 		</method>
 		<method name='on_loader_end' parameters='self,State'>
 				<method_info nloc='16' complexity='7' token_count='148' nesting_level='1' start_line='96' end_line='118'></method_info>
 			<added_lines>99,100,102,103,104,105,107,108,109,111,113,114,115,116</added_lines>
 			<deleted_lines></deleted_lines>
 		</method>
 		<method name='_reset_stats' parameters='self'>
 				<method_info nloc='2' complexity='1' token_count='11' nesting_level='1' start_line='74' end_line='78'></method_info>
 			<added_lines>75,76,77</added_lines>
 			<deleted_lines></deleted_lines>
 		</method>
 		<modified_lines>
 			<added_lines>41,42,54,55,56,57,58,59,60,61,62,63,64,65,66,70,72</added_lines>
 			<deleted_lines>1,2,53,56,58,59</deleted_lines>
 		</modified_lines>
 	</modification>
 </commit>
</bug_data>
