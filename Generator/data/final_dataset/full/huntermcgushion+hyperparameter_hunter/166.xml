<bug_data>
<bug id='166' author='HunterMcGushion' open_date='2019-07-26T23:04:15Z' closed_time='2019-07-27T05:09:55Z'>
 	<summary>Dataset hashes change between Pandas versions</summary>
 	<description>
 &lt;denchmark-h:h1&gt;Problem&lt;/denchmark-h&gt;
 
 
 Updating Pandas from 0.24.2 to 0.25.0 produces different Environment.cross_experiment_key values
 
 Of all parameters included in the cross_experiment_key, only the (hashed) values of the
 datasets actually changed
 
 
 This can be seen in the broken TravisCI build #738
 
 Note: This was made for PR #165, fixing an unrelated bug concerning Categorical.optional Feature Engineering steps
 
 
 Specifically, the following tests in tests.test_environment are failing:
 
 test_environment_init_cv_params (both scenarios)
 test_environment_init_metrics (both scenarios)
 test_environment_init_cross_experiment_params (both scenarios)
 
 
 All six of the failing tests are checking for expected Environment.cross_experiment_key
 
 &lt;denchmark-h:h1&gt;Battle-Plan&lt;/denchmark-h&gt;
 
 
 Need dataset hashes to be consistent across different Pandas versions
 Add new clause to :func:hyperparameter_hunter.keys.hashing.to_hashable to handle DataFrames
 
 Because to_hashable is used by make_hash_sha256, this change will apply not only to key hashes, but also to the WIP hashes generated by :mod:feature_engineering to track changes made by different EngineerSteps
 
 
 
 &lt;denchmark-h:h1&gt;Options for New DataFrame Clause&lt;/denchmark-h&gt;
 
 return hashlib.sha256(
     pd.util.hash_pandas_object(obj, index=True).values
 ).hexdigest()
 or something like
 return obj.to_csv().encode("utf-8")
 Both produce consistent values for datasets for Pandas 0.24.2 and 0.25.0. However, the first feels safer, whereas the second is easier to understand and follows some representation of the object, rather than an actual hash, which is the intended purpose of to_hashable
 	</description>
 	<comments>
 	</comments>
 </bug>
<commit id='fe581c64027c50fd94610aeec4194db786c70aa4' author='Hunter McGushion' date='2019-07-26 22:09:52-07:00'>
 	<dmm_unit complexity='0.0' interfacing='0.0' size='1.0'></dmm_unit>
 	<modification change_type='MODIFY' old_name='hyperparameter_hunter\feature_engineering.py' new_name='hyperparameter_hunter\feature_engineering.py'>
 		<file_info nloc='702' complexity='118' token_count='2562'></file_info>
 		<method name='_hash_dataset' parameters='DataFrame'>
 				<method_info nloc='36' complexity='5' token_count='90' nesting_level='0' start_line='1191' end_line='1226'></method_info>
 			<added_lines>1208,1209,1210,1211,1212,1213,1214,1215,1216,1217</added_lines>
 			<deleted_lines>1208,1209,1210,1211,1212,1213,1214,1215,1216,1217,1218,1219,1220,1221,1222,1223,1224,1225</deleted_lines>
 		</method>
 		<modified_lines>
 			<added_lines></added_lines>
 			<deleted_lines></deleted_lines>
 		</modified_lines>
 	</modification>
 	<modification change_type='MODIFY' old_name='hyperparameter_hunter\keys\hashing.py' new_name='hyperparameter_hunter\keys\hashing.py'>
 		<file_info nloc='51' complexity='12' token_count='420'></file_info>
 		<method name='to_hashable' parameters='obj,kwargs'>
 				<method_info nloc='12' complexity='9' token_count='155' nesting_level='0' start_line='30' end_line='56'></method_info>
 			<added_lines>52,53,54</added_lines>
 			<deleted_lines></deleted_lines>
 		</method>
 		<modified_lines>
 			<added_lines>8</added_lines>
 			<deleted_lines></deleted_lines>
 		</modified_lines>
 	</modification>
 	<modification change_type='MODIFY' old_name='scripts\test_nonsmoking.sh' new_name='scripts\test_nonsmoking.sh'>
 		<file_info nloc='None' complexity='None' token_count='None'></file_info>
 		<modified_lines>
 			<added_lines>28,29</added_lines>
 			<deleted_lines>28</deleted_lines>
 		</modified_lines>
 	</modification>
 	<modification change_type='MODIFY' old_name='tests\test_environment.py' new_name='tests\test_environment.py'>
 		<file_info nloc='177' complexity='23' token_count='1358'></file_info>
 		<modified_lines>
 			<added_lines>86,87,88,89,90,91,95,96,97,98,99,100</added_lines>
 			<deleted_lines>86,87,88,89,90,91,95,96,97,98,99,100</deleted_lines>
 		</modified_lines>
 	</modification>
 	<modification change_type='MODIFY' old_name='tests\test_keys.py' new_name='tests\test_keys.py'>
 		<file_info nloc='163' complexity='18' token_count='1275'></file_info>
 		<modified_lines>
 			<added_lines>108,111,115,116,117,118,119,120,121,122,123</added_lines>
 			<deleted_lines>108,111,115</deleted_lines>
 		</modified_lines>
 	</modification>
 </commit>
</bug_data>
