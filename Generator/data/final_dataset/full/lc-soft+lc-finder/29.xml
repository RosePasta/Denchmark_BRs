<bug_data>
<bug id='29' author='lc-soft' open_date='2016-10-21T13:22:51Z' closed_time='2016-10-22T15:57:24Z'>
 	<summary>需改为存储宽字符版本的翻译文本</summary>
 	<description>
 经测试，sprintf() 函数在处理包含中文的 UTF-8 编码字符串时会直接抛异常，为解决这个问题，需改为存储宽字符版本的翻译文本。
 void testsprintf( void )
 {
     char buf[256], *str;
     wchar_t *wstr = L"总共有 %d 个文件";
     str = EncodeUTF8( wstr );
     sprintf( buf, str, 128 ); // 异常终止
     printf( "%s\n", buf );
 }
 	</description>
 	<comments>
 	</comments>
 </bug>
<commit id='bad68a5a0ee4befa2224a961fa87bf9bfa948114' author='Liu Chao' date='2016-10-22 23:56:33+08:00'>
 	<dmm_unit complexity='0.26666666666666666' interfacing='0.7333333333333333' size='1.0'></dmm_unit>
 	<modification change_type='MODIFY' old_name='include\i18n.h' new_name='include\i18n.h'>
 		<file_info nloc='12' complexity='0' token_count='80'></file_info>
 		<modified_lines>
 			<added_lines>50</added_lines>
 			<deleted_lines>50</deleted_lines>
 		</modified_lines>
 	</modification>
 	<modification change_type='MODIFY' old_name='include\textview_i18n.h' new_name='include\textview_i18n.h'>
 		<file_info nloc='7' complexity='0' token_count='64'></file_info>
 		<modified_lines>
 			<added_lines>43</added_lines>
 			<deleted_lines>43</deleted_lines>
 		</modified_lines>
 	</modification>
 	<modification change_type='MODIFY' old_name='src\lib\i18n.c' new_name='src\lib\i18n.c'>
 		<file_info nloc='256' complexity='48' token_count='1401'></file_info>
 		<method name='I18n_AddLanguage' parameters='path,dict'>
 				<method_info nloc='40' complexity='8' token_count='291' nesting_level='0' start_line='106' end_line='145'></method_info>
 			<added_lines>120,121</added_lines>
 			<deleted_lines>110,111,112,113,114,115</deleted_lines>
 		</method>
 		<method name='yaml_token_getwcs' parameters='token'>
 				<method_info nloc='8' complexity='1' token_count='61' nesting_level='0' start_line='85' end_line='92'></method_info>
 			<added_lines>85,86,87,88,89,90,91,92</added_lines>
 			<deleted_lines></deleted_lines>
 		</method>
 		<method name='I18n_GetText' parameters='keystr'>
 				<method_info nloc='38' complexity='11' token_count='210' nesting_level='0' start_line='241' end_line='279'></method_info>
 			<added_lines>241</added_lines>
 			<deleted_lines></deleted_lines>
 		</method>
 		<method name='I18n_LoadFile' parameters='path'>
 				<method_info nloc='75' complexity='15' token_count='399' nesting_level='0' start_line='147' end_line='222'></method_info>
 			<added_lines>204,210</added_lines>
 			<deleted_lines>198,204</deleted_lines>
 		</method>
 		<method name='yaml_get_token_string' parameters='token'>
 				<method_info nloc='10' complexity='2' token_count='68' nesting_level='0' start_line='73' end_line='82'></method_info>
 			<added_lines>74</added_lines>
 			<deleted_lines>73</deleted_lines>
 		</method>
 		<method name='yaml_token_getstr' parameters='token'>
 				<method_info nloc='10' complexity='2' token_count='68' nesting_level='0' start_line='74' end_line='83'></method_info>
 			<added_lines>74</added_lines>
 			<deleted_lines></deleted_lines>
 		</method>
 		<modified_lines>
 			<added_lines>40,51,93</added_lines>
 			<deleted_lines>50,235</deleted_lines>
 		</modified_lines>
 	</modification>
 	<modification change_type='MODIFY' old_name='src\ui\browser.c' new_name='src\ui\browser.c'>
 		<file_info nloc='488' complexity='69' token_count='3173'></file_info>
 		<method name='RenderSelectedItemsText' parameters='buf,text,data'>
 				<method_info nloc='5' complexity='1' token_count='35' nesting_level='0' start_line='165' end_line='169'></method_info>
 			<added_lines>165,168</added_lines>
 			<deleted_lines>165,168</deleted_lines>
 		</method>
 		<method name='OnBtnTagClick' parameters='w,e,arg'>
 				<method_info nloc='35' complexity='3' token_count='263' nesting_level='0' start_line='390' end_line='425'></method_info>
 			<added_lines>395,396,397,398,399,405,417,418</added_lines>
 			<deleted_lines>395,396,397,398,400,405,406,407,408,420,421</deleted_lines>
 		</method>
 		<method name='OnBtnDeleteClick' parameters='w,e,arg'>
 				<method_info nloc='26' complexity='3' token_count='195' nesting_level='0' start_line='427' end_line='453'></method_info>
 			<added_lines>429,432,433,434,440,441,446,447,448</added_lines>
 			<deleted_lines>428,429,435,436,439,440,441,447,448,449,450</deleted_lines>
 		</method>
 		<method name='RenderProgressText' parameters='buf,text,data'>
 				<method_info nloc='5' complexity='1' token_count='41' nesting_level='0' start_line='171' end_line='175'></method_info>
 			<added_lines>171,174</added_lines>
 			<deleted_lines>171,174</deleted_lines>
 		</method>
 		<method name='RenderSelectedItemsText' parameters='buf,text,data'>
 				<method_info nloc='5' complexity='1' token_count='37' nesting_level='0' start_line='165' end_line='169'></method_info>
 			<added_lines>165,168</added_lines>
 			<deleted_lines>165,168</deleted_lines>
 		</method>
 		<method name='RenderProgressText' parameters='buf,text,data'>
 				<method_info nloc='5' complexity='1' token_count='39' nesting_level='0' start_line='171' end_line='175'></method_info>
 			<added_lines>171,174</added_lines>
 			<deleted_lines>171,174</deleted_lines>
 		</method>
 		<modified_lines>
 			<added_lines></added_lines>
 			<deleted_lines>426,455,456,457,462,463</deleted_lines>
 		</modified_lines>
 	</modification>
 	<modification change_type='MODIFY' old_name='src\ui\filesync.c' new_name='src\ui\filesync.c'>
 		<file_info nloc='92' complexity='14' token_count='496'></file_info>
 		<method name='RenderStatusText' parameters='buf,text,data'>
 				<method_info nloc='23' complexity='5' token_count='144' nesting_level='0' start_line='62' end_line='84'></method_info>
 			<added_lines>62,71,76,80</added_lines>
 			<deleted_lines>62,71,76,80</deleted_lines>
 		</method>
 		<method name='RenderStatusText' parameters='buf,text,data'>
 				<method_info nloc='23' complexity='5' token_count='138' nesting_level='0' start_line='62' end_line='84'></method_info>
 			<added_lines>62,71,76,80</added_lines>
 			<deleted_lines>62,71,76,80</deleted_lines>
 		</method>
 		<modified_lines>
 			<added_lines></added_lines>
 			<deleted_lines></deleted_lines>
 		</modified_lines>
 	</modification>
 	<modification change_type='MODIFY' old_name='src\ui\textview_i18n.c' new_name='src\ui\textview_i18n.c'>
 		<file_info nloc='114' complexity='19' token_count='629'></file_info>
 		<method name='TextViewI18n_Init' parameters='w'>
 				<method_info nloc='13' complexity='1' token_count='92' nesting_level='0' start_line='59' end_line='72'></method_info>
 			<added_lines>64,65,67</added_lines>
 			<deleted_lines>67,68</deleted_lines>
 		</method>
 		<method name='TextViewI18n_Refresh' parameters='w'>
 				<method_info nloc='25' complexity='5' token_count='120' nesting_level='0' start_line='80' end_line='105'></method_info>
 			<added_lines>82,83,104</added_lines>
 			<deleted_lines>81,82,103</deleted_lines>
 		</method>
 		<method name='TextViewI18n_SetText' parameters='w,text'>
 				<method_info nloc='12' complexity='3' token_count='74' nesting_level='0' start_line='135' end_line='147'></method_info>
 			<added_lines>143</added_lines>
 			<deleted_lines>142,143</deleted_lines>
 		</method>
 		<modified_lines>
 			<added_lines>47</added_lines>
 			<deleted_lines>47</deleted_lines>
 		</modified_lines>
 	</modification>
 	<modification change_type='MODIFY' old_name='src\ui\view_folders.c' new_name='src\ui\view_folders.c'>
 		<file_info nloc='386' complexity='55' token_count='2387'></file_info>
 		<method name='RefreshTitle' parameters='void'>
 				<method_info nloc='8' complexity='2' token_count='40' nesting_level='0' start_line='416' end_line='423'></method_info>
 			<added_lines></added_lines>
 			<deleted_lines>416,417,418,419,420,421,422,423</deleted_lines>
 		</method>
 		<modified_lines>
 			<added_lines></added_lines>
 			<deleted_lines>79,424</deleted_lines>
 		</modified_lines>
 	</modification>
 	<modification change_type='MODIFY' old_name='src\ui\view_settings.c' new_name='src\ui\view_settings.c'>
 		<file_info nloc='249' complexity='36' token_count='1404'></file_info>
 		<method name='RenderThumbDBSizeText' parameters='buf,text,data'>
 				<method_info nloc='7' complexity='1' token_count='46' nesting_level='0' start_line='209' end_line='215'></method_info>
 			<added_lines>209,211,213,214</added_lines>
 			<deleted_lines>209,211,213,214</deleted_lines>
 		</method>
 		<method name='RenderThumbDBSizeText' parameters='buf,text,data'>
 				<method_info nloc='7' complexity='1' token_count='50' nesting_level='0' start_line='209' end_line='215'></method_info>
 			<added_lines>209,211,213,214</added_lines>
 			<deleted_lines>209,211,213,214</deleted_lines>
 		</method>
 		<modified_lines>
 			<added_lines></added_lines>
 			<deleted_lines></deleted_lines>
 		</modified_lines>
 	</modification>
 </commit>
</bug_data>
