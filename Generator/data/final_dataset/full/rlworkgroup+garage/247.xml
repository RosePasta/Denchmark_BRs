<bug_data>
<bug id='247' author='ryanjulian' open_date='2018-08-01T14:08:22Z' closed_time='2018-08-10T18:18:00Z'>
 	<summary>Pickling is broken in tf/regressors</summary>
 	<description>
 def play(pkl_file):
     with tf.Session() as sess:
         sess.run(tf.global_variables_initializer())
 
         # Unpack the snapshot
         snapshot = joblib.load(pkl_file)
         env = snapshot["env"]
         policy = snapshot["policy"]
 Output:
 tensorflow.python.framework.errors_impl.FailedPreconditionError: Attempting to use uninitialized value
 vf/mean_network/hidden_0/W
          [[Node: _retval_vf/mean_network/hidden_0/W_0_0 = _Retval[T=DT_FLOAT, index=0, _device="/job:lo
 calhost/replica:0/task:0/device:CPU:0"](vf/mean_network/hidden_0/W)]]
 Some notes:
 
 GaussianMLPRegressor defines get/set params:
     def get_param_values(self, **tags):
         return LayersPowered.get_param_values(self, **tags)
 
     def set_param_values(self, flattened_params, **tags):
         LayersPowered.set_param_values(self, flattened_params, **tags)
 This is not necessary if the regressors inherit from Parameterized and call the Parameterized
 constructor (see garage/tf/policies/base.py).
 However, using Parameterized alone does not seem to correct the problem
 
 	</description>
 	<comments>
 		<comment id='1' author='ryanjulian' date='2018-08-10T07:21:43Z'>
 		I don't quite understand sess.run(tf.global_variables_initializer()). Isn't there no global variable?
 		</comment>
 		<comment id='2' author='ryanjulian' date='2018-08-10T08:50:50Z'>
 		This bug occurs because Parameterized calls get_params_internal method in pickling, which is not implemented in tf.baselines.
 		</comment>
 	</comments>
 </bug>
<commit id='38baa8b8d5c719efe3b57b1f18442b36d5c06371' author='Chang Su' date='2018-08-10 11:17:59-07:00'>
 	<dmm_unit complexity='0.0' interfacing='0.6666666666666666' size='0.0'></dmm_unit>
 	<modification change_type='MODIFY' old_name='garage\tf\baselines\deterministic_mlp_baseline.py' new_name='garage\tf\baselines\deterministic_mlp_baseline.py'>
 		<file_info nloc='44' complexity='8' token_count='302'></file_info>
 		<method name='get_params_internal' parameters='self,tags'>
 				<method_info nloc='2' complexity='1' token_count='18' nesting_level='1' start_line='65' end_line='66'></method_info>
 			<added_lines>65,66</added_lines>
 			<deleted_lines></deleted_lines>
 		</method>
 		<modified_lines>
 			<added_lines>29,63,64</added_lines>
 			<deleted_lines></deleted_lines>
 		</modified_lines>
 	</modification>
 	<modification change_type='MODIFY' old_name='garage\tf\baselines\gaussian_mlp_baseline.py' new_name='garage\tf\baselines\gaussian_mlp_baseline.py'>
 		<file_info nloc='44' complexity='8' token_count='302'></file_info>
 		<method name='get_params_internal' parameters='self,tags'>
 				<method_info nloc='2' complexity='1' token_count='18' nesting_level='1' start_line='65' end_line='66'></method_info>
 			<added_lines>65,66</added_lines>
 			<deleted_lines></deleted_lines>
 		</method>
 		<modified_lines>
 			<added_lines>7,11,29,63,64</added_lines>
 			<deleted_lines>5,11</deleted_lines>
 		</modified_lines>
 	</modification>
 	<modification change_type='MODIFY' old_name='garage\tf\regressors\bernoulli_mlp_regressor.py' new_name='garage\tf\regressors\bernoulli_mlp_regressor.py'>
 		<file_info nloc='138' complexity='9' token_count='891'></file_info>
 		<method name='set_param_values' parameters='self,flattened_params,tags'>
 				<method_info nloc='2' complexity='1' token_count='22' nesting_level='1' start_line='172' end_line='173'></method_info>
 			<added_lines></added_lines>
 			<deleted_lines>172,173</deleted_lines>
 		</method>
 		<method name='get_param_values' parameters='self,tags'>
 				<method_info nloc='2' complexity='1' token_count='18' nesting_level='1' start_line='169' end_line='170'></method_info>
 			<added_lines></added_lines>
 			<deleted_lines>169,170</deleted_lines>
 		</method>
 		<modified_lines>
 			<added_lines>8,16,47</added_lines>
 			<deleted_lines>15,168,171</deleted_lines>
 		</modified_lines>
 	</modification>
 	<modification change_type='MODIFY' old_name='garage\tf\regressors\categorical_mlp_regressor.py' new_name='garage\tf\regressors\categorical_mlp_regressor.py'>
 		<file_info nloc='162' complexity='10' token_count='1110'></file_info>
 		<method name='set_param_values' parameters='self,flattened_params,tags'>
 				<method_info nloc='2' complexity='1' token_count='22' nesting_level='1' start_line='194' end_line='195'></method_info>
 			<added_lines></added_lines>
 			<deleted_lines>194,195</deleted_lines>
 		</method>
 		<method name='get_param_values' parameters='self,tags'>
 				<method_info nloc='2' complexity='1' token_count='18' nesting_level='1' start_line='191' end_line='192'></method_info>
 			<added_lines></added_lines>
 			<deleted_lines>191,192</deleted_lines>
 		</method>
 		<modified_lines>
 			<added_lines>8,18,51</added_lines>
 			<deleted_lines>17,190,193</deleted_lines>
 		</modified_lines>
 	</modification>
 	<modification change_type='MODIFY' old_name='garage\tf\regressors\deterministic_mlp_regressor.py' new_name='garage\tf\regressors\deterministic_mlp_regressor.py'>
 		<file_info nloc='114' complexity='6' token_count='725'></file_info>
 		<method name='set_param_values' parameters='self,flattened_params,tags'>
 				<method_info nloc='2' complexity='1' token_count='22' nesting_level='1' start_line='143' end_line='144'></method_info>
 			<added_lines></added_lines>
 			<deleted_lines>143,144</deleted_lines>
 		</method>
 		<method name='get_param_values' parameters='self,tags'>
 				<method_info nloc='2' complexity='1' token_count='18' nesting_level='1' start_line='140' end_line='141'></method_info>
 			<added_lines></added_lines>
 			<deleted_lines>140,141</deleted_lines>
 		</method>
 		<modified_lines>
 			<added_lines>8,16,43</added_lines>
 			<deleted_lines>15,139,142</deleted_lines>
 		</modified_lines>
 	</modification>
 	<modification change_type='MODIFY' old_name='garage\tf\regressors\gaussian_mlp_regressor.py' new_name='garage\tf\regressors\gaussian_mlp_regressor.py'>
 		<file_info nloc='275' complexity='12' token_count='1607'></file_info>
 		<method name='set_param_values' parameters='self,flattened_params,tags'>
 				<method_info nloc='2' complexity='1' token_count='21' nesting_level='1' start_line='325' end_line='326'></method_info>
 			<added_lines></added_lines>
 			<deleted_lines>325,326</deleted_lines>
 		</method>
 		<method name='get_param_values' parameters='self,tags'>
 				<method_info nloc='2' complexity='1' token_count='18' nesting_level='1' start_line='322' end_line='323'></method_info>
 			<added_lines></added_lines>
 			<deleted_lines>322,323</deleted_lines>
 		</method>
 		<modified_lines>
 			<added_lines>8,16,65</added_lines>
 			<deleted_lines>15,321,324</deleted_lines>
 		</modified_lines>
 	</modification>
 </commit>
</bug_data>
