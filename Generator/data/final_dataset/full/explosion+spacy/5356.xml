<bug_data>
<bug id='5356' author='wizzwizz4' open_date='2020-04-26T21:15:49Z' closed_time='2020-04-27T14:51:28Z'>
 	<summary>Span.similarity(Token) triggers TypeError</summary>
 	<description>
 &lt;denchmark-h:h2&gt;How to reproduce the behaviour&lt;/denchmark-h&gt;
 
 &gt;&gt;&gt; import spacy
 &gt;&gt;&gt; nlp = spacy.load("en_core_web_md")
 &gt;&gt;&gt; a = nlp("hi")[0]
 &gt;&gt;&gt; b = nlp("hello you there")[1:]
 &gt;&gt;&gt; a.similarity(b)
 0.38044035
 &gt;&gt;&gt; b.similarity(a)
 Traceback (most recent call last):
   File "&lt;stdin&gt;", line 1, in &lt;module&gt;
   File "span.pyx", line 329, in spacy.tokens.span.Span.similarity
 TypeError: 'spacy.tokens.token.Token' object is not subscriptable
 &lt;denchmark-h:h2&gt;Info about spaCy&lt;/denchmark-h&gt;
 
 
 spaCy version: 2.2.4
 Platform: Linux-5.2.0-3-amd64-x86_64-with-debian-10.3
 Python version: 3.7.3
 
 &lt;denchmark-h:h2&gt;Notes&lt;/denchmark-h&gt;
 
 There are 16 different possibilities here; it's possible some of them might've slipped through the test suite. I recommend adding some more sanity checks.
 	</description>
 	<comments>
 		<comment id='1' author='wizzwizz4' date='2020-04-27T09:40:58Z'>
 		Ah, we'd fixed this on develop and just need to backport it. Thanks for the report!
 		</comment>
 		<comment id='2' author='wizzwizz4' date='2020-04-27T14:52:03Z'>
 		Will be fixed from 2.3 onwards !
 		</comment>
 	</comments>
 </bug>
<commit id='f8ac5b9f563050472aedc719950b4888c65ca4cc' author='adrianeboyd' date='2020-04-27 16:51:27+02:00'>
 	<dmm_unit complexity='1.0' interfacing='1.0' size='1.0'></dmm_unit>
 	<modification change_type='ADD' old_name='None' new_name='spacy\tests\regression\test_issue5152.py'>
 		<file_info nloc='13' complexity='1' token_count='99'></file_info>
 	</modification>
 	<modification change_type='MODIFY' old_name='spacy\tokens\doc.pyx' new_name='spacy\tokens\doc.pyx'>
 		<file_info nloc='None' complexity='None' token_count='None'></file_info>
 		<modified_lines>
 			<added_lines>390,391,392,393,394,395,396,397</added_lines>
 			<deleted_lines>390,391,392,393,394,395,396</deleted_lines>
 		</modified_lines>
 	</modification>
 	<modification change_type='MODIFY' old_name='spacy\tokens\span.pyx' new_name='spacy\tokens\span.pyx'>
 		<file_info nloc='None' complexity='None' token_count='None'></file_info>
 		<modified_lines>
 			<added_lines>327,328,331,333</added_lines>
 			<deleted_lines>327,331</deleted_lines>
 		</modified_lines>
 	</modification>
 </commit>
</bug_data>
