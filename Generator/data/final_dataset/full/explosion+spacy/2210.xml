<bug_data>
<bug id='2210' author='arequejo' open_date='2018-04-12T06:59:17Z' closed_time='2018-04-18T22:44:11Z'>
 	<summary>doc.noun_chunks not working as expected for spanish models</summary>
 	<description>
 This issue is occurring with both spanish models, the following error happens when trying to iterate over the the noun_chunks of a doc:
 Traceback (most recent call last): File "playground.py", line 10, in &lt;module&gt; for nc in doc.noun_chunks: File "doc.pyx", line 503, in __get__ File "/usr/local/lib/python2.7/site-packages/spacy/lang/es/syntax_iterators.py", line 19, in noun_chunks left, right = noun_bounds(token) File "/usr/local/lib/python2.7/site-packages/spacy/lang/es/syntax_iterators.py", line 39, in noun_bounds if token.dep in np_left_deps: NameError: global name 'np_left_deps' is not defined
 The same code works by using an english model and sentence instead of a spanish one.
 &lt;denchmark-h:h2&gt;Your Environment&lt;/denchmark-h&gt;
 
 
 Python version: 2.7.14
 Platform: Darwin-17.5.0-x86_64-i386-64bit
 spaCy version: 2.0.11
 Models: es_core_news_md, en_core_web_sm, es_core_news_sm
 
 	</description>
 	<comments>
 		<comment id='1' author='arequejo' date='2018-04-12T20:38:58Z'>
 		Thanks for the report â€“ looks like this might be a bug/typo in lang/es/syntax_iterators.py. Will look into this!
 		</comment>
 		<comment id='2' author='arequejo' date='2018-04-16T16:44:31Z'>
 		same issue here.
 		</comment>
 		<comment id='3' author='arequejo' date='2018-05-06T20:37:48Z'>
 		I have the same issue. What should I do to solve it?
 I've manually replaced syntax_iterators.py with the corrected file by Ines, and it works now.
 But how to do the replacement correctly, via pip or whatever?
 Thanks
 		</comment>
 		<comment id='4' author='arequejo' date='2018-06-06T13:30:37Z'>
 		This thread has been automatically locked since there has not been any recent activity after it was closed. Please open a new issue for related bugs.
 		</comment>
 	</comments>
 </bug>
<commit id='686225eaddd56fac86cb18a3e172d84371ea8be1' author='ines' date='2018-04-18 18:44:01-04:00'>
 	<dmm_unit complexity='0.0' interfacing='1.0' size='0.0'></dmm_unit>
 	<modification change_type='MODIFY' old_name='spacy\lang\es\syntax_iterators.py' new_name='spacy\lang\es\syntax_iterators.py'>
 		<file_info nloc='43' complexity='17' token_count='315'></file_info>
 		<method name='noun_bounds' parameters='root'>
 				<method_info nloc='15' complexity='7' token_count='100' nesting_level='0' start_line='36' end_line='50'></method_info>
 			<added_lines></added_lines>
 			<deleted_lines>36,37,38,39,40,41,42,43,44,45,46,47,48,49,50</deleted_lines>
 		</method>
 		<method name='noun_chunks' parameters='obj'>
 				<method_info nloc='17' complexity='7' token_count='157' nesting_level='0' start_line='7' end_line='39'></method_info>
 			<added_lines>9,10,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32</added_lines>
 			<deleted_lines>9,10,36,37,38,39</deleted_lines>
 		</method>
 		<method name='noun_chunks.noun_bounds' parameters='root'>
 				<method_info nloc='15' complexity='7' token_count='100' nesting_level='1' start_line='17' end_line='31'></method_info>
 			<added_lines>17,18,19,20,21,22,23,24,25,26,27,28,29,30,31</added_lines>
 			<deleted_lines></deleted_lines>
 		</method>
 		<modified_lines>
 			<added_lines></added_lines>
 			<deleted_lines>51,52</deleted_lines>
 		</modified_lines>
 	</modification>
 </commit>
</bug_data>
