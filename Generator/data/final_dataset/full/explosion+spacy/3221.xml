<bug_data>
<bug id='3221' author='mfojtak' open_date='2019-02-02T09:41:58Z' closed_time='2019-02-10T13:57:32Z'>
 	<summary>model load fails when textcat in pipeline</summary>
 	<description>
 &lt;denchmark-h:h2&gt;How to reproduce the behaviour&lt;/denchmark-h&gt;
 
 Run &lt;denchmark-link:https://github.com/explosion/spaCy/blob/develop/examples/training/train_textcat.py&gt;https://github.com/explosion/spaCy/blob/develop/examples/training/train_textcat.py&lt;/denchmark-link&gt;
 
 &lt;denchmark-h:h2&gt;Your Environment&lt;/denchmark-h&gt;
 
 Using spacy-nightly (2.1.0a6)
 
 Operating System: Ubuntu 16.04
 Python Version Used: 3.7
 spaCy Version Used: 2.1.0a6
 
 The train_textcat example fails with:
 &lt;denchmark-code&gt;File "example.py", line 137, in &lt;module&gt;
     plac.call(main)
   File "/opt/conda/lib/python3.7/site-packages/plac_core.py", line 328, in call
     cmd, result = parser.consume(arglist)
   File "/opt/conda/lib/python3.7/site-packages/plac_core.py", line 207, in consume
     return cmd, self.func(*(args + varargs + extraopts), **kwargs)
   File "example.py", line 94, in main
     nlp2 = spacy.load(output_dir)
   File "/opt/conda/lib/python3.7/site-packages/spacy/__init__.py", line 22, in load
     return util.load_model(name, **overrides)
   File "/opt/conda/lib/python3.7/site-packages/spacy/util.py", line 121, in load_model
     return load_model_from_path(name, **overrides)
   File "/opt/conda/lib/python3.7/site-packages/spacy/util.py", line 159, in load_model_from_path
     return nlp.from_disk(model_path)
   File "/opt/conda/lib/python3.7/site-packages/spacy/language.py", line 767, in from_disk
     util.from_disk(path, deserializers, exclude)
   File "/opt/conda/lib/python3.7/site-packages/spacy/util.py", line 579, in from_disk
     reader(path / key)
   File "/opt/conda/lib/python3.7/site-packages/spacy/language.py", line 763, in &lt;lambda&gt;
     deserializers[name] = lambda p, proc=proc: proc.from_disk(p, vocab=False)
   File "pipeline.pyx", line 428, in spacy.pipeline.Pipe.from_disk
   File "/opt/conda/lib/python3.7/site-packages/spacy/util.py", line 579, in from_disk
     reader(path / key)
   File "pipeline.pyx", line 420, in spacy.pipeline.Pipe.from_disk.load_model
   File "pipeline.pyx", line 1148, in spacy.pipeline.TextCategorizer.Model
 TypeError: Model() takes exactly 2 positional arguments (1 given)
 &lt;/denchmark-code&gt;
 
 This is caused by the change in textcat constructor which now has additional positional argument nr_class with no default value specified.
 	</description>
 	<comments>
 		<comment id='1' author='mfojtak' date='2019-02-05T09:38:51Z'>
 		Any idea when this is gonna be fixed?
 It is a showstopper for me and anybody who needs to do text categorization.
 Is there a temporary solution/hack?
 Related to &lt;denchmark-link:https://github.com/explosion/spaCy/issues/3148&gt;#3148&lt;/denchmark-link&gt;
  and &lt;denchmark-link:https://github.com/explosion/spaCy/issues/3087&gt;#3087&lt;/denchmark-link&gt;
 
 		</comment>
 		<comment id='2' author='mfojtak' date='2019-02-05T11:32:47Z'>
 		Ah, I missed the extended discussion because it was buried in the textcat example thread. If somebody had submitted a PR for this small fix, I would have definitely merged that. Sorry! I can add the default argument now and we can ship it with the next nightly release.
 		</comment>
 		<comment id='3' author='mfojtak' date='2019-02-06T07:36:14Z'>
 		I have built from develop branch and can confirm that it is working now.
 This one can be closed.
 		</comment>
 		<comment id='4' author='mfojtak' date='2019-03-12T14:12:40Z'>
 		This thread has been automatically locked since there has not been any recent activity after it was closed. Please open a new issue for related bugs.
 		</comment>
 	</comments>
 </bug>
<commit id='5e16490d9d2cf3fc8c571d56bdbbd36dd11dd759' author='Ines Montani' date='2019-02-05 12:33:47+01:00'>
 	<dmm_unit complexity='None' interfacing='None' size='None'></dmm_unit>
 	<modification change_type='MODIFY' old_name='spacy\pipeline.pyx' new_name='spacy\pipeline.pyx'>
 		<file_info nloc='None' complexity='None' token_count='None'></file_info>
 		<modified_lines>
 			<added_lines>1148</added_lines>
 			<deleted_lines>1148</deleted_lines>
 		</modified_lines>
 	</modification>
 </commit>
</bug_data>
