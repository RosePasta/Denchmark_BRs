<bug_data>
<bug id='3531' author='paulrinckens' open_date='2019-04-02T13:21:24Z' closed_time='2019-04-03T08:13:24Z'>
 	<summary>Displacy producing KeyError: 'settings'</summary>
 	<description>
 &lt;denchmark-h:h2&gt;How to reproduce the behaviour&lt;/denchmark-h&gt;
 
 Running the example from the docs for manual entity visualization:
 from spacy import displacy
 
 ex = [{"text": "But Google is starting from behind.",
        "ents": [{"start": 4, "end": 10, "label": "ORG"}],
        "title": None}]
 html = displacy.render(ex, style="ent", manual=True)
 &lt;denchmark-h:h2&gt;Error&lt;/denchmark-h&gt;
 
 &lt;denchmark-code&gt;line 52, in render
     _html["parsed"] = renderer.render(parsed, page=page, minify=minify).strip()
 
 line 257, in render
     self.direction = p["settings"].get("direction", DEFAULT_DIR)
 KeyError: 'settings'
 &lt;/denchmark-code&gt;
 
 &lt;denchmark-h:h2&gt;Info about spaCy&lt;/denchmark-h&gt;
 
 
 spaCy version: 2.1.3
 Platform: Darwin-18.2.0-x86_64-i386-64bit
 Python version: 3.7.1
 
 	</description>
 	<comments>
 		<comment id='1' author='paulrinckens' date='2019-04-02T13:51:26Z'>
 		Thanks for the report! The "settings" were added in v2.1 to allow passing through additional config (like the writing direction for RTL languages) â€“ but it seems like the rendering logic expects that "settings" always exists, which it probably shouldn't.
 Edit: As a workaround, you can just add "settings": {} to the dict for now.
 		</comment>
 		<comment id='2' author='paulrinckens' date='2019-05-03T09:11:05Z'>
 		This thread has been automatically locked since there has not been any recent activity after it was closed. Please open a new issue for related bugs.
 		</comment>
 	</comments>
 </bug>
<commit id='6a4575a56c5e02b62be55fd39fd24b371821aea9' author='Ines Montani' date='2019-04-03 10:13:16+02:00'>
 	<dmm_unit complexity='0.9285714285714286' interfacing='0.9285714285714286' size='0.0'></dmm_unit>
 	<modification change_type='MODIFY' old_name='spacy\displacy\render.py' new_name='spacy\displacy\render.py'>
 		<file_info nloc='206' complexity='43' token_count='1667'></file_info>
 		<method name='render' parameters='self,parsed,page,minify'>
 				<method_info nloc='21' complexity='6' token_count='179' nesting_level='1' start_line='39' end_line='68'></method_info>
 			<added_lines>53,54,55</added_lines>
 			<deleted_lines>53,54</deleted_lines>
 		</method>
 		<modified_lines>
 			<added_lines>258,259,260,261</added_lines>
 			<deleted_lines>257,258,259</deleted_lines>
 		</modified_lines>
 	</modification>
 	<modification change_type='ADD' old_name='None' new_name='spacy\tests\regression\test_issue3531.py'>
 		<file_info nloc='28' complexity='1' token_count='240'></file_info>
 	</modification>
 </commit>
</bug_data>
