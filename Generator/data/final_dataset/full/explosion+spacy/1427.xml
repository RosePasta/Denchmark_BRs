<bug_data>
<bug id='1427' author='benhachey' open_date='2017-10-17T03:08:21Z' closed_time='2017-10-20T11:09:35Z'>
 	<summary>Cannot deserialise LAW entities</summary>
 	<description>
 I can't get LAW entities to deserialise, e.g.:
 import spacy
 from spacy.tokens import Span
 
 text = u'Netflix is hiring a new VP of global policy according to Section 1 of the corporate charter.'
 
 nlp = spacy.load('en_core_web_sm')
 doc = nlp(text)
 
 from spacy.tokens import Doc
 from spacy.vocab import Vocab
 
 bin_doc = doc.to_bytes()
 doc2 = Doc(Vocab()).from_bytes(bin_doc)
 
 print([(e.label_, e.text) for e in doc.ents])
 print([(e.label_, e.text) for e in doc2.ents])
 Raises:
 &lt;denchmark-code&gt;[('ORG', 'VP'), ('LAW', 'Section 1')]
 ---------------------------------------------------------------------------
 AssertionError                            Traceback (most recent call last)
 &lt;ipython-input-28-35776b8a45af&gt; in &lt;module&gt;()
       1 print([(e.label_, e.text) for e in doc.ents])
 ----&gt; 2 print([(e.label_, e.text) for e in doc2.ents])
 
 doc.pyx in spacy.tokens.doc.Doc.ents.__get__()
 
 span.pyx in spacy.tokens.span.Span.__cinit__()
 
 AssertionError: 4035656307355538346
 &lt;/denchmark-code&gt;
 
 Breaking at:
 
 
 
 spaCy/spacy/tokens/span.pyx
 
 
          Line 60
       in
       485c4f6
 
 
 
 
 
 
  assert label in doc.vocab.strings, label 
 
 
 
 
 
 	</description>
 	<comments>
 		<comment id='1' author='benhachey' date='2017-10-17T09:18:57Z'>
 		Bugger, thanks.
 To keep you working: nlp.vocab.strings.add('LAW')
 Strings are hashed into uint64, which is obviously one-way. So if we try to look up a string that's missing it will cause an error.
 I'm sort of worried about the implications of this though. Does this mean there were zero LAW entities in the data? Also I thought all the entity labels would be in spacy.symbols...
 		</comment>
 		<comment id='2' author='benhachey' date='2017-10-18T22:39:52Z'>
 		
 I'm sort of worried about the implications of this though. Does this mean there were zero LAW entities in the data?
 
 I just checked and even though it's present in the OntoNotes 5 corpus, spaCy currently doesn't have a LAW symbol ðŸ˜± It's also not part of our documented NER scheme... which I guess was based on spacy.symbols, so we never noticed? It's very mysterious.
 The good news is, the issue that made it very difficult to add new symbols in v1.x is not a problem in v2.0 anymore. So we can simply add it to spacy.symbols now.
 		</comment>
 		<comment id='3' author='benhachey' date='2017-10-20T11:09:35Z'>
 		Fixed and will be included in v2.0!
 		</comment>
 		<comment id='4' author='benhachey' date='2018-05-08T13:28:01Z'>
 		This thread has been automatically locked since there has not been any recent activity after it was closed. Please open a new issue for related bugs.
 		</comment>
 	</comments>
 </bug>
<commit id='4acab77a8a36c6f54cacf5e26b32860a30d09657' author='ines' date='2017-10-20 13:07:57+02:00'>
 	<dmm_unit complexity='None' interfacing='None' size='None'></dmm_unit>
 	<modification change_type='MODIFY' old_name='spacy\symbols.pxd' new_name='spacy\symbols.pxd'>
 		<file_info nloc='None' complexity='None' token_count='None'></file_info>
 		<modified_lines>
 			<added_lines>470</added_lines>
 			<deleted_lines></deleted_lines>
 		</modified_lines>
 	</modification>
 	<modification change_type='MODIFY' old_name='spacy\symbols.pyx' new_name='spacy\symbols.pyx'>
 		<file_info nloc='None' complexity='None' token_count='None'></file_info>
 		<modified_lines>
 			<added_lines>461</added_lines>
 			<deleted_lines></deleted_lines>
 		</modified_lines>
 	</modification>
 	<modification change_type='MODIFY' old_name='website\api\_annotation\_named-entities.jade' new_name='website\api\_annotation\_named-entities.jade'>
 		<file_info nloc='None' complexity='None' token_count='None'></file_info>
 		<modified_lines>
 			<added_lines>40,41,42,43</added_lines>
 			<deleted_lines></deleted_lines>
 		</modified_lines>
 	</modification>
 </commit>
</bug_data>
