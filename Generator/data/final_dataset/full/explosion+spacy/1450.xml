<bug_data>
<bug id='1450' author='jofatmofn' open_date='2017-10-23T06:42:21Z' closed_time='2017-10-24T12:31:38Z'>
 	<summary>One-off error with end index, when OP "*" ends the pattern</summary>
 	<description>
 &lt;denchmark-link:https://github.com/explosion/spaCy/issues/1148&gt;#1148&lt;/denchmark-link&gt;
 
 
 Python version: 2.7.12
 Platform: Linux-4.4.0-91-generic-x86_64-with-Ubuntu-16.04-xenial
 spaCy version: 2.0.0a17
 Models: en_core_web_sm-2.0.0a7
 
 Tried the following code
 &lt;denchmark-code&gt;import spacy
 from spacy.matcher import Matcher
 from spacy.attrs import *
 
 def on_match_1(matcher, doc, id, matches):
         label, start, end = matches[id]
         print(label, start, end, doc[start:end])
 
 nlp = spacy.load('en_core_web_sm')
 matcher = Matcher(nlp.vocab)
 matcher.add(
         "TSTEND",
         on_match_1,
         [
                 {TAG: "JJ", LOWER: "new"},
                 {TAG: "NN", 'OP': "*"}
         ]
 )
 document = nlp(u'Could you create a new ticket for me?')
 matches = matcher(document)
 
 &lt;/denchmark-code&gt;
 
 and got the following output
 (8454456681159448349L, 4, 7, new ticket for)
 Expected value of end is 6.
 	</description>
 	<comments>
 		<comment id='1' author='jofatmofn' date='2017-10-24T12:31:31Z'>
 		Sorry for closing the previous ticket prematurely, and thanks for following up.
 The patch includes better tests. I doubt we've hit the last matcher bug, but it's definitely getting better. Please keep reporting :)
 		</comment>
 		<comment id='2' author='jofatmofn' date='2018-05-08T13:27:17Z'>
 		This thread has been automatically locked since there has not been any recent activity after it was closed. Please open a new issue for related bugs.
 		</comment>
 	</comments>
 </bug>
<commit id='4bea65a1a8426bb551854b0a6175b5df1403e27d' author='Matthew Honnibal' date='2017-10-24 14:26:27+02:00'>
 	<dmm_unit complexity='1.0' interfacing='0.5294117647058824' size='0.0'></dmm_unit>
 	<modification change_type='MODIFY' old_name='spacy\matcher.pyx' new_name='spacy\matcher.pyx'>
 		<file_info nloc='None' complexity='None' token_count='None'></file_info>
 		<modified_lines>
 			<added_lines>72,124,130,132,137,138,140,144,352,353,354,366,370,374,394,396</added_lines>
 			<deleted_lines>128,130,136,140,359,363,386,388</deleted_lines>
 		</modified_lines>
 	</modification>
 	<modification change_type='ADD' old_name='None' new_name='spacy\tests\regression\test_issue1450.py'>
 		<file_info nloc='32' complexity='3' token_count='182'></file_info>
 	</modification>
 	<modification change_type='MODIFY' old_name='spacy\tests\test_matcher.py' new_name='spacy\tests\test_matcher.py'>
 		<file_info nloc='193' complexity='26' token_count='1713'></file_info>
 		<method name='test_matcher_end_zero_plus' parameters='matcher'>
 				<method_info nloc='18' complexity='1' token_count='157' nesting_level='0' start_line='218' end_line='236'></method_info>
 			<added_lines>218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236</added_lines>
 			<deleted_lines></deleted_lines>
 		</method>
 		<modified_lines>
 			<added_lines>6,216,217</added_lines>
 			<deleted_lines></deleted_lines>
 		</modified_lines>
 	</modification>
 </commit>
</bug_data>
