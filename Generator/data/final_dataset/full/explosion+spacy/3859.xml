<bug_data>
<bug id='3859' author='BreakBB' open_date='2019-06-18T12:44:32Z' closed_time='2019-07-09T19:48:31Z'>
 	<summary>pretrain with -t2v to resume overwrites existing weight files</summary>
 	<description>
 &lt;denchmark-h:h2&gt;How to reproduce the behaviour&lt;/denchmark-h&gt;
 
 Using the same output directory for a continued run () of  will overwrite existing weight files, since the counting of  begins at 0 again, even though you might use a weight file which was created after 100 iterations. Then &lt;denchmark-link:https://github.com/explosion/spaCy/blob/81c12640ab4f16ad2a9c718416f32409d0c457d2/spacy/cli/pretrain.py#L139&gt;_save_model&lt;/denchmark-link&gt;
  saves the next epoch as  instead of .
 &lt;denchmark-h:h2&gt;Your Environment&lt;/denchmark-h&gt;
 
 
 Operating System: Windows 10
 Python Version Used: 3.7.3
 spaCy Version Used: latest master commit
 
 &lt;denchmark-h:h2&gt;Possible solution&lt;/denchmark-h&gt;
 
 This should either be added to the docs or maybe some useful information is included in the weight file. Trying to parse the epoch from the -t2v value is not a good idea I think.
 	</description>
 	<comments>
 		<comment id='1' author='BreakBB' date='2019-06-20T22:00:06Z'>
 		This is a good point. I do find the idea of reading the epoch from the filename tempting though, since these filenames are written by spaCy into the directory.
 Perhaps we could have an argument that lets you specify the epoch to start counting from, and infer it by default if the -t2v argument is set?
 		</comment>
 		<comment id='2' author='BreakBB' date='2019-06-21T07:07:12Z'>
 		I don't really see a reason to rename a weight file after it's creation (from the user perspective). But your suggested argument would allow it without a drawback.
 What if the user doesn't add this epoch-start (just an idea) argument and the file doesn't match the modelN.bin pattern? I think spaCy should raise an error to prevent overwriting existing files and give a hint to the new argument.
 		</comment>
 		<comment id='3' author='BreakBB' date='2019-08-16T14:42:29Z'>
 		This thread has been automatically locked since there has not been any recent activity after it was closed. Please open a new issue for related bugs.
 		</comment>
 	</comments>
 </bug>
<commit id='04982ccc4033ec15864bba659430a8408ca94774' author='Björn Böing' date='2019-07-09 21:48:30+02:00'>
 	<dmm_unit complexity='1.0' interfacing='0.0' size='0.0'></dmm_unit>
 	<modification change_type='MODIFY' old_name='spacy\cli\pretrain.py' new_name='spacy\cli\pretrain.py'>
 		<file_info nloc='310' complexity='26' token_count='2055'></file_info>
 		<method name='pretrain' parameters='texts_loc,vectors_model,output_dir,width,depth,embed_rows,loss_func,use_vectors,dropout,n_iter,batch_size,max_length,min_length,seed,n_save_every,init_tok2vec,epoch_start'>
 				<method_info nloc='18' complexity='1' token_count='66' nesting_level='0' start_line='77' end_line='94'></method_info>
 			<added_lines>94</added_lines>
 			<deleted_lines></deleted_lines>
 		</method>
 		<modified_lines>
 			<added_lines>8,69,70,71,72,73,74,75,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,185,206</added_lines>
 			<deleted_lines>156,177</deleted_lines>
 		</modified_lines>
 	</modification>
 	<modification change_type='MODIFY' old_name='website\docs\api\cli.md' new_name='website\docs\api\cli.md'>
 		<file_info nloc='None' complexity='None' token_count='None'></file_info>
 		<modified_lines>
 			<added_lines>287,288,289,309,310</added_lines>
 			<deleted_lines>287,288,289,309</deleted_lines>
 		</modified_lines>
 	</modification>
 </commit>
</bug_data>
