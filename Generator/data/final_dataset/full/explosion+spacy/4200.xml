<bug_data>
<bug id='4200' author='phayllia' open_date='2019-08-26T22:08:51Z' closed_time='2019-09-09T14:32:33Z'>
 	<summary>text color dont working after spacy in jupyter notebook</summary>
 	<description>
 &lt;denchmark-h:h2&gt;How to reproduce the behaviour&lt;/denchmark-h&gt;
 
 In a new jupyter notebook, print '\033[34mtest\033[0m' produces the text in blue as expected.
 
 
 import spacy
 print '\033[34mtest\033[0m'
 After importing, the text color print doesn't work anymore
 
 
 &lt;denchmark-h:h2&gt;Your Environment&lt;/denchmark-h&gt;
 
 
 Operating System: Windows
 Python Version Used: 2.7
 spaCy Version Used: 2.0.9
 Environment Information:
 
 	</description>
 	<comments>
 		<comment id='1' author='phayllia' date='2019-08-27T08:06:08Z'>
 		Yes, I can confirm that this happens indeed (also with Python 3); Something in the  installation is preventing the color to print. &lt;denchmark-link:https://github.com/ines&gt;@ines&lt;/denchmark-link&gt;
  : any idea why this happens?
 		</comment>
 		<comment id='2' author='phayllia' date='2019-08-27T08:35:23Z'>
 		Just testing it – I really hope this won't be too difficult to track down. The thing is, this could happen in any dependency. In spaCy and our libraries, we typically avoid setting anything in the global scope (and of course never monkeypatch built-ins) for reasons like this.
 The most related dependency is my package &lt;denchmark-link:https://github.com/ines/wasabi&gt;wasabi&lt;/denchmark-link&gt;
 , but it shouldn't be doing anything on import 
 Edit: I can't seem to reproduce this? Running the lastest version in a notebook on Python 3.6.
 		</comment>
 		<comment id='3' author='phayllia' date='2019-08-27T08:42:24Z'>
 		Here I'm using Python 3.7.0 on a windows:
 &lt;denchmark-link:https://user-images.githubusercontent.com/8796347/63755653-590b6480-c8b7-11e9-9cc1-6a415c7f6e6b.png&gt;&lt;/denchmark-link&gt;
 
 		</comment>
 		<comment id='4' author='phayllia' date='2019-08-27T08:44:04Z'>
 		I can take this on if you can't reproduce!
 		</comment>
 		<comment id='5' author='phayllia' date='2019-08-27T08:48:04Z'>
 		Ahh, maybe it's a Windows thing? Okay, here are some things to try:
 import wasabi
 print("\033[34mtest\033[0m")
 If the above works fine:
 from wasabi import Printer
 msg = Printer()
 print("\033[34mtest\033[0m")
 If those work, it's most likely not in wasabi where we actually handle the related printing stuff.
 		</comment>
 		<comment id='6' author='phayllia' date='2019-08-27T08:49:50Z'>
 		It's not wasabi  - the color stays blue. Let me try out a few other spaCy dependencies ;-)
 		</comment>
 		<comment id='7' author='phayllia' date='2019-08-27T08:50:30Z'>
 		&lt;denchmark-link:https://github.com/phayllia&gt;@phayllia&lt;/denchmark-link&gt;
  : are you running this on a Windows?
 		</comment>
 		<comment id='8' author='phayllia' date='2019-08-27T08:53:13Z'>
 		(Sorry, misclicked!) Thanks for checking. And damn, I was hoping it'd be wasabi, since it's a super small zero-dependency codebase and ours, so it would have been easy to resolve. Still hope it's in one of our dependencies so we can just fix it, and not in a third-party package.
 		</comment>
 		<comment id='9' author='phayllia' date='2019-08-27T09:01:04Z'>
 		I can't pin it on one of the dependencies :(
 		</comment>
 		<comment id='10' author='phayllia' date='2019-08-27T09:08:06Z'>
 		Damn... so if none of the dependencies have an impact at import, I guess next would be to check what spaCy creates in the global scope and what runs when you import spacy. Luckily, all the language data is out because that's lazy-loaded. And there shouldn't be that much, because we really try to avoid it.
 		</comment>
 		<comment id='11' author='phayllia' date='2019-09-09T09:54:50Z'>
 		After first thoroughly inspecting spaCy's codebase, I finally found the root cause somewhere else: not a direct dependency of spaCy but a standard Python package .... tqdm !
 &lt;denchmark-link:https://user-images.githubusercontent.com/8796347/64521358-253d2f80-d2f8-11e9-85b3-d002a8a5c1ce.png&gt;&lt;/denchmark-link&gt;
 
 The relevant issue is here: &lt;denchmark-link:https://github.com/tqdm/tqdm/issues/678&gt;tqdm/tqdm#678&lt;/denchmark-link&gt;
  - not fixed yet. I would suggest upvoting it.
 		</comment>
 		<comment id='12' author='phayllia' date='2019-09-09T10:00:29Z'>
 		&lt;denchmark-link:https://github.com/ines&gt;@ines&lt;/denchmark-link&gt;
 : we're only using  in the ,  and  scripts. We could import it within the functions to potentially fix this bug?
 		</comment>
 		<comment id='13' author='phayllia' date='2019-09-09T11:25:37Z'>
 		Ha, I knew it'd be something along those lines! Thanks for tracking this down.
 
 We could import it within the functions to potentially fix this bug?
 
 Yes, that sounds like an okay workaround for now. Maybe just add a quick inline comment pointing to this issue – and then we just need to remember to change it back once the problem is resolved.
 		</comment>
 		<comment id='14' author='phayllia' date='2019-10-09T14:42:55Z'>
 		This thread has been automatically locked since there has not been any recent activity after it was closed. Please open a new issue for related bugs.
 		</comment>
 	</comments>
 </bug>
<commit id='482c7cd1b94d9fab299635bc9ee12d8b31b8706a' author='Sofie Van Landeghem' date='2019-09-09 16:32:11+02:00'>
 	<dmm_unit complexity='0.5' interfacing='0.5' size='0.4'></dmm_unit>
 	<modification change_type='MODIFY' old_name='bin\ud\ud_run_test.py' new_name='bin\ud\ud_run_test.py'>
 		<file_info nloc='272' complexity='66' token_count='2021'></file_info>
 		<modified_lines>
 			<added_lines></added_lines>
 			<deleted_lines>8</deleted_lines>
 		</modified_lines>
 	</modification>
 	<modification change_type='MODIFY' old_name='bin\ud\ud_train.py' new_name='bin\ud\ud_train.py'>
 		<file_info nloc='446' complexity='77' token_count='3300'></file_info>
 		<modified_lines>
 			<added_lines>464,465,466</added_lines>
 			<deleted_lines>8</deleted_lines>
 		</modified_lines>
 	</modification>
 	<modification change_type='MODIFY' old_name='examples\training\conllu.py' new_name='examples\training\conllu.py'>
 		<file_info nloc='346' complexity='73' token_count='2670'></file_info>
 		<method name='main' parameters='ud_dir,parses_dir,config,corpus,limit'>
 				<method_info nloc='35' complexity='7' token_count='303' nesting_level='0' start_line='394' end_line='434'></method_info>
 			<added_lines>395,396,397</added_lines>
 			<deleted_lines></deleted_lines>
 		</method>
 		<modified_lines>
 			<added_lines>24</added_lines>
 			<deleted_lines>6,10,26</deleted_lines>
 		</modified_lines>
 	</modification>
 	<modification change_type='MODIFY' old_name='examples\training\pretrain_textcat.py' new_name='examples\training\pretrain_textcat.py'>
 		<file_info nloc='183' complexity='35' token_count='1271'></file_info>
 		<method name='train_tensorizer' parameters='nlp,texts,dropout,n_iter'>
 				<method_info nloc='12' complexity='4' token_count='104' nesting_level='0' start_line='108' end_line='121'></method_info>
 			<added_lines>109,110,111</added_lines>
 			<deleted_lines></deleted_lines>
 		</method>
 		<method name='train_textcat' parameters='nlp,n_texts,n_iter'>
 				<method_info nloc='33' complexity='6' token_count='272' nesting_level='0' start_line='124' end_line='162'></method_info>
 			<added_lines>125,126,127</added_lines>
 			<deleted_lines></deleted_lines>
 		</method>
 		<modified_lines>
 			<added_lines></added_lines>
 			<deleted_lines>21</deleted_lines>
 		</modified_lines>
 	</modification>
 	<modification change_type='MODIFY' old_name='examples\vectors_tensorboard.py' new_name='examples\vectors_tensorboard.py'>
 		<file_info nloc='77' complexity='5' token_count='463'></file_info>
 		<method name='main' parameters='vectors_loc,out_loc,name'>
 				<method_info nloc='45' complexity='5' token_count='369' nesting_level='0' start_line='37' end_line='103'></method_info>
 			<added_lines>38,39,40</added_lines>
 			<deleted_lines></deleted_lines>
 		</method>
 		<modified_lines>
 			<added_lines></added_lines>
 			<deleted_lines>16</deleted_lines>
 		</modified_lines>
 	</modification>
 	<modification change_type='MODIFY' old_name='spacy\cli\init_model.py' new_name='spacy\cli\init_model.py'>
 		<file_info nloc='227' complexity='51' token_count='1642'></file_info>
 		<method name='read_freqs' parameters='freqs_loc,max_length,min_doc_freq,min_freq'>
 				<method_info nloc='27' complexity='7' token_count='227' nesting_level='0' start_line='209' end_line='238'></method_info>
 			<added_lines>210,211,212</added_lines>
 			<deleted_lines></deleted_lines>
 		</method>
 		<method name='read_vectors' parameters='vectors_loc'>
 				<method_info nloc='15' complexity='4' token_count='157' nesting_level='0' start_line='190' end_line='206'></method_info>
 			<added_lines>191,192,193</added_lines>
 			<deleted_lines></deleted_lines>
 		</method>
 		<method name='read_attrs_from_deprecated' parameters='freqs_loc,clusters_loc'>
 				<method_info nloc='25' complexity='6' token_count='186' nesting_level='0' start_line='110' end_line='138'></method_info>
 			<added_lines>111,112,113</added_lines>
 			<deleted_lines></deleted_lines>
 		</method>
 		<method name='read_clusters' parameters='clusters_loc'>
 				<method_info nloc='25' complexity='10' token_count='170' nesting_level='0' start_line='241' end_line='270'></method_info>
 			<added_lines>242,243,244</added_lines>
 			<deleted_lines></deleted_lines>
 		</method>
 		<modified_lines>
 			<added_lines></added_lines>
 			<deleted_lines>6</deleted_lines>
 		</modified_lines>
 	</modification>
 	<modification change_type='MODIFY' old_name='spacy\cli\profile.py' new_name='spacy\cli\profile.py'>
 		<file_info nloc='54' complexity='11' token_count='407'></file_info>
 		<method name='parse_texts' parameters='nlp,texts'>
 				<method_info nloc='4' complexity='2' token_count='29' nesting_level='0' start_line='49' end_line='54'></method_info>
 			<added_lines>50,51,52</added_lines>
 			<deleted_lines></deleted_lines>
 		</method>
 		<modified_lines>
 			<added_lines></added_lines>
 			<deleted_lines>10</deleted_lines>
 		</modified_lines>
 	</modification>
 	<modification change_type='MODIFY' old_name='spacy\cli\train.py' new_name='spacy\cli\train.py'>
 		<file_info nloc='441' complexity='33' token_count='2975'></file_info>
 		<method name='_create_progress_bar' parameters='total'>
 				<method_info nloc='7' complexity='2' token_count='41' nesting_level='0' start_line='395' end_line='403'></method_info>
 			<added_lines>396,397,398</added_lines>
 			<deleted_lines></deleted_lines>
 		</method>
 		<modified_lines>
 			<added_lines>103,104,105,106</added_lines>
 			<deleted_lines>7</deleted_lines>
 		</modified_lines>
 	</modification>
 </commit>
</bug_data>
