<bug_data>
<bug id='2177' author='chandan2495' open_date='2018-04-03T07:14:27Z' closed_time='2018-04-03T16:30:29Z'>
 	<summary>Why are we looking for exactly one attribute in case of set_extension on a doc.</summary>
 	<description>
 
 
 
 spaCy/spacy/tokens/doc.pyx
 
 
          Line 100
       in
       0de599b
 
 
 
 
 
 
  assert nr_defined == 1 
 
 
 
 
 
 	</description>
 	<comments>
 		<comment id='1' author='chandan2495' date='2018-04-03T10:24:03Z'>
 		Sorry about the lack of a clearer message here ‚Äì my PR in &lt;denchmark-link:https://github.com/explosion/spaCy/pull/2163&gt;#2163&lt;/denchmark-link&gt;
  actually addresses this, removes all the random s and replaces them with proper error messages and more information. (See &lt;denchmark-link:https://github.com/explosion/spaCy/pull/2163/files#diff-12839294d4cfa46801ac1f6075166f4bL100&gt;here&lt;/denchmark-link&gt;
  and &lt;denchmark-link:https://github.com/explosion/spaCy/pull/2163/files#diff-e05544161ef9df2b97bc6ee9e9732503R221&gt;here&lt;/denchmark-link&gt;
  for this specific case.)
 I also just noticed that the way we're checking the arguments here is bad ‚Äì you should in fact be able to define a getter and setter ‚Äì just not any other combinations. Will fix this, thanks! üëç
 Some more background on this, also in case others come across this issue later: spaCy supports &lt;denchmark-link:https://spacy.io/usage/processing-pipelines#custom-components-attributes&gt;three different types&lt;/denchmark-link&gt;
  of extension attributes:
 
 Attribute extensions with a default value, e.g. default=False.
 Property extensions with a getter and setter.
 Method extensions that make the extension attribute callable using the provided method.
 
 When you register an attribute, you'll need to decide which one it should be ‚Äì for example, you can't mix a getter and a default value or a method and a getter, because this would make it impossible for spaCy to know how to retrieve the value and which function to execute.
 		</comment>
 		<comment id='2' author='chandan2495' date='2018-05-07T17:52:57Z'>
 		This thread has been automatically locked since there has not been any recent activity after it was closed. Please open a new issue for related bugs.
 		</comment>
 	</comments>
 </bug>
<commit id='62b4b527d7a3d36dc041d648e3dbfcae30d0c5ed' author='ines' date='2018-04-03 18:30:17+02:00'>
 	<dmm_unit complexity='0.3793103448275862' interfacing='1.0' size='0.3793103448275862'></dmm_unit>
 	<modification change_type='MODIFY' old_name='spacy\errors.py' new_name='spacy\errors.py'>
 		<file_info nloc='272' complexity='13' token_count='926'></file_info>
 		<modified_lines>
 			<added_lines>221,222,236,237,238,239,240,241</added_lines>
 			<deleted_lines>221,222</deleted_lines>
 		</modified_lines>
 	</modification>
 	<modification change_type='MODIFY' old_name='spacy\tests\test_underscore.py' new_name='spacy\tests\test_underscore.py'>
 		<file_info nloc='73' complexity='8' token_count='699'></file_info>
 		<method name='test_underscore_raises_for_invalid' parameters='invalid_kwargs'>
 				<method_info nloc='4' complexity='1' token_count='42' nesting_level='0' start_line='79' end_line='82'></method_info>
 			<added_lines>79,80,81,82</added_lines>
 			<deleted_lines></deleted_lines>
 		</method>
 		<method name='test_underscore_accepts_valid' parameters='valid_kwargs'>
 				<method_info nloc='3' complexity='1' token_count='34' nesting_level='0' start_line='91' end_line='93'></method_info>
 			<added_lines>91,92,93</added_lines>
 			<deleted_lines></deleted_lines>
 		</method>
 		<method name='test_underscore_raises_for_dup' parameters='obj'>
 				<method_info nloc='4' complexity='1' token_count='33' nesting_level='0' start_line='67' end_line='70'></method_info>
 			<added_lines>67,68,69,70</added_lines>
 			<deleted_lines></deleted_lines>
 		</method>
 		<modified_lines>
 			<added_lines>1,2,3,4,6,7,8,61,62,63,64,65,66,71,72,73,74,75,76,77,78,83,84,85,86,87,88,89,90</added_lines>
 			<deleted_lines></deleted_lines>
 		</modified_lines>
 	</modification>
 	<modification change_type='MODIFY' old_name='spacy\tokens\doc.pyx' new_name='spacy\tokens\doc.pyx'>
 		<file_info nloc='None' complexity='None' token_count='None'></file_info>
 		<modified_lines>
 			<added_lines>36,98,99,100,101</added_lines>
 			<deleted_lines>36,98,99,100,101,102,103</deleted_lines>
 		</modified_lines>
 	</modification>
 	<modification change_type='MODIFY' old_name='spacy\tokens\span.pyx' new_name='spacy\tokens\span.pyx'>
 		<file_info nloc='None' complexity='None' token_count='None'></file_info>
 		<modified_lines>
 			<added_lines>20,26,27,28,29</added_lines>
 			<deleted_lines>20,26,27,28</deleted_lines>
 		</modified_lines>
 	</modification>
 	<modification change_type='MODIFY' old_name='spacy\tokens\token.pyx' new_name='spacy\tokens\token.pyx'>
 		<file_info nloc='None' complexity='None' token_count='None'></file_info>
 		<modified_lines>
 			<added_lines>24,31,32,33,34</added_lines>
 			<deleted_lines>24,31,32,33</deleted_lines>
 		</modified_lines>
 	</modification>
 	<modification change_type='MODIFY' old_name='spacy\tokens\underscore.py' new_name='spacy\tokens\underscore.py'>
 		<file_info nloc='57' complexity='23' token_count='562'></file_info>
 		<method name='get_ext_args' parameters='kwargs'>
 				<method_info nloc='18' complexity='11' token_count='219' nesting_level='0' start_line='59' end_line='77'></method_info>
 			<added_lines>59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77</added_lines>
 			<deleted_lines></deleted_lines>
 		</method>
 		<modified_lines>
 			<added_lines>57,58</added_lines>
 			<deleted_lines></deleted_lines>
 		</modified_lines>
 	</modification>
 </commit>
</bug_data>
