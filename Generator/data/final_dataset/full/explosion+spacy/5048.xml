<bug_data>
<bug id='5048' author='svlandeg' open_date='2020-02-21T20:53:25Z' closed_time='2020-03-02T10:49:29Z'>
 	<summary>get_doc not storing POS properly</summary>
 	<description>
 &lt;denchmark-h:h2&gt;How to reproduce the behaviour&lt;/denchmark-h&gt;
 
 &lt;denchmark-code&gt;
     words = ["This", "is", "a", "sentence"]
     pos_s = ["DET", "VERB", "DET", "NOUN"]
     spaces = [" ", " ", " ", ""]
     deps_s = ["dep", "adj", "nn", "atm"]
     tags_s = ["DT", "VBZ", "DT", "NN"]
 
     nlp = English()
     strings = nlp.vocab.strings
 
     for w in words:
         strings.add(w)
     deps = [strings.add(d) for d in deps_s]
     pos = [strings.add(p) for p in pos_s]
     tags = [strings.add(t) for t in tags_s]
 
     attrs = [POS, DEP, TAG]
     array = numpy.array(list(zip(pos, deps, tags)), dtype="uint64")
 
     doc = Doc(nlp.vocab, words=words, spaces=spaces)
     doc.from_array(attrs, array)
     print("1", [(token.text, token.pos_, token.tag_) for token in doc])
 
     doc2 = get_doc(nlp.vocab, words=words, pos=pos_s, deps=deps_s, tags=tags_s)
     print("2", [(token.text, token.pos_, token.tag_) for token in doc2])
 &lt;/denchmark-code&gt;
 
 output:
 &lt;denchmark-code&gt;1 [('This', 'DET', 'DT'), ('is', 'VERB', 'VBZ'), ('a', 'DET', 'DT'), ('sentence', 'NOUN', 'NN')]
 2 [('This', 'DET', 'DT'), ('is', 'AUX', 'VBZ'), ('a', 'DET', 'DT'), ('sentence', 'NOUN', 'NN')]
 &lt;/denchmark-code&gt;
 
 For the second token, the POS should be VERB, not AUX.
 Will be submitting a PR soon to fix this!
 	</description>
 	<comments>
 		<comment id='1' author='svlandeg' date='2020-04-02T14:49:11Z'>
 		This thread has been automatically locked since there has not been any recent activity after it was closed. Please open a new issue for related bugs.
 		</comment>
 	</comments>
 </bug>
<commit id='c6b12ab02adcdfe760bc10e249924553cb826410' author='Sofie Van Landeghem' date='2020-03-02 11:49:28+01:00'>
 	<dmm_unit complexity='0.0' interfacing='0.5' size='0.0'></dmm_unit>
 	<modification change_type='MODIFY' old_name='spacy\errors.py' new_name='spacy\errors.py'>
 		<file_info nloc='591' complexity='23' token_count='1864'></file_info>
 		<modified_lines>
 			<added_lines>110,111,112,547</added_lines>
 			<deleted_lines></deleted_lines>
 		</modified_lines>
 	</modification>
 	<modification change_type='MODIFY' old_name='spacy\pipeline\pipes.pyx' new_name='spacy\pipeline\pipes.pyx'>
 		<file_info nloc='None' complexity='None' token_count='None'></file_info>
 		<modified_lines>
 			<added_lines>370</added_lines>
 			<deleted_lines>370</deleted_lines>
 		</modified_lines>
 	</modification>
 	<modification change_type='MODIFY' old_name='spacy\tests\doc\test_doc_api.py' new_name='spacy\tests\doc\test_doc_api.py'>
 		<file_info nloc='261' complexity='48' token_count='2537'></file_info>
 		<method name='test_doc_from_array_sent_starts' parameters='en_vocab'>
 				<method_info nloc='28' complexity='7' token_count='296' nesting_level='0' start_line='276' end_line='308'></method_info>
 			<added_lines>279,281</added_lines>
 			<deleted_lines></deleted_lines>
 		</method>
 		<method name='test_doc_api_runtime_error' parameters='en_tokenizer'>
 				<method_info nloc='21' complexity='7' token_count='209' nesting_level='0' start_line='149' end_line='172'></method_info>
 			<added_lines>153,154,155</added_lines>
 			<deleted_lines>153,154,155,156</deleted_lines>
 		</method>
 		<modified_lines>
 			<added_lines></added_lines>
 			<deleted_lines></deleted_lines>
 		</modified_lines>
 	</modification>
 	<modification change_type='MODIFY' old_name='spacy\tests\doc\test_token_api.py' new_name='spacy\tests\doc\test_token_api.py'>
 		<file_info nloc='175' complexity='30' token_count='1946'></file_info>
 		<method name='test_token_api_conjuncts_simple' parameters='en_vocab'>
 				<method_info nloc='7' complexity='3' token_count='97' nesting_level='0' start_line='214' end_line='220'></method_info>
 			<added_lines>217</added_lines>
 			<deleted_lines>217</deleted_lines>
 		</method>
 		<modified_lines>
 			<added_lines></added_lines>
 			<deleted_lines></deleted_lines>
 		</modified_lines>
 	</modification>
 	<modification change_type='MODIFY' old_name='spacy\tests\parser\test_parse_navigate.py' new_name='spacy\tests\parser\test_parse_navigate.py'>
 		<file_info nloc='99' complexity='21' token_count='1259'></file_info>
 		<method name='heads' parameters=''>
 				<method_info nloc='18' complexity='1' token_count='725' nesting_level='0' start_line='35' end_line='53'></method_info>
 			<added_lines>37,38,39,40,41,42,43,44,45,46,47,48,49,50,52,53</added_lines>
 			<deleted_lines>37,38,39,40,41,42,43,44,45,46,47,48,49,50,52,53</deleted_lines>
 		</method>
 		<modified_lines>
 			<added_lines></added_lines>
 			<deleted_lines></deleted_lines>
 		</modified_lines>
 	</modification>
 	<modification change_type='MODIFY' old_name='spacy\tests\regression\test_issue2001-2500.py' new_name='spacy\tests\regression\test_issue2001-2500.py'>
 		<file_info nloc='101' complexity='17' token_count='917'></file_info>
 		<method name='test_issue2203' parameters='en_vocab'>
 				<method_info nloc='15' complexity='7' token_count='192' nesting_level='0' start_line='43' end_line='60'></method_info>
 			<added_lines>51</added_lines>
 			<deleted_lines>51</deleted_lines>
 		</method>
 		<modified_lines>
 			<added_lines></added_lines>
 			<deleted_lines></deleted_lines>
 		</modified_lines>
 	</modification>
 	<modification change_type='MODIFY' old_name='spacy\tests\regression\test_issue2501-3000.py' new_name='spacy\tests\regression\test_issue2501-3000.py'>
 		<file_info nloc='169' complexity='24' token_count='1381'></file_info>
 		<method name='test_issue2772' parameters='en_vocab'>
 				<method_info nloc='6' complexity='1' token_count='86' nesting_level='0' start_line='122' end_line='130'></method_info>
 			<added_lines>127</added_lines>
 			<deleted_lines>127</deleted_lines>
 		</method>
 		<modified_lines>
 			<added_lines></added_lines>
 			<deleted_lines></deleted_lines>
 		</modified_lines>
 	</modification>
 	<modification change_type='MODIFY' old_name='spacy\tests\regression\test_issue4590.py' new_name='spacy\tests\regression\test_issue4590.py'>
 		<file_info nloc='26' complexity='1' token_count='212'></file_info>
 		<method name='test_issue4590' parameters='en_vocab'>
 				<method_info nloc='22' complexity='1' token_count='191' nesting_level='0' start_line='9' end_line='38'></method_info>
 			<added_lines>30</added_lines>
 			<deleted_lines>30</deleted_lines>
 		</method>
 		<modified_lines>
 			<added_lines></added_lines>
 			<deleted_lines></deleted_lines>
 		</modified_lines>
 	</modification>
 	<modification change_type='ADD' old_name='None' new_name='spacy\tests\regression\test_issue5048.py'>
 		<file_info nloc='25' complexity='7' token_count='268'></file_info>
 	</modification>
 	<modification change_type='MODIFY' old_name='spacy\tests\test_displacy.py' new_name='spacy\tests\test_displacy.py'>
 		<file_info nloc='76' complexity='8' token_count='854'></file_info>
 		<method name='test_displacy_rtl' parameters=''>
 				<method_info nloc='15' complexity='1' token_count='162' nesting_level='0' start_line='70' end_line='86'></method_info>
 			<added_lines>78</added_lines>
 			<deleted_lines>78</deleted_lines>
 		</method>
 		<method name='test_displacy_parse_deps' parameters='en_vocab'>
 				<method_info nloc='20' complexity='1' token_count='253' nesting_level='0' start_line='23' end_line='43'></method_info>
 			<added_lines>34,35,36,37</added_lines>
 			<deleted_lines>34,35,36,37</deleted_lines>
 		</method>
 		<modified_lines>
 			<added_lines></added_lines>
 			<deleted_lines></deleted_lines>
 		</modified_lines>
 	</modification>
 	<modification change_type='MODIFY' old_name='spacy\tests\util.py' new_name='spacy\tests\util.py'>
 		<file_info nloc='101' complexity='49' token_count='904'></file_info>
 		<method name='get_doc' parameters='vocab,words,pos,heads,deps,tags,ents,lemmas'>
 				<method_info nloc='42' complexity='18' token_count='335' nesting_level='0' start_line='31' end_line='79'></method_info>
 			<added_lines>31,33,34,35,36,37,38,39,40,41,42,43,44,45,46,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73</added_lines>
 			<deleted_lines>31,32,33,34,35,39,40,41,42,43,44,50,51,52</deleted_lines>
 		</method>
 		<method name='get_doc' parameters='vocab,words,pos,heads,deps,tags,ents'>
 				<method_info nloc='23' complexity='11' token_count='251' nesting_level='0' start_line='29' end_line='53'></method_info>
 			<added_lines>31,33,34,35,36,37,38,39,40,41,42,43,44,45,46,50,51,52,53</added_lines>
 			<deleted_lines>29,31,32,33,34,35,39,40,41,42,43,44,50,51,52</deleted_lines>
 		</method>
 		<modified_lines>
 			<added_lines>10,11,13</added_lines>
 			<deleted_lines>11</deleted_lines>
 		</modified_lines>
 	</modification>
 	<modification change_type='MODIFY' old_name='spacy\tokens\doc.pyx' new_name='spacy\tokens\doc.pyx'>
 		<file_info nloc='None' complexity='None' token_count='None'></file_info>
 		<modified_lines>
 			<added_lines>788,789,877</added_lines>
 			<deleted_lines>875</deleted_lines>
 		</modified_lines>
 	</modification>
 </commit>
</bug_data>
