<bug_data>
<bug id='4538' author='kabirkhan' open_date='2019-10-28T04:50:34Z' closed_time='2019-10-28T15:16:53Z'>
 	<summary>Backport memory leak fix to patch spacy 2.0 and 2.1</summary>
 	<description>
 &lt;denchmark-h:h2&gt;Feature description&lt;/denchmark-h&gt;
 
 My team (and I assume a lot of other companies) are using spacy 2.0 and 2.1 in various places. We have A LOT of trained models in spacy 2.0 and 2.1. It would be great to have the fix &lt;denchmark-link:https://github.com/adrianeboyd&gt;@adrianeboyd&lt;/denchmark-link&gt;
  made here &lt;denchmark-link:https://github.com/explosion/spaCy/pull/4486&gt;#4486&lt;/denchmark-link&gt;
  for the memory leak ported back to the older versions as well since it's a really small change with a pretty huge impact.
 i.e. It's much easier to upgrade to spacy 2.1.9 from 2.1.8 rather than 2.2.2 and retrain all the models we have.
 Thanks!
 And not sure this counts as a feature request but didn't seem like a bug either haha.
 	</description>
 	<comments>
 		<comment id='1' author='kabirkhan' date='2019-10-28T08:29:08Z'>
 		It would be easy to backport this to 2.1. I'm less sure about 2.0 but I will look into it.
 		</comment>
 		<comment id='2' author='kabirkhan' date='2019-10-28T08:49:03Z'>
 		I had to double-check to be sure, but 2.0 is not affected by this bug. A quick analysis didn't find any similar memory leaks in 2.0.
 		</comment>
 		<comment id='3' author='kabirkhan' date='2019-10-28T11:19:40Z'>
 		Here's a v2.1.x branch that we can add this to and release from: &lt;denchmark-link:https://github.com/explosion/spaCy/tree/v2.1.x&gt;https://github.com/explosion/spaCy/tree/v2.1.x&lt;/denchmark-link&gt;
 
 		</comment>
 		<comment id='4' author='kabirkhan' date='2019-10-28T11:20:56Z'>
 		Definitely happy to support this. Do you see any other patches you want while you're there?
 Btw, a feature we haven't really advertised, but might be helpful for you: if you type "make" in the repo you'll get a dist/spacy.pex file. This is an executable that only depends on the Python interpreter on the system. When you run it it basically unzips a virtualenv and runs it --- it's like a jar file. So if you're using spaCy's CLI, it's a nice way to deploy.
 		</comment>
 		<comment id='5' author='kabirkhan' date='2019-10-28T15:16:53Z'>
 		&lt;denchmark-link:https://github.com/kabirkhan&gt;@kabirkhan&lt;/denchmark-link&gt;
  See &lt;denchmark-link:https://github.com/explosion/spaCy/pull/4542&gt;#4542&lt;/denchmark-link&gt;
 . v2.1.9 should be up soon â€“ just building the sdist and wheels 
 		</comment>
 		<comment id='6' author='kabirkhan' date='2019-10-28T17:17:43Z'>
 		...meant to comment here not the PR:
 Haha, our time difference is pretty evident here. Thank you all for the quick responses and for getting this out. Really appreciate the fast turnaround!
 		</comment>
 		<comment id='7' author='kabirkhan' date='2019-11-27T17:55:26Z'>
 		This thread has been automatically locked since there has not been any recent activity after it was closed. Please open a new issue for related bugs.
 		</comment>
 	</comments>
 </bug>
<commit id='d677f89c81d05adf4bead39806a95e08addbb1a0' author='adrianeboyd' date='2019-10-28 16:15:26+01:00'>
 	<dmm_unit complexity='None' interfacing='None' size='None'></dmm_unit>
 	<modification change_type='MODIFY' old_name='requirements.txt' new_name='requirements.txt'>
 		<file_info nloc='None' complexity='None' token_count='None'></file_info>
 		<modified_lines>
 			<added_lines>18</added_lines>
 			<deleted_lines>18</deleted_lines>
 		</modified_lines>
 	</modification>
 	<modification change_type='MODIFY' old_name='spacy\syntax\_parser_model.pxd' new_name='spacy\syntax\_parser_model.pxd'>
 		<file_info nloc='None' complexity='None' token_count='None'></file_info>
 		<modified_lines>
 			<added_lines>39,40,41</added_lines>
 			<deleted_lines>39</deleted_lines>
 		</modified_lines>
 	</modification>
 	<modification change_type='MODIFY' old_name='spacy\syntax\_parser_model.pyx' new_name='spacy\syntax\_parser_model.pyx'>
 		<file_info nloc='None' complexity='None' token_count='None'></file_info>
 		<modified_lines>
 			<added_lines>65,66,67,68,69,70,71,72,73,74,75,76,77,78,79</added_lines>
 			<deleted_lines></deleted_lines>
 		</modified_lines>
 	</modification>
 	<modification change_type='MODIFY' old_name='spacy\syntax\nn_parser.pyx' new_name='spacy\syntax\nn_parser.pyx'>
 		<file_info nloc='None' complexity='None' token_count='None'></file_info>
 		<modified_lines>
 			<added_lines>30,31,310,324</added_lines>
 			<deleted_lines>30,309,310</deleted_lines>
 		</modified_lines>
 	</modification>
 </commit>
</bug_data>
