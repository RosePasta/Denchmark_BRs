<bug_data>
<bug id='6148' author='delzac' open_date='2020-09-25T12:15:42Z' closed_time='2020-10-31T11:18:48Z'>
 	<summary>Matcher.remove crashes if {"OP": "!"} token is in any pattern of any rule</summary>
 	<description>
 &lt;denchmark-h:h2&gt;How to reproduce the behaviour&lt;/denchmark-h&gt;
 
 &lt;denchmark-code&gt;nlp = en_core_web_sm.load()
 matcher = Matcher(nlp.vocab)
 
 offending_pattern = [{'OP': '!'}, ]
 matcher.add('test-rule', [offending_pattern ])
 matcher.add('random-rule', [[{"LOWER": "hi"}]])
 assert 'random-rule' in matcher
 matcher.remove('random-rule')  # crashes here: "Process finished with exit code -1073741819 (0xC0000005)"
 assert 'random-rule' not in matcher
 
 &lt;/denchmark-code&gt;
 
 When {"OP": "!"} is inside any pattern, removing any rules will result in program crashing "Process finished with exit code -1073741819 (0xC0000005)"
 &lt;denchmark-h:h2&gt;Your Environment&lt;/denchmark-h&gt;
 
 
 Operating System: Windows 10
 Python Version Used: Python 3.6
 spaCy Version Used: Spacy v2.3.2
 Environment Information: nil
 
 	</description>
 	<comments>
 		<comment id='1' author='delzac' date='2020-09-28T11:15:07Z'>
 		Hi, I can replicate this and we will look into it.
 		</comment>
 	</comments>
 </bug>
<commit id='45c9a688285081cd69faa0627d9bcaf1f5e799a1' author='Adriane Boyd' date='2020-10-31 12:18:48+01:00'>
 	<dmm_unit complexity='1.0' interfacing='1.0' size='1.0'></dmm_unit>
 	<modification change_type='MODIFY' old_name='spacy\matcher\matcher.pxd' new_name='spacy\matcher\matcher.pxd'>
 		<file_info nloc='None' complexity='None' token_count='None'></file_info>
 		<modified_lines>
 			<added_lines>29</added_lines>
 			<deleted_lines></deleted_lines>
 		</modified_lines>
 	</modification>
 	<modification change_type='MODIFY' old_name='spacy\matcher\matcher.pyx' new_name='spacy\matcher\matcher.pyx'>
 		<file_info nloc='None' complexity='None' token_count='None'></file_info>
 		<modified_lines>
 			<added_lines>561,600,601,602,603,606,613</added_lines>
 			<deleted_lines>561,600,601,604,611,612,613,614,615,616,617,618,619,620,621,622,623,624,625,626,627,628,629</deleted_lines>
 		</modified_lines>
 	</modification>
 	<modification change_type='MODIFY' old_name='spacy\tests\matcher\test_matcher_api.py' new_name='spacy\tests\matcher\test_matcher_api.py'>
 		<file_info nloc='397' complexity='42' token_count='3534'></file_info>
 		<method name='test_matcher_remove_zero_operator' parameters='en_vocab'>
 				<method_info nloc='10' complexity='1' token_count='78' nesting_level='0' start_line='484' end_line='493'></method_info>
 			<added_lines>484,485,486,487,488,489,490,491,492,493</added_lines>
 			<deleted_lines></deleted_lines>
 		</method>
 		<modified_lines>
 			<added_lines>482,483</added_lines>
 			<deleted_lines></deleted_lines>
 		</modified_lines>
 	</modification>
 </commit>
</bug_data>
