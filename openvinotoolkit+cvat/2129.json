{"BR": {"BR_id": "2129", "BR_author": "hixz00", "BRopenT": "2020-09-04T11:55:25Z", "BRcloseT": "2020-10-12T11:02:41Z", "BR_text": {"BRsummary": "Tracks end on last key frame in export even though they are shown in CVAT UI", "BRdescription": "\n I've experienced a problem with the exported xml, CVAT-for-videos. For some objects it will end the track at the latest keyframe. It happens at every export from this task but it's not consistent that all tracks ends on a keyframe. In CVAT UI the object is still there all the way to the end of the video but in the export it disappears at the last keyframe. I haven't been able to create a new task with the same behaviour but one way to fix the problem, and maybe understand what's causing it, is to export the annotation and then import it and finally exporting it again. When this is done all tracks continue to the end of the video regardless of keyframe or not. One lead could be that this video was annotated in old ui.\n <denchmark-h:h3>My actions before raising this issue</denchmark-h>\n \n \n  Read/searched the docs\n  Searched past issues\n \n <denchmark-h:h3>Expected Behaviour</denchmark-h>\n \n Tracks that show up as objects in CVAT should show up in the exported CVAT for videos XML.\n <denchmark-h:h3>Current Behaviour</denchmark-h>\n \n All annotated objects shown in the UI should be exported, regardless of keyframe or not.\n <denchmark-h:h3>Possible Solution</denchmark-h>\n \n A work around is to export, import and export it again.\n <denchmark-h:h3>Steps to Reproduce (for bugs)</denchmark-h>\n \n Not a proper reproduce but it shows that the import will extend the track and the next export will have tracks that continues to the end of the video.\n \n Verify that track 138 in first_export.xml ends on frame 3454\n Create a new task with a video in proper length\n Import the XML to the new task\n Export the new task\n Verify that the track that previously ended at frame 3454 now continue to the last frame, 3499. Attached is such an export, the new id of the track is 103.\n \n <denchmark-h:h3>Context</denchmark-h>\n \n It's not sure that the objects seen in the annotation will show up in the exported XML file.\n <denchmark-link:https://github.com/opencv/cvat/files/5174653/exported_xml.zip>exported_xml.zip</denchmark-link>\n \n <denchmark-h:h3>Your Environment</denchmark-h>\n \n \n Git hash commit (git log -1):  07de714 (tag: v1.0.0, upstream/master) Release 1.0.0 (#1335)\n Docker version docker version (e.g. Docker 17.0.05): 19.03.8\n Are you using Docker Swarm or Kubernetes?No\n Operating System and version (e.g. Linux, Windows, MacOS):\u200b linux Ubuntu 18.04.4 LTS\n Code example or link to GitHub repo or gist to reproduce problem:\n Other diagnostic information / logs:\n   \n Logs from `cvat` container\n \n \n \n <denchmark-h:h3>Next steps</denchmark-h>\n \n You may <denchmark-link:https://gitter.im/opencv-cvat/public>join our Gitter</denchmark-link>\n  channel for community support.\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "hixz00", "commentT": "2020-09-12T04:24:15Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/zhiltsov-max>@zhiltsov-max</denchmark-link>\n  , could you please look at the issue?\n \t\t"}}}, "commit": {"commit_id": "d4129f2868f2a56f41fd1f2fd23f0fe3ab8b6277", "commit_author": "Maxim Zhiltsov", "commitT": "2020-10-12 14:02:39+03:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "CHANGELOG.md", "file_new_name": "CHANGELOG.md", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "30,40,63,64", "deleted_lines": "32,50"}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "cvat\\apps\\dataset_manager\\annotation.py", "file_new_name": "cvat\\apps\\dataset_manager\\annotation.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "749", "deleted_lines": "732,750,751,752", "method_info": {"method_name": "get_interpolated_shapes", "method_params": "track,start_frame,end_frame", "method_startline": "448", "method_endline": "756"}}}}, "file_2": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "cvat\\apps\\dataset_manager\\formats\\README.md", "file_new_name": "cvat\\apps\\dataset_manager\\formats\\README.md", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "16,712,713,746,747,748,749,750,751,752,753,754,755,756,757,758,759,760,761,762,763,764,765,766,767,768,769,770,771,772,773,774,775,776,777", "deleted_lines": "711,712"}}}, "file_3": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "cvat\\apps\\dataset_manager\\formats\\mot.py", "file_new_name": "cvat\\apps\\dataset_manager\\formats\\mot.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "82,83,84,85,86,87,88,89,90,91,92,93,94,95", "deleted_lines": null, "method_info": {"method_name": "_import", "method_params": "src_file,task_data", "method_startline": "28", "method_endline": "103"}}}}, "file_4": {"file_change_type": "ADD", "file_Nmethod": 0, "file_old_name": "None", "file_new_name": "cvat\\apps\\dataset_manager\\formats\\mots.py"}, "file_5": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "cvat\\apps\\dataset_manager\\formats\\registry.py", "file_new_name": "cvat\\apps\\dataset_manager\\formats\\registry.py", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "90", "deleted_lines": null}}}, "file_6": {"file_change_type": "MODIFY", "file_Nmethod": 5, "file_old_name": "cvat\\apps\\dataset_manager\\tests\\test_annotation.py", "file_new_name": "cvat\\apps\\dataset_manager\\tests\\test_annotation.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "157,158,159,160,161,162,163,164,168", "deleted_lines": "137,138,139,140,141", "method_info": {"method_name": "test_line_interpolation", "method_params": "self", "method_startline": "133", "method_endline": "168"}}, "hunk_1": {"Ismethod": 1, "added_lines": "46,47,48,49,50,51,52,53,57", "deleted_lines": "38,39,40,41,42", "method_info": {"method_name": "test_point_interpolation", "method_params": "self", "method_startline": "22", "method_endline": "57"}}, "hunk_2": {"Ismethod": 1, "added_lines": "120,121,122,123,124,125,126,127,131", "deleted_lines": "104,105,106,107,108", "method_info": {"method_name": "test_bbox_interpolation", "method_params": "self", "method_startline": "96", "method_endline": "131"}}, "hunk_3": {"Ismethod": 1, "added_lines": "83,84,85,86,87,88,89,90,94", "deleted_lines": "71,72,73,74,75", "method_info": {"method_name": "test_polygon_interpolation", "method_params": "self", "method_startline": "59", "method_endline": "94"}}, "hunk_4": {"Ismethod": 1, "added_lines": "11,12,13,14,15,16,17,18,19,20", "deleted_lines": null, "method_info": {"method_name": "_check_interpolation", "method_params": "self,track", "method_startline": "11", "method_endline": "20"}}}}, "file_7": {"file_change_type": "MODIFY", "file_Nmethod": 3, "file_old_name": "cvat\\apps\\dataset_manager\\tests\\test_formats.py", "file_new_name": "cvat\\apps\\dataset_manager\\tests\\test_formats.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "321", "deleted_lines": null, "method_info": {"method_name": "test_empty_images_are_exported", "method_params": "self", "method_startline": "311", "method_endline": "357"}}, "hunk_1": {"Ismethod": 1, "added_lines": "286", "deleted_lines": null, "method_info": {"method_name": "test_import_formats_query", "method_params": "self", "method_startline": "277", "method_endline": "291"}}, "hunk_2": {"Ismethod": 1, "added_lines": "270", "deleted_lines": null, "method_info": {"method_name": "test_export_formats_query", "method_params": "self", "method_startline": "259", "method_endline": "275"}}}}, "file_8": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "cvat\\apps\\engine\\tests\\test_rest_api.py", "file_new_name": "cvat\\apps\\engine\\tests\\test_rest_api.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "3186,3187,3188,3189,3190,3191,3192,3193,3194,3195,3196,3197,3198,3199,3200,3201,3202,3203,3204,3205,3206,3207,3208,3209,3210,3211,3212,3213,3214,3215,3216,3217,3218,3323,3324,3325,3328,3329,3330,3331,3346,3347,3354,3355,3356,3358,3359,3360,3361,3364,3365,3366,3367", "deleted_lines": "3290,3293,3294,3309,3317,3318,3319,3320,3323,3324,3325,3326", "method_info": {"method_name": "_run_api_v1_tasks_id_annotations_dump_load._get_initial_annotation", "method_params": "annotation_format", "method_startline": "3099", "method_endline": "3373"}}, "hunk_1": {"Ismethod": 1, "added_lines": "3186,3187,3188,3189,3190,3191,3192,3193,3194,3195,3196,3197,3198,3199,3200,3201,3202,3203,3204,3205,3206,3207,3208,3209,3210,3211,3212,3213,3214,3215,3216,3217,3218,3323,3324,3325,3328,3329,3330,3331,3346,3347,3354,3355,3356,3358,3359,3360,3361,3364,3365,3366,3367,3466", "deleted_lines": "3290,3293,3294,3309,3317,3318,3319,3320,3323,3324,3325,3326,3425", "method_info": {"method_name": "_run_api_v1_tasks_id_annotations_dump_load", "method_params": "self,owner,assignee,annotator", "method_startline": "3087", "method_endline": "3474"}}}}}}}