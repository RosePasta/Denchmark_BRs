{"BR": {"BR_id": "731", "BR_author": "jinserk", "BRopenT": "2018-01-31T14:48:03Z", "BRcloseT": "2018-01-31T23:01:12Z", "BR_text": {"BRsummary": "another error in ss_vae_M2.py", "BRdescription": "\n As running ss_vae_M2.py in the latest pyro and latest pytorch, I have another error if --aux-loss is on:\n <denchmark-code>Traceback (most recent call last):\n   File \"/home/jbaik/.pyenv/versions/3.6.4/lib/python3.6/site-packages/pyro_ppl-0.1.2-py3.6.egg/pyro/poutine/trace.py\", line 81, in log_pdf\n     site_log_p = site[\"log_pdf\"]\n KeyError: 'log_pdf'\n \n During handling of the above exception, another exception occurred:\n \n Traceback (most recent call last):\n   File \"ss_vae_M2.py\", line 453, in <module>\n     run_inference_ss_vae(args)\n   File \"ss_vae_M2.py\", line 360, in run_inference_ss_vae\n     run_inference_for_epoch(data_loaders, losses, periodic_interval_batches)\n   File \"ss_vae_M2.py\", line 254, in run_inference_for_epoch\n     new_loss = losses[loss_id].step(xs, ys)\n   File \"/home/jbaik/.pyenv/versions/3.6.4/lib/python3.6/site-packages/pyro_ppl-0.1.2-py3.6.egg/pyro/infer/svi.py\", line 98, in step\n     loss = self.loss_and_grads(self.model, self.guide, *args, **kwargs)\n   File \"/home/jbaik/.pyenv/versions/3.6.4/lib/python3.6/site-packages/pyro_ppl-0.1.2-py3.6.egg/pyro/infer/elbo.py\", line 65, in loss_and_grads\n     return self.which_elbo.loss_and_grads(model, guide, *args, **kwargs)\n   File \"/home/jbaik/.pyenv/versions/3.6.4/lib/python3.6/site-packages/pyro_ppl-0.1.2-py3.6.egg/pyro/infer/trace_elbo.py\", line 146, in loss_and_grads\n     for weight, model_trace, guide_trace, log_r in self._get_traces(model, guide, *args, **kwargs):\n   File \"/home/jbaik/.pyenv/versions/3.6.4/lib/python3.6/site-packages/pyro_ppl-0.1.2-py3.6.egg/pyro/infer/trace_elbo.py\", line 95, in _get_traces\n     log_r = model_trace.log_pdf() - guide_trace.log_pdf()\n   File \"/home/jbaik/.pyenv/versions/3.6.4/lib/python3.6/site-packages/pyro_ppl-0.1.2-py3.6.egg/pyro/poutine/trace.py\", line 85, in log_pdf\n     site[\"value\"], *args, **kwargs).sum() * site[\"scale\"]\n   File \"/home/jbaik/.pyenv/versions/3.6.4/lib/python3.6/site-packages/pyro_ppl-0.1.2-py3.6.egg/pyro/distributions/random_primitive.py\", line 52, in log_prob\n     return self.dist_class(*args, **kwargs).log_prob(x)\n   File \"/home/jbaik/.pyenv/versions/3.6.4/lib/python3.6/site-packages/pyro_ppl-0.1.2-py3.6.egg/pyro/distributions/torch_wrapper.py\", line 48, in log_prob\n     assert len(self.log_pdf_mask.size()) <= len(log_prob.size())\n AttributeError: 'int' object has no attribute 'size'\n </denchmark-code>\n \n Could you take a look for this too? I couldn't reopen the closed issue <denchmark-link:https://github.com/pyro-ppl/pyro/issues/725>#725</denchmark-link>\n  so have opened a new issue here.\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "jinserk", "commentT": "2018-01-31T16:14:00Z", "comment_text": "\n \t\tThanks for the bug report, I'll take a look later today.\n \t\t"}}}, "commit": {"commit_id": "d0856da803b698835172f1be275b7f3de9e55c66", "commit_author": "Fritz Obermeyer", "commitT": "2018-01-31 15:01:11-08:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "examples\\ss_vae_M2.py", "file_new_name": "examples\\ss_vae_M2.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "191,192", "deleted_lines": "191,192", "method_info": {"method_name": "model_classify", "method_params": "self,xs,ys", "method_startline": "176", "method_endline": "192"}}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "tests\\test_examples.py", "file_new_name": "tests\\test_examples.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "34,35,36", "deleted_lines": "34,35", "method_info": {"method_name": "discover_examples", "method_params": "", "method_startline": "15", "method_endline": "40"}}}}}}}