{"BR": {"BR_id": "1852", "BR_author": "sameerkhurana10", "BRopenT": "2019-05-06T23:53:29Z", "BRcloseT": "2019-06-06T00:08:13Z", "BR_text": {"BRsummary": "vae comparison example giving different results for Pyro and PyTorch implementations", "BRdescription": "\n Hi,\n Pyro version: 3.3\n PyTorch: 1.1\n Running examples/vae/vae_comparison.py\n With PyTorch:\n <denchmark-code>downloading data\n download complete.\n downloading data\n download complete.\n Running PyTorch VAE implementation\n ====> Epoch: 0 \n Training loss: 0.0022\n Test set loss: 0.0027\n ====> Epoch: 1 \n Training loss: 0.0021\n Test set loss: 0.0024\n ====> Epoch: 2 \n Training loss: 0.0021\n Test set loss: 0.0022\n ====> Epoch: 3 \n Training loss: 0.0021\n Test set loss: 0.0021\n ====> Epoch: 4 \n Training loss: 0.0021\n Test set loss: 0.0021\n ====> Epoch: 5 \n Training loss: 0.0021\n Test set loss: 0.0021\n ====> Epoch: 6 \n Training loss: 0.0021\n Test set loss: 0.0021\n ====> Epoch: 7 \n Training loss: 0.0021\n Test set loss: 0.0021\n ====> Epoch: 8 \n Training loss: 0.0021\n Test set loss: 0.0021\n ====> Epoch: 9 \n Training loss: 0.0021\n Test set loss: 0.0021\n </denchmark-code>\n \n With Pyro:\n <denchmark-code>downloading data\n download complete.\n downloading data\n download complete.\n Running Pyro VAE implementation\n ====> Epoch: 0 \n Training loss: 0.0017\n Test set loss: 0.0013\n ====> Epoch: 1 \n Training loss: 0.0012\n Test set loss: 0.0012\n ====> Epoch: 2 \n Training loss: 0.0011\n Test set loss: 0.0011\n ====> Epoch: 3 \n Training loss: 0.0011\n Test set loss: 0.0011\n ====> Epoch: 4 \n Training loss: 0.0011\n Test set loss: 0.0011\n ====> Epoch: 5 \n Training loss: 0.0011\n Test set loss: 0.0011\n ====> Epoch: 6 \n Training loss: 0.0011\n Test set loss: 0.0011\n ====> Epoch: 7 \n Training loss: 0.0011\n Test set loss: 0.0011\n ====> Epoch: 8 \n Training loss: 0.0011\n Test set loss: 0.0011\n ====> Epoch: 9 \n Training loss: 0.0011\n Test set loss: 0.0011\n </denchmark-code>\n \n Is this difference expected?\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "sameerkhurana10", "commentT": "2019-05-07T01:10:24Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/neerajprad>@neerajprad</denchmark-link>\n  shouldn't it be  here: <denchmark-link:https://github.com/pyro-ppl/pyro/blob/dev/examples/vae/vae_comparison.py#L106>https://github.com/pyro-ppl/pyro/blob/dev/examples/vae/vae_comparison.py#L106</denchmark-link>\n \n Changing that line gives the following:\n <denchmark-code>downloading data\n download complete.\n downloading data\n download complete.\n Running PyTorch VAE implementation\n ====> Epoch: 0 \n Training loss: 0.0016\n Test set loss: 0.0012\n ====> Epoch: 1 \n Training loss: 0.0012\n Test set loss: 0.0011\n ====> Epoch: 2 \n Training loss: 0.0011\n Test set loss: 0.0010\n ====> Epoch: 3 \n Training loss: 0.0011\n Test set loss: 0.0010\n ====> Epoch: 4 \n Training loss: 0.0011\n Test set loss: 0.0010\n ====> Epoch: 5 \n Training loss: 0.0011\n Test set loss: 0.0010\n ====> Epoch: 6 \n Training loss: 0.0011\n Test set loss: 0.0010\n </denchmark-code>\n \n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "sameerkhurana10", "commentT": "2019-05-07T01:23:42Z", "comment_text": "\n \t\tGood catch! That is being called from compute_loss_and_gradient in the PyTorch implementation. I was under the impression that its only being used during evaluation. Do you mind submitting your fix in a PR? \ud83d\ude42\n \t\t"}}}, "commit": {"commit_id": "8aa2ff3edae4081b36ccb443f651f2e018419a0e", "commit_author": "Neeraj Pradhan", "commitT": "2019-06-05 17:08:11-07:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "examples\\vae\\vae_comparison.py", "file_new_name": "examples\\vae\\vae_comparison.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "106", "deleted_lines": "106", "method_info": {"method_name": "model_eval", "method_params": "self,x", "method_startline": "96", "method_endline": "109"}}}}}}}