{"BR": {"BR_id": "1078", "BR_author": "PieroV", "BRopenT": "2019-07-18T22:35:48Z", "BRcloseT": "2019-07-19T15:02:29Z", "BR_text": {"BRsummary": "UniformTSDFVolume::Reset does not clear voxels", "BRdescription": "\n Describe the bug\n Calling UniformTSDFVolume::Reset won't actually reset the volume\n To Reproduce\n \n Create a UniformTSDFVolume and integrate some frames\n Call volume.Reset();\n Visualize somehow the volume, e.g. open3d::visualization::DrawGeometries({ volume.ExtractPointCloud() });\n \n Expected behavior\n I expect the volume to be empty.\n In the previous example, I would expect an empty visualization window, but I still see the content up to the frames I integrated.\n Environment (please complete the following information):\n \n OS: Debian Testing (11/Bullseye)\n Python version: 3.7.3 (but tested in C++)\n Open3D version: last git commit\n Is this remote workstation?: no\n How did you install Open3D? build_from_source (GCC (Debian 8.3.0-6) 8.3.0)\n \n Additional context\n I think that overriding the Clear method also in TSDFVoxel (in src/Open3D/Integration/UniformTSDFVolume.h) would solve this. The problem is that the voxels_ member is redefined, so the Clear of Voxel just clears its own voxels, but not the ones of the child class.\n As a temporary solution I managed to solve the problem by calling volume.voxel_grid_.voxels_.clear(); before volume.Reset();.\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "PieroV", "commentT": "2019-07-19T10:38:48Z", "comment_text": "\n \t\tThanks <denchmark-link:https://github.com/PieroV>@PieroV</denchmark-link>\n , fixed in <denchmark-link:https://github.com/intel-isl/Open3D/pull/1079>#1079</denchmark-link>\n . This is a design flaw.\n \t\t"}}}, "commit": {"commit_id": "69ea7011d7e9209fb871ae39b38b6c9f6c85c929", "commit_author": "Yixing Lao", "commitT": "2019-07-19 08:02:28-07:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 3, "file_old_name": "src\\Open3D\\Integration\\ScalableTSDFVolume.cpp", "file_new_name": "src\\Open3D\\Integration\\ScalableTSDFVolume.cpp", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "425,438", "deleted_lines": "441", "method_info": {"method_name": "open3d::integration::ScalableTSDFVolume::GetTSDFAt", "method_params": "p", "method_startline": "398", "method_endline": "446"}}, "hunk_1": {"Ismethod": 1, "added_lines": "241,243,246,247,252,253,269,270,272,273,277,278,283,284", "deleted_lines": "249,250,252,253,256,257,258,263,264,265,281,282,283,285,286,287,291,292,293,298,299,300", "method_info": {"method_name": "open3d::integration::ScalableTSDFVolume::ExtractTriangleMesh", "method_params": "", "method_startline": "212", "method_endline": "359"}}, "hunk_2": {"Ismethod": 1, "added_lines": "122,123,125,143,145,149,150,162,163,165,166,170,171,172,173", "deleted_lines": "122,123,124,125,127,128,146,147,149,150,154,155,156,168,169,170,172,173,174,178,179,180,181", "method_info": {"method_name": "open3d::integration::ScalableTSDFVolume::ExtractPointCloud", "method_params": "", "method_startline": "109", "method_endline": "209"}}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 8, "file_old_name": "src\\Open3D\\Integration\\UniformTSDFVolume.cpp", "file_new_name": "src\\Open3D\\Integration\\UniformTSDFVolume.cpp", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "170,174,179,182", "deleted_lines": "178,182,187,188,191,192", "method_info": {"method_name": "open3d::integration::UniformTSDFVolume::ExtractTriangleMesh", "method_params": "", "method_startline": "149", "method_endline": "232"}}, "hunk_1": {"Ismethod": 1, "added_lines": "271,272", "deleted_lines": "262,281,282", "method_info": {"method_name": "open3d::integration::UniformTSDFVolume::ExtractVoxelGrid", "method_params": "", "method_startline": "261", "method_endline": "283"}}, "hunk_2": {"Ismethod": 1, "added_lines": "51", "deleted_lines": "51,52", "method_info": {"method_name": "open3d::integration::UniformTSDFVolume::UniformTSDFVolume", "method_params": "length,resolution,sdf_trunc,color_type,origin", "method_startline": "40", "method_endline": "52"}}, "hunk_3": {"Ismethod": 1, "added_lines": "56", "deleted_lines": null, "method_info": {"method_name": "open3d::integration::UniformTSDFVolume::Reset", "method_params": "", "method_startline": "56", "method_endline": "56"}}, "hunk_4": {"Ismethod": 1, "added_lines": "398,400,402,404,406,408,410,412", "deleted_lines": "409,411,413", "method_info": {"method_name": "open3d::integration::UniformTSDFVolume::GetTSDFAt", "method_params": "p", "method_startline": "388", "method_endline": "414"}}, "hunk_5": {"Ismethod": 1, "added_lines": "346,347,349,354,355,356,358,362,363,364,366,368", "deleted_lines": "356,357,358,360,365,366,367,369,373", "method_info": {"method_name": "open3d::integration::UniformTSDFVolume::IntegrateWithDepthToCameraDistanceMultiplier", "method_params": "image,intrinsic,extrinsic,depth_to_camera_distance_multiplier", "method_startline": "285", "method_endline": "373"}}, "hunk_6": {"Ismethod": 1, "added_lines": "248,249,250,252", "deleted_lines": "258,259", "method_info": {"method_name": "open3d::integration::UniformTSDFVolume::ExtractVoxelPointCloud", "method_params": "", "method_startline": "235", "method_endline": "259"}}, "hunk_7": {"Ismethod": 1, "added_lines": "99,100,101,115,116,118", "deleted_lines": "106,107,108,109,123,124,126", "method_info": {"method_name": "open3d::integration::UniformTSDFVolume::ExtractPointCloud", "method_params": "", "method_startline": "92", "method_endline": "146"}}}}, "file_2": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "src\\Open3D\\Integration\\UniformTSDFVolume.h", "file_new_name": "src\\Open3D\\Integration\\UniformTSDFVolume.h", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "91", "deleted_lines": "49,50,51,52,53,96"}}}, "file_3": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "src\\UnitTest\\Integration\\UniformTSDFVolume.cpp", "file_new_name": "src\\UnitTest\\Integration\\UniformTSDFVolume.cpp", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "96", "deleted_lines": "96,97", "method_info": {"method_name": "TEST", "method_params": "UniformTSDFVolume,Constructor", "method_startline": "77", "method_endline": "97"}}}}}}}