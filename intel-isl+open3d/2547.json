{"BR": {"BR_id": "2547", "BR_author": "IvanCobotic", "BRopenT": "2020-10-27T11:23:35Z", "BRcloseT": "2020-11-05T01:36:14Z", "BR_text": {"BRsummary": "RGBA png files are no longer supported in open3d.geometry.PointCloud.create_from_depth_image in v0.11.x", "BRdescription": "\n IMPORTANT: Please use the following template to report the bug.\n <denchmark-h:hr></denchmark-h>\n \n Describe the bug\n In Open3D <v0.11.0 it was possible to read 4 channel RGBA png files with o3d.io.read_image(..) and then use the image to create a RGBDImage and later create a pointcloud with o3d.geometry.PointCloud.create_from_rgbd_image\n This worked because o3d.io.read_image discarded the alpha channel and loaded the image as a 3 channel RGB image.\n In v0.11.0 the behaviour of o3d.io.read_image() is changed so Open3D (correctly) reads a RGBA png file as a 4 channel image.\n However, this causes the subsequent call to o3d.geometry.PointCloud.create_from_rgbd_image() to fail with error message\n RuntimeError: [Open3D ERROR] [CreatePointCloudFromRGBDImage] Unsupported image format.\n the reason is that o3d.geometry.PointCloud.create_from_rgbd_image has a check that only allows color images with exactly 1 or 3 channels, ie a RGBA image generates an error.\n It seems logical that RGBA images should be supported when generating point clouds, although im not sure if this is a missing feature or a bug. It did however work in v0.10.0 and stopped working in v0.11.0\n To Reproduce\n intrinsic_o3d = intrinsic parameters for image used\n rgb_path = path to RGBA png image\n color_raw_rgba = o3d.io.read_image(rgb_path)\n depth_raw = o3d.io.read_image(depth_path)\n rgbd_image = o3d.geometry.RGBDImage.create_from_color_and_depth(\n color_raw_rgba, depth_raw)\n pcd = o3d.geometry.PointCloud.create_from_rgbd_image(\n rgbd_image,\n intrinsic_o3d)\n in v0.10.0\n this works (color_raw_rgba will have 3 channels, alpha channel is omitted)\n in v0.11.0/v0.11.1\n RuntimeError: [Open3D ERROR] [CreatePointCloudFromRGBDImage] Unsupported image format.\n Expected behavior\n If RGBA images are supported when reading an image it should be supported when generating point clouds with RGBD image pairs.\n Additional context\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "IvanCobotic", "commentT": "2020-11-03T02:00:13Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/errissa>@errissa</denchmark-link>\n  could you please take a look at this?\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "IvanCobotic", "commentT": "2020-11-04T18:35:20Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/IvanCobotic>@IvanCobotic</denchmark-link>\n  PR <denchmark-link:https://github.com/intel-isl/Open3D/pull/2577>#2577</denchmark-link>\n  addresses this issue.\n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "IvanCobotic", "commentT": "2020-11-05T01:36:14Z", "comment_text": "\n \t\tCurrent master has the fix for this issue.\n \t\t"}}}, "commit": {"commit_id": "6f9ebc5abda18635a278b3ae2e10e92d85aa8c79", "commit_author": "Rene", "commitT": "2020-11-04 14:34:54-08:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "cpp\\open3d\\geometry\\PointCloudFactory.cpp", "file_new_name": "cpp\\open3d\\geometry\\PointCloudFactory.cpp", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "186,187,188,189", "deleted_lines": null, "method_info": {"method_name": "open3d::geometry::PointCloud::CreateFromRGBDImage", "method_params": "image,intrinsic,extrinsic,project_valid_depth_only", "method_startline": "175", "method_endline": "199"}}}}}}}