{"BR": {"BR_id": "3236", "BR_author": "jeffrson", "BRopenT": "2020-05-08T19:36:11Z", "BRcloseT": "2020-05-10T18:14:45Z", "BR_text": {"BRsummary": "tfjs-node does not work with Node14 or Node 12 &gt;= 12.17", "BRdescription": "\n <denchmark-h:h4>TensorFlow.js version</denchmark-h>\n \n 1.7.4\n <denchmark-h:h4>Describe the problem or feature request</denchmark-h>\n \n This is due to the new N-API-Version '6' which is missing from package.json.\n The library builds apparently without issues (as N-API '5'), but the install.js script fails to symlink or copy tensorflow.dll (because folder for N-API '6' does not exist).\n <denchmark-h:h4>Code to reproduce the bug / link to feature request</denchmark-h>\n \n With node14:\n yarn init -y\n yarn add \"@tensorflow/tfjs-node\" (also with \"-gpu\")\n node -r \"@tensorflow/tfjs-node\"\n dir \".\\node_modules@tensorflow\\tfjs-node\\lib\"\n dir \".\\node_modules@tensorflow\\tfjs-node\\lib\\napi-v5\"\n jq .binary.napi_versions \".\\node_modules@tensorflow\\tfjs-node\\package.json\"\n (misses version 6)\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "jeffrson", "commentT": "2020-05-10T11:49:27Z", "comment_text": "\n \t\tSame goes for node v13.12.0\n <denchmark-code>gyp ERR! configure error\n gyp ERR! stack Error: `gyp` failed with exit code: 1\n gyp ERR! stack     at ChildProcess.onCpExit (C:\\Users\\Admin\\AppData\\Roaming\\npm\\node_modules\\node-gyp\\lib\\configure.js:351:16)\n gyp ERR! stack     at ChildProcess.emit (events.js:315:20)\n gyp ERR! stack     at Process.ChildProcess._handle.onexit (internal/child_process.js:275:12)\n gyp ERR! System Windows_NT 10.0.18362\n gyp ERR! command \"C:\\\\Program Files\\\\nodejs\\\\node.exe\" \"C:\\\\Users\\\\Admin\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\node-gyp\\\\bin\\\\node-gyp.js\" \"configure\" \"--verbose\"\n gyp ERR! cwd C:\\Users\\Admin\\folder\\node_modules\\@tensorflow\\tfjs-node\n gyp ERR! node -v v13.12.0\n gyp ERR! node-gyp -v v6.1.0\n gyp ERR! not ok\n </denchmark-code>\n \n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "jeffrson", "commentT": "2020-05-10T18:14:45Z", "comment_text": "\n \t\tI have created <denchmark-link:https://github.com/tensorflow/tfjs/pull/3242>#3242</denchmark-link>\n  to fix this. Please use node version smaller than 14 for now. The next release of this library will support the latest node version.\n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "jeffrson", "commentT": "2020-06-12T09:10:41Z", "comment_text": "\n \t\tAs it turns out, Node 12 changed to Napi6 as well starting from 12.17.0;\n <denchmark-link:https://github.com/nodejs/node/blob/master/doc/changelogs/CHANGELOG_V12.md#stable-n-api-release-6>https://github.com/nodejs/node/blob/master/doc/changelogs/CHANGELOG_V12.md#stable-n-api-release-6</denchmark-link>\n  so you have to stick to 12.16.3 for now.\n \t\t"}, "comments_3": {"comment_id": 4, "comment_author": "jeffrson", "commentT": "2020-06-12T11:38:44Z", "comment_text": "\n \t\tI'm not 100% sure but TFJS-node 2.0.0 was released 2 weeks ago or so, I think it now has Napi6 support?\n \t\t"}, "comments_4": {"comment_id": 5, "comment_author": "jeffrson", "commentT": "2020-06-15T19:52:30Z", "comment_text": "\n \t\tWell, maybe, yes. Unfortunately, currently it seems I still need to use tensorflow 1.15.\n \t\t"}, "comments_5": {"comment_id": 6, "comment_author": "jeffrson", "commentT": "2020-10-26T20:35:15Z", "comment_text": "\n \t\t\"@tensorflow/tfjs\": \"^2.6.0\",\n \"@tensorflow/tfjs-node\": \"^2.6.0\",\n node_version: \"12.19.0\"\n internal/modules/cjs/loader.js:1065\n return process.dlopen(module, path.toNamespacedPath(filename));\n ^\n Error: The specified module could not be found.\n \\?\\C:\\Users..\\node_modules@tensorflow\\tfjs-node\\lib\\napi-v6\\tfjs_binding.node\n \t\t"}, "comments_6": {"comment_id": 7, "comment_author": "jeffrson", "commentT": "2020-11-03T19:14:29Z", "comment_text": "\n \t\t\n \"@tensorflow/tfjs\": \"^2.6.0\",\n \"@tensorflow/tfjs-node\": \"^2.6.0\",\n node_version: \"12.19.0\"\n internal/modules/cjs/loader.js:1065\n return process.dlopen(module, path.toNamespacedPath(filename));\n ^\n Error: The specified module could not be found.\n ?\\C:\\Users..\\node_modules@tensorflow\\tfjs-node\\lib\\napi-v6\\tfjs_binding.node\n \n I used  node 12.16.1 and It found the specified module, however I still get notice: Hi there. Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit <denchmark-link:https://github.com/tensorflow/tfjs-node>https://github.com/tensorflow/tfjs-node</denchmark-link>\n  for more details.\n \t\t"}}}, "commit": {"commit_id": "b25deaa4317a4b1dbdf1c4eb014be757a6a7489f", "commit_author": "Kangyi Zhang", "commitT": "2020-05-10 22:51:20-07:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "tfjs-node-gpu\\package.json", "file_new_name": "tfjs-node-gpu\\package.json", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "92,93", "deleted_lines": "92"}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "tfjs-node\\package.json", "file_new_name": "tfjs-node\\package.json", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "89,90", "deleted_lines": "89"}}}}}}