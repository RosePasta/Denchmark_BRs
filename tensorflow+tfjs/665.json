{"BR": {"BR_id": "665", "BR_author": "chrisdonahue", "BRopenT": "2018-08-31T23:35:09Z", "BRcloseT": "2018-09-28T14:05:10Z", "BR_text": {"BRsummary": "Bizarre bug with tf.argMax", "BRdescription": "\n tf.argMax appears to have a strange bug. The following code snippet prints Tensor 0 when it should print Tensor 44.\n const xarr = new Float32Array(88);\n xarr[44] = 1.\n const x = tf.tensor1d(xarr);\n const xam = tf.argMax(x)\n xam.print()\n Changing the number 44 in this code snippet to any other number in [0, 87] results in the correct output. Disabling my GPU (by turning off hardware acceleration in Chrome) fixes the bug.\n The only thing that comes to mind about the significance of the number 44 is that it is half of 88, the size of the tensor. Indeed, this bug holds for 86/43 and 84/42.\n <denchmark-h:h4>TensorFlow.js version</denchmark-h>\n \n 0.12.5\n <denchmark-h:h4>Browser version</denchmark-h>\n \n Version 68.0.3440.106\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "chrisdonahue", "commentT": "2018-09-04T23:54:31Z", "comment_text": "\n \t\tI can reproduce this and can confirm that it only seems to affect the webgl backend. Thanks for reporting the bug, we will take a look.\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "chrisdonahue", "commentT": "2018-09-05T00:04:22Z", "comment_text": "\n \t\tCool, thx!\n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "chrisdonahue", "commentT": "2018-09-06T06:32:45Z", "comment_text": "\n \t\tHey guys. I investigated this a bit, and tracked it down to just be a small initialization error in the GLSL code.\n \t\t"}}}, "commit": {"commit_id": "9e1d279246773adc79024649168a13179c16a22d", "commit_author": "Paul Van Eck", "commitT": "2018-09-28 10:05:09-04:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "src\\kernels\\webgl\\argminmax_gpu.ts", "file_new_name": "src\\kernels\\webgl\\argminmax_gpu.ts", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "47,48", "deleted_lines": "47,48"}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "src\\ops\\reduction_ops_test.ts", "file_new_name": "src\\ops\\reduction_ops_test.ts", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "442,443,444,445,446,447,448,449,450,451,452", "deleted_lines": null, "method_info": {"method_name": "(anonymous)", "method_params": "", "method_startline": "442", "method_endline": "452"}}}}}}}