{"BR": {"BR_id": "273", "BR_author": "ezavesky", "BRopenT": "2020-04-28T21:58:56Z", "BRcloseT": "2020-05-18T17:57:46Z", "BR_text": {"BRsummary": "absolute paths break reverse proxies (e.g. nginx)", "BRdescription": "\n When attempting to stand-up running version behind a nginx reverse proxy, absolute path parameters cause failures.\n To Reproduce\n Steps to reproduce the behavior:\n \n Launch labelstudio\n Broken image and links will result\n Inspection of the retrieval paths indicates incorrect path specification\n \n Expected behavior\n When using the below code for nginx, the application should run correctly at the new URL.\n <denchmark-code>http {\n     map $http_upgrade $connection_upgrade {\n         default upgrade;\n         '' close;\n     }\n \n     server {\n         listen 5000;\n         server_name localhost;\n \n         location /my_prefix/another {\n             rewrite /my_prefix/another/(.*) /$1  break;\n             rewrite /my_prefix/another /  break;\n             proxy_pass http://localhost:8200;\n             proxy_http_version 1.1;\n             proxy_set_header Upgrade $http_upgrade;\n             proxy_set_header Connection $connection_upgrade;\n         }\n     }\n }\n # code originally from https://github.com/streamlit/streamlit/issues/1139\n </denchmark-code>\n \n \n Broken page and bad requests.\n <denchmark-link:https://user-images.githubusercontent.com/12480297/80541828-7aa27b80-8971-11ea-9814-d2e855d2fd09.jpg></denchmark-link>\n \n <denchmark-link:https://user-images.githubusercontent.com/12480297/80541830-7bd3a880-8971-11ea-8d1f-09f45024fc81.jpg></denchmark-link>\n \n \t"}, "comments": {}}, "commit": {"commit_id": "2a132cab9857f44aeffac07ec304f86c4bc46db0", "commit_author": "Eric Z", "commitT": "2020-05-07 20:52:46+03:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "label_studio\\static\\js\\lsb.js", "file_new_name": "label_studio\\static\\js\\lsb.js", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "231", "deleted_lines": "231", "method_info": {"method_name": "onDeleteCompletion", "method_params": "ls,completion", "method_startline": "228", "method_endline": "235"}}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "label_studio\\templates\\base.html", "file_new_name": "label_studio\\templates\\base.html", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "9,10,11,12,13,15,16,17,35,36,41,44,47,50,53,56,63,67", "deleted_lines": "9,10,11,12,13,15,16,17,35,36,41,44,47,50,53,56,63,67"}}}, "file_2": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "label_studio\\templates\\export.html", "file_new_name": "label_studio\\templates\\export.html", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "59", "deleted_lines": "59"}}}, "file_3": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "label_studio\\templates\\labeling.html", "file_new_name": "label_studio\\templates\\labeling.html", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "4", "deleted_lines": "4"}}}, "file_4": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "label_studio\\templates\\model.html", "file_new_name": "label_studio\\templates\\model.html", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "150", "deleted_lines": "150"}}}, "file_5": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "label_studio\\templates\\render_ls.html", "file_new_name": "label_studio\\templates\\render_ls.html", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "42,43", "deleted_lines": "42,43"}}}, "file_6": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "label_studio\\templates\\setup.html", "file_new_name": "label_studio\\templates\\setup.html", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "37,310,323,351", "deleted_lines": "37,310,323,351"}}}, "file_7": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "label_studio\\templates\\setup_help.html", "file_new_name": "label_studio\\templates\\setup_help.html", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "64", "deleted_lines": "64"}}}, "file_8": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "label_studio\\templates\\tasks.html", "file_new_name": "label_studio\\templates\\tasks.html", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "38,41,58,84,97", "deleted_lines": "38,41,58,84,97"}}}, "file_9": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "label_studio\\templates\\welcome.html", "file_new_name": "label_studio\\templates\\welcome.html", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "110,121,132,143", "deleted_lines": "110,121,132,143"}}}, "file_10": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "label_studio\\utils\\io.py", "file_new_name": "label_studio\\utils\\io.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "53,54", "deleted_lines": "53,54", "method_info": {"method_name": "find_editor_files", "method_params": "", "method_startline": "48", "method_endline": "55"}}}}}}}