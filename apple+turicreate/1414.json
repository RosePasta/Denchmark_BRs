{"BR": {"BR_id": "1414", "BR_author": "TobyRoseman", "BRopenT": "2019-02-13T22:28:32Z", "BRcloseT": "2019-03-07T18:34:33Z", "BR_text": {"BRsummary": "Logistic Classifier: disable probability output type for multiclass predict", "BRdescription": "\n import turicreate as tc\n \n data = tc.SFrame([-100,-100,-100, 0,0,0, 100,100,100])\n data['label'] = data['X1']\n m = tc.logistic_classifier.create(data, 'label')\n \n m.predict({'X1': 0}, output_type='probability')\n The call to predict produces a long stack trace with the error message:\n TypeError: Cannot convert [0.0773239 0.869718 0.0529583] to float\n We shouldn't be trying to do a probability predict if the number of classes is more than two, per the docstring:\n <denchmark-code>    - 'probability': Prediction probability associated with the True\n       class (not applicable for multi-class classification)\n </denchmark-code>\n \n We should just print a message about it being disabled for multi-class.\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "TobyRoseman", "commentT": "2019-02-13T22:33:44Z", "comment_text": "\n \t\tThis feels like a regression. I'm pretty sure in 4.x, we provided that as an error message.\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "TobyRoseman", "commentT": "2019-02-19T02:41:04Z", "comment_text": "\n \t\tIt's a bug.  It should work fine.  Something is just assuming that the output of predict is a float, when in fact it can be an array (Like here).\n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "TobyRoseman", "commentT": "2019-02-19T03:31:54Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/hoytak>@hoytak</denchmark-link>\n  I think that would be probability_vector option which isn't the same as probability.\n \t\t"}, "comments_3": {"comment_id": 4, "comment_author": "TobyRoseman", "commentT": "2019-02-21T21:48:53Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/srikris>@srikris</denchmark-link>\n  Ah, yes, still a bug.\n \t\t"}}}, "commit": {"commit_id": "b36d38ecf8846dd23fec2d6d6fc2990b2ddde986", "commit_author": "Shreya Jain", "commitT": "2019-03-07 10:34:32-08:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "src\\unity\\python\\turicreate\\toolkits\\classifier\\logistic_classifier.py", "file_new_name": "src\\unity\\python\\turicreate\\toolkits\\classifier\\logistic_classifier.py", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "624,628,629", "deleted_lines": "624"}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "src\\unity\\toolkits\\supervised_learning\\supervised_learning.cpp", "file_new_name": "src\\unity\\toolkits\\supervised_learning\\supervised_learning.cpp", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "522,523,524", "deleted_lines": null, "method_info": {"method_name": "turi::supervised::supervised_learning_model_base::fast_predict", "method_params": "rows,missing_value_action,output_type", "method_startline": "498", "method_endline": "555"}}}}}}}