{"BR": {"BR_id": "2066", "BR_author": "alonpal", "BRopenT": "2019-06-18T08:59:09Z", "BRcloseT": "2019-10-16T00:31:32Z", "BR_text": {"BRsummary": "Unclear error message in apply method when most values are None", "BRdescription": "\n When all rows used by the apply method for type inference return None, then the resulting SArray defaults to float.  I know this can be solved by specifying dtype but the error message should be clearer, especially when considering lazy operations.\n Running:\n import turicreate as tc\n a = tc.SArray(list(range(100000)))\n b = a.apply(lambda x: None if x < 1000 else str(x))\n b.materialize()\n Results in:\n TypeError: Cannot convert 41666 to float\n I suggest something along the lines of TypeError: Cannot convert 41666 of type XXXX to float which is the type of the SArray. If this is not the correct type try specifying it during creation\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "alonpal", "commentT": "2019-10-04T07:36:37Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/TobyRoseman>@TobyRoseman</denchmark-link>\n  <denchmark-link:https://github.com/znation>@znation</denchmark-link>\n  Please assign this ticket to me as I would like to try fixing it and contribute .Thanks in advance!\n \t\t"}}}, "commit": {"commit_id": "ed2a909a9c82779f91bede70de14475460041a4f", "commit_author": "Dhivya Kanakabala", "commitT": "2019-10-15 17:31:31-07:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "src\\core\\storage\\query_engine\\operators\\lambda_transform.hpp", "file_new_name": "src\\core\\storage\\query_engine\\operators\\lambda_transform.hpp", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "192,193,194,195", "deleted_lines": "192,193", "method_info": {"method_name": "turi::query_eval::operator_impl<planner_node_type::LAMBDA_TRANSFORM_NODE>::convert_value_to_output_type", "method_params": "val,type", "method_startline": "173", "method_endline": "199"}}}}}}}