{"BR": {"BR_id": "1761", "BR_author": "TobyRoseman", "BRopenT": "2019-04-22T17:37:15Z", "BRcloseT": "2019-11-12T21:12:06Z", "BR_text": {"BRsummary": "Wrong behavior for nan converting from float to int", "BRdescription": "\n When changing the dtype of an SArray from float to int, nan get converted to very large number:\n In [1]: import turicreate as tc\n \n In [2]: sa = tc.SArray([1.0,2.0,float('nan'),3.0])\n \n In [3]: sa\n Out[3]: \n dtype: float\n Rows: 4\n [1.0, 2.0, nan, 3.0]\n \n In [4]: sa.astype(int)\n Out[4]: \n dtype: int\n Rows: 4\n [1, 2, -9223372036854775808, 3]\n I'm not certain what the best behavior would be here; it seems nan is a floating point only representation. It would probably be best to turn the nan into None. Raising an exception is also probably reasonable.\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "TobyRoseman", "commentT": "2019-08-15T22:26:00Z", "comment_text": "\n \t\tWe should turn this into a None.  It should be a simple fix.\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "TobyRoseman", "commentT": "2019-10-30T12:01:34Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/TobyRoseman>@TobyRoseman</denchmark-link>\n   Please assign this ticket to me as I would like to try fixing it and contribute. Thanks in advance!\n \t\t"}}}, "commit": {"commit_id": "209c8a64be2c8aea6c278acc2f15bb5790d88d8b", "commit_author": "Dhivya Kanakabala", "commitT": "2019-11-12 13:12:05-08:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "src\\python\\turicreate\\data_structures\\sarray.py", "file_new_name": "src\\python\\turicreate\\data_structures\\sarray.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "2471,2472,2473,2474", "deleted_lines": null, "method_info": {"method_name": "astype", "method_params": "self,dtype,undefined_on_failure", "method_startline": "2422", "method_endline": "2477"}}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "src\\python\\turicreate\\test\\test_sarray.py", "file_new_name": "src\\python\\turicreate\\test\\test_sarray.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "256,257,258,259", "deleted_lines": null, "method_info": {"method_name": "test_nan_to_none_type_conversion", "method_params": "self", "method_startline": "256", "method_endline": "259"}}}}}}}