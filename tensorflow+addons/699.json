{"BR": {"BR_id": "699", "BR_author": "sarim-zafar", "BRopenT": "2019-11-14T22:14:26Z", "BRcloseT": "2019-11-18T15:30:22Z", "BR_text": {"BRsummary": "Lifted Struct Loss Error", "BRdescription": "\n System information\n \n OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Google Colab (Linux)\n TensorFlow version and how it was installed (source or binary): binary 2.0\n TensorFlow-Addons version and how it was installed (source or binary): binary 0.6.0\n Python version: 3\n Is GPU used? (yes/no): Yes\n \n Describe the bug\n I get an assert shape error when I try to initialize the LiftedStructLoss obj\n assert lshape.shape == 1 AssertionError is the error I get. However, it can easily be resolved by removing the assert line. I have one more question, why does it say that the vector should not be l2 normalized? while in the case of semihardtriplet loss it says that the vector should be l2 normalized\n Code to reproduce the issue\n import tensorflow_addons as tfa\n tfa.losses.LiftedStructLoss()\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "sarim-zafar", "commentT": "2019-11-15T07:11:53Z", "comment_text": "\n \t\t\n That is similar to #295. I would submit a PR later.\n I think it is ok to take normalized embedding as input for lifted struct loss as there is no addition normalization done in the paper; triplet loss used in facenet model states the embedding should be normalized in Figure 2.\n \n However, in both implementation, we do not check whether the embedding is l2 normalized explicitly so the documentation is only a note for user rather than a constraint. Please correct me if I am wrong. Thanks for reporting the issue!\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "sarim-zafar", "commentT": "2019-11-15T15:19:39Z", "comment_text": "\n \t\t\n Yes it is same as the one referenced above\n I tried experimenting with l2 normalization of relu , sigmoid activation, relu activation. After a couple thousand iterations, the normalized embedding's loss stagnates while the other two keep decreasing. So there is definitely something specific to the implementation. I tried going through the paper for lifted struct loss but they don't mention normalization anywhere.\n As for the triplet loss i am fine with it and yes i know they add normalization there.\n \n \t\t"}}}, "commit": {"commit_id": "245986497878f28963c22a1e06ddc28d429ad5a3", "commit_author": "Tzu-Wei Sung", "commitT": "2019-11-18 15:30:21+00:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "tensorflow_addons\\losses\\lifted.py", "file_new_name": "tensorflow_addons\\losses\\lifted.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": null, "deleted_lines": "42", "method_info": {"method_name": "lifted_struct_loss", "method_params": "labels,embeddings,margin", "method_startline": "27", "method_endline": "102"}}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "tensorflow_addons\\losses\\lifted_test.py", "file_new_name": "tensorflow_addons\\losses\\lifted_test.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "67,69,72,74", "deleted_lines": null, "method_info": {"method_name": "testLiftedStruct", "method_params": "self", "method_startline": "57", "method_endline": "107"}}, "hunk_1": {"Ismethod": 1, "added_lines": "109,110,111,112,113,114", "deleted_lines": null, "method_info": {"method_name": "test_keras_model_compile", "method_params": "self", "method_startline": "109", "method_endline": "114"}}}}}}}