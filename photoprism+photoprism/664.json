{"BR": {"BR_id": "664", "BR_author": "zoenglinghou", "BRopenT": "2020-11-28T22:02:11Z", "BRcloseT": "2020-12-10T22:30:06Z", "BR_text": {"BRsummary": "WebDAV: Improve UX of remote directory autocomplete", "BRdescription": "\n Related: <denchmark-link:https://github.com/photoprism/photoprism/issues/301>#301</denchmark-link>\n \n As mentioned in  this issue, PhotoPrism uses an inefficient way to fetch remote directory structure, which could causes high resource usage on the NC server and potentially failure/timeout. However, manually entering the remote directory sync directory works, but only after the timeout (~10min).\n It would be nice to see PhotoPrism improve the directory fetching function for a better UX. (and maybe with the option to directly enter the directory name before fetching?)\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "zoenglinghou", "commentT": "2020-12-05T00:25:32Z", "comment_text": "\n \t\tImplemented a 45s timeout. Does this work for now?\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "zoenglinghou", "commentT": "2020-12-05T10:44:31Z", "comment_text": "\n \t\tThe timeout works really well! And it remembers the directory I last inputted!\n \t\t"}}}, "commit": {"commit_id": "56851f48929c8a73073ac9b5ced1ef6eec7ba4d5", "commit_author": "Michael Mayer", "commitT": "2020-12-05 01:24:33+01:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "internal\\entity\\account.go", "file_new_name": "internal\\entity\\account.go", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "109", "deleted_lines": "109", "method_info": {"method_name": "Directories", "method_params": "", "method_startline": "106", "method_endline": "115"}}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 5, "file_old_name": "internal\\remote\\webdav\\webdav.go", "file_new_name": "internal\\remote\\webdav\\webdav.go", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "98,99,100,101,102,103,104,105,106,107,108,109,110,111", "deleted_lines": "93,113,114", "method_info": {"method_name": "Directories", "method_params": "string,bool", "method_startline": "93", "method_endline": "125"}}, "hunk_1": {"Ismethod": 1, "added_lines": "61,62,63", "deleted_lines": "58", "method_info": {"method_name": "New", "method_params": "url,user,string", "method_startline": "56", "method_endline": "66"}}, "hunk_2": {"Ismethod": 1, "added_lines": "111,131,132", "deleted_lines": "113,114", "method_info": {"method_name": "fetchDirs", "method_params": "string,bool,Time,Duration", "method_startline": "111", "method_endline": "143"}}, "hunk_3": {"Ismethod": 1, "added_lines": "98,99,100,101,102,103,104,105,106,107,108", "deleted_lines": null, "method_info": {"method_name": "Directories", "method_params": "string,bool,Duration", "method_startline": "98", "method_endline": "108"}}, "hunk_4": {"Ismethod": 1, "added_lines": "203", "deleted_lines": "185", "method_info": {"method_name": "DownloadDir", "method_params": "from,string,recursive,bool", "method_startline": "173", "method_endline": "210"}}}}, "file_2": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "internal\\remote\\webdav\\webdav_test.go", "file_new_name": "internal\\remote\\webdav\\webdav_test.go", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "47", "deleted_lines": "47", "method_info": {"method_name": "", "method_params": "", "method_startline": "46", "method_endline": "62"}}, "hunk_1": {"Ismethod": 1, "added_lines": "47,65", "deleted_lines": "47,65", "method_info": {"method_name": "TestClient_Directories", "method_params": "T", "method_startline": "41", "method_endline": "75"}}}}, "file_3": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "internal\\workers\\sync_refresh.go", "file_new_name": "internal\\workers\\sync_refresh.go", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "19", "deleted_lines": "19", "method_info": {"method_name": "refresh", "method_params": "Account", "method_startline": "12", "method_endline": "86"}}}}}}}