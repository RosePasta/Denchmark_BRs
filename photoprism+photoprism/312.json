{"BR": {"BR_id": "312", "BR_author": "alxjsn", "BRopenT": "2020-05-15T23:31:41Z", "BRcloseT": "2020-05-17T13:18:26Z", "BR_text": {"BRsummary": "UI issue when thumbnail is missing", "BRdescription": "\n When a thumbnail is missing for a photo/video, all the following thumbnails end up opening incorrect photos when they are clicked. I was able to reproduce the issue on the demo site.\n Go to https://demo.photoprism.org/photos?view=cards&order=similar&public=true&quality=3 and notice that the first thumbnail is missing. Clicking on any of the other photos to enlarge them opens the wrong photo.\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "alxjsn", "commentT": "2020-05-16T00:14:05Z", "comment_text": "\n \t\tThis may also be related to <denchmark-link:https://github.com/photoprism/photoprism/issues/28>#28</denchmark-link>\n \n I notice a lot of missing thumbnails for live photo (videos) when grouping by similar.\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "alxjsn", "commentT": "2020-05-16T04:00:34Z", "comment_text": "\n \t\tThanks for reporting this.\n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "alxjsn", "commentT": "2020-05-16T12:40:21Z", "comment_text": "\n \t\tHow did you manage to remove the thumbnail on the demo? Did you hack the API and/or is this a second bug? I can see a thumb in the edit dialog, just not in search results...\n \t\t"}, "comments_3": {"comment_id": 4, "comment_author": "alxjsn", "commentT": "2020-05-16T14:06:26Z", "comment_text": "\n \t\tI actually didn't have to do anything in th demo, so I guess it's another bug. I think it happens for videos/live photos in my instance.\n \t\t"}, "comments_4": {"comment_id": 5, "comment_author": "alxjsn", "commentT": "2020-05-16T15:09:53Z", "comment_text": "\n \t\tNevermind, figured it out. Had to change a few things to make \"group by similarity\" work with videos, same for search by color.\n \t\t"}, "comments_5": {"comment_id": 6, "comment_author": "alxjsn", "commentT": "2020-05-16T16:06:46Z", "comment_text": "\n \t\tUpdated demo and docker images :)\n \t\t"}, "comments_6": {"comment_id": 7, "comment_author": "alxjsn", "commentT": "2020-05-16T18:22:20Z", "comment_text": "\n \t\tThanks for fixing this! Works for me now :)\n \t\t"}}}, "commit": {"commit_id": "abfd2fa79db5fb19e2b4ed8ba0f4417165b3dd66", "commit_author": "Michael Mayer", "commitT": "2020-05-16 17:07:44+02:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "frontend\\src\\common\\viewer.js", "file_new_name": "frontend\\src\\common\\viewer.js", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "59,60,61,62,63", "deleted_lines": null, "method_info": {"method_name": "show", "method_params": "items,index", "method_startline": "27", "method_endline": "121"}}, "hunk_1": {"Ismethod": 1, "added_lines": "59,60,61,62,63", "deleted_lines": null, "method_info": {"method_name": "getImageURLForShare", "method_params": "button", "method_startline": "56", "method_endline": "71"}}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "frontend\\src\\dialog\\p-video-dialog.vue", "file_new_name": "frontend\\src\\dialog\\p-video-dialog.vue", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "35,47,55", "deleted_lines": "35,47,55"}}}, "file_2": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "frontend\\src\\model\\photo.js", "file_new_name": "frontend\\src\\model\\photo.js", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "281,287,288,289,290,291", "deleted_lines": null, "method_info": {"method_name": "addSizeInfo", "method_params": "file,info", "method_startline": "280", "method_endline": "303"}}, "hunk_1": {"Ismethod": 1, "added_lines": "181,182,183,184,185,186", "deleted_lines": null, "method_info": {"method_name": "getThumbnailUrl", "method_params": "type", "method_startline": "177", "method_endline": "191"}}}}, "file_3": {"file_change_type": "MODIFY", "file_Nmethod": 5, "file_old_name": "frontend\\src\\model\\thumb.js", "file_new_name": "frontend\\src\\model\\thumb.js", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "54", "deleted_lines": null, "method_info": {"method_name": "(anonymous)", "method_params": "", "method_startline": "52", "method_endline": "55"}}, "hunk_1": {"Ismethod": 1, "added_lines": "12,13", "deleted_lines": "12,13", "method_info": {"method_name": "getDefaults", "method_params": "", "method_startline": "7", "method_endline": "16"}}, "hunk_2": {"Ismethod": 1, "added_lines": "28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47", "deleted_lines": "33,34,35,36,47", "method_info": {"method_name": "thumbNotFound", "method_params": "", "method_startline": "28", "method_endline": "47"}}, "hunk_3": {"Ismethod": 1, "added_lines": "54", "deleted_lines": null, "method_info": {"method_name": "fromPhotos", "method_params": "photos", "method_startline": "49", "method_endline": "58"}}, "hunk_4": {"Ismethod": 1, "added_lines": "128", "deleted_lines": null, "method_info": {"method_name": "fromFiles", "method_params": "photos", "method_startline": "118", "method_endline": "137"}}}}, "file_4": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "go.mod", "file_new_name": "go.mod", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "14,15", "deleted_lines": "14,15"}}}, "file_5": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "go.sum", "file_new_name": "go.sum", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "73,74,79,80", "deleted_lines": null}}}, "file_6": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "internal\\api\\photo_thumbnail.go", "file_new_name": "internal\\api\\photo_thumbnail.go", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "40,41,42,43,44,45,46,47,48", "deleted_lines": null, "method_info": {"method_name": "GetThumbnail", "method_params": "RouterGroup,Config", "method_startline": "20", "method_endline": "104"}}, "hunk_1": {"Ismethod": 1, "added_lines": "40,41,42,43,44,45,46,47,48", "deleted_lines": null, "method_info": {"method_name": "", "method_params": "", "method_startline": "21", "method_endline": "103"}}}}, "file_7": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "internal\\api\\svg.go", "file_new_name": "internal\\api\\svg.go", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "10,11", "deleted_lines": "10,11,12,13"}}}, "file_8": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "internal\\entity\\file.go", "file_new_name": "internal\\entity\\file.go", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "154,155,156,157,158,159,160,161,162", "deleted_lines": null, "method_info": {"method_name": "UpdateVideoInfos", "method_params": "", "method_startline": "154", "method_endline": "162"}}}}, "file_9": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "internal\\meta\\exif.go", "file_new_name": "internal\\meta\\exif.go", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "153", "deleted_lines": "153", "method_info": {"method_name": "Exif", "method_params": "string", "method_startline": "41", "method_endline": "356"}}}}, "file_10": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "internal\\photoprism\\index_mediafile.go", "file_new_name": "internal\\photoprism\\index_mediafile.go", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,464,465,466,467,468,469", "deleted_lines": "138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153", "method_info": {"method_name": "MediaFile", "method_params": "MediaFile,IndexOptions,string", "method_startline": "50", "method_endline": "484"}}}}, "file_11": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "internal\\query\\photos.go", "file_new_name": "internal\\query\\photos.go", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "265", "deleted_lines": null, "method_info": {"method_name": "Photos", "method_params": "PhotoSearch", "method_startline": "16", "method_endline": "286"}}}}}}}