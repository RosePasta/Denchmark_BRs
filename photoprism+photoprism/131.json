{"BR": {"BR_id": "131", "BR_author": "scilaci", "BRopenT": "2019-08-18T18:52:18Z", "BRcloseT": "2020-01-06T10:24:51Z", "BR_text": {"BRsummary": "Filename with brackets not supported", "BRdescription": "\n Hi guys,\n I found a bug blocking the indexation process :'(\n How to reproduce :\n Rename the filename of a picture and use the brackets in the name:\n \n Ex: pictureFilename[1].jpg\n \n Move the file in the Originals folder and try to reindex\n The indexation process is stopped by this error:\n \n photoprism_1  | time=\"2019-08-18T18:22:25Z\" level=info msg=\"updated main jpg file \"2019/08/20190815_002342_D41083B2B2C2.jpg\"\"\n photoprism_1  | [GIN] 2019/08/18 - 18:22:25 | 500 |  7.230782403s |    192.168.1.40 | POST     /api/v1/index\n photoprism_1  | time=\"2019-08-18T18:22:25Z\" level=info msg=\"/home/photoprism/Pictures/Originals/P1090443[1].jpg\"\n photoprism_1  |\n photoprism_1  |\n photoprism_1  | 2019/08/18 18:22:25 [Recovery] 2019/08/18 - 18:22:25 panic recovered:\n photoprism_1  | POST /api/v1/index HTTP/1.1\n ....\n photoprism_1  |\n photoprism_1  |\n photoprism_1  | runtime error: invalid memory address or nil pointer dereference\n photoprism_1  | /usr/local/go/src/runtime/panic.go:82 (0xcc3f50)\n photoprism_1  | /usr/local/go/src/runtime/signal_unix.go:390 (0xcc3d7f)\n photoprism_1  | /go/src/github.com/photoprism/photoprism/internal/photoprism/mediafile.go:372 (0x1c9f5b6)\n photoprism_1  | /go/src/github.com/photoprism/photoprism/internal/photoprism/mediafile.go:372 (0x1c9f5b1)\n photoprism_1  | /go/src/github.com/photoprism/photoprism/internal/photoprism/indexer.go:111 (0x1c981e6)\n photoprism_1  | /go/src/github.com/photoprism/photoprism/internal/photoprism/indexer.go:359 (0x1c9cbc0)\n photoprism_1  | /go/src/github.com/photoprism/photoprism/internal/photoprism/indexer.go:397 (0x1cadbcf)\n photoprism_1  | /usr/local/go/src/path/filepath/path.go:358 (0xd90c25)\n \n Is a big problem when you are trying to index 50k of pictures and be blocked by one of these pictrues!\n If you are tying to upload the picture from the UI and importing...\n => The file is never moved to Original folder and without error in the logfile\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "scilaci", "commentT": "2019-08-18T19:22:58Z", "comment_text": "\n \t\tGood catch! While in development, we fail fast... final release will catch the panic and continue.\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "scilaci", "commentT": "2019-08-20T23:18:08Z", "comment_text": "\n \t\tI am able to reproduce the issue, can I take a look into this\n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "scilaci", "commentT": "2019-08-22T19:39:43Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/korimillivijay>@korimillivijay</denchmark-link>\n  Thank you!\n \t\t"}, "comments_3": {"comment_id": 4, "comment_author": "scilaci", "commentT": "2019-12-30T09:28:28Z", "comment_text": "\n \t\tCan somebody confirm this is fixed?\n \t\t"}, "comments_4": {"comment_id": 5, "comment_author": "scilaci", "commentT": "2020-01-06T10:24:51Z", "comment_text": "\n \t\tI'll close this since we didn't get feedback and our code has improved a lot since the bug was reported. My test with brackets worked without issues.\n \t\t"}}}, "commit": {"commit_id": "31d5f306371a4b1c683dadb0d582b2d676419440", "commit_author": "vijay korimilli", "commitT": "2019-09-08 05:53:04+02:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 2, "file_old_name": "internal\\photoprism\\indexer.go", "file_new_name": "internal\\photoprism\\indexer.go", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "383,384,385,386,387", "deleted_lines": null, "method_info": {"method_name": "", "method_params": "", "method_startline": "383", "method_endline": "387"}}, "hunk_1": {"Ismethod": 1, "added_lines": "383,384,385,386,387", "deleted_lines": null, "method_info": {"method_name": "error", "method_params": "", "method_startline": "382", "method_endline": "407"}}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "internal\\photoprism\\mediafile.go", "file_new_name": "internal\\photoprism\\mediafile.go", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "273,274", "deleted_lines": "272", "method_info": {"method_name": "RelatedFiles", "method_params": "", "method_startline": "271", "method_endline": "308"}}}}}}}