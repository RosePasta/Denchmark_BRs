{"BR": {"BR_id": "128", "BR_author": "vi-n", "BRopenT": "2019-07-30T11:58:11Z", "BRcloseT": "2019-10-26T11:18:31Z", "BR_text": {"BRsummary": "Photoprism fails with \"illegal instruction\"", "BRdescription": "\n I try to setup Photoprism in Docker, and when running it the only output I get is:\n \n photoprism_1        | Illegal instruction (core dumped)\n \n The docker-compose snippet that I use for Photoprism:\n <denchmark-code>    photoprism:\n         image: photoprism/photoprism\n         volumes:\n             - /mnt/nas/pictures/2019/JPG/:/home/photoprism/Pictures/Originals/:ro\n         labels:\n             - \"traefik.enable=true\"\n             - \"traefik.port=2342\"\n             - \"traefik.frontend.rule=Host:pics.hostname\"\n             - \"traefik.docker.network=my_gateway\"\n         networks:\n             - gateway\n </denchmark-code>\n \n This is running on a 64 bit linux install, what am I missing.\n Unrelated: is there an IRC/Matrix room with users?\n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "vi-n", "commentT": "2019-07-31T11:58:13Z", "comment_text": "\n \t\tSame issue here, using latest container. My docker-compose.yml:\n <denchmark-code>version: '3.6'\n \n volumes:\n     photoprism_db:\n         driver: local\n         name: photoprism_db\n     photoprism_cache:\n         driver: local\n         name: photoprism_cache\n \n services:\n     photoprism:\n         container_name: photoprism\n         restart: unless-stopped\n         volumes:\n             - '/media/photos:/home/photoprism/Pictures/Originals:ro'\n             - 'photoprism_cache:/home/photoprism/.cache/photoprism'\n             - 'photoprism_db:/home/photoprism/.local/share/photoprism/resources/database'\n         ports:\n             - '2342:2342'\n         image: photoprism/photoprism\n </denchmark-code>\n \n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "vi-n", "commentT": "2019-08-05T15:54:39Z", "comment_text": "\n \t\tI'm having the same issue. It appears that this fascinating and audacious project is not currently quite ready even for beta-level testing, at least from a project infrastructure standpoint; a bit more maturity will lead to automated testing that will catch breaking commits. Absolutely amazed by where this is going, though. The demo looks fantastic.\n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "vi-n", "commentT": "2019-08-13T09:36:15Z", "comment_text": "\n \t\tSame issue here - looks like a great piece of software - will keep trying and hoping this is fixed. Running docker on ubuntu server.\n Creating s-photoprism ... done Attaching to s-photoprism s-photoprism    | Illegal instruction (core dumped) s-photoprism exited with code 132\n uname -a\n '\n Linux v-dickory 5.0.0-23-generic <denchmark-link:https://github.com/photoprism/photoprism/issues/24>#24</denchmark-link>\n -Ubuntu SMP Mon Jul 29 15:36:44 UTC 2019 x86_64 x86_64 x86_64 GNU/Linux\n '\n \t\t"}, "comments_3": {"comment_id": 4, "comment_author": "vi-n", "commentT": "2019-08-13T12:11:38Z", "comment_text": "\n \t\tThank you all for reporting! We've been on vacation but will have a look into this soon.\n \t\t"}, "comments_4": {"comment_id": 5, "comment_author": "vi-n", "commentT": "2019-08-15T14:34:07Z", "comment_text": "\n \t\tsame here\n Linux sam 4.9.0-8-amd64 #1 SMP Debian 4.9.144-3.1 (2019-02-19) x86_64 GNU/Linux\n \t\t"}, "comments_5": {"comment_id": 6, "comment_author": "vi-n", "commentT": "2019-08-18T07:42:27Z", "comment_text": "\n \t\tsame here\n Linux 5.0.0-21-generic <denchmark-link:https://github.com/photoprism/photoprism/issues/22>#22</denchmark-link>\n -Ubuntu SMP Tue Jul 2 13:27:33 UTC 2019 x86_64 x86_64 x86_64 GNU/Linux\n \t\t"}, "comments_6": {"comment_id": 7, "comment_author": "vi-n", "commentT": "2019-08-18T12:21:21Z", "comment_text": "\n \t\tSorry for not getting back to you earlier... crazy busy after coming back from vacation. I just pushed a version of the Dockerfile without AVX2 support, that should fix it.\n \t\t"}, "comments_7": {"comment_id": 8, "comment_author": "vi-n", "commentT": "2019-08-18T16:29:48Z", "comment_text": "\n \t\tLet me know it if works now! You'll have to pull the latest container image from Docker Hub.\n \t\t"}, "comments_8": {"comment_id": 9, "comment_author": "vi-n", "commentT": "2019-08-18T16:48:35Z", "comment_text": "\n \t\tHi\n \n Yes, that had fixed the core dump and I can see the UI now.\n \n I am getting a bunch of other errors on indexing, but don't have time to\n look right now.\n \n I will do further tests soon\n \n Thank you for fixing it and letting me know.\n \n Cheers\n \n George\n <denchmark-link:#>\u2026</denchmark-link>\n \n \n On Sun, 18 Aug 2019, 17:29 Michael Mayer, ***@***.***> wrote:\n  Let me know it if works now! You'll have to pull the latest container\n  image from Docker Hub.\n \n  \u2014\n  You are receiving this because you commented.\n  Reply to this email directly, view it on GitHub\n  <#128?email_source=notifications&email_token=ABFTZPXUWWQL5WVB3FIWFBLQFF2IFA5CNFSM4IH3RBA2YY3PNVWWK3TUL52HS4DFVREXG43VMVBW63LNMVXHJKTDN5WW2ZLOORPWSZGOD4RDNWY#issuecomment-522335963>,\n  or mute the thread\n  <https://github.com/notifications/unsubscribe-auth/ABFTZPUE5OHFPCNVSFBAYUTQFF2IFANCNFSM4IH3RBAQ>\n  .\n \n \n \n \t\t"}, "comments_9": {"comment_id": 10, "comment_author": "vi-n", "commentT": "2019-08-20T23:03:34Z", "comment_text": "\n \t\tit's fixed for me now\n thank you <denchmark-link:https://github.com/lastzero>@lastzero</denchmark-link>\n  !\n \t\t"}}}, "commit": {"commit_id": "bdb24d2600d1cb9ee9cbf4c160676f6f78f01f9d", "commit_author": "Michael Mayer", "commitT": "2019-08-18 14:20:32+02:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "Dockerfile", "file_new_name": "Dockerfile", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "1", "deleted_lines": "1"}}}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "docker\\development\\Dockerfile", "file_new_name": "docker\\development\\Dockerfile", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "68", "deleted_lines": "68"}}}, "file_2": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "docker\\photoprism\\Dockerfile", "file_new_name": "docker\\photoprism\\Dockerfile", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "1", "deleted_lines": "1"}}}}}}