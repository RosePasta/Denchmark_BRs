{"BR": {"BR_id": "1384", "BR_author": "ChristopherSTAN", "BRopenT": "2020-11-13T03:05:51Z", "BRcloseT": "2020-11-13T18:03:03Z", "BR_text": {"BRsummary": "opt.project bug", "BRdescription": "\n I notice that the train options are updated. But I find a bug, when I change 'logdir' to 'project' here.\n !python train.py --data data/voc.yaml --weights yolov5l.pt \\\n --hyp '/content/drive/My Drive/CISC849/hyp.geo_mosaic_mixup.yaml' \\\n --cfg models/yolov5l.yaml \\\n --batch-size 16 \\\n --name yolov5l_pretrain_geo_mosaic_mixup \\\n --project '/content/drive/My Drive/yolov5-checkpoints' \\\n --resume '/content/drive/My Drive/yolov5-checkpoints/exp36_yolov5l_pretrain_geo_mosaic_mixup/weights/last.pt'\n <denchmark-h:h2>\ud83d\udc1b Bug</denchmark-h>\n \n <denchmark-link:https://user-images.githubusercontent.com/7379039/99023632-f11a6a00-259f-11eb-83db-d678a22e39fb.png></denchmark-link>\n \n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "ChristopherSTAN", "commentT": "2020-11-13T14:48:13Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/ChristopherSTAN>@ChristopherSTAN</denchmark-link>\n  hi there. Thanks for the bug report. Yes, --resuming previous models will be broken unfortunately by this change. The fix you recommended is correct, --project has replaced --logdir now in train.py.\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "ChristopherSTAN", "commentT": "2020-11-13T15:15:28Z", "comment_text": "\n \t\tHi there <denchmark-link:https://github.com/glenn-jocher>@glenn-jocher</denchmark-link>\n  , I am not sure only replacing can fix. I have replace 'logdir' with 'project' and encounter this error.\n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "ChristopherSTAN", "commentT": "2020-11-13T15:23:09Z", "comment_text": "\n \t\tAnd it come out 'AttributeError: 'Namespace' object has no attribute 'project' ', which is very confusing for me, because I just use that option for train.py!\n \t\t"}, "comments_3": {"comment_id": 4, "comment_author": "ChristopherSTAN", "commentT": "2020-11-13T15:32:00Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/ChristopherSTAN>@ChristopherSTAN</denchmark-link>\n  actually I just tried to train and resume a test run, and I get an error related to posixpath saving to opt.yaml. I'm pushing a fix for that, but I think that's unrelated to your issue.\n \t\t"}, "comments_4": {"comment_id": 5, "comment_author": "ChristopherSTAN", "commentT": "2020-11-13T18:07:10Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/ChristopherSTAN>@ChristopherSTAN</denchmark-link>\n  I tested --resume in the colab notebook and pushed a fix for the posixpath error mentioned above. This means --resume will work correctly if you start training a new model with master. For previous models that were interrupted, you may want to git checkout <denchmark-link:https://github.com/ultralytics/yolov5/commit/04081f810270712ba3a69577c47e5dcfa850fa90>04081f8</denchmark-link>\n , which is the last commit before the --project commit.\n You could try to git pull master now also and add a line for opt.project = opt.logdir here around L436:\n \n \n \n yolov5/train.py\n \n \n         Lines 430 to 437\n       in\n       379396e\n \n \n \n \n \n \n  # Resume \n \n \n \n  if opt.resume:  # resume an interrupted run \n \n \n \n  ckpt = opt.resume if isinstance(opt.resume, str) else get_latest_run()  # specified or most recent path \n \n \n \n  assert os.path.isfile(ckpt), 'ERROR: --resume checkpoint does not exist' \n \n \n \n  with open(Path(ckpt).parent.parent / 'opt.yaml') as f: \n \n \n \n  opt = argparse.Namespace(**yaml.load(f, Loader=yaml.FullLoader))  # replace \n \n \n \n  opt.cfg, opt.weights, opt.resume = '', ckpt, True \n \n \n \n  logger.info('Resuming training from %s' % ckpt) \n \n \n \n \n \n \t\t"}}}, "commit": {"commit_id": "379396e896b01dff11b984f8a1b14a5bbdd096a5", "commit_author": "Glenn Jocher", "commitT": "2020-11-13 19:03:02+01:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "train.py", "file_new_name": "train.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "40", "deleted_lines": "40,146", "method_info": {"method_name": "train", "method_params": "hyp,opt,device,tb_writer,wandb", "method_startline": "37", "method_endline": "388"}}}}}}}