{"BR": {"BR_id": "1434", "BR_author": "emste", "BRopenT": "2017-10-18T07:32:43Z", "BRcloseT": "2017-10-20T14:51:09Z", "BR_text": {"BRsummary": "Pattern does not match if text is shorter", "BRdescription": "\n If the text that I'm passing to nlp() is shorter than the pattern I'm providing it won't match. That's ok until quantifiers come into play. I would expect that if the last token pattern I provide has an optional quantifier (like '?'), it should still match a text that is shorter than the pattern.\n Example:\n <denchmark-code>import spacy\n \n from spacy.matcher import Matcher\n \n nlp = spacy.load('en_core_web_sm')\n \n def on_match(matcher, doc, i, matches):\n     match_id, start, end = matches[i]\n     match = doc[start : end].text\n     print(f\"on_match: {match}\")\n \n matcher = Matcher(nlp.vocab)\n matcher.add('MyMatcher', on_match,  [ {'ORTH': 'Hello' }, {'IS_ALPHA': True, 'OP': '?'} ])\n \n doc1 = nlp('Hello World')\n doc2 = nlp('Hello')\n matches1 = matcher(doc1)\n matches2 = matcher(doc2)\n print(matches1)\n print(matches2)\n \n # Output:\n # on_match: Hello World\n # [(12700758319762810043, 0, 2)]\n # []\n </denchmark-code>\n \n I expect it to match both 'Hello World' and 'Hello', but it only matches 'Hello World'.\n <denchmark-h:h2>Info about spaCy</denchmark-h>\n \n \n spaCy version: 2.0.0a17\n Platform: Linux-4.9.49-moby-x86_64-with-debian-8.9\n Python version: 3.6.3\n Models: en_core_web_sm, xx_ent_wiki_sm\n \n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "emste", "commentT": "2017-10-18T07:58:24Z", "comment_text": "\n \t\tThanks!\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "emste", "commentT": "2017-10-20T14:51:09Z", "comment_text": "\n \t\tTurns out I thought of this case in general --- but missed it exactly on the ? quantifier!\n I doubt this will be the last Matcher bug you come across. Please keep reporting :)\n \t\t"}, "comments_2": {"comment_id": 3, "comment_author": "emste", "commentT": "2017-10-20T19:06:23Z", "comment_text": "\n \t\tThank you for the quick fix! I really appreciate your work, keep it up.\n \t\t"}, "comments_3": {"comment_id": 4, "comment_author": "emste", "commentT": "2018-05-08T13:27:47Z", "comment_text": "\n \t\tThis thread has been automatically locked since there has not been any recent activity after it was closed. Please open a new issue for related bugs.\n \t\t"}}}, "commit": {"commit_id": "d8391b1c4d344f12c89d78bce64779b24b35d658", "commit_author": "Matthew Honnibal", "commitT": "2017-10-20 16:49:36+02:00", "changed_files": {"file_0": {"file_change_type": "MODIFY", "file_Nmethod": 0, "file_old_name": "spacy\\matcher.pyx", "file_new_name": "spacy\\matcher.pyx", "hunks": {"hunk_0": {"Ismethod": 0, "added_lines": "394", "deleted_lines": "394"}}}, "file_1": {"file_change_type": "ADD", "file_Nmethod": 0, "file_old_name": "None", "file_new_name": "spacy\\tests\\regression\\test_issue1434.py"}}}}