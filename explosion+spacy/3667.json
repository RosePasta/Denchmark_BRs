{"BR": {"BR_id": "3667", "BR_author": "F0rge1cE", "BRopenT": "2019-05-02T17:07:49Z", "BRcloseT": "2019-05-06T21:00:39Z", "BR_text": {"BRsummary": "Unexpected behavior when load pre-trained word2vec", "BRdescription": "\n <denchmark-h:h2>How to reproduce the behaviour</denchmark-h>\n \n I got [E094] Error reading line 50 in vectors file ... when I tried to load my own pre-train Gensim word2vec in .txt fotmat.\n I track down the exception and find it is raised here:\n https://github.com/explosion/spaCy/blob/master/spacy/cli/init_model.py#L184\n Should it be line.rsplit(' ', vectors_data.shape[1]) ? For example, if we have a n-dimension wordvec, there should be n+1 columns for each row. To split the row into n+1 elements(1 word + n-d vec), we only need to split it n+1-1=n times.\n line.rsplit(' ', vectors_data.shape[1] + 1) may cause problem when a word token contains whitespaces.\n <denchmark-h:h2>Your Environment</denchmark-h>\n \n \n spaCy version: 2.0.16\n Platform: Darwin-17.7.0-x86_64-i386-64bit\n Python version: 3.7.3\n \n \t"}, "comments": {"comments_0": {"comment_id": 1, "comment_author": "F0rge1cE", "commentT": "2019-05-03T15:53:35Z", "comment_text": "\n \t\t<denchmark-link:https://github.com/F0rge1cE>@F0rge1cE</denchmark-link>\n  I think you're right, sorry for the off-by-one error. Could you make a pull request with the fix?\n \t\t"}, "comments_1": {"comment_id": 2, "comment_author": "F0rge1cE", "commentT": "2019-06-05T21:15:06Z", "comment_text": "\n \t\tThis thread has been automatically locked since there has not been any recent activity after it was closed. Please open a new issue for related bugs.\n \t\t"}}}, "commit": {"commit_id": "dd1e6b0bc616330e5b12da151855e7ff72a67709", "commit_author": "F0rge1cE", "commitT": "2019-05-06 23:00:38+02:00", "changed_files": {"file_0": {"file_change_type": "ADD", "file_Nmethod": 0, "file_old_name": "None", "file_new_name": ".github\\contributors\\F0rge1cE.md"}, "file_1": {"file_change_type": "MODIFY", "file_Nmethod": 1, "file_old_name": "spacy\\cli\\init_model.py", "file_new_name": "spacy\\cli\\init_model.py", "hunks": {"hunk_0": {"Ismethod": 1, "added_lines": "184", "deleted_lines": "184", "method_info": {"method_name": "read_vectors", "method_params": "vectors_loc", "method_startline": "177", "method_endline": "190"}}}}}}}